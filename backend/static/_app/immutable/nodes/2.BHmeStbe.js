import{d as Ms,f as Fe,s as Ye,a as Ae,c as wi,e as Ar,t as Dr}from"../chunks/NeskJgmQ.js";import{ab as Es,ac as ut,p as bi,ad as ro,s as He,aC as Lr,ae as as,g as R,am as Zt,ah as te,aj as q,al as vt,ag as xe,an as il,af as As,ak as Tn,V as Cr,ai as Pr}from"../chunks/BTWJT82S.js";import{e as on,i as Mn}from"../chunks/4VzGBjfZ.js";import{i as rt}from"../chunks/pL3sWR-W.js";import{c as yn,f as Rr,g as ao,d as Fr,r as zr,s as Vr,h as Nr}from"../chunks/E4cQ8Img.js";import{s as En}from"../chunks/CDd3KmJD.js";import{u as Wr,c as Hr,d as Or,a as qt}from"../chunks/BZbuYn9r.js";import{s as Sn}from"../chunks/DdP_UhzE.js";import{b as Gr}from"../chunks/FcwFcC_H.js";import{b as uo,p as Br}from"../chunks/DIHSayNb.js";const Ir=!0,$e="u-",Ur="uplot",Yr=$e+"hz",jr=$e+"vt",qr=$e+"title",Kr=$e+"wrap",Jr=$e+"under",Zr=$e+"over",Qr=$e+"axis",vl=$e+"off",$r=$e+"select",Xr=$e+"cursor-x",ea=$e+"cursor-y",ta=$e+"cursor-pt",la=$e+"legend",na=$e+"live",sa=$e+"inline",ia=$e+"series",oa=$e+"marker",xi=$e+"label",ra=$e+"value",ln="width",nn="height",en="top",yi="bottom",Nl="left",us="right",Ds="#000",Si=Ds+"0",cs="mousemove",ki="mousedown",fs="mouseup",Ti="mouseenter",Mi="mouseleave",Ei="dblclick",aa="resize",ua="scroll",Ai="change",An="dppxchange",Ls="--",Ul=typeof window<"u",gs=Ul?document:null,Hl=Ul?window:null,ca=Ul?navigator:null;let Me,wn;function vs(){let e=devicePixelRatio;Me!=e&&(Me=e,wn&&ws(Ai,wn,vs),wn=matchMedia(`(min-resolution: ${Me-.001}dppx) and (max-resolution: ${Me+.001}dppx)`),_l(Ai,wn,vs),Hl.dispatchEvent(new CustomEvent(An)))}function yt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function _s(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function We(e,l,i){e.style[l]=i+"px"}function Vt(e,l,i,n){let o=gs.createElement(e);return l!=null&&yt(o,l),i?.insertBefore(o,n),o}function Lt(e,l){return Vt("div",e,l)}const Di=new WeakMap;function Kt(e,l,i,n,o){let c="translate("+l+"px,"+i+"px)",u=Di.get(e);c!=u&&(e.style.transform=c,Di.set(e,c),l<0||i<0||l>n||i>o?yt(e,vl):_s(e,vl))}const Li=new WeakMap;function Ci(e,l,i){let n=l+i,o=Li.get(e);n!=o&&(Li.set(e,n),e.style.background=l,e.style.borderColor=i)}const Pi=new WeakMap;function Ri(e,l,i,n){let o=l+""+i,c=Pi.get(e);o!=c&&(Pi.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Cs={passive:!0},fa={...Cs,capture:!0};function _l(e,l,i,n){l.addEventListener(e,i,n?fa:Cs)}function ws(e,l,i,n){l.removeEventListener(e,i,Cs)}Ul&&vs();function Nt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)o=c?i+n>>1:St((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function co(e){return(i,n,o)=>{let c=-1,u=-1;for(let d=n;d<=o;d++)if(e(i[d])){c=d;break}for(let d=o;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const fo=e=>e!=null,po=e=>e!=null&&e>0,Cn=co(fo),da=co(po);function pa(e,l,i,n=0,o=!1){let c=o?da:Cn,u=o?po:fo;[l,i]=c(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let m=l;m<=i;m++){let w=e[m];u(w)&&(w<d?d=w:w>p&&(p=w))}return[d??Pe,p??-Pe]}function Pn(e,l,i,n){let o=Vi(e),c=Vi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Qt:ho,d=o==1?St:Ct,p=c==1?Ct:St,m=d(u(Ze(e))),w=p(u(Ze(l))),g=Ol(i,m),v=Ol(i,w);return i==10&&(m<0&&(g=Re(g,-m)),w<0&&(v=Re(v,-w))),n||i==2?(e=g*o,l=v*c):(e=_o(e,g),l=Rn(l,v)),[e,l]}function Ps(e,l,i,n){let o=Pn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Rs=.1,Fi={mode:3,pad:Rs},rn={pad:0,soft:null,mode:0},ha={min:rn,max:rn};function Dn(e,l,i,n){return Fn(i)?zi(e,l,i):(rn.pad=i,rn.soft=n?0:null,rn.mode=n?3:0,zi(e,l,ha))}function ke(e,l){return e??l}function ma(e,l,i){for(l=ke(l,0),i=ke(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function zi(e,l,i){let n=i.min,o=i.max,c=ke(n.pad,0),u=ke(o.pad,0),d=ke(n.hard,-Pe),p=ke(o.hard,Pe),m=ke(n.soft,Pe),w=ke(o.soft,-Pe),g=ke(n.mode,0),v=ke(o.mode,0),N=l-e,F=Qt(N),K=ht(Ze(e),Ze(l)),Z=Qt(K),X=Ze(Z-F);(N<1e-24||X>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&m!=Pe&&(c=0),v==2&&w!=-Pe&&(u=0)));let y=N||K||1e3,H=Qt(y),T=Ol(10,St(H)),ce=y*(N==0?e==0?.1:1:c),b=Re(_o(e-ce,T/10),24),G=e>=m&&(g==1||g==3&&b<=m||g==2&&b>=m)?m:Pe,B=ht(d,b<G&&e>=G?G:Wt(G,b)),J=y*(N==0?l==0?.1:1:u),le=Re(Rn(l+J,T/10),24),k=l<=w&&(v==1||v==3&&le>=w||v==2&&le<=w)?w:-Pe,ne=Wt(p,le>k&&l<=k?k:ht(k,le));return B==ne&&B==0&&(ne=100),[B,ne]}const ga=new Intl.NumberFormat(Ul?ca.language:"en-US"),Fs=e=>ga.format(e),kt=Math,kn=kt.PI,Ze=kt.abs,St=kt.floor,Je=kt.round,Ct=kt.ceil,Wt=kt.min,ht=kt.max,Ol=kt.pow,Vi=kt.sign,Qt=kt.log10,ho=kt.log2,va=(e,l=1)=>kt.sinh(e)*l,ds=(e,l=1)=>kt.asinh(e/l),Pe=1/0;function Ni(e){return(Qt((e^e>>31)-(e>>31))|0)+1}function bs(e,l,i){return Wt(ht(e,l),i)}function mo(e){return typeof e=="function"}function _e(e){return mo(e)?e:()=>e}const _a=()=>{},go=e=>e,vo=(e,l)=>l,wa=e=>null,Wi=e=>!0,Hi=(e,l)=>e==l,ba=/\.\d*?(?=9{6,}|0{6,})/gm,wl=e=>{if(bo(e)||ol.has(e))return e;const l=`${e}`,i=l.match(ba);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,c]=l.split("e");return+`${wl(o)}e${c}`}return Re(e,n)};function ml(e,l){return wl(Re(wl(e/l))*l)}function Rn(e,l){return wl(Ct(wl(e/l))*l)}function _o(e,l){return wl(St(wl(e/l))*l)}function Re(e,l=0){if(bo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Je(n)/i}const ol=new Map;function wo(e){return((""+e).split(".")[1]||"").length}function un(e,l,i,n){let o=[],c=n.map(wo);for(let u=l;u<i;u++){let d=Ze(u),p=Re(Ol(e,u),d);for(let m=0;m<n.length;m++){let w=e==10?+`${n[m]}e${u}`:n[m]*p,g=(u>=0?0:d)+(u>=c[m]?0:c[m]),v=e==10?w:Re(w,g);o.push(v),ol.set(v,g)}}return o}const an={},zs=[],Gl=[null,null],sl=Array.isArray,bo=Number.isInteger,xa=e=>e===void 0;function Oi(e){return typeof e=="string"}function Fn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function ya(e){return e!=null&&typeof e=="object"}const Sa=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Bl(e,l=Fn){let i;if(sl(e)){let n=e.find(o=>o!=null);if(sl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof Sa)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Bl(e[n],l))}else i=e;return i}function qe(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(Fn(e[o])?qe(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const ka=0,Ta=1,Ma=2;function Ea(e,l,i){for(let n=0,o,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[c=o++]=null}}}function Aa(e,l){if(Ca(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return Pa(u[0])||(u=La(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],m=p.length;for(let w=0;w<m;w++)i.add(p[w])}let n=[Array.from(i).sort((u,d)=>u-d)],o=n[0].length,c=new Map;for(let u=0;u<o;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let m=1;m<d.length;m++){let w=d[m],g=Array(o).fill(void 0),v=l?l[u][m]:Ta,N=[];for(let F=0;F<w.length;F++){let K=w[F],Z=c.get(p[F]);K===null?v!=ka&&(g[Z]=K,v==Ma&&N.push(Z)):g[Z]=K}Ea(g,N,o),n.push(g)}}return n}const Da=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function La(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let o=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let p=0;p<i;p++)d[p]=u[n[p]];o.push(d)}return o}function Ca(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let c=0;c<i;c++)if(o[c]!=l[c])return!1}}return!0}function Pa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const c=ht(1,St((o-n+1)/l));for(let u=e[n],d=n+c;d<=o;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const yo=["January","February","March","April","May","June","July","August","September","October","November","December"],So=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ko(e){return e.slice(0,3)}const Ra=So.map(ko),Fa=yo.map(ko),za={MMMM:yo,MMM:Fa,WWWW:So,WWW:Ra};function tn(e){return(e<10?"0":"")+e}function Va(e){return(e<10?"00":e<100?"0":"")+e}const Na={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>tn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>tn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>tn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>tn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>tn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Va(e.getMilliseconds())};function Vs(e,l){l=l||za;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Na[o[1]]:o[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const Wa=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Ha(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Wa?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const To=e=>e%1==0,Ln=[1,2,2.5,5],Oa=un(10,-32,0,Ln),Mo=un(10,0,32,Ln),Ga=Mo.filter(To),gl=Oa.concat(Mo),Ns=`
`,Eo="{YYYY}",Gi=Ns+Eo,Ao="{M}/{D}",sn=Ns+Ao,bn=sn+"/{YY}",Do="{aa}",Ba="{h}:{mm}",Wl=Ba+Do,Bi=Ns+Wl,Ii=":{ss}",Ee=null;function Lo(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,c=o*30,u=o*365,p=(e==1?un(10,0,3,Ln).filter(To):un(10,-3,0,Ln)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Eo,Ee,Ee,Ee,Ee,Ee,Ee,1],[o*28,"{MMM}",Gi,Ee,Ee,Ee,Ee,Ee,1],[o,Ao,Gi,Ee,Ee,Ee,Ee,Ee,1],[n,"{h}"+Do,bn,Ee,sn,Ee,Ee,Ee,1],[i,Wl,bn,Ee,sn,Ee,Ee,Ee,1],[l,Ii,bn+" "+Wl,Ee,sn+" "+Wl,Ee,Bi,Ee,1],[e,Ii+".{fff}",bn+" "+Wl,Ee,sn+" "+Wl,Ee,Bi,Ee,1]];function w(g){return(v,N,F,K,Z,X)=>{let y=[],H=Z>=u,T=Z>=c&&Z<u,ce=g(F),b=Re(ce*e,3),G=ps(ce.getFullYear(),H?0:ce.getMonth(),T||H?1:ce.getDate()),B=Re(G*e,3);if(T||H){let J=T?Z/c:0,le=H?Z/u:0,k=b==B?b:Re(ps(G.getFullYear()+le,G.getMonth()+J,1)*e,3),ne=new Date(Je(k/e)),M=ne.getFullYear(),A=ne.getMonth();for(let D=0;k<=K;D++){let re=ps(M+le*D,A+J*D,1),E=re-g(Re(re*e,3));k=Re((+re+E)*e,3),k<=K&&y.push(k)}}else{let J=Z>=o?o:Z,le=St(F)-St(b),k=B+le+Rn(b-B,J);y.push(k);let ne=g(k),M=ne.getHours()+ne.getMinutes()/i+ne.getSeconds()/n,A=Z/n,D=v.axes[N]._space,re=X/D;for(;k=Re(k+Z,e==1?0:3),!(k>K);)if(A>1){let E=St(Re(M+A,6))%24,se=g(k).getHours()-E;se>1&&(se=-1),k-=se*n,M=(M+A)%24;let ie=y[y.length-1];Re((k-ie)/Z,3)*re>=.7&&y.push(k)}else y.push(k)}return y}}return[p,m,w]}const[Ia,Ua,Ya]=Lo(1),[ja,qa,Ka]=Lo(.001);un(2,-53,53,[1]);function Ui(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Yi(e,l){return(i,n,o,c,u)=>{let d=l.find(F=>u>=F[0])||l[l.length-1],p,m,w,g,v,N;return n.map(F=>{let K=e(F),Z=K.getFullYear(),X=K.getMonth(),y=K.getDate(),H=K.getHours(),T=K.getMinutes(),ce=K.getSeconds(),b=Z!=p&&d[2]||X!=m&&d[3]||y!=w&&d[4]||H!=g&&d[5]||T!=v&&d[6]||ce!=N&&d[7]||d[1];return p=Z,m=X,w=y,g=H,v=T,N=ce,b(K)})}}function Ja(e,l){let i=Vs(l);return(n,o,c,u,d)=>o.map(p=>i(e(p)))}function ps(e,l,i){return new Date(e,l,i)}function ji(e,l){return l(e)}const Za="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function qi(e,l){return(i,n,o,c)=>c==null?Ls:l(e(n))}function Qa(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function $a(e,l){return e.series[l].fill(e,l)}const Xa={show:!0,live:!0,isolate:!1,mount:_a,markers:{show:!0,width:2,stroke:Qa,fill:$a,dash:"solid"},idx:null,idxs:null,values:[]};function eu(e,l){let i=e.cursor.points,n=Lt(),o=i.size(e,l);We(n,ln,o),We(n,nn,o);let c=o/-2;We(n,"marginLeft",c),We(n,"marginTop",c);let u=i.width(e,l,o);return u&&We(n,"borderWidth",u),n}function tu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function lu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function nu(e,l){return e.series[l].points.size}const hs=[0,0];function su(e,l,i){return hs[0]=l,hs[1]=i,hs}function xn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ms(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const iu={show:!0,x:!0,y:!0,lock:!1,move:su,points:{one:!1,show:eu,size:nu,width:0,stroke:lu,fill:tu},bind:{mousedown:xn,mouseup:xn,click:xn,dblclick:xn,mousemove:ms,mouseleave:ms,mouseenter:ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Co={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ws=qe({},Co,{filter:vo}),Po=qe({},Ws,{size:10}),Ro=qe({},Co,{show:!1}),Hs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Fo="bold "+Hs,zo=1.5,Ki={show:!0,scale:"x",stroke:Ds,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:2,grid:Ws,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0},ou="Value",ru="Time",Ji={show:!0,scale:"x",auto:!1,sorted:1,min:Pe,max:-Pe,idxs:[]};function au(e,l,i,n,o){return l.map(c=>c==null?"":Fs(c))}function uu(e,l,i,n,o,c,u){let d=[],p=ol.get(o)||0;i=u?i:Re(Rn(i,o),p);for(let m=i;m<=n;m=Re(m+o,p))d.push(Object.is(m,-0)?0:m);return d}function xs(e,l,i,n,o,c,u){const d=[],p=e.scales[e.axes[l].scale].log,m=p==10?Qt:ho,w=St(m(i));o=Ol(p,w),p==10&&(o=gl[Nt(o,gl)]);let g=i,v=o*p;p==10&&(v=gl[Nt(v,gl)]);do d.push(g),g=g+o,p==10&&!ol.has(g)&&(g=Re(g,ol.get(o))),g>=v&&(o=g,v=o*p,p==10&&(v=gl[Nt(v,gl)]));while(g<=n);return d}function cu(e,l,i,n,o,c,u){let p=e.scales[e.axes[l].scale].asinh,m=n>p?xs(e,l,ht(p,i),n,o):[p],w=n>=0&&i<=0?[0]:[];return(i<-p?xs(e,l,ht(p,-n),-i,o):[p]).reverse().map(v=>-v).concat(w,m)}const Vo=/./,fu=/[12357]/,du=/[125]/,Zi=/1/,ys=(e,l,i,n)=>e.map((o,c)=>l==4&&o==0||c%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function pu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=e.scales[u],p=e.valToPos,m=c._space,w=p(10,u),g=p(9,u)-w>=m?Vo:p(7,u)-w>=m?fu:p(5,u)-w>=m?du:Zi;if(g==Zi){let v=Ze(p(1,u)-w);if(v<m)return ys(l.slice().reverse(),d.distr,g,Ct(m/v)).reverse()}return ys(l,d.distr,g,1)}function hu(e,l,i,n,o){let c=e.axes[i],u=c.scale,d=c._space,p=e.valToPos,m=Ze(p(1,u)-p(2,u));return m<d?ys(l.slice().reverse(),3,Vo,Ct(d/m)).reverse():l}function mu(e,l,i,n){return n==null?Ls:l==null?"":Fs(l)}const Qi={show:!0,scale:"y",stroke:Ds,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:3,grid:Ws,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0};function gu(e,l){let i=3+(e||1)*2;return Re(i*l,3)}function vu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],c=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),d=Ze(u-c),p=e.series[l],m=d/(p.points.space*Me);return n[1]-n[0]<=m}const $i={scale:null,auto:!0,sorted:0,min:Pe,max:-Pe},No=(e,l,i,n,o)=>o,Xi={show:!0,auto:!0,sorted:0,gaps:No,alpha:1,facets:[qe({},$i,{scale:"x"}),qe({},$i,{scale:"y"})]},eo={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:No,alpha:1,points:{show:vu,filter:null},values:null,min:Pe,max:-Pe,idxs:[],path:null,clip:null};function _u(e,l,i,n,o){return i/10}const Wo={time:Ir,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},wu=qe({},Wo,{time:!1,ori:1}),to={};function Ho(e,l){let i=to[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,c,u,d,p,m){for(let w=0;w<i.plots.length;w++)i.plots[w]!=o&&i.plots[w].pub(n,o,c,u,d,p,m)}},e!=null&&(to[e]=i)),i}const Il=1,Ss=2;function bl(e,l,i){const n=e.mode,o=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],m=n==2?c[1]:c[l],w=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=d.left,N=d.top,F=d.width,K=d.height,Z=e.valToPosH,X=e.valToPosV;return w.ori==0?i(o,p,m,w,g,Z,X,v,N,F,K,Vn,Yl,Wn,Go,Io):i(o,p,m,w,g,X,Z,N,v,K,F,Nn,jl,Bs,Bo,Uo)}function Os(e,l){let i=0,n=0,o=ke(e.bands,zs);for(let c=0;c<o.length;c++){let u=o[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function bu(e,l,i,n,o){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return o==-1?p.min:o==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function $t(e,l,i,n,o,c){return bl(e,l,(u,d,p,m,w,g,v,N,F,K,Z)=>{let X=u.pxRound;const y=m.dir*(m.ori==0?1:-1),H=m.ori==0?Yl:jl;let T,ce;y==1?(T=i,ce=n):(T=n,ce=i);let b=X(g(d[T],m,K,N)),G=X(v(p[T],w,Z,F)),B=X(g(d[ce],m,K,N)),J=X(v(c==1?w.max:w.min,w,Z,F)),le=new Path2D(o);return H(le,B,J),H(le,b,J),H(le,b,G),le})}function zn(e,l,i,n,o,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?Wn:Bs;let p=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let N=v[0]-p;N>0&&d(u,p,n,N,n+c),p=v[1]}}let m=i+o-p,w=10;m>0&&d(u,p,n-w/2,m,n+c+w)}return u}function xu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Gs(e,l,i,n,o,c,u){let d=[],p=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,v=m;if(o==1)for(;++m<=n&&l[m]===null;)v=m;else for(;--m>=i&&l[m]===null;)v=m;let N=c(e[g]),F=v==g?N:c(e[v]),K=g-o;N=u<=0&&K>=0&&K<p?c(e[K]):N;let X=v+o;F=u>=0&&X>=0&&X<p?c(e[X]):F,F>=N&&d.push([N,F])}return d}function lo(e){return e==0?go:e==1?Je:l=>ml(l,e)}function Oo(e){let l=e==0?Vn:Nn,i=e==0?(o,c,u,d,p,m)=>{o.arcTo(c,u,d,p,m)}:(o,c,u,d,p,m)=>{o.arcTo(u,c,p,d,m)},n=e==0?(o,c,u,d,p)=>{o.rect(c,u,d,p)}:(o,c,u,d,p)=>{o.rect(u,c,p,d)};return(o,c,u,d,p,m=0,w=0)=>{m==0&&w==0?n(o,c,u,d,p):(m=Wt(m,d/2,p/2),w=Wt(w,d/2,p/2),l(o,c+m,u),i(o,c+d,u,c+d,u+p,m),i(o,c+d,u+p,c,u+p,w),i(o,c,u+p,c,u,w),i(o,c,u,c+d,u,m),o.closePath())}}const Vn=(e,l,i)=>{e.moveTo(l,i)},Nn=(e,l,i)=>{e.moveTo(i,l)},Yl=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},Wn=Oo(0),Bs=Oo(1),Go=(e,l,i,n,o,c)=>{e.arc(l,i,n,o,c)},Bo=(e,l,i,n,o,c)=>{e.arc(i,l,n,o,c)},Io=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(l,i,n,o,c,u)},Uo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(i,l,o,n,u,c)};function Yo(e){return(l,i,n,o,c)=>bl(l,i,(u,d,p,m,w,g,v,N,F,K,Z)=>{let{pxRound:X,points:y}=u,H,T;m.ori==0?(H=Vn,T=Go):(H=Nn,T=Bo);const ce=Re(y.width*Me,3);let b=(y.size-y.width)/2*Me,G=Re(b*2,3),B=new Path2D,J=new Path2D,{left:le,top:k,width:ne,height:M}=l.bbox;Wn(J,le-G,k-G,ne+G*2,M+G*2);const A=D=>{if(p[D]!=null){let re=X(g(d[D],m,K,N)),E=X(v(p[D],w,Z,F));H(B,re+b,E),T(B,re,E,b,0,kn*2)}};if(c)c.forEach(A);else for(let D=n;D<=o;D++)A(D);return{stroke:ce>0?B:null,fill:B,clip:J,flags:Il|Ss}})}function jo(e){return(l,i,n,o,c,u)=>{n!=o&&(c!=n&&u!=n&&e(l,i,n),c!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const yu=jo(Yl),Su=jo(jl);function qo(e){const l=ke(e?.alignGaps,0);return(i,n,o,c)=>bl(i,n,(u,d,p,m,w,g,v,N,F,K,Z)=>{[o,c]=Cn(p,o,c);let X=u.pxRound,y=M=>X(g(M,m,K,N)),H=M=>X(v(M,w,Z,F)),T,ce;m.ori==0?(T=Yl,ce=yu):(T=jl,ce=Su);const b=m.dir*(m.ori==0?1:-1),G={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},B=G.stroke;let J=!1;if(c-o>=K*4){let M=C=>i.posToVal(C,m.key,!0),A=null,D=null,re,E,we,me=y(d[b==1?o:c]),se=y(d[o]),ie=y(d[c]),ee=M(b==1?se+1:ie-1);for(let C=b==1?o:c;C>=o&&C<=c;C+=b){let be=d[C],W=(b==1?be<ee:be>ee)?me:y(be),U=p[C];W==me?U!=null?(E=U,A==null?(T(B,W,H(E)),re=A=D=E):E<A?A=E:E>D&&(D=E)):U===null&&(J=!0):(A!=null&&ce(B,me,H(A),H(D),H(re),H(E)),U!=null?(E=U,T(B,W,H(E)),A=D=re=E):(A=D=null,U===null&&(J=!0)),me=W,ee=M(me+b))}A!=null&&A!=D&&we!=me&&ce(B,me,H(A),H(D),H(re),H(E))}else for(let M=b==1?o:c;M>=o&&M<=c;M+=b){let A=p[M];A===null?J=!0:A!=null&&T(B,y(d[M]),H(A))}let[k,ne]=Os(i,n);if(u.fill!=null||k!=0){let M=G.fill=new Path2D(B),A=u.fillTo(i,n,u.min,u.max,k),D=H(A),re=y(d[o]),E=y(d[c]);b==-1&&([E,re]=[re,E]),T(M,E,D),T(M,re,D)}if(!u.spanGaps){let M=[];J&&M.push(...Gs(d,p,o,c,b,y,l)),G.gaps=M=u.gaps(i,n,o,c,M),G.clip=zn(M,m.ori,N,F,K,Z)}return ne!=0&&(G.band=ne==2?[$t(i,n,o,c,B,-1),$t(i,n,o,c,B,1)]:$t(i,n,o,c,B,ne)),G})}function ku(e){const l=ke(e.align,1),i=ke(e.ascDesc,!1),n=ke(e.alignGaps,0),o=ke(e.extend,!1);return(c,u,d,p)=>bl(c,u,(m,w,g,v,N,F,K,Z,X,y,H)=>{[d,p]=Cn(g,d,p);let T=m.pxRound,{left:ce,width:b}=c.bbox,G=se=>T(F(se,v,y,Z)),B=se=>T(K(se,N,H,X)),J=v.ori==0?Yl:jl;const le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},k=le.stroke,ne=v.dir*(v.ori==0?1:-1);let M=B(g[ne==1?d:p]),A=G(w[ne==1?d:p]),D=A,re=A;o&&l==-1&&(re=ce,J(k,re,M)),J(k,A,M);for(let se=ne==1?d:p;se>=d&&se<=p;se+=ne){let ie=g[se];if(ie==null)continue;let ee=G(w[se]),C=B(ie);l==1?J(k,ee,M):J(k,D,C),J(k,ee,C),M=C,D=ee}let E=D;o&&l==1&&(E=ce+b,J(k,E,M));let[we,me]=Os(c,u);if(m.fill!=null||we!=0){let se=le.fill=new Path2D(k),ie=m.fillTo(c,u,m.min,m.max,we),ee=B(ie);J(se,E,ee),J(se,re,ee)}if(!m.spanGaps){let se=[];se.push(...Gs(w,g,d,p,ne,G,n));let ie=m.width*Me/2,ee=i||l==1?ie:-ie,C=i||l==-1?-ie:ie;se.forEach(be=>{be[0]+=ee,be[1]+=C}),le.gaps=se=m.gaps(c,u,d,p,se),le.clip=zn(se,v.ori,Z,X,y,H)}return me!=0&&(le.band=me==2?[$t(c,u,d,p,k,-1),$t(c,u,d,p,k,1)]:$t(c,u,d,p,k,me)),le})}function no(e,l,i,n,o,c,u=Pe){if(e.length>1){let d=null;for(let p=0,m=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let w=Ze(e[p]-e[d]);w<m&&(m=w,u=Ze(i(e[p],n,o,c)-i(e[d],n,o,c)))}d=p}}return u}function Tu(e){e=e||an;const l=ke(e.size,[.6,Pe,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const c=_e(o),u=1-l[0],d=ke(l[1],Pe),p=ke(l[2],1),m=ke(e.disp,an),w=ke(e.each,N=>{}),{fill:g,stroke:v}=m;return(N,F,K,Z)=>bl(N,F,(X,y,H,T,ce,b,G,B,J,le,k)=>{let ne=X.pxRound,M=i,A=n*Me,D=d*Me,re=p*Me,E,we;T.ori==0?[E,we]=c(N,F):[we,E]=c(N,F);const me=T.dir*(T.ori==0?1:-1);let se=T.ori==0?Wn:Bs,ie=T.ori==0?w:(z,De,Ke,xl,rl,Gt,al)=>{w(z,De,Ke,rl,xl,al,Gt)},ee=ke(N.bands,zs).find(z=>z.series[0]==F),C=ee!=null?ee.dir:0,be=X.fillTo(N,F,X.min,X.max,C),L=ne(G(be,ce,k,J)),W,U,pe,ue=le,j=ne(X.width*Me),I=!1,Y=null,ge=null,he=null,Ge=null;g!=null&&(j==0||v!=null)&&(I=!0,Y=g.values(N,F,K,Z),ge=new Map,new Set(Y).forEach(z=>{z!=null&&ge.set(z,new Path2D)}),j>0&&(he=v.values(N,F,K,Z),Ge=new Map,new Set(he).forEach(z=>{z!=null&&Ge.set(z,new Path2D)})));let{x0:ct,size:Ht}=m;if(ct!=null&&Ht!=null){M=1,y=ct.values(N,F,K,Z),ct.unit==2&&(y=y.map(Ke=>N.posToVal(B+Ke*le,T.key,!0)));let z=Ht.values(N,F,K,Z);Ht.unit==2?U=z[0]*le:U=b(z[0],T,le,B)-b(0,T,le,B),ue=no(y,H,b,T,le,B,ue),pe=ue-U+A}else ue=no(y,H,b,T,le,B,ue),pe=ue*u+A,U=ue-pe;pe<1&&(pe=0),j>=U/2&&(j=0),pe<5&&(ne=go);let Ot=pe>0,oe=ue-pe-(Ot?j:0);U=ne(bs(oe,re,D)),W=(M==0?U/2:M==me?0:U)-M*me*((M==0?A/2:0)+(Ot?j/2:0));const $={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},ye=I?null:new Path2D;let Ce=null;if(ee!=null)Ce=N.data[ee.series[1]];else{let{y0:z,y1:De}=m;z!=null&&De!=null&&(H=De.values(N,F,K,Z),Ce=z.values(N,F,K,Z))}let Be=E*U,de=we*U;for(let z=me==1?K:Z;z>=K&&z<=Z;z+=me){let De=H[z];if(De==null)continue;if(Ce!=null){let mt=Ce[z]??0;if(De-mt==0)continue;L=G(mt,ce,k,J)}let Ke=T.distr!=2||m!=null?y[z]:z,xl=b(Ke,T,le,B),rl=G(ke(De,be),ce,k,J),Gt=ne(xl-W),al=ne(ht(rl,L)),_t=ne(Wt(rl,L)),Tt=al-_t;if(De!=null){let mt=De<0?de:Be,Pt=De<0?Be:de;I?(j>0&&he[z]!=null&&se(Ge.get(he[z]),Gt,_t+St(j/2),U,ht(0,Tt-j),mt,Pt),Y[z]!=null&&se(ge.get(Y[z]),Gt,_t+St(j/2),U,ht(0,Tt-j),mt,Pt)):se(ye,Gt,_t+St(j/2),U,ht(0,Tt-j),mt,Pt),ie(N,F,z,Gt-j/2,_t,U+j,Tt)}}return j>0?$.stroke=I?Ge:ye:I||($._fill=X.width==0?X._fill:X._stroke??X._fill,$.width=0),$.fill=I?ge:ye,$})}function Mu(e,l){const i=ke(l?.alignGaps,0);return(n,o,c,u)=>bl(n,o,(d,p,m,w,g,v,N,F,K,Z,X)=>{[c,u]=Cn(m,c,u);let y=d.pxRound,H=E=>y(v(E,w,Z,F)),T=E=>y(N(E,g,X,K)),ce,b,G;w.ori==0?(ce=Vn,G=Yl,b=Io):(ce=Nn,G=jl,b=Uo);const B=w.dir*(w.ori==0?1:-1);let J=H(p[B==1?c:u]),le=J,k=[],ne=[];for(let E=B==1?c:u;E>=c&&E<=u;E+=B)if(m[E]!=null){let me=p[E],se=H(me);k.push(le=se),ne.push(T(m[E]))}const M={stroke:e(k,ne,ce,G,b,y),fill:null,clip:null,band:null,gaps:null,flags:Il},A=M.stroke;let[D,re]=Os(n,o);if(d.fill!=null||D!=0){let E=M.fill=new Path2D(A),we=d.fillTo(n,o,d.min,d.max,D),me=T(we);G(E,le,me),G(E,J,me)}if(!d.spanGaps){let E=[];E.push(...Gs(p,m,c,u,B,H,i)),M.gaps=E=d.gaps(n,o,c,u,E),M.clip=zn(E,w.ori,F,K,Z,X)}return re!=0&&(M.band=re==2?[$t(n,o,c,u,A,-1),$t(n,o,c,u,A,1)]:$t(n,o,c,u,A,re)),M})}function Eu(e){return Mu(Au,e)}function Au(e,l,i,n,o,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),m=Array(u-1),w=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)w[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],m[v]=w[v]/g[v];p[0]=m[0];for(let v=1;v<u-1;v++)m[v]===0||m[v-1]===0||m[v-1]>0!=m[v]>0?p[v]=0:(p[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/m[v-1]+(g[v]+2*g[v-1])/m[v]),isFinite(p[v])||(p[v]=0));p[u-1]=m[u-2];for(let v=0;v<u-1;v++)o(d,e[v]+g[v]/3,l[v]+p[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-p[v+1]*g[v]/3,e[v+1],l[v+1])}return d}const ks=new Set;function so(){for(let e of ks)e.syncRect(!0)}Ul&&(_l(aa,Hl,so),_l(ua,Hl,so,!0),_l(An,Hl,()=>{Qe.pxRatio=Me}));const Du=qo(),Lu=Yo();function io(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ts(c,u,l,i))}function Cu(e,l){return e.map((i,n)=>n==0?{}:qe({},l,i))}function Ts(e,l,i,n){return qe({},l==0?i:n,e)}function Ko(e,l,i){return l==null?Gl:[l,i]}const Pu=Ko;function Ru(e,l,i){return l==null?Gl:Dn(l,i,Rs,!0)}function Jo(e,l,i,n){return l==null?Gl:Pn(l,i,e.scales[n].log,!1)}const Fu=Jo;function Zo(e,l,i,n){return l==null?Gl:Ps(l,i,e.scales[n].log,!1)}const zu=Zo;function Vu(e,l,i,n,o){let c=ht(Ni(e),Ni(l)),u=l-e,d=Nt(o/n*u,i);do{let p=i[d],m=n*p/u;if(m>=o&&c+(p<5?ol.get(p):0)<=17)return[p,m]}while(++d<i.length);return[0,0]}function oo(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=Je((i=+o)*Me))+"px"),[e,l,i]}function Nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Re(l[2]*Me,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Qe(e,l,i){const n={mode:ke(e.mode,1)},o=n.mode;function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function d(t,s,r,a){return s.ori==0?c(t,s,r,a):u(t,s,r,a)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const m=n.root=Lt(Ur);if(e.id!=null&&(m.id=e.id),yt(m,e.class),e.title){let t=Lt(qr,m);t.textContent=e.title}const w=Vt("canvas"),g=n.ctx=w.getContext("2d"),v=Lt(Kr,m);_l("click",v,t=>{t.target===F&&(ze!=Pl||Oe!=Rl)&&ot.click(n,t)},!0);const N=n.under=Lt(Jr,v);v.appendChild(w);const F=n.over=Lt(Zr,v);e=Bl(e);const K=+ke(e.pxAlign,1),Z=lo(K);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const X=e.ms||.001,y=n.series=o==1?io(e.series||[],Ji,eo,!1):Cu(e.series||[null],Xi),H=n.axes=io(e.axes||[],Ki,Qi,!0),T=n.scales={},ce=n.bands=e.bands||[];ce.forEach(t=>{t.fill=_e(t.fill||null),t.dir=ke(t.dir,-1)});const b=o==2?y[1].facets[0].scale:y[0].scale,G={axes:pr,series:ar},B=(e.drawOrder||["axes","series"]).map(t=>G[t]);function J(t){const s=t.distr==3?r=>Qt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:h}=t,_=h-f;return(a-f)/_}}function le(t){let s=T[t];if(s==null){let r=(e.scales||an)[t]||an;if(r.from!=null){le(r.from);let a=qe({},T[r.from],r,{key:t});a.valToPct=J(a),T[t]=a}else{s=T[t]=qe({},t==b?Wo:wu,r),s.key=t;let a=s.time,f=s.range,h=sl(f);if((t!=b||o==2&&!a)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Fi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Fi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Fn(f))){let _=f;f=(x,S,P)=>S==null?Gl:Dn(S,P,_)}s.range=_e(f||(a?Pu:t==b?s.distr==3?Fu:s.distr==4?zu:Ko:s.distr==3?Jo:s.distr==4?Zo:Ru)),s.auto=_e(h?!1:s.auto),s.clamp=_e(s.clamp||_u),s._min=s._max=null,s.valToPct=J(s)}}}le("x"),le("y"),o==1&&y.forEach(t=>{le(t.scale)}),H.forEach(t=>{le(t.scale)});for(let t in e.scales)le(t);const k=T[b],ne=k.distr;let M,A;k.ori==0?(yt(m,Yr),M=c,A=u):(yt(m,jr),M=u,A=c);const D={};for(let t in T){let s=T[t];(s.min!=null||s.max!=null)&&(D[t]={min:s.min,max:s.max},s.min=s.max=null)}const re=e.tzDate||(t=>new Date(Je(t/X))),E=e.fmtDate||Vs,we=X==1?Ya(re):Ka(re),me=Yi(re,Ui(X==1?Ua:qa,E)),se=qi(re,ji(Za,E)),ie=[],ee=n.legend=qe({},Xa,e.legend),C=n.cursor=qe({},iu,{drag:{y:o==2}},e.cursor),be=ee.show,L=C.show,W=ee.markers;ee.idxs=ie,W.width=_e(W.width),W.dash=_e(W.dash),W.stroke=_e(W.stroke),W.fill=_e(W.fill);let U,pe,ue,j=[],I=[],Y,ge=!1,he={};if(ee.live){const t=y[1]?y[1].values:null;ge=t!=null,Y=ge?t(n,1,0):{_:0};for(let s in Y)he[s]=Ls}if(be)if(U=Vt("table",la,m),ue=Vt("tbody",null,U),ee.mount(n,U),ge){pe=Vt("thead",null,U,ue);let t=Vt("tr",null,pe);Vt("th",null,t);for(var Ge in Y)Vt("th",xi,t).textContent=Ge}else yt(U,sa),ee.live&&yt(U,na);const ct={show:!0},Ht={show:!1};function Ot(t,s){if(s==0&&(ge||!ee.live||o==2))return Gl;let r=[],a=Vt("tr",ia,ue,ue.childNodes[s]);yt(a,t.class),t.show||yt(a,vl);let f=Vt("th",null,a);if(W.show){let x=Lt(oa,f);if(s>0){let S=W.width(n,s);S&&(x.style.border=S+"px "+W.dash(n,s)+" "+W.stroke(n,s)),x.style.background=W.fill(n,s)}}let h=Lt(xi,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(W.show||(h.style.color=t.width>0?W.stroke(n,s):W.fill(n,s)),$("click",f,x=>{if(C._lock)return;cl(x);let S=y.indexOf(t);if((x.ctrlKey||x.metaKey)!=ee.isolate){let P=y.some((V,O)=>O>0&&O!=S&&V.show);y.forEach((V,O)=>{O>0&&It(O,P?O==S?ct:Ht:ct,!0,je.setSeries)})}else It(S,{show:!t.show},!0,je.setSeries)},!1),Sl&&$(Ti,f,x=>{C._lock||(cl(x),It(y.indexOf(t),zl,!0,je.setSeries))},!1));for(var _ in Y){let x=Vt("td",ra,a);x.textContent="--",r.push(x)}return[a,r]}const oe=new Map;function $(t,s,r,a=!0){const f=oe.get(s)||{},h=C.bind[t](n,s,r,a);h&&(_l(t,s,f[t]=h),oe.set(s,f))}function ye(t,s,r){const a=oe.get(s)||{};for(let f in a)(t==null||f==t)&&(ws(f,s,a[f]),delete a[f]);t==null&&oe.delete(s)}let Ce=0,Be=0,de=0,z=0,De=0,Ke=0,xl=De,rl=Ke,Gt=de,al=z,_t=0,Tt=0,mt=0,Pt=0;n.bbox={};let Hn=!1,cn=!1,yl=!1,ul=!1,fn=!1,Mt=!1;function On(t,s,r){(r||t!=n.width||s!=n.height)&&Is(t,s),Al(!1),yl=!0,cn=!0,Dl()}function Is(t,s){n.width=Ce=de=t,n.height=Be=z=s,De=Ke=0,tr(),lr();let r=n.bbox;_t=r.left=ml(De*Me,.5),Tt=r.top=ml(Ke*Me,.5),mt=r.width=ml(de*Me,.5),Pt=r.height=ml(z*Me,.5)}const $o=3;function Xo(){let t=!1,s=0;for(;!t;){s++;let r=fr(s),a=dr(s);t=s==$o||r&&a,t||(Is(n.width,n.height),cn=!0)}}function er({width:t,height:s}){On(t,s)}n.setSize=er;function tr(){let t=!1,s=!1,r=!1,a=!1;H.forEach((f,h)=>{if(f.show&&f._show){let{side:_,_size:x}=f,S=_%2,P=f.label!=null?f.labelSize:0,V=x+P;V>0&&(S?(de-=V,_==3?(De+=V,a=!0):r=!0):(z-=V,_==0?(Ke+=V,t=!0):s=!0))}}),fl[0]=t,fl[1]=r,fl[2]=s,fl[3]=a,de-=Xt[1]+Xt[3],De+=Xt[3],z-=Xt[2]+Xt[0],Ke+=Xt[0]}function lr(){let t=De+de,s=Ke+z,r=De,a=Ke;function f(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return a-=_,a+_}}H.forEach((h,_)=>{if(h.show&&h._show){let x=h.side;h._pos=f(x,h._size),h.label!=null&&(h._lpos=f(x,h.labelSize))}})}if(C.dataIdx==null){let t=C.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=_e(t.prox),a=t.bias??=0;C.dataIdx=(f,h,_,x)=>{if(h==0)return _;let S=_,P=r(f,h,_,x)??Pe,V=P>=0&&P<Pe,O=k.ori==0?de:z,fe=C.left,Te=l[0],Se=l[h];if(s.has(Se[_])){S=null;let ve=null,ae=null,Q;if(a==0||a==-1)for(Q=_;ve==null&&Q-- >0;)s.has(Se[Q])||(ve=Q);if(a==0||a==1)for(Q=_;ae==null&&Q++<Se.length;)s.has(Se[Q])||(ae=Q);if(ve!=null||ae!=null)if(V){let Ne=ve==null?-1/0:M(Te[ve],k,O,0),Ie=ae==null?1/0:M(Te[ae],k,O,0),st=fe-Ne,Le=Ie-fe;st<=Le?st<=P&&(S=ve):Le<=P&&(S=ae)}else S=ae==null?ve:ve==null?ae:_-ve<=ae-_?ve:ae}else V&&Ze(fe-M(Te[_],k,O,0))>P&&(S=null);return S}}const cl=t=>{C.event=t};C.idxs=ie,C._lock=!1;let at=C.points;at.show=_e(at.show),at.size=_e(at.size),at.stroke=_e(at.stroke),at.width=_e(at.width),at.fill=_e(at.fill);const Bt=n.focus=qe({},e.focus||{alpha:.3},C.focus),Sl=Bt.prox>=0,kl=Sl&&at.one;let Et=[],Tl=[],Ml=[];function Us(t,s){let r=at.show(n,s);if(r instanceof HTMLElement)return yt(r,ta),yt(r,t.class),Kt(r,-10,-10,de,z),F.insertBefore(r,Et[s]),r}function Ys(t,s){if(o==1||s>0){let r=o==1&&T[t.scale].time,a=t.value;t.value=r?Oi(a)?qi(re,ji(a,E)):a||se:a||mu,t.label=t.label||(r?ru:ou)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Du||wa,t.fillTo=_e(t.fillTo||bu),t.pxAlign=+ke(t.pxAlign,K),t.pxRound=lo(t.pxAlign),t.stroke=_e(t.stroke||null),t.fill=_e(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gu(ht(1,t.width),1),a=t.points=qe({},{size:r,width:ht(1,r*.2),stroke:t.stroke,space:r*2,paths:Lu,_stroke:null,_fill:null},t.points);a.show=_e(a.show),a.filter=_e(a.filter),a.fill=_e(a.fill),a.stroke=_e(a.stroke),a.paths=_e(a.paths),a.pxAlign=t.pxAlign}if(be){let r=Ot(t,s);j.splice(s,0,r[0]),I.splice(s,0,r[1]),ee.values.push(null)}if(L){ie.splice(s,0,null);let r=null;kl?s==0&&(r=Us(t,s)):s>0&&(r=Us(t,s)),Et.splice(s,0,r),Tl.splice(s,0,0),Ml.splice(s,0,0)}nt("addSeries",s)}function nr(t,s){s=s??y.length,t=o==1?Ts(t,s,Ji,eo):Ts(t,s,{},Xi),y.splice(s,0,t),Ys(y[s],s)}n.addSeries=nr;function sr(t){if(y.splice(t,1),be){ee.values.splice(t,1),I.splice(t,1);let s=j.splice(t,1)[0];ye(null,s.firstChild),s.remove()}L&&(ie.splice(t,1),Et.splice(t,1)[0].remove(),Tl.splice(t,1),Ml.splice(t,1)),nt("delSeries",t)}n.delSeries=sr;const fl=[!1,!1,!1,!1];function ir(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=T[t.scale];a==null&&(t.scale=r?y[1].scale:b,a=T[t.scale]);let f=a.time;t.size=_e(t.size),t.space=_e(t.space),t.rotate=_e(t.rotate),sl(t.incrs)&&t.incrs.forEach(_=>{!ol.has(_)&&ol.set(_,wo(_))}),t.incrs=_e(t.incrs||(a.distr==2?Ga:f?X==1?Ia:ja:gl)),t.splits=_e(t.splits||(f&&a.distr==1?we:a.distr==3?xs:a.distr==4?cu:uu)),t.stroke=_e(t.stroke),t.grid.stroke=_e(t.grid.stroke),t.ticks.stroke=_e(t.ticks.stroke),t.border.stroke=_e(t.border.stroke);let h=t.values;t.values=sl(h)&&!sl(h[0])?_e(h):f?sl(h)?Yi(re,Ui(h,E)):Oi(h)?Ja(re,h):h||me:h||au,t.filter=_e(t.filter||(a.distr>=3&&a.log==10?pu:a.distr==3&&a.log==2?hu:vo)),t.font=oo(t.font),t.labelFont=oo(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(fl[s]=!0,t._el=Lt(Qr,v))}}function ql(t,s,r,a){let[f,h,_,x]=r,S=s%2,P=0;return S==0&&(x||h)&&(P=s==0&&!f||s==2&&!_?Je(Ki.size/3):0),S==1&&(f||_)&&(P=s==1&&!h||s==3&&!x?Je(Qi.size/2):0),P}const js=n.padding=(e.padding||[ql,ql,ql,ql]).map(t=>_e(ke(t,ql))),Xt=n._padding=js.map((t,s)=>t(n,s,fl,0));let it,Xe=null,et=null;const dn=o==1?y[0].idxs:null;let Rt=null,Kl=!1;function qs(t,s){if(l=t??[],n.data=n._data=l,o==2){it=0;for(let r=1;r<y.length;r++)it+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Rt=l[0],it=Rt.length;let r=l;if(ne==2){r=l.slice();let a=r[0]=Array(it);for(let f=0;f<it;f++)a[f]=f}n._data=l=r}if(Al(!0),nt("setData"),ne==2&&(yl=!0),s!==!1){let r=k;r.auto(n,Kl)?Gn():tl(b,r.min,r.max),ul=ul||C.left>=0,Mt=!0,Dl()}}n.setData=qs;function Gn(){Kl=!0;let t,s;o==1&&(it>0?(Xe=dn[0]=0,et=dn[1]=it-1,t=l[0][Xe],s=l[0][et],ne==2?(t=Xe,s=et):t==s&&(ne==3?[t,s]=Pn(t,t,k.log,!1):ne==4?[t,s]=Ps(t,t,k.log,!1):k.time?s=t+Je(86400/X):[t,s]=Dn(t,s,Rs,!0))):(Xe=dn[0]=t=null,et=dn[1]=s=null)),tl(b,t,s)}let pn,El,Bn,In,Un,Yn,jn,qn,Kn,gt;function Ks(t,s,r,a,f,h){t??=Si,r??=zs,a??="butt",f??=Si,h??="round",t!=pn&&(g.strokeStyle=pn=t),f!=El&&(g.fillStyle=El=f),s!=Bn&&(g.lineWidth=Bn=s),h!=Un&&(g.lineJoin=Un=h),a!=Yn&&(g.lineCap=Yn=a),r!=In&&g.setLineDash(In=r)}function Js(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=jn&&(g.font=jn=t),r!=qn&&(g.textAlign=qn=r),a!=Kn&&(g.textBaseline=Kn=a)}function Jn(t,s,r,a,f=0){if(a.length>0&&t.auto(n,Kl)&&(s==null||s.min==null)){let h=ke(Xe,0),_=ke(et,a.length-1),x=r.min==null?pa(a,h,_,f,t.distr==3):[r.min,r.max];t.min=Wt(t.min,r.min=x[0]),t.max=ht(t.max,r.max=x[1])}}const Zs={min:null,max:null};function or(){for(let a in T){let f=T[a];D[a]==null&&(f.min==null||D[b]!=null&&f.auto(n,Kl))&&(D[a]=Zs)}for(let a in T){let f=T[a];D[a]==null&&f.from!=null&&D[f.from]!=null&&(D[a]=Zs)}D[b]!=null&&Al(!0);let t={};for(let a in D){let f=D[a];if(f!=null){let h=t[a]=Bl(T[a],ya);if(f.min!=null)qe(h,f);else if(a!=b||o==2)if(it==0&&h.from==null){let _=h.range(n,null,null,a);h.min=_[0],h.max=_[1]}else h.min=Pe,h.max=-Pe}}if(it>0){y.forEach((a,f)=>{if(o==1){let h=a.scale,_=D[h];if(_==null)return;let x=t[h];if(f==0){let S=x.range(n,x.min,x.max,h);x.min=S[0],x.max=S[1],Xe=Nt(x.min,l[0]),et=Nt(x.max,l[0]),et-Xe>1&&(l[0][Xe]<x.min&&Xe++,l[0][et]>x.max&&et--),a.min=Rt[Xe],a.max=Rt[et]}else a.show&&a.auto&&Jn(x,_,a,l[f],a.sorted);a.idxs[0]=Xe,a.idxs[1]=et}else if(f>0&&a.show&&a.auto){let[h,_]=a.facets,x=h.scale,S=_.scale,[P,V]=l[f],O=t[x],fe=t[S];O!=null&&Jn(O,D[x],h,P,h.sorted),fe!=null&&Jn(fe,D[S],_,V,_.sorted),a.min=_.min,a.max=_.max}});for(let a in t){let f=t[a],h=D[a];if(f.from==null&&(h==null||h.min==null)){let _=f.range(n,f.min==Pe?null:f.min,f.max==-Pe?null:f.max,a);f.min=_[0],f.max=_[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let _=f.range(n,h.min,h.max,a);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let a in t){let f=t[a],h=T[a];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let _=h.distr;h._min=_==3?Qt(h.min):_==4?ds(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?Qt(h.max):_==4?ds(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){y.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)yl=!0,nt("setScale",a);L&&C.left>=0&&(ul=Mt=!0)}for(let a in D)D[a]=null}function rr(t){let s=bs(Xe-1,0,it-1),r=bs(et+1,0,it-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<it-1;)r++;return[s,r]}function ar(){if(it>0){let t=y.some(s=>s._focus)&&gt!=Bt.alpha;t&&(g.globalAlpha=gt=Bt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(Qs(r,!1),Qs(r,!0),s._paths==null)){let a=gt;gt!=s.alpha&&(g.globalAlpha=gt=s.alpha);let f=o==2?[0,l[r][0].length-1]:rr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),gt!=a&&(g.globalAlpha=gt=a)}}),y.forEach((s,r)=>{if(r>0&&s.show){let a=gt;gt!=s.alpha&&(g.globalAlpha=gt=s.alpha),s._paths!=null&&$s(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,Xe,et,f),_=s.points.filter(n,r,h,f);(h||_)&&(s.points._paths=s.points.paths(n,r,Xe,et,_),$s(r,!0))}gt!=a&&(g.globalAlpha=gt=a),nt("drawSeries",r)}}),t&&(g.globalAlpha=gt=1)}}function Qs(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function $s(t,s){let r=s?y[t].points:y[t],{stroke:a,fill:f,clip:h,flags:_,_stroke:x=r._stroke,_fill:S=r._fill,_width:P=r.width}=r._paths;P=Re(P*Me,3);let V=null,O=P%2/2;s&&S==null&&(S=P>0?"#fff":x);let fe=r.pxAlign==1&&O>0;if(fe&&g.translate(O,O),!s){let Te=_t-P/2,Se=Tt-P/2,ve=mt+P,ae=Pt+P;V=new Path2D,V.rect(Te,Se,ve,ae)}s?Zn(x,P,r.dash,r.cap,S,a,f,_,h):ur(t,x,P,r.dash,r.cap,S,a,f,_,V,h),fe&&g.translate(-O,-O)}function ur(t,s,r,a,f,h,_,x,S,P,V){let O=!1;S!=0&&ce.forEach((fe,Te)=>{if(fe.series[0]==t){let Se=y[fe.series[1]],ve=l[fe.series[1]],ae=(Se._paths||an).band;sl(ae)&&(ae=fe.dir==1?ae[0]:ae[1]);let Q,Ne=null;Se.show&&ae&&ma(ve,Xe,et)?(Ne=fe.fill(n,Te)||h,Q=Se._paths.clip):ae=null,Zn(s,r,a,f,Ne,_,x,S,P,V,Q,ae),O=!0}}),O||Zn(s,r,a,f,h,_,x,S,P,V)}const Xs=Il|Ss;function Zn(t,s,r,a,f,h,_,x,S,P,V,O){Ks(t,s,r,a,f),(S||P||O)&&(g.save(),S&&g.clip(S),P&&g.clip(P)),O?(x&Xs)==Xs?(g.clip(O),V&&g.clip(V),mn(f,_),hn(t,h,s)):x&Ss?(mn(f,_),g.clip(O),hn(t,h,s)):x&Il&&(g.save(),g.clip(O),V&&g.clip(V),mn(f,_),g.restore(),hn(t,h,s)):(mn(f,_),hn(t,h,s)),(S||P||O)&&g.restore()}function hn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=pn=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function mn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function cr(t,s,r,a){let f=H[t],h;if(a<=0)h=[0,0];else{let _=f._space=f.space(n,t,s,r,a),x=f._incrs=f.incrs(n,t,s,r,a,_);h=Vu(s,r,x,a,_)}return f._found=h}function Qn(t,s,r,a,f,h,_,x,S,P){let V=_%2/2;K==1&&g.translate(V,V),Ks(x,_,S,P,x),g.beginPath();let O,fe,Te,Se,ve=f+(a==0||a==3?-h:h);r==0?(fe=f,Se=ve):(O=f,Te=ve);for(let ae=0;ae<t.length;ae++)s[ae]!=null&&(r==0?O=Te=t[ae]:fe=Se=t[ae],g.moveTo(O,fe),g.lineTo(Te,Se));g.stroke(),K==1&&g.translate(-V,-V)}function fr(t){let s=!0;return H.forEach((r,a)=>{if(!r.show)return;let f=T[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Al(!1));return}else r._show||(s=!1,r._show=!0,Al(!1));let h=r.side,_=h%2,{min:x,max:S}=f,[P,V]=cr(a,x,S,_==0?de:z);if(V==0)return;let O=f.distr==2,fe=r._splits=r.splits(n,a,x,S,P,V,O),Te=f.distr==2?fe.map(Q=>Rt[Q]):fe,Se=f.distr==2?Rt[fe[1]]-Rt[fe[0]]:P,ve=r._values=r.values(n,r.filter(n,Te,a,V,Se),a,V,Se);r._rotate=h==2?r.rotate(n,ve,a,V):0;let ae=r._size;r._size=Ct(r.size(n,ve,a,t)),ae!=null&&r._size!=ae&&(s=!1)}),s}function dr(t){let s=!0;return js.forEach((r,a)=>{let f=r(n,a,fl,t);f!=Xt[a]&&(s=!1),Xt[a]=f}),s}function pr(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,h,_=s.stroke(n,t),x=r==0||r==3?-1:1,[S,P]=s._found;if(s.label!=null){let dt=s.labelGap*x,xt=Je((s._lpos+dt)*Me);Js(s.labelFont[0],_,"center",r==2?en:yi),g.save(),a==1?(f=h=0,g.translate(xt,Je(Tt+Pt/2)),g.rotate((r==3?-kn:kn)/2)):(f=Je(_t+mt/2),h=xt);let hl=mo(s.label)?s.label(n,t,S,P):s.label;g.fillText(hl,f,h),g.restore()}if(P==0)continue;let V=T[s.scale],O=a==0?mt:Pt,fe=a==0?_t:Tt,Te=s._splits,Se=V.distr==2?Te.map(dt=>Rt[dt]):Te,ve=V.distr==2?Rt[Te[1]]-Rt[Te[0]]:S,ae=s.ticks,Q=s.border,Ne=ae.show?ae.size:0,Ie=Je(Ne*Me),st=Je((s.alignTo==2?s._size-Ne-s.gap:s.gap)*Me),Le=s._rotate*-kn/180,Ue=Z(s._pos*Me),wt=(Ie+st)*x,ft=Ue+wt;h=a==0?ft:0,f=a==1?ft:0;let At=s.font[0],Ft=s.align==1?Nl:s.align==2?us:Le>0?Nl:Le<0?us:a==0?"center":r==3?us:Nl,Yt=Le||a==1?"middle":r==2?en:yi;Js(At,_,Ft,Yt);let bt=s.font[1]*s.lineGap,Dt=Te.map(dt=>Z(d(dt,V,O,fe))),zt=s._values;for(let dt=0;dt<zt.length;dt++){let xt=zt[dt];if(xt!=null){a==0?f=Dt[dt]:h=Dt[dt],xt=""+xt;let hl=xt.indexOf(`
`)==-1?[xt]:xt.split(/\n/gm);for(let pt=0;pt<hl.length;pt++){let _i=hl[pt];Le?(g.save(),g.translate(f,h+pt*bt),g.rotate(Le),g.fillText(_i,0,0),g.restore()):g.fillText(_i,f,h+pt*bt)}}}ae.show&&Qn(Dt,ae.filter(n,Se,t,P,ve),a,r,Ue,Ie,Re(ae.width*Me,3),ae.stroke(n,t),ae.dash,ae.cap);let jt=s.grid;jt.show&&Qn(Dt,jt.filter(n,Se,t,P,ve),a,a==0?2:1,a==0?Tt:_t,a==0?Pt:mt,Re(jt.width*Me,3),jt.stroke(n,t),jt.dash,jt.cap),Q.show&&Qn([Ue],[1],a==0?1:0,a==0?1:2,a==1?Tt:_t,a==1?Pt:mt,Re(Q.width*Me,3),Q.stroke(n,t),Q.dash,Q.cap)}nt("drawAxes")}function Al(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let gn=!1,$n=!1,Jl=[];function hr(){$n=!1;for(let t=0;t<Jl.length;t++)nt(...Jl[t]);Jl.length=0}function Dl(){gn||(Da(ei),gn=!0)}function mr(t,s=!1){gn=!0,$n=s,t(n),ei(),s&&Jl.length>0&&queueMicrotask(hr)}n.batch=mr;function ei(){if(Hn&&(or(),Hn=!1),yl&&(Xo(),yl=!1),cn){if(We(N,Nl,De),We(N,en,Ke),We(N,ln,de),We(N,nn,z),We(F,Nl,De),We(F,en,Ke),We(F,ln,de),We(F,nn,z),We(v,ln,Ce),We(v,nn,Be),w.width=Je(Ce*Me),w.height=Je(Be*Me),H.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,_=f%2==1;We(t,_?"left":"top",a-h),We(t,_?"width":"height",r),We(t,_?"top":"left",_?Ke:De),We(t,_?"height":"width",_?z:de),_s(t,vl)}else yt(t,vl)}),pn=El=Bn=Un=Yn=jn=qn=Kn=In=null,gt=1,$l(!0),De!=xl||Ke!=rl||de!=Gt||z!=al){Al(!1);let t=de/Gt,s=z/al;if(L&&!ul&&C.left>=0){C.left*=t,C.top*=s,Ll&&Kt(Ll,Je(C.left),0,de,z),Cl&&Kt(Cl,0,Je(C.top),de,z);for(let r=0;r<Et.length;r++){let a=Et[r];a!=null&&(Tl[r]*=t,Ml[r]*=s,Kt(a,Ct(Tl[r]),Ct(Ml[r]),de,z))}}if(Ve.show&&!fn&&Ve.left>=0&&Ve.width>0){Ve.left*=t,Ve.width*=t,Ve.top*=s,Ve.height*=s;for(let r in ss)We(Fl,r,Ve[r])}xl=De,rl=Ke,Gt=de,al=z}nt("setSize"),cn=!1}Ce>0&&Be>0&&(g.clearRect(0,0,w.width,w.height),nt("drawClear"),B.forEach(t=>t()),nt("draw")),Ve.show&&fn&&(vn(Ve),fn=!1),L&&ul&&(pl(null,!0,!1),ul=!1),ee.show&&ee.live&&Mt&&(ls(),Mt=!1),p||(p=!0,n.status=1,nt("ready")),Kl=!1,gn=!1}n.redraw=(t,s)=>{yl=s||!1,t!==!1?tl(b,k.min,k.max):Dl()};function Xn(t,s){let r=T[t];if(r.from==null){if(it==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(it>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==b&&r.distr==2&&it>0&&(s.min=Nt(s.min,l[0]),s.max=Nt(s.max,l[0]),s.min==s.max&&s.max++),D[t]=s,Hn=!0,Dl()}}n.setScale=Xn;let es,ts,Ll,Cl,ti,li,Pl,Rl,ni,si,ze,Oe,el=!1;const ot=C.drag;let tt=ot.x,lt=ot.y;L&&(C.x&&(es=Lt(Xr,F)),C.y&&(ts=Lt(ea,F)),k.ori==0?(Ll=es,Cl=ts):(Ll=ts,Cl=es),ze=C.left,Oe=C.top);const Ve=n.select=qe({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Fl=Ve.show?Lt($r,Ve.over?F:N):null;function vn(t,s){if(Ve.show){for(let r in t)Ve[r]=t[r],r in ss&&We(Fl,r,t[r]);s!==!1&&nt("setSelect")}}n.setSelect=vn;function gr(t){if(y[t].show)be&&_s(j[t],vl);else if(be&&yt(j[t],vl),L){let r=kl?Et[0]:Et[t];r!=null&&Kt(r,-10,-10,de,z)}}function tl(t,s,r){Xn(t,{min:s,max:r})}function It(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&y.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,gr(h),o==2?(tl(f.facets[0].scale,null,null),tl(f.facets[1].scale,null,null)):tl(f.scale,null,null),Dl())}),r!==!1&&nt("setSeries",t,s),a&&Xl("setSeries",n,t,s)}n.setSeries=It;function vr(t,s){qe(ce[t],s)}function _r(t,s){t.fill=_e(t.fill||null),t.dir=ke(t.dir,-1),s=s??ce.length,ce.splice(s,0,t)}function wr(t){t==null?ce.length=0:ce.splice(t,1)}n.addBand=_r,n.setBand=vr,n.delBand=wr;function br(t,s){y[t].alpha=s,L&&Et[t]!=null&&(Et[t].style.opacity=s),be&&j[t]&&(j[t].style.opacity=s)}let Jt,ll,dl;const zl={focus:!0};function xr(t){if(t!=dl){let s=t==null,r=Bt.alpha!=1;y.forEach((a,f)=>{if(o==1||f>0){let h=s||f==0||f==t;a._focus=s?null:h,r&&br(f,h?1:Bt.alpha)}}),dl=t,r&&Dl()}}be&&Sl&&$(Mi,U,t=>{C._lock||(cl(t),dl!=null&&It(null,zl,!0,je.setSeries))});function Ut(t,s,r){let a=T[s];r&&(t=t/Me-(a.ori==1?Ke:De));let f=de;a.ori==1&&(f=z,t=f-t),a.dir==-1&&(t=f-t);let h=a._min,_=a._max,x=t/f,S=h+(_-h)*x,P=a.distr;return P==3?Ol(10,S):P==4?va(S,a.asinh):P==100?a.bwd(S):S}function yr(t,s){let r=Ut(t,b,s);return Nt(r,l[0],Xe,et)}n.valToIdx=t=>Nt(t,l[0]),n.posToIdx=yr,n.posToVal=Ut,n.valToPos=(t,s,r)=>T[s].ori==0?c(t,T[s],r?mt:de,r?_t:0):u(t,T[s],r?Pt:z,r?Tt:0),n.setCursor=(t,s,r)=>{ze=t.left,Oe=t.top,pl(null,s,r)};function ii(t,s){We(Fl,Nl,Ve.left=t),We(Fl,ln,Ve.width=s)}function oi(t,s){We(Fl,en,Ve.top=t),We(Fl,nn,Ve.height=s)}let Zl=k.ori==0?ii:oi,Ql=k.ori==1?ii:oi;function Sr(){if(be&&ee.live)for(let t=o==2?1:0;t<y.length;t++){if(t==0&&ge)continue;let s=ee.values[t],r=0;for(let a in s)I[t][r++].firstChild.nodeValue=s[a]}}function ls(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{ie[a]=r}):xa(t.idx)||ie.fill(t.idx),ee.idx=ie[0]),be&&ee.live){for(let r=0;r<y.length;r++)(r>0||o==1&&!ge)&&kr(r,ie[r]);Sr()}Mt=!1,s!==!1&&nt("setLegend")}n.setLegend=ls;function kr(t,s){let r=y[t],a=t==0&&ne==2?Rt:l[t],f;ge?f=r.values(n,t,s)??he:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?he:{_:f}),ee.values[t]=f}function pl(t,s,r){ni=ze,si=Oe,[ze,Oe]=C.move(n,ze,Oe),C.left=ze,C.top=Oe,L&&(Ll&&Kt(Ll,Je(ze),0,de,z),Cl&&Kt(Cl,0,Je(Oe),de,z));let a,f=Xe>et;Jt=Pe,ll=null;let h=k.ori==0?de:z,_=k.ori==1?de:z;if(ze<0||it==0||f){a=C.idx=null;for(let x=0;x<y.length;x++){let S=Et[x];S!=null&&Kt(S,-10,-10,de,z)}Sl&&It(null,zl,!0,t==null&&je.setSeries),ee.live&&(ie.fill(a),Mt=!0)}else{let x,S,P;o==1&&(x=k.ori==0?ze:Oe,S=Ut(x,b),a=C.idx=Nt(S,l[0],Xe,et),P=M(l[0][a],k,h,0));let V=-10,O=-10,fe=0,Te=0,Se=!0,ve="",ae="";for(let Q=o==2?1:0;Q<y.length;Q++){let Ne=y[Q],Ie=ie[Q],st=Ie==null?null:o==1?l[Q][Ie]:l[Q][1][Ie],Le=C.dataIdx(n,Q,a,S),Ue=Le==null?null:o==1?l[Q][Le]:l[Q][1][Le];if(Mt=Mt||Ue!=st||Le!=Ie,ie[Q]=Le,Q>0&&Ne.show){let wt=Le==null?-10:Le==a?P:M(o==1?l[0][Le]:l[Q][0][Le],k,h,0),ft=Ue==null?-10:A(Ue,o==1?T[Ne.scale]:T[Ne.facets[1].scale],_,0);if(Sl&&Ue!=null){let At=k.ori==1?ze:Oe,Ft=Ze(Bt.dist(n,Q,Le,ft,At));if(Ft<Jt){let Yt=Bt.bias;if(Yt!=0){let bt=Ut(At,Ne.scale),Dt=Ue>=0?1:-1,zt=bt>=0?1:-1;zt==Dt&&(zt==1?Yt==1?Ue>=bt:Ue<=bt:Yt==1?Ue<=bt:Ue>=bt)&&(Jt=Ft,ll=Q)}else Jt=Ft,ll=Q}}if(Mt||kl){let At,Ft;k.ori==0?(At=wt,Ft=ft):(At=ft,Ft=wt);let Yt,bt,Dt,zt,jt,dt,xt=!0,hl=at.bbox;if(hl!=null){xt=!1;let pt=hl(n,Q);Dt=pt.left,zt=pt.top,Yt=pt.width,bt=pt.height}else Dt=At,zt=Ft,Yt=bt=at.size(n,Q);if(dt=at.fill(n,Q),jt=at.stroke(n,Q),kl)Q==ll&&Jt<=Bt.prox&&(V=Dt,O=zt,fe=Yt,Te=bt,Se=xt,ve=dt,ae=jt);else{let pt=Et[Q];pt!=null&&(Tl[Q]=Dt,Ml[Q]=zt,Ri(pt,Yt,bt,xt),Ci(pt,dt,jt),Kt(pt,Ct(Dt),Ct(zt),de,z))}}}}if(kl){let Q=Bt.prox,Ne=dl==null?Jt<=Q:Jt>Q||ll!=dl;if(Mt||Ne){let Ie=Et[0];Ie!=null&&(Tl[0]=V,Ml[0]=O,Ri(Ie,fe,Te,Se),Ci(Ie,ve,ae),Kt(Ie,Ct(V),Ct(O),de,z))}}}if(Ve.show&&el)if(t!=null){let[x,S]=je.scales,[P,V]=je.match,[O,fe]=t.cursor.sync.scales,Te=t.cursor.drag;if(tt=Te._x,lt=Te._y,tt||lt){let{left:Se,top:ve,width:ae,height:Q}=t.select,Ne=t.scales[O].ori,Ie=t.posToVal,st,Le,Ue,wt,ft,At=x!=null&&P(x,O),Ft=S!=null&&V(S,fe);At&&tt?(Ne==0?(st=Se,Le=ae):(st=ve,Le=Q),Ue=T[x],wt=M(Ie(st,O),Ue,h,0),ft=M(Ie(st+Le,O),Ue,h,0),Zl(Wt(wt,ft),Ze(ft-wt))):Zl(0,h),Ft&&lt?(Ne==1?(st=Se,Le=ae):(st=ve,Le=Q),Ue=T[S],wt=A(Ie(st,fe),Ue,_,0),ft=A(Ie(st+Le,fe),Ue,_,0),Ql(Wt(wt,ft),Ze(ft-wt))):Ql(0,_)}else is()}else{let x=Ze(ni-ti),S=Ze(si-li);if(k.ori==1){let fe=x;x=S,S=fe}tt=ot.x&&x>=ot.dist,lt=ot.y&&S>=ot.dist;let P=ot.uni;P!=null?tt&&lt&&(tt=x>=P,lt=S>=P,!tt&&!lt&&(S>x?lt=!0:tt=!0)):ot.x&&ot.y&&(tt||lt)&&(tt=lt=!0);let V,O;tt&&(k.ori==0?(V=Pl,O=ze):(V=Rl,O=Oe),Zl(Wt(V,O),Ze(O-V)),lt||Ql(0,_)),lt&&(k.ori==1?(V=Pl,O=ze):(V=Rl,O=Oe),Ql(Wt(V,O),Ze(O-V)),tt||Zl(0,h)),!tt&&!lt&&(Zl(0,0),Ql(0,0))}if(ot._x=tt,ot._y=lt,t==null){if(r){if(vi!=null){let[x,S]=je.scales;je.values[0]=x!=null?Ut(k.ori==0?ze:Oe,x):null,je.values[1]=S!=null?Ut(k.ori==1?ze:Oe,S):null}Xl(cs,n,ze,Oe,de,z,a)}if(Sl){let x=r&&je.setSeries,S=Bt.prox;dl==null?Jt<=S&&It(ll,zl,!0,x):Jt>S?It(null,zl,!0,x):ll!=dl&&It(ll,zl,!0,x)}}Mt&&(ee.idx=a,ls()),s!==!1&&nt("setCursor")}let nl=null;Object.defineProperty(n,"rect",{get(){return nl==null&&$l(!1),nl}});function $l(t=!1){t?nl=null:(nl=F.getBoundingClientRect(),nt("syncRect",nl))}function ri(t,s,r,a,f,h,_){C._lock||el&&t!=null&&t.movementX==0&&t.movementY==0||(ns(t,s,r,a,f,h,_,!1,t!=null),t!=null?pl(null,!0,!0):pl(s,!0,!1))}function ns(t,s,r,a,f,h,_,x,S){if(nl==null&&$l(!1),cl(t),t!=null)r=t.clientX-nl.left,a=t.clientY-nl.top;else{if(r<0||a<0){ze=-10,Oe=-10;return}let[P,V]=je.scales,O=s.cursor.sync,[fe,Te]=O.values,[Se,ve]=O.scales,[ae,Q]=je.match,Ne=s.axes[0].side%2==1,Ie=k.ori==0?de:z,st=k.ori==1?de:z,Le=Ne?h:f,Ue=Ne?f:h,wt=Ne?a:r,ft=Ne?r:a;if(Se!=null?r=ae(P,Se)?d(fe,T[P],Ie,0):-10:r=Ie*(wt/Le),ve!=null?a=Q(V,ve)?d(Te,T[V],st,0):-10:a=st*(ft/Ue),k.ori==1){let At=r;r=a,a=At}}S&&(s==null||s.cursor.event.type==cs)&&((r<=1||r>=de-1)&&(r=ml(r,de)),(a<=1||a>=z-1)&&(a=ml(a,z))),x?(ti=r,li=a,[Pl,Rl]=C.move(n,r,a)):(ze=r,Oe=a)}const ss={width:0,height:0,left:0,top:0};function is(){vn(ss,!1)}let ai,ui,ci,fi;function di(t,s,r,a,f,h,_){el=!0,tt=lt=ot._x=ot._y=!1,ns(t,s,r,a,f,h,_,!0,!1),t!=null&&($(fs,gs,pi,!1),Xl(ki,n,Pl,Rl,de,z,null));let{left:x,top:S,width:P,height:V}=Ve;ai=x,ui=S,ci=P,fi=V}function pi(t,s,r,a,f,h,_){el=ot._x=ot._y=!1,ns(t,s,r,a,f,h,_,!1,!0);let{left:x,top:S,width:P,height:V}=Ve,O=P>0||V>0,fe=ai!=x||ui!=S||ci!=P||fi!=V;if(O&&fe&&vn(Ve),ot.setScale&&O&&fe){let Te=x,Se=P,ve=S,ae=V;if(k.ori==1&&(Te=S,Se=V,ve=x,ae=P),tt&&tl(b,Ut(Te,b),Ut(Te+Se,b)),lt)for(let Q in T){let Ne=T[Q];Q!=b&&Ne.from==null&&Ne.min!=Pe&&tl(Q,Ut(ve+ae,Q),Ut(ve,Q))}is()}else C.lock&&(C._lock=!C._lock,pl(s,!0,t!=null));t!=null&&(ye(fs,gs),Xl(fs,n,ze,Oe,de,z,null))}function Tr(t,s,r,a,f,h,_){if(C._lock)return;cl(t);let x=el;if(el){let S=!0,P=!0,V=10,O,fe;k.ori==0?(O=tt,fe=lt):(O=lt,fe=tt),O&&fe&&(S=ze<=V||ze>=de-V,P=Oe<=V||Oe>=z-V),O&&S&&(ze=ze<Pl?0:de),fe&&P&&(Oe=Oe<Rl?0:z),pl(null,!0,!0),el=!1}ze=-10,Oe=-10,ie.fill(null),pl(null,!0,!0),x&&(el=x)}function hi(t,s,r,a,f,h,_){C._lock||(cl(t),Gn(),is(),t!=null&&Xl(Ei,n,ze,Oe,de,z,null))}function mi(){H.forEach(Nu),On(n.width,n.height,!0)}_l(An,Hl,mi);const Vl={};Vl.mousedown=di,Vl.mousemove=ri,Vl.mouseup=pi,Vl.dblclick=hi,Vl.setSeries=(t,s,r,a)=>{let f=je.match[2];r=f(n,s,r),r!=-1&&It(r,a,!0,!1)},L&&($(ki,F,di),$(cs,F,ri),$(Ti,F,t=>{cl(t),$l(!1)}),$(Mi,F,Tr),$(Ei,F,hi),ks.add(n),n.syncRect=$l);const _n=n.hooks=e.hooks||{};function nt(t,s,r){$n?Jl.push([t,s,r]):t in _n&&_n[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)_n[s]=(_n[s]||[]).concat(t.hooks[s])});const gi=(t,s,r)=>r,je=qe({key:null,setSeries:!1,filters:{pub:Wi,sub:Wi},scales:[b,y[1]?y[1].scale:null],match:[Hi,Hi,gi],values:[null,null]},C.sync);je.match.length==2&&je.match.push(gi),C.sync=je;const vi=je.key,os=Ho(vi);function Xl(t,s,r,a,f,h,_){je.filters.pub(t,s,r,a,f,h,_)&&os.pub(t,s,r,a,f,h,_)}os.sub(n);function Mr(t,s,r,a,f,h,_){je.filters.sub(t,s,r,a,f,h,_)&&Vl[t](null,s,r,a,f,h,_)}n.pub=Mr;function Er(){os.unsub(n),ks.delete(n),oe.clear(),ws(An,Hl,mi),m.remove(),U?.remove(),nt("destroy")}n.destroy=Er;function rs(){nt("init",e,l),qs(l||e.data,!1),D[b]?Xn(b,D[b]):Gn(),fn=Ve.show&&(Ve.width>0||Ve.height>0),ul=Mt=!0,On(e.width,e.height)}return y.forEach(Ys),H.forEach(ir),i?i instanceof HTMLElement?(i.appendChild(m),rs()):i(n,rs):rs(),n}Qe.assign=qe;Qe.fmtNum=Fs;Qe.rangeNum=Dn;Qe.rangeLog=Pn;Qe.rangeAsinh=Ps;Qe.orient=bl;Qe.pxRatio=Me;Qe.join=Aa;Qe.fmtDate=Vs,Qe.tzDate=Ha;Qe.sync=Ho;{Qe.addGap=xu,Qe.clipGaps=zn;let e=Qe.paths={points:Yo};e.linear=qo,e.stepped=ku,e.bars=Tu,e.spline=Eu}const Qo="/api",Wu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Hu(e,l=24){const i=await fetch(`${Qo}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Ou(e=24){const l=await fetch(`${Qo}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Gu=Fe('<button type="button"> </button>'),Bu=Fe('<div class="chart-loading svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div> <span>Loading chart data...</span></div>'),Iu=Fe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Uu=Fe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yu=Fe('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--amber-400);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function ju(e,l){Es(l,!0);let i=Zt(()=>yn.config.smoothing_enabled),n=Zt(()=>yn.config.smoothing_samples),o=ut("UTC"),c=ut(!1),u=Zt(()=>yn.config.temp_units==="C"),d,p=null,m=ut(!0),w=ut(null),g=ut(24),v=ut(bi([])),N=ut(bi([]));const F={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},K="#fbbf24",Z="rgba(251, 191, 36, 0.3)",X="#71717a",y="#a1a1aa",H="rgba(255, 255, 255, 0.04)",T="#22d3ee";function ce(L,W,U){const pe=new Date(L*1e3);try{return U?pe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:W}):pe.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:W})}catch(ue){return console.warn("Invalid timezone:",W,ue),U?pe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):pe.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function b(L,W,U){const pe=K,ue=F[l.tiltColor]||y;return{width:L,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(j,I,Y)=>{const ge=(Y-I)*.1||.005;return[I-ge,Y+ge]}},temp:{auto:!0,range:(j,I,Y)=>{const ge=Y-I,he=10;if(ge<he){const ct=(Y+I)/2;return[ct-he/2,ct+he/2]}const Ge=ge*.1;return[I-Ge,Y+Ge]}}},axes:[{stroke:X,grid:{stroke:H,width:1},ticks:{stroke:H,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(Y=>ce(Y,U,R(g)<=24))},{scale:"sg",stroke:pe,grid:{stroke:H,width:1},ticks:{stroke:H,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(Y=>Y.toFixed(3)),side:3},{scale:"temp",stroke:ue,grid:{show:!1},ticks:{stroke:H,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(j,I)=>I.map(Y=>Y.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:pe,width:2,fill:(j,I)=>{const Y=j.ctx.createLinearGradient(0,j.bbox.top,0,j.bbox.top+j.bbox.height);return Y.addColorStop(0,Z),Y.addColorStop(1,"transparent"),Y},points:{show:!1},paths:Qe.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ue,width:1.5,dash:[4,4],points:{show:!1},paths:Qe.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:T,width:1.5,dash:[2,4],points:{show:!1},paths:Qe.paths.spline?.()}]}}function G(L,W){if(W<=1)return L;const U=[];for(let pe=0;pe<L.length;pe++){const ue=[],j=Math.floor(W/2);for(let I=Math.max(0,pe-j);I<=Math.min(L.length-1,pe+j);I++){const Y=L[I];Y!==null&&ue.push(Y)}ue.length>0?U.push(ue.reduce((I,Y)=>I+Y,0)/ue.length):U.push(null)}return U}function B(L,W,U,pe,ue){if(L.length<=ue)return[L,W,U,pe];const j=Math.ceil(L.length/ue),I=[],Y=[],ge=[],he=[];for(let Ge=0;Ge<L.length;Ge+=j){const ct=Math.min(Ge+j,L.length);let Ht=0,Ot=0,oe=0,$=0,ye=0,Ce=0;for(let Be=Ge;Be<ct;Be++)W[Be]!==null&&(Ht+=W[Be],Ot++),U[Be]!==null&&(oe+=U[Be],$++),pe[Be]!==null&&(ye+=pe[Be],Ce++);I.push(L[Math.floor((Ge+ct-1)/2)]),Y.push(Ot>0?Ht/Ot:null),ge.push($>0?oe/$:null),he.push(Ce>0?ye/Ce:null)}return[I,Y,ge,he]}function J(L){return!L.endsWith("Z")&&!L.match(/[+-]\d{2}:\d{2}$/)&&(L=L+"Z"),new Date(L).getTime()/1e3}function le(L,W,U){if(L.length===0||W.length===0)return W.map(()=>null);const pe=[...L].sort((I,Y)=>J(I.timestamp)-J(Y.timestamp)),ue=pe.map(I=>J(I.timestamp)),j=pe.map(I=>I.temperature===null?null:U?I.temperature:I.temperature*9/5+32);return W.map(I=>{let Y=null,ge=null;for(let he=0;he<ue.length;he++)if(ue[he]<=I&&(Y={time:ue[he],temp:j[he]}),ue[he]>=I&&ge===null){ge={time:ue[he],temp:j[he]};break}if(Y&&ge&&Y.temp!==null&&ge.temp!==null){if(Y.time===ge.time)return Y.temp;const he=(I-Y.time)/(ge.time-Y.time);return Y.temp+he*(ge.temp-Y.temp)}return Y!==null&&Y.temp!==null?Y.temp:ge!==null&&ge.temp!==null?ge.temp:null})}function k(L,W,U){const pe=[...L].reverse();let ue=[],j=[],I=[];for(const he of pe){ue.push(J(he.timestamp)),j.push(he.sg_calibrated??he.sg_raw);const Ge=he.temp_calibrated??he.temp_raw;Ge!==null?I.push(U?Rr(Ge):Ge):I.push(null)}let Y=le(W,ue,U);return R(i)&&R(n)>1&&(j=G(j,R(n)),I=G(I,R(n)),Y=G(Y,R(n))),[ue,j,I,Y]=B(ue,j,I,Y,500),[ue,j,I,Y]}async function ne(){He(m,!0),He(w,null);try{const[L,W]=await Promise.all([Hu(l.tiltId,R(g)),Ou(R(g)).catch(()=>[])]);He(v,L,!0),He(N,W,!0),M()}catch(L){He(w,L instanceof Error?L.message:"Failed to load data",!0)}finally{He(m,!1)}}function M(){if(!d||R(v).length===0)return;const L=k(R(v),R(N),R(u)),W=b(d.clientWidth,R(u),R(o));p&&p.destroy(),p=new Qe(W,L,d)}function A(){p&&d&&p.setSize({width:d.clientWidth,height:220})}ro(async()=>{try{const L=await fetch("/api/system/timezone");if(L.ok){const W=await L.json();He(o,W.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ne(),He(c,!0),window.addEventListener("resize",A)}),Lr(()=>{p?.destroy(),window.removeEventListener("resize",A)}),as(()=>{R(c)&&R(g)&&ne()}),as(()=>{R(u)!==void 0&&R(v).length>0&&d&&M()}),as(()=>{R(i),R(n),R(v).length>0&&d&&M()});var D=Yu(),re=te(D),E=te(re);on(E,21,()=>Wu,Mn,(L,W)=>{var U=Gu();let pe;U.__click=()=>He(g,R(W).hours,!0);var ue=te(U,!0);q(U),vt(()=>{pe=En(U,1,"range-btn svelte-1e832qd",null,pe,{active:R(g)===R(W).hours}),Ye(ue,R(W).label)}),Ae(L,U)}),q(E);var we=xe(E,2),me=xe(te(we),2),se=te(me);il(2),q(me),il(2),q(we),q(re);var ie=xe(re,2),ee=te(ie);{var C=L=>{var W=Bu();Ae(L,W)},be=L=>{var W=wi(),U=Tn(W);{var pe=j=>{var I=Iu(),Y=xe(te(I),2);Y.__click=ne,q(I),Ae(j,I)},ue=j=>{var I=wi(),Y=Tn(I);{var ge=he=>{var Ge=Uu();Ae(he,Ge)};rt(Y,he=>{R(v).length===0&&he(ge)},!0)}Ae(j,I)};rt(U,j=>{R(w)?j(pe):j(ue,!1)},!0)}Ae(L,W)};rt(ee,L=>{R(m)?L(C):L(be,!1)})}q(ie),uo(ie,L=>d=L,()=>d),q(D),vt(()=>Sn(se,`background: ${(F[l.tiltColor]||"var(--text-secondary)")??""};`)),Ae(e,D),As()}Ms(["click"]);var qu=Fe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),Ku=Fe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Ju=Fe('<div class="w-1 rounded-sm transition-all"></div>'),Zu=Fe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qu=Fe('<div class="chart-section svelte-3twv7v"><!></div>'),$u=Fe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xu=Fe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)]"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function ec(e,l){Es(l,!0);let i=Br(l,"expanded",3,!1),n=ut(!1),o=ut(""),c=ut(null),u=ut(!1);function d(){He(o,l.tilt.beer_name,!0),He(n,!0),setTimeout(()=>R(c)?.focus(),0)}async function p(){if(R(u))return;const oe=R(o).trim();if(!oe||oe===l.tilt.beer_name){He(n,!1);return}He(u,!0);const $=await Wr(l.tilt.id,oe);He(u,!1),$&&He(n,!1)}function m(oe){oe.key==="Enter"?p():oe.key==="Escape"&&He(n,!1)}let w=Zt(ao);const g={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function v(oe){return oe.toFixed(3)}function N(oe){return Fr(oe)}function F(oe){return oe>=-50?{bars:4,color:"var(--positive)"}:oe>=-60?{bars:3,color:"var(--positive)"}:oe>=-70?{bars:2,color:"var(--warning)"}:{bars:1,color:"var(--negative)"}}function K(oe){const $=Math.floor((Date.now()-new Date(oe).getTime())/1e3);if($<10)return"just now";if($<60)return`${$}s ago`;const ye=Math.floor($/60);if(ye<60)return`${ye}m ago`;const Ce=Math.floor(ye/60);return Ce<24?`${Ce}h ago`:`${Math.floor(Ce/24)}d ago`}let Z=Zt(()=>g[l.tilt.color]||"var(--tilt-black)"),X=Zt(()=>F(l.tilt.rssi)),y=Zt(()=>K(l.tilt.last_seen));var H=Xu();let T;var ce=te(H),b=xe(ce,2),G=te(b),B=te(G),J=te(B);{var le=oe=>{var $=qu();zr($),$.__keydown=m,uo($,ye=>He(c,ye),()=>R(c)),vt(()=>$.disabled=R(u)),Ar("blur",$,p),Gr($,()=>R(o),ye=>He(o,ye)),Ae(oe,$)},k=oe=>{var $=Ku();$.__click=d;var ye=te($),Ce=te(ye,!0);q(ye),il(2),q($),vt(()=>Ye(Ce,l.tilt.beer_name)),Ae(oe,$)};rt(J,oe=>{R(n)?oe(le):oe(k,!1)})}var ne=xe(J,2),M=te(ne),A=xe(M,2),D=te(A,!0);q(A),q(ne),q(B);var re=xe(B,2),E=te(re);on(E,20,()=>Array(4),Mn,(oe,$,ye)=>{var Ce=Ju();vt(()=>Sn(Ce,`
								height: ${8+ye*4}px;
								background: ${(ye<R(X).bars?R(X).color:"var(--bg-hover)")??""};
								opacity: ${ye<R(X).bars?1:.4};
							`)),Ae(oe,Ce)}),q(E);var we=xe(E,2),me=te(we);q(we),q(re),q(G);var se=xe(G,2),ie=te(se),ee=te(ie),C=te(ee,!0);q(ee),il(2),q(ie);var be=xe(ie,2),L=te(be),W=te(L,!0),U=xe(W),pe=te(U,!0);q(U),q(L),il(2),q(be),q(se);var ue=xe(se,2);{var j=oe=>{var $=Zu(),ye=xe(te($),2),Ce=te(ye,!0);q(ye);var Be=xe(ye,4),de=te(Be);q(Be),q($),vt((z,De)=>{Ye(Ce,z),Ye(de,`${De??""}${R(w)??""}`)},[()=>v(l.tilt.sg_raw),()=>N(l.tilt.temp_raw)]),Ae(oe,$)};rt(ue,oe=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&oe(j)})}var I=xe(ue,2);{var Y=oe=>{var $=Qu(),ye=te($);ju(ye,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),q($),Ae(oe,$)};rt(I,oe=>{i()&&oe(Y)})}var ge=xe(I,2),he=te(ge),Ge=te(he);q(he);var ct=xe(he,2),Ht=te(ct);{var Ot=oe=>{var $=$u();$.__click=function(...Be){l.onToggleExpand?.apply(this,Be)};var ye=te($);let Ce;q($),vt(()=>{Vr($,"aria-label",i()?"Collapse chart":"Expand chart"),Ce=En(ye,0,"w-4 h-4 transition-transform",null,Ce,{"rotate-180":i()})}),Ae(oe,$)};rt(Ht,oe=>{l.onToggleExpand&&oe(Ot)})}il(2),q(ct),q(ge),q(b),q(H),vt((oe,$)=>{T=En(H,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,T,{expanded:i()}),Sn(ce,`background: ${R(Z)??""};`),Sn(M,`background: ${R(Z)??""};`),Ye(D,l.tilt.color),Ye(me,`${l.tilt.rssi??""} dBm`),Ye(C,oe),Ye(W,$),Ye(pe,R(w)),Ye(Ge,`Updated ${R(y)??""}`)},[()=>v(l.tilt.sg),()=>N(l.tilt.temp)]),Ae(e,H),As()}Ms(["keydown","click"]);var tc=Fe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),lc=Fe('<div class="alerts-list svelte-1uha8ag"></div>'),nc=Fe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),sc=Fe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),ic=Fe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),oc=Fe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),rc=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),ac=Fe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag"> </span> <span class="label svelte-1uha8ag">Temp</span></div>'),uc=Fe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag">%</span> <span class="label svelte-1uha8ag">Humidity</span></div>'),cc=Fe('<div class="ambient-card svelte-1uha8ag"><div class="ambient-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Room Ambient</span></div> <div class="ambient-values svelte-1uha8ag"><!> <!></div></div>'),fc=Fe('<div class="forecast-day svelte-1uha8ag"><span class="day-name svelte-1uha8ag"> </span> <span class="day-icon svelte-1uha8ag"> </span> <div class="day-temps svelte-1uha8ag"><span class="temp-high svelte-1uha8ag"> </span> <span class="temp-low svelte-1uha8ag"> </span></div></div>'),dc=Fe('<div class="forecast-card svelte-1uha8ag"><div class="forecast-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Forecast</span></div> <div class="forecast-days svelte-1uha8ag"></div></div>'),pc=Fe('<div class="tilt-grid svelte-1uha8ag"></div> <!> <!>',1),hc=Fe("<!> <!>",1);function Tc(e,l){Es(l,!0);let i=ut(null),n=ut(!1),o=ut(!1),c=ut(!1);async function u(){He(n,!0);try{const b=await fetch("/api/alerts");b.ok&&He(i,await b.json(),!0)}catch(b){console.error("Failed to load alerts:",b)}finally{He(n,!1)}}ro(()=>{const b=localStorage.getItem("tiltui_alerts_dismissed"),G=localStorage.getItem("tiltui_alerts_dismissed_time");b==="true"&&G&&Date.now()-parseInt(G,10)<360*60*1e3&&He(o,!0),Hr(),u();const B=setInterval(u,1800*1e3);return()=>{Or(),clearInterval(B)}});let d=Zt(()=>Array.from(qt.tilts.values())),p=ut(null);function m(b){He(p,R(p)===b?null:b,!0)}function w(b){return yn.config.temp_units==="F"?(b*9/5+32).toFixed(1):b.toFixed(1)}function g(b){return b===null?"--":Math.round(b).toString()}function v(b){return{sunny:"","clear-night":"",partlycloudy:"",cloudy:"",rainy:"",pouring:"",snowy:"",fog:"",windy:"",lightning:"","lightning-rainy":"",hail:""}[b]||""}function N(b){try{const G=new Date(b),B=new Date,J=new Date(B);return J.setDate(J.getDate()+1),G.toDateString()===B.toDateString()?"Today":G.toDateString()===J.toDateString()?"Tomorrow":G.toLocaleDateString("en-US",{weekday:"short"})}catch{return"Day"}}function F(){He(o,!0),localStorage.setItem("tiltui_alerts_dismissed","true"),localStorage.setItem("tiltui_alerts_dismissed_time",Date.now().toString())}function K(){He(c,!R(c))}var Z=hc();Nr("1uha8ag",b=>{Cr(()=>{Pr.title="Dashboard | Tilt UI"})});var X=Tn(Z);{var y=b=>{var G=sc(),B=te(G),J=te(B),le=xe(te(J),4),k=te(le,!0);q(le),q(J);var ne=xe(J,2);ne.__click=F,q(B);var M=xe(B,2);{var A=E=>{var we=lc();on(we,21,()=>R(i).alerts,Mn,(me,se)=>{var ie=tc();let ee;var C=te(ie),be=te(C);q(C);var L=xe(C,2),W=te(L,!0);q(L),q(ie),vt(()=>{ee=En(ie,1,"alert-item svelte-1uha8ag",null,ee,{warning:R(se).level==="warning",critical:R(se).level==="critical"}),Ye(be,`${R(se).day??""}:`),Ye(W,R(se).message)}),Ae(me,ie)}),q(we),Ae(E,we)};rt(M,E=>{R(c)||E(A)})}var D=xe(M,2);{var re=E=>{var we=nc();we.__click=K;var me=te(we,!0);q(we),vt(()=>Ye(me,R(c)?`Show ${R(i).alerts.length} alerts`:"Show less")),Ae(E,we)};rt(D,E=>{R(i).alerts.length>3&&E(re)})}q(G),vt(()=>Ye(k,R(i).alerts.length)),Ae(b,G)};rt(X,b=>{R(i)&&R(i).alerts.length>0&&!R(o)&&b(y)})}var H=xe(X,2);{var T=b=>{var G=rc(),B=xe(te(G),4),J=te(B);{var le=A=>{var D=Dr("Waiting for Tilt hydrometers to broadcast...");Ae(A,D)},k=A=>{var D=ic();Ae(A,D)};rt(J,A=>{qt.connected?A(le):A(k,!1)})}q(B);var ne=xe(B,2);{var M=A=>{var D=oc();Ae(A,D)};rt(ne,A=>{qt.connected&&A(M)})}q(G),Ae(b,G)},ce=b=>{var G=pc(),B=Tn(G);on(B,21,()=>R(d),M=>M.id,(M,A)=>{{let D=Zt(()=>R(p)===R(A).id);ec(M,{get tilt(){return R(A)},get expanded(){return R(D)},onToggleExpand:()=>m(R(A).id)})}}),q(B);var J=xe(B,2);{var le=M=>{var A=cc(),D=xe(te(A),2),re=te(D);{var E=se=>{var ie=ac(),ee=te(ie),C=te(ee,!0);q(ee);var be=xe(ee,2),L=te(be,!0);q(be),il(2),q(ie),vt((W,U)=>{Ye(C,W),Ye(L,U)},[()=>w(qt.ambient.temperature),ao]),Ae(se,ie)};rt(re,se=>{qt.ambient.temperature!==null&&se(E)})}var we=xe(re,2);{var me=se=>{var ie=uc(),ee=te(ie),C=te(ee,!0);q(ee),il(4),q(ie),vt(be=>Ye(C,be),[()=>qt.ambient.humidity.toFixed(0)]),Ae(se,ie)};rt(we,se=>{qt.ambient.humidity!==null&&se(me)})}q(D),q(A),Ae(M,A)};rt(J,M=>{qt.ambient&&(qt.ambient.temperature!==null||qt.ambient.humidity!==null)&&M(le)})}var k=xe(J,2);{var ne=M=>{var A=dc(),D=xe(te(A),2);on(D,21,()=>R(i).forecast.slice(0,5),Mn,(re,E)=>{var we=fc(),me=te(we),se=te(me,!0);q(me);var ie=xe(me,2),ee=te(ie,!0);q(ie);var C=xe(ie,2),be=te(C),L=te(be);q(be);var W=xe(be,2),U=te(W);q(W),q(C),q(we),vt((pe,ue,j,I)=>{Ye(se,pe),Ye(ee,ue),Ye(L,`${j??""}`),Ye(U,`${I??""}`)},[()=>N(R(E).datetime),()=>v(R(E).condition),()=>g(R(E).temperature),()=>g(R(E).templow)]),Ae(re,we)}),q(D),q(A),Ae(M,A)};rt(k,M=>{R(i)&&R(i).forecast.length>0&&M(ne)})}Ae(b,G)};rt(H,b=>{R(d).length===0?b(T):b(ce,!1)})}Ae(e,Z),As()}Ms(["click"]);export{Tc as component};
