import{d as Vn,c as ma,a as De,f as Fe,s as xe,g as ga,t as Fr}from"../chunks/lZYuFeLm.js";import{h as zr,k as Or,b4 as Vr,f as Nr,ab as Nn,ak as Vs,g as b,am as Dt,af as Gn,ah as R,ag as X,aj as L,ac as et,al as gt,s as Me,an as Ml,p as Ai,ad as wa,b3 as Gr,ae as Ts,V as Hr,ai as Wr}from"../chunks/KfNDMb7P.js";import{e as wn,i as Rn}from"../chunks/BrMo0dxU.js";import{B as Ir,i as wt}from"../chunks/DN3Nn4_2.js";import{f as dn,c as Ln,g as _a,r as xa,s as Di,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as El}from"../chunks/CMo0SdGN.js";import{u as Yr,c as jr,d as qr,e as Kr,a as gs}from"../chunks/CNF3ZaXk.js";import{w as un}from"../chunks/Dp8S1B6d.js";import{s as Cn}from"../chunks/QJqSGRkr.js";import{b as ba}from"../chunks/DvdFc3xZ.js";import{b as Ns,p as Ms}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){zr&&Or();var n=new Ir(e),a=!Vr();Nr(()=>{var u=l();a&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const Xr=!0,nt="u-",$r="uplot",eo=nt+"hz",to=nt+"vt",lo=nt+"title",no=nt+"wrap",so=nt+"under",io=nt+"over",ao=nt+"axis",Tl=nt+"off",ro=nt+"select",oo=nt+"cursor-x",uo=nt+"cursor-y",co=nt+"cursor-pt",fo=nt+"legend",po=nt+"live",ho=nt+"inline",vo=nt+"series",mo=nt+"marker",Li=nt+"label",go=nt+"value",pn="width",hn="height",cn="top",Ci="bottom",Bl="left",ws="right",Gs="#000",Pi=Gs+"0",_s="mousemove",Ri="mousedown",xs="mouseup",Fi="mouseenter",zi="mouseleave",Oi="dblclick",wo="resize",_o="scroll",Vi="change",Fn="dppxchange",Hs="--",Zl=typeof window<"u",Es=Zl?document:null,Yl=Zl?window:null,xo=Zl?navigator:null;let Te,En;function As(){let e=devicePixelRatio;Te!=e&&(Te=e,En&&Ls(Vi,En,As),En=matchMedia(`(min-resolution: ${Te-.001}dppx) and (max-resolution: ${Te+.001}dppx)`),Al(Vi,En,As),Yl.dispatchEvent(new CustomEvent(Fn)))}function Rt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Ds(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ge(e,l,i){e.style[l]=i+"px"}function Jt(e,l,i,n){let a=Es.createElement(e);return l!=null&&Rt(a,l),i?.insertBefore(a,n),a}function It(e,l){return Jt("div",e,l)}const Ni=new WeakMap;function sl(e,l,i,n,a){let u="translate("+l+"px,"+i+"px)",c=Ni.get(e);u!=c&&(e.style.transform=u,Ni.set(e,u),l<0||i<0||l>n||i>a?Rt(e,Tl):Ds(e,Tl))}const Gi=new WeakMap;function Hi(e,l,i){let n=l+i,a=Gi.get(e);n!=a&&(Gi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Wi=new WeakMap;function Ii(e,l,i,n){let a=l+""+i,u=Wi.get(e);a!=u&&(Wi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ws={passive:!0},bo={...Ws,capture:!0};function Al(e,l,i,n){l.addEventListener(e,i,n?bo:Ws)}function Ls(e,l,i,n){l.removeEventListener(e,i,Ws)}Zl&&As();function Zt(e,l,i,n){let a;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)a=u?i+n>>1:Ft((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Sa(e){return(i,n,a)=>{let u=-1,c=-1;for(let d=n;d<=a;d++)if(e(i[d])){u=d;break}for(let d=a;d>=n;d--)if(e(i[d])){c=d;break}return[u,c]}}const ya=e=>e!=null,ka=e=>e!=null&&e>0,Hn=Sa(ya),So=Sa(ka);function yo(e,l,i,n=0,a=!1){let u=a?So:Hn,c=a?ka:ya;[l,i]=u(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let v=l;v<=i;v++){let y=e[v];c(y)&&(y<d?d=y:y>p&&(p=y))}return[d??Pe,p??-Pe]}function Wn(e,l,i,n){let a=Yi(e),u=Yi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?rl:Ta,d=a==1?Ft:Bt,p=u==1?Bt:Ft,v=d(c(tt(e))),y=p(c(tt(l))),m=jl(i,v),g=jl(i,y);return i==10&&(v<0&&(m=Re(m,-v)),y<0&&(g=Re(g,-y))),n||i==2?(e=m*a,l=g*u):(e=Da(e,m),l=In(l,g)),[e,l]}function Is(e,l,i,n){let a=Wn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Bs=.1,Bi={mode:3,pad:Bs},mn={pad:0,soft:null,mode:0},ko={min:mn,max:mn};function zn(e,l,i,n){return Bn(i)?Ui(e,l,i):(mn.pad=i,mn.soft=n?0:null,mn.mode=n?3:0,Ui(e,l,ko))}function ye(e,l){return e??l}function To(e,l,i){for(l=ye(l,0),i=ye(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ui(e,l,i){let n=i.min,a=i.max,u=ye(n.pad,0),c=ye(a.pad,0),d=ye(n.hard,-Pe),p=ye(a.hard,Pe),v=ye(n.soft,Pe),y=ye(a.soft,-Pe),m=ye(n.mode,0),g=ye(a.mode,0),O=l-e,z=rl(O),C=yt(tt(e),tt(l)),F=rl(C),Z=tt(F-z);(O<1e-24||Z>10)&&(O=0,(e==0||l==0)&&(O=1e-24,m==2&&v!=Pe&&(u=0),g==2&&y!=-Pe&&(c=0)));let k=O||C||1e3,U=rl(k),w=jl(10,Ft(U)),Q=k*(O==0?e==0?.1:1:u),P=Re(Da(e-Q,w/10),24),V=e>=v&&(m==1||m==3&&P<=v||m==2&&P>=v)?v:Pe,Y=yt(d,P<V&&e>=V?V:Qt(V,P)),ie=k*(O==0?l==0?.1:1:c),$=Re(In(l+ie,w/10),24),M=l<=y&&(g==1||g==3&&$>=y||g==2&&$<=y)?y:-Pe,se=Qt(p,$>M&&l<=M?M:yt(M,$));return Y==se&&Y==0&&(se=100),[Y,se]}const Mo=new Intl.NumberFormat(Zl?xo.language:"en-US"),Us=e=>Mo.format(e),zt=Math,Pn=zt.PI,tt=zt.abs,Ft=zt.floor,$e=zt.round,Bt=zt.ceil,Qt=zt.min,yt=zt.max,jl=zt.pow,Yi=zt.sign,rl=zt.log10,Ta=zt.log2,Eo=(e,l=1)=>zt.sinh(e)*l,bs=(e,l=1)=>zt.asinh(e/l),Pe=1/0;function ji(e){return(rl((e^e>>31)-(e>>31))|0)+1}function Cs(e,l,i){return Qt(yt(e,l),i)}function Ma(e){return typeof e=="function"}function me(e){return Ma(e)?e:()=>e}const Ao=()=>{},Ea=e=>e,Aa=(e,l)=>l,Do=e=>null,qi=e=>!0,Ki=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Dl=e=>{if(Ca(e)||gl.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,u]=l.split("e");return+`${Dl(a)}e${u}`}return Re(e,n)};function yl(e,l){return Dl(Re(Dl(e/l))*l)}function In(e,l){return Dl(Bt(Dl(e/l))*l)}function Da(e,l){return Dl(Ft(Dl(e/l))*l)}function Re(e,l=0){if(Ca(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return $e(n)/i}const gl=new Map;function La(e){return((""+e).split(".")[1]||"").length}function _n(e,l,i,n){let a=[],u=n.map(La);for(let c=l;c<i;c++){let d=tt(c),p=Re(jl(e,c),d);for(let v=0;v<n.length;v++){let y=e==10?+`${n[v]}e${c}`:n[v]*p,m=(c>=0?0:d)+(c>=u[v]?0:u[v]),g=e==10?y:Re(y,m);a.push(g),gl.set(g,m)}}return a}const gn={},Ys=[],ql=[null,null],ml=Array.isArray,Ca=Number.isInteger,Co=e=>e===void 0;function Ji(e){return typeof e=="string"}function Bn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),Pa="__proto__";function Kl(e,l=Bn){let i;if(ml(e)){let n=e.find(a=>a!=null);if(ml(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Kl(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Pa&&(i[n]=Kl(e[n],l))}else i=e;return i}function Ze(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Pa&&(Bn(e[a])?Ze(e[a],Kl(n[a])):e[a]=Kl(n[a]))}return e}const Fo=0,zo=1,Oo=2;function Vo(e,l,i){for(let n=0,a,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[u=a++]=null}}}function No(e,l){if(Wo(e)){let c=e[0].slice();for(let d=1;d<e.length;d++)c.push(...e[d].slice(1));return Io(c[0])||(c=Ho(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let p=e[c][0],v=p.length;for(let y=0;y<v;y++)i.add(p[y])}let n=[Array.from(i).sort((c,d)=>c-d)],a=n[0].length,u=new Map;for(let c=0;c<a;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let d=e[c],p=d[0];for(let v=1;v<d.length;v++){let y=d[v],m=Array(a).fill(void 0),g=l?l[c][v]:zo,O=[];for(let z=0;z<y.length;z++){let C=y[z],F=u.get(p[z]);C===null?g!=Fo&&(m[F]=C,g==Oo&&O.push(F)):m[F]=C}Vo(m,O,a),n.push(m)}}return n}const Go=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let a=[];for(let u=0;u<e.length;u++){let c=e[u],d=Array(i);for(let p=0;p<i;p++)d[p]=c[n[p]];a.push(d)}return a}function Wo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let u=0;u<i;u++)if(a[u]!=l[u])return!1}}return!0}function Io(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const u=yt(1,Ft((a-n+1)/l));for(let c=e[n],d=n+u;d<=a;d+=u){const p=e[d];if(p!=null){if(p<=c)return!1;c=p}}return!0}const Ra=["January","February","March","April","May","June","July","August","September","October","November","December"],Fa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function za(e){return e.slice(0,3)}const Bo=Fa.map(za),Uo=Ra.map(za),Yo={MMMM:Ra,MMM:Uo,WWWW:Fa,WWW:Bo};function fn(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>fn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>fn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>fn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>fn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>fn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function js(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?qo[a[1]]:a[0]);return u=>{let c="";for(let d=0;d<i.length;d++)c+=typeof i[d]=="string"?i[d]:i[d](u,l);return c}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Oa=e=>e%1==0,On=[1,2,2.5,5],Zo=_n(10,-32,0,On),Va=_n(10,0,32,On),Qo=Va.filter(Oa),kl=Zo.concat(Va),qs=`
`,Na="{YYYY}",Zi=qs+Na,Ga="{M}/{D}",vn=qs+Ga,An=vn+"/{YY}",Ha="{aa}",Xo="{h}:{mm}",Ul=Xo+Ha,Qi=qs+Ul,Xi=":{ss}",Ee=null;function Wa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,u=a*30,c=a*365,p=(e==1?_n(10,0,3,On).filter(Oa):_n(10,-3,0,On)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const v=[[c,Na,Ee,Ee,Ee,Ee,Ee,Ee,1],[a*28,"{MMM}",Zi,Ee,Ee,Ee,Ee,Ee,1],[a,Ga,Zi,Ee,Ee,Ee,Ee,Ee,1],[n,"{h}"+Ha,An,Ee,vn,Ee,Ee,Ee,1],[i,Ul,An,Ee,vn,Ee,Ee,Ee,1],[l,Xi,An+" "+Ul,Ee,vn+" "+Ul,Ee,Qi,Ee,1],[e,Xi+".{fff}",An+" "+Ul,Ee,vn+" "+Ul,Ee,Qi,Ee,1]];function y(m){return(g,O,z,C,F,Z)=>{let k=[],U=F>=c,w=F>=u&&F<c,Q=m(z),P=Re(Q*e,3),V=Ss(Q.getFullYear(),U?0:Q.getMonth(),w||U?1:Q.getDate()),Y=Re(V*e,3);if(w||U){let ie=w?F/u:0,$=U?F/c:0,M=P==Y?P:Re(Ss(V.getFullYear()+$,V.getMonth()+ie,1)*e,3),se=new Date($e(M/e)),N=se.getFullYear(),ee=se.getMonth();for(let q=0;M<=C;q++){let ae=Ss(N+$*q,ee+ie*q,1),H=ae-m(Re(ae*e,3));M=Re((+ae+H)*e,3),M<=C&&k.push(M)}}else{let ie=F>=a?a:F,$=Ft(z)-Ft(P),M=Y+$+In(P-Y,ie);k.push(M);let se=m(M),N=se.getHours()+se.getMinutes()/i+se.getSeconds()/n,ee=F/n,q=g.axes[O]._space,ae=Z/q;for(;M=Re(M+F,e==1?0:3),!(M>C);)if(ee>1){let H=Ft(Re(N+ee,6))%24,re=m(M).getHours()-H;re>1&&(re=-1),M-=re*n,N=(N+ee)%24;let fe=k[k.length-1];Re((M-fe)/F,3)*ae>=.7&&k.push(M)}else k.push(M)}return k}}return[p,v,y]}const[$o,eu,tu]=Wa(1),[lu,nu,su]=Wa(.001);_n(2,-53,53,[1]);function $i(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ea(e,l){return(i,n,a,u,c)=>{let d=l.find(z=>c>=z[0])||l[l.length-1],p,v,y,m,g,O;return n.map(z=>{let C=e(z),F=C.getFullYear(),Z=C.getMonth(),k=C.getDate(),U=C.getHours(),w=C.getMinutes(),Q=C.getSeconds(),P=F!=p&&d[2]||Z!=v&&d[3]||k!=y&&d[4]||U!=m&&d[5]||w!=g&&d[6]||Q!=O&&d[7]||d[1];return p=F,v=Z,y=k,m=U,g=w,O=Q,P(C)})}}function iu(e,l){let i=js(l);return(n,a,u,c,d)=>a.map(p=>i(e(p)))}function Ss(e,l,i){return new Date(e,l,i)}function ta(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function la(e,l){return(i,n,a,u)=>u==null?Hs:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=It(),a=i.size(e,l);Ge(n,pn,a),Ge(n,hn,a);let u=a/-2;Ge(n,"marginLeft",u),Ge(n,"marginTop",u);let c=i.width(e,l,a);return c&&Ge(n,"borderWidth",c),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const ys=[0,0];function hu(e,l,i){return ys[0]=l,ys[1]=i,ys}function Dn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function ks(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Dn,mouseup:Dn,click:Dn,dblclick:Dn,mousemove:ks,mouseleave:ks,mouseenter:ks},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ia={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ks=Ze({},Ia,{filter:Aa}),Ba=Ze({},Ks,{size:10}),Ua=Ze({},Ia,{show:!1}),Js='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ya="bold "+Js,ja=1.5,na={show:!0,scale:"x",stroke:Gs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:2,grid:Ks,ticks:Ba,border:Ua,font:Js,lineGap:ja,rotate:0},mu="Value",gu="Time",sa={show:!0,scale:"x",auto:!1,sorted:1,min:Pe,max:-Pe,idxs:[]};function wu(e,l,i,n,a){return l.map(u=>u==null?"":Us(u))}function _u(e,l,i,n,a,u,c){let d=[],p=gl.get(a)||0;i=c?i:Re(In(i,a),p);for(let v=i;v<=n;v=Re(v+a,p))d.push(Object.is(v,-0)?0:v);return d}function Ps(e,l,i,n,a,u,c){const d=[],p=e.scales[e.axes[l].scale].log,v=p==10?rl:Ta,y=Ft(v(i));a=jl(p,y),p==10&&(a=kl[Zt(a,kl)]);let m=i,g=a*p;p==10&&(g=kl[Zt(g,kl)]);do d.push(m),m=m+a,p==10&&!gl.has(m)&&(m=Re(m,gl.get(a))),m>=g&&(a=m,g=a*p,p==10&&(g=kl[Zt(g,kl)]));while(m<=n);return d}function xu(e,l,i,n,a,u,c){let p=e.scales[e.axes[l].scale].asinh,v=n>p?Ps(e,l,yt(p,i),n,a):[p],y=n>=0&&i<=0?[0]:[];return(i<-p?Ps(e,l,yt(p,-n),-i,a):[p]).reverse().map(g=>-g).concat(y,v)}const qa=/./,bu=/[12357]/,Su=/[125]/,ia=/1/,Rs=(e,l,i,n)=>e.map((a,u)=>l==4&&a==0||u%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=e.scales[c],p=e.valToPos,v=u._space,y=p(10,c),m=p(9,c)-y>=v?qa:p(7,c)-y>=v?bu:p(5,c)-y>=v?Su:ia;if(m==ia){let g=tt(p(1,c)-y);if(g<v)return Rs(l.slice().reverse(),d.distr,m,Bt(v/g)).reverse()}return Rs(l,d.distr,m,1)}function ku(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=u._space,p=e.valToPos,v=tt(p(1,c)-p(2,c));return v<d?Rs(l.slice().reverse(),3,qa,Bt(d/v)).reverse():l}function Tu(e,l,i,n){return n==null?Hs:l==null?"":Us(l)}const aa={show:!0,scale:"y",stroke:Gs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:3,grid:Ks,ticks:Ba,border:Ua,font:Js,lineGap:ja,rotate:0};function Mu(e,l){let i=3+(e||1)*2;return Re(i*l,3)}function Eu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],u=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),d=tt(c-u),p=e.series[l],v=d/(p.points.space*Te);return n[1]-n[0]<=v}const ra={scale:null,auto:!0,sorted:0,min:Pe,max:-Pe},Ka=(e,l,i,n,a)=>a,oa={show:!0,auto:!0,sorted:0,gaps:Ka,alpha:1,facets:[Ze({},ra,{scale:"x"}),Ze({},ra,{scale:"y"})]},ua={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Ka,alpha:1,points:{show:Eu,filter:null},values:null,min:Pe,max:-Pe,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Ja={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=Ze({},Ja,{time:!1,ori:1}),ca={};function Za(e,l){let i=ca[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,u,c,d,p,v){for(let y=0;y<i.plots.length;y++)i.plots[y]!=a&&i.plots[y].pub(n,a,u,c,d,p,v)}},e!=null&&(ca[e]=i)),i}const Jl=1,Fs=2;function Ll(e,l,i){const n=e.mode,a=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,d=e.bbox;let p=u[0],v=n==2?u[1]:u[l],y=n==2?c[a.facets[0].scale]:c[e.series[0].scale],m=n==2?c[a.facets[1].scale]:c[a.scale],g=d.left,O=d.top,z=d.width,C=d.height,F=e.valToPosH,Z=e.valToPosV;return y.ori==0?i(a,p,v,y,m,F,Z,g,O,z,C,Yn,Ql,qn,Xa,er):i(a,p,v,y,m,Z,F,O,g,C,z,jn,Xl,Xs,$a,tr)}function Zs(e,l){let i=0,n=0,a=ye(e.bands,Ys);for(let u=0;u<a.length;u++){let c=a[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let u=e.mode,c=e.series[l],d=u==2?c.facets[1].scale:c.scale,p=e.scales[d];return a==-1?p.min:a==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function ol(e,l,i,n,a,u){return Ll(e,l,(c,d,p,v,y,m,g,O,z,C,F)=>{let Z=c.pxRound;const k=v.dir*(v.ori==0?1:-1),U=v.ori==0?Ql:Xl;let w,Q;k==1?(w=i,Q=n):(w=n,Q=i);let P=Z(m(d[w],v,C,O)),V=Z(g(p[w],y,F,z)),Y=Z(m(d[Q],v,C,O)),ie=Z(g(u==1?y.max:y.min,y,F,z)),$=new Path2D(a);return U($,Y,ie),U($,P,ie),U($,P,V),$})}function Un(e,l,i,n,a,u){let c=null;if(e.length>0){c=new Path2D;const d=l==0?qn:Xs;let p=i;for(let m=0;m<e.length;m++){let g=e[m];if(g[1]>g[0]){let O=g[0]-p;O>0&&d(c,p,n,O,n+u),p=g[1]}}let v=i+a-p,y=10;v>0&&d(c,p,n-y/2,v,n+u+y)}return c}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Qs(e,l,i,n,a,u,c){let d=[],p=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let m=v,g=v;if(a==1)for(;++v<=n&&l[v]===null;)g=v;else for(;--v>=i&&l[v]===null;)g=v;let O=u(e[m]),z=g==m?O:u(e[g]),C=m-a;O=c<=0&&C>=0&&C<p?u(e[C]):O;let Z=g+a;z=c>=0&&Z>=0&&Z<p?u(e[Z]):z,z>=O&&d.push([O,z])}return d}function fa(e){return e==0?Ea:e==1?$e:l=>yl(l,e)}function Qa(e){let l=e==0?Yn:jn,i=e==0?(a,u,c,d,p,v)=>{a.arcTo(u,c,d,p,v)}:(a,u,c,d,p,v)=>{a.arcTo(c,u,p,d,v)},n=e==0?(a,u,c,d,p)=>{a.rect(u,c,d,p)}:(a,u,c,d,p)=>{a.rect(c,u,p,d)};return(a,u,c,d,p,v=0,y=0)=>{v==0&&y==0?n(a,u,c,d,p):(v=Qt(v,d/2,p/2),y=Qt(y,d/2,p/2),l(a,u+v,c),i(a,u+d,c,u+d,c+p,v),i(a,u+d,c+p,u,c+p,y),i(a,u,c+p,u,c,y),i(a,u,c,u+d,c,v),a.closePath())}}const Yn=(e,l,i)=>{e.moveTo(l,i)},jn=(e,l,i)=>{e.moveTo(i,l)},Ql=(e,l,i)=>{e.lineTo(l,i)},Xl=(e,l,i)=>{e.lineTo(i,l)},qn=Qa(0),Xs=Qa(1),Xa=(e,l,i,n,a,u)=>{e.arc(l,i,n,a,u)},$a=(e,l,i,n,a,u)=>{e.arc(i,l,n,a,u)},er=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(l,i,n,a,u,c)},tr=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(i,l,a,n,c,u)};function lr(e){return(l,i,n,a,u)=>Ll(l,i,(c,d,p,v,y,m,g,O,z,C,F)=>{let{pxRound:Z,points:k}=c,U,w;v.ori==0?(U=Yn,w=Xa):(U=jn,w=$a);const Q=Re(k.width*Te,3);let P=(k.size-k.width)/2*Te,V=Re(P*2,3),Y=new Path2D,ie=new Path2D,{left:$,top:M,width:se,height:N}=l.bbox;qn(ie,$-V,M-V,se+V*2,N+V*2);const ee=q=>{if(p[q]!=null){let ae=Z(m(d[q],v,C,O)),H=Z(g(p[q],y,F,z));U(Y,ae+P,H),w(Y,ae,H,P,0,Pn*2)}};if(u)u.forEach(ee);else for(let q=n;q<=a;q++)ee(q);return{stroke:Q>0?Y:null,fill:Y,clip:ie,flags:Jl|Fs}})}function nr(e){return(l,i,n,a,u,c)=>{n!=a&&(u!=n&&c!=n&&e(l,i,n),u!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Pu=nr(Ql),Ru=nr(Xl);function sr(e){const l=ye(e?.alignGaps,0);return(i,n,a,u)=>Ll(i,n,(c,d,p,v,y,m,g,O,z,C,F)=>{[a,u]=Hn(p,a,u);let Z=c.pxRound,k=N=>Z(m(N,v,C,O)),U=N=>Z(g(N,y,F,z)),w,Q;v.ori==0?(w=Ql,Q=Pu):(w=Xl,Q=Ru);const P=v.dir*(v.ori==0?1:-1),V={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},Y=V.stroke;let ie=!1;if(u-a>=C*4){let N=W=>i.posToVal(W,v.key,!0),ee=null,q=null,ae,H,Ae,pe=k(d[P==1?a:u]),re=k(d[a]),fe=k(d[u]),ue=N(P==1?re+1:fe-1);for(let W=P==1?a:u;W>=a&&W<=u;W+=P){let _e=d[W],de=(P==1?_e<ue:_e>ue)?pe:k(_e),te=p[W];de==pe?te!=null?(H=te,ee==null?(w(Y,de,U(H)),ae=ee=q=H):H<ee?ee=H:H>q&&(q=H)):te===null&&(ie=!0):(ee!=null&&Q(Y,pe,U(ee),U(q),U(ae),U(H)),te!=null?(H=te,w(Y,de,U(H)),ee=q=ae=H):(ee=q=null,te===null&&(ie=!0)),pe=de,ue=N(pe+P))}ee!=null&&ee!=q&&Ae!=pe&&Q(Y,pe,U(ee),U(q),U(ae),U(H))}else for(let N=P==1?a:u;N>=a&&N<=u;N+=P){let ee=p[N];ee===null?ie=!0:ee!=null&&w(Y,k(d[N]),U(ee))}let[M,se]=Zs(i,n);if(c.fill!=null||M!=0){let N=V.fill=new Path2D(Y),ee=c.fillTo(i,n,c.min,c.max,M),q=U(ee),ae=k(d[a]),H=k(d[u]);P==-1&&([H,ae]=[ae,H]),w(N,H,q),w(N,ae,q)}if(!c.spanGaps){let N=[];ie&&N.push(...Qs(d,p,a,u,P,k,l)),V.gaps=N=c.gaps(i,n,a,u,N),V.clip=Un(N,v.ori,O,z,C,F)}return se!=0&&(V.band=se==2?[ol(i,n,a,u,Y,-1),ol(i,n,a,u,Y,1)]:ol(i,n,a,u,Y,se)),V})}function Fu(e){const l=ye(e.align,1),i=ye(e.ascDesc,!1),n=ye(e.alignGaps,0),a=ye(e.extend,!1);return(u,c,d,p)=>Ll(u,c,(v,y,m,g,O,z,C,F,Z,k,U)=>{[d,p]=Hn(m,d,p);let w=v.pxRound,{left:Q,width:P}=u.bbox,V=re=>w(z(re,g,k,F)),Y=re=>w(C(re,O,U,Z)),ie=g.ori==0?Ql:Xl;const $={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},M=$.stroke,se=g.dir*(g.ori==0?1:-1);let N=Y(m[se==1?d:p]),ee=V(y[se==1?d:p]),q=ee,ae=ee;a&&l==-1&&(ae=Q,ie(M,ae,N)),ie(M,ee,N);for(let re=se==1?d:p;re>=d&&re<=p;re+=se){let fe=m[re];if(fe==null)continue;let ue=V(y[re]),W=Y(fe);l==1?ie(M,ue,N):ie(M,q,W),ie(M,ue,W),N=W,q=ue}let H=q;a&&l==1&&(H=Q+P,ie(M,H,N));let[Ae,pe]=Zs(u,c);if(v.fill!=null||Ae!=0){let re=$.fill=new Path2D(M),fe=v.fillTo(u,c,v.min,v.max,Ae),ue=Y(fe);ie(re,H,ue),ie(re,ae,ue)}if(!v.spanGaps){let re=[];re.push(...Qs(y,m,d,p,se,V,n));let fe=v.width*Te/2,ue=i||l==1?fe:-fe,W=i||l==-1?-fe:fe;re.forEach(_e=>{_e[0]+=ue,_e[1]+=W}),$.gaps=re=v.gaps(u,c,d,p,re),$.clip=Un(re,g.ori,F,Z,k,U)}return pe!=0&&($.band=pe==2?[ol(u,c,d,p,M,-1),ol(u,c,d,p,M,1)]:ol(u,c,d,p,M,pe)),$})}function da(e,l,i,n,a,u,c=Pe){if(e.length>1){let d=null;for(let p=0,v=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let y=tt(e[p]-e[d]);y<v&&(v=y,c=tt(i(e[p],n,a,u)-i(e[d],n,a,u)))}d=p}}return c}function zu(e){e=e||gn;const l=ye(e.size,[.6,Pe,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const u=me(a),c=1-l[0],d=ye(l[1],Pe),p=ye(l[2],1),v=ye(e.disp,gn),y=ye(e.each,O=>{}),{fill:m,stroke:g}=v;return(O,z,C,F)=>Ll(O,z,(Z,k,U,w,Q,P,V,Y,ie,$,M)=>{let se=Z.pxRound,N=i,ee=n*Te,q=d*Te,ae=p*Te,H,Ae;w.ori==0?[H,Ae]=u(O,z):[Ae,H]=u(O,z);const pe=w.dir*(w.ori==0?1:-1);let re=w.ori==0?qn:Xs,fe=w.ori==0?y:(_,K,j,ne,we,he,Be)=>{y(_,K,j,we,ne,Be,he)},ue=ye(O.bands,Ys).find(_=>_.series[0]==z),W=ue!=null?ue.dir:0,_e=Z.fillTo(O,z,Z.min,Z.max,W),Ce=se(V(_e,Q,M,ie)),de,te,be,ze=$,ge=se(Z.width*Te),je=!1,Qe=null,Ie=null,ft=null,Ot=null;m!=null&&(ge==0||g!=null)&&(je=!0,Qe=m.values(O,z,C,F),Ie=new Map,new Set(Qe).forEach(_=>{_!=null&&Ie.set(_,new Path2D)}),ge>0&&(ft=g.values(O,z,C,F),Ot=new Map,new Set(ft).forEach(_=>{_!=null&&Ot.set(_,new Path2D)})));let{x0:kt,size:Tt}=v;if(kt!=null&&Tt!=null){N=1,k=kt.values(O,z,C,F),kt.unit==2&&(k=k.map(j=>O.posToVal(Y+j*$,w.key,!0)));let _=Tt.values(O,z,C,F);Tt.unit==2?te=_[0]*$:te=P(_[0],w,$,Y)-P(0,w,$,Y),ze=da(k,U,P,w,$,Y,ze),be=ze-te+ee}else ze=da(k,U,P,w,$,Y,ze),be=ze*c+ee,te=ze-be;be<1&&(be=0),ge>=te/2&&(ge=0),be<5&&(se=Ea);let Ut=be>0,_t=ze-be-(Ut?ge:0);te=se(Cs(_t,ae,q)),de=(N==0?te/2:N==pe?0:te)-N*pe*((N==0?ee/2:0)+(Ut?ge/2:0));const qe={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},I=je?null:new Path2D;let S=null;if(ue!=null)S=O.data[ue.series[1]];else{let{y0:_,y1:K}=v;_!=null&&K!=null&&(U=K.values(O,z,C,F),S=_.values(O,z,C,F))}let D=H*te,T=Ae*te;for(let _=pe==1?C:F;_>=C&&_<=F;_+=pe){let K=U[_];if(K==null)continue;if(S!=null){let Ke=S[_]??0;if(K-Ke==0)continue;Ce=V(Ke,Q,M,ie)}let j=w.distr!=2||v!=null?k[_]:_,ne=P(j,w,$,Y),we=V(ye(K,_e),Q,M,ie),he=se(ne-de),Be=se(yt(we,Ce)),We=se(Qt(we,Ce)),dt=Be-We;if(K!=null){let Ke=K<0?T:D,vt=K<0?D:T;je?(ge>0&&ft[_]!=null&&re(Ot.get(ft[_]),he,We+Ft(ge/2),te,yt(0,dt-ge),Ke,vt),Qe[_]!=null&&re(Ie.get(Qe[_]),he,We+Ft(ge/2),te,yt(0,dt-ge),Ke,vt)):re(I,he,We+Ft(ge/2),te,yt(0,dt-ge),Ke,vt),fe(O,z,_,he-ge/2,We,te+ge,dt)}}return ge>0?qe.stroke=je?Ot:I:je||(qe._fill=Z.width==0?Z._fill:Z._stroke??Z._fill,qe.width=0),qe.fill=je?Ie:I,qe})}function Ou(e,l){const i=ye(l?.alignGaps,0);return(n,a,u,c)=>Ll(n,a,(d,p,v,y,m,g,O,z,C,F,Z)=>{[u,c]=Hn(v,u,c);let k=d.pxRound,U=H=>k(g(H,y,F,z)),w=H=>k(O(H,m,Z,C)),Q,P,V;y.ori==0?(Q=Yn,V=Ql,P=er):(Q=jn,V=Xl,P=tr);const Y=y.dir*(y.ori==0?1:-1);let ie=U(p[Y==1?u:c]),$=ie,M=[],se=[];for(let H=Y==1?u:c;H>=u&&H<=c;H+=Y)if(v[H]!=null){let pe=p[H],re=U(pe);M.push($=re),se.push(w(v[H]))}const N={stroke:e(M,se,Q,V,P,k),fill:null,clip:null,band:null,gaps:null,flags:Jl},ee=N.stroke;let[q,ae]=Zs(n,a);if(d.fill!=null||q!=0){let H=N.fill=new Path2D(ee),Ae=d.fillTo(n,a,d.min,d.max,q),pe=w(Ae);V(H,$,pe),V(H,ie,pe)}if(!d.spanGaps){let H=[];H.push(...Qs(p,v,u,c,Y,U,i)),N.gaps=H=d.gaps(n,a,u,c,H),N.clip=Un(H,y.ori,z,C,F,Z)}return ae!=0&&(N.band=ae==2?[ol(n,a,u,c,ee,-1),ol(n,a,u,c,ee,1)]:ol(n,a,u,c,ee,ae)),N})}function Vu(e){return Ou(Nu,e)}function Nu(e,l,i,n,a,u){const c=e.length;if(c<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),c==2)n(d,e[1],l[1]);else{let p=Array(c),v=Array(c-1),y=Array(c-1),m=Array(c-1);for(let g=0;g<c-1;g++)y[g]=l[g+1]-l[g],m[g]=e[g+1]-e[g],v[g]=y[g]/m[g];p[0]=v[0];for(let g=1;g<c-1;g++)v[g]===0||v[g-1]===0||v[g-1]>0!=v[g]>0?p[g]=0:(p[g]=3*(m[g-1]+m[g])/((2*m[g]+m[g-1])/v[g-1]+(m[g]+2*m[g-1])/v[g]),isFinite(p[g])||(p[g]=0));p[c-1]=v[c-2];for(let g=0;g<c-1;g++)a(d,e[g]+m[g]/3,l[g]+p[g]*m[g]/3,e[g+1]-m[g]/3,l[g+1]-p[g+1]*m[g]/3,e[g+1],l[g+1])}return d}const zs=new Set;function pa(){for(let e of zs)e.syncRect(!0)}Zl&&(Al(wo,Yl,pa),Al(_o,Yl,pa,!0),Al(Fn,Yl,()=>{lt.pxRatio=Te}));const Gu=sr(),Hu=lr();function ha(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Os(u,c,l,i))}function Wu(e,l){return e.map((i,n)=>n==0?{}:Ze({},l,i))}function Os(e,l,i,n){return Ze({},l==0?i:n,e)}function ir(e,l,i){return l==null?ql:[l,i]}const Iu=ir;function Bu(e,l,i){return l==null?ql:zn(l,i,Bs,!0)}function ar(e,l,i,n){return l==null?ql:Wn(l,i,e.scales[n].log,!1)}const Uu=ar;function rr(e,l,i,n){return l==null?ql:Is(l,i,e.scales[n].log,!1)}const Yu=rr;function ju(e,l,i,n,a){let u=yt(ji(e),ji(l)),c=l-e,d=Zt(a/n*c,i);do{let p=i[d],v=n*p/c;if(v>=a&&u+(p<5?gl.get(p):0)<=17)return[p,v]}while(++d<i.length);return[0,0]}function va(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=$e((i=+a)*Te))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Re(l[2]*Te,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function lt(e,l,i){const n={mode:ye(e.mode,1)},a=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let p=!1;n.status=0;const v=n.root=It($r);if(e.id!=null&&(v.id=e.id),Rt(v,e.class),e.title){let t=It(lo,v);t.textContent=e.title}const y=Jt("canvas"),m=n.ctx=y.getContext("2d"),g=It(no,v);Al("click",g,t=>{t.target===z&&(Oe!=Nl||He!=Gl)&&ht.click(n,t)},!0);const O=n.under=It(so,g);g.appendChild(y);const z=n.over=It(io,g);e=Kl(e);const C=+ye(e.pxAlign,1),F=fa(C);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const Z=e.ms||.001,k=n.series=a==1?ha(e.series||[],sa,ua,!1):Wu(e.series||[null],oa),U=n.axes=ha(e.axes||[],na,aa,!0),w=n.scales={},Q=n.bands=e.bands||[];Q.forEach(t=>{t.fill=me(t.fill||null),t.dir=ye(t.dir,-1)});const P=a==2?k[1].facets[0].scale:k[0].scale,V={axes:_r,series:hr},Y=(e.drawOrder||["axes","series"]).map(t=>V[t]);function ie(t){const s=t.distr==3?r=>rl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>bs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,x=h-f;return(o-f)/x}}function $(t){let s=w[t];if(s==null){let r=(e.scales||gn)[t]||gn;if(r.from!=null){$(r.from);let o=Ze({},w[r.from],r,{key:t});o.valToPct=ie(o),w[t]=o}else{s=w[t]=Ze({},t==P?Ja:Du,r),s.key=t;let o=s.time,f=s.range,h=ml(f);if((t!=P||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Bi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Bi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Bn(f))){let x=f;f=(E,A,G)=>A==null?ql:zn(A,G,x)}s.range=me(f||(o?Iu:t==P?s.distr==3?Uu:s.distr==4?Yu:ir:s.distr==3?ar:s.distr==4?rr:Bu)),s.auto=me(h?!1:s.auto),s.clamp=me(s.clamp||Au),s._min=s._max=null,s.valToPct=ie(s)}}}$("x"),$("y"),a==1&&k.forEach(t=>{$(t.scale)}),U.forEach(t=>{$(t.scale)});for(let t in e.scales)$(t);const M=w[P],se=M.distr;let N,ee;M.ori==0?(Rt(v,eo),N=u,ee=c):(Rt(v,to),N=c,ee=u);const q={};for(let t in w){let s=w[t];(s.min!=null||s.max!=null)&&(q[t]={min:s.min,max:s.max},s.min=s.max=null)}const ae=e.tzDate||(t=>new Date($e(t/Z))),H=e.fmtDate||js,Ae=Z==1?tu(ae):su(ae),pe=ea(ae,$i(Z==1?eu:nu,H)),re=la(ae,ta(au,H)),fe=[],ue=n.legend=Ze({},uu,e.legend),W=n.cursor=Ze({},vu,{drag:{y:a==2}},e.cursor),_e=ue.show,Ce=W.show,de=ue.markers;ue.idxs=fe,de.width=me(de.width),de.dash=me(de.dash),de.stroke=me(de.stroke),de.fill=me(de.fill);let te,be,ze,ge=[],je=[],Qe,Ie=!1,ft={};if(ue.live){const t=k[1]?k[1].values:null;Ie=t!=null,Qe=Ie?t(n,1,0):{_:0};for(let s in Qe)ft[s]=Hs}if(_e)if(te=Jt("table",fo,v),ze=Jt("tbody",null,te),ue.mount(n,te),Ie){be=Jt("thead",null,te,ze);let t=Jt("tr",null,be);Jt("th",null,t);for(var Ot in Qe)Jt("th",Li,t).textContent=Ot}else Rt(te,ho),ue.live&&Rt(te,po);const kt={show:!0},Tt={show:!1};function Ut(t,s){if(s==0&&(Ie||!ue.live||a==2))return ql;let r=[],o=Jt("tr",vo,ze,ze.childNodes[s]);Rt(o,t.class),t.show||Rt(o,Tl);let f=Jt("th",null,o);if(de.show){let E=It(mo,f);if(s>0){let A=de.width(n,s);A&&(E.style.border=A+"px "+de.dash(n,s)+" "+de.stroke(n,s)),E.style.background=de.fill(n,s)}}let h=It(Li,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(de.show||(h.style.color=t.width>0?de.stroke(n,s):de.fill(n,s)),qe("click",f,E=>{if(W._lock)return;il(E);let A=k.indexOf(t);if((E.ctrlKey||E.metaKey)!=ue.isolate){let G=k.some((B,J)=>J>0&&J!=A&&B.show);k.forEach((B,J)=>{J>0&&el(J,G?J==A?kt:Tt:kt,!0,Je.setSeries)})}else el(A,{show:!t.show},!0,Je.setSeries)},!1),ul&&qe(Fi,f,E=>{W._lock||(il(E),el(k.indexOf(t),Wl,!0,Je.setSeries))},!1));for(var x in Qe){let E=Jt("td",go,o);E.textContent="--",r.push(E)}return[o,r]}const _t=new Map;function qe(t,s,r,o=!0){const f=_t.get(s)||{},h=W.bind[t](n,s,r,o);h&&(Al(t,s,f[t]=h),_t.set(s,f))}function I(t,s,r){const o=_t.get(s)||{};for(let f in o)(t==null||f==t)&&(Ls(f,s,o[f]),delete o[f]);t==null&&_t.delete(s)}let S=0,D=0,T=0,_=0,K=0,j=0,ne=K,we=j,he=T,Be=_,We=0,dt=0,Ke=0,vt=0;n.bbox={};let Yt=!1,Xt=!1,Vt=!1,Xe=!1,wl=!1,Mt=!1;function Nt(t,s,r){(r||t!=n.width||s!=n.height)&&mt(t,s),Fl(!1),Vt=!0,Xt=!0,zl()}function mt(t,s){n.width=S=T=t,n.height=D=_=s,K=j=0,Kn(),Jn();let r=n.bbox;We=r.left=yl(K*Te,.5),dt=r.top=yl(j*Te,.5),Ke=r.width=yl(T*Te,.5),vt=r.height=yl(_*Te,.5)}const $t=3;function $l(){let t=!1,s=0;for(;!t;){s++;let r=gr(s),o=wr(s);t=s==$t||r&&o,t||(mt(n.width,n.height),Xt=!0)}}function en({width:t,height:s}){Nt(t,s)}n.setSize=en;function Kn(){let t=!1,s=!1,r=!1,o=!1;U.forEach((f,h)=>{if(f.show&&f._show){let{side:x,_size:E}=f,A=x%2,G=f.label!=null?f.labelSize:0,B=E+G;B>0&&(A?(T-=B,x==3?(K+=B,o=!0):r=!0):(_-=B,x==0?(j+=B,t=!0):s=!0))}}),_l[0]=t,_l[1]=r,_l[2]=s,_l[3]=o,T-=fl[1]+fl[3],K+=fl[3],_-=fl[2]+fl[0],j+=fl[0]}function Jn(){let t=K+T,s=j+_,r=K,o=j;function f(h,x){switch(h){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}U.forEach((h,x)=>{if(h.show&&h._show){let E=h.side;h._pos=f(E,h._size),h.label!=null&&(h._lpos=f(E,h.labelSize))}})}if(W.dataIdx==null){let t=W.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=me(t.prox),o=t.bias??=0;W.dataIdx=(f,h,x,E)=>{if(h==0)return x;let A=x,G=r(f,h,x,E)??Pe,B=G>=0&&G<Pe,J=M.ori==0?T:_,ce=W.left,ke=l[0],Se=l[h];if(s.has(Se[x])){A=null;let ve=null,oe=null,le;if(o==0||o==-1)for(le=x;ve==null&&le-- >0;)s.has(Se[le])||(ve=le);if(o==0||o==1)for(le=x;oe==null&&le++<Se.length;)s.has(Se[le])||(oe=le);if(ve!=null||oe!=null)if(B){let Ne=ve==null?-1/0:N(ke[ve],M,J,0),Ue=oe==null?1/0:N(ke[oe],M,J,0),ct=ce-Ne,Le=Ue-ce;ct<=Le?ct<=G&&(A=ve):Le<=G&&(A=oe)}else A=oe==null?ve:ve==null?oe:x-ve<=oe-x?ve:oe}else B&&tt(ce-N(ke[x],M,J,0))>G&&(A=null);return A}}const il=t=>{W.event=t};W.idxs=fe,W._lock=!1;let st=W.points;st.show=me(st.show),st.size=me(st.size),st.stroke=me(st.stroke),st.width=me(st.width),st.fill=me(st.fill);const Gt=n.focus=Ze({},e.focus||{alpha:.3},W.focus),ul=Gt.prox>=0,cl=ul&&st.one;let Et=[],Cl=[],Pl=[];function $s(t,s){let r=st.show(n,s);if(r instanceof HTMLElement)return Rt(r,co),Rt(r,t.class),sl(r,-10,-10,T,_),z.insertBefore(r,Et[s]),r}function ei(t,s){if(a==1||s>0){let r=a==1&&w[t.scale].time,o=t.value;t.value=r?Ji(o)?la(ae,ta(o,H)):o||re:o||Tu,t.label=t.label||(r?gu:mu)}if(cl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Gu||Do,t.fillTo=me(t.fillTo||Lu),t.pxAlign=+ye(t.pxAlign,C),t.pxRound=fa(t.pxAlign),t.stroke=me(t.stroke||null),t.fill=me(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Mu(yt(1,t.width),1),o=t.points=Ze({},{size:r,width:yt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=me(o.show),o.filter=me(o.filter),o.fill=me(o.fill),o.stroke=me(o.stroke),o.paths=me(o.paths),o.pxAlign=t.pxAlign}if(_e){let r=Ut(t,s);ge.splice(s,0,r[0]),je.splice(s,0,r[1]),ue.values.push(null)}if(Ce){fe.splice(s,0,null);let r=null;cl?s==0&&(r=$s(t,s)):s>0&&(r=$s(t,s)),Et.splice(s,0,r),Cl.splice(s,0,0),Pl.splice(s,0,0)}ut("addSeries",s)}function ur(t,s){s=s??k.length,t=a==1?Os(t,s,sa,ua):Os(t,s,{},oa),k.splice(s,0,t),ei(k[s],s)}n.addSeries=ur;function cr(t){if(k.splice(t,1),_e){ue.values.splice(t,1),je.splice(t,1);let s=ge.splice(t,1)[0];I(null,s.firstChild),s.remove()}Ce&&(fe.splice(t,1),Et.splice(t,1)[0].remove(),Cl.splice(t,1),Pl.splice(t,1)),ut("delSeries",t)}n.delSeries=cr;const _l=[!1,!1,!1,!1];function fr(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=w[t.scale];o==null&&(t.scale=r?k[1].scale:P,o=w[t.scale]);let f=o.time;t.size=me(t.size),t.space=me(t.space),t.rotate=me(t.rotate),ml(t.incrs)&&t.incrs.forEach(x=>{!gl.has(x)&&gl.set(x,La(x))}),t.incrs=me(t.incrs||(o.distr==2?Qo:f?Z==1?$o:lu:kl)),t.splits=me(t.splits||(f&&o.distr==1?Ae:o.distr==3?Ps:o.distr==4?xu:_u)),t.stroke=me(t.stroke),t.grid.stroke=me(t.grid.stroke),t.ticks.stroke=me(t.ticks.stroke),t.border.stroke=me(t.border.stroke);let h=t.values;t.values=ml(h)&&!ml(h[0])?me(h):f?ml(h)?ea(ae,$i(h,H)):Ji(h)?iu(ae,h):h||pe:h||wu,t.filter=me(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Aa)),t.font=va(t.font),t.labelFont=va(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(_l[s]=!0,t._el=It(ao,g))}}function tn(t,s,r,o){let[f,h,x,E]=r,A=s%2,G=0;return A==0&&(E||h)&&(G=s==0&&!f||s==2&&!x?$e(na.size/3):0),A==1&&(f||x)&&(G=s==1&&!h||s==3&&!E?$e(aa.size/2):0),G}const ti=n.padding=(e.padding||[tn,tn,tn,tn]).map(t=>me(ye(t,tn))),fl=n._padding=ti.map((t,s)=>t(n,s,_l,0));let pt,it=null,at=null;const xn=a==1?k[0].idxs:null;let jt=null,ln=!1;function li(t,s){if(l=t??[],n.data=n._data=l,a==2){pt=0;for(let r=1;r<k.length;r++)pt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),jt=l[0],pt=jt.length;let r=l;if(se==2){r=l.slice();let o=r[0]=Array(pt);for(let f=0;f<pt;f++)o[f]=f}n._data=l=r}if(Fl(!0),ut("setData"),se==2&&(Vt=!0),s!==!1){let r=M;r.auto(n,ln)?Zn():pl(P,r.min,r.max),Xe=Xe||W.left>=0,Mt=!0,zl()}}n.setData=li;function Zn(){ln=!0;let t,s;a==1&&(pt>0?(it=xn[0]=0,at=xn[1]=pt-1,t=l[0][it],s=l[0][at],se==2?(t=it,s=at):t==s&&(se==3?[t,s]=Wn(t,t,M.log,!1):se==4?[t,s]=Is(t,t,M.log,!1):M.time?s=t+$e(86400/Z):[t,s]=zn(t,s,Bs,!0))):(it=xn[0]=t=null,at=xn[1]=s=null)),pl(P,t,s)}let bn,Rl,Qn,Xn,$n,es,ts,ls,ns,At;function ni(t,s,r,o,f,h){t??=Pi,r??=Ys,o??="butt",f??=Pi,h??="round",t!=bn&&(m.strokeStyle=bn=t),f!=Rl&&(m.fillStyle=Rl=f),s!=Qn&&(m.lineWidth=Qn=s),h!=$n&&(m.lineJoin=$n=h),o!=es&&(m.lineCap=es=o),r!=Xn&&m.setLineDash(Xn=r)}function si(t,s,r,o){s!=Rl&&(m.fillStyle=Rl=s),t!=ts&&(m.font=ts=t),r!=ls&&(m.textAlign=ls=r),o!=ns&&(m.textBaseline=ns=o)}function ss(t,s,r,o,f=0){if(o.length>0&&t.auto(n,ln)&&(s==null||s.min==null)){let h=ye(it,0),x=ye(at,o.length-1),E=r.min==null?yo(o,h,x,f,t.distr==3):[r.min,r.max];t.min=Qt(t.min,r.min=E[0]),t.max=yt(t.max,r.max=E[1])}}const ii={min:null,max:null};function dr(){for(let o in w){let f=w[o];q[o]==null&&(f.min==null||q[P]!=null&&f.auto(n,ln))&&(q[o]=ii)}for(let o in w){let f=w[o];q[o]==null&&f.from!=null&&q[f.from]!=null&&(q[o]=ii)}q[P]!=null&&Fl(!0);let t={};for(let o in q){let f=q[o];if(f!=null){let h=t[o]=Kl(w[o],Po);if(f.min!=null)Ze(h,f);else if(o!=P||a==2)if(pt==0&&h.from==null){let x=h.range(n,null,null,o);h.min=x[0],h.max=x[1]}else h.min=Pe,h.max=-Pe}}if(pt>0){k.forEach((o,f)=>{if(a==1){let h=o.scale,x=q[h];if(x==null)return;let E=t[h];if(f==0){let A=E.range(n,E.min,E.max,h);E.min=A[0],E.max=A[1],it=Zt(E.min,l[0]),at=Zt(E.max,l[0]),at-it>1&&(l[0][it]<E.min&&it++,l[0][at]>E.max&&at--),o.min=jt[it],o.max=jt[at]}else o.show&&o.auto&&ss(E,x,o,l[f],o.sorted);o.idxs[0]=it,o.idxs[1]=at}else if(f>0&&o.show&&o.auto){let[h,x]=o.facets,E=h.scale,A=x.scale,[G,B]=l[f],J=t[E],ce=t[A];J!=null&&ss(J,q[E],h,G,h.sorted),ce!=null&&ss(ce,q[A],x,B,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],h=q[o];if(f.from==null&&(h==null||h.min==null)){let x=f.range(n,f.min==Pe?null:f.min,f.max==-Pe?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let x=f.range(n,h.min,h.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=w[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let x=h.distr;h._min=x==3?rl(h.min):x==4?bs(h.min,h.asinh):x==100?h.fwd(h.min):h.min,h._max=x==3?rl(h.max):x==4?bs(h.max,h.asinh):x==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){k.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Vt=!0,ut("setScale",o);Ce&&W.left>=0&&(Xe=Mt=!0)}for(let o in q)q[o]=null}function pr(t){let s=Cs(it-1,0,pt-1),r=Cs(at+1,0,pt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<pt-1;)r++;return[s,r]}function hr(){if(pt>0){let t=k.some(s=>s._focus)&&At!=Gt.alpha;t&&(m.globalAlpha=At=Gt.alpha),k.forEach((s,r)=>{if(r>0&&s.show&&(ai(r,!1),ai(r,!0),s._paths==null)){let o=At;At!=s.alpha&&(m.globalAlpha=At=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),At!=o&&(m.globalAlpha=At=o)}}),k.forEach((s,r)=>{if(r>0&&s.show){let o=At;At!=s.alpha&&(m.globalAlpha=At=s.alpha),s._paths!=null&&ri(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,it,at,f),x=s.points.filter(n,r,h,f);(h||x)&&(s.points._paths=s.points.paths(n,r,it,at,x),ri(r,!0))}At!=o&&(m.globalAlpha=At=o),ut("drawSeries",r)}}),t&&(m.globalAlpha=At=1)}}function ai(t,s){let r=s?k[t].points:k[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ri(t,s){let r=s?k[t].points:k[t],{stroke:o,fill:f,clip:h,flags:x,_stroke:E=r._stroke,_fill:A=r._fill,_width:G=r.width}=r._paths;G=Re(G*Te,3);let B=null,J=G%2/2;s&&A==null&&(A=G>0?"#fff":E);let ce=r.pxAlign==1&&J>0;if(ce&&m.translate(J,J),!s){let ke=We-G/2,Se=dt-G/2,ve=Ke+G,oe=vt+G;B=new Path2D,B.rect(ke,Se,ve,oe)}s?is(E,G,r.dash,r.cap,A,o,f,x,h):vr(t,E,G,r.dash,r.cap,A,o,f,x,B,h),ce&&m.translate(-J,-J)}function vr(t,s,r,o,f,h,x,E,A,G,B){let J=!1;A!=0&&Q.forEach((ce,ke)=>{if(ce.series[0]==t){let Se=k[ce.series[1]],ve=l[ce.series[1]],oe=(Se._paths||gn).band;ml(oe)&&(oe=ce.dir==1?oe[0]:oe[1]);let le,Ne=null;Se.show&&oe&&To(ve,it,at)?(Ne=ce.fill(n,ke)||h,le=Se._paths.clip):oe=null,is(s,r,o,f,Ne,x,E,A,G,B,le,oe),J=!0}}),J||is(s,r,o,f,h,x,E,A,G,B)}const oi=Jl|Fs;function is(t,s,r,o,f,h,x,E,A,G,B,J){ni(t,s,r,o,f),(A||G||J)&&(m.save(),A&&m.clip(A),G&&m.clip(G)),J?(E&oi)==oi?(m.clip(J),B&&m.clip(B),yn(f,x),Sn(t,h,s)):E&Fs?(yn(f,x),m.clip(J),Sn(t,h,s)):E&Jl&&(m.save(),m.clip(J),B&&m.clip(B),yn(f,x),m.restore(),Sn(t,h,s)):(yn(f,x),Sn(t,h,s)),(A||G||J)&&m.restore()}function Sn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=bn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function yn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Rl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=U[t],h;if(o<=0)h=[0,0];else{let x=f._space=f.space(n,t,s,r,o),E=f._incrs=f.incrs(n,t,s,r,o,x);h=ju(s,r,E,o,x)}return f._found=h}function as(t,s,r,o,f,h,x,E,A,G){let B=x%2/2;C==1&&m.translate(B,B),ni(E,x,A,G,E),m.beginPath();let J,ce,ke,Se,ve=f+(o==0||o==3?-h:h);r==0?(ce=f,Se=ve):(J=f,ke=ve);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?J=ke=t[oe]:ce=Se=t[oe],m.moveTo(J,ce),m.lineTo(ke,Se));m.stroke(),C==1&&m.translate(-B,-B)}function gr(t){let s=!0;return U.forEach((r,o)=>{if(!r.show)return;let f=w[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Fl(!1));return}else r._show||(s=!1,r._show=!0,Fl(!1));let h=r.side,x=h%2,{min:E,max:A}=f,[G,B]=mr(o,E,A,x==0?T:_);if(B==0)return;let J=f.distr==2,ce=r._splits=r.splits(n,o,E,A,G,B,J),ke=f.distr==2?ce.map(le=>jt[le]):ce,Se=f.distr==2?jt[ce[1]]-jt[ce[0]]:G,ve=r._values=r.values(n,r.filter(n,ke,o,B,Se),o,B,Se);r._rotate=h==2?r.rotate(n,ve,o,B):0;let oe=r._size;r._size=Bt(r.size(n,ve,o,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function wr(t){let s=!0;return ti.forEach((r,o)=>{let f=r(n,o,_l,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function _r(){for(let t=0;t<U.length;t++){let s=U[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,x=s.stroke(n,t),E=r==0||r==3?-1:1,[A,G]=s._found;if(s.label!=null){let bt=s.labelGap*E,Pt=$e((s._lpos+bt)*Te);si(s.labelFont[0],x,"center",r==2?cn:Ci),m.save(),o==1?(f=h=0,m.translate(Pt,$e(dt+vt/2)),m.rotate((r==3?-Pn:Pn)/2)):(f=$e(We+Ke/2),h=Pt);let Sl=Ma(s.label)?s.label(n,t,A,G):s.label;m.fillText(Sl,f,h),m.restore()}if(G==0)continue;let B=w[s.scale],J=o==0?Ke:vt,ce=o==0?We:dt,ke=s._splits,Se=B.distr==2?ke.map(bt=>jt[bt]):ke,ve=B.distr==2?jt[ke[1]]-jt[ke[0]]:A,oe=s.ticks,le=s.border,Ne=oe.show?oe.size:0,Ue=$e(Ne*Te),ct=$e((s.alignTo==2?s._size-Ne-s.gap:s.gap)*Te),Le=s._rotate*-Pn/180,Ye=F(s._pos*Te),Lt=(Ue+ct)*E,xt=Ye+Lt;h=o==0?xt:0,f=o==1?xt:0;let Ht=s.font[0],qt=s.align==1?Bl:s.align==2?ws:Le>0?Bl:Le<0?ws:o==0?"center":r==3?ws:Bl,ll=Le||o==1?"middle":r==2?cn:Ci;si(Ht,x,qt,ll);let Ct=s.font[1]*s.lineGap,Wt=ke.map(bt=>F(d(bt,B,J,ce))),Kt=s._values;for(let bt=0;bt<Kt.length;bt++){let Pt=Kt[bt];if(Pt!=null){o==0?f=Wt[bt]:h=Wt[bt],Pt=""+Pt;let Sl=Pt.indexOf(`
`)==-1?[Pt]:Pt.split(/\n/gm);for(let St=0;St<Sl.length;St++){let Ei=Sl[St];Le?(m.save(),m.translate(f,h+St*Ct),m.rotate(Le),m.fillText(Ei,0,0),m.restore()):m.fillText(Ei,f,h+St*Ct)}}}oe.show&&as(Wt,oe.filter(n,Se,t,G,ve),o,r,Ye,Ue,Re(oe.width*Te,3),oe.stroke(n,t),oe.dash,oe.cap);let nl=s.grid;nl.show&&as(Wt,nl.filter(n,Se,t,G,ve),o,o==0?2:1,o==0?dt:We,o==0?vt:Ke,Re(nl.width*Te,3),nl.stroke(n,t),nl.dash,nl.cap),le.show&&as([Ye],[1],o==0?1:0,o==0?1:2,o==1?dt:We,o==1?vt:Ke,Re(le.width*Te,3),le.stroke(n,t),le.dash,le.cap)}ut("drawAxes")}function Fl(t){k.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let kn=!1,rs=!1,nn=[];function xr(){rs=!1;for(let t=0;t<nn.length;t++)ut(...nn[t]);nn.length=0}function zl(){kn||(Go(ui),kn=!0)}function br(t,s=!1){kn=!0,rs=s,t(n),ui(),s&&nn.length>0&&queueMicrotask(xr)}n.batch=br;function ui(){if(Yt&&(dr(),Yt=!1),Vt&&($l(),Vt=!1),Xt){if(Ge(O,Bl,K),Ge(O,cn,j),Ge(O,pn,T),Ge(O,hn,_),Ge(z,Bl,K),Ge(z,cn,j),Ge(z,pn,T),Ge(z,hn,_),Ge(g,pn,S),Ge(g,hn,D),y.width=$e(S*Te),y.height=$e(D*Te),U.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,x=f%2==1;Ge(t,x?"left":"top",o-h),Ge(t,x?"width":"height",r),Ge(t,x?"top":"left",x?j:K),Ge(t,x?"height":"width",x?_:T),Ds(t,Tl)}else Rt(t,Tl)}),bn=Rl=Qn=$n=es=ts=ls=ns=Xn=null,At=1,rn(!0),K!=ne||j!=we||T!=he||_!=Be){Fl(!1);let t=T/he,s=_/Be;if(Ce&&!Xe&&W.left>=0){W.left*=t,W.top*=s,Ol&&sl(Ol,$e(W.left),0,T,_),Vl&&sl(Vl,0,$e(W.top),T,_);for(let r=0;r<Et.length;r++){let o=Et[r];o!=null&&(Cl[r]*=t,Pl[r]*=s,sl(o,Bt(Cl[r]),Bt(Pl[r]),T,_))}}if(Ve.show&&!wl&&Ve.left>=0&&Ve.width>0){Ve.left*=t,Ve.width*=t,Ve.top*=s,Ve.height*=s;for(let r in ps)Ge(Hl,r,Ve[r])}ne=K,we=j,he=T,Be=_}ut("setSize"),Xt=!1}S>0&&D>0&&(m.clearRect(0,0,y.width,y.height),ut("drawClear"),Y.forEach(t=>t()),ut("draw")),Ve.show&&wl&&(Tn(Ve),wl=!1),Ce&&Xe&&(bl(null,!0,!1),Xe=!1),ue.show&&ue.live&&Mt&&(fs(),Mt=!1),p||(p=!0,n.status=1,ut("ready")),ln=!1,kn=!1}n.redraw=(t,s)=>{Vt=s||!1,t!==!1?pl(P,M.min,M.max):zl()};function os(t,s){let r=w[t];if(r.from==null){if(pt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(pt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==P&&r.distr==2&&pt>0&&(s.min=Zt(s.min,l[0]),s.max=Zt(s.max,l[0]),s.min==s.max&&s.max++),q[t]=s,Yt=!0,zl()}}n.setScale=os;let us,cs,Ol,Vl,ci,fi,Nl,Gl,di,pi,Oe,He,dl=!1;const ht=W.drag;let rt=ht.x,ot=ht.y;Ce&&(W.x&&(us=It(oo,z)),W.y&&(cs=It(uo,z)),M.ori==0?(Ol=us,Vl=cs):(Ol=cs,Vl=us),Oe=W.left,He=W.top);const Ve=n.select=Ze({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Hl=Ve.show?It(ro,Ve.over?z:O):null;function Tn(t,s){if(Ve.show){for(let r in t)Ve[r]=t[r],r in ps&&Ge(Hl,r,t[r]);s!==!1&&ut("setSelect")}}n.setSelect=Tn;function Sr(t){if(k[t].show)_e&&Ds(ge[t],Tl);else if(_e&&Rt(ge[t],Tl),Ce){let r=cl?Et[0]:Et[t];r!=null&&sl(r,-10,-10,T,_)}}function pl(t,s,r){os(t,{min:s,max:r})}function el(t,s,r,o){s.focus!=null&&Er(t),s.show!=null&&k.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,Sr(h),a==2?(pl(f.facets[0].scale,null,null),pl(f.facets[1].scale,null,null)):pl(f.scale,null,null),zl())}),r!==!1&&ut("setSeries",t,s),o&&on("setSeries",n,t,s)}n.setSeries=el;function yr(t,s){Ze(Q[t],s)}function kr(t,s){t.fill=me(t.fill||null),t.dir=ye(t.dir,-1),s=s??Q.length,Q.splice(s,0,t)}function Tr(t){t==null?Q.length=0:Q.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Mr(t,s){k[t].alpha=s,Ce&&Et[t]!=null&&(Et[t].style.opacity=s),_e&&ge[t]&&(ge[t].style.opacity=s)}let al,hl,xl;const Wl={focus:!0};function Er(t){if(t!=xl){let s=t==null,r=Gt.alpha!=1;k.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Mr(f,h?1:Gt.alpha)}}),xl=t,r&&zl()}}_e&&ul&&qe(zi,te,t=>{W._lock||(il(t),xl!=null&&el(null,Wl,!0,Je.setSeries))});function tl(t,s,r){let o=w[s];r&&(t=t/Te-(o.ori==1?j:K));let f=T;o.ori==1&&(f=_,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,x=o._max,E=t/f,A=h+(x-h)*E,G=o.distr;return G==3?jl(10,A):G==4?Eo(A,o.asinh):G==100?o.bwd(A):A}function Ar(t,s){let r=tl(t,P,s);return Zt(r,l[0],it,at)}n.valToIdx=t=>Zt(t,l[0]),n.posToIdx=Ar,n.posToVal=tl,n.valToPos=(t,s,r)=>w[s].ori==0?u(t,w[s],r?Ke:T,r?We:0):c(t,w[s],r?vt:_,r?dt:0),n.setCursor=(t,s,r)=>{Oe=t.left,He=t.top,bl(null,s,r)};function hi(t,s){Ge(Hl,Bl,Ve.left=t),Ge(Hl,pn,Ve.width=s)}function vi(t,s){Ge(Hl,cn,Ve.top=t),Ge(Hl,hn,Ve.height=s)}let sn=M.ori==0?hi:vi,an=M.ori==1?hi:vi;function Dr(){if(_e&&ue.live)for(let t=a==2?1:0;t<k.length;t++){if(t==0&&Ie)continue;let s=ue.values[t],r=0;for(let o in s)je[t][r++].firstChild.nodeValue=s[o]}}function fs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{fe[o]=r}):Co(t.idx)||fe.fill(t.idx),ue.idx=fe[0]),_e&&ue.live){for(let r=0;r<k.length;r++)(r>0||a==1&&!Ie)&&Lr(r,fe[r]);Dr()}Mt=!1,s!==!1&&ut("setLegend")}n.setLegend=fs;function Lr(t,s){let r=k[t],o=t==0&&se==2?jt:l[t],f;Ie?f=r.values(n,t,s)??ft:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?ft:{_:f}),ue.values[t]=f}function bl(t,s,r){di=Oe,pi=He,[Oe,He]=W.move(n,Oe,He),W.left=Oe,W.top=He,Ce&&(Ol&&sl(Ol,$e(Oe),0,T,_),Vl&&sl(Vl,0,$e(He),T,_));let o,f=it>at;al=Pe,hl=null;let h=M.ori==0?T:_,x=M.ori==1?T:_;if(Oe<0||pt==0||f){o=W.idx=null;for(let E=0;E<k.length;E++){let A=Et[E];A!=null&&sl(A,-10,-10,T,_)}ul&&el(null,Wl,!0,t==null&&Je.setSeries),ue.live&&(fe.fill(o),Mt=!0)}else{let E,A,G;a==1&&(E=M.ori==0?Oe:He,A=tl(E,P),o=W.idx=Zt(A,l[0],it,at),G=N(l[0][o],M,h,0));let B=-10,J=-10,ce=0,ke=0,Se=!0,ve="",oe="";for(let le=a==2?1:0;le<k.length;le++){let Ne=k[le],Ue=fe[le],ct=Ue==null?null:a==1?l[le][Ue]:l[le][1][Ue],Le=W.dataIdx(n,le,o,A),Ye=Le==null?null:a==1?l[le][Le]:l[le][1][Le];if(Mt=Mt||Ye!=ct||Le!=Ue,fe[le]=Le,le>0&&Ne.show){let Lt=Le==null?-10:Le==o?G:N(a==1?l[0][Le]:l[le][0][Le],M,h,0),xt=Ye==null?-10:ee(Ye,a==1?w[Ne.scale]:w[Ne.facets[1].scale],x,0);if(ul&&Ye!=null){let Ht=M.ori==1?Oe:He,qt=tt(Gt.dist(n,le,Le,xt,Ht));if(qt<al){let ll=Gt.bias;if(ll!=0){let Ct=tl(Ht,Ne.scale),Wt=Ye>=0?1:-1,Kt=Ct>=0?1:-1;Kt==Wt&&(Kt==1?ll==1?Ye>=Ct:Ye<=Ct:ll==1?Ye<=Ct:Ye>=Ct)&&(al=qt,hl=le)}else al=qt,hl=le}}if(Mt||cl){let Ht,qt;M.ori==0?(Ht=Lt,qt=xt):(Ht=xt,qt=Lt);let ll,Ct,Wt,Kt,nl,bt,Pt=!0,Sl=st.bbox;if(Sl!=null){Pt=!1;let St=Sl(n,le);Wt=St.left,Kt=St.top,ll=St.width,Ct=St.height}else Wt=Ht,Kt=qt,ll=Ct=st.size(n,le);if(bt=st.fill(n,le),nl=st.stroke(n,le),cl)le==hl&&al<=Gt.prox&&(B=Wt,J=Kt,ce=ll,ke=Ct,Se=Pt,ve=bt,oe=nl);else{let St=Et[le];St!=null&&(Cl[le]=Wt,Pl[le]=Kt,Ii(St,ll,Ct,Pt),Hi(St,bt,nl),sl(St,Bt(Wt),Bt(Kt),T,_))}}}}if(cl){let le=Gt.prox,Ne=xl==null?al<=le:al>le||hl!=xl;if(Mt||Ne){let Ue=Et[0];Ue!=null&&(Cl[0]=B,Pl[0]=J,Ii(Ue,ce,ke,Se),Hi(Ue,ve,oe),sl(Ue,Bt(B),Bt(J),T,_))}}}if(Ve.show&&dl)if(t!=null){let[E,A]=Je.scales,[G,B]=Je.match,[J,ce]=t.cursor.sync.scales,ke=t.cursor.drag;if(rt=ke._x,ot=ke._y,rt||ot){let{left:Se,top:ve,width:oe,height:le}=t.select,Ne=t.scales[J].ori,Ue=t.posToVal,ct,Le,Ye,Lt,xt,Ht=E!=null&&G(E,J),qt=A!=null&&B(A,ce);Ht&&rt?(Ne==0?(ct=Se,Le=oe):(ct=ve,Le=le),Ye=w[E],Lt=N(Ue(ct,J),Ye,h,0),xt=N(Ue(ct+Le,J),Ye,h,0),sn(Qt(Lt,xt),tt(xt-Lt))):sn(0,h),qt&&ot?(Ne==1?(ct=Se,Le=oe):(ct=ve,Le=le),Ye=w[A],Lt=ee(Ue(ct,ce),Ye,x,0),xt=ee(Ue(ct+Le,ce),Ye,x,0),an(Qt(Lt,xt),tt(xt-Lt))):an(0,x)}else hs()}else{let E=tt(di-ci),A=tt(pi-fi);if(M.ori==1){let ce=E;E=A,A=ce}rt=ht.x&&E>=ht.dist,ot=ht.y&&A>=ht.dist;let G=ht.uni;G!=null?rt&&ot&&(rt=E>=G,ot=A>=G,!rt&&!ot&&(A>E?ot=!0:rt=!0)):ht.x&&ht.y&&(rt||ot)&&(rt=ot=!0);let B,J;rt&&(M.ori==0?(B=Nl,J=Oe):(B=Gl,J=He),sn(Qt(B,J),tt(J-B)),ot||an(0,x)),ot&&(M.ori==1?(B=Nl,J=Oe):(B=Gl,J=He),an(Qt(B,J),tt(J-B)),rt||sn(0,h)),!rt&&!ot&&(sn(0,0),an(0,0))}if(ht._x=rt,ht._y=ot,t==null){if(r){if(Mi!=null){let[E,A]=Je.scales;Je.values[0]=E!=null?tl(M.ori==0?Oe:He,E):null,Je.values[1]=A!=null?tl(M.ori==1?Oe:He,A):null}on(_s,n,Oe,He,T,_,o)}if(ul){let E=r&&Je.setSeries,A=Gt.prox;xl==null?al<=A&&el(hl,Wl,!0,E):al>A?el(null,Wl,!0,E):hl!=xl&&el(hl,Wl,!0,E)}}Mt&&(ue.idx=o,fs()),s!==!1&&ut("setCursor")}let vl=null;Object.defineProperty(n,"rect",{get(){return vl==null&&rn(!1),vl}});function rn(t=!1){t?vl=null:(vl=z.getBoundingClientRect(),ut("syncRect",vl))}function mi(t,s,r,o,f,h,x){W._lock||dl&&t!=null&&t.movementX==0&&t.movementY==0||(ds(t,s,r,o,f,h,x,!1,t!=null),t!=null?bl(null,!0,!0):bl(s,!0,!1))}function ds(t,s,r,o,f,h,x,E,A){if(vl==null&&rn(!1),il(t),t!=null)r=t.clientX-vl.left,o=t.clientY-vl.top;else{if(r<0||o<0){Oe=-10,He=-10;return}let[G,B]=Je.scales,J=s.cursor.sync,[ce,ke]=J.values,[Se,ve]=J.scales,[oe,le]=Je.match,Ne=s.axes[0].side%2==1,Ue=M.ori==0?T:_,ct=M.ori==1?T:_,Le=Ne?h:f,Ye=Ne?f:h,Lt=Ne?o:r,xt=Ne?r:o;if(Se!=null?r=oe(G,Se)?d(ce,w[G],Ue,0):-10:r=Ue*(Lt/Le),ve!=null?o=le(B,ve)?d(ke,w[B],ct,0):-10:o=ct*(xt/Ye),M.ori==1){let Ht=r;r=o,o=Ht}}A&&(s==null||s.cursor.event.type==_s)&&((r<=1||r>=T-1)&&(r=yl(r,T)),(o<=1||o>=_-1)&&(o=yl(o,_))),E?(ci=r,fi=o,[Nl,Gl]=W.move(n,r,o)):(Oe=r,He=o)}const ps={width:0,height:0,left:0,top:0};function hs(){Tn(ps,!1)}let gi,wi,_i,xi;function bi(t,s,r,o,f,h,x){dl=!0,rt=ot=ht._x=ht._y=!1,ds(t,s,r,o,f,h,x,!0,!1),t!=null&&(qe(xs,Es,Si,!1),on(Ri,n,Nl,Gl,T,_,null));let{left:E,top:A,width:G,height:B}=Ve;gi=E,wi=A,_i=G,xi=B}function Si(t,s,r,o,f,h,x){dl=ht._x=ht._y=!1,ds(t,s,r,o,f,h,x,!1,!0);let{left:E,top:A,width:G,height:B}=Ve,J=G>0||B>0,ce=gi!=E||wi!=A||_i!=G||xi!=B;if(J&&ce&&Tn(Ve),ht.setScale&&J&&ce){let ke=E,Se=G,ve=A,oe=B;if(M.ori==1&&(ke=A,Se=B,ve=E,oe=G),rt&&pl(P,tl(ke,P),tl(ke+Se,P)),ot)for(let le in w){let Ne=w[le];le!=P&&Ne.from==null&&Ne.min!=Pe&&pl(le,tl(ve+oe,le),tl(ve,le))}hs()}else W.lock&&(W._lock=!W._lock,bl(s,!0,t!=null));t!=null&&(I(xs,Es),on(xs,n,Oe,He,T,_,null))}function Cr(t,s,r,o,f,h,x){if(W._lock)return;il(t);let E=dl;if(dl){let A=!0,G=!0,B=10,J,ce;M.ori==0?(J=rt,ce=ot):(J=ot,ce=rt),J&&ce&&(A=Oe<=B||Oe>=T-B,G=He<=B||He>=_-B),J&&A&&(Oe=Oe<Nl?0:T),ce&&G&&(He=He<Gl?0:_),bl(null,!0,!0),dl=!1}Oe=-10,He=-10,fe.fill(null),bl(null,!0,!0),E&&(dl=E)}function yi(t,s,r,o,f,h,x){W._lock||(il(t),Zn(),hs(),t!=null&&on(Oi,n,Oe,He,T,_,null))}function ki(){U.forEach(qu),Nt(n.width,n.height,!0)}Al(Fn,Yl,ki);const Il={};Il.mousedown=bi,Il.mousemove=mi,Il.mouseup=Si,Il.dblclick=yi,Il.setSeries=(t,s,r,o)=>{let f=Je.match[2];r=f(n,s,r),r!=-1&&el(r,o,!0,!1)},Ce&&(qe(Ri,z,bi),qe(_s,z,mi),qe(Fi,z,t=>{il(t),rn(!1)}),qe(zi,z,Cr),qe(Oi,z,yi),zs.add(n),n.syncRect=rn);const Mn=n.hooks=e.hooks||{};function ut(t,s,r){rs?nn.push([t,s,r]):t in Mn&&Mn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Mn[s]=(Mn[s]||[]).concat(t.hooks[s])});const Ti=(t,s,r)=>r,Je=Ze({key:null,setSeries:!1,filters:{pub:qi,sub:qi},scales:[P,k[1]?k[1].scale:null],match:[Ki,Ki,Ti],values:[null,null]},W.sync);Je.match.length==2&&Je.match.push(Ti),W.sync=Je;const Mi=Je.key,vs=Za(Mi);function on(t,s,r,o,f,h,x){Je.filters.pub(t,s,r,o,f,h,x)&&vs.pub(t,s,r,o,f,h,x)}vs.sub(n);function Pr(t,s,r,o,f,h,x){Je.filters.sub(t,s,r,o,f,h,x)&&Il[t](null,s,r,o,f,h,x)}n.pub=Pr;function Rr(){vs.unsub(n),zs.delete(n),_t.clear(),Ls(Fn,Yl,ki),v.remove(),te?.remove(),ut("destroy")}n.destroy=Rr;function ms(){ut("init",e,l),li(l||e.data,!1),q[P]?os(P,q[P]):Zn(),wl=Ve.show&&(Ve.width>0||Ve.height>0),Xe=Mt=!0,Nt(e.width,e.height)}return k.forEach(ei),U.forEach(fr),i?i instanceof HTMLElement?(i.appendChild(v),ms()):i(n,ms):ms(),n}lt.assign=Ze;lt.fmtNum=Us;lt.rangeNum=zn;lt.rangeLog=Wn;lt.rangeAsinh=Is;lt.orient=Ll;lt.pxRatio=Te;lt.join=No;lt.fmtDate=js,lt.tzDate=Jo;lt.sync=Za;{lt.addGap=Cu,lt.clipGaps=Un;let e=lt.paths={points:lr};e.linear=sr,e.stepped=Fu,e.bars=zu,e.spline=Vu}const or="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${or}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${or}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=Fe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Fe('<button type="button" class="og-btn svelte-3wi8ix" title="Click to set Original Gravity"><span class="stat-value svelte-3wi8ix"> </span> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),$u=Fe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div></div></div>'),ec=Fe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function tc(e,l){Nn(l,!0);let i=et(!1),n=et(""),a=et(null),u=Dt(()=>Ln.config.temp_units==="C"),c=Dt(_a),d=Dt(()=>{if(l.readings.length===0)return null;const w=[...l.readings].sort((te,be)=>new Date(te.timestamp).getTime()-new Date(be.timestamp).getTime()),Q=w[0],P=w[w.length-1],V=w.map(te=>te.sg_calibrated??te.sg_raw).filter(te=>te!==null),Y=w.map(te=>te.temp_calibrated??te.temp_raw).filter(te=>te!==null);if(V.length===0)return null;const ie=V[V.length-1],$=V[0],M=Math.max(...V),se=Math.min(...V),N=new Date(Q.timestamp).getTime(),ee=new Date(P.timestamp).getTime(),ae=(ee-N)/(1e3*60*60*24),H=ae>0?(ie-$)/ae:0;let Ae=null,pe=null,re=null,fe=null;if(Y.length>0){const te=Y[Y.length-1],be=Y.reduce((je,Qe)=>je+Qe,0)/Y.length,ze=Math.max(...Y),ge=Math.min(...Y);Ae=b(u)?dn(te):te,pe=b(u)?dn(be):be,re=b(u)?dn(ze):ze,fe=b(u)?dn(ge):ge}let ue=0;const W=.001;for(let te=V.length-2;te>=0;te--)if(Math.abs(V[te]-ie)>W){const be=new Date(w[te+1].timestamp).getTime();ue=(ee-be)/(1e3*60*60*24);break}let _e=null,Ce=null;const de=l.originalGravity;return de!==null&&de>1&&(_e=(de-ie)/(de-1)*100,Ce=(de-ie)*131.25),{currentSg:ie,firstSg:$,highSg:M,lowSg:se,currentTemp:Ae,avgTemp:pe,highTemp:re,lowTemp:fe,fermRate:H,durationDays:ae,daysAtCurrentSg:ue,apparentAttenuation:_e,abv:Ce}});function p(){Me(n,l.originalGravity?.toFixed(3)??"",!0),Me(i,!0),setTimeout(()=>b(a)?.focus(),0)}function v(){const w=b(n).trim();if(!w)l.onOgChange(null);else{const Q=parseFloat(w);!isNaN(Q)&&Q>=.99&&Q<=1.2&&l.onOgChange(Q)}Me(i,!1)}function y(w){w.key==="Enter"?v():w.key==="Escape"&&Me(i,!1)}function m(w){return w.toFixed(3)}function g(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function O(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function z(w){return w===null?"--":w.toFixed(1)}function C(w){return w===null?"--":`${w.toFixed(1)}%`}var F=ma(),Z=Vs(F);{var k=w=>{var Q=$u(),P=R(Q),V=R(P),Y=X(R(V),2),ie=X(R(Y),2),$=R(ie,!0);L(ie),L(Y);var M=X(Y,2),se=X(R(M),2),N=R(se,!0);L(se),L(M);var ee=X(M,2),q=X(R(ee),2),ae=R(q,!0);L(q),L(ee);var H=X(ee,2),Ae=X(R(H),2),pe=R(Ae,!0);L(Ae),L(H),L(V);var re=X(V,2),fe=X(R(re),2),ue=X(R(fe),2),W=R(ue,!0),_e=X(W),Ce=R(_e,!0);L(_e),L(ue),L(fe);var de=X(fe,2),te=X(R(de),2),be=R(te,!0),ze=X(be),ge=R(ze,!0);L(ze),L(te),L(de);var je=X(de,2),Qe=X(R(je),2),Ie=R(Qe,!0),ft=X(Ie),Ot=R(ft,!0);L(ft),L(Qe),L(je);var kt=X(je,2),Tt=X(R(kt),2),Ut=R(Tt,!0),_t=X(Ut),qe=R(_t,!0);L(_t),L(Tt),L(kt),L(re),L(P);var I=X(P,2),S=R(I),D=X(R(S),2);let T;var _=R(D);L(D),L(S);var K=X(S,2),j=X(R(K),2),ne=R(j,!0);L(j),L(K);var we=X(K,2),he=X(R(we),2),Be=R(he,!0);L(he),L(we);var We=X(we,2),dt=X(R(We),2);{var Ke=Nt=>{var mt=Qu();xa(mt),mt.__keydown=y,Ns(mt,$t=>Me(a,$t),()=>b(a)),ga("blur",mt,v),ba(mt,()=>b(n),$t=>Me(n,$t)),De(Nt,mt)},vt=Nt=>{var mt=Xu();mt.__click=p;var $t=R(mt),$l=R($t,!0);L($t),Ml(2),L(mt),gt(en=>xe($l,en),[()=>l.originalGravity?m(l.originalGravity):"--"]),De(Nt,mt)};wt(dt,Nt=>{b(i)?Nt(Ke):Nt(vt,!1)})}L(We);var Yt=X(We,2),Xt=X(R(Yt),2),Vt=R(Xt,!0);L(Xt),L(Yt);var Xe=X(Yt,2),wl=X(R(Xe),2),Mt=R(wl,!0);L(wl),L(Xe),L(I),L(Q),gt((Nt,mt,$t,$l,en,Kn,Jn,il,st,Gt,ul,cl,Et)=>{xe($,Nt),xe(N,mt),xe(ae,$t),xe(pe,$l),xe(W,en),xe(Ce,b(c)),xe(be,Kn),xe(ge,b(c)),xe(Ie,Jn),xe(Ot,b(c)),xe(Ut,il),xe(qe,b(c)),T=El(D,1,"stat-value rate svelte-3wi8ix",null,T,{fermenting:b(d).fermRate<0}),xe(_,`${st??""}/day`),xe(ne,Gt),xe(Be,ul),xe(Vt,cl),xe(Mt,Et)},[()=>m(b(d).currentSg),()=>m(b(d).firstSg),()=>m(b(d).highSg),()=>m(b(d).lowSg),()=>z(b(d).currentTemp),()=>z(b(d).avgTemp),()=>z(b(d).highTemp),()=>z(b(d).lowTemp),()=>g(b(d).fermRate),()=>O(b(d).durationDays),()=>O(b(d).daysAtCurrentSg),()=>C(b(d).apparentAttenuation),()=>C(b(d).abv)]),De(w,Q)},U=w=>{var Q=ec();De(w,Q)};wt(Z,w=>{b(d)?w(k):w(U,!1)})}De(e,F),Gn()}Vn(["keydown","click"]);var lc=Fe('<button type="button"> </button>'),nc=Fe("<option> </option>"),sc=Fe('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ic=Fe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),ac=Fe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),rc=Fe('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function oc(e,l){Nn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Dt(()=>Ln.config.smoothing_enabled),u=Dt(()=>Ln.config.smoothing_samples),c=et("UTC"),d=et(0),p=et(3),v=Ms(l,"originalGravity",3,null),y=Dt(()=>Ln.config.temp_units==="C"),m,g=null,O=et(!0),z=et(null),C=et(24),F=et(Ai([])),Z=et(Ai([]));const k={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},U="#facc15",w="rgba(250, 204, 21, 0.3)",Q="#71717a",P="#a1a1aa",V="rgba(255, 255, 255, 0.04)",Y="#22d3ee";function ie(I,S,D){const T=new Date(I*1e3);try{return D?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:S}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:S})}catch(_){return console.warn("Invalid timezone:",S,_),D?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function $(I,S,D){const T=U,_=k[l.tiltColor]||P;return{width:I,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(K,j,ne)=>{const we=(ne-j)*.1||.005;return[j-we,ne+we]}},temp:{auto:!0,range:(K,j,ne)=>{const we=ne-j,he=10;if(we<he){const We=(ne+j)/2;return[We-he/2,We+he/2]}const Be=we*.1;return[j-Be,ne+Be]}}},axes:[{stroke:Q,grid:{stroke:V,width:1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(ne=>ie(ne,D,b(C)<=24))},{scale:"sg",stroke:T,grid:{stroke:V,width:1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(ne=>ne.toFixed(3)),side:3},{scale:"temp",stroke:_,grid:{show:!1},ticks:{stroke:V,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(K,j)=>j.map(ne=>ne.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:T,width:2,fill:(K,j)=>{const ne=K.ctx.createLinearGradient(0,K.bbox.top,0,K.bbox.top+K.bbox.height);return ne.addColorStop(0,w),ne.addColorStop(1,"transparent"),ne},points:{show:!1},paths:lt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:_,width:1.5,dash:[4,4],points:{show:!1},paths:lt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:Y,width:1.5,dash:[2,4],points:{show:!1},paths:lt.paths.spline?.()}]}}function M(I,S){if(S<=1)return I;const D=[];for(let T=0;T<I.length;T++){const _=[],K=Math.floor(S/2);for(let j=Math.max(0,T-K);j<=Math.min(I.length-1,T+K);j++){const ne=I[j];ne!==null&&_.push(ne)}_.length>0?D.push(_.reduce((j,ne)=>j+ne,0)/_.length):D.push(null)}return D}function se(I,S,D,T,_){if(I.length<=_)return[I,S,D,T];const K=Math.ceil(I.length/_),j=[],ne=[],we=[],he=[];for(let Be=0;Be<I.length;Be+=K){const We=Math.min(Be+K,I.length);let dt=0,Ke=0,vt=0,Yt=0,Xt=0,Vt=0;for(let Xe=Be;Xe<We;Xe++)S[Xe]!==null&&(dt+=S[Xe],Ke++),D[Xe]!==null&&(vt+=D[Xe],Yt++),T[Xe]!==null&&(Xt+=T[Xe],Vt++);j.push(I[Math.floor((Be+We-1)/2)]),ne.push(Ke>0?dt/Ke:null),we.push(Yt>0?vt/Yt:null),he.push(Vt>0?Xt/Vt:null)}return[j,ne,we,he]}function N(I){return!I.endsWith("Z")&&!I.match(/[+-]\d{2}:\d{2}$/)&&(I=I+"Z"),new Date(I).getTime()/1e3}function ee(I,S,D){if(I.length===0||S.length===0)return S.map(()=>null);const T=[...I].sort((j,ne)=>N(j.timestamp)-N(ne.timestamp)),_=T.map(j=>N(j.timestamp)),K=T.map(j=>j.temperature===null?null:D?j.temperature:j.temperature*9/5+32);return S.map(j=>{let ne=null,we=null;for(let he=0;he<_.length;he++)if(_[he]<=j&&(ne={time:_[he],temp:K[he]}),_[he]>=j&&we===null){we={time:_[he],temp:K[he]};break}if(ne&&we&&ne.temp!==null&&we.temp!==null){if(ne.time===we.time)return ne.temp;const he=(j-ne.time)/(we.time-ne.time);return ne.temp+he*(we.temp-ne.temp)}return ne!==null&&ne.temp!==null?ne.temp:we!==null&&we.temp!==null?we.temp:null})}function q(I,S,D){const T=[...I].reverse();let _=[],K=[],j=[];for(const he of T){_.push(N(he.timestamp)),K.push(he.sg_calibrated??he.sg_raw);const Be=he.temp_calibrated??he.temp_raw;Be!==null?j.push(D?dn(Be):Be):j.push(null)}let ne=ee(S,_,D);return b(a)&&b(u)>1&&(K=M(K,b(u)),j=M(j,b(u)),ne=M(ne,b(u))),[_,K,j,ne]=se(_,K,j,ne,500),[_,K,j,ne]}const ae=3e4;async function H(I=!1){const D=Date.now()-b(d);if(!(!I&&b(d)>0&&D<ae)){Me(O,!0),Me(z,null);try{const[T,_]=await Promise.all([Ju(l.tiltId,b(C)),Zu(b(C)).catch(()=>[])]);Me(F,T,!0),Me(Z,_,!0),Ae()}catch(T){Me(z,T instanceof Error?T.message:"Failed to load data",!0)}finally{Me(d,Date.now(),!0),Me(O,!1)}}}function Ae(){if(!m||b(F).length===0)return;const I=q(b(F),b(Z),b(y)),S=$(m.clientWidth,b(y),b(c));g&&g.destroy(),g=new lt(S,I,m)}function pe(){g&&m&&g.setSize({width:m.clientWidth,height:220})}let re=null;function fe(){if(re&&(clearInterval(re),re=null),b(p)>0){const I=b(p)*60*1e3;re=setInterval(()=>{b(O)||H(!1)},I)}}wa(async()=>{const I=localStorage.getItem(i);if(I!==null){const S=parseInt(I,10);Number.isNaN(S)||Me(p,S,!0)}try{const S=await fetch("/api/system/timezone");if(S.ok){const D=await S.json();Me(c,D.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await H(!0),window.addEventListener("resize",pe),fe()}),Gr(()=>{g?.destroy(),window.removeEventListener("resize",pe),re&&clearInterval(re)}),Ts(()=>{b(y)!==void 0&&b(F).length>0&&m&&Ae()}),Ts(()=>{b(a),b(u),b(F).length>0&&m&&Ae()});function ue(I){const S=Number(I.target.value);Me(p,S,!0),localStorage.setItem(i,String(S)),fe(),H(!0)}var W=rc(),_e=R(W),Ce=R(_e);wn(Ce,21,()=>Ku,Rn,(I,S)=>{var D=lc();let T;D.__click=()=>{b(C)!==b(S).hours&&(Me(C,b(S).hours,!0),H(!0))};var _=R(D,!0);L(D),gt(()=>{T=El(D,1,"range-btn svelte-1e832qd",null,T,{active:b(C)===b(S).hours}),xe(_,b(S).label)}),De(I,D)}),L(Ce);var de=X(Ce,2),te=R(de),be=X(R(te),2);be.__change=ue,wn(be,21,()=>n,Rn,(I,S)=>{var D=nc(),T=R(D,!0);L(D);var _={};gt(()=>{xe(T,b(S).label),_!==(_=b(S).value)&&(D.value=(D.__value=b(S).value)??"")}),De(I,D)}),L(be);var ze;Jr(be),L(te);var ge=X(te,2),je=X(R(ge),2),Qe=R(je);Ml(2),L(je),Ml(2),L(ge),L(de),L(_e);var Ie=X(_e,2),ft=R(Ie);{var Ot=I=>{var S=sc();De(I,S)};wt(ft,I=>{b(O)&&I(Ot)})}var kt=X(ft,2);{var Tt=I=>{var S=ic(),D=X(R(S),2);D.__click=()=>H(!0),L(S),De(I,S)},Ut=I=>{var S=ma(),D=Vs(S);{var T=_=>{var K=ac();De(_,K)};wt(D,_=>{b(F).length===0&&_(T)},!0)}De(I,S)};wt(kt,I=>{b(z)?I(Tt):I(Ut,!1)})}L(Ie),Ns(Ie,I=>m=I,()=>m);var _t=X(Ie,2);{var qe=I=>{{let S=Dt(()=>l.onOgChange??(()=>{}));tc(I,{get readings(){return b(F)},get originalGravity(){return v()},get onOgChange(){return b(S)}})}};wt(_t,I=>{b(F).length>0&&I(qe)})}L(W),gt(()=>{ze!==(ze=b(p))&&(be.value=(be.__value=b(p))??"",Zr(be,b(p))),Cn(Qe,`background: ${(k[l.tiltColor]||"var(--text-secondary)")??""};`)}),De(e,W),Gn()}Vn(["click","change"]);var uc=Fe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),cc=Fe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),fc=Fe('<div class="w-1 rounded-sm transition-all"></div>'),dc=Fe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),pc=Fe("<div><!></div>"),hc=Fe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),vc=Fe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function mc(e,l){Nn(l,!0);let i=Ms(l,"expanded",3,!1),n=Ms(l,"wide",3,!1),a=et(!1);Ts(()=>{i()&&!b(a)&&Me(a,!0)});let u=et(!1),c=et(""),d=et(null),p=et(!1);function v(){Me(c,l.tilt.beer_name,!0),Me(u,!0),setTimeout(()=>b(d)?.focus(),0)}async function y(){if(b(p))return;const S=b(c).trim();if(!S||S===l.tilt.beer_name){Me(u,!1);return}Me(p,!0);const D=await Yr(l.tilt.id,S);Me(p,!1),D&&Me(u,!1)}function m(S){S.key==="Enter"?y():S.key==="Escape"&&Me(u,!1)}async function g(S){await jr(l.tilt.id,S)}let O=Dt(_a);const z={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function C(S){return S.toFixed(3)}function F(S){return Br(S)}function Z(S){return S>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:S>=-60?{bars:3,color:"var(--positive)",label:"Good"}:S>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function k(S){const D=Math.floor((Date.now()-new Date(S).getTime())/1e3);if(D<10)return"just now";if(D<60)return`${D}s ago`;const T=Math.floor(D/60);if(T<60)return`${T}m ago`;const _=Math.floor(T/60);return _<24?`${_}h ago`:`${Math.floor(_/24)}d ago`}let U=Dt(()=>z[l.tilt.color]||"var(--tilt-black)"),w=Dt(()=>Z(l.tilt.rssi)),Q=Dt(()=>k(l.tilt.last_seen));var P=vc();let V;var Y=R(P),ie=X(Y,2),$=R(ie),M=R($),se=R(M);{var N=S=>{var D=uc();xa(D),D.__keydown=m,Ns(D,T=>Me(d,T),()=>b(d)),gt(()=>D.disabled=b(p)),ga("blur",D,y),ba(D,()=>b(c),T=>Me(c,T)),De(S,D)},ee=S=>{var D=cc();D.__click=v;var T=R(D),_=R(T,!0);L(T),Ml(2),L(D),gt(()=>xe(_,l.tilt.beer_name)),De(S,D)};wt(se,S=>{b(u)?S(N):S(ee,!1)})}var q=X(se,2),ae=R(q),H=X(ae,2),Ae=R(H,!0);L(H),L(q),L(M);var pe=X(M,2),re=R(pe);wn(re,20,()=>Array(4),Rn,(S,D,T)=>{var _=fc();gt(()=>Cn(_,`
								height: ${8+T*4}px;
								background: ${(T<b(w).bars?b(w).color:"var(--bg-hover)")??""};
								opacity: ${T<b(w).bars?1:.4};
							`)),De(S,_)}),L(re);var fe=X(re,2),ue=R(fe);L(fe),L(pe),L($);var W=X($,2),_e=R(W),Ce=R(_e),de=R(Ce,!0);L(Ce),Ml(2),L(_e);var te=X(_e,2),be=R(te),ze=R(be,!0),ge=X(ze),je=R(ge,!0);L(ge),L(be),Ml(2),L(te),L(W);var Qe=X(W,2);{var Ie=S=>{var D=dc(),T=X(R(D),2),_=R(T,!0);L(T);var K=X(T,4),j=R(K);L(K),L(D),gt((ne,we)=>{xe(_,ne),xe(j,`${we??""}${b(O)??""}`)},[()=>C(l.tilt.sg_raw),()=>F(l.tilt.temp_raw)]),De(S,D)};wt(Qe,S=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&S(Ie)})}var ft=X(Qe,2);{var Ot=S=>{var D=pc();let T;var _=R(D);Qr(_,()=>l.tilt.id,K=>{oc(K,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:g})}),L(D),gt(()=>T=El(D,1,"chart-section svelte-3twv7v",null,T,{hidden:!i()})),De(S,D)};wt(ft,S=>{b(a)&&S(Ot)})}var kt=X(ft,2),Tt=R(kt),Ut=R(Tt);L(Tt);var _t=X(Tt,2),qe=R(_t);{var I=S=>{var D=hc();D.__click=function(...K){l.onToggleExpand?.apply(this,K)};var T=R(D);let _;L(D),gt(()=>{Di(D,"aria-label",i()?"Collapse chart":"Expand chart"),_=El(T,0,"w-4 h-4 transition-transform",null,_,{"rotate-180":i()})}),De(S,D)};wt(qe,S=>{l.onToggleExpand&&S(I)})}Ml(2),L(_t),L(kt),L(ie),L(P),gt((S,D)=>{V=El(P,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,V,{expanded:i(),wide:n()}),Cn(Y,`background: ${b(U)??""};`),Cn(ae,`background: ${b(U)??""};`),xe(Ae,l.tilt.color),Di(pe,"title",`${b(w).label??""} signal (${l.tilt.rssi??""} dBm)`),xe(ue,`${l.tilt.rssi??""} dBm`),xe(de,S),xe(ze,D),xe(je,b(O)),xe(Ut,`Updated ${b(Q)??""}`)},[()=>C(l.tilt.sg),()=>F(l.tilt.temp)]),De(e,P),Gn()}Vn(["keydown","click"]);var gc=Fe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),wc=Fe('<div class="alerts-list svelte-1uha8ag"></div>'),_c=Fe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),xc=Fe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),bc=Fe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Sc=Fe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),yc=Fe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),kc=Fe("<div></div>"),Tc=Fe("<!> <!>",1);function Nc(e,l){Nn(l,!0);let i=et(!1),n=et(!1);wa(()=>{const C=localStorage.getItem("brewsignal_alerts_dismissed"),F=localStorage.getItem("brewsignal_alerts_dismissed_time");return C==="true"&&F&&Date.now()-parseInt(F,10)<360*60*1e3&&Me(i,!0),qr(),()=>{Kr()}});let a=Dt(()=>Array.from(gs.tilts.values())),u=et(null);function c(C){Me(u,b(u)===C?null:C,!0)}function d(){Me(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function p(){Me(n,!b(n))}var v=Tc();Ur("1uha8ag",C=>{Hr(()=>{Wr.title="Dashboard | BrewSignal"})});var y=Vs(v);{var m=C=>{var F=xc(),Z=R(F),k=R(Z),U=X(R(k),4),w=R(U,!0);L(U),L(k);var Q=X(k,2);Q.__click=d,L(Z);var P=X(Z,2);{var V=$=>{var M=wc();wn(M,21,()=>un.alerts,Rn,(se,N)=>{var ee=gc();let q;var ae=R(ee),H=R(ae);L(ae);var Ae=X(ae,2),pe=R(Ae,!0);L(Ae),L(ee),gt(()=>{q=El(ee,1,"alert-item svelte-1uha8ag",null,q,{warning:b(N).level==="warning",critical:b(N).level==="critical"}),xe(H,`${b(N).day??""}:`),xe(pe,b(N).message)}),De(se,ee)}),L(M),De($,M)};wt(P,$=>{b(n)||$(V)})}var Y=X(P,2);{var ie=$=>{var M=_c();M.__click=p;var se=R(M,!0);L(M),gt(()=>xe(se,b(n)?`Show ${un.alerts.length} alerts`:"Show less")),De($,M)};wt(Y,$=>{un.alerts.length>3&&$(ie)})}L(F),gt(()=>xe(w,un.alerts.length)),De(C,F)};wt(y,C=>{un.alerts.length>0&&!b(i)&&C(m)})}var g=X(y,2);{var O=C=>{var F=yc(),Z=X(R(F),4),k=R(Z);{var U=V=>{var Y=Fr("Waiting for Tilt hydrometers to broadcast...");De(V,Y)},w=V=>{var Y=bc();De(V,Y)};wt(k,V=>{gs.connected?V(U):V(w,!1)})}L(Z);var Q=X(Z,2);{var P=V=>{var Y=Sc();De(V,Y)};wt(Q,V=>{gs.connected&&V(P)})}L(F),De(C,F)},z=C=>{var F=kc();let Z;wn(F,21,()=>b(a),k=>k.id,(k,U)=>{{let w=Dt(()=>b(u)===b(U).id),Q=Dt(()=>b(a).length===1);mc(k,{get tilt(){return b(U)},get expanded(){return b(w)},get wide(){return b(Q)},onToggleExpand:()=>c(b(U).id)})}}),L(F),gt(()=>Z=El(F,1,"tilt-grid svelte-1uha8ag",null,Z,{"single-tilt":b(a).length===1})),De(C,F)};wt(g,C=>{b(a).length===0?C(O):C(z,!1)})}De(e,v),Gn()}Vn(["click"]);export{Nc as component};
