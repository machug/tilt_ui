import{e as y,f as v,aq as T,h as l,j as w,C,N as u,w as _,i as d,x as b,ar as x,as as A,at as F,au as N,T as E,av as S,p as M}from"./KfNDMb7P.js";function U(e,t){let r=null,s=l;var a;if(l){r=b;for(var i=w(document.head);i!==null&&(i.nodeType!==C||i.data!==e);)i=u(i);if(i===null)_(!1);else{var n=u(i);i.remove(),d(n)}}l||(a=document.head.appendChild(y()));try{v(()=>t(a),T)}finally{s&&(_(!0),d(r))}}const g=[...` 	
\r\f \v\uFEFF`];function H(e,t,r){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),r){for(var a in r)if(r[a])s=s?s+" "+a:a;else if(s.length)for(var i=a.length,n=0;(n=s.indexOf(a,n))>=0;){var c=n+i;(n===0||g.includes(s[n-1]))&&(c===s.length||g.includes(s[c]))?s=(n===0?"":s.substring(0,n))+s.substring(c+1):n=c}}return s===""?null:s}function P(e,t){return e==null?null:String(e)}const O=Symbol("is custom element"),k=Symbol("is html");function B(e){if(l){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var s=e.value;h(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var a=e.checked;h(e,"checked",null),e.checked=a}}};e.__on_r=r,E(r),S()}}function h(e,t,r,s){var a=L(e);l&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=r)&&(t==="loading"&&(e[F]=r),r==null?e.removeAttribute(t):typeof r!="string"&&j(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function L(e){return e.__attributes??={[O]:e.nodeName.includes("-"),[k]:e.namespaceURI===x}}var m=new Map;function j(e){var t=e.getAttribute("is")||e.nodeName,r=m.get(t);if(r)return r;m.set(t,r=[]);for(var s,a=e,i=Element.prototype;i!==a;){s=N(a);for(var n in s)s[n].set&&r.push(n);a=A(a)}return r}const f={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:3},o=M({config:f,loaded:!1});async function q(){try{const e=await fetch("/api/config");if(e.ok){const t=await e.json();o.config={...f,...t}}}catch(e){console.error("Failed to load config:",e)}finally{o.loaded=!0}}async function R(e){try{const t=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const s=await t.json();return o.config={...f,...s},{success:!0}}const r=await t.json();return r.detail&&Array.isArray(r.detail)?{success:!1,error:r.detail.map(a=>a.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(t){return console.error("Failed to update config:",t),{success:!1,error:"Network error saving settings"}}}function I(e){return(e-32)*(5/9)}function J(e){return e*(9/5)+32}function K(e,t=o.config.temp_units){return t==="C"?I(e).toFixed(1):e.toFixed(1)}function Y(){return o.config.temp_units==="C"?"°C":"°F"}function p(e){return-616.868+1111.14*e-630.272*e**2+135.997*e**3}function D(e){return p(e)}function z(e,t=o.config.sg_units){switch(t){case"plato":return p(e).toFixed(1);case"brix":return D(e).toFixed(1);default:return e.toFixed(3)}}function Q(){switch(o.config.sg_units){case"plato":return"°P";case"brix":return"°Bx";default:return"SG"}}export{H as a,J as b,o as c,z as d,Q as e,I as f,Y as g,U as h,K as i,q as l,B as r,h as s,P as t,R as u};
