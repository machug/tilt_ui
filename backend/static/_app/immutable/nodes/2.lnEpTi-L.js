import{d as so,f as lt,s as Wt,a as Ne,c as ps,e as Tr,t as Mr}from"../chunks/BHvHOtuG.js";import{ab as Ts,ac as Ut,p as Er,ad as io,aD as Ar,ae as ls,g as Q,am as Yt,ah as de,s as tt,aj as pe,al as el,ag as Fe,an as en,af as Ms,ak as ds,V as Dr,ai as Lr}from"../chunks/BeYMcFNd.js";import{e as Es,i as oo}from"../chunks/Cn7aBH5Z.js";import{i as Gt}from"../chunks/Cd5u1CHp.js";import{c as ns,f as Cr,g as Pr,b as Rr,r as zr,s as Fr,h as Vr}from"../chunks/BVbD26w7.js";import{u as Nr,c as Or,d as Hr,t as ss}from"../chunks/Dida4qXk.js";import{s as hs}from"../chunks/CxgAQQFa.js";import{s as xn}from"../chunks/D4P9rzug.js";import{b as Wr}from"../chunks/BperHIsi.js";import{b as ro,p as Gr}from"../chunks/UOvl9E0t.js";const Br=!0,Ge="u-",Ir="uplot",Ur=Ge+"hz",Yr=Ge+"vt",jr=Ge+"title",Kr=Ge+"wrap",qr=Ge+"under",Jr=Ge+"over",Zr=Ge+"axis",hl=Ge+"off",Qr=Ge+"select",$r=Ge+"cursor-x",Xr=Ge+"cursor-y",ea=Ge+"cursor-pt",ta=Ge+"legend",la=Ge+"live",na=Ge+"inline",sa=Ge+"series",ia=Ge+"marker",wi=Ge+"label",oa=Ge+"value",tn="width",ln="height",$l="top",_i="bottom",Fl="left",is="right",As="#000",xi=As+"0",os="mousemove",bi="mousedown",rs="mouseup",Si="mouseenter",yi="mouseleave",ki="dblclick",ra="resize",aa="scroll",Ti="change",Sn="dppxchange",Ds="--",Bl=typeof window<"u",ms=Bl?document:null,Nl=Bl?window:null,fa=Bl?navigator:null;let ve,vn;function gs(){let e=devicePixelRatio;ve!=e&&(ve=e,vn&&ws(Ti,vn,gs),vn=matchMedia(`(min-resolution: ${ve-.001}dppx) and (max-resolution: ${ve+.001}dppx)`),ml(Ti,vn,gs),Nl.dispatchEvent(new CustomEvent(Sn)))}function mt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function vs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ae(e,l,i){e.style[l]=i+"px"}function Lt(e,l,i,n){let o=ms.createElement(e);return l!=null&&mt(o,l),i?.insertBefore(o,n),o}function kt(e,l){return Lt("div",e,l)}const Mi=new WeakMap;function Ht(e,l,i,n,o){let u="translate("+l+"px,"+i+"px)",f=Mi.get(e);u!=f&&(e.style.transform=u,Mi.set(e,u),l<0||i<0||l>n||i>o?mt(e,hl):vs(e,hl))}const Ei=new WeakMap;function Ai(e,l,i){let n=l+i,o=Ei.get(e);n!=o&&(Ei.set(e,n),e.style.background=l,e.style.borderColor=i)}const Di=new WeakMap;function Li(e,l,i,n){let o=l+""+i,u=Di.get(e);o!=u&&(Di.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ls={passive:!0},ua={...Ls,capture:!0};function ml(e,l,i,n){l.addEventListener(e,i,n?ua:Ls)}function ws(e,l,i,n){l.removeEventListener(e,i,Ls)}Bl&&gs();function Ct(e,l,i,n){let o;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)o=u?i+n>>1:gt((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function ao(e){return(i,n,o)=>{let u=-1,f=-1;for(let d=n;d<=o;d++)if(e(i[d])){u=d;break}for(let d=o;d>=n;d--)if(e(i[d])){f=d;break}return[u,f]}}const fo=e=>e!=null,uo=e=>e!=null&&e>0,Tn=ao(fo),ca=ao(uo);function pa(e,l,i,n=0,o=!1){let u=o?ca:Tn,f=o?uo:fo;[l,i]=u(e,l,i);let d=e[l],h=e[l];if(l>-1)if(n==1)d=e[l],h=e[i];else if(n==-1)d=e[i],h=e[l];else for(let p=l;p<=i;p++){let _=e[p];f(_)&&(_<d?d=_:_>h&&(h=_))}return[d??ye,h??-ye]}function Mn(e,l,i,n){let o=Ri(e),u=Ri(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let f=i==10?jt:co,d=o==1?gt:Tt,h=u==1?Tt:gt,p=d(f(We(e))),_=h(f(We(l))),g=Ol(i,p),v=Ol(i,_);return i==10&&(p<0&&(g=ke(g,-p)),_<0&&(v=ke(v,-_))),n||i==2?(e=g*o,l=v*u):(e=go(e,g),l=En(l,v)),[e,l]}function Cs(e,l,i,n){let o=Mn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Ps=.1,Ci={mode:3,pad:Ps},sn={pad:0,soft:null,mode:0},da={min:sn,max:sn};function yn(e,l,i,n){return An(i)?Pi(e,l,i):(sn.pad=i,sn.soft=n?0:null,sn.mode=n?3:0,Pi(e,l,da))}function me(e,l){return e??l}function ha(e,l,i){for(l=me(l,0),i=me(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Pi(e,l,i){let n=i.min,o=i.max,u=me(n.pad,0),f=me(o.pad,0),d=me(n.hard,-ye),h=me(o.hard,ye),p=me(n.soft,ye),_=me(o.soft,-ye),g=me(n.mode,0),v=me(o.mode,0),A=l-e,P=jt(A),H=rt(We(e),We(l)),F=jt(H),z=We(F-P);(A<1e-24||z>10)&&(A=0,(e==0||l==0)&&(A=1e-24,g==2&&p!=ye&&(u=0),v==2&&_!=-ye&&(f=0)));let b=A||H||1e3,O=jt(b),k=Ol(10,gt(O)),ee=b*(A==0?e==0?.1:1:u),E=ke(go(e-ee,k/10),24),le=e>=p&&(g==1||g==3&&E<=p||g==2&&E>=p)?p:ye,K=rt(d,E<le&&e>=le?le:Pt(le,E)),ie=b*(A==0?l==0?.1:1:f),q=ke(En(l+ie,k/10),24),T=l<=_&&(v==1||v==3&&q>=_||v==2&&q<=_)?_:-ye,te=Pt(h,q>T&&l<=T?T:rt(T,q));return K==te&&K==0&&(te=100),[K,te]}const ma=new Intl.NumberFormat(Bl?fa.language:"en-US"),Rs=e=>ma.format(e),vt=Math,bn=vt.PI,We=vt.abs,gt=vt.floor,He=vt.round,Tt=vt.ceil,Pt=vt.min,rt=vt.max,Ol=vt.pow,Ri=vt.sign,jt=vt.log10,co=vt.log2,ga=(e,l=1)=>vt.sinh(e)*l,as=(e,l=1)=>vt.asinh(e/l),ye=1/0;function zi(e){return(jt((e^e>>31)-(e>>31))|0)+1}function _s(e,l,i){return Pt(rt(e,l),i)}function po(e){return typeof e=="function"}function ce(e){return po(e)?e:()=>e}const va=()=>{},ho=e=>e,mo=(e,l)=>l,wa=e=>null,Fi=e=>!0,Vi=(e,l)=>e==l,_a=/\.\d*?(?=9{6,}|0{6,})/gm,gl=e=>{if(wo(e)||ll.has(e))return e;const l=`${e}`,i=l.match(_a);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,u]=l.split("e");return+`${gl(o)}e${u}`}return ke(e,n)};function pl(e,l){return gl(ke(gl(e/l))*l)}function En(e,l){return gl(Tt(gl(e/l))*l)}function go(e,l){return gl(gt(gl(e/l))*l)}function ke(e,l=0){if(wo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return He(n)/i}const ll=new Map;function vo(e){return((""+e).split(".")[1]||"").length}function rn(e,l,i,n){let o=[],u=n.map(vo);for(let f=l;f<i;f++){let d=We(f),h=ke(Ol(e,f),d);for(let p=0;p<n.length;p++){let _=e==10?+`${n[p]}e${f}`:n[p]*h,g=(f>=0?0:d)+(f>=u[p]?0:u[p]),v=e==10?_:ke(_,g);o.push(v),ll.set(v,g)}}return o}const on={},zs=[],Hl=[null,null],tl=Array.isArray,wo=Number.isInteger,xa=e=>e===void 0;function Ni(e){return typeof e=="string"}function An(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function ba(e){return e!=null&&typeof e=="object"}const Sa=Object.getPrototypeOf(Uint8Array),_o="__proto__";function Wl(e,l=An){let i;if(tl(e)){let n=e.find(o=>o!=null);if(tl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Wl(e[o],l)}else i=e.slice()}else if(e instanceof Sa)i=e.slice();else if(l(e)){i={};for(let n in e)n!=_o&&(i[n]=Wl(e[n],l))}else i=e;return i}function Ve(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=_o&&(An(e[o])?Ve(e[o],Wl(n[o])):e[o]=Wl(n[o]))}return e}const ya=0,ka=1,Ta=2;function Ma(e,l,i){for(let n=0,o,u=-1;n<l.length;n++){let f=l[n];if(f>u){for(o=f-1;o>=0&&e[o]==null;)e[o--]=null;for(o=f+1;o<i&&e[o]==null;)e[u=o++]=null}}}function Ea(e,l){if(La(e)){let f=e[0].slice();for(let d=1;d<e.length;d++)f.push(...e[d].slice(1));return Ca(f[0])||(f=Da(f)),f}let i=new Set;for(let f=0;f<e.length;f++){let h=e[f][0],p=h.length;for(let _=0;_<p;_++)i.add(h[_])}let n=[Array.from(i).sort((f,d)=>f-d)],o=n[0].length,u=new Map;for(let f=0;f<o;f++)u.set(n[0][f],f);for(let f=0;f<e.length;f++){let d=e[f],h=d[0];for(let p=1;p<d.length;p++){let _=d[p],g=Array(o).fill(void 0),v=l?l[f][p]:ka,A=[];for(let P=0;P<_.length;P++){let H=_[P],F=u.get(h[P]);H===null?v!=ya&&(g[F]=H,v==Ta&&A.push(F)):g[F]=H}Ma(g,A,o),n.push(g)}}return n}const Aa=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Da(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,f)=>l[u]-l[f]);let o=[];for(let u=0;u<e.length;u++){let f=e[u],d=Array(i);for(let h=0;h<i;h++)d[h]=f[n[h]];o.push(d)}return o}function La(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let u=0;u<i;u++)if(o[u]!=l[u])return!1}}return!0}function Ca(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const u=rt(1,gt((o-n+1)/l));for(let f=e[n],d=n+u;d<=o;d+=u){const h=e[d];if(h!=null){if(h<=f)return!1;f=h}}return!0}const xo=["January","February","March","April","May","June","July","August","September","October","November","December"],bo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function So(e){return e.slice(0,3)}const Pa=bo.map(So),Ra=xo.map(So),za={MMMM:xo,MMM:Ra,WWWW:bo,WWW:Pa};function Xl(e){return(e<10?"0":"")+e}function Fa(e){return(e<10?"00":e<100?"0":"")+e}const Va={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>Xl(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Xl(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>Xl(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Xl(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Xl(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Fa(e.getMilliseconds())};function Fs(e,l){l=l||za;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Va[o[1]]:o[0]);return u=>{let f="";for(let d=0;d<i.length;d++)f+=typeof i[d]=="string"?i[d]:i[d](u,l);return f}}const Na=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Oa(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Na?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const yo=e=>e%1==0,kn=[1,2,2.5,5],Ha=rn(10,-32,0,kn),ko=rn(10,0,32,kn),Wa=ko.filter(yo),dl=Ha.concat(ko),Vs=`
`,To="{YYYY}",Oi=Vs+To,Mo="{M}/{D}",nn=Vs+Mo,wn=nn+"/{YY}",Eo="{aa}",Ga="{h}:{mm}",Vl=Ga+Eo,Hi=Vs+Vl,Wi=":{ss}",we=null;function Ao(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,u=o*30,f=o*365,h=(e==1?rn(10,0,3,kn).filter(yo):rn(10,-3,0,kn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,u,u*2,u*3,u*4,u*6,f,f*2,f*5,f*10,f*25,f*50,f*100]);const p=[[f,To,we,we,we,we,we,we,1],[o*28,"{MMM}",Oi,we,we,we,we,we,1],[o,Mo,Oi,we,we,we,we,we,1],[n,"{h}"+Eo,wn,we,nn,we,we,we,1],[i,Vl,wn,we,nn,we,we,we,1],[l,Wi,wn+" "+Vl,we,nn+" "+Vl,we,Hi,we,1],[e,Wi+".{fff}",wn+" "+Vl,we,nn+" "+Vl,we,Hi,we,1]];function _(g){return(v,A,P,H,F,z)=>{let b=[],O=F>=f,k=F>=u&&F<f,ee=g(P),E=ke(ee*e,3),le=fs(ee.getFullYear(),O?0:ee.getMonth(),k||O?1:ee.getDate()),K=ke(le*e,3);if(k||O){let ie=k?F/u:0,q=O?F/f:0,T=E==K?E:ke(fs(le.getFullYear()+q,le.getMonth()+ie,1)*e,3),te=new Date(He(T/e)),V=te.getFullYear(),Y=te.getMonth();for(let W=0;T<=H;W++){let re=fs(V+q*W,Y+ie*W,1),N=re-g(ke(re*e,3));T=ke((+re+N)*e,3),T<=H&&b.push(T)}}else{let ie=F>=o?o:F,q=gt(P)-gt(E),T=K+q+En(E-K,ie);b.push(T);let te=g(T),V=te.getHours()+te.getMinutes()/i+te.getSeconds()/n,Y=F/n,W=v.axes[A]._space,re=z/W;for(;T=ke(T+F,e==1?0:3),!(T>H);)if(Y>1){let N=gt(ke(V+Y,6))%24,G=g(T).getHours()-N;G>1&&(G=-1),T-=G*n,V=(V+Y)%24;let U=b[b.length-1];ke((T-U)/F,3)*re>=.7&&b.push(T)}else b.push(T)}return b}}return[h,p,_]}const[Ba,Ia,Ua]=Ao(1),[Ya,ja,Ka]=Ao(.001);rn(2,-53,53,[1]);function Gi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Bi(e,l){return(i,n,o,u,f)=>{let d=l.find(P=>f>=P[0])||l[l.length-1],h,p,_,g,v,A;return n.map(P=>{let H=e(P),F=H.getFullYear(),z=H.getMonth(),b=H.getDate(),O=H.getHours(),k=H.getMinutes(),ee=H.getSeconds(),E=F!=h&&d[2]||z!=p&&d[3]||b!=_&&d[4]||O!=g&&d[5]||k!=v&&d[6]||ee!=A&&d[7]||d[1];return h=F,p=z,_=b,g=O,v=k,A=ee,E(H)})}}function qa(e,l){let i=Fs(l);return(n,o,u,f,d)=>o.map(h=>i(e(h)))}function fs(e,l,i){return new Date(e,l,i)}function Ii(e,l){return l(e)}const Ja="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Ui(e,l){return(i,n,o,u)=>u==null?Ds:l(e(n))}function Za(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function Qa(e,l){return e.series[l].fill(e,l)}const $a={show:!0,live:!0,isolate:!1,mount:va,markers:{show:!0,width:2,stroke:Za,fill:Qa,dash:"solid"},idx:null,idxs:null,values:[]};function Xa(e,l){let i=e.cursor.points,n=kt(),o=i.size(e,l);Ae(n,tn,o),Ae(n,ln,o);let u=o/-2;Ae(n,"marginLeft",u),Ae(n,"marginTop",u);let f=i.width(e,l,o);return f&&Ae(n,"borderWidth",f),n}function ef(e,l){let i=e.series[l].points;return i._fill||i._stroke}function tf(e,l){let i=e.series[l].points;return i._stroke||i._fill}function lf(e,l){return e.series[l].points.size}const us=[0,0];function nf(e,l,i){return us[0]=l,us[1]=i,us}function _n(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function cs(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const sf={show:!0,x:!0,y:!0,lock:!1,move:nf,points:{one:!1,show:Xa,size:lf,width:0,stroke:tf,fill:ef},bind:{mousedown:_n,mouseup:_n,click:_n,dblclick:_n,mousemove:cs,mouseleave:cs,mouseenter:cs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Do={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ns=Ve({},Do,{filter:mo}),Lo=Ve({},Ns,{size:10}),Co=Ve({},Do,{show:!1}),Os='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Po="bold "+Os,Ro=1.5,Yi={show:!0,scale:"x",stroke:As,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Po,side:2,grid:Ns,ticks:Lo,border:Co,font:Os,lineGap:Ro,rotate:0},of="Value",rf="Time",ji={show:!0,scale:"x",auto:!1,sorted:1,min:ye,max:-ye,idxs:[]};function af(e,l,i,n,o){return l.map(u=>u==null?"":Rs(u))}function ff(e,l,i,n,o,u,f){let d=[],h=ll.get(o)||0;i=f?i:ke(En(i,o),h);for(let p=i;p<=n;p=ke(p+o,h))d.push(Object.is(p,-0)?0:p);return d}function xs(e,l,i,n,o,u,f){const d=[],h=e.scales[e.axes[l].scale].log,p=h==10?jt:co,_=gt(p(i));o=Ol(h,_),h==10&&(o=dl[Ct(o,dl)]);let g=i,v=o*h;h==10&&(v=dl[Ct(v,dl)]);do d.push(g),g=g+o,h==10&&!ll.has(g)&&(g=ke(g,ll.get(o))),g>=v&&(o=g,v=o*h,h==10&&(v=dl[Ct(v,dl)]));while(g<=n);return d}function uf(e,l,i,n,o,u,f){let h=e.scales[e.axes[l].scale].asinh,p=n>h?xs(e,l,rt(h,i),n,o):[h],_=n>=0&&i<=0?[0]:[];return(i<-h?xs(e,l,rt(h,-n),-i,o):[h]).reverse().map(v=>-v).concat(_,p)}const zo=/./,cf=/[12357]/,pf=/[125]/,Ki=/1/,bs=(e,l,i,n)=>e.map((o,u)=>l==4&&o==0||u%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function df(e,l,i,n,o){let u=e.axes[i],f=u.scale,d=e.scales[f],h=e.valToPos,p=u._space,_=h(10,f),g=h(9,f)-_>=p?zo:h(7,f)-_>=p?cf:h(5,f)-_>=p?pf:Ki;if(g==Ki){let v=We(h(1,f)-_);if(v<p)return bs(l.slice().reverse(),d.distr,g,Tt(p/v)).reverse()}return bs(l,d.distr,g,1)}function hf(e,l,i,n,o){let u=e.axes[i],f=u.scale,d=u._space,h=e.valToPos,p=We(h(1,f)-h(2,f));return p<d?bs(l.slice().reverse(),3,zo,Tt(d/p)).reverse():l}function mf(e,l,i,n){return n==null?Ds:l==null?"":Rs(l)}const qi={show:!0,scale:"y",stroke:As,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Po,side:3,grid:Ns,ticks:Lo,border:Co,font:Os,lineGap:Ro,rotate:0};function gf(e,l){let i=3+(e||1)*2;return ke(i*l,3)}function vf(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],u=e.valToPos(o[n[0]],i,!0),f=e.valToPos(o[n[1]],i,!0),d=We(f-u),h=e.series[l],p=d/(h.points.space*ve);return n[1]-n[0]<=p}const Ji={scale:null,auto:!0,sorted:0,min:ye,max:-ye},Fo=(e,l,i,n,o)=>o,Zi={show:!0,auto:!0,sorted:0,gaps:Fo,alpha:1,facets:[Ve({},Ji,{scale:"x"}),Ve({},Ji,{scale:"y"})]},Qi={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Fo,alpha:1,points:{show:vf,filter:null},values:null,min:ye,max:-ye,idxs:[],path:null,clip:null};function wf(e,l,i,n,o){return i/10}const Vo={time:Br,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},_f=Ve({},Vo,{time:!1,ori:1}),$i={};function No(e,l){let i=$i[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,u,f,d,h,p){for(let _=0;_<i.plots.length;_++)i.plots[_]!=o&&i.plots[_].pub(n,o,u,f,d,h,p)}},e!=null&&($i[e]=i)),i}const Gl=1,Ss=2;function vl(e,l,i){const n=e.mode,o=e.series[l],u=n==2?e._data[l]:e._data,f=e.scales,d=e.bbox;let h=u[0],p=n==2?u[1]:u[l],_=n==2?f[o.facets[0].scale]:f[e.series[0].scale],g=n==2?f[o.facets[1].scale]:f[o.scale],v=d.left,A=d.top,P=d.width,H=d.height,F=e.valToPosH,z=e.valToPosV;return _.ori==0?i(o,h,p,_,g,F,z,v,A,P,H,Ln,Il,Pn,Ho,Go):i(o,h,p,_,g,z,F,A,v,H,P,Cn,Ul,Gs,Wo,Bo)}function Hs(e,l){let i=0,n=0,o=me(e.bands,zs);for(let u=0;u<o.length;u++){let f=o[u];f.series[0]==l?i=f.dir:f.series[1]==l&&(f.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function xf(e,l,i,n,o){let u=e.mode,f=e.series[l],d=u==2?f.facets[1].scale:f.scale,h=e.scales[d];return o==-1?h.min:o==1?h.max:h.distr==3?h.dir==1?h.min:h.max:0}function Kt(e,l,i,n,o,u){return vl(e,l,(f,d,h,p,_,g,v,A,P,H,F)=>{let z=f.pxRound;const b=p.dir*(p.ori==0?1:-1),O=p.ori==0?Il:Ul;let k,ee;b==1?(k=i,ee=n):(k=n,ee=i);let E=z(g(d[k],p,H,A)),le=z(v(h[k],_,F,P)),K=z(g(d[ee],p,H,A)),ie=z(v(u==1?_.max:_.min,_,F,P)),q=new Path2D(o);return O(q,K,ie),O(q,E,ie),O(q,E,le),q})}function Dn(e,l,i,n,o,u){let f=null;if(e.length>0){f=new Path2D;const d=l==0?Pn:Gs;let h=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let A=v[0]-h;A>0&&d(f,h,n,A,n+u),h=v[1]}}let p=i+o-h,_=10;p>0&&d(f,h,n-_/2,p,n+u+_)}return f}function bf(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Ws(e,l,i,n,o,u,f){let d=[],h=e.length;for(let p=o==1?i:n;p>=i&&p<=n;p+=o)if(l[p]===null){let g=p,v=p;if(o==1)for(;++p<=n&&l[p]===null;)v=p;else for(;--p>=i&&l[p]===null;)v=p;let A=u(e[g]),P=v==g?A:u(e[v]),H=g-o;A=f<=0&&H>=0&&H<h?u(e[H]):A;let z=v+o;P=f>=0&&z>=0&&z<h?u(e[z]):P,P>=A&&d.push([A,P])}return d}function Xi(e){return e==0?ho:e==1?He:l=>pl(l,e)}function Oo(e){let l=e==0?Ln:Cn,i=e==0?(o,u,f,d,h,p)=>{o.arcTo(u,f,d,h,p)}:(o,u,f,d,h,p)=>{o.arcTo(f,u,h,d,p)},n=e==0?(o,u,f,d,h)=>{o.rect(u,f,d,h)}:(o,u,f,d,h)=>{o.rect(f,u,h,d)};return(o,u,f,d,h,p=0,_=0)=>{p==0&&_==0?n(o,u,f,d,h):(p=Pt(p,d/2,h/2),_=Pt(_,d/2,h/2),l(o,u+p,f),i(o,u+d,f,u+d,f+h,p),i(o,u+d,f+h,u,f+h,_),i(o,u,f+h,u,f,_),i(o,u,f,u+d,f,p),o.closePath())}}const Ln=(e,l,i)=>{e.moveTo(l,i)},Cn=(e,l,i)=>{e.moveTo(i,l)},Il=(e,l,i)=>{e.lineTo(l,i)},Ul=(e,l,i)=>{e.lineTo(i,l)},Pn=Oo(0),Gs=Oo(1),Ho=(e,l,i,n,o,u)=>{e.arc(l,i,n,o,u)},Wo=(e,l,i,n,o,u)=>{e.arc(i,l,n,o,u)},Go=(e,l,i,n,o,u,f)=>{e.bezierCurveTo(l,i,n,o,u,f)},Bo=(e,l,i,n,o,u,f)=>{e.bezierCurveTo(i,l,o,n,f,u)};function Io(e){return(l,i,n,o,u)=>vl(l,i,(f,d,h,p,_,g,v,A,P,H,F)=>{let{pxRound:z,points:b}=f,O,k;p.ori==0?(O=Ln,k=Ho):(O=Cn,k=Wo);const ee=ke(b.width*ve,3);let E=(b.size-b.width)/2*ve,le=ke(E*2,3),K=new Path2D,ie=new Path2D,{left:q,top:T,width:te,height:V}=l.bbox;Pn(ie,q-le,T-le,te+le*2,V+le*2);const Y=W=>{if(h[W]!=null){let re=z(g(d[W],p,H,A)),N=z(v(h[W],_,F,P));O(K,re+E,N),k(K,re,N,E,0,bn*2)}};if(u)u.forEach(Y);else for(let W=n;W<=o;W++)Y(W);return{stroke:ee>0?K:null,fill:K,clip:ie,flags:Gl|Ss}})}function Uo(e){return(l,i,n,o,u,f)=>{n!=o&&(u!=n&&f!=n&&e(l,i,n),u!=o&&f!=o&&e(l,i,o),e(l,i,f))}}const Sf=Uo(Il),yf=Uo(Ul);function Yo(e){const l=me(e?.alignGaps,0);return(i,n,o,u)=>vl(i,n,(f,d,h,p,_,g,v,A,P,H,F)=>{[o,u]=Tn(h,o,u);let z=f.pxRound,b=V=>z(g(V,p,H,A)),O=V=>z(v(V,_,F,P)),k,ee;p.ori==0?(k=Il,ee=Sf):(k=Ul,ee=yf);const E=p.dir*(p.ori==0?1:-1),le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Gl},K=le.stroke;let ie=!1;if(u-o>=H*4){let V=S=>i.posToVal(S,p.key,!0),Y=null,W=null,re,N,J,$=b(d[E==1?o:u]),G=b(d[o]),U=b(d[u]),D=V(E==1?G+1:U-1);for(let S=E==1?o:u;S>=o&&S<=u;S+=E){let I=d[S],fe=(E==1?I<D:I>D)?$:b(I),ae=h[S];fe==$?ae!=null?(N=ae,Y==null?(k(K,fe,O(N)),re=Y=W=N):N<Y?Y=N:N>W&&(W=N)):ae===null&&(ie=!0):(Y!=null&&ee(K,$,O(Y),O(W),O(re),O(N)),ae!=null?(N=ae,k(K,fe,O(N)),Y=W=re=N):(Y=W=null,ae===null&&(ie=!0)),$=fe,D=V($+E))}Y!=null&&Y!=W&&J!=$&&ee(K,$,O(Y),O(W),O(re),O(N))}else for(let V=E==1?o:u;V>=o&&V<=u;V+=E){let Y=h[V];Y===null?ie=!0:Y!=null&&k(K,b(d[V]),O(Y))}let[T,te]=Hs(i,n);if(f.fill!=null||T!=0){let V=le.fill=new Path2D(K),Y=f.fillTo(i,n,f.min,f.max,T),W=O(Y),re=b(d[o]),N=b(d[u]);E==-1&&([N,re]=[re,N]),k(V,N,W),k(V,re,W)}if(!f.spanGaps){let V=[];ie&&V.push(...Ws(d,h,o,u,E,b,l)),le.gaps=V=f.gaps(i,n,o,u,V),le.clip=Dn(V,p.ori,A,P,H,F)}return te!=0&&(le.band=te==2?[Kt(i,n,o,u,K,-1),Kt(i,n,o,u,K,1)]:Kt(i,n,o,u,K,te)),le})}function kf(e){const l=me(e.align,1),i=me(e.ascDesc,!1),n=me(e.alignGaps,0),o=me(e.extend,!1);return(u,f,d,h)=>vl(u,f,(p,_,g,v,A,P,H,F,z,b,O)=>{[d,h]=Tn(g,d,h);let k=p.pxRound,{left:ee,width:E}=u.bbox,le=G=>k(P(G,v,b,F)),K=G=>k(H(G,A,O,z)),ie=v.ori==0?Il:Ul;const q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Gl},T=q.stroke,te=v.dir*(v.ori==0?1:-1);let V=K(g[te==1?d:h]),Y=le(_[te==1?d:h]),W=Y,re=Y;o&&l==-1&&(re=ee,ie(T,re,V)),ie(T,Y,V);for(let G=te==1?d:h;G>=d&&G<=h;G+=te){let U=g[G];if(U==null)continue;let D=le(_[G]),S=K(U);l==1?ie(T,D,V):ie(T,W,S),ie(T,D,S),V=S,W=D}let N=W;o&&l==1&&(N=ee+E,ie(T,N,V));let[J,$]=Hs(u,f);if(p.fill!=null||J!=0){let G=q.fill=new Path2D(T),U=p.fillTo(u,f,p.min,p.max,J),D=K(U);ie(G,N,D),ie(G,re,D)}if(!p.spanGaps){let G=[];G.push(...Ws(_,g,d,h,te,le,n));let U=p.width*ve/2,D=i||l==1?U:-U,S=i||l==-1?-U:U;G.forEach(I=>{I[0]+=D,I[1]+=S}),q.gaps=G=p.gaps(u,f,d,h,G),q.clip=Dn(G,v.ori,F,z,b,O)}return $!=0&&(q.band=$==2?[Kt(u,f,d,h,T,-1),Kt(u,f,d,h,T,1)]:Kt(u,f,d,h,T,$)),q})}function eo(e,l,i,n,o,u,f=ye){if(e.length>1){let d=null;for(let h=0,p=1/0;h<e.length;h++)if(l[h]!==void 0){if(d!=null){let _=We(e[h]-e[d]);_<p&&(p=_,f=We(i(e[h],n,o,u)-i(e[d],n,o,u)))}d=h}}return f}function Tf(e){e=e||on;const l=me(e.size,[.6,ye,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const u=ce(o),f=1-l[0],d=me(l[1],ye),h=me(l[2],1),p=me(e.disp,on),_=me(e.each,A=>{}),{fill:g,stroke:v}=p;return(A,P,H,F)=>vl(A,P,(z,b,O,k,ee,E,le,K,ie,q,T)=>{let te=z.pxRound,V=i,Y=n*ve,W=d*ve,re=h*ve,N,J;k.ori==0?[N,J]=u(A,P):[J,N]=u(A,P);const $=k.dir*(k.ori==0?1:-1);let G=k.ori==0?Pn:Gs,U=k.ori==0?_:(L,be,Oe,_l,sl,Rt,il)=>{_(L,be,Oe,sl,_l,il,Rt)},D=me(A.bands,zs).find(L=>L.series[0]==P),S=D!=null?D.dir:0,I=z.fillTo(A,P,z.min,z.max,S),ne=te(le(I,ee,T,ie)),fe,ae,Be,Re=q,xe=te(z.width*ve),Qe=!1,Ie=null,nt=null,wt=null,qt=null;g!=null&&(xe==0||v!=null)&&(Qe=!0,Ie=g.values(A,P,H,F),nt=new Map,new Set(Ie).forEach(L=>{L!=null&&nt.set(L,new Path2D)}),xe>0&&(wt=v.values(A,P,H,F),qt=new Map,new Set(wt).forEach(L=>{L!=null&&qt.set(L,new Path2D)})));let{x0:Bt,size:nl}=p;if(Bt!=null&&nl!=null){V=1,b=Bt.values(A,P,H,F),Bt.unit==2&&(b=b.map(Oe=>A.posToVal(K+Oe*q,k.key,!0)));let L=nl.values(A,P,H,F);nl.unit==2?ae=L[0]*q:ae=E(L[0],k,q,K)-E(0,k,q,K),Re=eo(b,O,E,k,q,K,Re),Be=Re-ae+Y}else Re=eo(b,O,E,k,q,K,Re),Be=Re*f+Y,ae=Re-Be;Be<1&&(Be=0),xe>=ae/2&&(xe=0),Be<5&&(te=ho);let wl=Be>0,X=Re-Be-(wl?xe:0);ae=te(_s(X,re,W)),fe=(V==0?ae/2:V==$?0:ae)-V*$*((V==0?Y/2:0)+(wl?xe/2:0));const j={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},_e=Qe?null:new Path2D;let Le=null;if(D!=null)Le=A.data[D.series[1]];else{let{y0:L,y1:be}=p;L!=null&&be!=null&&(O=be.values(A,P,H,F),Le=L.values(A,P,H,F))}let ut=N*ae,oe=J*ae;for(let L=$==1?H:F;L>=H&&L<=F;L+=$){let be=O[L];if(be==null)continue;if(Le!=null){let at=Le[L]??0;if(be-at==0)continue;ne=le(at,ee,T,ie)}let Oe=k.distr!=2||p!=null?b[L]:L,_l=E(Oe,k,q,K),sl=le(me(be,I),ee,T,ie),Rt=te(_l-fe),il=te(rt(sl,ne)),ct=te(Pt(sl,ne)),_t=il-ct;if(be!=null){let at=be<0?oe:ut,Mt=be<0?ut:oe;Qe?(xe>0&&wt[L]!=null&&G(qt.get(wt[L]),Rt,ct+gt(xe/2),ae,rt(0,_t-xe),at,Mt),Ie[L]!=null&&G(nt.get(Ie[L]),Rt,ct+gt(xe/2),ae,rt(0,_t-xe),at,Mt)):G(_e,Rt,ct+gt(xe/2),ae,rt(0,_t-xe),at,Mt),U(A,P,L,Rt-xe/2,ct,ae+xe,_t)}}return xe>0?j.stroke=Qe?qt:_e:Qe||(j._fill=z.width==0?z._fill:z._stroke??z._fill,j.width=0),j.fill=Qe?nt:_e,j})}function Mf(e,l){const i=me(l?.alignGaps,0);return(n,o,u,f)=>vl(n,o,(d,h,p,_,g,v,A,P,H,F,z)=>{[u,f]=Tn(p,u,f);let b=d.pxRound,O=N=>b(v(N,_,F,P)),k=N=>b(A(N,g,z,H)),ee,E,le;_.ori==0?(ee=Ln,le=Il,E=Go):(ee=Cn,le=Ul,E=Bo);const K=_.dir*(_.ori==0?1:-1);let ie=O(h[K==1?u:f]),q=ie,T=[],te=[];for(let N=K==1?u:f;N>=u&&N<=f;N+=K)if(p[N]!=null){let $=h[N],G=O($);T.push(q=G),te.push(k(p[N]))}const V={stroke:e(T,te,ee,le,E,b),fill:null,clip:null,band:null,gaps:null,flags:Gl},Y=V.stroke;let[W,re]=Hs(n,o);if(d.fill!=null||W!=0){let N=V.fill=new Path2D(Y),J=d.fillTo(n,o,d.min,d.max,W),$=k(J);le(N,q,$),le(N,ie,$)}if(!d.spanGaps){let N=[];N.push(...Ws(h,p,u,f,K,O,i)),V.gaps=N=d.gaps(n,o,u,f,N),V.clip=Dn(N,_.ori,P,H,F,z)}return re!=0&&(V.band=re==2?[Kt(n,o,u,f,Y,-1),Kt(n,o,u,f,Y,1)]:Kt(n,o,u,f,Y,re)),V})}function Ef(e){return Mf(Af,e)}function Af(e,l,i,n,o,u){const f=e.length;if(f<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),f==2)n(d,e[1],l[1]);else{let h=Array(f),p=Array(f-1),_=Array(f-1),g=Array(f-1);for(let v=0;v<f-1;v++)_[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],p[v]=_[v]/g[v];h[0]=p[0];for(let v=1;v<f-1;v++)p[v]===0||p[v-1]===0||p[v-1]>0!=p[v]>0?h[v]=0:(h[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/p[v-1]+(g[v]+2*g[v-1])/p[v]),isFinite(h[v])||(h[v]=0));h[f-1]=p[f-2];for(let v=0;v<f-1;v++)o(d,e[v]+g[v]/3,l[v]+h[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-h[v+1]*g[v]/3,e[v+1],l[v+1])}return d}const ys=new Set;function to(){for(let e of ys)e.syncRect(!0)}Bl&&(ml(ra,Nl,to),ml(aa,Nl,to,!0),ml(Sn,Nl,()=>{Ze.pxRatio=ve}));const Df=Yo(),Lf=Io();function lo(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,f)=>ks(u,f,l,i))}function Cf(e,l){return e.map((i,n)=>n==0?{}:Ve({},l,i))}function ks(e,l,i,n){return Ve({},l==0?i:n,e)}function jo(e,l,i){return l==null?Hl:[l,i]}const Pf=jo;function Rf(e,l,i){return l==null?Hl:yn(l,i,Ps,!0)}function Ko(e,l,i,n){return l==null?Hl:Mn(l,i,e.scales[n].log,!1)}const zf=Ko;function qo(e,l,i,n){return l==null?Hl:Cs(l,i,e.scales[n].log,!1)}const Ff=qo;function Vf(e,l,i,n,o){let u=rt(zi(e),zi(l)),f=l-e,d=Ct(o/n*f,i);do{let h=i[d],p=n*h/f;if(p>=o&&u+(h<5?ll.get(h):0)<=17)return[h,p]}while(++d<i.length);return[0,0]}function no(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=He((i=+o)*ve))+"px"),[e,l,i]}function Nf(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=ke(l[2]*ve,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Ze(e,l,i){const n={mode:me(e.mode,1)},o=n.mode;function u(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?1-c:c)}function f(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?c:1-c)}function d(t,s,r,a){return s.ori==0?u(t,s,r,a):f(t,s,r,a)}n.valToPosH=u,n.valToPosV=f;let h=!1;n.status=0;const p=n.root=kt(Ir);if(e.id!=null&&(p.id=e.id),mt(p,e.class),e.title){let t=kt(jr,p);t.textContent=e.title}const _=Lt("canvas"),g=n.ctx=_.getContext("2d"),v=kt(Kr,p);ml("click",v,t=>{t.target===P&&(Te!=Ll||De!=Cl)&&Xe.click(n,t)},!0);const A=n.under=kt(qr,v);v.appendChild(_);const P=n.over=kt(Jr,v);e=Wl(e);const H=+me(e.pxAlign,1),F=Xi(H);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const z=e.ms||.001,b=n.series=o==1?lo(e.series||[],ji,Qi,!1):Cf(e.series||[null],Zi),O=n.axes=lo(e.axes||[],Yi,qi,!0),k=n.scales={},ee=n.bands=e.bands||[];ee.forEach(t=>{t.fill=ce(t.fill||null),t.dir=me(t.dir,-1)});const E=o==2?b[1].facets[0].scale:b[0].scale,le={axes:ur,series:ir},K=(e.drawOrder||["axes","series"]).map(t=>le[t]);function ie(t){const s=t.distr==3?r=>jt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>as(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:c,_max:m}=t,w=m-c;return(a-c)/w}}function q(t){let s=k[t];if(s==null){let r=(e.scales||on)[t]||on;if(r.from!=null){q(r.from);let a=Ve({},k[r.from],r,{key:t});a.valToPct=ie(a),k[t]=a}else{s=k[t]=Ve({},t==E?Vo:_f,r),s.key=t;let a=s.time,c=s.range,m=tl(c);if((t!=E||o==2&&!a)&&(m&&(c[0]==null||c[1]==null)&&(c={min:c[0]==null?Ci:{mode:1,hard:c[0],soft:c[0]},max:c[1]==null?Ci:{mode:1,hard:c[1],soft:c[1]}},m=!1),!m&&An(c))){let w=c;c=(x,y,M)=>y==null?Hl:yn(y,M,w)}s.range=ce(c||(a?Pf:t==E?s.distr==3?zf:s.distr==4?Ff:jo:s.distr==3?Ko:s.distr==4?qo:Rf)),s.auto=ce(m?!1:s.auto),s.clamp=ce(s.clamp||wf),s._min=s._max=null,s.valToPct=ie(s)}}}q("x"),q("y"),o==1&&b.forEach(t=>{q(t.scale)}),O.forEach(t=>{q(t.scale)});for(let t in e.scales)q(t);const T=k[E],te=T.distr;let V,Y;T.ori==0?(mt(p,Ur),V=u,Y=f):(mt(p,Yr),V=f,Y=u);const W={};for(let t in k){let s=k[t];(s.min!=null||s.max!=null)&&(W[t]={min:s.min,max:s.max},s.min=s.max=null)}const re=e.tzDate||(t=>new Date(He(t/z))),N=e.fmtDate||Fs,J=z==1?Ua(re):Ka(re),$=Bi(re,Gi(z==1?Ia:ja,N)),G=Ui(re,Ii(Ja,N)),U=[],D=n.legend=Ve({},$a,e.legend),S=n.cursor=Ve({},sf,{drag:{y:o==2}},e.cursor),I=D.show,ne=S.show,fe=D.markers;D.idxs=U,fe.width=ce(fe.width),fe.dash=ce(fe.dash),fe.stroke=ce(fe.stroke),fe.fill=ce(fe.fill);let ae,Be,Re,xe=[],Qe=[],Ie,nt=!1,wt={};if(D.live){const t=b[1]?b[1].values:null;nt=t!=null,Ie=nt?t(n,1,0):{_:0};for(let s in Ie)wt[s]=Ds}if(I)if(ae=Lt("table",ta,p),Re=Lt("tbody",null,ae),D.mount(n,ae),nt){Be=Lt("thead",null,ae,Re);let t=Lt("tr",null,Be);Lt("th",null,t);for(var qt in Ie)Lt("th",wi,t).textContent=qt}else mt(ae,na),D.live&&mt(ae,la);const Bt={show:!0},nl={show:!1};function wl(t,s){if(s==0&&(nt||!D.live||o==2))return Hl;let r=[],a=Lt("tr",sa,Re,Re.childNodes[s]);mt(a,t.class),t.show||mt(a,hl);let c=Lt("th",null,a);if(fe.show){let x=kt(ia,c);if(s>0){let y=fe.width(n,s);y&&(x.style.border=y+"px "+fe.dash(n,s)+" "+fe.stroke(n,s)),x.style.background=fe.fill(n,s)}}let m=kt(wi,c);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(fe.show||(m.style.color=t.width>0?fe.stroke(n,s):fe.fill(n,s)),j("click",c,x=>{if(S._lock)return;rl(x);let y=b.indexOf(t);if((x.ctrlKey||x.metaKey)!=D.isolate){let M=b.some((C,R)=>R>0&&R!=y&&C.show);b.forEach((C,R)=>{R>0&&Ft(R,M?R==y?Bt:nl:Bt,!0,ze.setSeries)})}else Ft(y,{show:!t.show},!0,ze.setSeries)},!1),bl&&j(Si,c,x=>{S._lock||(rl(x),Ft(b.indexOf(t),Rl,!0,ze.setSeries))},!1));for(var w in Ie){let x=Lt("td",oa,a);x.textContent="--",r.push(x)}return[a,r]}const X=new Map;function j(t,s,r,a=!0){const c=X.get(s)||{},m=S.bind[t](n,s,r,a);m&&(ml(t,s,c[t]=m),X.set(s,c))}function _e(t,s,r){const a=X.get(s)||{};for(let c in a)(t==null||c==t)&&(ws(c,s,a[c]),delete a[c]);t==null&&X.delete(s)}let Le=0,ut=0,oe=0,L=0,be=0,Oe=0,_l=be,sl=Oe,Rt=oe,il=L,ct=0,_t=0,at=0,Mt=0;n.bbox={};let Rn=!1,an=!1,xl=!1,ol=!1,fn=!1,xt=!1;function zn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Ml(!1),xl=!0,an=!0,El()}function Bs(t,s){n.width=Le=oe=t,n.height=ut=L=s,be=Oe=0,$o(),Xo();let r=n.bbox;ct=r.left=pl(be*ve,.5),_t=r.top=pl(Oe*ve,.5),at=r.width=pl(oe*ve,.5),Mt=r.height=pl(L*ve,.5)}const Jo=3;function Zo(){let t=!1,s=0;for(;!t;){s++;let r=ar(s),a=fr(s);t=s==Jo||r&&a,t||(Bs(n.width,n.height),an=!0)}}function Qo({width:t,height:s}){zn(t,s)}n.setSize=Qo;function $o(){let t=!1,s=!1,r=!1,a=!1;O.forEach((c,m)=>{if(c.show&&c._show){let{side:w,_size:x}=c,y=w%2,M=c.label!=null?c.labelSize:0,C=x+M;C>0&&(y?(oe-=C,w==3?(be+=C,a=!0):r=!0):(L-=C,w==0?(Oe+=C,t=!0):s=!0))}}),al[0]=t,al[1]=r,al[2]=s,al[3]=a,oe-=Jt[1]+Jt[3],be+=Jt[3],L-=Jt[2]+Jt[0],Oe+=Jt[0]}function Xo(){let t=be+oe,s=Oe+L,r=be,a=Oe;function c(m,w){switch(m){case 1:return t+=w,t-w;case 2:return s+=w,s-w;case 3:return r-=w,r+w;case 0:return a-=w,a+w}}O.forEach((m,w)=>{if(m.show&&m._show){let x=m.side;m._pos=c(x,m._size),m.label!=null&&(m._lpos=c(x,m.labelSize))}})}if(S.dataIdx==null){let t=S.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=ce(t.prox),a=t.bias??=0;S.dataIdx=(c,m,w,x)=>{if(m==0)return w;let y=w,M=r(c,m,w,x)??ye,C=M>=0&&M<ye,R=T.ori==0?oe:L,se=S.left,ge=l[0],he=l[m];if(s.has(he[w])){y=null;let ue=null,Z=null,B;if(a==0||a==-1)for(B=w;ue==null&&B-- >0;)s.has(he[B])||(ue=B);if(a==0||a==1)for(B=w;Z==null&&B++<he.length;)s.has(he[B])||(Z=B);if(ue!=null||Z!=null)if(C){let Ee=ue==null?-1/0:V(ge[ue],T,R,0),Ce=Z==null?1/0:V(ge[Z],T,R,0),Je=se-Ee,Se=Ce-se;Je<=Se?Je<=M&&(y=ue):Se<=M&&(y=Z)}else y=Z==null?ue:ue==null?Z:w-ue<=Z-w?ue:Z}else C&&We(se-V(ge[w],T,R,0))>M&&(y=null);return y}}const rl=t=>{S.event=t};S.idxs=U,S._lock=!1;let et=S.points;et.show=ce(et.show),et.size=ce(et.size),et.stroke=ce(et.stroke),et.width=ce(et.width),et.fill=ce(et.fill);const zt=n.focus=Ve({},e.focus||{alpha:.3},S.focus),bl=zt.prox>=0,Sl=bl&&et.one;let bt=[],yl=[],kl=[];function Is(t,s){let r=et.show(n,s);if(r instanceof HTMLElement)return mt(r,ea),mt(r,t.class),Ht(r,-10,-10,oe,L),P.insertBefore(r,bt[s]),r}function Us(t,s){if(o==1||s>0){let r=o==1&&k[t.scale].time,a=t.value;t.value=r?Ni(a)?Ui(re,Ii(a,N)):a||G:a||mf,t.label=t.label||(r?rf:of)}if(Sl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Df||wa,t.fillTo=ce(t.fillTo||xf),t.pxAlign=+me(t.pxAlign,H),t.pxRound=Xi(t.pxAlign),t.stroke=ce(t.stroke||null),t.fill=ce(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gf(rt(1,t.width),1),a=t.points=Ve({},{size:r,width:rt(1,r*.2),stroke:t.stroke,space:r*2,paths:Lf,_stroke:null,_fill:null},t.points);a.show=ce(a.show),a.filter=ce(a.filter),a.fill=ce(a.fill),a.stroke=ce(a.stroke),a.paths=ce(a.paths),a.pxAlign=t.pxAlign}if(I){let r=wl(t,s);xe.splice(s,0,r[0]),Qe.splice(s,0,r[1]),D.values.push(null)}if(ne){U.splice(s,0,null);let r=null;Sl?s==0&&(r=Is(t,s)):s>0&&(r=Is(t,s)),bt.splice(s,0,r),yl.splice(s,0,0),kl.splice(s,0,0)}qe("addSeries",s)}function er(t,s){s=s??b.length,t=o==1?ks(t,s,ji,Qi):ks(t,s,{},Zi),b.splice(s,0,t),Us(b[s],s)}n.addSeries=er;function tr(t){if(b.splice(t,1),I){D.values.splice(t,1),Qe.splice(t,1);let s=xe.splice(t,1)[0];_e(null,s.firstChild),s.remove()}ne&&(U.splice(t,1),bt.splice(t,1)[0].remove(),yl.splice(t,1),kl.splice(t,1)),qe("delSeries",t)}n.delSeries=tr;const al=[!1,!1,!1,!1];function lr(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=k[t.scale];a==null&&(t.scale=r?b[1].scale:E,a=k[t.scale]);let c=a.time;t.size=ce(t.size),t.space=ce(t.space),t.rotate=ce(t.rotate),tl(t.incrs)&&t.incrs.forEach(w=>{!ll.has(w)&&ll.set(w,vo(w))}),t.incrs=ce(t.incrs||(a.distr==2?Wa:c?z==1?Ba:Ya:dl)),t.splits=ce(t.splits||(c&&a.distr==1?J:a.distr==3?xs:a.distr==4?uf:ff)),t.stroke=ce(t.stroke),t.grid.stroke=ce(t.grid.stroke),t.ticks.stroke=ce(t.ticks.stroke),t.border.stroke=ce(t.border.stroke);let m=t.values;t.values=tl(m)&&!tl(m[0])?ce(m):c?tl(m)?Bi(re,Gi(m,N)):Ni(m)?qa(re,m):m||$:m||af,t.filter=ce(t.filter||(a.distr>=3&&a.log==10?df:a.distr==3&&a.log==2?hf:mo)),t.font=no(t.font),t.labelFont=no(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(al[s]=!0,t._el=kt(Zr,v))}}function Yl(t,s,r,a){let[c,m,w,x]=r,y=s%2,M=0;return y==0&&(x||m)&&(M=s==0&&!c||s==2&&!w?He(Yi.size/3):0),y==1&&(c||w)&&(M=s==1&&!m||s==3&&!x?He(qi.size/2):0),M}const Ys=n.padding=(e.padding||[Yl,Yl,Yl,Yl]).map(t=>ce(me(t,Yl))),Jt=n._padding=Ys.map((t,s)=>t(n,s,al,0));let $e,Ue=null,Ye=null;const un=o==1?b[0].idxs:null;let Et=null,jl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){$e=0;for(let r=1;r<b.length;r++)$e+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Et=l[0],$e=Et.length;let r=l;if(te==2){r=l.slice();let a=r[0]=Array($e);for(let c=0;c<$e;c++)a[c]=c}n._data=l=r}if(Ml(!0),qe("setData"),te==2&&(xl=!0),s!==!1){let r=T;r.auto(n,jl)?Fn():Qt(E,r.min,r.max),ol=ol||S.left>=0,xt=!0,El()}}n.setData=js;function Fn(){jl=!0;let t,s;o==1&&($e>0?(Ue=un[0]=0,Ye=un[1]=$e-1,t=l[0][Ue],s=l[0][Ye],te==2?(t=Ue,s=Ye):t==s&&(te==3?[t,s]=Mn(t,t,T.log,!1):te==4?[t,s]=Cs(t,t,T.log,!1):T.time?s=t+He(86400/z):[t,s]=yn(t,s,Ps,!0))):(Ue=un[0]=t=null,Ye=un[1]=s=null)),Qt(E,t,s)}let cn,Tl,Vn,Nn,On,Hn,Wn,Gn,Bn,ft;function Ks(t,s,r,a,c,m){t??=xi,r??=zs,a??="butt",c??=xi,m??="round",t!=cn&&(g.strokeStyle=cn=t),c!=Tl&&(g.fillStyle=Tl=c),s!=Vn&&(g.lineWidth=Vn=s),m!=On&&(g.lineJoin=On=m),a!=Hn&&(g.lineCap=Hn=a),r!=Nn&&g.setLineDash(Nn=r)}function qs(t,s,r,a){s!=Tl&&(g.fillStyle=Tl=s),t!=Wn&&(g.font=Wn=t),r!=Gn&&(g.textAlign=Gn=r),a!=Bn&&(g.textBaseline=Bn=a)}function In(t,s,r,a,c=0){if(a.length>0&&t.auto(n,jl)&&(s==null||s.min==null)){let m=me(Ue,0),w=me(Ye,a.length-1),x=r.min==null?pa(a,m,w,c,t.distr==3):[r.min,r.max];t.min=Pt(t.min,r.min=x[0]),t.max=rt(t.max,r.max=x[1])}}const Js={min:null,max:null};function nr(){for(let a in k){let c=k[a];W[a]==null&&(c.min==null||W[E]!=null&&c.auto(n,jl))&&(W[a]=Js)}for(let a in k){let c=k[a];W[a]==null&&c.from!=null&&W[c.from]!=null&&(W[a]=Js)}W[E]!=null&&Ml(!0);let t={};for(let a in W){let c=W[a];if(c!=null){let m=t[a]=Wl(k[a],ba);if(c.min!=null)Ve(m,c);else if(a!=E||o==2)if($e==0&&m.from==null){let w=m.range(n,null,null,a);m.min=w[0],m.max=w[1]}else m.min=ye,m.max=-ye}}if($e>0){b.forEach((a,c)=>{if(o==1){let m=a.scale,w=W[m];if(w==null)return;let x=t[m];if(c==0){let y=x.range(n,x.min,x.max,m);x.min=y[0],x.max=y[1],Ue=Ct(x.min,l[0]),Ye=Ct(x.max,l[0]),Ye-Ue>1&&(l[0][Ue]<x.min&&Ue++,l[0][Ye]>x.max&&Ye--),a.min=Et[Ue],a.max=Et[Ye]}else a.show&&a.auto&&In(x,w,a,l[c],a.sorted);a.idxs[0]=Ue,a.idxs[1]=Ye}else if(c>0&&a.show&&a.auto){let[m,w]=a.facets,x=m.scale,y=w.scale,[M,C]=l[c],R=t[x],se=t[y];R!=null&&In(R,W[x],m,M,m.sorted),se!=null&&In(se,W[y],w,C,w.sorted),a.min=w.min,a.max=w.max}});for(let a in t){let c=t[a],m=W[a];if(c.from==null&&(m==null||m.min==null)){let w=c.range(n,c.min==ye?null:c.min,c.max==-ye?null:c.max,a);c.min=w[0],c.max=w[1]}}}for(let a in t){let c=t[a];if(c.from!=null){let m=t[c.from];if(m.min==null)c.min=c.max=null;else{let w=c.range(n,m.min,m.max,a);c.min=w[0],c.max=w[1]}}}let s={},r=!1;for(let a in t){let c=t[a],m=k[a];if(m.min!=c.min||m.max!=c.max){m.min=c.min,m.max=c.max;let w=m.distr;m._min=w==3?jt(m.min):w==4?as(m.min,m.asinh):w==100?m.fwd(m.min):m.min,m._max=w==3?jt(m.max):w==4?as(m.max,m.asinh):w==100?m.fwd(m.max):m.max,s[a]=r=!0}}if(r){b.forEach((a,c)=>{o==2?c>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)xl=!0,qe("setScale",a);ne&&S.left>=0&&(ol=xt=!0)}for(let a in W)W[a]=null}function sr(t){let s=_s(Ue-1,0,$e-1),r=_s(Ye+1,0,$e-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<$e-1;)r++;return[s,r]}function ir(){if($e>0){let t=b.some(s=>s._focus)&&ft!=zt.alpha;t&&(g.globalAlpha=ft=zt.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(Zs(r,!1),Zs(r,!0),s._paths==null)){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha);let c=o==2?[0,l[r][0].length-1]:sr(l[r]);s._paths=s.paths(n,r,c[0],c[1]),ft!=a&&(g.globalAlpha=ft=a)}}),b.forEach((s,r)=>{if(r>0&&s.show){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha),s._paths!=null&&Qs(r,!1);{let c=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,Ue,Ye,c),w=s.points.filter(n,r,m,c);(m||w)&&(s.points._paths=s.points.paths(n,r,Ue,Ye,w),Qs(r,!0))}ft!=a&&(g.globalAlpha=ft=a),qe("drawSeries",r)}}),t&&(g.globalAlpha=ft=1)}}function Zs(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function Qs(t,s){let r=s?b[t].points:b[t],{stroke:a,fill:c,clip:m,flags:w,_stroke:x=r._stroke,_fill:y=r._fill,_width:M=r.width}=r._paths;M=ke(M*ve,3);let C=null,R=M%2/2;s&&y==null&&(y=M>0?"#fff":x);let se=r.pxAlign==1&&R>0;if(se&&g.translate(R,R),!s){let ge=ct-M/2,he=_t-M/2,ue=at+M,Z=Mt+M;C=new Path2D,C.rect(ge,he,ue,Z)}s?Un(x,M,r.dash,r.cap,y,a,c,w,m):or(t,x,M,r.dash,r.cap,y,a,c,w,C,m),se&&g.translate(-R,-R)}function or(t,s,r,a,c,m,w,x,y,M,C){let R=!1;y!=0&&ee.forEach((se,ge)=>{if(se.series[0]==t){let he=b[se.series[1]],ue=l[se.series[1]],Z=(he._paths||on).band;tl(Z)&&(Z=se.dir==1?Z[0]:Z[1]);let B,Ee=null;he.show&&Z&&ha(ue,Ue,Ye)?(Ee=se.fill(n,ge)||m,B=he._paths.clip):Z=null,Un(s,r,a,c,Ee,w,x,y,M,C,B,Z),R=!0}}),R||Un(s,r,a,c,m,w,x,y,M,C)}const $s=Gl|Ss;function Un(t,s,r,a,c,m,w,x,y,M,C,R){Ks(t,s,r,a,c),(y||M||R)&&(g.save(),y&&g.clip(y),M&&g.clip(M)),R?(x&$s)==$s?(g.clip(R),C&&g.clip(C),dn(c,w),pn(t,m,s)):x&Ss?(dn(c,w),g.clip(R),pn(t,m,s)):x&Gl&&(g.save(),g.clip(R),C&&g.clip(C),dn(c,w),g.restore(),pn(t,m,s)):(dn(c,w),pn(t,m,s)),(y||M||R)&&g.restore()}function pn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,c)=>{g.strokeStyle=cn=c,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function dn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=Tl=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function rr(t,s,r,a){let c=O[t],m;if(a<=0)m=[0,0];else{let w=c._space=c.space(n,t,s,r,a),x=c._incrs=c.incrs(n,t,s,r,a,w);m=Vf(s,r,x,a,w)}return c._found=m}function Yn(t,s,r,a,c,m,w,x,y,M){let C=w%2/2;H==1&&g.translate(C,C),Ks(x,w,y,M,x),g.beginPath();let R,se,ge,he,ue=c+(a==0||a==3?-m:m);r==0?(se=c,he=ue):(R=c,ge=ue);for(let Z=0;Z<t.length;Z++)s[Z]!=null&&(r==0?R=ge=t[Z]:se=he=t[Z],g.moveTo(R,se),g.lineTo(ge,he));g.stroke(),H==1&&g.translate(-C,-C)}function ar(t){let s=!0;return O.forEach((r,a)=>{if(!r.show)return;let c=k[r.scale];if(c.min==null){r._show&&(s=!1,r._show=!1,Ml(!1));return}else r._show||(s=!1,r._show=!0,Ml(!1));let m=r.side,w=m%2,{min:x,max:y}=c,[M,C]=rr(a,x,y,w==0?oe:L);if(C==0)return;let R=c.distr==2,se=r._splits=r.splits(n,a,x,y,M,C,R),ge=c.distr==2?se.map(B=>Et[B]):se,he=c.distr==2?Et[se[1]]-Et[se[0]]:M,ue=r._values=r.values(n,r.filter(n,ge,a,C,he),a,C,he);r._rotate=m==2?r.rotate(n,ue,a,C):0;let Z=r._size;r._size=Tt(r.size(n,ue,a,t)),Z!=null&&r._size!=Z&&(s=!1)}),s}function fr(t){let s=!0;return Ys.forEach((r,a)=>{let c=r(n,a,al,t);c!=Jt[a]&&(s=!1),Jt[a]=c}),s}function ur(){for(let t=0;t<O.length;t++){let s=O[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,c,m,w=s.stroke(n,t),x=r==0||r==3?-1:1,[y,M]=s._found;if(s.label!=null){let it=s.labelGap*x,ht=He((s._lpos+it)*ve);qs(s.labelFont[0],w,"center",r==2?$l:_i),g.save(),a==1?(c=m=0,g.translate(ht,He(_t+Mt/2)),g.rotate((r==3?-bn:bn)/2)):(c=He(ct+at/2),m=ht);let cl=po(s.label)?s.label(n,t,y,M):s.label;g.fillText(cl,c,m),g.restore()}if(M==0)continue;let C=k[s.scale],R=a==0?at:Mt,se=a==0?ct:_t,ge=s._splits,he=C.distr==2?ge.map(it=>Et[it]):ge,ue=C.distr==2?Et[ge[1]]-Et[ge[0]]:y,Z=s.ticks,B=s.border,Ee=Z.show?Z.size:0,Ce=He(Ee*ve),Je=He((s.alignTo==2?s._size-Ee-s.gap:s.gap)*ve),Se=s._rotate*-bn/180,Pe=F(s._pos*ve),pt=(Ce+Je)*x,st=Pe+pt;m=a==0?st:0,c=a==1?st:0;let St=s.font[0],At=s.align==1?Fl:s.align==2?is:Se>0?Fl:Se<0?is:a==0?"center":r==3?is:Fl,Nt=Se||a==1?"middle":r==2?$l:_i;qs(St,w,At,Nt);let dt=s.font[1]*s.lineGap,yt=ge.map(it=>F(d(it,C,R,se))),Dt=s._values;for(let it=0;it<Dt.length;it++){let ht=Dt[it];if(ht!=null){a==0?c=yt[it]:m=yt[it],ht=""+ht;let cl=ht.indexOf(`
`)==-1?[ht]:ht.split(/\n/gm);for(let ot=0;ot<cl.length;ot++){let vi=cl[ot];Se?(g.save(),g.translate(c,m+ot*dt),g.rotate(Se),g.fillText(vi,0,0),g.restore()):g.fillText(vi,c,m+ot*dt)}}}Z.show&&Yn(yt,Z.filter(n,he,t,M,ue),a,r,Pe,Ce,ke(Z.width*ve,3),Z.stroke(n,t),Z.dash,Z.cap);let Ot=s.grid;Ot.show&&Yn(yt,Ot.filter(n,he,t,M,ue),a,a==0?2:1,a==0?_t:ct,a==0?Mt:at,ke(Ot.width*ve,3),Ot.stroke(n,t),Ot.dash,Ot.cap),B.show&&Yn([Pe],[1],a==0?1:0,a==0?1:2,a==1?_t:ct,a==1?Mt:at,ke(B.width*ve,3),B.stroke(n,t),B.dash,B.cap)}qe("drawAxes")}function Ml(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let hn=!1,jn=!1,Kl=[];function cr(){jn=!1;for(let t=0;t<Kl.length;t++)qe(...Kl[t]);Kl.length=0}function El(){hn||(Aa(Xs),hn=!0)}function pr(t,s=!1){hn=!0,jn=s,t(n),Xs(),s&&Kl.length>0&&queueMicrotask(cr)}n.batch=pr;function Xs(){if(Rn&&(nr(),Rn=!1),xl&&(Zo(),xl=!1),an){if(Ae(A,Fl,be),Ae(A,$l,Oe),Ae(A,tn,oe),Ae(A,ln,L),Ae(P,Fl,be),Ae(P,$l,Oe),Ae(P,tn,oe),Ae(P,ln,L),Ae(v,tn,Le),Ae(v,ln,ut),_.width=He(Le*ve),_.height=He(ut*ve),O.forEach(({_el:t,_show:s,_size:r,_pos:a,side:c})=>{if(t!=null)if(s){let m=c===3||c===0?r:0,w=c%2==1;Ae(t,w?"left":"top",a-m),Ae(t,w?"width":"height",r),Ae(t,w?"top":"left",w?Oe:be),Ae(t,w?"height":"width",w?L:oe),vs(t,hl)}else mt(t,hl)}),cn=Tl=Vn=On=Hn=Wn=Gn=Bn=Nn=null,ft=1,Zl(!0),be!=_l||Oe!=sl||oe!=Rt||L!=il){Ml(!1);let t=oe/Rt,s=L/il;if(ne&&!ol&&S.left>=0){S.left*=t,S.top*=s,Al&&Ht(Al,He(S.left),0,oe,L),Dl&&Ht(Dl,0,He(S.top),oe,L);for(let r=0;r<bt.length;r++){let a=bt[r];a!=null&&(yl[r]*=t,kl[r]*=s,Ht(a,Tt(yl[r]),Tt(kl[r]),oe,L))}}if(Me.show&&!fn&&Me.left>=0&&Me.width>0){Me.left*=t,Me.width*=t,Me.top*=s,Me.height*=s;for(let r in $n)Ae(Pl,r,Me[r])}_l=be,sl=Oe,Rt=oe,il=L}qe("setSize"),an=!1}Le>0&&ut>0&&(g.clearRect(0,0,_.width,_.height),qe("drawClear"),K.forEach(t=>t()),qe("draw")),Me.show&&fn&&(mn(Me),fn=!1),ne&&ol&&(ul(null,!0,!1),ol=!1),D.show&&D.live&&xt&&(Zn(),xt=!1),h||(h=!0,n.status=1,qe("ready")),jl=!1,hn=!1}n.redraw=(t,s)=>{xl=s||!1,t!==!1?Qt(E,T.min,T.max):El()};function Kn(t,s){let r=k[t];if(r.from==null){if($e==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if($e>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==E&&r.distr==2&&$e>0&&(s.min=Ct(s.min,l[0]),s.max=Ct(s.max,l[0]),s.min==s.max&&s.max++),W[t]=s,Rn=!0,El()}}n.setScale=Kn;let qn,Jn,Al,Dl,ei,ti,Ll,Cl,li,ni,Te,De,Zt=!1;const Xe=S.drag;let je=Xe.x,Ke=Xe.y;ne&&(S.x&&(qn=kt($r,P)),S.y&&(Jn=kt(Xr,P)),T.ori==0?(Al=qn,Dl=Jn):(Al=Jn,Dl=qn),Te=S.left,De=S.top);const Me=n.select=Ve({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Pl=Me.show?kt(Qr,Me.over?P:A):null;function mn(t,s){if(Me.show){for(let r in t)Me[r]=t[r],r in $n&&Ae(Pl,r,t[r]);s!==!1&&qe("setSelect")}}n.setSelect=mn;function dr(t){if(b[t].show)I&&vs(xe[t],hl);else if(I&&mt(xe[t],hl),ne){let r=Sl?bt[0]:bt[t];r!=null&&Ht(r,-10,-10,oe,L)}}function Qt(t,s,r){Kn(t,{min:s,max:r})}function Ft(t,s,r,a){s.focus!=null&&wr(t),s.show!=null&&b.forEach((c,m)=>{m>0&&(t==m||t==null)&&(c.show=s.show,dr(m),o==2?(Qt(c.facets[0].scale,null,null),Qt(c.facets[1].scale,null,null)):Qt(c.scale,null,null),El())}),r!==!1&&qe("setSeries",t,s),a&&Ql("setSeries",n,t,s)}n.setSeries=Ft;function hr(t,s){Ve(ee[t],s)}function mr(t,s){t.fill=ce(t.fill||null),t.dir=me(t.dir,-1),s=s??ee.length,ee.splice(s,0,t)}function gr(t){t==null?ee.length=0:ee.splice(t,1)}n.addBand=mr,n.setBand=hr,n.delBand=gr;function vr(t,s){b[t].alpha=s,ne&&bt[t]!=null&&(bt[t].style.opacity=s),I&&xe[t]&&(xe[t].style.opacity=s)}let It,$t,fl;const Rl={focus:!0};function wr(t){if(t!=fl){let s=t==null,r=zt.alpha!=1;b.forEach((a,c)=>{if(o==1||c>0){let m=s||c==0||c==t;a._focus=s?null:m,r&&vr(c,m?1:zt.alpha)}}),fl=t,r&&El()}}I&&bl&&j(yi,ae,t=>{S._lock||(rl(t),fl!=null&&Ft(null,Rl,!0,ze.setSeries))});function Vt(t,s,r){let a=k[s];r&&(t=t/ve-(a.ori==1?Oe:be));let c=oe;a.ori==1&&(c=L,t=c-t),a.dir==-1&&(t=c-t);let m=a._min,w=a._max,x=t/c,y=m+(w-m)*x,M=a.distr;return M==3?Ol(10,y):M==4?ga(y,a.asinh):M==100?a.bwd(y):y}function _r(t,s){let r=Vt(t,E,s);return Ct(r,l[0],Ue,Ye)}n.valToIdx=t=>Ct(t,l[0]),n.posToIdx=_r,n.posToVal=Vt,n.valToPos=(t,s,r)=>k[s].ori==0?u(t,k[s],r?at:oe,r?ct:0):f(t,k[s],r?Mt:L,r?_t:0),n.setCursor=(t,s,r)=>{Te=t.left,De=t.top,ul(null,s,r)};function si(t,s){Ae(Pl,Fl,Me.left=t),Ae(Pl,tn,Me.width=s)}function ii(t,s){Ae(Pl,$l,Me.top=t),Ae(Pl,ln,Me.height=s)}let ql=T.ori==0?si:ii,Jl=T.ori==1?si:ii;function xr(){if(I&&D.live)for(let t=o==2?1:0;t<b.length;t++){if(t==0&&nt)continue;let s=D.values[t],r=0;for(let a in s)Qe[t][r++].firstChild.nodeValue=s[a]}}function Zn(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{U[a]=r}):xa(t.idx)||U.fill(t.idx),D.idx=U[0]),I&&D.live){for(let r=0;r<b.length;r++)(r>0||o==1&&!nt)&&br(r,U[r]);xr()}xt=!1,s!==!1&&qe("setLegend")}n.setLegend=Zn;function br(t,s){let r=b[t],a=t==0&&te==2?Et:l[t],c;nt?c=r.values(n,t,s)??wt:(c=r.value(n,s==null?null:a[s],t,s),c=c==null?wt:{_:c}),D.values[t]=c}function ul(t,s,r){li=Te,ni=De,[Te,De]=S.move(n,Te,De),S.left=Te,S.top=De,ne&&(Al&&Ht(Al,He(Te),0,oe,L),Dl&&Ht(Dl,0,He(De),oe,L));let a,c=Ue>Ye;It=ye,$t=null;let m=T.ori==0?oe:L,w=T.ori==1?oe:L;if(Te<0||$e==0||c){a=S.idx=null;for(let x=0;x<b.length;x++){let y=bt[x];y!=null&&Ht(y,-10,-10,oe,L)}bl&&Ft(null,Rl,!0,t==null&&ze.setSeries),D.live&&(U.fill(a),xt=!0)}else{let x,y,M;o==1&&(x=T.ori==0?Te:De,y=Vt(x,E),a=S.idx=Ct(y,l[0],Ue,Ye),M=V(l[0][a],T,m,0));let C=-10,R=-10,se=0,ge=0,he=!0,ue="",Z="";for(let B=o==2?1:0;B<b.length;B++){let Ee=b[B],Ce=U[B],Je=Ce==null?null:o==1?l[B][Ce]:l[B][1][Ce],Se=S.dataIdx(n,B,a,y),Pe=Se==null?null:o==1?l[B][Se]:l[B][1][Se];if(xt=xt||Pe!=Je||Se!=Ce,U[B]=Se,B>0&&Ee.show){let pt=Se==null?-10:Se==a?M:V(o==1?l[0][Se]:l[B][0][Se],T,m,0),st=Pe==null?-10:Y(Pe,o==1?k[Ee.scale]:k[Ee.facets[1].scale],w,0);if(bl&&Pe!=null){let St=T.ori==1?Te:De,At=We(zt.dist(n,B,Se,st,St));if(At<It){let Nt=zt.bias;if(Nt!=0){let dt=Vt(St,Ee.scale),yt=Pe>=0?1:-1,Dt=dt>=0?1:-1;Dt==yt&&(Dt==1?Nt==1?Pe>=dt:Pe<=dt:Nt==1?Pe<=dt:Pe>=dt)&&(It=At,$t=B)}else It=At,$t=B}}if(xt||Sl){let St,At;T.ori==0?(St=pt,At=st):(St=st,At=pt);let Nt,dt,yt,Dt,Ot,it,ht=!0,cl=et.bbox;if(cl!=null){ht=!1;let ot=cl(n,B);yt=ot.left,Dt=ot.top,Nt=ot.width,dt=ot.height}else yt=St,Dt=At,Nt=dt=et.size(n,B);if(it=et.fill(n,B),Ot=et.stroke(n,B),Sl)B==$t&&It<=zt.prox&&(C=yt,R=Dt,se=Nt,ge=dt,he=ht,ue=it,Z=Ot);else{let ot=bt[B];ot!=null&&(yl[B]=yt,kl[B]=Dt,Li(ot,Nt,dt,ht),Ai(ot,it,Ot),Ht(ot,Tt(yt),Tt(Dt),oe,L))}}}}if(Sl){let B=zt.prox,Ee=fl==null?It<=B:It>B||$t!=fl;if(xt||Ee){let Ce=bt[0];Ce!=null&&(yl[0]=C,kl[0]=R,Li(Ce,se,ge,he),Ai(Ce,ue,Z),Ht(Ce,Tt(C),Tt(R),oe,L))}}}if(Me.show&&Zt)if(t!=null){let[x,y]=ze.scales,[M,C]=ze.match,[R,se]=t.cursor.sync.scales,ge=t.cursor.drag;if(je=ge._x,Ke=ge._y,je||Ke){let{left:he,top:ue,width:Z,height:B}=t.select,Ee=t.scales[R].ori,Ce=t.posToVal,Je,Se,Pe,pt,st,St=x!=null&&M(x,R),At=y!=null&&C(y,se);St&&je?(Ee==0?(Je=he,Se=Z):(Je=ue,Se=B),Pe=k[x],pt=V(Ce(Je,R),Pe,m,0),st=V(Ce(Je+Se,R),Pe,m,0),ql(Pt(pt,st),We(st-pt))):ql(0,m),At&&Ke?(Ee==1?(Je=he,Se=Z):(Je=ue,Se=B),Pe=k[y],pt=Y(Ce(Je,se),Pe,w,0),st=Y(Ce(Je+Se,se),Pe,w,0),Jl(Pt(pt,st),We(st-pt))):Jl(0,w)}else Xn()}else{let x=We(li-ei),y=We(ni-ti);if(T.ori==1){let se=x;x=y,y=se}je=Xe.x&&x>=Xe.dist,Ke=Xe.y&&y>=Xe.dist;let M=Xe.uni;M!=null?je&&Ke&&(je=x>=M,Ke=y>=M,!je&&!Ke&&(y>x?Ke=!0:je=!0)):Xe.x&&Xe.y&&(je||Ke)&&(je=Ke=!0);let C,R;je&&(T.ori==0?(C=Ll,R=Te):(C=Cl,R=De),ql(Pt(C,R),We(R-C)),Ke||Jl(0,w)),Ke&&(T.ori==1?(C=Ll,R=Te):(C=Cl,R=De),Jl(Pt(C,R),We(R-C)),je||ql(0,m)),!je&&!Ke&&(ql(0,0),Jl(0,0))}if(Xe._x=je,Xe._y=Ke,t==null){if(r){if(gi!=null){let[x,y]=ze.scales;ze.values[0]=x!=null?Vt(T.ori==0?Te:De,x):null,ze.values[1]=y!=null?Vt(T.ori==1?Te:De,y):null}Ql(os,n,Te,De,oe,L,a)}if(bl){let x=r&&ze.setSeries,y=zt.prox;fl==null?It<=y&&Ft($t,Rl,!0,x):It>y?Ft(null,Rl,!0,x):$t!=fl&&Ft($t,Rl,!0,x)}}xt&&(D.idx=a,Zn()),s!==!1&&qe("setCursor")}let Xt=null;Object.defineProperty(n,"rect",{get(){return Xt==null&&Zl(!1),Xt}});function Zl(t=!1){t?Xt=null:(Xt=P.getBoundingClientRect(),qe("syncRect",Xt))}function oi(t,s,r,a,c,m,w){S._lock||Zt&&t!=null&&t.movementX==0&&t.movementY==0||(Qn(t,s,r,a,c,m,w,!1,t!=null),t!=null?ul(null,!0,!0):ul(s,!0,!1))}function Qn(t,s,r,a,c,m,w,x,y){if(Xt==null&&Zl(!1),rl(t),t!=null)r=t.clientX-Xt.left,a=t.clientY-Xt.top;else{if(r<0||a<0){Te=-10,De=-10;return}let[M,C]=ze.scales,R=s.cursor.sync,[se,ge]=R.values,[he,ue]=R.scales,[Z,B]=ze.match,Ee=s.axes[0].side%2==1,Ce=T.ori==0?oe:L,Je=T.ori==1?oe:L,Se=Ee?m:c,Pe=Ee?c:m,pt=Ee?a:r,st=Ee?r:a;if(he!=null?r=Z(M,he)?d(se,k[M],Ce,0):-10:r=Ce*(pt/Se),ue!=null?a=B(C,ue)?d(ge,k[C],Je,0):-10:a=Je*(st/Pe),T.ori==1){let St=r;r=a,a=St}}y&&(s==null||s.cursor.event.type==os)&&((r<=1||r>=oe-1)&&(r=pl(r,oe)),(a<=1||a>=L-1)&&(a=pl(a,L))),x?(ei=r,ti=a,[Ll,Cl]=S.move(n,r,a)):(Te=r,De=a)}const $n={width:0,height:0,left:0,top:0};function Xn(){mn($n,!1)}let ri,ai,fi,ui;function ci(t,s,r,a,c,m,w){Zt=!0,je=Ke=Xe._x=Xe._y=!1,Qn(t,s,r,a,c,m,w,!0,!1),t!=null&&(j(rs,ms,pi,!1),Ql(bi,n,Ll,Cl,oe,L,null));let{left:x,top:y,width:M,height:C}=Me;ri=x,ai=y,fi=M,ui=C}function pi(t,s,r,a,c,m,w){Zt=Xe._x=Xe._y=!1,Qn(t,s,r,a,c,m,w,!1,!0);let{left:x,top:y,width:M,height:C}=Me,R=M>0||C>0,se=ri!=x||ai!=y||fi!=M||ui!=C;if(R&&se&&mn(Me),Xe.setScale&&R&&se){let ge=x,he=M,ue=y,Z=C;if(T.ori==1&&(ge=y,he=C,ue=x,Z=M),je&&Qt(E,Vt(ge,E),Vt(ge+he,E)),Ke)for(let B in k){let Ee=k[B];B!=E&&Ee.from==null&&Ee.min!=ye&&Qt(B,Vt(ue+Z,B),Vt(ue,B))}Xn()}else S.lock&&(S._lock=!S._lock,ul(s,!0,t!=null));t!=null&&(_e(rs,ms),Ql(rs,n,Te,De,oe,L,null))}function Sr(t,s,r,a,c,m,w){if(S._lock)return;rl(t);let x=Zt;if(Zt){let y=!0,M=!0,C=10,R,se;T.ori==0?(R=je,se=Ke):(R=Ke,se=je),R&&se&&(y=Te<=C||Te>=oe-C,M=De<=C||De>=L-C),R&&y&&(Te=Te<Ll?0:oe),se&&M&&(De=De<Cl?0:L),ul(null,!0,!0),Zt=!1}Te=-10,De=-10,U.fill(null),ul(null,!0,!0),x&&(Zt=x)}function di(t,s,r,a,c,m,w){S._lock||(rl(t),Fn(),Xn(),t!=null&&Ql(ki,n,Te,De,oe,L,null))}function hi(){O.forEach(Nf),zn(n.width,n.height,!0)}ml(Sn,Nl,hi);const zl={};zl.mousedown=ci,zl.mousemove=oi,zl.mouseup=pi,zl.dblclick=di,zl.setSeries=(t,s,r,a)=>{let c=ze.match[2];r=c(n,s,r),r!=-1&&Ft(r,a,!0,!1)},ne&&(j(bi,P,ci),j(os,P,oi),j(Si,P,t=>{rl(t),Zl(!1)}),j(yi,P,Sr),j(ki,P,di),ys.add(n),n.syncRect=Zl);const gn=n.hooks=e.hooks||{};function qe(t,s,r){jn?Kl.push([t,s,r]):t in gn&&gn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)gn[s]=(gn[s]||[]).concat(t.hooks[s])});const mi=(t,s,r)=>r,ze=Ve({key:null,setSeries:!1,filters:{pub:Fi,sub:Fi},scales:[E,b[1]?b[1].scale:null],match:[Vi,Vi,mi],values:[null,null]},S.sync);ze.match.length==2&&ze.match.push(mi),S.sync=ze;const gi=ze.key,es=No(gi);function Ql(t,s,r,a,c,m,w){ze.filters.pub(t,s,r,a,c,m,w)&&es.pub(t,s,r,a,c,m,w)}es.sub(n);function yr(t,s,r,a,c,m,w){ze.filters.sub(t,s,r,a,c,m,w)&&zl[t](null,s,r,a,c,m,w)}n.pub=yr;function kr(){es.unsub(n),ys.delete(n),X.clear(),ws(Sn,Nl,hi),p.remove(),ae?.remove(),qe("destroy")}n.destroy=kr;function ts(){qe("init",e,l),js(l||e.data,!1),W[E]?Kn(E,W[E]):Fn(),fn=Me.show&&(Me.width>0||Me.height>0),ol=xt=!0,zn(e.width,e.height)}return b.forEach(Us),O.forEach(lr),i?i instanceof HTMLElement?(i.appendChild(p),ts()):i(n,ts):ts(),n}Ze.assign=Ve;Ze.fmtNum=Rs;Ze.rangeNum=yn;Ze.rangeLog=Mn;Ze.rangeAsinh=Cs;Ze.orient=vl;Ze.pxRatio=ve;Ze.join=Ea;Ze.fmtDate=Fs,Ze.tzDate=Oa;Ze.sync=No;{Ze.addGap=bf,Ze.clipGaps=Dn;let e=Ze.paths={points:Io};e.linear=Yo,e.stepped=kf,e.bars=Tf,e.spline=Ef}const Of="/api",Hf=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Wf(e,l=24){const i=await fetch(`${Of}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}var Gf=lt('<button type="button"> </button>'),Bf=lt('<div class="chart-loading svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div> <span>Loading chart data...</span></div>'),If=lt('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Uf=lt('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yf=lt('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--amber-400);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Temp</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function jf(e,l){Ts(l,!0);let i=Yt(()=>ns.config.smoothing_enabled),n=Yt(()=>ns.config.smoothing_samples),o=Yt(()=>ns.config.temp_units==="C"),u,f=null,d=Ut(!0),h=Ut(null),p=Ut(24),_=Ut(Er([]));const g={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},v="#fbbf24",A="rgba(251, 191, 36, 0.3)",P="#71717a",H="#a1a1aa",F="rgba(255, 255, 255, 0.04)";function z(J,$){const G=v,U=g[l.tiltColor]||H;return{width:J,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(D,S,I)=>{const ne=(I-S)*.1||.005;return[S-ne,I+ne]}},temp:{auto:!0,range:(D,S,I)=>{const ne=(I-S)*.1||2;return[S-ne,I+ne]}}},axes:[{stroke:P,grid:{stroke:F,width:1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(D,S)=>S.map(I=>{const ne=new Date(I*1e3);return Q(p)<=24?ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ne.toLocaleDateString([],{month:"short",day:"numeric"})})},{scale:"sg",stroke:G,grid:{stroke:F,width:1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(D,S)=>S.map(I=>I.toFixed(3)),side:3},{scale:"temp",stroke:U,grid:{show:!1},ticks:{stroke:F,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(D,S)=>S.map(I=>I.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:G,width:2,fill:(D,S)=>{const I=D.ctx.createLinearGradient(0,D.bbox.top,0,D.bbox.top+D.bbox.height);return I.addColorStop(0,A),I.addColorStop(1,"transparent"),I},points:{show:!1},paths:Ze.paths.spline?.()},{label:"Temperature",scale:"temp",stroke:U,width:1.5,dash:[4,4],points:{show:!1},paths:Ze.paths.spline?.()}]}}function b(J,$){if($<=1)return J;const G=[];for(let U=0;U<J.length;U++){const D=[],S=Math.floor($/2);for(let I=Math.max(0,U-S);I<=Math.min(J.length-1,U+S);I++){const ne=J[I];ne!==null&&D.push(ne)}D.length>0?G.push(D.reduce((I,ne)=>I+ne,0)/D.length):G.push(null)}return G}function O(J,$,G,U){if(J.length<=U)return[J,$,G];const D=Math.ceil(J.length/U),S=[],I=[],ne=[];for(let fe=0;fe<J.length;fe+=D){const ae=Math.min(fe+D,J.length);let Be=0,Re=0,xe=0,Qe=0;for(let Ie=fe;Ie<ae;Ie++)$[Ie]!==null&&(Be+=$[Ie],Re++),G[Ie]!==null&&(xe+=G[Ie],Qe++);S.push(J[Math.floor((fe+ae-1)/2)]),I.push(Re>0?Be/Re:null),ne.push(Qe>0?xe/Qe:null)}return[S,I,ne]}function k(J,$){const G=[...J].reverse();let U=[],D=[],S=[];for(const ne of G){U.push(new Date(ne.timestamp).getTime()/1e3),D.push(ne.sg_calibrated??ne.sg_raw);const fe=ne.temp_calibrated??ne.temp_raw;fe!==null?S.push($?Cr(fe):fe):S.push(null)}return Q(i)&&Q(n)>1&&(D=b(D,Q(n)),S=b(S,Q(n))),[U,D,S]=O(U,D,S,500),[U,D,S]}async function ee(){tt(d,!0),tt(h,null);try{tt(_,await Wf(l.tiltId,Q(p)),!0),E()}catch(J){tt(h,J instanceof Error?J.message:"Failed to load data",!0)}finally{tt(d,!1)}}function E(){if(!u||Q(_).length===0)return;const J=k(Q(_),Q(o)),$=z(u.clientWidth,Q(o));f&&f.destroy(),f=new Ze($,J,u)}function le(){f&&u&&f.setSize({width:u.clientWidth,height:220})}io(()=>{ee(),window.addEventListener("resize",le)}),Ar(()=>{f?.destroy(),window.removeEventListener("resize",le)}),ls(()=>{Q(p)&&ee()}),ls(()=>{Q(o)!==void 0&&Q(_).length>0&&u&&E()}),ls(()=>{Q(i),Q(n),Q(_).length>0&&u&&E()});var K=Yf(),ie=de(K),q=de(ie);Es(q,21,()=>Hf,oo,(J,$)=>{var G=Gf();let U;G.__click=()=>tt(p,Q($).hours,!0);var D=de(G,!0);pe(G),el(()=>{U=hs(G,1,"range-btn svelte-1e832qd",null,U,{active:Q(p)===Q($).hours}),Wt(D,Q($).label)}),Ne(J,G)}),pe(q);var T=Fe(q,2),te=Fe(de(T),2),V=de(te);en(2),pe(te),pe(T),pe(ie);var Y=Fe(ie,2),W=de(Y);{var re=J=>{var $=Bf();Ne(J,$)},N=J=>{var $=ps(),G=ds($);{var U=S=>{var I=If(),ne=Fe(de(I),2);ne.__click=ee,pe(I),Ne(S,I)},D=S=>{var I=ps(),ne=ds(I);{var fe=ae=>{var Be=Uf();Ne(ae,Be)};Gt(ne,ae=>{Q(_).length===0&&ae(fe)},!0)}Ne(S,I)};Gt(G,S=>{Q(h)?S(U):S(D,!1)},!0)}Ne(J,$)};Gt(W,J=>{Q(d)?J(re):J(N,!1)})}pe(Y),ro(Y,J=>u=J,()=>u),pe(K),el(()=>xn(V,`background: ${(g[l.tiltColor]||"var(--text-secondary)")??""};`)),Ne(e,K),Ms()}so(["click"]);var Kf=lt('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),qf=lt('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Jf=lt('<div class="w-1 rounded-sm transition-all"></div>'),Zf=lt('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qf=lt('<div class="chart-section svelte-3twv7v"><!></div>'),$f=lt('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xf=lt('<div style="background: var(--bg-card); border: 1px solid var(--bg-hover);"><div class="h-1"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight reading-glow" style="color: var(--amber-400);"> </p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Gravity</p></div> <div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight text-[var(--text-primary)]"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full animate-pulse-soft" style="background: var(--tilt-green);"></div></div></div></div></div>');function eu(e,l){Ts(l,!0);let i=Gr(l,"expanded",3,!1),n=Ut(!1),o=Ut(""),u=Ut(null),f=Ut(!1);function d(){tt(o,l.tilt.beer_name,!0),tt(n,!0),setTimeout(()=>Q(u)?.focus(),0)}async function h(){if(Q(f))return;const X=Q(o).trim();if(!X||X===l.tilt.beer_name){tt(n,!1);return}tt(f,!0);const j=await Nr(l.tilt.id,X);tt(f,!1),j&&tt(n,!1)}function p(X){X.key==="Enter"?h():X.key==="Escape"&&tt(n,!1)}let _=Yt(Pr);const g={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function v(X){return X.toFixed(3)}function A(X){return Rr(X)}function P(X){return X>=-50?{bars:4,color:"var(--tilt-green)"}:X>=-60?{bars:3,color:"var(--tilt-green)"}:X>=-70?{bars:2,color:"var(--amber-400)"}:{bars:1,color:"var(--tilt-red)"}}function H(X){const j=Math.floor((Date.now()-new Date(X).getTime())/1e3);if(j<10)return"just now";if(j<60)return`${j}s ago`;const _e=Math.floor(j/60);if(_e<60)return`${_e}m ago`;const Le=Math.floor(_e/60);return Le<24?`${Le}h ago`:`${Math.floor(Le/24)}d ago`}let F=Yt(()=>g[l.tilt.color]||"var(--tilt-black)"),z=Yt(()=>P(l.tilt.rssi)),b=Yt(()=>H(l.tilt.last_seen));var O=Xf();let k;var ee=de(O),E=Fe(ee,2),le=de(E),K=de(le),ie=de(K);{var q=X=>{var j=Kf();zr(j),j.__keydown=p,ro(j,_e=>tt(u,_e),()=>Q(u)),el(()=>j.disabled=Q(f)),Tr("blur",j,h),Wr(j,()=>Q(o),_e=>tt(o,_e)),Ne(X,j)},T=X=>{var j=qf();j.__click=d;var _e=de(j),Le=de(_e,!0);pe(_e),en(2),pe(j),el(()=>Wt(Le,l.tilt.beer_name)),Ne(X,j)};Gt(ie,X=>{Q(n)?X(q):X(T,!1)})}var te=Fe(ie,2),V=de(te),Y=Fe(V,2),W=de(Y,!0);pe(Y),pe(te),pe(K);var re=Fe(K,2),N=de(re);Es(N,20,()=>Array(4),oo,(X,j,_e)=>{var Le=Jf();el(()=>xn(Le,`
								height: ${8+_e*4}px;
								background: ${(_e<Q(z).bars?Q(z).color:"var(--bg-hover)")??""};
								opacity: ${_e<Q(z).bars?1:.4};
							`)),Ne(X,Le)}),pe(N);var J=Fe(N,2),$=de(J);pe(J),pe(re),pe(le);var G=Fe(le,2),U=de(G),D=de(U),S=de(D,!0);pe(D),en(2),pe(U);var I=Fe(U,2),ne=de(I),fe=de(ne,!0),ae=Fe(fe),Be=de(ae,!0);pe(ae),pe(ne),en(2),pe(I),pe(G);var Re=Fe(G,2);{var xe=X=>{var j=Zf(),_e=Fe(de(j),2),Le=de(_e,!0);pe(_e);var ut=Fe(_e,4),oe=de(ut);pe(ut),pe(j),el((L,be)=>{Wt(Le,L),Wt(oe,`${be??""}${Q(_)??""}`)},[()=>v(l.tilt.sg_raw),()=>A(l.tilt.temp_raw)]),Ne(X,j)};Gt(Re,X=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&X(xe)})}var Qe=Fe(Re,2);{var Ie=X=>{var j=Qf(),_e=de(j);jf(_e,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),pe(j),Ne(X,j)};Gt(Qe,X=>{i()&&X(Ie)})}var nt=Fe(Qe,2),wt=de(nt),qt=de(wt);pe(wt);var Bt=Fe(wt,2),nl=de(Bt);{var wl=X=>{var j=$f();j.__click=function(...ut){l.onToggleExpand?.apply(this,ut)};var _e=de(j);let Le;pe(j),el(()=>{Fr(j,"aria-label",i()?"Collapse chart":"Expand chart"),Le=hs(_e,0,"w-4 h-4 transition-transform",null,Le,{"rotate-180":i()})}),Ne(X,j)};Gt(nl,X=>{l.onToggleExpand&&X(wl)})}en(2),pe(Bt),pe(nt),pe(E),pe(O),el((X,j)=>{k=hs(O,1,"card-glow rounded-xl overflow-hidden animate-fade-in-up svelte-3twv7v",null,k,{expanded:i()}),xn(ee,`background: ${Q(F)??""}; box-shadow: 0 0 20px ${Q(F)??""}40;`),xn(V,`background: ${Q(F)??""}; box-shadow: 0 0 8px ${Q(F)??""};`),Wt(W,l.tilt.color),Wt($,`${l.tilt.rssi??""} dBm`),Wt(S,X),Wt(fe,j),Wt(Be,Q(_)),Wt(qt,`Updated ${Q(b)??""}`)},[()=>v(l.tilt.sg),()=>A(l.tilt.temp)]),Ne(e,O),Ms()}so(["keydown","click"]);var tu=lt('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),lu=lt('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),nu=lt('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),su=lt('<div class="tilt-grid svelte-1uha8ag"></div>');function mu(e,l){Ts(l,!0),io(()=>(Or(),()=>Hr()));let i=Yt(()=>Array.from(ss.tilts.values())),n=Ut(null);function o(p){tt(n,Q(n)===p?null:p,!0)}var u=ps();Vr("1uha8ag",p=>{Dr(()=>{Lr.title="Dashboard | Tilt UI"})});var f=ds(u);{var d=p=>{var _=nu(),g=Fe(de(_),4),v=de(g);{var A=z=>{var b=Mr("Waiting for Tilt hydrometers to broadcast...");Ne(z,b)},P=z=>{var b=tu();Ne(z,b)};Gt(v,z=>{ss.connected?z(A):z(P,!1)})}pe(g);var H=Fe(g,2);{var F=z=>{var b=lu();Ne(z,b)};Gt(H,z=>{ss.connected&&z(F)})}pe(_),Ne(p,_)},h=p=>{var _=su();Es(_,21,()=>Q(i),g=>g.id,(g,v)=>{{let A=Yt(()=>Q(n)===Q(v).id);eu(g,{get tilt(){return Q(v)},get expanded(){return Q(A)},onToggleExpand:()=>o(Q(v).id)})}}),pe(_),Ne(p,_)};Gt(f,p=>{Q(i).length===0?p(d):p(h,!1)})}Ne(e,u),Ms()}export{mu as component};
