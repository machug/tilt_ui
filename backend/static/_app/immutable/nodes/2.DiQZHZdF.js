import{d as Es,f as We,s as mt,a as Ve,c as Dr,e as Lr,t as Cr}from"../chunks/BtEPiJpU.js";import{h as Pr,k as Rr,aD as zr,f as Fr,ab as Ms,ac as tt,p as wi,ad as ao,s as Te,aE as Vr,ae as kn,g as L,am as Zt,ah as re,aj as te,al as bt,ag as xe,an as Hl,af as As,ak as uo,V as Nr,ai as Or}from"../chunks/BXMn-U5u.js";import{e as fn,i as Mn}from"../chunks/BO78r8M3.js";import{B as Hr,i as Et}from"../chunks/BvNBKeNs.js";import{c as rs,f as Wr,s as bi,g as Ir,d as Gr,r as Br,h as Ur}from"../chunks/DdswaOyk.js";import{s as Wl}from"../chunks/C4eq5C2N.js";import{u as Yr,c as qr,d as jr,a as as}from"../chunks/-6BuQLOK.js";import{w as ln}from"../chunks/Ze7iTwWI.js";import{s as Tn}from"../chunks/Cxbxj3Uo.js";import{b as Kr}from"../chunks/Dl9yvZz4.js";import{b as co,p as Si}from"../chunks/CWt6DDcC.js";import{i as Jr,s as Zr}from"../chunks/CbZw9Vd9.js";function Qr(e,l,i){Pr&&Rr();var n=new Hr(e),o=!zr();Fr(()=>{var u=l();o&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const $r=!0,je="u-",Xr="uplot",ea=je+"hz",ta=je+"vt",la=je+"title",na=je+"wrap",sa=je+"under",ia=je+"over",oa=je+"axis",_l=je+"off",ra=je+"select",aa=je+"cursor-x",ua=je+"cursor-y",ca=je+"cursor-pt",fa=je+"legend",da=je+"live",pa=je+"inline",ha=je+"series",ma=je+"marker",xi=je+"label",ga=je+"value",on="width",rn="height",nn="top",yi="bottom",Nl="left",us="right",Ds="#000",ki=Ds+"0",cs="mousemove",Ti="mousedown",fs="mouseup",Ei="mouseenter",Mi="mouseleave",Ai="dblclick",va="resize",_a="scroll",Di="change",An="dppxchange",Ls="--",ql=typeof window<"u",gs=ql?document:null,Il=ql?window:null,wa=ql?navigator:null;let we,Sn;function vs(){let e=devicePixelRatio;we!=e&&(we=e,Sn&&ws(Di,Sn,vs),Sn=matchMedia(`(min-resolution: ${we-.001}dppx) and (max-resolution: ${we+.001}dppx)`),wl(Di,Sn,vs),Il.dispatchEvent(new CustomEvent(An)))}function Tt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function _s(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Re(e,l,i){e.style[l]=i+"px"}function It(e,l,i,n){let o=gs.createElement(e);return l!=null&&Tt(o,l),i?.insertBefore(o,n),o}function Ft(e,l){return It("div",e,l)}const Li=new WeakMap;function Jt(e,l,i,n,o){let u="translate("+l+"px,"+i+"px)",c=Li.get(e);u!=c&&(e.style.transform=u,Li.set(e,u),l<0||i<0||l>n||i>o?Tt(e,_l):_s(e,_l))}const Ci=new WeakMap;function Pi(e,l,i){let n=l+i,o=Ci.get(e);n!=o&&(Ci.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ri=new WeakMap;function zi(e,l,i,n){let o=l+""+i,u=Ri.get(e);o!=u&&(Ri.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Cs={passive:!0},ba={...Cs,capture:!0};function wl(e,l,i,n){l.addEventListener(e,i,n?ba:Cs)}function ws(e,l,i,n){l.removeEventListener(e,i,Cs)}ql&&vs();function Gt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)o=u?i+n>>1:Mt((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function fo(e){return(i,n,o)=>{let u=-1,c=-1;for(let d=n;d<=o;d++)if(e(i[d])){u=d;break}for(let d=o;d>=n;d--)if(e(i[d])){c=d;break}return[u,c]}}const po=e=>e!=null,ho=e=>e!=null&&e>0,Cn=fo(po),Sa=fo(ho);function xa(e,l,i,n=0,o=!1){let u=o?Sa:Cn,c=o?ho:po;[l,i]=u(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let h=l;h<=i;h++){let b=e[h];c(b)&&(b<d?d=b:b>p&&(p=b))}return[d??Ee,p??-Ee]}function Pn(e,l,i,n){let o=Ni(e),u=Ni(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?el:mo,d=o==1?Mt:Vt,p=u==1?Vt:Mt,h=d(c(Ye(e))),b=p(c(Ye(l))),g=Gl(i,h),v=Gl(i,b);return i==10&&(h<0&&(g=Me(g,-h)),b<0&&(v=Me(v,-b))),n||i==2?(e=g*o,l=v*u):(e=wo(e,g),l=Rn(l,v)),[e,l]}function Ps(e,l,i,n){let o=Pn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Rs=.1,Fi={mode:3,pad:Rs},un={pad:0,soft:null,mode:0},ya={min:un,max:un};function Dn(e,l,i,n){return zn(i)?Vi(e,l,i):(un.pad=i,un.soft=n?0:null,un.mode=n?3:0,Vi(e,l,ya))}function me(e,l){return e??l}function ka(e,l,i){for(l=me(l,0),i=me(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Vi(e,l,i){let n=i.min,o=i.max,u=me(n.pad,0),c=me(o.pad,0),d=me(n.hard,-Ee),p=me(o.hard,Ee),h=me(n.soft,Ee),b=me(o.soft,-Ee),g=me(n.mode,0),v=me(o.mode,0),N=l-e,z=el(N),D=gt(Ye(e),Ye(l)),P=el(D),Y=Ye(P-z);(N<1e-24||Y>10)&&(N=0,(e==0||l==0)&&(N=1e-24,g==2&&h!=Ee&&(u=0),v==2&&b!=-Ee&&(c=0)));let S=N||D||1e3,H=el(S),M=Gl(10,Mt(H)),X=S*(N==0?e==0?.1:1:u),R=Me(wo(e-X,M/10),24),K=e>=h&&(g==1||g==3&&R<=h||g==2&&R>=h)?h:Ee,Q=gt(d,R<K&&e>=K?K:Bt(K,R)),ie=S*(N==0?l==0?.1:1:c),J=Me(Rn(l+ie,M/10),24),k=l<=b&&(v==1||v==3&&J>=b||v==2&&J<=b)?b:-Ee,le=Bt(p,J>k&&l<=k?k:gt(k,J));return Q==le&&Q==0&&(le=100),[Q,le]}const Ta=new Intl.NumberFormat(ql?wa.language:"en-US"),zs=e=>Ta.format(e),At=Math,En=At.PI,Ye=At.abs,Mt=At.floor,Ue=At.round,Vt=At.ceil,Bt=At.min,gt=At.max,Gl=At.pow,Ni=At.sign,el=At.log10,mo=At.log2,Ea=(e,l=1)=>At.sinh(e)*l,ds=(e,l=1)=>At.asinh(e/l),Ee=1/0;function Oi(e){return(el((e^e>>31)-(e>>31))|0)+1}function bs(e,l,i){return Bt(gt(e,l),i)}function go(e){return typeof e=="function"}function fe(e){return go(e)?e:()=>e}const Ma=()=>{},vo=e=>e,_o=(e,l)=>l,Aa=e=>null,Hi=e=>!0,Wi=(e,l)=>e==l,Da=/\.\d*?(?=9{6,}|0{6,})/gm,bl=e=>{if(So(e)||ul.has(e))return e;const l=`${e}`,i=l.match(Da);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,u]=l.split("e");return+`${bl(o)}e${u}`}return Me(e,n)};function gl(e,l){return bl(Me(bl(e/l))*l)}function Rn(e,l){return bl(Vt(bl(e/l))*l)}function wo(e,l){return bl(Mt(bl(e/l))*l)}function Me(e,l=0){if(So(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Ue(n)/i}const ul=new Map;function bo(e){return((""+e).split(".")[1]||"").length}function dn(e,l,i,n){let o=[],u=n.map(bo);for(let c=l;c<i;c++){let d=Ye(c),p=Me(Gl(e,c),d);for(let h=0;h<n.length;h++){let b=e==10?+`${n[h]}e${c}`:n[h]*p,g=(c>=0?0:d)+(c>=u[h]?0:u[h]),v=e==10?b:Me(b,g);o.push(v),ul.set(v,g)}}return o}const cn={},Fs=[],Bl=[null,null],al=Array.isArray,So=Number.isInteger,La=e=>e===void 0;function Ii(e){return typeof e=="string"}function zn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Ca(e){return e!=null&&typeof e=="object"}const Pa=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Ul(e,l=zn){let i;if(al(e)){let n=e.find(o=>o!=null);if(al(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Ul(e[o],l)}else i=e.slice()}else if(e instanceof Pa)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Ul(e[n],l))}else i=e;return i}function Be(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(zn(e[o])?Be(e[o],Ul(n[o])):e[o]=Ul(n[o]))}return e}const Ra=0,za=1,Fa=2;function Va(e,l,i){for(let n=0,o,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(o=c-1;o>=0&&e[o]==null;)e[o--]=null;for(o=c+1;o<i&&e[o]==null;)e[u=o++]=null}}}function Na(e,l){if(Wa(e)){let c=e[0].slice();for(let d=1;d<e.length;d++)c.push(...e[d].slice(1));return Ia(c[0])||(c=Ha(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let p=e[c][0],h=p.length;for(let b=0;b<h;b++)i.add(p[b])}let n=[Array.from(i).sort((c,d)=>c-d)],o=n[0].length,u=new Map;for(let c=0;c<o;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let d=e[c],p=d[0];for(let h=1;h<d.length;h++){let b=d[h],g=Array(o).fill(void 0),v=l?l[c][h]:za,N=[];for(let z=0;z<b.length;z++){let D=b[z],P=u.get(p[z]);D===null?v!=Ra&&(g[P]=D,v==Fa&&N.push(P)):g[P]=D}Va(g,N,o),n.push(g)}}return n}const Oa=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ha(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let o=[];for(let u=0;u<e.length;u++){let c=e[u],d=Array(i);for(let p=0;p<i;p++)d[p]=c[n[p]];o.push(d)}return o}function Wa(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let u=0;u<i;u++)if(o[u]!=l[u])return!1}}return!0}function Ia(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const u=gt(1,Mt((o-n+1)/l));for(let c=e[n],d=n+u;d<=o;d+=u){const p=e[d];if(p!=null){if(p<=c)return!1;c=p}}return!0}const yo=["January","February","March","April","May","June","July","August","September","October","November","December"],ko=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function To(e){return e.slice(0,3)}const Ga=ko.map(To),Ba=yo.map(To),Ua={MMMM:yo,MMM:Ba,WWWW:ko,WWW:Ga};function sn(e){return(e<10?"0":"")+e}function Ya(e){return(e<10?"00":e<100?"0":"")+e}const qa={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>sn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>sn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>sn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>sn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>sn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Ya(e.getMilliseconds())};function Vs(e,l){l=l||Ua;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?qa[o[1]]:o[0]);return u=>{let c="";for(let d=0;d<i.length;d++)c+=typeof i[d]=="string"?i[d]:i[d](u,l);return c}}const ja=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Ka(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==ja?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Eo=e=>e%1==0,Ln=[1,2,2.5,5],Ja=dn(10,-32,0,Ln),Mo=dn(10,0,32,Ln),Za=Mo.filter(Eo),vl=Ja.concat(Mo),Ns=`
`,Ao="{YYYY}",Gi=Ns+Ao,Do="{M}/{D}",an=Ns+Do,xn=an+"/{YY}",Lo="{aa}",Qa="{h}:{mm}",Ol=Qa+Lo,Bi=Ns+Ol,Ui=":{ss}",be=null;function Co(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,u=o*30,c=o*365,p=(e==1?dn(10,0,3,Ln).filter(Eo):dn(10,-3,0,Ln)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const h=[[c,Ao,be,be,be,be,be,be,1],[o*28,"{MMM}",Gi,be,be,be,be,be,1],[o,Do,Gi,be,be,be,be,be,1],[n,"{h}"+Lo,xn,be,an,be,be,be,1],[i,Ol,xn,be,an,be,be,be,1],[l,Ui,xn+" "+Ol,be,an+" "+Ol,be,Bi,be,1],[e,Ui+".{fff}",xn+" "+Ol,be,an+" "+Ol,be,Bi,be,1]];function b(g){return(v,N,z,D,P,Y)=>{let S=[],H=P>=c,M=P>=u&&P<c,X=g(z),R=Me(X*e,3),K=ps(X.getFullYear(),H?0:X.getMonth(),M||H?1:X.getDate()),Q=Me(K*e,3);if(M||H){let ie=M?P/u:0,J=H?P/c:0,k=R==Q?R:Me(ps(K.getFullYear()+J,K.getMonth()+ie,1)*e,3),le=new Date(Ue(k/e)),W=le.getFullYear(),$=le.getMonth();for(let j=0;k<=D;j++){let oe=ps(W+J*j,$+ie*j,1),B=oe-g(Me(oe*e,3));k=Me((+oe+B)*e,3),k<=D&&S.push(k)}}else{let ie=P>=o?o:P,J=Mt(z)-Mt(R),k=Q+J+Rn(R-Q,ie);S.push(k);let le=g(k),W=le.getHours()+le.getMinutes()/i+le.getSeconds()/n,$=P/n,j=v.axes[N]._space,oe=Y/j;for(;k=Me(k+P,e==1?0:3),!(k>D);)if($>1){let B=Mt(Me(W+$,6))%24,ae=g(k).getHours()-B;ae>1&&(ae=-1),k-=ae*n,W=(W+$)%24;let pe=S[S.length-1];Me((k-pe)/P,3)*oe>=.7&&S.push(k)}else S.push(k)}return S}}return[p,h,b]}const[$a,Xa,eu]=Co(1),[tu,lu,nu]=Co(.001);dn(2,-53,53,[1]);function Yi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function qi(e,l){return(i,n,o,u,c)=>{let d=l.find(z=>c>=z[0])||l[l.length-1],p,h,b,g,v,N;return n.map(z=>{let D=e(z),P=D.getFullYear(),Y=D.getMonth(),S=D.getDate(),H=D.getHours(),M=D.getMinutes(),X=D.getSeconds(),R=P!=p&&d[2]||Y!=h&&d[3]||S!=b&&d[4]||H!=g&&d[5]||M!=v&&d[6]||X!=N&&d[7]||d[1];return p=P,h=Y,b=S,g=H,v=M,N=X,R(D)})}}function su(e,l){let i=Vs(l);return(n,o,u,c,d)=>o.map(p=>i(e(p)))}function ps(e,l,i){return new Date(e,l,i)}function ji(e,l){return l(e)}const iu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Ki(e,l){return(i,n,o,u)=>u==null?Ls:l(e(n))}function ou(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ru(e,l){return e.series[l].fill(e,l)}const au={show:!0,live:!0,isolate:!1,mount:Ma,markers:{show:!0,width:2,stroke:ou,fill:ru,dash:"solid"},idx:null,idxs:null,values:[]};function uu(e,l){let i=e.cursor.points,n=Ft(),o=i.size(e,l);Re(n,on,o),Re(n,rn,o);let u=o/-2;Re(n,"marginLeft",u),Re(n,"marginTop",u);let c=i.width(e,l,o);return c&&Re(n,"borderWidth",c),n}function cu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function fu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function du(e,l){return e.series[l].points.size}const hs=[0,0];function pu(e,l,i){return hs[0]=l,hs[1]=i,hs}function yn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ms(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const hu={show:!0,x:!0,y:!0,lock:!1,move:pu,points:{one:!1,show:uu,size:du,width:0,stroke:fu,fill:cu},bind:{mousedown:yn,mouseup:yn,click:yn,dblclick:yn,mousemove:ms,mouseleave:ms,mouseenter:ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Po={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Os=Be({},Po,{filter:_o}),Ro=Be({},Os,{size:10}),zo=Be({},Po,{show:!1}),Hs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Fo="bold "+Hs,Vo=1.5,Ji={show:!0,scale:"x",stroke:Ds,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:2,grid:Os,ticks:Ro,border:zo,font:Hs,lineGap:Vo,rotate:0},mu="Value",gu="Time",Zi={show:!0,scale:"x",auto:!1,sorted:1,min:Ee,max:-Ee,idxs:[]};function vu(e,l,i,n,o){return l.map(u=>u==null?"":zs(u))}function _u(e,l,i,n,o,u,c){let d=[],p=ul.get(o)||0;i=c?i:Me(Rn(i,o),p);for(let h=i;h<=n;h=Me(h+o,p))d.push(Object.is(h,-0)?0:h);return d}function Ss(e,l,i,n,o,u,c){const d=[],p=e.scales[e.axes[l].scale].log,h=p==10?el:mo,b=Mt(h(i));o=Gl(p,b),p==10&&(o=vl[Gt(o,vl)]);let g=i,v=o*p;p==10&&(v=vl[Gt(v,vl)]);do d.push(g),g=g+o,p==10&&!ul.has(g)&&(g=Me(g,ul.get(o))),g>=v&&(o=g,v=o*p,p==10&&(v=vl[Gt(v,vl)]));while(g<=n);return d}function wu(e,l,i,n,o,u,c){let p=e.scales[e.axes[l].scale].asinh,h=n>p?Ss(e,l,gt(p,i),n,o):[p],b=n>=0&&i<=0?[0]:[];return(i<-p?Ss(e,l,gt(p,-n),-i,o):[p]).reverse().map(v=>-v).concat(b,h)}const No=/./,bu=/[12357]/,Su=/[125]/,Qi=/1/,xs=(e,l,i,n)=>e.map((o,u)=>l==4&&o==0||u%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function xu(e,l,i,n,o){let u=e.axes[i],c=u.scale,d=e.scales[c],p=e.valToPos,h=u._space,b=p(10,c),g=p(9,c)-b>=h?No:p(7,c)-b>=h?bu:p(5,c)-b>=h?Su:Qi;if(g==Qi){let v=Ye(p(1,c)-b);if(v<h)return xs(l.slice().reverse(),d.distr,g,Vt(h/v)).reverse()}return xs(l,d.distr,g,1)}function yu(e,l,i,n,o){let u=e.axes[i],c=u.scale,d=u._space,p=e.valToPos,h=Ye(p(1,c)-p(2,c));return h<d?xs(l.slice().reverse(),3,No,Vt(d/h)).reverse():l}function ku(e,l,i,n){return n==null?Ls:l==null?"":zs(l)}const $i={show:!0,scale:"y",stroke:Ds,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:3,grid:Os,ticks:Ro,border:zo,font:Hs,lineGap:Vo,rotate:0};function Tu(e,l){let i=3+(e||1)*2;return Me(i*l,3)}function Eu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],u=e.valToPos(o[n[0]],i,!0),c=e.valToPos(o[n[1]],i,!0),d=Ye(c-u),p=e.series[l],h=d/(p.points.space*we);return n[1]-n[0]<=h}const Xi={scale:null,auto:!0,sorted:0,min:Ee,max:-Ee},Oo=(e,l,i,n,o)=>o,eo={show:!0,auto:!0,sorted:0,gaps:Oo,alpha:1,facets:[Be({},Xi,{scale:"x"}),Be({},Xi,{scale:"y"})]},to={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Oo,alpha:1,points:{show:Eu,filter:null},values:null,min:Ee,max:-Ee,idxs:[],path:null,clip:null};function Mu(e,l,i,n,o){return i/10}const Ho={time:$r,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Au=Be({},Ho,{time:!1,ori:1}),lo={};function Wo(e,l){let i=lo[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,u,c,d,p,h){for(let b=0;b<i.plots.length;b++)i.plots[b]!=o&&i.plots[b].pub(n,o,u,c,d,p,h)}},e!=null&&(lo[e]=i)),i}const Yl=1,ys=2;function Sl(e,l,i){const n=e.mode,o=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,d=e.bbox;let p=u[0],h=n==2?u[1]:u[l],b=n==2?c[o.facets[0].scale]:c[e.series[0].scale],g=n==2?c[o.facets[1].scale]:c[o.scale],v=d.left,N=d.top,z=d.width,D=d.height,P=e.valToPosH,Y=e.valToPosV;return b.ori==0?i(o,p,h,b,g,P,Y,v,N,z,D,Vn,jl,On,Go,Uo):i(o,p,h,b,g,Y,P,N,v,D,z,Nn,Kl,Gs,Bo,Yo)}function Ws(e,l){let i=0,n=0,o=me(e.bands,Fs);for(let u=0;u<o.length;u++){let c=o[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Du(e,l,i,n,o){let u=e.mode,c=e.series[l],d=u==2?c.facets[1].scale:c.scale,p=e.scales[d];return o==-1?p.min:o==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function tl(e,l,i,n,o,u){return Sl(e,l,(c,d,p,h,b,g,v,N,z,D,P)=>{let Y=c.pxRound;const S=h.dir*(h.ori==0?1:-1),H=h.ori==0?jl:Kl;let M,X;S==1?(M=i,X=n):(M=n,X=i);let R=Y(g(d[M],h,D,N)),K=Y(v(p[M],b,P,z)),Q=Y(g(d[X],h,D,N)),ie=Y(v(u==1?b.max:b.min,b,P,z)),J=new Path2D(o);return H(J,Q,ie),H(J,R,ie),H(J,R,K),J})}function Fn(e,l,i,n,o,u){let c=null;if(e.length>0){c=new Path2D;const d=l==0?On:Gs;let p=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let N=v[0]-p;N>0&&d(c,p,n,N,n+u),p=v[1]}}let h=i+o-p,b=10;h>0&&d(c,p,n-b/2,h,n+u+b)}return c}function Lu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Is(e,l,i,n,o,u,c){let d=[],p=e.length;for(let h=o==1?i:n;h>=i&&h<=n;h+=o)if(l[h]===null){let g=h,v=h;if(o==1)for(;++h<=n&&l[h]===null;)v=h;else for(;--h>=i&&l[h]===null;)v=h;let N=u(e[g]),z=v==g?N:u(e[v]),D=g-o;N=c<=0&&D>=0&&D<p?u(e[D]):N;let Y=v+o;z=c>=0&&Y>=0&&Y<p?u(e[Y]):z,z>=N&&d.push([N,z])}return d}function no(e){return e==0?vo:e==1?Ue:l=>gl(l,e)}function Io(e){let l=e==0?Vn:Nn,i=e==0?(o,u,c,d,p,h)=>{o.arcTo(u,c,d,p,h)}:(o,u,c,d,p,h)=>{o.arcTo(c,u,p,d,h)},n=e==0?(o,u,c,d,p)=>{o.rect(u,c,d,p)}:(o,u,c,d,p)=>{o.rect(c,u,p,d)};return(o,u,c,d,p,h=0,b=0)=>{h==0&&b==0?n(o,u,c,d,p):(h=Bt(h,d/2,p/2),b=Bt(b,d/2,p/2),l(o,u+h,c),i(o,u+d,c,u+d,c+p,h),i(o,u+d,c+p,u,c+p,b),i(o,u,c+p,u,c,b),i(o,u,c,u+d,c,h),o.closePath())}}const Vn=(e,l,i)=>{e.moveTo(l,i)},Nn=(e,l,i)=>{e.moveTo(i,l)},jl=(e,l,i)=>{e.lineTo(l,i)},Kl=(e,l,i)=>{e.lineTo(i,l)},On=Io(0),Gs=Io(1),Go=(e,l,i,n,o,u)=>{e.arc(l,i,n,o,u)},Bo=(e,l,i,n,o,u)=>{e.arc(i,l,n,o,u)},Uo=(e,l,i,n,o,u,c)=>{e.bezierCurveTo(l,i,n,o,u,c)},Yo=(e,l,i,n,o,u,c)=>{e.bezierCurveTo(i,l,o,n,c,u)};function qo(e){return(l,i,n,o,u)=>Sl(l,i,(c,d,p,h,b,g,v,N,z,D,P)=>{let{pxRound:Y,points:S}=c,H,M;h.ori==0?(H=Vn,M=Go):(H=Nn,M=Bo);const X=Me(S.width*we,3);let R=(S.size-S.width)/2*we,K=Me(R*2,3),Q=new Path2D,ie=new Path2D,{left:J,top:k,width:le,height:W}=l.bbox;On(ie,J-K,k-K,le+K*2,W+K*2);const $=j=>{if(p[j]!=null){let oe=Y(g(d[j],h,D,N)),B=Y(v(p[j],b,P,z));H(Q,oe+R,B),M(Q,oe,B,R,0,En*2)}};if(u)u.forEach($);else for(let j=n;j<=o;j++)$(j);return{stroke:X>0?Q:null,fill:Q,clip:ie,flags:Yl|ys}})}function jo(e){return(l,i,n,o,u,c)=>{n!=o&&(u!=n&&c!=n&&e(l,i,n),u!=o&&c!=o&&e(l,i,o),e(l,i,c))}}const Cu=jo(jl),Pu=jo(Kl);function Ko(e){const l=me(e?.alignGaps,0);return(i,n,o,u)=>Sl(i,n,(c,d,p,h,b,g,v,N,z,D,P)=>{[o,u]=Cn(p,o,u);let Y=c.pxRound,S=W=>Y(g(W,h,D,N)),H=W=>Y(v(W,b,P,z)),M,X;h.ori==0?(M=jl,X=Cu):(M=Kl,X=Pu);const R=h.dir*(h.ori==0?1:-1),K={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Yl},Q=K.stroke;let ie=!1;if(u-o>=D*4){let W=q=>i.posToVal(q,h.key,!0),$=null,j=null,oe,B,De,de=S(d[R==1?o:u]),ae=S(d[o]),pe=S(d[u]),ne=W(R==1?ae+1:pe-1);for(let q=R==1?o:u;q>=o&&q<=u;q+=R){let Ae=d[q],ge=(R==1?Ae<ne:Ae>ne)?de:S(Ae),ce=p[q];ge==de?ce!=null?(B=ce,$==null?(M(Q,ge,H(B)),oe=$=j=B):B<$?$=B:B>j&&(j=B)):ce===null&&(ie=!0):($!=null&&X(Q,de,H($),H(j),H(oe),H(B)),ce!=null?(B=ce,M(Q,ge,H(B)),$=j=oe=B):($=j=null,ce===null&&(ie=!0)),de=ge,ne=W(de+R))}$!=null&&$!=j&&De!=de&&X(Q,de,H($),H(j),H(oe),H(B))}else for(let W=R==1?o:u;W>=o&&W<=u;W+=R){let $=p[W];$===null?ie=!0:$!=null&&M(Q,S(d[W]),H($))}let[k,le]=Ws(i,n);if(c.fill!=null||k!=0){let W=K.fill=new Path2D(Q),$=c.fillTo(i,n,c.min,c.max,k),j=H($),oe=S(d[o]),B=S(d[u]);R==-1&&([B,oe]=[oe,B]),M(W,B,j),M(W,oe,j)}if(!c.spanGaps){let W=[];ie&&W.push(...Is(d,p,o,u,R,S,l)),K.gaps=W=c.gaps(i,n,o,u,W),K.clip=Fn(W,h.ori,N,z,D,P)}return le!=0&&(K.band=le==2?[tl(i,n,o,u,Q,-1),tl(i,n,o,u,Q,1)]:tl(i,n,o,u,Q,le)),K})}function Ru(e){const l=me(e.align,1),i=me(e.ascDesc,!1),n=me(e.alignGaps,0),o=me(e.extend,!1);return(u,c,d,p)=>Sl(u,c,(h,b,g,v,N,z,D,P,Y,S,H)=>{[d,p]=Cn(g,d,p);let M=h.pxRound,{left:X,width:R}=u.bbox,K=ae=>M(z(ae,v,S,P)),Q=ae=>M(D(ae,N,H,Y)),ie=v.ori==0?jl:Kl;const J={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Yl},k=J.stroke,le=v.dir*(v.ori==0?1:-1);let W=Q(g[le==1?d:p]),$=K(b[le==1?d:p]),j=$,oe=$;o&&l==-1&&(oe=X,ie(k,oe,W)),ie(k,$,W);for(let ae=le==1?d:p;ae>=d&&ae<=p;ae+=le){let pe=g[ae];if(pe==null)continue;let ne=K(b[ae]),q=Q(pe);l==1?ie(k,ne,W):ie(k,j,q),ie(k,ne,q),W=q,j=ne}let B=j;o&&l==1&&(B=X+R,ie(k,B,W));let[De,de]=Ws(u,c);if(h.fill!=null||De!=0){let ae=J.fill=new Path2D(k),pe=h.fillTo(u,c,h.min,h.max,De),ne=Q(pe);ie(ae,B,ne),ie(ae,oe,ne)}if(!h.spanGaps){let ae=[];ae.push(...Is(b,g,d,p,le,K,n));let pe=h.width*we/2,ne=i||l==1?pe:-pe,q=i||l==-1?-pe:pe;ae.forEach(Ae=>{Ae[0]+=ne,Ae[1]+=q}),J.gaps=ae=h.gaps(u,c,d,p,ae),J.clip=Fn(ae,v.ori,P,Y,S,H)}return de!=0&&(J.band=de==2?[tl(u,c,d,p,k,-1),tl(u,c,d,p,k,1)]:tl(u,c,d,p,k,de)),J})}function so(e,l,i,n,o,u,c=Ee){if(e.length>1){let d=null;for(let p=0,h=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let b=Ye(e[p]-e[d]);b<h&&(h=b,c=Ye(i(e[p],n,o,u)-i(e[d],n,o,u)))}d=p}}return c}function zu(e){e=e||cn;const l=me(e.size,[.6,Ee,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const u=fe(o),c=1-l[0],d=me(l[1],Ee),p=me(l[2],1),h=me(e.disp,cn),b=me(e.each,N=>{}),{fill:g,stroke:v}=h;return(N,z,D,P)=>Sl(N,z,(Y,S,H,M,X,R,K,Q,ie,J,k)=>{let le=Y.pxRound,W=i,$=n*we,j=d*we,oe=p*we,B,De;M.ori==0?[B,De]=u(N,z):[De,B]=u(N,z);const de=M.dir*(M.ori==0?1:-1);let ae=M.ori==0?On:Gs,pe=M.ori==0?b:(w,V,I,Se,ve,Ne,St)=>{b(w,V,I,ve,Se,St,Ne)},ne=me(N.bands,Fs).find(w=>w.series[0]==z),q=ne!=null?ne.dir:0,Ae=Y.fillTo(N,z,Y.min,Y.max,q),Ie=le(K(Ae,X,k,ie)),ge,ce,Ke,ze=J,ye=le(Y.width*we),ot=!1,vt=null,lt=null,_t=null,Dt=null;g!=null&&(ye==0||v!=null)&&(ot=!0,vt=g.values(N,z,D,P),lt=new Map,new Set(vt).forEach(w=>{w!=null&&lt.set(w,new Path2D)}),ye>0&&(_t=v.values(N,z,D,P),Dt=new Map,new Set(_t).forEach(w=>{w!=null&&Dt.set(w,new Path2D)})));let{x0:Lt,size:Qt}=h;if(Lt!=null&&Qt!=null){W=1,S=Lt.values(N,z,D,P),Lt.unit==2&&(S=S.map(I=>N.posToVal(Q+I*J,M.key,!0)));let w=Qt.values(N,z,D,P);Qt.unit==2?ce=w[0]*J:ce=R(w[0],M,J,Q)-R(0,M,J,Q),ze=so(S,H,R,M,J,Q,ze),Ke=ze-ce+$}else ze=so(S,H,R,M,J,Q,ze),Ke=ze*c+$,ce=ze-Ke;Ke<1&&(Ke=0),ye>=ce/2&&(ye=0),Ke<5&&(le=vo);let $t=Ke>0,Nt=ze-Ke-($t?ye:0);ce=le(bs(Nt,oe,j)),ge=(W==0?ce/2:W==de?0:ce)-W*de*((W==0?$/2:0)+($t?ye/2:0));const C={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},y=ot?null:new Path2D;let A=null;if(ne!=null)A=N.data[ne.series[1]];else{let{y0:w,y1:V}=h;w!=null&&V!=null&&(H=V.values(N,z,D,P),A=w.values(N,z,D,P))}let U=B*ce,T=De*ce;for(let w=de==1?D:P;w>=D&&w<=P;w+=de){let V=H[w];if(V==null)continue;if(A!=null){let nt=A[w]??0;if(V-nt==0)continue;Ie=K(nt,X,k,ie)}let I=M.distr!=2||h!=null?S[w]:w,Se=R(I,M,J,Q),ve=K(me(V,Ae),X,k,ie),Ne=le(Se-ge),St=le(gt(ve,Ie)),rt=le(Bt(ve,Ie)),at=St-rt;if(V!=null){let nt=V<0?T:U,ct=V<0?U:T;ot?(ye>0&&_t[w]!=null&&ae(Dt.get(_t[w]),Ne,rt+Mt(ye/2),ce,gt(0,at-ye),nt,ct),vt[w]!=null&&ae(lt.get(vt[w]),Ne,rt+Mt(ye/2),ce,gt(0,at-ye),nt,ct)):ae(y,Ne,rt+Mt(ye/2),ce,gt(0,at-ye),nt,ct),pe(N,z,w,Ne-ye/2,rt,ce+ye,at)}}return ye>0?C.stroke=ot?Dt:y:ot||(C._fill=Y.width==0?Y._fill:Y._stroke??Y._fill,C.width=0),C.fill=ot?lt:y,C})}function Fu(e,l){const i=me(l?.alignGaps,0);return(n,o,u,c)=>Sl(n,o,(d,p,h,b,g,v,N,z,D,P,Y)=>{[u,c]=Cn(h,u,c);let S=d.pxRound,H=B=>S(v(B,b,P,z)),M=B=>S(N(B,g,Y,D)),X,R,K;b.ori==0?(X=Vn,K=jl,R=Uo):(X=Nn,K=Kl,R=Yo);const Q=b.dir*(b.ori==0?1:-1);let ie=H(p[Q==1?u:c]),J=ie,k=[],le=[];for(let B=Q==1?u:c;B>=u&&B<=c;B+=Q)if(h[B]!=null){let de=p[B],ae=H(de);k.push(J=ae),le.push(M(h[B]))}const W={stroke:e(k,le,X,K,R,S),fill:null,clip:null,band:null,gaps:null,flags:Yl},$=W.stroke;let[j,oe]=Ws(n,o);if(d.fill!=null||j!=0){let B=W.fill=new Path2D($),De=d.fillTo(n,o,d.min,d.max,j),de=M(De);K(B,J,de),K(B,ie,de)}if(!d.spanGaps){let B=[];B.push(...Is(p,h,u,c,Q,H,i)),W.gaps=B=d.gaps(n,o,u,c,B),W.clip=Fn(B,b.ori,z,D,P,Y)}return oe!=0&&(W.band=oe==2?[tl(n,o,u,c,$,-1),tl(n,o,u,c,$,1)]:tl(n,o,u,c,$,oe)),W})}function Vu(e){return Fu(Nu,e)}function Nu(e,l,i,n,o,u){const c=e.length;if(c<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),c==2)n(d,e[1],l[1]);else{let p=Array(c),h=Array(c-1),b=Array(c-1),g=Array(c-1);for(let v=0;v<c-1;v++)b[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],h[v]=b[v]/g[v];p[0]=h[0];for(let v=1;v<c-1;v++)h[v]===0||h[v-1]===0||h[v-1]>0!=h[v]>0?p[v]=0:(p[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/h[v-1]+(g[v]+2*g[v-1])/h[v]),isFinite(p[v])||(p[v]=0));p[c-1]=h[c-2];for(let v=0;v<c-1;v++)o(d,e[v]+g[v]/3,l[v]+p[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-p[v+1]*g[v]/3,e[v+1],l[v+1])}return d}const ks=new Set;function io(){for(let e of ks)e.syncRect(!0)}ql&&(wl(va,Il,io),wl(_a,Il,io,!0),wl(An,Il,()=>{qe.pxRatio=we}));const Ou=Ko(),Hu=qo();function oo(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Ts(u,c,l,i))}function Wu(e,l){return e.map((i,n)=>n==0?{}:Be({},l,i))}function Ts(e,l,i,n){return Be({},l==0?i:n,e)}function Jo(e,l,i){return l==null?Bl:[l,i]}const Iu=Jo;function Gu(e,l,i){return l==null?Bl:Dn(l,i,Rs,!0)}function Zo(e,l,i,n){return l==null?Bl:Pn(l,i,e.scales[n].log,!1)}const Bu=Zo;function Qo(e,l,i,n){return l==null?Bl:Ps(l,i,e.scales[n].log,!1)}const Uu=Qo;function Yu(e,l,i,n,o){let u=gt(Oi(e),Oi(l)),c=l-e,d=Gt(o/n*c,i);do{let p=i[d],h=n*p/c;if(h>=o&&u+(p<5?ul.get(p):0)<=17)return[p,h]}while(++d<i.length);return[0,0]}function ro(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=Ue((i=+o)*we))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Me(l[2]*we,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function qe(e,l,i){const n={mode:me(e.mode,1)},o=n.mode;function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function d(t,s,r,a){return s.ori==0?u(t,s,r,a):c(t,s,r,a)}n.valToPosH=u,n.valToPosV=c;let p=!1;n.status=0;const h=n.root=Ft(Xr);if(e.id!=null&&(h.id=e.id),Tt(h,e.class),e.title){let t=Ft(la,h);t.textContent=e.title}const b=It("canvas"),g=n.ctx=b.getContext("2d"),v=Ft(na,h);wl("click",v,t=>{t.target===z&&(Le!=Pl||Fe!=Rl)&&it.click(n,t)},!0);const N=n.under=Ft(sa,v);v.appendChild(b);const z=n.over=Ft(ia,v);e=Ul(e);const D=+me(e.pxAlign,1),P=no(D);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const Y=e.ms||.001,S=n.series=o==1?oo(e.series||[],Zi,to,!1):Wu(e.series||[null],eo),H=n.axes=oo(e.axes||[],Ji,$i,!0),M=n.scales={},X=n.bands=e.bands||[];X.forEach(t=>{t.fill=fe(t.fill||null),t.dir=me(t.dir,-1)});const R=o==2?S[1].facets[0].scale:S[0].scale,K={axes:hr,series:ur},Q=(e.drawOrder||["axes","series"]).map(t=>K[t]);function ie(t){const s=t.distr==3?r=>el(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:m}=t,_=m-f;return(a-f)/_}}function J(t){let s=M[t];if(s==null){let r=(e.scales||cn)[t]||cn;if(r.from!=null){J(r.from);let a=Be({},M[r.from],r,{key:t});a.valToPct=ie(a),M[t]=a}else{s=M[t]=Be({},t==R?Ho:Au,r),s.key=t;let a=s.time,f=s.range,m=al(f);if((t!=R||o==2&&!a)&&(m&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Fi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Fi:{mode:1,hard:f[1],soft:f[1]}},m=!1),!m&&zn(f))){let _=f;f=(x,E,F)=>E==null?Bl:Dn(E,F,_)}s.range=fe(f||(a?Iu:t==R?s.distr==3?Bu:s.distr==4?Uu:Jo:s.distr==3?Zo:s.distr==4?Qo:Gu)),s.auto=fe(m?!1:s.auto),s.clamp=fe(s.clamp||Mu),s._min=s._max=null,s.valToPct=ie(s)}}}J("x"),J("y"),o==1&&S.forEach(t=>{J(t.scale)}),H.forEach(t=>{J(t.scale)});for(let t in e.scales)J(t);const k=M[R],le=k.distr;let W,$;k.ori==0?(Tt(h,ea),W=u,$=c):(Tt(h,ta),W=c,$=u);const j={};for(let t in M){let s=M[t];(s.min!=null||s.max!=null)&&(j[t]={min:s.min,max:s.max},s.min=s.max=null)}const oe=e.tzDate||(t=>new Date(Ue(t/Y))),B=e.fmtDate||Vs,De=Y==1?eu(oe):nu(oe),de=qi(oe,Yi(Y==1?Xa:lu,B)),ae=Ki(oe,ji(iu,B)),pe=[],ne=n.legend=Be({},au,e.legend),q=n.cursor=Be({},hu,{drag:{y:o==2}},e.cursor),Ae=ne.show,Ie=q.show,ge=ne.markers;ne.idxs=pe,ge.width=fe(ge.width),ge.dash=fe(ge.dash),ge.stroke=fe(ge.stroke),ge.fill=fe(ge.fill);let ce,Ke,ze,ye=[],ot=[],vt,lt=!1,_t={};if(ne.live){const t=S[1]?S[1].values:null;lt=t!=null,vt=lt?t(n,1,0):{_:0};for(let s in vt)_t[s]=Ls}if(Ae)if(ce=It("table",fa,h),ze=It("tbody",null,ce),ne.mount(n,ce),lt){Ke=It("thead",null,ce,ze);let t=It("tr",null,Ke);It("th",null,t);for(var Dt in vt)It("th",xi,t).textContent=Dt}else Tt(ce,pa),ne.live&&Tt(ce,da);const Lt={show:!0},Qt={show:!1};function $t(t,s){if(s==0&&(lt||!ne.live||o==2))return Bl;let r=[],a=It("tr",ha,ze,ze.childNodes[s]);Tt(a,t.class),t.show||Tt(a,_l);let f=It("th",null,a);if(ge.show){let x=Ft(ma,f);if(s>0){let E=ge.width(n,s);E&&(x.style.border=E+"px "+ge.dash(n,s)+" "+ge.stroke(n,s)),x.style.background=ge.fill(n,s)}}let m=Ft(xi,f);t.label instanceof HTMLElement?m.appendChild(t.label):m.textContent=t.label,s>0&&(ge.show||(m.style.color=t.width>0?ge.stroke(n,s):ge.fill(n,s)),C("click",f,x=>{if(q._lock)return;fl(x);let E=S.indexOf(t);if((x.ctrlKey||x.metaKey)!=ne.isolate){let F=S.some((O,G)=>G>0&&G!=E&&O.show);S.forEach((O,G)=>{G>0&&Yt(G,F?G==E?Lt:Qt:Lt,!0,Ge.setSeries)})}else Yt(E,{show:!t.show},!0,Ge.setSeries)},!1),yl&&C(Ei,f,x=>{q._lock||(fl(x),Yt(S.indexOf(t),Fl,!0,Ge.setSeries))},!1));for(var _ in vt){let x=It("td",ga,a);x.textContent="--",r.push(x)}return[a,r]}const Nt=new Map;function C(t,s,r,a=!0){const f=Nt.get(s)||{},m=q.bind[t](n,s,r,a);m&&(wl(t,s,f[t]=m),Nt.set(s,f))}function y(t,s,r){const a=Nt.get(s)||{};for(let f in a)(t==null||f==t)&&(ws(f,s,a[f]),delete a[f]);t==null&&Nt.delete(s)}let A=0,U=0,T=0,w=0,V=0,I=0,Se=V,ve=I,Ne=T,St=w,rt=0,at=0,nt=0,ct=0;n.bbox={};let xl=!1,ll=!1,ft=!1,cl=!1,pn=!1,Ct=!1;function Hn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Al(!1),ft=!0,ll=!0,Dl()}function Bs(t,s){n.width=A=T=t,n.height=U=w=s,V=I=0,lr(),nr();let r=n.bbox;rt=r.left=gl(V*we,.5),at=r.top=gl(I*we,.5),nt=r.width=gl(T*we,.5),ct=r.height=gl(w*we,.5)}const Xo=3;function er(){let t=!1,s=0;for(;!t;){s++;let r=dr(s),a=pr(s);t=s==Xo||r&&a,t||(Bs(n.width,n.height),ll=!0)}}function tr({width:t,height:s}){Hn(t,s)}n.setSize=tr;function lr(){let t=!1,s=!1,r=!1,a=!1;H.forEach((f,m)=>{if(f.show&&f._show){let{side:_,_size:x}=f,E=_%2,F=f.label!=null?f.labelSize:0,O=x+F;O>0&&(E?(T-=O,_==3?(V+=O,a=!0):r=!0):(w-=O,_==0?(I+=O,t=!0):s=!0))}}),dl[0]=t,dl[1]=r,dl[2]=s,dl[3]=a,T-=nl[1]+nl[3],V+=nl[3],w-=nl[2]+nl[0],I+=nl[0]}function nr(){let t=V+T,s=I+w,r=V,a=I;function f(m,_){switch(m){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return a-=_,a+_}}H.forEach((m,_)=>{if(m.show&&m._show){let x=m.side;m._pos=f(x,m._size),m.label!=null&&(m._lpos=f(x,m.labelSize))}})}if(q.dataIdx==null){let t=q.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=fe(t.prox),a=t.bias??=0;q.dataIdx=(f,m,_,x)=>{if(m==0)return _;let E=_,F=r(f,m,_,x)??Ee,O=F>=0&&F<Ee,G=k.ori==0?T:w,se=q.left,_e=l[0],he=l[m];if(s.has(he[_])){E=null;let ue=null,ee=null,Z;if(a==0||a==-1)for(Z=_;ue==null&&Z-- >0;)s.has(he[Z])||(ue=Z);if(a==0||a==1)for(Z=_;ee==null&&Z++<he.length;)s.has(he[Z])||(ee=Z);if(ue!=null||ee!=null)if(O){let Pe=ue==null?-1/0:W(_e[ue],k,G,0),Oe=ee==null?1/0:W(_e[ee],k,G,0),et=se-Pe,ke=Oe-se;et<=ke?et<=F&&(E=ue):ke<=F&&(E=ee)}else E=ee==null?ue:ue==null?ee:_-ue<=ee-_?ue:ee}else O&&Ye(se-W(_e[_],k,G,0))>F&&(E=null);return E}}const fl=t=>{q.event=t};q.idxs=pe,q._lock=!1;let ut=q.points;ut.show=fe(ut.show),ut.size=fe(ut.size),ut.stroke=fe(ut.stroke),ut.width=fe(ut.width),ut.fill=fe(ut.fill);const Ut=n.focus=Be({},e.focus||{alpha:.3},q.focus),yl=Ut.prox>=0,kl=yl&&ut.one;let Pt=[],Tl=[],El=[];function Us(t,s){let r=ut.show(n,s);if(r instanceof HTMLElement)return Tt(r,ca),Tt(r,t.class),Jt(r,-10,-10,T,w),z.insertBefore(r,Pt[s]),r}function Ys(t,s){if(o==1||s>0){let r=o==1&&M[t.scale].time,a=t.value;t.value=r?Ii(a)?Ki(oe,ji(a,B)):a||ae:a||ku,t.label=t.label||(r?gu:mu)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Ou||Aa,t.fillTo=fe(t.fillTo||Du),t.pxAlign=+me(t.pxAlign,D),t.pxRound=no(t.pxAlign),t.stroke=fe(t.stroke||null),t.fill=fe(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Tu(gt(1,t.width),1),a=t.points=Be({},{size:r,width:gt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);a.show=fe(a.show),a.filter=fe(a.filter),a.fill=fe(a.fill),a.stroke=fe(a.stroke),a.paths=fe(a.paths),a.pxAlign=t.pxAlign}if(Ae){let r=$t(t,s);ye.splice(s,0,r[0]),ot.splice(s,0,r[1]),ne.values.push(null)}if(Ie){pe.splice(s,0,null);let r=null;kl?s==0&&(r=Us(t,s)):s>0&&(r=Us(t,s)),Pt.splice(s,0,r),Tl.splice(s,0,0),El.splice(s,0,0)}Xe("addSeries",s)}function sr(t,s){s=s??S.length,t=o==1?Ts(t,s,Zi,to):Ts(t,s,{},eo),S.splice(s,0,t),Ys(S[s],s)}n.addSeries=sr;function ir(t){if(S.splice(t,1),Ae){ne.values.splice(t,1),ot.splice(t,1);let s=ye.splice(t,1)[0];y(null,s.firstChild),s.remove()}Ie&&(pe.splice(t,1),Pt.splice(t,1)[0].remove(),Tl.splice(t,1),El.splice(t,1)),Xe("delSeries",t)}n.delSeries=ir;const dl=[!1,!1,!1,!1];function or(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=M[t.scale];a==null&&(t.scale=r?S[1].scale:R,a=M[t.scale]);let f=a.time;t.size=fe(t.size),t.space=fe(t.space),t.rotate=fe(t.rotate),al(t.incrs)&&t.incrs.forEach(_=>{!ul.has(_)&&ul.set(_,bo(_))}),t.incrs=fe(t.incrs||(a.distr==2?Za:f?Y==1?$a:tu:vl)),t.splits=fe(t.splits||(f&&a.distr==1?De:a.distr==3?Ss:a.distr==4?wu:_u)),t.stroke=fe(t.stroke),t.grid.stroke=fe(t.grid.stroke),t.ticks.stroke=fe(t.ticks.stroke),t.border.stroke=fe(t.border.stroke);let m=t.values;t.values=al(m)&&!al(m[0])?fe(m):f?al(m)?qi(oe,Yi(m,B)):Ii(m)?su(oe,m):m||de:m||vu,t.filter=fe(t.filter||(a.distr>=3&&a.log==10?xu:a.distr==3&&a.log==2?yu:_o)),t.font=ro(t.font),t.labelFont=ro(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(dl[s]=!0,t._el=Ft(oa,v))}}function Jl(t,s,r,a){let[f,m,_,x]=r,E=s%2,F=0;return E==0&&(x||m)&&(F=s==0&&!f||s==2&&!_?Ue(Ji.size/3):0),E==1&&(f||_)&&(F=s==1&&!m||s==3&&!x?Ue($i.size/2):0),F}const qs=n.padding=(e.padding||[Jl,Jl,Jl,Jl]).map(t=>fe(me(t,Jl))),nl=n._padding=qs.map((t,s)=>t(n,s,dl,0));let st,Je=null,Ze=null;const hn=o==1?S[0].idxs:null;let Ot=null,Zl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){st=0;for(let r=1;r<S.length;r++)st+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Ot=l[0],st=Ot.length;let r=l;if(le==2){r=l.slice();let a=r[0]=Array(st);for(let f=0;f<st;f++)a[f]=f}n._data=l=r}if(Al(!0),Xe("setData"),le==2&&(ft=!0),s!==!1){let r=k;r.auto(n,Zl)?Wn():il(R,r.min,r.max),cl=cl||q.left>=0,Ct=!0,Dl()}}n.setData=js;function Wn(){Zl=!0;let t,s;o==1&&(st>0?(Je=hn[0]=0,Ze=hn[1]=st-1,t=l[0][Je],s=l[0][Ze],le==2?(t=Je,s=Ze):t==s&&(le==3?[t,s]=Pn(t,t,k.log,!1):le==4?[t,s]=Ps(t,t,k.log,!1):k.time?s=t+Ue(86400/Y):[t,s]=Dn(t,s,Rs,!0))):(Je=hn[0]=t=null,Ze=hn[1]=s=null)),il(R,t,s)}let mn,Ml,In,Gn,Bn,Un,Yn,qn,jn,wt;function Ks(t,s,r,a,f,m){t??=ki,r??=Fs,a??="butt",f??=ki,m??="round",t!=mn&&(g.strokeStyle=mn=t),f!=Ml&&(g.fillStyle=Ml=f),s!=In&&(g.lineWidth=In=s),m!=Bn&&(g.lineJoin=Bn=m),a!=Un&&(g.lineCap=Un=a),r!=Gn&&g.setLineDash(Gn=r)}function Js(t,s,r,a){s!=Ml&&(g.fillStyle=Ml=s),t!=Yn&&(g.font=Yn=t),r!=qn&&(g.textAlign=qn=r),a!=jn&&(g.textBaseline=jn=a)}function Kn(t,s,r,a,f=0){if(a.length>0&&t.auto(n,Zl)&&(s==null||s.min==null)){let m=me(Je,0),_=me(Ze,a.length-1),x=r.min==null?xa(a,m,_,f,t.distr==3):[r.min,r.max];t.min=Bt(t.min,r.min=x[0]),t.max=gt(t.max,r.max=x[1])}}const Zs={min:null,max:null};function rr(){for(let a in M){let f=M[a];j[a]==null&&(f.min==null||j[R]!=null&&f.auto(n,Zl))&&(j[a]=Zs)}for(let a in M){let f=M[a];j[a]==null&&f.from!=null&&j[f.from]!=null&&(j[a]=Zs)}j[R]!=null&&Al(!0);let t={};for(let a in j){let f=j[a];if(f!=null){let m=t[a]=Ul(M[a],Ca);if(f.min!=null)Be(m,f);else if(a!=R||o==2)if(st==0&&m.from==null){let _=m.range(n,null,null,a);m.min=_[0],m.max=_[1]}else m.min=Ee,m.max=-Ee}}if(st>0){S.forEach((a,f)=>{if(o==1){let m=a.scale,_=j[m];if(_==null)return;let x=t[m];if(f==0){let E=x.range(n,x.min,x.max,m);x.min=E[0],x.max=E[1],Je=Gt(x.min,l[0]),Ze=Gt(x.max,l[0]),Ze-Je>1&&(l[0][Je]<x.min&&Je++,l[0][Ze]>x.max&&Ze--),a.min=Ot[Je],a.max=Ot[Ze]}else a.show&&a.auto&&Kn(x,_,a,l[f],a.sorted);a.idxs[0]=Je,a.idxs[1]=Ze}else if(f>0&&a.show&&a.auto){let[m,_]=a.facets,x=m.scale,E=_.scale,[F,O]=l[f],G=t[x],se=t[E];G!=null&&Kn(G,j[x],m,F,m.sorted),se!=null&&Kn(se,j[E],_,O,_.sorted),a.min=_.min,a.max=_.max}});for(let a in t){let f=t[a],m=j[a];if(f.from==null&&(m==null||m.min==null)){let _=f.range(n,f.min==Ee?null:f.min,f.max==-Ee?null:f.max,a);f.min=_[0],f.max=_[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let m=t[f.from];if(m.min==null)f.min=f.max=null;else{let _=f.range(n,m.min,m.max,a);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let a in t){let f=t[a],m=M[a];if(m.min!=f.min||m.max!=f.max){m.min=f.min,m.max=f.max;let _=m.distr;m._min=_==3?el(m.min):_==4?ds(m.min,m.asinh):_==100?m.fwd(m.min):m.min,m._max=_==3?el(m.max):_==4?ds(m.max,m.asinh):_==100?m.fwd(m.max):m.max,s[a]=r=!0}}if(r){S.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)ft=!0,Xe("setScale",a);Ie&&q.left>=0&&(cl=Ct=!0)}for(let a in j)j[a]=null}function ar(t){let s=bs(Je-1,0,st-1),r=bs(Ze+1,0,st-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<st-1;)r++;return[s,r]}function ur(){if(st>0){let t=S.some(s=>s._focus)&&wt!=Ut.alpha;t&&(g.globalAlpha=wt=Ut.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(Qs(r,!1),Qs(r,!0),s._paths==null)){let a=wt;wt!=s.alpha&&(g.globalAlpha=wt=s.alpha);let f=o==2?[0,l[r][0].length-1]:ar(l[r]);s._paths=s.paths(n,r,f[0],f[1]),wt!=a&&(g.globalAlpha=wt=a)}}),S.forEach((s,r)=>{if(r>0&&s.show){let a=wt;wt!=s.alpha&&(g.globalAlpha=wt=s.alpha),s._paths!=null&&$s(r,!1);{let f=s._paths!=null?s._paths.gaps:null,m=s.points.show(n,r,Je,Ze,f),_=s.points.filter(n,r,m,f);(m||_)&&(s.points._paths=s.points.paths(n,r,Je,Ze,_),$s(r,!0))}wt!=a&&(g.globalAlpha=wt=a),Xe("drawSeries",r)}}),t&&(g.globalAlpha=wt=1)}}function Qs(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function $s(t,s){let r=s?S[t].points:S[t],{stroke:a,fill:f,clip:m,flags:_,_stroke:x=r._stroke,_fill:E=r._fill,_width:F=r.width}=r._paths;F=Me(F*we,3);let O=null,G=F%2/2;s&&E==null&&(E=F>0?"#fff":x);let se=r.pxAlign==1&&G>0;if(se&&g.translate(G,G),!s){let _e=rt-F/2,he=at-F/2,ue=nt+F,ee=ct+F;O=new Path2D,O.rect(_e,he,ue,ee)}s?Jn(x,F,r.dash,r.cap,E,a,f,_,m):cr(t,x,F,r.dash,r.cap,E,a,f,_,O,m),se&&g.translate(-G,-G)}function cr(t,s,r,a,f,m,_,x,E,F,O){let G=!1;E!=0&&X.forEach((se,_e)=>{if(se.series[0]==t){let he=S[se.series[1]],ue=l[se.series[1]],ee=(he._paths||cn).band;al(ee)&&(ee=se.dir==1?ee[0]:ee[1]);let Z,Pe=null;he.show&&ee&&ka(ue,Je,Ze)?(Pe=se.fill(n,_e)||m,Z=he._paths.clip):ee=null,Jn(s,r,a,f,Pe,_,x,E,F,O,Z,ee),G=!0}}),G||Jn(s,r,a,f,m,_,x,E,F,O)}const Xs=Yl|ys;function Jn(t,s,r,a,f,m,_,x,E,F,O,G){Ks(t,s,r,a,f),(E||F||G)&&(g.save(),E&&g.clip(E),F&&g.clip(F)),G?(x&Xs)==Xs?(g.clip(G),O&&g.clip(O),vn(f,_),gn(t,m,s)):x&ys?(vn(f,_),g.clip(G),gn(t,m,s)):x&Yl&&(g.save(),g.clip(G),O&&g.clip(O),vn(f,_),g.restore(),gn(t,m,s)):(vn(f,_),gn(t,m,s)),(E||F||G)&&g.restore()}function gn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=mn=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function vn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=Ml=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function fr(t,s,r,a){let f=H[t],m;if(a<=0)m=[0,0];else{let _=f._space=f.space(n,t,s,r,a),x=f._incrs=f.incrs(n,t,s,r,a,_);m=Yu(s,r,x,a,_)}return f._found=m}function Zn(t,s,r,a,f,m,_,x,E,F){let O=_%2/2;D==1&&g.translate(O,O),Ks(x,_,E,F,x),g.beginPath();let G,se,_e,he,ue=f+(a==0||a==3?-m:m);r==0?(se=f,he=ue):(G=f,_e=ue);for(let ee=0;ee<t.length;ee++)s[ee]!=null&&(r==0?G=_e=t[ee]:se=he=t[ee],g.moveTo(G,se),g.lineTo(_e,he));g.stroke(),D==1&&g.translate(-O,-O)}function dr(t){let s=!0;return H.forEach((r,a)=>{if(!r.show)return;let f=M[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Al(!1));return}else r._show||(s=!1,r._show=!0,Al(!1));let m=r.side,_=m%2,{min:x,max:E}=f,[F,O]=fr(a,x,E,_==0?T:w);if(O==0)return;let G=f.distr==2,se=r._splits=r.splits(n,a,x,E,F,O,G),_e=f.distr==2?se.map(Z=>Ot[Z]):se,he=f.distr==2?Ot[se[1]]-Ot[se[0]]:F,ue=r._values=r.values(n,r.filter(n,_e,a,O,he),a,O,he);r._rotate=m==2?r.rotate(n,ue,a,O):0;let ee=r._size;r._size=Vt(r.size(n,ue,a,t)),ee!=null&&r._size!=ee&&(s=!1)}),s}function pr(t){let s=!0;return qs.forEach((r,a)=>{let f=r(n,a,dl,t);f!=nl[a]&&(s=!1),nl[a]=f}),s}function hr(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,m,_=s.stroke(n,t),x=r==0||r==3?-1:1,[E,F]=s._found;if(s.label!=null){let pt=s.labelGap*x,kt=Ue((s._lpos+pt)*we);Js(s.labelFont[0],_,"center",r==2?nn:yi),g.save(),a==1?(f=m=0,g.translate(kt,Ue(at+ct/2)),g.rotate((r==3?-En:En)/2)):(f=Ue(rt+nt/2),m=kt);let ml=go(s.label)?s.label(n,t,E,F):s.label;g.fillText(ml,f,m),g.restore()}if(F==0)continue;let O=M[s.scale],G=a==0?nt:ct,se=a==0?rt:at,_e=s._splits,he=O.distr==2?_e.map(pt=>Ot[pt]):_e,ue=O.distr==2?Ot[_e[1]]-Ot[_e[0]]:E,ee=s.ticks,Z=s.border,Pe=ee.show?ee.size:0,Oe=Ue(Pe*we),et=Ue((s.alignTo==2?s._size-Pe-s.gap:s.gap)*we),ke=s._rotate*-En/180,He=P(s._pos*we),xt=(Oe+et)*x,dt=He+xt;m=a==0?dt:0,f=a==1?dt:0;let Rt=s.font[0],Ht=s.align==1?Nl:s.align==2?us:ke>0?Nl:ke<0?us:a==0?"center":r==3?us:Nl,jt=ke||a==1?"middle":r==2?nn:yi;Js(Rt,_,Ht,jt);let yt=s.font[1]*s.lineGap,zt=_e.map(pt=>P(d(pt,O,G,se))),Wt=s._values;for(let pt=0;pt<Wt.length;pt++){let kt=Wt[pt];if(kt!=null){a==0?f=zt[pt]:m=zt[pt],kt=""+kt;let ml=kt.indexOf(`
`)==-1?[kt]:kt.split(/\n/gm);for(let ht=0;ht<ml.length;ht++){let _i=ml[ht];ke?(g.save(),g.translate(f,m+ht*yt),g.rotate(ke),g.fillText(_i,0,0),g.restore()):g.fillText(_i,f,m+ht*yt)}}}ee.show&&Zn(zt,ee.filter(n,he,t,F,ue),a,r,He,Oe,Me(ee.width*we,3),ee.stroke(n,t),ee.dash,ee.cap);let Kt=s.grid;Kt.show&&Zn(zt,Kt.filter(n,he,t,F,ue),a,a==0?2:1,a==0?at:rt,a==0?ct:nt,Me(Kt.width*we,3),Kt.stroke(n,t),Kt.dash,Kt.cap),Z.show&&Zn([He],[1],a==0?1:0,a==0?1:2,a==1?at:rt,a==1?ct:nt,Me(Z.width*we,3),Z.stroke(n,t),Z.dash,Z.cap)}Xe("drawAxes")}function Al(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let _n=!1,Qn=!1,Ql=[];function mr(){Qn=!1;for(let t=0;t<Ql.length;t++)Xe(...Ql[t]);Ql.length=0}function Dl(){_n||(Oa(ei),_n=!0)}function gr(t,s=!1){_n=!0,Qn=s,t(n),ei(),s&&Ql.length>0&&queueMicrotask(mr)}n.batch=gr;function ei(){if(xl&&(rr(),xl=!1),ft&&(er(),ft=!1),ll){if(Re(N,Nl,V),Re(N,nn,I),Re(N,on,T),Re(N,rn,w),Re(z,Nl,V),Re(z,nn,I),Re(z,on,T),Re(z,rn,w),Re(v,on,A),Re(v,rn,U),b.width=Ue(A*we),b.height=Ue(U*we),H.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let m=f===3||f===0?r:0,_=f%2==1;Re(t,_?"left":"top",a-m),Re(t,_?"width":"height",r),Re(t,_?"top":"left",_?I:V),Re(t,_?"height":"width",_?w:T),_s(t,_l)}else Tt(t,_l)}),mn=Ml=In=Bn=Un=Yn=qn=jn=Gn=null,wt=1,en(!0),V!=Se||I!=ve||T!=Ne||w!=St){Al(!1);let t=T/Ne,s=w/St;if(Ie&&!cl&&q.left>=0){q.left*=t,q.top*=s,Ll&&Jt(Ll,Ue(q.left),0,T,w),Cl&&Jt(Cl,0,Ue(q.top),T,w);for(let r=0;r<Pt.length;r++){let a=Pt[r];a!=null&&(Tl[r]*=t,El[r]*=s,Jt(a,Vt(Tl[r]),Vt(El[r]),T,w))}}if(Ce.show&&!pn&&Ce.left>=0&&Ce.width>0){Ce.left*=t,Ce.width*=t,Ce.top*=s,Ce.height*=s;for(let r in ns)Re(zl,r,Ce[r])}Se=V,ve=I,Ne=T,St=w}Xe("setSize"),ll=!1}A>0&&U>0&&(g.clearRect(0,0,b.width,b.height),Xe("drawClear"),Q.forEach(t=>t()),Xe("draw")),Ce.show&&pn&&(wn(Ce),pn=!1),Ie&&cl&&(hl(null,!0,!1),cl=!1),ne.show&&ne.live&&Ct&&(ts(),Ct=!1),p||(p=!0,n.status=1,Xe("ready")),Zl=!1,_n=!1}n.redraw=(t,s)=>{ft=s||!1,t!==!1?il(R,k.min,k.max):Dl()};function $n(t,s){let r=M[t];if(r.from==null){if(st==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(st>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==R&&r.distr==2&&st>0&&(s.min=Gt(s.min,l[0]),s.max=Gt(s.max,l[0]),s.min==s.max&&s.max++),j[t]=s,xl=!0,Dl()}}n.setScale=$n;let Xn,es,Ll,Cl,ti,li,Pl,Rl,ni,si,Le,Fe,sl=!1;const it=q.drag;let Qe=it.x,$e=it.y;Ie&&(q.x&&(Xn=Ft(aa,z)),q.y&&(es=Ft(ua,z)),k.ori==0?(Ll=Xn,Cl=es):(Ll=es,Cl=Xn),Le=q.left,Fe=q.top);const Ce=n.select=Be({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),zl=Ce.show?Ft(ra,Ce.over?z:N):null;function wn(t,s){if(Ce.show){for(let r in t)Ce[r]=t[r],r in ns&&Re(zl,r,t[r]);s!==!1&&Xe("setSelect")}}n.setSelect=wn;function vr(t){if(S[t].show)Ae&&_s(ye[t],_l);else if(Ae&&Tt(ye[t],_l),Ie){let r=kl?Pt[0]:Pt[t];r!=null&&Jt(r,-10,-10,T,w)}}function il(t,s,r){$n(t,{min:s,max:r})}function Yt(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&S.forEach((f,m)=>{m>0&&(t==m||t==null)&&(f.show=s.show,vr(m),o==2?(il(f.facets[0].scale,null,null),il(f.facets[1].scale,null,null)):il(f.scale,null,null),Dl())}),r!==!1&&Xe("setSeries",t,s),a&&tn("setSeries",n,t,s)}n.setSeries=Yt;function _r(t,s){Be(X[t],s)}function wr(t,s){t.fill=fe(t.fill||null),t.dir=me(t.dir,-1),s=s??X.length,X.splice(s,0,t)}function br(t){t==null?X.length=0:X.splice(t,1)}n.addBand=wr,n.setBand=_r,n.delBand=br;function Sr(t,s){S[t].alpha=s,Ie&&Pt[t]!=null&&(Pt[t].style.opacity=s),Ae&&ye[t]&&(ye[t].style.opacity=s)}let Xt,ol,pl;const Fl={focus:!0};function xr(t){if(t!=pl){let s=t==null,r=Ut.alpha!=1;S.forEach((a,f)=>{if(o==1||f>0){let m=s||f==0||f==t;a._focus=s?null:m,r&&Sr(f,m?1:Ut.alpha)}}),pl=t,r&&Dl()}}Ae&&yl&&C(Mi,ce,t=>{q._lock||(fl(t),pl!=null&&Yt(null,Fl,!0,Ge.setSeries))});function qt(t,s,r){let a=M[s];r&&(t=t/we-(a.ori==1?I:V));let f=T;a.ori==1&&(f=w,t=f-t),a.dir==-1&&(t=f-t);let m=a._min,_=a._max,x=t/f,E=m+(_-m)*x,F=a.distr;return F==3?Gl(10,E):F==4?Ea(E,a.asinh):F==100?a.bwd(E):E}function yr(t,s){let r=qt(t,R,s);return Gt(r,l[0],Je,Ze)}n.valToIdx=t=>Gt(t,l[0]),n.posToIdx=yr,n.posToVal=qt,n.valToPos=(t,s,r)=>M[s].ori==0?u(t,M[s],r?nt:T,r?rt:0):c(t,M[s],r?ct:w,r?at:0),n.setCursor=(t,s,r)=>{Le=t.left,Fe=t.top,hl(null,s,r)};function ii(t,s){Re(zl,Nl,Ce.left=t),Re(zl,on,Ce.width=s)}function oi(t,s){Re(zl,nn,Ce.top=t),Re(zl,rn,Ce.height=s)}let $l=k.ori==0?ii:oi,Xl=k.ori==1?ii:oi;function kr(){if(Ae&&ne.live)for(let t=o==2?1:0;t<S.length;t++){if(t==0&&lt)continue;let s=ne.values[t],r=0;for(let a in s)ot[t][r++].firstChild.nodeValue=s[a]}}function ts(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{pe[a]=r}):La(t.idx)||pe.fill(t.idx),ne.idx=pe[0]),Ae&&ne.live){for(let r=0;r<S.length;r++)(r>0||o==1&&!lt)&&Tr(r,pe[r]);kr()}Ct=!1,s!==!1&&Xe("setLegend")}n.setLegend=ts;function Tr(t,s){let r=S[t],a=t==0&&le==2?Ot:l[t],f;lt?f=r.values(n,t,s)??_t:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?_t:{_:f}),ne.values[t]=f}function hl(t,s,r){ni=Le,si=Fe,[Le,Fe]=q.move(n,Le,Fe),q.left=Le,q.top=Fe,Ie&&(Ll&&Jt(Ll,Ue(Le),0,T,w),Cl&&Jt(Cl,0,Ue(Fe),T,w));let a,f=Je>Ze;Xt=Ee,ol=null;let m=k.ori==0?T:w,_=k.ori==1?T:w;if(Le<0||st==0||f){a=q.idx=null;for(let x=0;x<S.length;x++){let E=Pt[x];E!=null&&Jt(E,-10,-10,T,w)}yl&&Yt(null,Fl,!0,t==null&&Ge.setSeries),ne.live&&(pe.fill(a),Ct=!0)}else{let x,E,F;o==1&&(x=k.ori==0?Le:Fe,E=qt(x,R),a=q.idx=Gt(E,l[0],Je,Ze),F=W(l[0][a],k,m,0));let O=-10,G=-10,se=0,_e=0,he=!0,ue="",ee="";for(let Z=o==2?1:0;Z<S.length;Z++){let Pe=S[Z],Oe=pe[Z],et=Oe==null?null:o==1?l[Z][Oe]:l[Z][1][Oe],ke=q.dataIdx(n,Z,a,E),He=ke==null?null:o==1?l[Z][ke]:l[Z][1][ke];if(Ct=Ct||He!=et||ke!=Oe,pe[Z]=ke,Z>0&&Pe.show){let xt=ke==null?-10:ke==a?F:W(o==1?l[0][ke]:l[Z][0][ke],k,m,0),dt=He==null?-10:$(He,o==1?M[Pe.scale]:M[Pe.facets[1].scale],_,0);if(yl&&He!=null){let Rt=k.ori==1?Le:Fe,Ht=Ye(Ut.dist(n,Z,ke,dt,Rt));if(Ht<Xt){let jt=Ut.bias;if(jt!=0){let yt=qt(Rt,Pe.scale),zt=He>=0?1:-1,Wt=yt>=0?1:-1;Wt==zt&&(Wt==1?jt==1?He>=yt:He<=yt:jt==1?He<=yt:He>=yt)&&(Xt=Ht,ol=Z)}else Xt=Ht,ol=Z}}if(Ct||kl){let Rt,Ht;k.ori==0?(Rt=xt,Ht=dt):(Rt=dt,Ht=xt);let jt,yt,zt,Wt,Kt,pt,kt=!0,ml=ut.bbox;if(ml!=null){kt=!1;let ht=ml(n,Z);zt=ht.left,Wt=ht.top,jt=ht.width,yt=ht.height}else zt=Rt,Wt=Ht,jt=yt=ut.size(n,Z);if(pt=ut.fill(n,Z),Kt=ut.stroke(n,Z),kl)Z==ol&&Xt<=Ut.prox&&(O=zt,G=Wt,se=jt,_e=yt,he=kt,ue=pt,ee=Kt);else{let ht=Pt[Z];ht!=null&&(Tl[Z]=zt,El[Z]=Wt,zi(ht,jt,yt,kt),Pi(ht,pt,Kt),Jt(ht,Vt(zt),Vt(Wt),T,w))}}}}if(kl){let Z=Ut.prox,Pe=pl==null?Xt<=Z:Xt>Z||ol!=pl;if(Ct||Pe){let Oe=Pt[0];Oe!=null&&(Tl[0]=O,El[0]=G,zi(Oe,se,_e,he),Pi(Oe,ue,ee),Jt(Oe,Vt(O),Vt(G),T,w))}}}if(Ce.show&&sl)if(t!=null){let[x,E]=Ge.scales,[F,O]=Ge.match,[G,se]=t.cursor.sync.scales,_e=t.cursor.drag;if(Qe=_e._x,$e=_e._y,Qe||$e){let{left:he,top:ue,width:ee,height:Z}=t.select,Pe=t.scales[G].ori,Oe=t.posToVal,et,ke,He,xt,dt,Rt=x!=null&&F(x,G),Ht=E!=null&&O(E,se);Rt&&Qe?(Pe==0?(et=he,ke=ee):(et=ue,ke=Z),He=M[x],xt=W(Oe(et,G),He,m,0),dt=W(Oe(et+ke,G),He,m,0),$l(Bt(xt,dt),Ye(dt-xt))):$l(0,m),Ht&&$e?(Pe==1?(et=he,ke=ee):(et=ue,ke=Z),He=M[E],xt=$(Oe(et,se),He,_,0),dt=$(Oe(et+ke,se),He,_,0),Xl(Bt(xt,dt),Ye(dt-xt))):Xl(0,_)}else ss()}else{let x=Ye(ni-ti),E=Ye(si-li);if(k.ori==1){let se=x;x=E,E=se}Qe=it.x&&x>=it.dist,$e=it.y&&E>=it.dist;let F=it.uni;F!=null?Qe&&$e&&(Qe=x>=F,$e=E>=F,!Qe&&!$e&&(E>x?$e=!0:Qe=!0)):it.x&&it.y&&(Qe||$e)&&(Qe=$e=!0);let O,G;Qe&&(k.ori==0?(O=Pl,G=Le):(O=Rl,G=Fe),$l(Bt(O,G),Ye(G-O)),$e||Xl(0,_)),$e&&(k.ori==1?(O=Pl,G=Le):(O=Rl,G=Fe),Xl(Bt(O,G),Ye(G-O)),Qe||$l(0,m)),!Qe&&!$e&&($l(0,0),Xl(0,0))}if(it._x=Qe,it._y=$e,t==null){if(r){if(vi!=null){let[x,E]=Ge.scales;Ge.values[0]=x!=null?qt(k.ori==0?Le:Fe,x):null,Ge.values[1]=E!=null?qt(k.ori==1?Le:Fe,E):null}tn(cs,n,Le,Fe,T,w,a)}if(yl){let x=r&&Ge.setSeries,E=Ut.prox;pl==null?Xt<=E&&Yt(ol,Fl,!0,x):Xt>E?Yt(null,Fl,!0,x):ol!=pl&&Yt(ol,Fl,!0,x)}}Ct&&(ne.idx=a,ts()),s!==!1&&Xe("setCursor")}let rl=null;Object.defineProperty(n,"rect",{get(){return rl==null&&en(!1),rl}});function en(t=!1){t?rl=null:(rl=z.getBoundingClientRect(),Xe("syncRect",rl))}function ri(t,s,r,a,f,m,_){q._lock||sl&&t!=null&&t.movementX==0&&t.movementY==0||(ls(t,s,r,a,f,m,_,!1,t!=null),t!=null?hl(null,!0,!0):hl(s,!0,!1))}function ls(t,s,r,a,f,m,_,x,E){if(rl==null&&en(!1),fl(t),t!=null)r=t.clientX-rl.left,a=t.clientY-rl.top;else{if(r<0||a<0){Le=-10,Fe=-10;return}let[F,O]=Ge.scales,G=s.cursor.sync,[se,_e]=G.values,[he,ue]=G.scales,[ee,Z]=Ge.match,Pe=s.axes[0].side%2==1,Oe=k.ori==0?T:w,et=k.ori==1?T:w,ke=Pe?m:f,He=Pe?f:m,xt=Pe?a:r,dt=Pe?r:a;if(he!=null?r=ee(F,he)?d(se,M[F],Oe,0):-10:r=Oe*(xt/ke),ue!=null?a=Z(O,ue)?d(_e,M[O],et,0):-10:a=et*(dt/He),k.ori==1){let Rt=r;r=a,a=Rt}}E&&(s==null||s.cursor.event.type==cs)&&((r<=1||r>=T-1)&&(r=gl(r,T)),(a<=1||a>=w-1)&&(a=gl(a,w))),x?(ti=r,li=a,[Pl,Rl]=q.move(n,r,a)):(Le=r,Fe=a)}const ns={width:0,height:0,left:0,top:0};function ss(){wn(ns,!1)}let ai,ui,ci,fi;function di(t,s,r,a,f,m,_){sl=!0,Qe=$e=it._x=it._y=!1,ls(t,s,r,a,f,m,_,!0,!1),t!=null&&(C(fs,gs,pi,!1),tn(Ti,n,Pl,Rl,T,w,null));let{left:x,top:E,width:F,height:O}=Ce;ai=x,ui=E,ci=F,fi=O}function pi(t,s,r,a,f,m,_){sl=it._x=it._y=!1,ls(t,s,r,a,f,m,_,!1,!0);let{left:x,top:E,width:F,height:O}=Ce,G=F>0||O>0,se=ai!=x||ui!=E||ci!=F||fi!=O;if(G&&se&&wn(Ce),it.setScale&&G&&se){let _e=x,he=F,ue=E,ee=O;if(k.ori==1&&(_e=E,he=O,ue=x,ee=F),Qe&&il(R,qt(_e,R),qt(_e+he,R)),$e)for(let Z in M){let Pe=M[Z];Z!=R&&Pe.from==null&&Pe.min!=Ee&&il(Z,qt(ue+ee,Z),qt(ue,Z))}ss()}else q.lock&&(q._lock=!q._lock,hl(s,!0,t!=null));t!=null&&(y(fs,gs),tn(fs,n,Le,Fe,T,w,null))}function Er(t,s,r,a,f,m,_){if(q._lock)return;fl(t);let x=sl;if(sl){let E=!0,F=!0,O=10,G,se;k.ori==0?(G=Qe,se=$e):(G=$e,se=Qe),G&&se&&(E=Le<=O||Le>=T-O,F=Fe<=O||Fe>=w-O),G&&E&&(Le=Le<Pl?0:T),se&&F&&(Fe=Fe<Rl?0:w),hl(null,!0,!0),sl=!1}Le=-10,Fe=-10,pe.fill(null),hl(null,!0,!0),x&&(sl=x)}function hi(t,s,r,a,f,m,_){q._lock||(fl(t),Wn(),ss(),t!=null&&tn(Ai,n,Le,Fe,T,w,null))}function mi(){H.forEach(qu),Hn(n.width,n.height,!0)}wl(An,Il,mi);const Vl={};Vl.mousedown=di,Vl.mousemove=ri,Vl.mouseup=pi,Vl.dblclick=hi,Vl.setSeries=(t,s,r,a)=>{let f=Ge.match[2];r=f(n,s,r),r!=-1&&Yt(r,a,!0,!1)},Ie&&(C(Ti,z,di),C(cs,z,ri),C(Ei,z,t=>{fl(t),en(!1)}),C(Mi,z,Er),C(Ai,z,hi),ks.add(n),n.syncRect=en);const bn=n.hooks=e.hooks||{};function Xe(t,s,r){Qn?Ql.push([t,s,r]):t in bn&&bn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)bn[s]=(bn[s]||[]).concat(t.hooks[s])});const gi=(t,s,r)=>r,Ge=Be({key:null,setSeries:!1,filters:{pub:Hi,sub:Hi},scales:[R,S[1]?S[1].scale:null],match:[Wi,Wi,gi],values:[null,null]},q.sync);Ge.match.length==2&&Ge.match.push(gi),q.sync=Ge;const vi=Ge.key,is=Wo(vi);function tn(t,s,r,a,f,m,_){Ge.filters.pub(t,s,r,a,f,m,_)&&is.pub(t,s,r,a,f,m,_)}is.sub(n);function Mr(t,s,r,a,f,m,_){Ge.filters.sub(t,s,r,a,f,m,_)&&Vl[t](null,s,r,a,f,m,_)}n.pub=Mr;function Ar(){is.unsub(n),ks.delete(n),Nt.clear(),ws(An,Il,mi),h.remove(),ce?.remove(),Xe("destroy")}n.destroy=Ar;function os(){Xe("init",e,l),js(l||e.data,!1),j[R]?$n(R,j[R]):Wn(),pn=Ce.show&&(Ce.width>0||Ce.height>0),cl=Ct=!0,Hn(e.width,e.height)}return S.forEach(Ys),H.forEach(or),i?i instanceof HTMLElement?(i.appendChild(h),os()):i(n,os):os(),n}qe.assign=Be;qe.fmtNum=zs;qe.rangeNum=Dn;qe.rangeLog=Pn;qe.rangeAsinh=Ps;qe.orient=Sl;qe.pxRatio=we;qe.join=Na;qe.fmtDate=Vs,qe.tzDate=Ka;qe.sync=Wo;{qe.addGap=Lu,qe.clipGaps=Fn;let e=qe.paths={points:qo};e.linear=Ko,e.stepped=Ru,e.bars=zu,e.spline=Vu}const $o="/api",ju=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ku(e,l=24){const i=await fetch(`${$o}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Ju(e=24){const l=await fetch(`${$o}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Zu=We('<button type="button"> </button>'),Qu=We("<option> </option>"),$u=We('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),Xu=We('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),ec=We('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),tc=We('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div></div>');function lc(e,l){Ms(l,!0);const i="tiltui_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let o=Zt(()=>rs.config.smoothing_enabled),u=Zt(()=>rs.config.smoothing_samples),c=tt("UTC"),d=tt(!1),p=tt(0),h=tt(3),b=Zt(()=>rs.config.temp_units==="C"),g,v=null,N=tt(!0),z=tt(null),D=tt(24),P=tt(wi([])),Y=tt(wi([]));const S={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},H="#facc15",M="rgba(250, 204, 21, 0.3)",X="#71717a",R="#a1a1aa",K="rgba(255, 255, 255, 0.04)",Q="#22d3ee";function ie(C,y,A){const U=new Date(C*1e3);try{return A?U.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:y}):U.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:y})}catch(T){return console.warn("Invalid timezone:",y,T),A?U.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):U.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function J(C,y,A){const U=H,T=S[l.tiltColor]||R;return{width:C,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(w,V,I)=>{const Se=(I-V)*.1||.005;return[V-Se,I+Se]}},temp:{auto:!0,range:(w,V,I)=>{const Se=I-V,ve=10;if(Se<ve){const St=(I+V)/2;return[St-ve/2,St+ve/2]}const Ne=Se*.1;return[V-Ne,I+Ne]}}},axes:[{stroke:X,grid:{stroke:K,width:1},ticks:{stroke:K,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(w,V)=>V.map(I=>ie(I,A,L(D)<=24))},{scale:"sg",stroke:U,grid:{stroke:K,width:1},ticks:{stroke:K,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(w,V)=>V.map(I=>I.toFixed(3)),side:3},{scale:"temp",stroke:T,grid:{show:!1},ticks:{stroke:K,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(w,V)=>V.map(I=>I.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:U,width:2,fill:(w,V)=>{const I=w.ctx.createLinearGradient(0,w.bbox.top,0,w.bbox.top+w.bbox.height);return I.addColorStop(0,M),I.addColorStop(1,"transparent"),I},points:{show:!1},paths:qe.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:T,width:1.5,dash:[4,4],points:{show:!1},paths:qe.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:Q,width:1.5,dash:[2,4],points:{show:!1},paths:qe.paths.spline?.()}]}}function k(C,y){if(y<=1)return C;const A=[];for(let U=0;U<C.length;U++){const T=[],w=Math.floor(y/2);for(let V=Math.max(0,U-w);V<=Math.min(C.length-1,U+w);V++){const I=C[V];I!==null&&T.push(I)}T.length>0?A.push(T.reduce((V,I)=>V+I,0)/T.length):A.push(null)}return A}function le(C,y,A,U,T){if(C.length<=T)return[C,y,A,U];const w=Math.ceil(C.length/T),V=[],I=[],Se=[],ve=[];for(let Ne=0;Ne<C.length;Ne+=w){const St=Math.min(Ne+w,C.length);let rt=0,at=0,nt=0,ct=0,xl=0,ll=0;for(let ft=Ne;ft<St;ft++)y[ft]!==null&&(rt+=y[ft],at++),A[ft]!==null&&(nt+=A[ft],ct++),U[ft]!==null&&(xl+=U[ft],ll++);V.push(C[Math.floor((Ne+St-1)/2)]),I.push(at>0?rt/at:null),Se.push(ct>0?nt/ct:null),ve.push(ll>0?xl/ll:null)}return[V,I,Se,ve]}function W(C){return!C.endsWith("Z")&&!C.match(/[+-]\d{2}:\d{2}$/)&&(C=C+"Z"),new Date(C).getTime()/1e3}function $(C,y,A){if(C.length===0||y.length===0)return y.map(()=>null);const U=[...C].sort((V,I)=>W(V.timestamp)-W(I.timestamp)),T=U.map(V=>W(V.timestamp)),w=U.map(V=>V.temperature===null?null:A?V.temperature:V.temperature*9/5+32);return y.map(V=>{let I=null,Se=null;for(let ve=0;ve<T.length;ve++)if(T[ve]<=V&&(I={time:T[ve],temp:w[ve]}),T[ve]>=V&&Se===null){Se={time:T[ve],temp:w[ve]};break}if(I&&Se&&I.temp!==null&&Se.temp!==null){if(I.time===Se.time)return I.temp;const ve=(V-I.time)/(Se.time-I.time);return I.temp+ve*(Se.temp-I.temp)}return I!==null&&I.temp!==null?I.temp:Se!==null&&Se.temp!==null?Se.temp:null})}function j(C,y,A){const U=[...C].reverse();let T=[],w=[],V=[];for(const ve of U){T.push(W(ve.timestamp)),w.push(ve.sg_calibrated??ve.sg_raw);const Ne=ve.temp_calibrated??ve.temp_raw;Ne!==null?V.push(A?Wr(Ne):Ne):V.push(null)}let I=$(y,T,A);return L(o)&&L(u)>1&&(w=k(w,L(u)),V=k(V,L(u)),I=k(I,L(u))),[T,w,V,I]=le(T,w,V,I,500),[T,w,V,I]}const oe=3e4;async function B(C=!1){const A=Date.now()-L(p);if(!(!C&&L(p)>0&&A<oe)){Te(N,!0),Te(z,null);try{const[U,T]=await Promise.all([Ku(l.tiltId,L(D)),Ju(L(D)).catch(()=>[])]);Te(P,U,!0),Te(Y,T,!0),De()}catch(U){Te(z,U instanceof Error?U.message:"Failed to load data",!0)}finally{Te(p,Date.now(),!0),Te(N,!1)}}}function De(){if(!g||L(P).length===0)return;const C=j(L(P),L(Y),L(b)),y=J(g.clientWidth,L(b),L(c));v&&v.destroy(),v=new qe(y,C,g)}function de(){v&&g&&v.setSize({width:g.clientWidth,height:220})}let ae=null;function pe(){if(ae&&(clearInterval(ae),ae=null),L(h)>0){const C=L(h)*60*1e3;ae=setInterval(()=>{L(N)||B(!1)},C)}}ao(async()=>{const C=localStorage.getItem(i);if(C!==null){const y=parseInt(C,10);Number.isNaN(y)||Te(h,y,!0)}try{const y=await fetch("/api/system/timezone");if(y.ok){const A=await y.json();Te(c,A.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await B(!0),Te(d,!0),window.addEventListener("resize",de),pe()}),Vr(()=>{v?.destroy(),window.removeEventListener("resize",de),ae&&clearInterval(ae)});let ne=tt(null);kn(()=>{const C=L(D);L(d)&&L(ne)!==null&&L(ne)!==C&&B(!0),Te(ne,C,!0)}),kn(()=>{L(b)!==void 0&&L(P).length>0&&g&&De()}),kn(()=>{L(o),L(u),L(P).length>0&&g&&De()});function q(C){const y=Number(C.target.value);Te(h,y,!0),localStorage.setItem(i,String(y)),pe(),B(!0)}var Ae=tc(),Ie=re(Ae),ge=re(Ie);fn(ge,21,()=>ju,Mn,(C,y)=>{var A=Zu();let U;A.__click=()=>Te(D,L(y).hours,!0);var T=re(A,!0);te(A),bt(()=>{U=Wl(A,1,"range-btn svelte-1e832qd",null,U,{active:L(D)===L(y).hours}),mt(T,L(y).label)}),Ve(C,A)}),te(ge);var ce=xe(ge,2),Ke=re(ce),ze=xe(re(Ke),2);ze.__change=q,fn(ze,21,()=>n,Mn,(C,y)=>{var A=Qu(),U=re(A,!0);te(A);var T={};bt(()=>{mt(U,L(y).label),T!==(T=L(y).value)&&(A.value=(A.__value=L(y).value)??"")}),Ve(C,A)}),te(ze);var ye;Jr(ze),te(Ke);var ot=xe(Ke,2),vt=xe(re(ot),2),lt=re(vt);Hl(2),te(vt),Hl(2),te(ot),te(ce),te(Ie);var _t=xe(Ie,2),Dt=re(_t);{var Lt=C=>{var y=$u();Ve(C,y)};Et(Dt,C=>{L(N)&&C(Lt)})}var Qt=xe(Dt,2);{var $t=C=>{var y=Xu(),A=xe(re(y),2);A.__click=()=>B(!0),te(y),Ve(C,y)},Nt=C=>{var y=Dr(),A=uo(y);{var U=T=>{var w=ec();Ve(T,w)};Et(A,T=>{L(P).length===0&&T(U)},!0)}Ve(C,y)};Et(Qt,C=>{L(z)?C($t):C(Nt,!1)})}te(_t),co(_t,C=>g=C,()=>g),te(Ae),bt(()=>{ye!==(ye=L(h))&&(ze.value=(ze.__value=L(h))??"",Zr(ze,L(h))),Tn(lt,`background: ${(S[l.tiltColor]||"var(--text-secondary)")??""};`)}),Ve(e,Ae),As()}Es(["click","change"]);var nc=We('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),sc=We('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ic=We('<div class="w-1 rounded-sm transition-all"></div>'),oc=We('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),rc=We("<div><!></div>"),ac=We('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),uc=We('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function cc(e,l){Ms(l,!0);let i=Si(l,"expanded",3,!1),n=Si(l,"wide",3,!1),o=tt(!1);kn(()=>{i()&&!L(o)&&Te(o,!0)});let u=tt(!1),c=tt(""),d=tt(null),p=tt(!1);function h(){Te(c,l.tilt.beer_name,!0),Te(u,!0),setTimeout(()=>L(d)?.focus(),0)}async function b(){if(L(p))return;const y=L(c).trim();if(!y||y===l.tilt.beer_name){Te(u,!1);return}Te(p,!0);const A=await Yr(l.tilt.id,y);Te(p,!1),A&&Te(u,!1)}function g(y){y.key==="Enter"?b():y.key==="Escape"&&Te(u,!1)}let v=Zt(Ir);const N={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function z(y){return y.toFixed(3)}function D(y){return Gr(y)}function P(y){return y>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:y>=-60?{bars:3,color:"var(--positive)",label:"Good"}:y>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function Y(y){const A=Math.floor((Date.now()-new Date(y).getTime())/1e3);if(A<10)return"just now";if(A<60)return`${A}s ago`;const U=Math.floor(A/60);if(U<60)return`${U}m ago`;const T=Math.floor(U/60);return T<24?`${T}h ago`:`${Math.floor(T/24)}d ago`}let S=Zt(()=>N[l.tilt.color]||"var(--tilt-black)"),H=Zt(()=>P(l.tilt.rssi)),M=Zt(()=>Y(l.tilt.last_seen));var X=uc();let R;var K=re(X),Q=xe(K,2),ie=re(Q),J=re(ie),k=re(J);{var le=y=>{var A=nc();Br(A),A.__keydown=g,co(A,U=>Te(d,U),()=>L(d)),bt(()=>A.disabled=L(p)),Lr("blur",A,b),Kr(A,()=>L(c),U=>Te(c,U)),Ve(y,A)},W=y=>{var A=sc();A.__click=h;var U=re(A),T=re(U,!0);te(U),Hl(2),te(A),bt(()=>mt(T,l.tilt.beer_name)),Ve(y,A)};Et(k,y=>{L(u)?y(le):y(W,!1)})}var $=xe(k,2),j=re($),oe=xe(j,2),B=re(oe,!0);te(oe),te($),te(J);var De=xe(J,2),de=re(De);fn(de,20,()=>Array(4),Mn,(y,A,U)=>{var T=ic();bt(()=>Tn(T,`
								height: ${8+U*4}px;
								background: ${(U<L(H).bars?L(H).color:"var(--bg-hover)")??""};
								opacity: ${U<L(H).bars?1:.4};
							`)),Ve(y,T)}),te(de);var ae=xe(de,2),pe=re(ae);te(ae),te(De),te(ie);var ne=xe(ie,2),q=re(ne),Ae=re(q),Ie=re(Ae,!0);te(Ae),Hl(2),te(q);var ge=xe(q,2),ce=re(ge),Ke=re(ce,!0),ze=xe(Ke),ye=re(ze,!0);te(ze),te(ce),Hl(2),te(ge),te(ne);var ot=xe(ne,2);{var vt=y=>{var A=oc(),U=xe(re(A),2),T=re(U,!0);te(U);var w=xe(U,4),V=re(w);te(w),te(A),bt((I,Se)=>{mt(T,I),mt(V,`${Se??""}${L(v)??""}`)},[()=>z(l.tilt.sg_raw),()=>D(l.tilt.temp_raw)]),Ve(y,A)};Et(ot,y=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&y(vt)})}var lt=xe(ot,2);{var _t=y=>{var A=rc();let U;var T=re(A);Qr(T,()=>l.tilt.id,w=>{lc(w,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}})}),te(A),bt(()=>U=Wl(A,1,"chart-section svelte-3twv7v",null,U,{hidden:!i()})),Ve(y,A)};Et(lt,y=>{L(o)&&y(_t)})}var Dt=xe(lt,2),Lt=re(Dt),Qt=re(Lt);te(Lt);var $t=xe(Lt,2),Nt=re($t);{var C=y=>{var A=ac();A.__click=function(...w){l.onToggleExpand?.apply(this,w)};var U=re(A);let T;te(A),bt(()=>{bi(A,"aria-label",i()?"Collapse chart":"Expand chart"),T=Wl(U,0,"w-4 h-4 transition-transform",null,T,{"rotate-180":i()})}),Ve(y,A)};Et(Nt,y=>{l.onToggleExpand&&y(C)})}Hl(2),te($t),te(Dt),te(Q),te(X),bt((y,A)=>{R=Wl(X,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,R,{expanded:i(),wide:n()}),Tn(K,`background: ${L(S)??""};`),Tn(j,`background: ${L(S)??""};`),mt(B,l.tilt.color),bi(De,"title",`${L(H).label??""} signal (${l.tilt.rssi??""} dBm)`),mt(pe,`${l.tilt.rssi??""} dBm`),mt(Ie,y),mt(Ke,A),mt(ye,L(v)),mt(Qt,`Updated ${L(M)??""}`)},[()=>z(l.tilt.sg),()=>D(l.tilt.temp)]),Ve(e,X),As()}Es(["keydown","click"]);var fc=We('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),dc=We('<div class="alerts-list svelte-1uha8ag"></div>'),pc=We('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),hc=We('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),mc=We('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),gc=We('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),vc=We('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),_c=We("<div></div>"),wc=We("<!> <!>",1);function Pc(e,l){Ms(l,!0);let i=tt(!1),n=tt(!1);ao(()=>{const D=localStorage.getItem("tiltui_alerts_dismissed"),P=localStorage.getItem("tiltui_alerts_dismissed_time");return D==="true"&&P&&Date.now()-parseInt(P,10)<360*60*1e3&&Te(i,!0),qr(),()=>{jr()}});let o=Zt(()=>Array.from(as.tilts.values())),u=tt(null);function c(D){Te(u,L(u)===D?null:D,!0)}function d(){Te(i,!0),localStorage.setItem("tiltui_alerts_dismissed","true"),localStorage.setItem("tiltui_alerts_dismissed_time",Date.now().toString())}function p(){Te(n,!L(n))}var h=wc();Ur("1uha8ag",D=>{Nr(()=>{Or.title="Dashboard | Tilt UI"})});var b=uo(h);{var g=D=>{var P=hc(),Y=re(P),S=re(Y),H=xe(re(S),4),M=re(H,!0);te(H),te(S);var X=xe(S,2);X.__click=d,te(Y);var R=xe(Y,2);{var K=J=>{var k=dc();fn(k,21,()=>ln.alerts,Mn,(le,W)=>{var $=fc();let j;var oe=re($),B=re(oe);te(oe);var De=xe(oe,2),de=re(De,!0);te(De),te($),bt(()=>{j=Wl($,1,"alert-item svelte-1uha8ag",null,j,{warning:L(W).level==="warning",critical:L(W).level==="critical"}),mt(B,`${L(W).day??""}:`),mt(de,L(W).message)}),Ve(le,$)}),te(k),Ve(J,k)};Et(R,J=>{L(n)||J(K)})}var Q=xe(R,2);{var ie=J=>{var k=pc();k.__click=p;var le=re(k,!0);te(k),bt(()=>mt(le,L(n)?`Show ${ln.alerts.length} alerts`:"Show less")),Ve(J,k)};Et(Q,J=>{ln.alerts.length>3&&J(ie)})}te(P),bt(()=>mt(M,ln.alerts.length)),Ve(D,P)};Et(b,D=>{ln.alerts.length>0&&!L(i)&&D(g)})}var v=xe(b,2);{var N=D=>{var P=vc(),Y=xe(re(P),4),S=re(Y);{var H=K=>{var Q=Cr("Waiting for Tilt hydrometers to broadcast...");Ve(K,Q)},M=K=>{var Q=mc();Ve(K,Q)};Et(S,K=>{as.connected?K(H):K(M,!1)})}te(Y);var X=xe(Y,2);{var R=K=>{var Q=gc();Ve(K,Q)};Et(X,K=>{as.connected&&K(R)})}te(P),Ve(D,P)},z=D=>{var P=_c();let Y;fn(P,21,()=>L(o),S=>S.id,(S,H)=>{{let M=Zt(()=>L(u)===L(H).id),X=Zt(()=>L(o).length===1);cc(S,{get tilt(){return L(H)},get expanded(){return L(M)},get wide(){return L(X)},onToggleExpand:()=>c(L(H).id)})}}),te(P),bt(()=>Y=Wl(P,1,"tilt-grid svelte-1uha8ag",null,Y,{"single-tilt":L(o).length===1})),Ve(D,P)};Et(v,D=>{L(o).length===0?D(N):D(z,!1)})}Ve(e,h),As()}Es(["click"]);export{Pc as component};
