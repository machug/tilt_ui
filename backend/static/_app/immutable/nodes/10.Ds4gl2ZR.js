import{c as le,a as n,f as c,s as d,d as Qe}from"../chunks/BQ88CgEU.js";import{ah as pe,ar as ve,aj as ue,ak as r,al as a,c as e,an as t,as as g,at as We,ai as ie,av as Xe,ap as Ze,aF as et,s as A,ao as re,am as tt}from"../chunks/CGXqq0_G.js";import{i as p}from"../chunks/ziKwUJ4R.js";import{h as at}from"../chunks/BP8qDDK3.js";import{s as st,a as rt}from"../chunks/C-ohbqfQ.js";import{g as Ae}from"../chunks/DAKsLPP8.js";import{p as vt}from"../chunks/BJFDsvbd.js";import{m as lt,n as it}from"../chunks/DLtesNQI.js";import{e as ce,i as _e}from"../chunks/payu-7ZH.js";const ot=!1,Jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:ot},Symbol.toStringTag,{value:"Module"}));var nt=c('<span class="origin svelte-2e1ash"> </span>'),dt=c('<div class="supplier svelte-2e1ash"> </div>'),ct=c('<tr class="svelte-2e1ash"><td class="name svelte-2e1ash"> <!> <!></td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td><td class="svelte-2e1ash"> </td></tr>'),_t=c('<div class="fermentables svelte-2e1ash"><h3 class="svelte-2e1ash">Grain Bill</h3> <table class="svelte-2e1ash"><thead><tr><th class="svelte-2e1ash">Fermentable</th><th class="svelte-2e1ash">Type</th><th class="svelte-2e1ash">Amount</th><th class="svelte-2e1ash">%</th><th class="svelte-2e1ash">Color</th></tr></thead><tbody class="svelte-2e1ash"></tbody><tfoot class="svelte-2e1ash"><tr><td colspan="2" class="svelte-2e1ash"><strong>Total</strong></td><td class="svelte-2e1ash"><strong> </strong></td><td class="svelte-2e1ash">100%</td><td class="svelte-2e1ash">--</td></tr></tfoot></table></div>');function pt(Z,L){pe(L,!0);let V=ie(()=>L.fermentables.reduce((i,u)=>i+(u.amount_kg||0),0));function ee(i){return!i||!e(V)?"--":(i/e(V)*100).toFixed(1)+"%"}function Q(i){return i==null?"--":i.toFixed(2)+" kg"}function v(i){return i==null?"--":i.toFixed(0)+"°L"}var H=le(),M=ve(H);{var O=i=>{var u=_t(),D=r(a(u),2),I=r(a(D));ce(I,21,()=>L.fermentables,_e,(N,F)=>{var _=ct(),m=a(_),R=a(m),h=r(R);{var E=k=>{var w=nt(),B=a(w);t(w),g(()=>d(B,`(${e(F).origin??""})`)),n(k,w)};p(h,k=>{e(F).origin&&k(E)})}var f=r(h,2);{var b=k=>{var w=dt(),B=a(w,!0);t(w),g(()=>d(B,e(F).supplier)),n(k,w)};p(f,k=>{e(F).supplier&&k(b)})}t(m);var x=r(m),K=a(x,!0);t(x);var $=r(x),Y=a($,!0);t($);var C=r($),q=a(C,!0);t(C);var S=r(C),te=a(S,!0);t(S),t(_),g((k,w,B)=>{d(R,`${e(F).name??""} `),d(K,e(F).type||"--"),d(Y,k),d(q,w),d(te,B)},[()=>Q(e(F).amount_kg),()=>ee(e(F).amount_kg),()=>v(e(F).color_lovibond)]),n(N,_)}),t(I);var P=r(I),G=a(P),W=r(a(G)),X=a(W),U=a(X,!0);t(X),t(W),We(2),t(G),t(P),t(D),t(u),g(N=>d(U,N),[()=>Q(e(V))]),n(i,u)};p(M,i=>{L.fermentables.length>0&&i(O)})}n(Z,H),ue()}var ut=c('<div class="hop-type svelte-1iyzc0d"> </div>'),gt=c('<tr class="svelte-1iyzc0d"><td class="hop-name svelte-1iyzc0d"> <!></td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td><td class="svelte-1iyzc0d"> </td></tr>'),yt=c('<div class="hop-group svelte-1iyzc0d"><h4 class="svelte-1iyzc0d"> </h4> <table class="svelte-1iyzc0d"><thead><tr><th class="svelte-1iyzc0d">Hop</th><th class="svelte-1iyzc0d">Amount</th><th class="svelte-1iyzc0d">AA%</th><th class="svelte-1iyzc0d">Time</th><th class="svelte-1iyzc0d">Form</th></tr></thead><tbody class="svelte-1iyzc0d"></tbody></table></div>'),ht=c('<div class="hop-schedule svelte-1iyzc0d"><h3 class="svelte-1iyzc0d">Hop Schedule</h3> <!></div>');function mt(Z,L){pe(L,!0);let V=ie(()=>{const i={};for(const u of L.hops){const D=u.use||"Other";i[D]||(i[D]=[]),i[D].push(u)}for(const[u,D]of Object.entries(i))u==="Boil"&&D.sort((I,P)=>(P.time_min||0)-(I.time_min||0));return i});function ee(i){return i==null?"--":(i*1e3).toFixed(0)+"g"}function Q(i){return i==null?"--":i.toFixed(1)+"%"}function v(i,u){return u==null?"--":i==="Dry Hop"?u===0?"At packaging":`Day ${u}`:`${u} min`}var H=le(),M=ve(H);{var O=i=>{var u=ht(),D=r(a(u),2);ce(D,17,()=>Object.entries(e(V)),_e,(I,P)=>{var G=ie(()=>Xe(e(P),2));let W=()=>e(G)[0],X=()=>e(G)[1];var U=yt(),N=a(U),F=a(N,!0);t(N);var _=r(N,2),m=r(a(_));ce(m,21,X,_e,(R,h)=>{var E=gt(),f=a(E),b=a(f),x=r(b);{var K=B=>{var J=ut(),ae=a(J,!0);t(J),g(()=>d(ae,e(h).type)),n(B,J)};p(x,B=>{e(h).type&&B(K)})}t(f);var $=r(f),Y=a($,!0);t($);var C=r($),q=a(C,!0);t(C);var S=r(C),te=a(S,!0);t(S);var k=r(S),w=a(k,!0);t(k),t(E),g((B,J,ae)=>{d(b,`${e(h).name??""} `),d(Y,B),d(q,J),d(te,ae),d(w,e(h).form||"--")},[()=>ee(e(h).amount_kg),()=>Q(e(h).alpha_percent),()=>v(e(h).use,e(h).time_min)]),n(R,E)}),t(m),t(_),t(U),g(()=>d(F,W())),n(I,U)}),t(u),n(i,u)};p(M,i=>{L.hops.length>0&&i(O)})}n(Z,H),ue()}var ft=c('<div class="loading-state svelte-1r2e3yg"><div class="spinner svelte-1r2e3yg"></div> <p>Loading recipe...</p></div>'),bt=c('<div class="error-state svelte-1r2e3yg"><p class="error-message svelte-1r2e3yg"> </p></div>'),xt=c('<p class="recipe-author svelte-1r2e3yg"> </p>'),kt=c('<p class="recipe-type svelte-1r2e3yg"> </p>'),zt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Original Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Ft=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Final Gravity</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),$t=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">ABV</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),wt=c('<div class="param svelte-1r2e3yg"><span class="param-label svelte-1r2e3yg">Attenuation</span> <span class="param-value svelte-1r2e3yg"> </span></div>'),Bt=c('<p class="yeast-name svelte-1r2e3yg"> </p>'),Dt=c('<p class="yeast-lab svelte-1r2e3yg"> </p>'),At=c('<p class="yeast-temp svelte-1r2e3yg"> </p>'),Ct=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Yeast</h2> <div class="yeast-info svelte-1r2e3yg"><!> <!> <!></div></div>'),Tt=c('<div class="section svelte-1r2e3yg"><!></div>'),jt=c('<div class="section svelte-1r2e3yg"><!></div>'),Lt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">Batch Size</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Rt=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">IBU</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),St=c('<div class="detail svelte-1r2e3yg"><span class="detail-label svelte-1r2e3yg">SRM</span> <span class="detail-value svelte-1r2e3yg"> </span></div>'),Ht=c('<div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Notes</h2> <p class="notes svelte-1r2e3yg"> </p></div>'),Mt=c('<div class="recipe-container svelte-1r2e3yg"><div class="recipe-header svelte-1r2e3yg"><div class="header-left svelte-1r2e3yg"><h1 class="recipe-title svelte-1r2e3yg"> </h1> <!> <!></div> <button type="button" class="delete-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Delete</button></div> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Fermentation Parameters</h2> <div class="param-grid svelte-1r2e3yg"><!> <!> <!> <!></div></div> <!> <!> <!> <div class="section svelte-1r2e3yg"><h2 class="section-title svelte-1r2e3yg">Batch Details</h2> <div class="details-grid svelte-1r2e3yg"><!> <!> <!></div></div> <!> <div class="section svelte-1r2e3yg"><p class="created-date svelte-1r2e3yg"> </p></div> <div class="actions svelte-1r2e3yg"><button type="button" class="brew-btn svelte-1r2e3yg"><svg class="icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Brew This Recipe</button></div></div>'),Ot=c('<div class="modal-overlay svelte-1r2e3yg"><div class="modal svelte-1r2e3yg"><h2 class="modal-title svelte-1r2e3yg">Delete Recipe?</h2> <p class="modal-text svelte-1r2e3yg"> </p> <div class="modal-actions svelte-1r2e3yg"><button type="button" class="modal-btn cancel svelte-1r2e3yg">Cancel</button> <button type="button" class="modal-btn delete svelte-1r2e3yg"> </button></div></div></div>'),It=c('<div class="page-container svelte-1r2e3yg"><div class="back-link svelte-1r2e3yg"><a href="/recipes" class="back-btn svelte-1r2e3yg"><svg class="back-icon svelte-1r2e3yg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <!></div> <!>',1);function Qt(Z,L){pe(L,!0);const V=()=>rt(vt,"$page",ee),[ee,Q]=st();let v=re(null),H=re(!0),M=re(null),O=re(!1),i=re(!1),u=ie(()=>{const _=parseInt(V().params.id||"",10);return isNaN(_)||_<=0?null:_});Ze(async()=>{if(!e(u)){A(M,"Invalid recipe ID"),A(H,!1);return}try{A(v,await lt(e(u)),!0)}catch(_){A(M,_ instanceof Error?_.message:"Failed to load recipe",!0)}finally{A(H,!1)}});async function D(){if(e(v)){A(i,!0);try{await it(e(v).id),Ae("/recipes")}catch(_){A(M,_ instanceof Error?_.message:"Failed to delete recipe",!0),A(i,!1),A(O,!1)}}}function I(){e(v)&&Ae(`/batches/new?recipe_id=${e(v).id}`)}var P=It();at("1r2e3yg",_=>{et(()=>{tt.title=`${(e(v)?.name||"Recipe")??""} | BrewSignal`})});var G=ve(P),W=r(a(G),2);{var X=_=>{var m=ft();n(_,m)},U=_=>{var m=le(),R=ve(m);{var h=f=>{var b=bt(),x=a(b),K=a(x,!0);t(x),t(b),g(()=>d(K,e(M))),n(f,b)},E=f=>{var b=le(),x=ve(b);{var K=$=>{var Y=Mt(),C=a(Y),q=a(C),S=a(q),te=a(S,!0);t(S);var k=r(S,2);{var w=s=>{var l=xt(),o=a(l);t(l),g(()=>d(o,`by ${e(v).author??""}`)),n(s,l)};p(k,s=>{e(v).author&&s(w)})}var B=r(k,2);{var J=s=>{var l=kt(),o=a(l,!0);t(l),g(()=>d(o,e(v).type)),n(s,l)};p(B,s=>{e(v).type&&s(J)})}t(q);var ae=r(q,2);ae.__click=()=>A(O,!0),t(C);var oe=r(C,2),ge=r(a(oe),2),ye=a(ge);{var Ce=s=>{var l=zt(),o=r(a(l),2),y=a(o,!0);t(o),t(l),g(z=>d(y,z),[()=>e(v).og_target.toFixed(3)]),n(s,l)};p(ye,s=>{e(v).og_target&&s(Ce)})}var he=r(ye,2);{var Te=s=>{var l=Ft(),o=r(a(l),2),y=a(o,!0);t(o),t(l),g(z=>d(y,z),[()=>e(v).fg_target.toFixed(3)]),n(s,l)};p(he,s=>{e(v).fg_target&&s(Te)})}var me=r(he,2);{var je=s=>{var l=$t(),o=r(a(l),2),y=a(o);t(o),t(l),g(z=>d(y,`${z??""}%`),[()=>e(v).abv_target.toFixed(1)]),n(s,l)};p(me,s=>{e(v).abv_target&&s(je)})}var Le=r(me,2);{var Re=s=>{var l=wt(),o=r(a(l),2),y=a(o);t(o),t(l),g(z=>d(y,`${z??""}%`),[()=>e(v).yeast_attenuation.toFixed(0)]),n(s,l)};p(Le,s=>{e(v).yeast_attenuation&&s(Re)})}t(ge),t(oe);var fe=r(oe,2);{var Se=s=>{var l=Ct(),o=r(a(l),2),y=a(o);{var z=T=>{var j=Bt(),se=a(j,!0);t(j),g(()=>d(se,e(v).yeast_name)),n(T,j)};p(y,T=>{e(v).yeast_name&&T(z)})}var De=r(y,2);{var Ve=T=>{var j=Dt(),se=a(j,!0);t(j),g(()=>d(se,e(v).yeast_lab)),n(T,j)};p(De,T=>{e(v).yeast_lab&&T(Ve)})}var Ue=r(De,2);{var Ye=T=>{var j=At(),se=a(j);t(j),g((qe,Je)=>d(se,`Temperature: ${qe??""}-${Je??""}°C`),[()=>e(v).yeast_temp_min.toFixed(0),()=>e(v).yeast_temp_max.toFixed(0)]),n(T,j)};p(Ue,T=>{e(v).yeast_temp_min!=null&&e(v).yeast_temp_max!=null&&T(Ye)})}t(o),t(l),n(s,l)};p(fe,s=>{(e(v).yeast_name||e(v).yeast_temp_min||e(v).yeast_temp_max)&&s(Se)})}var be=r(fe,2);{var He=s=>{var l=Tt(),o=a(l);pt(o,{get fermentables(){return e(v).fermentables}}),t(l),n(s,l)};p(be,s=>{e(v).fermentables&&e(v).fermentables.length>0&&s(He)})}var xe=r(be,2);{var Me=s=>{var l=jt(),o=a(l);mt(o,{get hops(){return e(v).hops}}),t(l),n(s,l)};p(xe,s=>{e(v).hops&&e(v).hops.length>0&&s(Me)})}var ne=r(xe,2),ke=r(a(ne),2),ze=a(ke);{var Oe=s=>{var l=Lt(),o=r(a(l),2),y=a(o);t(o),t(l),g(z=>d(y,`${z??""} L`),[()=>e(v).batch_size.toFixed(1)]),n(s,l)};p(ze,s=>{e(v).batch_size&&s(Oe)})}var Fe=r(ze,2);{var Ie=s=>{var l=Rt(),o=r(a(l),2),y=a(o,!0);t(o),t(l),g(z=>d(y,z),[()=>e(v).ibu_target.toFixed(0)]),n(s,l)};p(Fe,s=>{e(v).ibu_target&&s(Ie)})}var Pe=r(Fe,2);{var Ge=s=>{var l=St(),o=r(a(l),2),y=a(o,!0);t(o),t(l),g(z=>d(y,z),[()=>e(v).srm_target.toFixed(1)]),n(s,l)};p(Pe,s=>{e(v).srm_target&&s(Ge)})}t(ke),t(ne);var $e=r(ne,2);{var Ne=s=>{var l=Ht(),o=r(a(l),2),y=a(o,!0);t(o),t(l),g(()=>d(y,e(v).notes)),n(s,l)};p($e,s=>{e(v).notes&&s(Ne)})}var de=r($e,2),we=a(de),Ee=a(we);t(we),t(de);var Be=r(de,2),Ke=a(Be);Ke.__click=I,t(Be),t(Y),g(s=>{d(te,e(v).name),d(Ee,`Created ${s??""}`)},[()=>new Date(e(v).created_at).toLocaleDateString()]),n($,Y)};p(x,$=>{e(v)&&$(K)},!0)}n(f,b)};p(R,f=>{e(M)?f(h):f(E,!1)},!0)}n(_,m)};p(W,_=>{e(H)?_(X):_(U,!1)})}t(G);var N=r(G,2);{var F=_=>{var m=Ot();m.__click=()=>A(O,!1);var R=a(m);R.__click=$=>$.stopPropagation();var h=r(a(R),2),E=a(h);t(h);var f=r(h,2),b=a(f);b.__click=()=>A(O,!1);var x=r(b,2);x.__click=D;var K=a(x,!0);t(x),t(f),t(R),t(m),g(()=>{d(E,`Are you sure you want to delete "${e(v)?.name??""}"? This cannot be undone.`),b.disabled=e(i),x.disabled=e(i),d(K,e(i)?"Deleting...":"Delete Recipe")}),n(_,m)};p(N,_=>{e(O)&&_(F)})}n(Z,P),ue(),Q()}Qe(["click"]);export{Qt as component,Jt as universal};
