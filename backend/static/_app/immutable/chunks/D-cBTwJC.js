import{p as c}from"./DBUEpBwK.js";const i={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:3},n=c({config:i,loaded:!1});async function _(){try{const e=await fetch("/api/config");if(e.ok){const t=await e.json();n.config={...i,...t}}}catch(e){console.error("Failed to load config:",e)}finally{n.loaded=!0}}async function d(e){try{const t=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const s=await t.json();return n.config={...i,...s},{success:!0}}const a=await t.json();return a.detail&&Array.isArray(a.detail)?{success:!1,error:a.detail.map(o=>o.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(t){return console.error("Failed to update config:",t),{success:!1,error:"Network error saving settings"}}}function u(e){return(e-32)*(5/9)}function g(e){return e*(9/5)+32}function h(e,t=n.config.temp_units){return t==="C"?u(e).toFixed(1):e.toFixed(1)}function m(){return n.config.temp_units==="C"?"째C":"째F"}function r(e){return-616.868+1111.14*e-630.272*e**2+135.997*e**3}function l(e){return r(e)}function p(e,t=n.config.sg_units){switch(t){case"plato":return r(e).toFixed(1);case"brix":return l(e).toFixed(1);default:return e.toFixed(3)}}function y(){switch(n.config.sg_units){case"plato":return"째P";case"brix":return"째Bx";default:return"SG"}}export{g as a,y as b,n as c,p as d,h as e,u as f,m as g,_ as l,d as u};
