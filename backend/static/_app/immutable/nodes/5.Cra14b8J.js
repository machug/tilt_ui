import{d as ea,f as p,a as v,s as m,t as hs,b as et}from"../chunks/BHvHOtuG.js";import{ab as sa,ac as r,p as ta,ad as aa,ae as na,af as ia,s as n,V as la,ag as s,ah as a,ai as oa,g as e,aj as t,an as A,al as w,ak as _s}from"../chunks/BeYMcFNd.js";import{e as ra,i as ca}from"../chunks/Cn7aBH5Z.js";import{i as h}from"../chunks/Cd5u1CHp.js";import{c as x,h as va,r as U,s as De,u as fs}from"../chunks/D-gZUYAx.js";import{s as z}from"../chunks/80fypgvT.js";import{b as R}from"../chunks/BperHIsi.js";import{i as da,s as pa,b as ua}from"../chunks/UEX34lHC.js";var ha=p('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),_a=p('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),fa=p('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),ga=p('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),ma=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),ja=p('<p class="config-error svelte-hj1sc2"> </p>'),ba=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ya=p('<option class="svelte-hj1sc2"> </option>'),wa=p('<div class="loading-spinner-small svelte-hj1sc2"></div>'),Sa=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),xa=p("<span> </span>"),ka=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ta=p('<p class="config-error svelte-hj1sc2"> </p>'),Ca=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Fa=p('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Heater Switch Entity</span> <span class="setting-description svelte-hj1sc2">Switch to control fermentation heating</span></div> <input type="text" placeholder="switch.fermenter_heater" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),Aa=p('<div class="status-item override svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Override</span> <span class="status-value svelte-hj1sc2"> </span></div>'),za=p('<div class="control-status svelte-hj1sc2"><div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Heater</span> <span> </span></div> <div class="status-item svelte-hj1sc2"><span class="status-label svelte-hj1sc2">Wort Temp</span> <span class="status-value svelte-hj1sc2"> </span></div> <!></div>'),Oa=p('<button type="button" class="btn-override btn-cancel svelte-hj1sc2">Cancel</button>'),Ha=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),Ea=p('<p class="config-error svelte-hj1sc2"> </p>'),Ia=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Ua=p('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Target Temperature</span> <span class="setting-description svelte-hj1sc2">Desired fermentation temperature (°F)</span></div> <input type="number" min="32" max="100" step="0.5" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Hysteresis</span> <span class="setting-description svelte-hj1sc2">± tolerance before triggering (°F)</span></div> <input type="number" min="0.5" max="10" step="0.5" class="input-field input-number svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Manual Override</span> <span class="setting-description svelte-hj1sc2">Temporarily override automatic control (1 hour)</span></div> <div class="override-buttons svelte-hj1sc2"><button type="button">Force ON</button> <button type="button">Force OFF</button> <!></div></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),Ra=p('<div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Temperature Control</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Temperature Control</span> <span class="setting-description svelte-hj1sc2">Automatically control heater based on wort temp</span></div> <button type="button" aria-label="Toggle temperature control"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div>'),Ma=p('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),Na=p('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),Pa=p('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),Ba=p('<p class="cleanup-message svelte-hj1sc2"> </p>'),Da=p('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),La=et('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),Ja=p('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),Wa=et('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),Ka=p('<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--amber-400)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <!> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>'),Va=p('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, timezone configuration, and power controls</p></div> <!></div>');function sn(st,tt){sa(tt,!0);let J=r(null),ge=r(null),gs=r(ta([])),Z=r(""),ms=r(!0),f=r(null),$=r("C"),me=r(-100),W=r(!1),je=r(5),ee=r(!1),be=r(!1),ye=r(null),we=r(!1),se=r(30),O=r(null),P=r(!1),te=r(""),ae=r(""),Se=r(""),xe=r(""),ke=r(""),le=r(""),Te=r(!1),K=r(null),Ce=r(null),Fe=r(!1),Ae=r(null),ze=r(!1),C=r(null),V=r(!1),Oe=r(68),He=r(1),Ee=r(!1),Ie=r(null),Ue=r(!1),oe=r(!1);async function at(){try{const i=await fetch("/api/system/info");i.ok&&n(J,await i.json(),!0)}catch(i){console.error("Failed to load system info:",i)}}async function js(){try{const i=await fetch("/api/system/storage");i.ok&&n(ge,await i.json(),!0)}catch(i){console.error("Failed to load storage stats:",i)}}async function nt(){try{const[i,y]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(i.ok){const H=await i.json();n(gs,H.timezones||[],!0)}if(y.ok){const H=await y.json();n(Z,H.timezone||"UTC",!0)}}catch(i){console.error("Failed to load timezones:",i)}}function bs(){n($,x.config.temp_units,!0),n(me,x.config.min_rssi,!0),n(W,x.config.smoothing_enabled,!0),n(je,x.config.smoothing_samples,!0),n(ee,x.config.id_by_mac,!0),n(P,x.config.ha_enabled,!0),n(te,x.config.ha_url,!0),n(ae,x.config.ha_token,!0),n(Se,x.config.ha_ambient_temp_entity_id,!0),n(xe,x.config.ha_ambient_humidity_entity_id,!0),n(ke,x.config.ha_weather_entity_id,!0),n(le,x.config.ha_heater_entity_id,!0),n(V,x.config.temp_control_enabled,!0),n(Oe,x.config.temp_target,!0),n(He,x.config.temp_hysteresis,!0)}async function it(){n(be,!0),n(ye,null),n(we,!1);try{const i=await fs({temp_units:e($),min_rssi:e(me),smoothing_enabled:e(W),smoothing_samples:e(je),id_by_mac:e(ee)});i.success?(n(we,!0),setTimeout(()=>n(we,!1),3e3)):n(ye,i.error||"Failed to save settings",!0)}finally{n(be,!1)}}async function lt(){n(Fe,!0),n(Ae,null),n(ze,!1);try{const i=await fs({ha_enabled:e(P),ha_url:e(te),ha_token:e(ae),ha_ambient_temp_entity_id:e(Se),ha_ambient_humidity_entity_id:e(xe),ha_weather_entity_id:e(ke),ha_heater_entity_id:e(le)});i.success?(n(ze,!0),setTimeout(()=>n(ze,!1),3e3),await ws()):n(Ae,i.error||"Failed to save settings",!0)}finally{n(Fe,!1)}}async function Le(){try{const i=await fetch("/api/control/status");i.ok&&n(C,await i.json(),!0)}catch(i){console.error("Failed to load control status:",i)}}async function ot(){n(Ee,!0),n(Ie,null),n(Ue,!1);try{const i=await fs({temp_control_enabled:e(V),temp_target:e(Oe),temp_hysteresis:e(He)});i.success?(n(Ue,!0),setTimeout(()=>n(Ue,!1),3e3),await Le()):n(Ie,i.error||"Failed to save settings",!0)}finally{n(Ee,!1)}}async function Je(i){n(oe,!0);try{(await fetch("/api/control/override",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:i,duration_minutes:60})})).ok&&await Le()}catch(y){console.error("Failed to set override:",y)}finally{n(oe,!1)}}async function rt(i){n(f,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:i})})).ok&&n(Z,i,!0)}catch(y){console.error("Failed to set timezone:",y)}finally{n(f,null)}}async function ct(){n(f,"cleanup-preview");try{const i=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(se),confirm:!1})});i.ok&&n(O,await i.json(),!0)}catch(i){console.error("Failed to preview cleanup:",i)}finally{n(f,null)}}async function vt(){if(!(!e(O)||e(O).readings_to_delete===0)&&confirm(`Delete ${e(O).readings_to_delete.toLocaleString()} readings older than ${e(se)} days?`)){n(f,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(se),confirm:!0})})).ok&&(n(O,null),await js())}catch(i){console.error("Failed to execute cleanup:",i)}finally{n(f,null)}}}async function dt(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){n(f,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Reboot command failed:",i)}finally{n(f,null)}}}async function pt(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){n(f,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Shutdown command failed:",i)}finally{n(f,null)}}}function ut(i){if(!i)return"Unknown";const y=Math.floor(i/86400),H=Math.floor(i%86400/3600),re=Math.floor(i%3600/60),q=[];return y>0&&q.push(`${y}d`),H>0&&q.push(`${H}h`),re>0&&q.push(`${re}m`),q.length>0?q.join(" "):"< 1m"}function ht(i){return!Number.isFinite(i)||i<0?"0 B":i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`}function ys(i){return i.toLocaleString()}async function _t(){n(Te,!0),n(K,null);try{const i=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(te),token:e(ae)})});i.ok?n(K,await i.json(),!0):n(K,{success:!1,message:"Request failed"},!0)}catch{n(K,{success:!1,message:"Network error"},!0)}finally{n(Te,!1)}}async function ws(){try{const i=await fetch("/api/ha/status");i.ok&&n(Ce,await i.json(),!0)}catch(i){console.error("Failed to load HA status:",i)}}aa(async()=>{await Promise.all([at(),js(),nt(),ws(),Le()]),bs(),n(ms,!1)}),na(()=>{x.loaded&&bs()});var We=Va();va("hj1sc2",i=>{la(()=>{oa.title="System | Tilt UI"})});var ft=s(a(We),2);{var gt=i=>{var y=ha();v(i,y)},mt=i=>{var y=Ka(),H=a(y),re=s(a(H),2),q=a(re);{var jt=l=>{var o=_a(),u=a(o),j=s(a(u),2),b=a(j,!0);t(j),t(u);var S=s(u,2),k=s(a(S),2),F=a(k);t(k),t(S);var T=s(S,2),E=s(a(T),2),I=a(E,!0);t(E),t(T);var ne=s(T,2),B=s(a(ne),2),ie=a(B,!0);t(B),t(ne),t(o),w(N=>{m(b,e(J).hostname),m(F,`v${e(J).version??""}`),m(I,N),m(ie,e(J).ip_addresses.length>0?e(J).ip_addresses[0]:"Unknown")},[()=>ut(e(J).uptime_seconds)]),v(l,o)},bt=l=>{var o=fa();v(l,o)};h(q,l=>{e(J)?l(jt):l(bt,!1)})}t(re),t(H);var Ke=s(H,2),Ve=a(Ke),Ss=s(a(Ve),2),qe=a(Ss),xs=s(a(qe),2),Ye=a(xs);let ks;Ye.__click=()=>n($,"C");var Ts=s(Ye,2);let Cs;Ts.__click=()=>n($,"F"),t(xs),t(qe);var Ge=s(qe,2),Fs=s(a(Ge),2),As=a(Fs);U(As),A(2),t(Fs),t(Ge);var Qe=s(Ge,2),Xe=s(a(Qe),2);let zs;Xe.__click=()=>n(W,!e(W)),t(Qe);var Os=s(Qe,2);{var yt=l=>{var o=ga(),u=s(a(o),2),j=a(u);j.value=j.__value=3;var b=s(j);b.value=b.__value=5;var S=s(b);S.value=S.__value=10;var k=s(S);k.value=k.__value=15;var F=s(k);F.value=F.__value=20,t(u),t(o),ua(u,()=>e(je),T=>n(je,T)),v(l,o)};h(Os,l=>{e(W)&&l(yt)})}var Ze=s(Os,2),$e=s(a(Ze),2);let Hs;$e.__click=()=>n(ee,!e(ee)),t(Ze);var Es=s(Ze,2),ce=a(Es);ce.__click=it;var wt=a(ce);{var St=l=>{var o=ma();A(),v(l,o)},xt=l=>{var o=hs("Save Settings");v(l,o)};h(wt,l=>{e(be)?l(St):l(xt,!1)})}t(ce);var Is=s(ce,2);{var kt=l=>{var o=ja(),u=a(o,!0);t(o),w(()=>m(u,e(ye))),v(l,o)};h(Is,l=>{e(ye)&&l(kt)})}var Tt=s(Is,2);{var Ct=l=>{var o=ba();v(l,o)};h(Tt,l=>{e(we)&&l(Ct)})}t(Es),t(Ss),t(Ve);var Us=s(Ve,2),Rs=s(a(Us),2),es=a(Rs),Ms=s(a(es)),Ft=a(Ms,!0);t(Ms),t(es);var Ns=s(es,2),M=a(Ns);M.__change=l=>rt(l.currentTarget.value),ra(M,21,()=>e(gs),ca,(l,o)=>{var u=ya(),j=a(u,!0);t(u);var b={};w(()=>{m(j,e(o)),b!==(b=e(o))&&(u.value=(u.__value=e(o))??"")}),v(l,u)}),t(M);var Ps;da(M);var At=s(M,2);{var zt=l=>{var o=wa();v(l,o)};h(At,l=>{e(f)==="timezone"&&l(zt)})}t(Ns),t(Rs),t(Us),t(Ke);var ss=s(Ke,2),Bs=s(a(ss),2),ts=a(Bs),as=s(a(ts),2);let Ds;as.__click=()=>n(P,!e(P)),t(ts);var Ot=s(ts,2);{var Ht=l=>{var o=Fa(),u=_s(o);{var j=c=>{var g=Sa(),d=s(a(g),2);let _;var X=a(d,!0);t(d),t(g),w(()=>{_=z(d,1,"status-badge svelte-hj1sc2",null,_,{connected:e(Ce).connected}),m(X,e(Ce).connected?"Connected":"Disconnected")}),v(c,g)};h(u,c=>{e(Ce)&&c(j)})}var b=s(u,2),S=s(a(b),2);U(S),t(b);var k=s(b,2),F=s(a(k),2);U(F),t(k);var T=s(k,2),E=s(a(T),2),I=a(E);I.__click=_t;var ne=a(I,!0);t(I);var B=s(I,2);{var ie=c=>{var g=xa();let d;var _=a(g,!0);t(g),w(()=>{d=z(g,1,"test-result svelte-hj1sc2",null,d,{success:e(K).success}),m(_,e(K).message)}),v(c,g)};h(B,c=>{e(K)&&c(ie)})}t(E),t(T);var N=s(T,2),pe=s(a(N),2);U(pe),t(N);var Y=s(N,2),ue=s(a(Y),2);U(ue),t(Y);var D=s(Y,2),he=s(a(D),2);U(he),t(D);var L=s(D,2),_e=s(a(L),2);U(_e),t(L);var Me=s(L,2),G=a(Me);G.__click=lt;var Ne=a(G);{var Q=c=>{var g=ka();A(),v(c,g)},rs=c=>{var g=hs("Save HA Settings");v(c,g)};h(Ne,c=>{e(Fe)?c(Q):c(rs,!1)})}t(G);var Pe=s(G,2);{var cs=c=>{var g=Ta(),d=a(g,!0);t(g),w(()=>m(d,e(Ae))),v(c,g)};h(Pe,c=>{e(Ae)&&c(cs)})}var Be=s(Pe,2);{var vs=c=>{var g=Ca();v(c,g)};h(Be,c=>{e(ze)&&c(vs)})}t(Me),w(()=>{I.disabled=e(Te)||!e(te)||!e(ae),m(ne,e(Te)?"Testing...":"Test"),G.disabled=e(Fe)}),R(S,()=>e(te),c=>n(te,c)),R(F,()=>e(ae),c=>n(ae,c)),R(pe,()=>e(Se),c=>n(Se,c)),R(ue,()=>e(xe),c=>n(xe,c)),R(he,()=>e(ke),c=>n(ke,c)),R(_e,()=>e(le),c=>n(le,c)),v(l,o)};h(Ot,l=>{e(P)&&l(Ht)})}t(Bs),t(ss);var Ls=s(ss,2);{var Et=l=>{var o=Ra(),u=s(a(o),2),j=a(u),b=s(a(j),2);let S;b.__click=()=>n(V,!e(V)),t(j);var k=s(j,2);{var F=T=>{var E=Ua(),I=_s(E);{var ne=d=>{var _=za(),X=a(_),ds=s(a(X),2);let Xs;var Yt=a(ds,!0);t(ds),t(X);var ps=s(X,2),Zs=s(a(ps),2),Gt=a(Zs,!0);t(Zs),t(ps);var Qt=s(ps,2);{var Xt=fe=>{var us=Aa(),$s=s(a(us),2),Zt=a($s,!0);t($s),t(us),w($t=>m(Zt,$t),[()=>e(C).override_state?.toUpperCase()]),v(fe,us)};h(Qt,fe=>{e(C).override_active&&fe(Xt)})}t(_),w(fe=>{Xs=z(ds,1,"status-value svelte-hj1sc2",null,Xs,{"heater-on":e(C).heater_state==="on"}),m(Yt,e(C).heater_state==="on"?"ON":e(C).heater_state==="off"?"OFF":"—"),m(Gt,fe)},[()=>e(C).wort_temp!==null?`${e(C).wort_temp.toFixed(1)}°F`:"—"]),v(d,_)};h(I,d=>{e(C)&&d(ne)})}var B=s(I,2),ie=s(a(B),2);U(ie),t(B);var N=s(B,2),pe=s(a(N),2);U(pe),t(N);var Y=s(N,2),ue=s(a(Y),2),D=a(ue);let he;D.__click=()=>Je("on");var L=s(D,2);let _e;L.__click=()=>Je("off");var Me=s(L,2);{var G=d=>{var _=Oa();_.__click=()=>Je(null),w(()=>_.disabled=e(oe)),v(d,_)};h(Me,d=>{e(C)?.override_active&&d(G)})}t(ue),t(Y);var Ne=s(Y,2),Q=a(Ne);Q.__click=ot;var rs=a(Q);{var Pe=d=>{var _=Ha();A(),v(d,_)},cs=d=>{var _=hs("Save Control Settings");v(d,_)};h(rs,d=>{e(Ee)?d(Pe):d(cs,!1)})}t(Q);var Be=s(Q,2);{var vs=d=>{var _=Ea(),X=a(_,!0);t(_),w(()=>m(X,e(Ie))),v(d,_)};h(Be,d=>{e(Ie)&&d(vs)})}var c=s(Be,2);{var g=d=>{var _=Ia();v(d,_)};h(c,d=>{e(Ue)&&d(g)})}t(Ne),w(()=>{he=z(D,1,"btn-override svelte-hj1sc2",null,he,{active:e(C)?.override_state==="on"}),D.disabled=e(oe),_e=z(L,1,"btn-override svelte-hj1sc2",null,_e,{active:e(C)?.override_state==="off"}),L.disabled=e(oe),Q.disabled=e(Ee)}),R(ie,()=>e(Oe),d=>n(Oe,d)),R(pe,()=>e(He),d=>n(He,d)),v(T,E)};h(k,T=>{e(V)&&T(F)})}t(u),t(o),w(()=>{S=z(b,1,"toggle svelte-hj1sc2",null,S,{active:e(V)}),De(b,"aria-pressed",e(V))}),v(l,o)};h(Ls,l=>{e(P)&&e(le)&&l(Et)})}var ns=s(Ls,2),Js=s(a(ns),2),Ws=a(Js),is=a(Ws),It=a(is);{var Ut=l=>{var o=Ma(),u=_s(o),j=a(u),b=a(j,!0);t(j),A(2),t(u);var S=s(u,2),k=a(S),F=a(k,!0);t(k),A(2),t(S),w((T,E)=>{m(b,T),m(F,E)},[()=>ys(e(ge).total_readings),()=>ht(e(ge).estimated_size_bytes)]),v(l,o)},Rt=l=>{var o=Na();v(l,o)};h(It,l=>{e(ge)?l(Ut):l(Rt,!1)})}t(is);var Ks=s(is,2),ls=s(a(Ks),2),os=a(ls),Vs=s(a(os),2);U(Vs),A(2),t(os);var qs=s(os,2),ve=a(qs);ve.__click=ct;var Mt=a(ve,!0);t(ve);var Nt=s(ve,2);{var Pt=l=>{var o=Pa();o.__click=vt;var u=a(o,!0);t(o),w(j=>{o.disabled=e(f)!==null,m(u,j)},[()=>e(f)==="cleanup"?"Deleting...":`Delete ${ys(e(O).readings_to_delete)} readings`]),v(l,o)};h(Nt,l=>{e(O)&&e(O).readings_to_delete>0&&l(Pt)})}t(qs),t(ls);var Bt=s(ls,2);{var Dt=l=>{var o=Ba(),u=a(o);t(o),w(()=>m(u,`No readings older than ${e(se)??""} days found.`)),v(l,o)};h(Bt,l=>{e(O)&&e(O).readings_to_delete===0&&l(Dt)})}t(Ks),t(Ws),t(Js),t(ns);var Ys=s(ns,2),Gs=s(a(Ys),2),Qs=s(a(Gs),2),de=a(Qs);de.__click=dt;var Lt=a(de);{var Jt=l=>{var o=Da();A(),v(l,o)},Wt=l=>{var o=La();A(),v(l,o)};h(Lt,l=>{e(f)==="reboot"?l(Jt):l(Wt,!1)})}t(de);var Re=s(de,2);Re.__click=pt;var Kt=a(Re);{var Vt=l=>{var o=Ja();A(),v(l,o)},qt=l=>{var o=Wa();A(),v(l,o)};h(Kt,l=>{e(f)==="shutdown"?l(Vt):l(qt,!1)})}t(Re),t(Qs),t(Gs),t(Ys),t(y),w(()=>{ks=z(Ye,1,"unit-btn svelte-hj1sc2",null,ks,{active:e($)==="C"}),Cs=z(Ts,1,"unit-btn svelte-hj1sc2",null,Cs,{active:e($)==="F"}),zs=z(Xe,1,"toggle svelte-hj1sc2",null,zs,{active:e(W)}),De(Xe,"aria-pressed",e(W)),Hs=z($e,1,"toggle svelte-hj1sc2",null,Hs,{active:e(ee)}),De($e,"aria-pressed",e(ee)),ce.disabled=e(be),m(Ft,e(Z)),M.disabled=e(f)==="timezone",Ps!==(Ps=e(Z))&&(M.value=(M.__value=e(Z))??"",pa(M,e(Z))),Ds=z(as,1,"toggle svelte-hj1sc2",null,Ds,{active:e(P)}),De(as,"aria-pressed",e(P)),ve.disabled=e(f)!==null,m(Mt,e(f)==="cleanup-preview"?"Checking...":"Preview"),de.disabled=e(f)!==null,Re.disabled=e(f)!==null}),R(As,()=>e(me),l=>n(me,l)),R(Vs,()=>e(se),l=>n(se,l)),v(i,y)};h(ft,i=>{e(ms)?i(gt):i(mt,!1)})}t(We),v(st,We),ia()}ea(["click","change"]);export{sn as component};
