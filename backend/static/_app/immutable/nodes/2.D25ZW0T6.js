import{d as io,f as qe,s as wt,a as Ve,c as ds,e as Ar,t as Dr}from"../chunks/BHvHOtuG.js";import{ab as Ts,ac as At,p as wi,ad as oo,s as Ue,aD as Lr,ae as is,g as q,am as Zt,ah as fe,aj as re,al as Kt,ag as Fe,an as il,af as Ms,ak as kn,V as Cr,ai as Pr}from"../chunks/BeYMcFNd.js";import{e as Es,i as ro}from"../chunks/Cn7aBH5Z.js";import{i as _t}from"../chunks/Cd5u1CHp.js";import{c as xn,f as Rr,g as ao,b as Fr,r as zr,s as Vr,h as Nr}from"../chunks/D-gZUYAx.js";import{u as Hr,c as Or,d as Wr,t as jt}from"../chunks/fLeet4l0.js";import{s as hs}from"../chunks/80fypgvT.js";import{s as Sn}from"../chunks/CoDAZAoR.js";import{b as Gr}from"../chunks/BperHIsi.js";import{b as uo,p as Br}from"../chunks/UOvl9E0t.js";const Ir=!0,Ke="u-",Ur="uplot",Yr=Ke+"hz",jr=Ke+"vt",qr=Ke+"title",Kr=Ke+"wrap",Jr=Ke+"under",Zr=Ke+"over",Qr=Ke+"axis",vl=Ke+"off",$r=Ke+"select",Xr=Ke+"cursor-x",ea=Ke+"cursor-y",ta=Ke+"cursor-pt",la=Ke+"legend",na=Ke+"live",sa=Ke+"inline",ia=Ke+"series",oa=Ke+"marker",_i=Ke+"label",ra=Ke+"value",ln="width",nn="height",en="top",bi="bottom",Nl="left",os="right",As="#000",xi=As+"0",rs="mousemove",Si="mousedown",as="mouseup",yi="mouseenter",ki="mouseleave",Ti="dblclick",aa="resize",ua="scroll",Mi="change",Tn="dppxchange",Ds="--",Ul=typeof window<"u",ms=Ul?document:null,Ol=Ul?window:null,fa=Ul?navigator:null;let xe,wn;function gs(){let e=devicePixelRatio;xe!=e&&(xe=e,wn&&ws(Mi,wn,gs),wn=matchMedia(`(min-resolution: ${xe-.001}dppx) and (max-resolution: ${xe+.001}dppx)`),wl(Mi,wn,gs),Ol.dispatchEvent(new CustomEvent(Tn)))}function vt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function vs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Pe(e,l,i){e.style[l]=i+"px"}function zt(e,l,i,n){let o=ms.createElement(e);return l!=null&&vt(o,l),i?.insertBefore(o,n),o}function Et(e,l){return zt("div",e,l)}const Ei=new WeakMap;function qt(e,l,i,n,o){let f="translate("+l+"px,"+i+"px)",u=Ei.get(e);f!=u&&(e.style.transform=f,Ei.set(e,f),l<0||i<0||l>n||i>o?vt(e,vl):vs(e,vl))}const Ai=new WeakMap;function Di(e,l,i){let n=l+i,o=Ai.get(e);n!=o&&(Ai.set(e,n),e.style.background=l,e.style.borderColor=i)}const Li=new WeakMap;function Ci(e,l,i,n){let o=l+""+i,f=Li.get(e);o!=f&&(Li.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ls={passive:!0},ca={...Ls,capture:!0};function wl(e,l,i,n){l.addEventListener(e,i,n?ca:Ls)}function ws(e,l,i,n){l.removeEventListener(e,i,Ls)}Ul&&gs();function Vt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let f=n<=2147483647;for(;n-i>1;)o=f?i+n>>1:bt((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function fo(e){return(i,n,o)=>{let f=-1,u=-1;for(let p=n;p<=o;p++)if(e(i[p])){f=p;break}for(let p=o;p>=n;p--)if(e(i[p])){u=p;break}return[f,u]}}const co=e=>e!=null,po=e=>e!=null&&e>0,An=fo(co),pa=fo(po);function da(e,l,i,n=0,o=!1){let f=o?pa:An,u=o?po:co;[l,i]=f(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let m=l;m<=i;m++){let _=e[m];u(_)&&(_<p?p=_:_>d&&(d=_))}return[p??Ee,d??-Ee]}function Dn(e,l,i,n){let o=Fi(e),f=Fi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Qt:ho,p=o==1?bt:Dt,d=f==1?Dt:bt,m=p(u(Ye(e))),_=d(u(Ye(l))),g=Wl(i,m),v=Wl(i,_);return i==10&&(m<0&&(g=Ae(g,-m)),_<0&&(v=Ae(v,-_))),n||i==2?(e=g*o,l=v*f):(e=wo(e,g),l=Ln(l,v)),[e,l]}function Cs(e,l,i,n){let o=Dn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Ps=.1,Pi={mode:3,pad:Ps},on={pad:0,soft:null,mode:0},ha={min:on,max:on};function Mn(e,l,i,n){return Cn(i)?Ri(e,l,i):(on.pad=i,on.soft=n?0:null,on.mode=n?3:0,Ri(e,l,ha))}function _e(e,l){return e??l}function ma(e,l,i){for(l=_e(l,0),i=_e(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ri(e,l,i){let n=i.min,o=i.max,f=_e(n.pad,0),u=_e(o.pad,0),p=_e(n.hard,-Ee),d=_e(o.hard,Ee),m=_e(n.soft,Ee),_=_e(o.soft,-Ee),g=_e(n.mode,0),v=_e(o.mode,0),C=l-e,A=Qt(C),F=at(Ye(e),Ye(l)),z=Qt(F),B=Ye(z-A);(C<1e-24||B>10)&&(C=0,(e==0||l==0)&&(C=1e-24,g==2&&m!=Ee&&(f=0),v==2&&_!=-Ee&&(u=0)));let b=C||F||1e3,D=Qt(b),T=Wl(10,bt(D)),te=b*(C==0?e==0?.1:1:f),M=Ae(wo(e-te,T/10),24),K=e>=m&&(g==1||g==3&&M<=m||g==2&&M>=m)?m:Ee,Y=at(p,M<K&&e>=K?K:Nt(K,M)),ne=b*(C==0?l==0?.1:1:u),j=Ae(Ln(l+ne,T/10),24),k=l<=_&&(v==1||v==3&&j>=_||v==2&&j<=_)?_:-Ee,ee=Nt(d,j>k&&l<=k?k:at(k,j));return Y==ee&&Y==0&&(ee=100),[Y,ee]}const ga=new Intl.NumberFormat(Ul?fa.language:"en-US"),Rs=e=>ga.format(e),xt=Math,yn=xt.PI,Ye=xt.abs,bt=xt.floor,Ie=xt.round,Dt=xt.ceil,Nt=xt.min,at=xt.max,Wl=xt.pow,Fi=xt.sign,Qt=xt.log10,ho=xt.log2,va=(e,l=1)=>xt.sinh(e)*l,us=(e,l=1)=>xt.asinh(e/l),Ee=1/0;function zi(e){return(Qt((e^e>>31)-(e>>31))|0)+1}function _s(e,l,i){return Nt(at(e,l),i)}function mo(e){return typeof e=="function"}function ge(e){return mo(e)?e:()=>e}const wa=()=>{},go=e=>e,vo=(e,l)=>l,_a=e=>null,Vi=e=>!0,Ni=(e,l)=>e==l,ba=/\.\d*?(?=9{6,}|0{6,})/gm,_l=e=>{if(bo(e)||ol.has(e))return e;const l=`${e}`,i=l.match(ba);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,f]=l.split("e");return+`${_l(o)}e${f}`}return Ae(e,n)};function ml(e,l){return _l(Ae(_l(e/l))*l)}function Ln(e,l){return _l(Dt(_l(e/l))*l)}function wo(e,l){return _l(bt(_l(e/l))*l)}function Ae(e,l=0){if(bo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Ie(n)/i}const ol=new Map;function _o(e){return((""+e).split(".")[1]||"").length}function an(e,l,i,n){let o=[],f=n.map(_o);for(let u=l;u<i;u++){let p=Ye(u),d=Ae(Wl(e,u),p);for(let m=0;m<n.length;m++){let _=e==10?+`${n[m]}e${u}`:n[m]*d,g=(u>=0?0:p)+(u>=f[m]?0:f[m]),v=e==10?_:Ae(_,g);o.push(v),ol.set(v,g)}}return o}const rn={},Fs=[],Gl=[null,null],sl=Array.isArray,bo=Number.isInteger,xa=e=>e===void 0;function Hi(e){return typeof e=="string"}function Cn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Sa(e){return e!=null&&typeof e=="object"}const ya=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Bl(e,l=Cn){let i;if(sl(e)){let n=e.find(o=>o!=null);if(sl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof ya)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Bl(e[n],l))}else i=e;return i}function We(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(Cn(e[o])?We(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const ka=0,Ta=1,Ma=2;function Ea(e,l,i){for(let n=0,o,f=-1;n<l.length;n++){let u=l[n];if(u>f){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[f=o++]=null}}}function Aa(e,l){if(Ca(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Pa(u[0])||(u=La(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],m=d.length;for(let _=0;_<m;_++)i.add(d[_])}let n=[Array.from(i).sort((u,p)=>u-p)],o=n[0].length,f=new Map;for(let u=0;u<o;u++)f.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let m=1;m<p.length;m++){let _=p[m],g=Array(o).fill(void 0),v=l?l[u][m]:Ta,C=[];for(let A=0;A<_.length;A++){let F=_[A],z=f.get(d[A]);F===null?v!=ka&&(g[z]=F,v==Ma&&C.push(z)):g[z]=F}Ea(g,C,o),n.push(g)}}return n}const Da=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function La(e){let l=e[0],i=l.length,n=Array(i);for(let f=0;f<n.length;f++)n[f]=f;n.sort((f,u)=>l[f]-l[u]);let o=[];for(let f=0;f<e.length;f++){let u=e[f],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];o.push(p)}return o}function Ca(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let f=0;f<i;f++)if(o[f]!=l[f])return!1}}return!0}function Pa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const f=at(1,bt((o-n+1)/l));for(let u=e[n],p=n+f;p<=o;p+=f){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const So=["January","February","March","April","May","June","July","August","September","October","November","December"],yo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ko(e){return e.slice(0,3)}const Ra=yo.map(ko),Fa=So.map(ko),za={MMMM:So,MMM:Fa,WWWW:yo,WWW:Ra};function tn(e){return(e<10?"0":"")+e}function Va(e){return(e<10?"00":e<100?"0":"")+e}const Na={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>tn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>tn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>tn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>tn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>tn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Va(e.getMilliseconds())};function zs(e,l){l=l||za;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Na[o[1]]:o[0]);return f=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](f,l);return u}}const Ha=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Oa(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ha?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const To=e=>e%1==0,En=[1,2,2.5,5],Wa=an(10,-32,0,En),Mo=an(10,0,32,En),Ga=Mo.filter(To),gl=Wa.concat(Mo),Vs=`
`,Eo="{YYYY}",Oi=Vs+Eo,Ao="{M}/{D}",sn=Vs+Ao,_n=sn+"/{YY}",Do="{aa}",Ba="{h}:{mm}",Hl=Ba+Do,Wi=Vs+Hl,Gi=":{ss}",ke=null;function Lo(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,f=o*30,u=o*365,d=(e==1?an(10,0,3,En).filter(To):an(10,-3,0,En)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,f,f*2,f*3,f*4,f*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Eo,ke,ke,ke,ke,ke,ke,1],[o*28,"{MMM}",Oi,ke,ke,ke,ke,ke,1],[o,Ao,Oi,ke,ke,ke,ke,ke,1],[n,"{h}"+Do,_n,ke,sn,ke,ke,ke,1],[i,Hl,_n,ke,sn,ke,ke,ke,1],[l,Gi,_n+" "+Hl,ke,sn+" "+Hl,ke,Wi,ke,1],[e,Gi+".{fff}",_n+" "+Hl,ke,sn+" "+Hl,ke,Wi,ke,1]];function _(g){return(v,C,A,F,z,B)=>{let b=[],D=z>=u,T=z>=f&&z<u,te=g(A),M=Ae(te*e,3),K=fs(te.getFullYear(),D?0:te.getMonth(),T||D?1:te.getDate()),Y=Ae(K*e,3);if(T||D){let ne=T?z/f:0,j=D?z/u:0,k=M==Y?M:Ae(fs(K.getFullYear()+j,K.getMonth()+ne,1)*e,3),ee=new Date(Ie(k/e)),V=ee.getFullYear(),J=ee.getMonth();for(let W=0;k<=F;W++){let ue=fs(V+j*W,J+ne*W,1),O=ue-g(Ae(ue*e,3));k=Ae((+ue+O)*e,3),k<=F&&b.push(k)}}else{let ne=z>=o?o:z,j=bt(A)-bt(M),k=Y+j+Ln(M-Y,ne);b.push(k);let ee=g(k),V=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,J=z/n,W=v.axes[C]._space,ue=B/W;for(;k=Ae(k+z,e==1?0:3),!(k>F);)if(J>1){let O=bt(Ae(V+J,6))%24,de=g(k).getHours()-O;de>1&&(de=-1),k-=de*n,V=(V+J)%24;let ve=b[b.length-1];Ae((k-ve)/z,3)*ue>=.7&&b.push(k)}else b.push(k)}return b}}return[d,m,_]}const[Ia,Ua,Ya]=Lo(1),[ja,qa,Ka]=Lo(.001);an(2,-53,53,[1]);function Bi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Ii(e,l){return(i,n,o,f,u)=>{let p=l.find(A=>u>=A[0])||l[l.length-1],d,m,_,g,v,C;return n.map(A=>{let F=e(A),z=F.getFullYear(),B=F.getMonth(),b=F.getDate(),D=F.getHours(),T=F.getMinutes(),te=F.getSeconds(),M=z!=d&&p[2]||B!=m&&p[3]||b!=_&&p[4]||D!=g&&p[5]||T!=v&&p[6]||te!=C&&p[7]||p[1];return d=z,m=B,_=b,g=D,v=T,C=te,M(F)})}}function Ja(e,l){let i=zs(l);return(n,o,f,u,p)=>o.map(d=>i(e(d)))}function fs(e,l,i){return new Date(e,l,i)}function Ui(e,l){return l(e)}const Za="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Yi(e,l){return(i,n,o,f)=>f==null?Ds:l(e(n))}function Qa(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function $a(e,l){return e.series[l].fill(e,l)}const Xa={show:!0,live:!0,isolate:!1,mount:wa,markers:{show:!0,width:2,stroke:Qa,fill:$a,dash:"solid"},idx:null,idxs:null,values:[]};function eu(e,l){let i=e.cursor.points,n=Et(),o=i.size(e,l);Pe(n,ln,o),Pe(n,nn,o);let f=o/-2;Pe(n,"marginLeft",f),Pe(n,"marginTop",f);let u=i.width(e,l,o);return u&&Pe(n,"borderWidth",u),n}function tu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function lu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function nu(e,l){return e.series[l].points.size}const cs=[0,0];function su(e,l,i){return cs[0]=l,cs[1]=i,cs}function bn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ps(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const iu={show:!0,x:!0,y:!0,lock:!1,move:su,points:{one:!1,show:eu,size:nu,width:0,stroke:lu,fill:tu},bind:{mousedown:bn,mouseup:bn,click:bn,dblclick:bn,mousemove:ps,mouseleave:ps,mouseenter:ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Co={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ns=We({},Co,{filter:vo}),Po=We({},Ns,{size:10}),Ro=We({},Co,{show:!1}),Hs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Fo="bold "+Hs,zo=1.5,ji={show:!0,scale:"x",stroke:As,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:2,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0},ou="Value",ru="Time",qi={show:!0,scale:"x",auto:!1,sorted:1,min:Ee,max:-Ee,idxs:[]};function au(e,l,i,n,o){return l.map(f=>f==null?"":Rs(f))}function uu(e,l,i,n,o,f,u){let p=[],d=ol.get(o)||0;i=u?i:Ae(Ln(i,o),d);for(let m=i;m<=n;m=Ae(m+o,d))p.push(Object.is(m,-0)?0:m);return p}function bs(e,l,i,n,o,f,u){const p=[],d=e.scales[e.axes[l].scale].log,m=d==10?Qt:ho,_=bt(m(i));o=Wl(d,_),d==10&&(o=gl[Vt(o,gl)]);let g=i,v=o*d;d==10&&(v=gl[Vt(v,gl)]);do p.push(g),g=g+o,d==10&&!ol.has(g)&&(g=Ae(g,ol.get(o))),g>=v&&(o=g,v=o*d,d==10&&(v=gl[Vt(v,gl)]));while(g<=n);return p}function fu(e,l,i,n,o,f,u){let d=e.scales[e.axes[l].scale].asinh,m=n>d?bs(e,l,at(d,i),n,o):[d],_=n>=0&&i<=0?[0]:[];return(i<-d?bs(e,l,at(d,-n),-i,o):[d]).reverse().map(v=>-v).concat(_,m)}const Vo=/./,cu=/[12357]/,pu=/[125]/,Ki=/1/,xs=(e,l,i,n)=>e.map((o,f)=>l==4&&o==0||f%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function du(e,l,i,n,o){let f=e.axes[i],u=f.scale,p=e.scales[u],d=e.valToPos,m=f._space,_=d(10,u),g=d(9,u)-_>=m?Vo:d(7,u)-_>=m?cu:d(5,u)-_>=m?pu:Ki;if(g==Ki){let v=Ye(d(1,u)-_);if(v<m)return xs(l.slice().reverse(),p.distr,g,Dt(m/v)).reverse()}return xs(l,p.distr,g,1)}function hu(e,l,i,n,o){let f=e.axes[i],u=f.scale,p=f._space,d=e.valToPos,m=Ye(d(1,u)-d(2,u));return m<p?xs(l.slice().reverse(),3,Vo,Dt(p/m)).reverse():l}function mu(e,l,i,n){return n==null?Ds:l==null?"":Rs(l)}const Ji={show:!0,scale:"y",stroke:As,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:3,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0};function gu(e,l){let i=3+(e||1)*2;return Ae(i*l,3)}function vu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],f=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),p=Ye(u-f),d=e.series[l],m=p/(d.points.space*xe);return n[1]-n[0]<=m}const Zi={scale:null,auto:!0,sorted:0,min:Ee,max:-Ee},No=(e,l,i,n,o)=>o,Qi={show:!0,auto:!0,sorted:0,gaps:No,alpha:1,facets:[We({},Zi,{scale:"x"}),We({},Zi,{scale:"y"})]},$i={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:No,alpha:1,points:{show:vu,filter:null},values:null,min:Ee,max:-Ee,idxs:[],path:null,clip:null};function wu(e,l,i,n,o){return i/10}const Ho={time:Ir,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},_u=We({},Ho,{time:!1,ori:1}),Xi={};function Oo(e,l){let i=Xi[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,f,u,p,d,m){for(let _=0;_<i.plots.length;_++)i.plots[_]!=o&&i.plots[_].pub(n,o,f,u,p,d,m)}},e!=null&&(Xi[e]=i)),i}const Il=1,Ss=2;function bl(e,l,i){const n=e.mode,o=e.series[l],f=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=f[0],m=n==2?f[1]:f[l],_=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=p.left,C=p.top,A=p.width,F=p.height,z=e.valToPosH,B=e.valToPosV;return _.ori==0?i(o,d,m,_,g,z,B,v,C,A,F,Rn,Yl,zn,Go,Io):i(o,d,m,_,g,B,z,C,v,F,A,Fn,jl,Gs,Bo,Uo)}function Os(e,l){let i=0,n=0,o=_e(e.bands,Fs);for(let f=0;f<o.length;f++){let u=o[f];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function bu(e,l,i,n,o){let f=e.mode,u=e.series[l],p=f==2?u.facets[1].scale:u.scale,d=e.scales[p];return o==-1?d.min:o==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function $t(e,l,i,n,o,f){return bl(e,l,(u,p,d,m,_,g,v,C,A,F,z)=>{let B=u.pxRound;const b=m.dir*(m.ori==0?1:-1),D=m.ori==0?Yl:jl;let T,te;b==1?(T=i,te=n):(T=n,te=i);let M=B(g(p[T],m,F,C)),K=B(v(d[T],_,z,A)),Y=B(g(p[te],m,F,C)),ne=B(v(f==1?_.max:_.min,_,z,A)),j=new Path2D(o);return D(j,Y,ne),D(j,M,ne),D(j,M,K),j})}function Pn(e,l,i,n,o,f){let u=null;if(e.length>0){u=new Path2D;const p=l==0?zn:Gs;let d=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let C=v[0]-d;C>0&&p(u,d,n,C,n+f),d=v[1]}}let m=i+o-d,_=10;m>0&&p(u,d,n-_/2,m,n+f+_)}return u}function xu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Ws(e,l,i,n,o,f,u){let p=[],d=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,v=m;if(o==1)for(;++m<=n&&l[m]===null;)v=m;else for(;--m>=i&&l[m]===null;)v=m;let C=f(e[g]),A=v==g?C:f(e[v]),F=g-o;C=u<=0&&F>=0&&F<d?f(e[F]):C;let B=v+o;A=u>=0&&B>=0&&B<d?f(e[B]):A,A>=C&&p.push([C,A])}return p}function eo(e){return e==0?go:e==1?Ie:l=>ml(l,e)}function Wo(e){let l=e==0?Rn:Fn,i=e==0?(o,f,u,p,d,m)=>{o.arcTo(f,u,p,d,m)}:(o,f,u,p,d,m)=>{o.arcTo(u,f,d,p,m)},n=e==0?(o,f,u,p,d)=>{o.rect(f,u,p,d)}:(o,f,u,p,d)=>{o.rect(u,f,d,p)};return(o,f,u,p,d,m=0,_=0)=>{m==0&&_==0?n(o,f,u,p,d):(m=Nt(m,p/2,d/2),_=Nt(_,p/2,d/2),l(o,f+m,u),i(o,f+p,u,f+p,u+d,m),i(o,f+p,u+d,f,u+d,_),i(o,f,u+d,f,u,_),i(o,f,u,f+p,u,m),o.closePath())}}const Rn=(e,l,i)=>{e.moveTo(l,i)},Fn=(e,l,i)=>{e.moveTo(i,l)},Yl=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},zn=Wo(0),Gs=Wo(1),Go=(e,l,i,n,o,f)=>{e.arc(l,i,n,o,f)},Bo=(e,l,i,n,o,f)=>{e.arc(i,l,n,o,f)},Io=(e,l,i,n,o,f,u)=>{e.bezierCurveTo(l,i,n,o,f,u)},Uo=(e,l,i,n,o,f,u)=>{e.bezierCurveTo(i,l,o,n,u,f)};function Yo(e){return(l,i,n,o,f)=>bl(l,i,(u,p,d,m,_,g,v,C,A,F,z)=>{let{pxRound:B,points:b}=u,D,T;m.ori==0?(D=Rn,T=Go):(D=Fn,T=Bo);const te=Ae(b.width*xe,3);let M=(b.size-b.width)/2*xe,K=Ae(M*2,3),Y=new Path2D,ne=new Path2D,{left:j,top:k,width:ee,height:V}=l.bbox;zn(ne,j-K,k-K,ee+K*2,V+K*2);const J=W=>{if(d[W]!=null){let ue=B(g(p[W],m,F,C)),O=B(v(d[W],_,z,A));D(Y,ue+M,O),T(Y,ue,O,M,0,yn*2)}};if(f)f.forEach(J);else for(let W=n;W<=o;W++)J(W);return{stroke:te>0?Y:null,fill:Y,clip:ne,flags:Il|Ss}})}function jo(e){return(l,i,n,o,f,u)=>{n!=o&&(f!=n&&u!=n&&e(l,i,n),f!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const Su=jo(Yl),yu=jo(jl);function qo(e){const l=_e(e?.alignGaps,0);return(i,n,o,f)=>bl(i,n,(u,p,d,m,_,g,v,C,A,F,z)=>{[o,f]=An(d,o,f);let B=u.pxRound,b=V=>B(g(V,m,F,C)),D=V=>B(v(V,_,z,A)),T,te;m.ori==0?(T=Yl,te=Su):(T=jl,te=yu);const M=m.dir*(m.ori==0?1:-1),K={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},Y=K.stroke;let ne=!1;if(f-o>=F*4){let V=x=>i.posToVal(x,m.key,!0),J=null,W=null,ue,O,Ge,Se=b(p[M==1?o:f]),de=b(p[o]),ve=b(p[f]),ie=V(M==1?de+1:ve-1);for(let x=M==1?o:f;x>=o&&x<=f;x+=M){let Z=p[x],$=(M==1?Z<ie:Z>ie)?Se:b(Z),G=d[x];$==Se?G!=null?(O=G,J==null?(T(Y,$,D(O)),ue=J=W=O):O<J?J=O:O>W&&(W=O)):G===null&&(ne=!0):(J!=null&&te(Y,Se,D(J),D(W),D(ue),D(O)),G!=null?(O=G,T(Y,$,D(O)),J=W=ue=O):(J=W=null,G===null&&(ne=!0)),Se=$,ie=V(Se+M))}J!=null&&J!=W&&Ge!=Se&&te(Y,Se,D(J),D(W),D(ue),D(O))}else for(let V=M==1?o:f;V>=o&&V<=f;V+=M){let J=d[V];J===null?ne=!0:J!=null&&T(Y,b(p[V]),D(J))}let[k,ee]=Os(i,n);if(u.fill!=null||k!=0){let V=K.fill=new Path2D(Y),J=u.fillTo(i,n,u.min,u.max,k),W=D(J),ue=b(p[o]),O=b(p[f]);M==-1&&([O,ue]=[ue,O]),T(V,O,W),T(V,ue,W)}if(!u.spanGaps){let V=[];ne&&V.push(...Ws(p,d,o,f,M,b,l)),K.gaps=V=u.gaps(i,n,o,f,V),K.clip=Pn(V,m.ori,C,A,F,z)}return ee!=0&&(K.band=ee==2?[$t(i,n,o,f,Y,-1),$t(i,n,o,f,Y,1)]:$t(i,n,o,f,Y,ee)),K})}function ku(e){const l=_e(e.align,1),i=_e(e.ascDesc,!1),n=_e(e.alignGaps,0),o=_e(e.extend,!1);return(f,u,p,d)=>bl(f,u,(m,_,g,v,C,A,F,z,B,b,D)=>{[p,d]=An(g,p,d);let T=m.pxRound,{left:te,width:M}=f.bbox,K=de=>T(A(de,v,b,z)),Y=de=>T(F(de,C,D,B)),ne=v.ori==0?Yl:jl;const j={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},k=j.stroke,ee=v.dir*(v.ori==0?1:-1);let V=Y(g[ee==1?p:d]),J=K(_[ee==1?p:d]),W=J,ue=J;o&&l==-1&&(ue=te,ne(k,ue,V)),ne(k,J,V);for(let de=ee==1?p:d;de>=p&&de<=d;de+=ee){let ve=g[de];if(ve==null)continue;let ie=K(_[de]),x=Y(ve);l==1?ne(k,ie,V):ne(k,W,x),ne(k,ie,x),V=x,W=ie}let O=W;o&&l==1&&(O=te+M,ne(k,O,V));let[Ge,Se]=Os(f,u);if(m.fill!=null||Ge!=0){let de=j.fill=new Path2D(k),ve=m.fillTo(f,u,m.min,m.max,Ge),ie=Y(ve);ne(de,O,ie),ne(de,ue,ie)}if(!m.spanGaps){let de=[];de.push(...Ws(_,g,p,d,ee,K,n));let ve=m.width*xe/2,ie=i||l==1?ve:-ve,x=i||l==-1?-ve:ve;de.forEach(Z=>{Z[0]+=ie,Z[1]+=x}),j.gaps=de=m.gaps(f,u,p,d,de),j.clip=Pn(de,v.ori,z,B,b,D)}return Se!=0&&(j.band=Se==2?[$t(f,u,p,d,k,-1),$t(f,u,p,d,k,1)]:$t(f,u,p,d,k,Se)),j})}function to(e,l,i,n,o,f,u=Ee){if(e.length>1){let p=null;for(let d=0,m=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let _=Ye(e[d]-e[p]);_<m&&(m=_,u=Ye(i(e[d],n,o,f)-i(e[p],n,o,f)))}p=d}}return u}function Tu(e){e=e||rn;const l=_e(e.size,[.6,Ee,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const f=ge(o),u=1-l[0],p=_e(l[1],Ee),d=_e(l[2],1),m=_e(e.disp,rn),_=_e(e.each,C=>{}),{fill:g,stroke:v}=m;return(C,A,F,z)=>bl(C,A,(B,b,D,T,te,M,K,Y,ne,j,k)=>{let ee=B.pxRound,V=i,J=n*xe,W=p*xe,ue=d*xe,O,Ge;T.ori==0?[O,Ge]=f(C,A):[Ge,O]=f(C,A);const Se=T.dir*(T.ori==0?1:-1);let de=T.ori==0?zn:Gs,ve=T.ori==0?_:(P,Te,Be,xl,rl,Wt,al)=>{_(P,Te,Be,rl,xl,al,Wt)},ie=_e(C.bands,Fs).find(P=>P.series[0]==A),x=ie!=null?ie.dir:0,Z=B.fillTo(C,A,B.min,B.max,x),ae=ee(K(Z,te,k,ne)),$,G,le,N=j,E=ee(B.width*xe),ce=!1,pe=null,ye=null,Je=null,Lt=null;g!=null&&(E==0||v!=null)&&(ce=!0,pe=g.values(C,A,F,z),ye=new Map,new Set(pe).forEach(P=>{P!=null&&ye.set(P,new Path2D)}),E>0&&(Je=v.values(C,A,F,z),Lt=new Map,new Set(Je).forEach(P=>{P!=null&&Lt.set(P,new Path2D)})));let{x0:ct,size:Ht}=m;if(ct!=null&&Ht!=null){V=1,b=ct.values(C,A,F,z),ct.unit==2&&(b=b.map(Be=>C.posToVal(Y+Be*j,T.key,!0)));let P=Ht.values(C,A,F,z);Ht.unit==2?G=P[0]*j:G=M(P[0],T,j,Y)-M(0,T,j,Y),N=to(b,D,M,T,j,Y,N),le=N-G+J}else N=to(b,D,M,T,j,Y,N),le=N*u+J,G=N-le;le<1&&(le=0),E>=G/2&&(E=0),le<5&&(ee=go);let Ot=le>0,Q=N-le-(Ot?E:0);G=ee(_s(Q,ue,W)),$=(V==0?G/2:V==Se?0:G)-V*Se*((V==0?J/2:0)+(Ot?E/2:0));const U={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},he=ce?null:new Path2D;let ze=null;if(ie!=null)ze=C.data[ie.series[1]];else{let{y0:P,y1:Te}=m;P!=null&&Te!=null&&(D=Te.values(C,A,F,z),ze=P.values(C,A,F,z))}let pt=O*G,oe=Ge*G;for(let P=Se==1?F:z;P>=F&&P<=z;P+=Se){let Te=D[P];if(Te==null)continue;if(ze!=null){let ut=ze[P]??0;if(Te-ut==0)continue;ae=K(ut,te,k,ne)}let Be=T.distr!=2||m!=null?b[P]:P,xl=M(Be,T,j,Y),rl=K(_e(Te,Z),te,k,ne),Wt=ee(xl-$),al=ee(at(rl,ae)),dt=ee(Nt(rl,ae)),St=al-dt;if(Te!=null){let ut=Te<0?oe:pt,Ct=Te<0?pt:oe;ce?(E>0&&Je[P]!=null&&de(Lt.get(Je[P]),Wt,dt+bt(E/2),G,at(0,St-E),ut,Ct),pe[P]!=null&&de(ye.get(pe[P]),Wt,dt+bt(E/2),G,at(0,St-E),ut,Ct)):de(he,Wt,dt+bt(E/2),G,at(0,St-E),ut,Ct),ve(C,A,P,Wt-E/2,dt,G+E,St)}}return E>0?U.stroke=ce?Lt:he:ce||(U._fill=B.width==0?B._fill:B._stroke??B._fill,U.width=0),U.fill=ce?ye:he,U})}function Mu(e,l){const i=_e(l?.alignGaps,0);return(n,o,f,u)=>bl(n,o,(p,d,m,_,g,v,C,A,F,z,B)=>{[f,u]=An(m,f,u);let b=p.pxRound,D=O=>b(v(O,_,z,A)),T=O=>b(C(O,g,B,F)),te,M,K;_.ori==0?(te=Rn,K=Yl,M=Io):(te=Fn,K=jl,M=Uo);const Y=_.dir*(_.ori==0?1:-1);let ne=D(d[Y==1?f:u]),j=ne,k=[],ee=[];for(let O=Y==1?f:u;O>=f&&O<=u;O+=Y)if(m[O]!=null){let Se=d[O],de=D(Se);k.push(j=de),ee.push(T(m[O]))}const V={stroke:e(k,ee,te,K,M,b),fill:null,clip:null,band:null,gaps:null,flags:Il},J=V.stroke;let[W,ue]=Os(n,o);if(p.fill!=null||W!=0){let O=V.fill=new Path2D(J),Ge=p.fillTo(n,o,p.min,p.max,W),Se=T(Ge);K(O,j,Se),K(O,ne,Se)}if(!p.spanGaps){let O=[];O.push(...Ws(d,m,f,u,Y,D,i)),V.gaps=O=p.gaps(n,o,f,u,O),V.clip=Pn(O,_.ori,A,F,z,B)}return ue!=0&&(V.band=ue==2?[$t(n,o,f,u,J,-1),$t(n,o,f,u,J,1)]:$t(n,o,f,u,J,ue)),V})}function Eu(e){return Mu(Au,e)}function Au(e,l,i,n,o,f){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),m=Array(u-1),_=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)_[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],m[v]=_[v]/g[v];d[0]=m[0];for(let v=1;v<u-1;v++)m[v]===0||m[v-1]===0||m[v-1]>0!=m[v]>0?d[v]=0:(d[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/m[v-1]+(g[v]+2*g[v-1])/m[v]),isFinite(d[v])||(d[v]=0));d[u-1]=m[u-2];for(let v=0;v<u-1;v++)o(p,e[v]+g[v]/3,l[v]+d[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-d[v+1]*g[v]/3,e[v+1],l[v+1])}return p}const ys=new Set;function lo(){for(let e of ys)e.syncRect(!0)}Ul&&(wl(aa,Ol,lo),wl(ua,Ol,lo,!0),wl(Tn,Ol,()=>{je.pxRatio=xe}));const Du=qo(),Lu=Yo();function no(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((f,u)=>ks(f,u,l,i))}function Cu(e,l){return e.map((i,n)=>n==0?{}:We({},l,i))}function ks(e,l,i,n){return We({},l==0?i:n,e)}function Ko(e,l,i){return l==null?Gl:[l,i]}const Pu=Ko;function Ru(e,l,i){return l==null?Gl:Mn(l,i,Ps,!0)}function Jo(e,l,i,n){return l==null?Gl:Dn(l,i,e.scales[n].log,!1)}const Fu=Jo;function Zo(e,l,i,n){return l==null?Gl:Cs(l,i,e.scales[n].log,!1)}const zu=Zo;function Vu(e,l,i,n,o){let f=at(zi(e),zi(l)),u=l-e,p=Vt(o/n*u,i);do{let d=i[p],m=n*d/u;if(m>=o&&f+(d<5?ol.get(d):0)<=17)return[d,m]}while(++p<i.length);return[0,0]}function so(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=Ie((i=+o)*xe))+"px"),[e,l,i]}function Nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ae(l[2]*xe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function je(e,l,i){const n={mode:_e(e.mode,1)},o=n.mode;function f(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?1-c:c)}function u(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?c:1-c)}function p(t,s,r,a){return s.ori==0?f(t,s,r,a):u(t,s,r,a)}n.valToPosH=f,n.valToPosV=u;let d=!1;n.status=0;const m=n.root=Et(Ur);if(e.id!=null&&(m.id=e.id),vt(m,e.class),e.title){let t=Et(qr,m);t.textContent=e.title}const _=zt("canvas"),g=n.ctx=_.getContext("2d"),v=Et(Kr,m);wl("click",v,t=>{t.target===A&&(De!=Pl||Re!=Rl)&&nt.click(n,t)},!0);const C=n.under=Et(Jr,v);v.appendChild(_);const A=n.over=Et(Zr,v);e=Bl(e);const F=+_e(e.pxAlign,1),z=eo(F);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const B=e.ms||.001,b=n.series=o==1?no(e.series||[],qi,$i,!1):Cu(e.series||[null],Qi),D=n.axes=no(e.axes||[],ji,Ji,!0),T=n.scales={},te=n.bands=e.bands||[];te.forEach(t=>{t.fill=ge(t.fill||null),t.dir=_e(t.dir,-1)});const M=o==2?b[1].facets[0].scale:b[0].scale,K={axes:dr,series:ar},Y=(e.drawOrder||["axes","series"]).map(t=>K[t]);function ne(t){const s=t.distr==3?r=>Qt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>us(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:c,_max:h}=t,w=h-c;return(a-c)/w}}function j(t){let s=T[t];if(s==null){let r=(e.scales||rn)[t]||rn;if(r.from!=null){j(r.from);let a=We({},T[r.from],r,{key:t});a.valToPct=ne(a),T[t]=a}else{s=T[t]=We({},t==M?Ho:_u,r),s.key=t;let a=s.time,c=s.range,h=sl(c);if((t!=M||o==2&&!a)&&(h&&(c[0]==null||c[1]==null)&&(c={min:c[0]==null?Pi:{mode:1,hard:c[0],soft:c[0]},max:c[1]==null?Pi:{mode:1,hard:c[1],soft:c[1]}},h=!1),!h&&Cn(c))){let w=c;c=(S,y,L)=>y==null?Gl:Mn(y,L,w)}s.range=ge(c||(a?Pu:t==M?s.distr==3?Fu:s.distr==4?zu:Ko:s.distr==3?Jo:s.distr==4?Zo:Ru)),s.auto=ge(h?!1:s.auto),s.clamp=ge(s.clamp||wu),s._min=s._max=null,s.valToPct=ne(s)}}}j("x"),j("y"),o==1&&b.forEach(t=>{j(t.scale)}),D.forEach(t=>{j(t.scale)});for(let t in e.scales)j(t);const k=T[M],ee=k.distr;let V,J;k.ori==0?(vt(m,Yr),V=f,J=u):(vt(m,jr),V=u,J=f);const W={};for(let t in T){let s=T[t];(s.min!=null||s.max!=null)&&(W[t]={min:s.min,max:s.max},s.min=s.max=null)}const ue=e.tzDate||(t=>new Date(Ie(t/B))),O=e.fmtDate||zs,Ge=B==1?Ya(ue):Ka(ue),Se=Ii(ue,Bi(B==1?Ua:qa,O)),de=Yi(ue,Ui(Za,O)),ve=[],ie=n.legend=We({},Xa,e.legend),x=n.cursor=We({},iu,{drag:{y:o==2}},e.cursor),Z=ie.show,ae=x.show,$=ie.markers;ie.idxs=ve,$.width=ge($.width),$.dash=ge($.dash),$.stroke=ge($.stroke),$.fill=ge($.fill);let G,le,N,E=[],ce=[],pe,ye=!1,Je={};if(ie.live){const t=b[1]?b[1].values:null;ye=t!=null,pe=ye?t(n,1,0):{_:0};for(let s in pe)Je[s]=Ds}if(Z)if(G=zt("table",la,m),N=zt("tbody",null,G),ie.mount(n,G),ye){le=zt("thead",null,G,N);let t=zt("tr",null,le);zt("th",null,t);for(var Lt in pe)zt("th",_i,t).textContent=Lt}else vt(G,sa),ie.live&&vt(G,na);const ct={show:!0},Ht={show:!1};function Ot(t,s){if(s==0&&(ye||!ie.live||o==2))return Gl;let r=[],a=zt("tr",ia,N,N.childNodes[s]);vt(a,t.class),t.show||vt(a,vl);let c=zt("th",null,a);if($.show){let S=Et(oa,c);if(s>0){let y=$.width(n,s);y&&(S.style.border=y+"px "+$.dash(n,s)+" "+$.stroke(n,s)),S.style.background=$.fill(n,s)}}let h=Et(_i,c);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&($.show||(h.style.color=t.width>0?$.stroke(n,s):$.fill(n,s)),U("click",c,S=>{if(x._lock)return;fl(S);let y=b.indexOf(t);if((S.ctrlKey||S.metaKey)!=ie.isolate){let L=b.some((R,H)=>H>0&&H!=y&&R.show);b.forEach((R,H)=>{H>0&&Bt(H,L?H==y?ct:Ht:ct,!0,Oe.setSeries)})}else Bt(y,{show:!t.show},!0,Oe.setSeries)},!1),yl&&U(yi,c,S=>{x._lock||(fl(S),Bt(b.indexOf(t),zl,!0,Oe.setSeries))},!1));for(var w in pe){let S=zt("td",ra,a);S.textContent="--",r.push(S)}return[a,r]}const Q=new Map;function U(t,s,r,a=!0){const c=Q.get(s)||{},h=x.bind[t](n,s,r,a);h&&(wl(t,s,c[t]=h),Q.set(s,c))}function he(t,s,r){const a=Q.get(s)||{};for(let c in a)(t==null||c==t)&&(ws(c,s,a[c]),delete a[c]);t==null&&Q.delete(s)}let ze=0,pt=0,oe=0,P=0,Te=0,Be=0,xl=Te,rl=Be,Wt=oe,al=P,dt=0,St=0,ut=0,Ct=0;n.bbox={};let Vn=!1,un=!1,Sl=!1,ul=!1,fn=!1,yt=!1;function Nn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Al(!1),Sl=!0,un=!0,Dl()}function Bs(t,s){n.width=ze=oe=t,n.height=pt=P=s,Te=Be=0,tr(),lr();let r=n.bbox;dt=r.left=ml(Te*xe,.5),St=r.top=ml(Be*xe,.5),ut=r.width=ml(oe*xe,.5),Ct=r.height=ml(P*xe,.5)}const $o=3;function Xo(){let t=!1,s=0;for(;!t;){s++;let r=cr(s),a=pr(s);t=s==$o||r&&a,t||(Bs(n.width,n.height),un=!0)}}function er({width:t,height:s}){Nn(t,s)}n.setSize=er;function tr(){let t=!1,s=!1,r=!1,a=!1;D.forEach((c,h)=>{if(c.show&&c._show){let{side:w,_size:S}=c,y=w%2,L=c.label!=null?c.labelSize:0,R=S+L;R>0&&(y?(oe-=R,w==3?(Te+=R,a=!0):r=!0):(P-=R,w==0?(Be+=R,t=!0):s=!0))}}),cl[0]=t,cl[1]=r,cl[2]=s,cl[3]=a,oe-=Xt[1]+Xt[3],Te+=Xt[3],P-=Xt[2]+Xt[0],Be+=Xt[0]}function lr(){let t=Te+oe,s=Be+P,r=Te,a=Be;function c(h,w){switch(h){case 1:return t+=w,t-w;case 2:return s+=w,s-w;case 3:return r-=w,r+w;case 0:return a-=w,a+w}}D.forEach((h,w)=>{if(h.show&&h._show){let S=h.side;h._pos=c(S,h._size),h.label!=null&&(h._lpos=c(S,h.labelSize))}})}if(x.dataIdx==null){let t=x.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=ge(t.prox),a=t.bias??=0;x.dataIdx=(c,h,w,S)=>{if(h==0)return w;let y=w,L=r(c,h,w,S)??Ee,R=L>=0&&L<Ee,H=k.ori==0?oe:P,se=x.left,be=l[0],we=l[h];if(s.has(we[w])){y=null;let me=null,X=null,I;if(a==0||a==-1)for(I=w;me==null&&I-- >0;)s.has(we[I])||(me=I);if(a==0||a==1)for(I=w;X==null&&I++<we.length;)s.has(we[I])||(X=I);if(me!=null||X!=null)if(R){let Ce=me==null?-1/0:V(be[me],k,H,0),Ne=X==null?1/0:V(be[X],k,H,0),tt=se-Ce,Me=Ne-se;tt<=Me?tt<=L&&(y=me):Me<=L&&(y=X)}else y=X==null?me:me==null?X:w-me<=X-w?me:X}else R&&Ye(se-V(be[w],k,H,0))>L&&(y=null);return y}}const fl=t=>{x.event=t};x.idxs=ve,x._lock=!1;let st=x.points;st.show=ge(st.show),st.size=ge(st.size),st.stroke=ge(st.stroke),st.width=ge(st.width),st.fill=ge(st.fill);const Gt=n.focus=We({},e.focus||{alpha:.3},x.focus),yl=Gt.prox>=0,kl=yl&&st.one;let kt=[],Tl=[],Ml=[];function Is(t,s){let r=st.show(n,s);if(r instanceof HTMLElement)return vt(r,ta),vt(r,t.class),qt(r,-10,-10,oe,P),A.insertBefore(r,kt[s]),r}function Us(t,s){if(o==1||s>0){let r=o==1&&T[t.scale].time,a=t.value;t.value=r?Hi(a)?Yi(ue,Ui(a,O)):a||de:a||mu,t.label=t.label||(r?ru:ou)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Du||_a,t.fillTo=ge(t.fillTo||bu),t.pxAlign=+_e(t.pxAlign,F),t.pxRound=eo(t.pxAlign),t.stroke=ge(t.stroke||null),t.fill=ge(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gu(at(1,t.width),1),a=t.points=We({},{size:r,width:at(1,r*.2),stroke:t.stroke,space:r*2,paths:Lu,_stroke:null,_fill:null},t.points);a.show=ge(a.show),a.filter=ge(a.filter),a.fill=ge(a.fill),a.stroke=ge(a.stroke),a.paths=ge(a.paths),a.pxAlign=t.pxAlign}if(Z){let r=Ot(t,s);E.splice(s,0,r[0]),ce.splice(s,0,r[1]),ie.values.push(null)}if(ae){ve.splice(s,0,null);let r=null;kl?s==0&&(r=Is(t,s)):s>0&&(r=Is(t,s)),kt.splice(s,0,r),Tl.splice(s,0,0),Ml.splice(s,0,0)}et("addSeries",s)}function nr(t,s){s=s??b.length,t=o==1?ks(t,s,qi,$i):ks(t,s,{},Qi),b.splice(s,0,t),Us(b[s],s)}n.addSeries=nr;function sr(t){if(b.splice(t,1),Z){ie.values.splice(t,1),ce.splice(t,1);let s=E.splice(t,1)[0];he(null,s.firstChild),s.remove()}ae&&(ve.splice(t,1),kt.splice(t,1)[0].remove(),Tl.splice(t,1),Ml.splice(t,1)),et("delSeries",t)}n.delSeries=sr;const cl=[!1,!1,!1,!1];function ir(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=T[t.scale];a==null&&(t.scale=r?b[1].scale:M,a=T[t.scale]);let c=a.time;t.size=ge(t.size),t.space=ge(t.space),t.rotate=ge(t.rotate),sl(t.incrs)&&t.incrs.forEach(w=>{!ol.has(w)&&ol.set(w,_o(w))}),t.incrs=ge(t.incrs||(a.distr==2?Ga:c?B==1?Ia:ja:gl)),t.splits=ge(t.splits||(c&&a.distr==1?Ge:a.distr==3?bs:a.distr==4?fu:uu)),t.stroke=ge(t.stroke),t.grid.stroke=ge(t.grid.stroke),t.ticks.stroke=ge(t.ticks.stroke),t.border.stroke=ge(t.border.stroke);let h=t.values;t.values=sl(h)&&!sl(h[0])?ge(h):c?sl(h)?Ii(ue,Bi(h,O)):Hi(h)?Ja(ue,h):h||Se:h||au,t.filter=ge(t.filter||(a.distr>=3&&a.log==10?du:a.distr==3&&a.log==2?hu:vo)),t.font=so(t.font),t.labelFont=so(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(cl[s]=!0,t._el=Et(Qr,v))}}function ql(t,s,r,a){let[c,h,w,S]=r,y=s%2,L=0;return y==0&&(S||h)&&(L=s==0&&!c||s==2&&!w?Ie(ji.size/3):0),y==1&&(c||w)&&(L=s==1&&!h||s==3&&!S?Ie(Ji.size/2):0),L}const Ys=n.padding=(e.padding||[ql,ql,ql,ql]).map(t=>ge(_e(t,ql))),Xt=n._padding=Ys.map((t,s)=>t(n,s,cl,0));let lt,Ze=null,Qe=null;const cn=o==1?b[0].idxs:null;let Pt=null,Kl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){lt=0;for(let r=1;r<b.length;r++)lt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Pt=l[0],lt=Pt.length;let r=l;if(ee==2){r=l.slice();let a=r[0]=Array(lt);for(let c=0;c<lt;c++)a[c]=c}n._data=l=r}if(Al(!0),et("setData"),ee==2&&(Sl=!0),s!==!1){let r=k;r.auto(n,Kl)?Hn():tl(M,r.min,r.max),ul=ul||x.left>=0,yt=!0,Dl()}}n.setData=js;function Hn(){Kl=!0;let t,s;o==1&&(lt>0?(Ze=cn[0]=0,Qe=cn[1]=lt-1,t=l[0][Ze],s=l[0][Qe],ee==2?(t=Ze,s=Qe):t==s&&(ee==3?[t,s]=Dn(t,t,k.log,!1):ee==4?[t,s]=Cs(t,t,k.log,!1):k.time?s=t+Ie(86400/B):[t,s]=Mn(t,s,Ps,!0))):(Ze=cn[0]=t=null,Qe=cn[1]=s=null)),tl(M,t,s)}let pn,El,On,Wn,Gn,Bn,In,Un,Yn,ft;function qs(t,s,r,a,c,h){t??=xi,r??=Fs,a??="butt",c??=xi,h??="round",t!=pn&&(g.strokeStyle=pn=t),c!=El&&(g.fillStyle=El=c),s!=On&&(g.lineWidth=On=s),h!=Gn&&(g.lineJoin=Gn=h),a!=Bn&&(g.lineCap=Bn=a),r!=Wn&&g.setLineDash(Wn=r)}function Ks(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=In&&(g.font=In=t),r!=Un&&(g.textAlign=Un=r),a!=Yn&&(g.textBaseline=Yn=a)}function jn(t,s,r,a,c=0){if(a.length>0&&t.auto(n,Kl)&&(s==null||s.min==null)){let h=_e(Ze,0),w=_e(Qe,a.length-1),S=r.min==null?da(a,h,w,c,t.distr==3):[r.min,r.max];t.min=Nt(t.min,r.min=S[0]),t.max=at(t.max,r.max=S[1])}}const Js={min:null,max:null};function or(){for(let a in T){let c=T[a];W[a]==null&&(c.min==null||W[M]!=null&&c.auto(n,Kl))&&(W[a]=Js)}for(let a in T){let c=T[a];W[a]==null&&c.from!=null&&W[c.from]!=null&&(W[a]=Js)}W[M]!=null&&Al(!0);let t={};for(let a in W){let c=W[a];if(c!=null){let h=t[a]=Bl(T[a],Sa);if(c.min!=null)We(h,c);else if(a!=M||o==2)if(lt==0&&h.from==null){let w=h.range(n,null,null,a);h.min=w[0],h.max=w[1]}else h.min=Ee,h.max=-Ee}}if(lt>0){b.forEach((a,c)=>{if(o==1){let h=a.scale,w=W[h];if(w==null)return;let S=t[h];if(c==0){let y=S.range(n,S.min,S.max,h);S.min=y[0],S.max=y[1],Ze=Vt(S.min,l[0]),Qe=Vt(S.max,l[0]),Qe-Ze>1&&(l[0][Ze]<S.min&&Ze++,l[0][Qe]>S.max&&Qe--),a.min=Pt[Ze],a.max=Pt[Qe]}else a.show&&a.auto&&jn(S,w,a,l[c],a.sorted);a.idxs[0]=Ze,a.idxs[1]=Qe}else if(c>0&&a.show&&a.auto){let[h,w]=a.facets,S=h.scale,y=w.scale,[L,R]=l[c],H=t[S],se=t[y];H!=null&&jn(H,W[S],h,L,h.sorted),se!=null&&jn(se,W[y],w,R,w.sorted),a.min=w.min,a.max=w.max}});for(let a in t){let c=t[a],h=W[a];if(c.from==null&&(h==null||h.min==null)){let w=c.range(n,c.min==Ee?null:c.min,c.max==-Ee?null:c.max,a);c.min=w[0],c.max=w[1]}}}for(let a in t){let c=t[a];if(c.from!=null){let h=t[c.from];if(h.min==null)c.min=c.max=null;else{let w=c.range(n,h.min,h.max,a);c.min=w[0],c.max=w[1]}}}let s={},r=!1;for(let a in t){let c=t[a],h=T[a];if(h.min!=c.min||h.max!=c.max){h.min=c.min,h.max=c.max;let w=h.distr;h._min=w==3?Qt(h.min):w==4?us(h.min,h.asinh):w==100?h.fwd(h.min):h.min,h._max=w==3?Qt(h.max):w==4?us(h.max,h.asinh):w==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){b.forEach((a,c)=>{o==2?c>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)Sl=!0,et("setScale",a);ae&&x.left>=0&&(ul=yt=!0)}for(let a in W)W[a]=null}function rr(t){let s=_s(Ze-1,0,lt-1),r=_s(Qe+1,0,lt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<lt-1;)r++;return[s,r]}function ar(){if(lt>0){let t=b.some(s=>s._focus)&&ft!=Gt.alpha;t&&(g.globalAlpha=ft=Gt.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(Zs(r,!1),Zs(r,!0),s._paths==null)){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha);let c=o==2?[0,l[r][0].length-1]:rr(l[r]);s._paths=s.paths(n,r,c[0],c[1]),ft!=a&&(g.globalAlpha=ft=a)}}),b.forEach((s,r)=>{if(r>0&&s.show){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha),s._paths!=null&&Qs(r,!1);{let c=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,Ze,Qe,c),w=s.points.filter(n,r,h,c);(h||w)&&(s.points._paths=s.points.paths(n,r,Ze,Qe,w),Qs(r,!0))}ft!=a&&(g.globalAlpha=ft=a),et("drawSeries",r)}}),t&&(g.globalAlpha=ft=1)}}function Zs(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function Qs(t,s){let r=s?b[t].points:b[t],{stroke:a,fill:c,clip:h,flags:w,_stroke:S=r._stroke,_fill:y=r._fill,_width:L=r.width}=r._paths;L=Ae(L*xe,3);let R=null,H=L%2/2;s&&y==null&&(y=L>0?"#fff":S);let se=r.pxAlign==1&&H>0;if(se&&g.translate(H,H),!s){let be=dt-L/2,we=St-L/2,me=ut+L,X=Ct+L;R=new Path2D,R.rect(be,we,me,X)}s?qn(S,L,r.dash,r.cap,y,a,c,w,h):ur(t,S,L,r.dash,r.cap,y,a,c,w,R,h),se&&g.translate(-H,-H)}function ur(t,s,r,a,c,h,w,S,y,L,R){let H=!1;y!=0&&te.forEach((se,be)=>{if(se.series[0]==t){let we=b[se.series[1]],me=l[se.series[1]],X=(we._paths||rn).band;sl(X)&&(X=se.dir==1?X[0]:X[1]);let I,Ce=null;we.show&&X&&ma(me,Ze,Qe)?(Ce=se.fill(n,be)||h,I=we._paths.clip):X=null,qn(s,r,a,c,Ce,w,S,y,L,R,I,X),H=!0}}),H||qn(s,r,a,c,h,w,S,y,L,R)}const $s=Il|Ss;function qn(t,s,r,a,c,h,w,S,y,L,R,H){qs(t,s,r,a,c),(y||L||H)&&(g.save(),y&&g.clip(y),L&&g.clip(L)),H?(S&$s)==$s?(g.clip(H),R&&g.clip(R),hn(c,w),dn(t,h,s)):S&Ss?(hn(c,w),g.clip(H),dn(t,h,s)):S&Il&&(g.save(),g.clip(H),R&&g.clip(R),hn(c,w),g.restore(),dn(t,h,s)):(hn(c,w),dn(t,h,s)),(y||L||H)&&g.restore()}function dn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,c)=>{g.strokeStyle=pn=c,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function hn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function fr(t,s,r,a){let c=D[t],h;if(a<=0)h=[0,0];else{let w=c._space=c.space(n,t,s,r,a),S=c._incrs=c.incrs(n,t,s,r,a,w);h=Vu(s,r,S,a,w)}return c._found=h}function Kn(t,s,r,a,c,h,w,S,y,L){let R=w%2/2;F==1&&g.translate(R,R),qs(S,w,y,L,S),g.beginPath();let H,se,be,we,me=c+(a==0||a==3?-h:h);r==0?(se=c,we=me):(H=c,be=me);for(let X=0;X<t.length;X++)s[X]!=null&&(r==0?H=be=t[X]:se=we=t[X],g.moveTo(H,se),g.lineTo(be,we));g.stroke(),F==1&&g.translate(-R,-R)}function cr(t){let s=!0;return D.forEach((r,a)=>{if(!r.show)return;let c=T[r.scale];if(c.min==null){r._show&&(s=!1,r._show=!1,Al(!1));return}else r._show||(s=!1,r._show=!0,Al(!1));let h=r.side,w=h%2,{min:S,max:y}=c,[L,R]=fr(a,S,y,w==0?oe:P);if(R==0)return;let H=c.distr==2,se=r._splits=r.splits(n,a,S,y,L,R,H),be=c.distr==2?se.map(I=>Pt[I]):se,we=c.distr==2?Pt[se[1]]-Pt[se[0]]:L,me=r._values=r.values(n,r.filter(n,be,a,R,we),a,R,we);r._rotate=h==2?r.rotate(n,me,a,R):0;let X=r._size;r._size=Dt(r.size(n,me,a,t)),X!=null&&r._size!=X&&(s=!1)}),s}function pr(t){let s=!0;return Ys.forEach((r,a)=>{let c=r(n,a,cl,t);c!=Xt[a]&&(s=!1),Xt[a]=c}),s}function dr(){for(let t=0;t<D.length;t++){let s=D[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,c,h,w=s.stroke(n,t),S=r==0||r==3?-1:1,[y,L]=s._found;if(s.label!=null){let ot=s.labelGap*S,gt=Ie((s._lpos+ot)*xe);Ks(s.labelFont[0],w,"center",r==2?en:bi),g.save(),a==1?(c=h=0,g.translate(gt,Ie(St+Ct/2)),g.rotate((r==3?-yn:yn)/2)):(c=Ie(dt+ut/2),h=gt);let hl=mo(s.label)?s.label(n,t,y,L):s.label;g.fillText(hl,c,h),g.restore()}if(L==0)continue;let R=T[s.scale],H=a==0?ut:Ct,se=a==0?dt:St,be=s._splits,we=R.distr==2?be.map(ot=>Pt[ot]):be,me=R.distr==2?Pt[be[1]]-Pt[be[0]]:y,X=s.ticks,I=s.border,Ce=X.show?X.size:0,Ne=Ie(Ce*xe),tt=Ie((s.alignTo==2?s._size-Ce-s.gap:s.gap)*xe),Me=s._rotate*-yn/180,He=z(s._pos*xe),ht=(Ne+tt)*S,it=He+ht;h=a==0?it:0,c=a==1?it:0;let Tt=s.font[0],Rt=s.align==1?Nl:s.align==2?os:Me>0?Nl:Me<0?os:a==0?"center":r==3?os:Nl,Ut=Me||a==1?"middle":r==2?en:bi;Ks(Tt,w,Rt,Ut);let mt=s.font[1]*s.lineGap,Mt=be.map(ot=>z(p(ot,R,H,se))),Ft=s._values;for(let ot=0;ot<Ft.length;ot++){let gt=Ft[ot];if(gt!=null){a==0?c=Mt[ot]:h=Mt[ot],gt=""+gt;let hl=gt.indexOf(`
`)==-1?[gt]:gt.split(/\n/gm);for(let rt=0;rt<hl.length;rt++){let vi=hl[rt];Me?(g.save(),g.translate(c,h+rt*mt),g.rotate(Me),g.fillText(vi,0,0),g.restore()):g.fillText(vi,c,h+rt*mt)}}}X.show&&Kn(Mt,X.filter(n,we,t,L,me),a,r,He,Ne,Ae(X.width*xe,3),X.stroke(n,t),X.dash,X.cap);let Yt=s.grid;Yt.show&&Kn(Mt,Yt.filter(n,we,t,L,me),a,a==0?2:1,a==0?St:dt,a==0?Ct:ut,Ae(Yt.width*xe,3),Yt.stroke(n,t),Yt.dash,Yt.cap),I.show&&Kn([He],[1],a==0?1:0,a==0?1:2,a==1?St:dt,a==1?Ct:ut,Ae(I.width*xe,3),I.stroke(n,t),I.dash,I.cap)}et("drawAxes")}function Al(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let mn=!1,Jn=!1,Jl=[];function hr(){Jn=!1;for(let t=0;t<Jl.length;t++)et(...Jl[t]);Jl.length=0}function Dl(){mn||(Da(Xs),mn=!0)}function mr(t,s=!1){mn=!0,Jn=s,t(n),Xs(),s&&Jl.length>0&&queueMicrotask(hr)}n.batch=mr;function Xs(){if(Vn&&(or(),Vn=!1),Sl&&(Xo(),Sl=!1),un){if(Pe(C,Nl,Te),Pe(C,en,Be),Pe(C,ln,oe),Pe(C,nn,P),Pe(A,Nl,Te),Pe(A,en,Be),Pe(A,ln,oe),Pe(A,nn,P),Pe(v,ln,ze),Pe(v,nn,pt),_.width=Ie(ze*xe),_.height=Ie(pt*xe),D.forEach(({_el:t,_show:s,_size:r,_pos:a,side:c})=>{if(t!=null)if(s){let h=c===3||c===0?r:0,w=c%2==1;Pe(t,w?"left":"top",a-h),Pe(t,w?"width":"height",r),Pe(t,w?"top":"left",w?Be:Te),Pe(t,w?"height":"width",w?P:oe),vs(t,vl)}else vt(t,vl)}),pn=El=On=Gn=Bn=In=Un=Yn=Wn=null,ft=1,$l(!0),Te!=xl||Be!=rl||oe!=Wt||P!=al){Al(!1);let t=oe/Wt,s=P/al;if(ae&&!ul&&x.left>=0){x.left*=t,x.top*=s,Ll&&qt(Ll,Ie(x.left),0,oe,P),Cl&&qt(Cl,0,Ie(x.top),oe,P);for(let r=0;r<kt.length;r++){let a=kt[r];a!=null&&(Tl[r]*=t,Ml[r]*=s,qt(a,Dt(Tl[r]),Dt(Ml[r]),oe,P))}}if(Le.show&&!fn&&Le.left>=0&&Le.width>0){Le.left*=t,Le.width*=t,Le.top*=s,Le.height*=s;for(let r in ts)Pe(Fl,r,Le[r])}xl=Te,rl=Be,Wt=oe,al=P}et("setSize"),un=!1}ze>0&&pt>0&&(g.clearRect(0,0,_.width,_.height),et("drawClear"),Y.forEach(t=>t()),et("draw")),Le.show&&fn&&(gn(Le),fn=!1),ae&&ul&&(dl(null,!0,!1),ul=!1),ie.show&&ie.live&&yt&&(Xn(),yt=!1),d||(d=!0,n.status=1,et("ready")),Kl=!1,mn=!1}n.redraw=(t,s)=>{Sl=s||!1,t!==!1?tl(M,k.min,k.max):Dl()};function Zn(t,s){let r=T[t];if(r.from==null){if(lt==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(lt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==M&&r.distr==2&&lt>0&&(s.min=Vt(s.min,l[0]),s.max=Vt(s.max,l[0]),s.min==s.max&&s.max++),W[t]=s,Vn=!0,Dl()}}n.setScale=Zn;let Qn,$n,Ll,Cl,ei,ti,Pl,Rl,li,ni,De,Re,el=!1;const nt=x.drag;let $e=nt.x,Xe=nt.y;ae&&(x.x&&(Qn=Et(Xr,A)),x.y&&($n=Et(ea,A)),k.ori==0?(Ll=Qn,Cl=$n):(Ll=$n,Cl=Qn),De=x.left,Re=x.top);const Le=n.select=We({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Fl=Le.show?Et($r,Le.over?A:C):null;function gn(t,s){if(Le.show){for(let r in t)Le[r]=t[r],r in ts&&Pe(Fl,r,t[r]);s!==!1&&et("setSelect")}}n.setSelect=gn;function gr(t){if(b[t].show)Z&&vs(E[t],vl);else if(Z&&vt(E[t],vl),ae){let r=kl?kt[0]:kt[t];r!=null&&qt(r,-10,-10,oe,P)}}function tl(t,s,r){Zn(t,{min:s,max:r})}function Bt(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&b.forEach((c,h)=>{h>0&&(t==h||t==null)&&(c.show=s.show,gr(h),o==2?(tl(c.facets[0].scale,null,null),tl(c.facets[1].scale,null,null)):tl(c.scale,null,null),Dl())}),r!==!1&&et("setSeries",t,s),a&&Xl("setSeries",n,t,s)}n.setSeries=Bt;function vr(t,s){We(te[t],s)}function wr(t,s){t.fill=ge(t.fill||null),t.dir=_e(t.dir,-1),s=s??te.length,te.splice(s,0,t)}function _r(t){t==null?te.length=0:te.splice(t,1)}n.addBand=wr,n.setBand=vr,n.delBand=_r;function br(t,s){b[t].alpha=s,ae&&kt[t]!=null&&(kt[t].style.opacity=s),Z&&E[t]&&(E[t].style.opacity=s)}let Jt,ll,pl;const zl={focus:!0};function xr(t){if(t!=pl){let s=t==null,r=Gt.alpha!=1;b.forEach((a,c)=>{if(o==1||c>0){let h=s||c==0||c==t;a._focus=s?null:h,r&&br(c,h?1:Gt.alpha)}}),pl=t,r&&Dl()}}Z&&yl&&U(ki,G,t=>{x._lock||(fl(t),pl!=null&&Bt(null,zl,!0,Oe.setSeries))});function It(t,s,r){let a=T[s];r&&(t=t/xe-(a.ori==1?Be:Te));let c=oe;a.ori==1&&(c=P,t=c-t),a.dir==-1&&(t=c-t);let h=a._min,w=a._max,S=t/c,y=h+(w-h)*S,L=a.distr;return L==3?Wl(10,y):L==4?va(y,a.asinh):L==100?a.bwd(y):y}function Sr(t,s){let r=It(t,M,s);return Vt(r,l[0],Ze,Qe)}n.valToIdx=t=>Vt(t,l[0]),n.posToIdx=Sr,n.posToVal=It,n.valToPos=(t,s,r)=>T[s].ori==0?f(t,T[s],r?ut:oe,r?dt:0):u(t,T[s],r?Ct:P,r?St:0),n.setCursor=(t,s,r)=>{De=t.left,Re=t.top,dl(null,s,r)};function si(t,s){Pe(Fl,Nl,Le.left=t),Pe(Fl,ln,Le.width=s)}function ii(t,s){Pe(Fl,en,Le.top=t),Pe(Fl,nn,Le.height=s)}let Zl=k.ori==0?si:ii,Ql=k.ori==1?si:ii;function yr(){if(Z&&ie.live)for(let t=o==2?1:0;t<b.length;t++){if(t==0&&ye)continue;let s=ie.values[t],r=0;for(let a in s)ce[t][r++].firstChild.nodeValue=s[a]}}function Xn(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{ve[a]=r}):xa(t.idx)||ve.fill(t.idx),ie.idx=ve[0]),Z&&ie.live){for(let r=0;r<b.length;r++)(r>0||o==1&&!ye)&&kr(r,ve[r]);yr()}yt=!1,s!==!1&&et("setLegend")}n.setLegend=Xn;function kr(t,s){let r=b[t],a=t==0&&ee==2?Pt:l[t],c;ye?c=r.values(n,t,s)??Je:(c=r.value(n,s==null?null:a[s],t,s),c=c==null?Je:{_:c}),ie.values[t]=c}function dl(t,s,r){li=De,ni=Re,[De,Re]=x.move(n,De,Re),x.left=De,x.top=Re,ae&&(Ll&&qt(Ll,Ie(De),0,oe,P),Cl&&qt(Cl,0,Ie(Re),oe,P));let a,c=Ze>Qe;Jt=Ee,ll=null;let h=k.ori==0?oe:P,w=k.ori==1?oe:P;if(De<0||lt==0||c){a=x.idx=null;for(let S=0;S<b.length;S++){let y=kt[S];y!=null&&qt(y,-10,-10,oe,P)}yl&&Bt(null,zl,!0,t==null&&Oe.setSeries),ie.live&&(ve.fill(a),yt=!0)}else{let S,y,L;o==1&&(S=k.ori==0?De:Re,y=It(S,M),a=x.idx=Vt(y,l[0],Ze,Qe),L=V(l[0][a],k,h,0));let R=-10,H=-10,se=0,be=0,we=!0,me="",X="";for(let I=o==2?1:0;I<b.length;I++){let Ce=b[I],Ne=ve[I],tt=Ne==null?null:o==1?l[I][Ne]:l[I][1][Ne],Me=x.dataIdx(n,I,a,y),He=Me==null?null:o==1?l[I][Me]:l[I][1][Me];if(yt=yt||He!=tt||Me!=Ne,ve[I]=Me,I>0&&Ce.show){let ht=Me==null?-10:Me==a?L:V(o==1?l[0][Me]:l[I][0][Me],k,h,0),it=He==null?-10:J(He,o==1?T[Ce.scale]:T[Ce.facets[1].scale],w,0);if(yl&&He!=null){let Tt=k.ori==1?De:Re,Rt=Ye(Gt.dist(n,I,Me,it,Tt));if(Rt<Jt){let Ut=Gt.bias;if(Ut!=0){let mt=It(Tt,Ce.scale),Mt=He>=0?1:-1,Ft=mt>=0?1:-1;Ft==Mt&&(Ft==1?Ut==1?He>=mt:He<=mt:Ut==1?He<=mt:He>=mt)&&(Jt=Rt,ll=I)}else Jt=Rt,ll=I}}if(yt||kl){let Tt,Rt;k.ori==0?(Tt=ht,Rt=it):(Tt=it,Rt=ht);let Ut,mt,Mt,Ft,Yt,ot,gt=!0,hl=st.bbox;if(hl!=null){gt=!1;let rt=hl(n,I);Mt=rt.left,Ft=rt.top,Ut=rt.width,mt=rt.height}else Mt=Tt,Ft=Rt,Ut=mt=st.size(n,I);if(ot=st.fill(n,I),Yt=st.stroke(n,I),kl)I==ll&&Jt<=Gt.prox&&(R=Mt,H=Ft,se=Ut,be=mt,we=gt,me=ot,X=Yt);else{let rt=kt[I];rt!=null&&(Tl[I]=Mt,Ml[I]=Ft,Ci(rt,Ut,mt,gt),Di(rt,ot,Yt),qt(rt,Dt(Mt),Dt(Ft),oe,P))}}}}if(kl){let I=Gt.prox,Ce=pl==null?Jt<=I:Jt>I||ll!=pl;if(yt||Ce){let Ne=kt[0];Ne!=null&&(Tl[0]=R,Ml[0]=H,Ci(Ne,se,be,we),Di(Ne,me,X),qt(Ne,Dt(R),Dt(H),oe,P))}}}if(Le.show&&el)if(t!=null){let[S,y]=Oe.scales,[L,R]=Oe.match,[H,se]=t.cursor.sync.scales,be=t.cursor.drag;if($e=be._x,Xe=be._y,$e||Xe){let{left:we,top:me,width:X,height:I}=t.select,Ce=t.scales[H].ori,Ne=t.posToVal,tt,Me,He,ht,it,Tt=S!=null&&L(S,H),Rt=y!=null&&R(y,se);Tt&&$e?(Ce==0?(tt=we,Me=X):(tt=me,Me=I),He=T[S],ht=V(Ne(tt,H),He,h,0),it=V(Ne(tt+Me,H),He,h,0),Zl(Nt(ht,it),Ye(it-ht))):Zl(0,h),Rt&&Xe?(Ce==1?(tt=we,Me=X):(tt=me,Me=I),He=T[y],ht=J(Ne(tt,se),He,w,0),it=J(Ne(tt+Me,se),He,w,0),Ql(Nt(ht,it),Ye(it-ht))):Ql(0,w)}else ls()}else{let S=Ye(li-ei),y=Ye(ni-ti);if(k.ori==1){let se=S;S=y,y=se}$e=nt.x&&S>=nt.dist,Xe=nt.y&&y>=nt.dist;let L=nt.uni;L!=null?$e&&Xe&&($e=S>=L,Xe=y>=L,!$e&&!Xe&&(y>S?Xe=!0:$e=!0)):nt.x&&nt.y&&($e||Xe)&&($e=Xe=!0);let R,H;$e&&(k.ori==0?(R=Pl,H=De):(R=Rl,H=Re),Zl(Nt(R,H),Ye(H-R)),Xe||Ql(0,w)),Xe&&(k.ori==1?(R=Pl,H=De):(R=Rl,H=Re),Ql(Nt(R,H),Ye(H-R)),$e||Zl(0,h)),!$e&&!Xe&&(Zl(0,0),Ql(0,0))}if(nt._x=$e,nt._y=Xe,t==null){if(r){if(gi!=null){let[S,y]=Oe.scales;Oe.values[0]=S!=null?It(k.ori==0?De:Re,S):null,Oe.values[1]=y!=null?It(k.ori==1?De:Re,y):null}Xl(rs,n,De,Re,oe,P,a)}if(yl){let S=r&&Oe.setSeries,y=Gt.prox;pl==null?Jt<=y&&Bt(ll,zl,!0,S):Jt>y?Bt(null,zl,!0,S):ll!=pl&&Bt(ll,zl,!0,S)}}yt&&(ie.idx=a,Xn()),s!==!1&&et("setCursor")}let nl=null;Object.defineProperty(n,"rect",{get(){return nl==null&&$l(!1),nl}});function $l(t=!1){t?nl=null:(nl=A.getBoundingClientRect(),et("syncRect",nl))}function oi(t,s,r,a,c,h,w){x._lock||el&&t!=null&&t.movementX==0&&t.movementY==0||(es(t,s,r,a,c,h,w,!1,t!=null),t!=null?dl(null,!0,!0):dl(s,!0,!1))}function es(t,s,r,a,c,h,w,S,y){if(nl==null&&$l(!1),fl(t),t!=null)r=t.clientX-nl.left,a=t.clientY-nl.top;else{if(r<0||a<0){De=-10,Re=-10;return}let[L,R]=Oe.scales,H=s.cursor.sync,[se,be]=H.values,[we,me]=H.scales,[X,I]=Oe.match,Ce=s.axes[0].side%2==1,Ne=k.ori==0?oe:P,tt=k.ori==1?oe:P,Me=Ce?h:c,He=Ce?c:h,ht=Ce?a:r,it=Ce?r:a;if(we!=null?r=X(L,we)?p(se,T[L],Ne,0):-10:r=Ne*(ht/Me),me!=null?a=I(R,me)?p(be,T[R],tt,0):-10:a=tt*(it/He),k.ori==1){let Tt=r;r=a,a=Tt}}y&&(s==null||s.cursor.event.type==rs)&&((r<=1||r>=oe-1)&&(r=ml(r,oe)),(a<=1||a>=P-1)&&(a=ml(a,P))),S?(ei=r,ti=a,[Pl,Rl]=x.move(n,r,a)):(De=r,Re=a)}const ts={width:0,height:0,left:0,top:0};function ls(){gn(ts,!1)}let ri,ai,ui,fi;function ci(t,s,r,a,c,h,w){el=!0,$e=Xe=nt._x=nt._y=!1,es(t,s,r,a,c,h,w,!0,!1),t!=null&&(U(as,ms,pi,!1),Xl(Si,n,Pl,Rl,oe,P,null));let{left:S,top:y,width:L,height:R}=Le;ri=S,ai=y,ui=L,fi=R}function pi(t,s,r,a,c,h,w){el=nt._x=nt._y=!1,es(t,s,r,a,c,h,w,!1,!0);let{left:S,top:y,width:L,height:R}=Le,H=L>0||R>0,se=ri!=S||ai!=y||ui!=L||fi!=R;if(H&&se&&gn(Le),nt.setScale&&H&&se){let be=S,we=L,me=y,X=R;if(k.ori==1&&(be=y,we=R,me=S,X=L),$e&&tl(M,It(be,M),It(be+we,M)),Xe)for(let I in T){let Ce=T[I];I!=M&&Ce.from==null&&Ce.min!=Ee&&tl(I,It(me+X,I),It(me,I))}ls()}else x.lock&&(x._lock=!x._lock,dl(s,!0,t!=null));t!=null&&(he(as,ms),Xl(as,n,De,Re,oe,P,null))}function Tr(t,s,r,a,c,h,w){if(x._lock)return;fl(t);let S=el;if(el){let y=!0,L=!0,R=10,H,se;k.ori==0?(H=$e,se=Xe):(H=Xe,se=$e),H&&se&&(y=De<=R||De>=oe-R,L=Re<=R||Re>=P-R),H&&y&&(De=De<Pl?0:oe),se&&L&&(Re=Re<Rl?0:P),dl(null,!0,!0),el=!1}De=-10,Re=-10,ve.fill(null),dl(null,!0,!0),S&&(el=S)}function di(t,s,r,a,c,h,w){x._lock||(fl(t),Hn(),ls(),t!=null&&Xl(Ti,n,De,Re,oe,P,null))}function hi(){D.forEach(Nu),Nn(n.width,n.height,!0)}wl(Tn,Ol,hi);const Vl={};Vl.mousedown=ci,Vl.mousemove=oi,Vl.mouseup=pi,Vl.dblclick=di,Vl.setSeries=(t,s,r,a)=>{let c=Oe.match[2];r=c(n,s,r),r!=-1&&Bt(r,a,!0,!1)},ae&&(U(Si,A,ci),U(rs,A,oi),U(yi,A,t=>{fl(t),$l(!1)}),U(ki,A,Tr),U(Ti,A,di),ys.add(n),n.syncRect=$l);const vn=n.hooks=e.hooks||{};function et(t,s,r){Jn?Jl.push([t,s,r]):t in vn&&vn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)vn[s]=(vn[s]||[]).concat(t.hooks[s])});const mi=(t,s,r)=>r,Oe=We({key:null,setSeries:!1,filters:{pub:Vi,sub:Vi},scales:[M,b[1]?b[1].scale:null],match:[Ni,Ni,mi],values:[null,null]},x.sync);Oe.match.length==2&&Oe.match.push(mi),x.sync=Oe;const gi=Oe.key,ns=Oo(gi);function Xl(t,s,r,a,c,h,w){Oe.filters.pub(t,s,r,a,c,h,w)&&ns.pub(t,s,r,a,c,h,w)}ns.sub(n);function Mr(t,s,r,a,c,h,w){Oe.filters.sub(t,s,r,a,c,h,w)&&Vl[t](null,s,r,a,c,h,w)}n.pub=Mr;function Er(){ns.unsub(n),ys.delete(n),Q.clear(),ws(Tn,Ol,hi),m.remove(),G?.remove(),et("destroy")}n.destroy=Er;function ss(){et("init",e,l),js(l||e.data,!1),W[M]?Zn(M,W[M]):Hn(),fn=Le.show&&(Le.width>0||Le.height>0),ul=yt=!0,Nn(e.width,e.height)}return b.forEach(Us),D.forEach(ir),i?i instanceof HTMLElement?(i.appendChild(m),ss()):i(n,ss):ss(),n}je.assign=We;je.fmtNum=Rs;je.rangeNum=Mn;je.rangeLog=Dn;je.rangeAsinh=Cs;je.orient=bl;je.pxRatio=xe;je.join=Aa;je.fmtDate=zs,je.tzDate=Oa;je.sync=Oo;{je.addGap=xu,je.clipGaps=Pn;let e=je.paths={points:Yo};e.linear=qo,e.stepped=ku,e.bars=Tu,e.spline=Eu}const Qo="/api",Hu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ou(e,l=24){const i=await fetch(`${Qo}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Wu(e=24){const l=await fetch(`${Qo}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Gu=qe('<button type="button"> </button>'),Bu=qe('<div class="chart-loading svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div> <span>Loading chart data...</span></div>'),Iu=qe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Uu=qe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yu=qe('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--amber-400);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function ju(e,l){Ts(l,!0);let i=Zt(()=>xn.config.smoothing_enabled),n=Zt(()=>xn.config.smoothing_samples),o=At("UTC"),f=At(!1),u=Zt(()=>xn.config.temp_units==="C"),p,d=null,m=At(!0),_=At(null),g=At(24),v=At(wi([])),C=At(wi([]));const A={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},F="#fbbf24",z="rgba(251, 191, 36, 0.3)",B="#71717a",b="#a1a1aa",D="rgba(255, 255, 255, 0.04)",T="#22d3ee";function te(x,Z,ae){const $=F,G=A[l.tiltColor]||b;return{width:x,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(le,N,E)=>{const ce=(E-N)*.1||.005;return[N-ce,E+ce]}},temp:{auto:!0,range:(le,N,E)=>{const ce=E-N,pe=10;if(ce<pe){const Je=(E+N)/2;return[Je-pe/2,Je+pe/2]}const ye=ce*.1;return[N-ye,E+ye]}}},axes:[{stroke:B,grid:{stroke:D,width:1},ticks:{stroke:D,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(le,N)=>N.map(E=>{const ce=new Date(E*1e3);return q(g)<=24?ce.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZone:ae}):ce.toLocaleDateString([],{month:"short",day:"numeric",timeZone:ae})})},{scale:"sg",stroke:$,grid:{stroke:D,width:1},ticks:{stroke:D,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(le,N)=>N.map(E=>E.toFixed(3)),side:3},{scale:"temp",stroke:G,grid:{show:!1},ticks:{stroke:D,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(le,N)=>N.map(E=>E.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:$,width:2,fill:(le,N)=>{const E=le.ctx.createLinearGradient(0,le.bbox.top,0,le.bbox.top+le.bbox.height);return E.addColorStop(0,z),E.addColorStop(1,"transparent"),E},points:{show:!1},paths:je.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:G,width:1.5,dash:[4,4],points:{show:!1},paths:je.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:T,width:1.5,dash:[2,4],points:{show:!1},paths:je.paths.spline?.()}]}}function M(x,Z){if(Z<=1)return x;const ae=[];for(let $=0;$<x.length;$++){const G=[],le=Math.floor(Z/2);for(let N=Math.max(0,$-le);N<=Math.min(x.length-1,$+le);N++){const E=x[N];E!==null&&G.push(E)}G.length>0?ae.push(G.reduce((N,E)=>N+E,0)/G.length):ae.push(null)}return ae}function K(x,Z,ae,$,G){if(x.length<=G)return[x,Z,ae,$];const le=Math.ceil(x.length/G),N=[],E=[],ce=[],pe=[];for(let ye=0;ye<x.length;ye+=le){const Je=Math.min(ye+le,x.length);let Lt=0,ct=0,Ht=0,Ot=0,Q=0,U=0;for(let he=ye;he<Je;he++)Z[he]!==null&&(Lt+=Z[he],ct++),ae[he]!==null&&(Ht+=ae[he],Ot++),$[he]!==null&&(Q+=$[he],U++);N.push(x[Math.floor((ye+Je-1)/2)]),E.push(ct>0?Lt/ct:null),ce.push(Ot>0?Ht/Ot:null),pe.push(U>0?Q/U:null)}return[N,E,ce,pe]}function Y(x,Z,ae){if(x.length===0||Z.length===0)return Z.map(()=>null);const $=[...x].sort((N,E)=>new Date(N.timestamp).getTime()-new Date(E.timestamp).getTime()),G=$.map(N=>new Date(N.timestamp).getTime()/1e3),le=$.map(N=>N.temperature===null?null:ae?N.temperature:N.temperature*9/5+32);return Z.map(N=>{let E=null,ce=null;for(let pe=0;pe<G.length;pe++)if(G[pe]<=N&&(E={time:G[pe],temp:le[pe]}),G[pe]>=N&&ce===null){ce={time:G[pe],temp:le[pe]};break}if(E&&ce&&E.temp!==null&&ce.temp!==null){if(E.time===ce.time)return E.temp;const pe=(N-E.time)/(ce.time-E.time);return E.temp+pe*(ce.temp-E.temp)}return E!==null&&E.temp!==null?E.temp:ce!==null&&ce.temp!==null?ce.temp:null})}function ne(x,Z,ae){const $=[...x].reverse();let G=[],le=[],N=[];for(const pe of $){G.push(new Date(pe.timestamp).getTime()/1e3),le.push(pe.sg_calibrated??pe.sg_raw);const ye=pe.temp_calibrated??pe.temp_raw;ye!==null?N.push(ae?Rr(ye):ye):N.push(null)}let E=Y(Z,G,ae);return q(i)&&q(n)>1&&(le=M(le,q(n)),N=M(N,q(n)),E=M(E,q(n))),[G,le,N,E]=K(G,le,N,E,500),[G,le,N,E]}async function j(){Ue(m,!0),Ue(_,null);try{const[x,Z]=await Promise.all([Ou(l.tiltId,q(g)),Wu(q(g)).catch(()=>[])]);Ue(v,x,!0),Ue(C,Z,!0),k()}catch(x){Ue(_,x instanceof Error?x.message:"Failed to load data",!0)}finally{Ue(m,!1)}}function k(){if(!p||q(v).length===0)return;const x=ne(q(v),q(C),q(u)),Z=te(p.clientWidth,q(u),q(o));d&&d.destroy(),d=new je(Z,x,p)}function ee(){d&&p&&d.setSize({width:p.clientWidth,height:220})}oo(async()=>{try{const x=await fetch("/api/system/timezone");if(x.ok){const Z=await x.json();Ue(o,Z.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await j(),Ue(f,!0),window.addEventListener("resize",ee)}),Lr(()=>{d?.destroy(),window.removeEventListener("resize",ee)}),is(()=>{q(f)&&q(g)&&j()}),is(()=>{q(u)!==void 0&&q(v).length>0&&p&&k()}),is(()=>{q(i),q(n),q(v).length>0&&p&&k()});var V=Yu(),J=fe(V),W=fe(J);Es(W,21,()=>Hu,ro,(x,Z)=>{var ae=Gu();let $;ae.__click=()=>Ue(g,q(Z).hours,!0);var G=fe(ae,!0);re(ae),Kt(()=>{$=hs(ae,1,"range-btn svelte-1e832qd",null,$,{active:q(g)===q(Z).hours}),wt(G,q(Z).label)}),Ve(x,ae)}),re(W);var ue=Fe(W,2),O=Fe(fe(ue),2),Ge=fe(O);il(2),re(O),il(2),re(ue),re(J);var Se=Fe(J,2),de=fe(Se);{var ve=x=>{var Z=Bu();Ve(x,Z)},ie=x=>{var Z=ds(),ae=kn(Z);{var $=le=>{var N=Iu(),E=Fe(fe(N),2);E.__click=j,re(N),Ve(le,N)},G=le=>{var N=ds(),E=kn(N);{var ce=pe=>{var ye=Uu();Ve(pe,ye)};_t(E,pe=>{q(v).length===0&&pe(ce)},!0)}Ve(le,N)};_t(ae,le=>{q(_)?le($):le(G,!1)},!0)}Ve(x,Z)};_t(de,x=>{q(m)?x(ve):x(ie,!1)})}re(Se),uo(Se,x=>p=x,()=>p),re(V),Kt(()=>Sn(Ge,`background: ${(A[l.tiltColor]||"var(--text-secondary)")??""};`)),Ve(e,V),Ms()}io(["click"]);var qu=qe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),Ku=qe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Ju=qe('<div class="w-1 rounded-sm transition-all"></div>'),Zu=qe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qu=qe('<div class="chart-section svelte-3twv7v"><!></div>'),$u=qe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xu=qe('<div style="background: var(--bg-card); border: 1px solid var(--bg-hover);"><div class="h-1"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight reading-glow" style="color: var(--amber-400);"> </p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Gravity</p></div> <div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight text-[var(--text-primary)]"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full animate-pulse-soft" style="background: var(--tilt-green);"></div></div></div></div></div>');function ef(e,l){Ts(l,!0);let i=Br(l,"expanded",3,!1),n=At(!1),o=At(""),f=At(null),u=At(!1);function p(){Ue(o,l.tilt.beer_name,!0),Ue(n,!0),setTimeout(()=>q(f)?.focus(),0)}async function d(){if(q(u))return;const Q=q(o).trim();if(!Q||Q===l.tilt.beer_name){Ue(n,!1);return}Ue(u,!0);const U=await Hr(l.tilt.id,Q);Ue(u,!1),U&&Ue(n,!1)}function m(Q){Q.key==="Enter"?d():Q.key==="Escape"&&Ue(n,!1)}let _=Zt(ao);const g={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function v(Q){return Q.toFixed(3)}function C(Q){return Fr(Q)}function A(Q){return Q>=-50?{bars:4,color:"var(--tilt-green)"}:Q>=-60?{bars:3,color:"var(--tilt-green)"}:Q>=-70?{bars:2,color:"var(--amber-400)"}:{bars:1,color:"var(--tilt-red)"}}function F(Q){const U=Math.floor((Date.now()-new Date(Q).getTime())/1e3);if(U<10)return"just now";if(U<60)return`${U}s ago`;const he=Math.floor(U/60);if(he<60)return`${he}m ago`;const ze=Math.floor(he/60);return ze<24?`${ze}h ago`:`${Math.floor(ze/24)}d ago`}let z=Zt(()=>g[l.tilt.color]||"var(--tilt-black)"),B=Zt(()=>A(l.tilt.rssi)),b=Zt(()=>F(l.tilt.last_seen));var D=Xu();let T;var te=fe(D),M=Fe(te,2),K=fe(M),Y=fe(K),ne=fe(Y);{var j=Q=>{var U=qu();zr(U),U.__keydown=m,uo(U,he=>Ue(f,he),()=>q(f)),Kt(()=>U.disabled=q(u)),Ar("blur",U,d),Gr(U,()=>q(o),he=>Ue(o,he)),Ve(Q,U)},k=Q=>{var U=Ku();U.__click=p;var he=fe(U),ze=fe(he,!0);re(he),il(2),re(U),Kt(()=>wt(ze,l.tilt.beer_name)),Ve(Q,U)};_t(ne,Q=>{q(n)?Q(j):Q(k,!1)})}var ee=Fe(ne,2),V=fe(ee),J=Fe(V,2),W=fe(J,!0);re(J),re(ee),re(Y);var ue=Fe(Y,2),O=fe(ue);Es(O,20,()=>Array(4),ro,(Q,U,he)=>{var ze=Ju();Kt(()=>Sn(ze,`
								height: ${8+he*4}px;
								background: ${(he<q(B).bars?q(B).color:"var(--bg-hover)")??""};
								opacity: ${he<q(B).bars?1:.4};
							`)),Ve(Q,ze)}),re(O);var Ge=Fe(O,2),Se=fe(Ge);re(Ge),re(ue),re(K);var de=Fe(K,2),ve=fe(de),ie=fe(ve),x=fe(ie,!0);re(ie),il(2),re(ve);var Z=Fe(ve,2),ae=fe(Z),$=fe(ae,!0),G=Fe($),le=fe(G,!0);re(G),re(ae),il(2),re(Z),re(de);var N=Fe(de,2);{var E=Q=>{var U=Zu(),he=Fe(fe(U),2),ze=fe(he,!0);re(he);var pt=Fe(he,4),oe=fe(pt);re(pt),re(U),Kt((P,Te)=>{wt(ze,P),wt(oe,`${Te??""}${q(_)??""}`)},[()=>v(l.tilt.sg_raw),()=>C(l.tilt.temp_raw)]),Ve(Q,U)};_t(N,Q=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&Q(E)})}var ce=Fe(N,2);{var pe=Q=>{var U=Qu(),he=fe(U);ju(he,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),re(U),Ve(Q,U)};_t(ce,Q=>{i()&&Q(pe)})}var ye=Fe(ce,2),Je=fe(ye),Lt=fe(Je);re(Je);var ct=Fe(Je,2),Ht=fe(ct);{var Ot=Q=>{var U=$u();U.__click=function(...pt){l.onToggleExpand?.apply(this,pt)};var he=fe(U);let ze;re(U),Kt(()=>{Vr(U,"aria-label",i()?"Collapse chart":"Expand chart"),ze=hs(he,0,"w-4 h-4 transition-transform",null,ze,{"rotate-180":i()})}),Ve(Q,U)};_t(Ht,Q=>{l.onToggleExpand&&Q(Ot)})}il(2),re(ct),re(ye),re(M),re(D),Kt((Q,U)=>{T=hs(D,1,"card-glow rounded-xl overflow-hidden animate-fade-in-up svelte-3twv7v",null,T,{expanded:i()}),Sn(te,`background: ${q(z)??""}; box-shadow: 0 0 20px ${q(z)??""}40;`),Sn(V,`background: ${q(z)??""}; box-shadow: 0 0 8px ${q(z)??""};`),wt(W,l.tilt.color),wt(Se,`${l.tilt.rssi??""} dBm`),wt(x,Q),wt($,U),wt(le,q(_)),wt(Lt,`Updated ${q(b)??""}`)},[()=>v(l.tilt.sg),()=>C(l.tilt.temp)]),Ve(e,D),Ms()}io(["keydown","click"]);var tf=qe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),lf=qe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),nf=qe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),sf=qe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag"> </span> <span class="label svelte-1uha8ag">Temp</span></div>'),of=qe('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag">%</span> <span class="label svelte-1uha8ag">Humidity</span></div>'),rf=qe('<div class="ambient-card svelte-1uha8ag"><div class="ambient-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Room Ambient</span></div> <div class="ambient-values svelte-1uha8ag"><!> <!></div></div>'),af=qe('<div class="tilt-grid svelte-1uha8ag"></div> <!>',1);function _f(e,l){Ts(l,!0),oo(()=>(Or(),()=>Wr()));let i=Zt(()=>Array.from(jt.tilts.values())),n=At(null);function o(_){Ue(n,q(n)===_?null:_,!0)}function f(_){return xn.config.temp_units==="F"?(_*9/5+32).toFixed(1):_.toFixed(1)}var u=ds();Nr("1uha8ag",_=>{Cr(()=>{Pr.title="Dashboard | Tilt UI"})});var p=kn(u);{var d=_=>{var g=nf(),v=Fe(fe(g),4),C=fe(v);{var A=b=>{var D=Dr("Waiting for Tilt hydrometers to broadcast...");Ve(b,D)},F=b=>{var D=tf();Ve(b,D)};_t(C,b=>{jt.connected?b(A):b(F,!1)})}re(v);var z=Fe(v,2);{var B=b=>{var D=lf();Ve(b,D)};_t(z,b=>{jt.connected&&b(B)})}re(g),Ve(_,g)},m=_=>{var g=af(),v=kn(g);Es(v,21,()=>q(i),F=>F.id,(F,z)=>{{let B=Zt(()=>q(n)===q(z).id);ef(F,{get tilt(){return q(z)},get expanded(){return q(B)},onToggleExpand:()=>o(q(z).id)})}}),re(v);var C=Fe(v,2);{var A=F=>{var z=rf(),B=Fe(fe(z),2),b=fe(B);{var D=M=>{var K=sf(),Y=fe(K),ne=fe(Y,!0);re(Y);var j=Fe(Y,2),k=fe(j,!0);re(j),il(2),re(K),Kt((ee,V)=>{wt(ne,ee),wt(k,V)},[()=>f(jt.ambient.temperature),ao]),Ve(M,K)};_t(b,M=>{jt.ambient.temperature!==null&&M(D)})}var T=Fe(b,2);{var te=M=>{var K=of(),Y=fe(K),ne=fe(Y,!0);re(Y),il(4),re(K),Kt(j=>wt(ne,j),[()=>jt.ambient.humidity.toFixed(0)]),Ve(M,K)};_t(T,M=>{jt.ambient.humidity!==null&&M(te)})}re(B),re(z),Ve(F,z)};_t(C,F=>{jt.ambient&&(jt.ambient.temperature!==null||jt.ambient.humidity!==null)&&F(A)})}Ve(_,g)};_t(p,_=>{q(i).length===0?_(d):_(m,!1)})}Ve(e,u),Ms()}export{_f as component};
