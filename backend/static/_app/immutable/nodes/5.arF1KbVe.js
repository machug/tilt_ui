import{d as At,f as p,a as v,s as f,t as Ts,b as zs}from"../chunks/BHvHOtuG.js";import{ab as zt,ac as c,p as Ft,ad as Ht,ae as Et,af as It,s as l,V as Rt,ag as n,ah as t,ai as Ut,g as e,aj as s,an as C,al as x,ak as Cs}from"../chunks/BeYMcFNd.js";import{e as Mt,i as Pt}from"../chunks/Cn7aBH5Z.js";import{i as _}from"../chunks/Cd5u1CHp.js";import{c as w,h as Ot,r as H,s as Be,u as As}from"../chunks/D-gZUYAx.js";import{s as B}from"../chunks/80fypgvT.js";import{b as E}from"../chunks/BperHIsi.js";import{i as Nt,s as Bt,b as Dt}from"../chunks/UEX34lHC.js";var Lt=p('<div class="loading-state svelte-hj1sc2"><div class="loading-spinner svelte-hj1sc2"></div> <span class="svelte-hj1sc2">Loading system information...</span></div>'),Jt=p('<div class="info-grid svelte-hj1sc2"><div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Hostname</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Version</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">Uptime</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div> <div class="info-item svelte-hj1sc2"><span class="info-label svelte-hj1sc2">IP Address</span> <span class="info-value font-mono svelte-hj1sc2"> </span></div></div>'),Kt=p('<p class="text-muted svelte-hj1sc2">Unable to load system information</p>'),Vt=p('<div class="setting-row sub-setting svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Smoothing Samples</span> <span class="setting-description svelte-hj1sc2">Number of readings to average</span></div> <select class="select-input-sm svelte-hj1sc2"><option class="svelte-hj1sc2">3</option><option class="svelte-hj1sc2">5</option><option class="svelte-hj1sc2">10</option><option class="svelte-hj1sc2">15</option><option class="svelte-hj1sc2">20</option></select></div>'),Wt=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),qt=p('<p class="config-error svelte-hj1sc2"> </p>'),Yt=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),Gt=p('<option class="svelte-hj1sc2"> </option>'),Qt=p('<div class="loading-spinner-small svelte-hj1sc2"></div>'),Xt=p('<div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Connection Status</span></div> <span> </span></div>'),Zt=p("<span> </span>"),$t=p('<span class="loading-dot svelte-hj1sc2"></span> Saving...',1),ea=p('<p class="config-error svelte-hj1sc2"> </p>'),sa=p('<p class="config-success svelte-hj1sc2">Settings saved</p>'),ta=p('<!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Home Assistant URL</span> <span class="setting-description svelte-hj1sc2">e.g., http://192.168.1.100:8123</span></div> <input type="url" placeholder="http://homeassistant.local:8123" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Access Token</span> <span class="setting-description svelte-hj1sc2">Long-lived access token from HA profile</span></div> <input type="password" placeholder="Enter token..." class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Test Connection</span></div> <div class="test-connection svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Temp Entity</span> <span class="setting-description svelte-hj1sc2">e.g., sensor.fermenter_room_temperature</span></div> <input type="text" placeholder="sensor.xxx_temperature" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Ambient Humidity Entity</span> <span class="setting-description svelte-hj1sc2">Optional humidity sensor</span></div> <input type="text" placeholder="sensor.xxx_humidity" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Weather Entity</span> <span class="setting-description svelte-hj1sc2">For forecast display, e.g., weather.home</span></div> <input type="text" placeholder="weather.home" class="input-field svelte-hj1sc2"/></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Heater Switch Entity</span> <span class="setting-description svelte-hj1sc2">Switch to control fermentation heating</span></div> <input type="text" placeholder="switch.fermenter_heater" class="input-field svelte-hj1sc2"/></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div>',1),aa=p('<div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Total Readings</span></div> <div class="stat-item svelte-hj1sc2"><span class="stat-value font-mono svelte-hj1sc2"> </span> <span class="stat-label svelte-hj1sc2">Estimated Size</span></div>',1),na=p('<p class="text-muted svelte-hj1sc2">Unable to load storage stats</p>'),ia=p('<button type="button" class="btn-danger-sm svelte-hj1sc2"> </button>'),la=p('<p class="cleanup-message svelte-hj1sc2"> </p>'),oa=p('<span class="loading-dot svelte-hj1sc2"></span> Rebooting...',1),ra=zs('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" class="svelte-hj1sc2"></path></svg> Reboot System',1),ca=p('<span class="loading-dot svelte-hj1sc2"></span> Shutting down...',1),va=zs('<svg class="w-4 h-4 svelte-hj1sc2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" class="svelte-hj1sc2"></path></svg> Shutdown System',1),da=p('<div class="grid gap-6 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">System Information</h2></div> <div class="card-body svelte-hj1sc2"><!></div></div> <div class="grid gap-6 md:grid-cols-2 svelte-hj1sc2"><div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Application Settings</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Temperature Units</span> <span class="setting-description svelte-hj1sc2">Display temperature in Celsius or Fahrenheit</span></div> <div class="unit-toggle svelte-hj1sc2"><button type="button">°C</button> <button type="button">°F</button></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Minimum RSSI</span> <span class="setting-description svelte-hj1sc2">Ignore readings below this signal strength</span></div> <div class="rssi-input svelte-hj1sc2"><input type="number" min="-100" max="0" class="input-field-sm svelte-hj1sc2"/> <span class="input-suffix svelte-hj1sc2">dBm</span></div></div> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Reading Smoothing</span> <span class="setting-description svelte-hj1sc2">Average multiple readings to reduce noise</span></div> <button type="button" aria-label="Toggle reading smoothing"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!> <div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Identify by MAC</span> <span class="setting-description svelte-hj1sc2">Use MAC address instead of broadcast ID</span></div> <button type="button" aria-label="Toggle identify by MAC address"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <div class="mt-4 config-actions svelte-hj1sc2"><button type="button" class="btn-primary svelte-hj1sc2"><!></button> <!> <!></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Timezone</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description svelte-hj1sc2">Current timezone: <span class="font-mono text-[var(--amber-400)] svelte-hj1sc2"> </span></p> <div class="timezone-selector svelte-hj1sc2"><select class="select-input svelte-hj1sc2"></select> <!></div></div></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Home Assistant</h2></div> <div class="card-body svelte-hj1sc2"><div class="setting-row svelte-hj1sc2"><div class="setting-info svelte-hj1sc2"><span class="setting-label svelte-hj1sc2">Enable Integration</span> <span class="setting-description svelte-hj1sc2">Connect to Home Assistant for ambient temp and control</span></div> <button type="button" aria-label="Enable Home Assistant integration"><span class="toggle-slider svelte-hj1sc2"></span></button></div> <!></div></div> <div class="card svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Storage & Data Cleanup</h2></div> <div class="card-body svelte-hj1sc2"><div class="storage-grid svelte-hj1sc2"><div class="storage-stats svelte-hj1sc2"><!></div> <div class="cleanup-section svelte-hj1sc2"><p class="section-description mb-3 svelte-hj1sc2">Remove old readings to free up storage. Readings older than the specified days will be permanently deleted.</p> <div class="cleanup-controls svelte-hj1sc2"><div class="cleanup-input-group svelte-hj1sc2"><label for="retention-days" class="svelte-hj1sc2">Keep readings from last</label> <input id="retention-days" type="number" min="1" max="365" class="input-field-sm svelte-hj1sc2"/> <span class="svelte-hj1sc2">days</span></div> <div class="cleanup-actions svelte-hj1sc2"><button type="button" class="btn-secondary-sm svelte-hj1sc2"> </button> <!></div></div> <!></div></div></div></div> <div class="card danger-zone svelte-hj1sc2"><div class="card-header svelte-hj1sc2"><h2 class="card-title svelte-hj1sc2">Power Controls</h2></div> <div class="card-body svelte-hj1sc2"><p class="section-description danger-text svelte-hj1sc2">These actions will affect the entire system. Make sure you have saved any pending work.</p> <div class="power-buttons svelte-hj1sc2"><button type="button" class="btn-warning svelte-hj1sc2"><!></button> <button type="button" class="btn-danger svelte-hj1sc2"><!></button></div></div></div></div>'),pa=p('<div class="page-container svelte-hj1sc2"><div class="page-header svelte-hj1sc2"><h1 class="page-title svelte-hj1sc2">System</h1> <p class="page-description svelte-hj1sc2">System settings, timezone configuration, and power controls</p></div> <!></div>');function ba(Fs,Hs){zt(Hs,!0);let I=c(null),$=c(null),De=c(Ft([])),D=c(""),Le=c(!0),h=c(null),L=c("C"),ee=c(-100),R=c(!1),se=c(5),J=c(!1),te=c(!1),ae=c(null),ne=c(!1),K=c(30),k=c(null),U=c(!1),V=c(""),W=c(""),ie=c(""),le=c(""),oe=c(""),re=c(""),ce=c(!1),M=c(null),ve=c(null),de=c(!1),pe=c(null),he=c(!1);async function Es(){try{const i=await fetch("/api/system/info");i.ok&&l(I,await i.json(),!0)}catch(i){console.error("Failed to load system info:",i)}}async function Je(){try{const i=await fetch("/api/system/storage");i.ok&&l($,await i.json(),!0)}catch(i){console.error("Failed to load storage stats:",i)}}async function Is(){try{const[i,m]=await Promise.all([fetch("/api/system/timezones"),fetch("/api/system/timezone")]);if(i.ok){const T=await i.json();l(De,T.timezones||[],!0)}if(m.ok){const T=await m.json();l(D,T.timezone||"UTC",!0)}}catch(i){console.error("Failed to load timezones:",i)}}function Ke(){l(L,w.config.temp_units,!0),l(ee,w.config.min_rssi,!0),l(R,w.config.smoothing_enabled,!0),l(se,w.config.smoothing_samples,!0),l(J,w.config.id_by_mac,!0),l(U,w.config.ha_enabled,!0),l(V,w.config.ha_url,!0),l(W,w.config.ha_token,!0),l(ie,w.config.ha_ambient_temp_entity_id,!0),l(le,w.config.ha_ambient_humidity_entity_id,!0),l(oe,w.config.ha_weather_entity_id,!0),l(re,w.config.ha_heater_entity_id,!0)}async function Rs(){l(te,!0),l(ae,null),l(ne,!1);try{const i=await As({temp_units:e(L),min_rssi:e(ee),smoothing_enabled:e(R),smoothing_samples:e(se),id_by_mac:e(J)});i.success?(l(ne,!0),setTimeout(()=>l(ne,!1),3e3)):l(ae,i.error||"Failed to save settings",!0)}finally{l(te,!1)}}async function Us(){l(de,!0),l(pe,null),l(he,!1);try{const i=await As({ha_enabled:e(U),ha_url:e(V),ha_token:e(W),ha_ambient_temp_entity_id:e(ie),ha_ambient_humidity_entity_id:e(le),ha_weather_entity_id:e(oe),ha_heater_entity_id:e(re)});i.success?(l(he,!0),setTimeout(()=>l(he,!1),3e3),await We()):l(pe,i.error||"Failed to save settings",!0)}finally{l(de,!1)}}async function Ms(i){l(h,"timezone");try{(await fetch("/api/system/timezone",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({timezone:i})})).ok&&l(D,i,!0)}catch(m){console.error("Failed to set timezone:",m)}finally{l(h,null)}}async function Ps(){l(h,"cleanup-preview");try{const i=await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(K),confirm:!1})});i.ok&&l(k,await i.json(),!0)}catch(i){console.error("Failed to preview cleanup:",i)}finally{l(h,null)}}async function Os(){if(!(!e(k)||e(k).readings_to_delete===0)&&confirm(`Delete ${e(k).readings_to_delete.toLocaleString()} readings older than ${e(K)} days?`)){l(h,"cleanup");try{(await fetch("/api/system/cleanup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({retention_days:e(K),confirm:!0})})).ok&&(l(k,null),await Je())}catch(i){console.error("Failed to execute cleanup:",i)}finally{l(h,null)}}}async function Ns(){if(confirm("Are you sure you want to reboot the system? The UI will be unavailable until restart completes.")){l(h,"reboot");try{await fetch("/api/system/reboot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Reboot command failed:",i)}finally{l(h,null)}}}async function Bs(){if(confirm("Are you sure you want to shut down the system? You will need physical access to restart.")){l(h,"shutdown");try{await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({confirm:!0})})}catch(i){console.error("Shutdown command failed:",i)}finally{l(h,null)}}}function Ds(i){if(!i)return"Unknown";const m=Math.floor(i/86400),T=Math.floor(i%86400/3600),q=Math.floor(i%3600/60),P=[];return m>0&&P.push(`${m}d`),T>0&&P.push(`${T}h`),q>0&&P.push(`${q}m`),P.length>0?P.join(" "):"< 1m"}function Ls(i){return!Number.isFinite(i)||i<0?"0 B":i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`}function Ve(i){return i.toLocaleString()}async function Js(){l(ce,!0),l(M,null);try{const i=await fetch("/api/ha/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e(V),token:e(W)})});i.ok?l(M,await i.json(),!0):l(M,{success:!1,message:"Request failed"},!0)}catch{l(M,{success:!1,message:"Network error"},!0)}finally{l(ce,!1)}}async function We(){try{const i=await fetch("/api/ha/status");i.ok&&l(ve,await i.json(),!0)}catch(i){console.error("Failed to load HA status:",i)}}Ht(async()=>{await Promise.all([Es(),Je(),Is(),We()]),Ke(),l(Le,!1)}),Et(()=>{w.loaded&&Ke()});var me=pa();Ot("hj1sc2",i=>{Rt(()=>{Ut.title="System | Tilt UI"})});var Ks=n(t(me),2);{var Vs=i=>{var m=Lt();v(i,m)},Ws=i=>{var m=da(),T=t(m),q=n(t(T),2),P=t(q);{var qs=a=>{var o=Jt(),d=t(o),g=n(t(d),2),j=t(g,!0);s(g),s(d);var y=n(d,2),b=n(t(y),2),z=t(b);s(b),s(y);var S=n(y,2),O=n(t(S),2),N=t(O,!0);s(O),s(S);var _e=n(S,2),fe=n(t(_e),2),Me=t(fe,!0);s(fe),s(_e),s(o),x(X=>{f(j,e(I).hostname),f(z,`v${e(I).version??""}`),f(N,X),f(Me,e(I).ip_addresses.length>0?e(I).ip_addresses[0]:"Unknown")},[()=>Ds(e(I).uptime_seconds)]),v(a,o)},Ys=a=>{var o=Kt();v(a,o)};_(P,a=>{e(I)?a(qs):a(Ys,!1)})}s(q),s(T);var je=n(T,2),ye=t(je),qe=n(t(ye),2),be=t(qe),Ye=n(t(be),2),we=t(Ye);let Ge;we.__click=()=>l(L,"C");var Qe=n(we,2);let Xe;Qe.__click=()=>l(L,"F"),s(Ye),s(be);var Se=n(be,2),Ze=n(t(Se),2),$e=t(Ze);H($e),C(2),s(Ze),s(Se);var xe=n(Se,2),ke=n(t(xe),2);let es;ke.__click=()=>l(R,!e(R)),s(xe);var ss=n(xe,2);{var Gs=a=>{var o=Vt(),d=n(t(o),2),g=t(d);g.value=g.__value=3;var j=n(g);j.value=j.__value=5;var y=n(j);y.value=y.__value=10;var b=n(y);b.value=b.__value=15;var z=n(b);z.value=z.__value=20,s(d),s(o),Dt(d,()=>e(se),S=>l(se,S)),v(a,o)};_(ss,a=>{e(R)&&a(Gs)})}var Te=n(ss,2),Ce=n(t(Te),2);let ts;Ce.__click=()=>l(J,!e(J)),s(Te);var as=n(Te,2),Y=t(as);Y.__click=Rs;var Qs=t(Y);{var Xs=a=>{var o=Wt();C(),v(a,o)},Zs=a=>{var o=Ts("Save Settings");v(a,o)};_(Qs,a=>{e(te)?a(Xs):a(Zs,!1)})}s(Y);var ns=n(Y,2);{var $s=a=>{var o=qt(),d=t(o,!0);s(o),x(()=>f(d,e(ae))),v(a,o)};_(ns,a=>{e(ae)&&a($s)})}var et=n(ns,2);{var st=a=>{var o=Yt();v(a,o)};_(et,a=>{e(ne)&&a(st)})}s(as),s(qe),s(ye);var is=n(ye,2),ls=n(t(is),2),Ae=t(ls),os=n(t(Ae)),tt=t(os,!0);s(os),s(Ae);var rs=n(Ae,2),A=t(rs);A.__change=a=>Ms(a.currentTarget.value),Mt(A,21,()=>e(De),Pt,(a,o)=>{var d=Gt(),g=t(d,!0);s(d);var j={};x(()=>{f(g,e(o)),j!==(j=e(o))&&(d.value=(d.__value=e(o))??"")}),v(a,d)}),s(A);var cs;Nt(A);var at=n(A,2);{var nt=a=>{var o=Qt();v(a,o)};_(at,a=>{e(h)==="timezone"&&a(nt)})}s(rs),s(ls),s(is),s(je);var ze=n(je,2),vs=n(t(ze),2),Fe=t(vs),He=n(t(Fe),2);let ds;He.__click=()=>l(U,!e(U)),s(Fe);var it=n(Fe,2);{var lt=a=>{var o=ta(),d=Cs(o);{var g=r=>{var u=Xt(),F=n(t(u),2);let ge;var Ct=t(F,!0);s(F),s(u),x(()=>{ge=B(F,1,"status-badge svelte-hj1sc2",null,ge,{connected:e(ve).connected}),f(Ct,e(ve).connected?"Connected":"Disconnected")}),v(r,u)};_(d,r=>{e(ve)&&r(g)})}var j=n(d,2),y=n(t(j),2);H(y),s(j);var b=n(j,2),z=n(t(b),2);H(z),s(b);var S=n(b,2),O=n(t(S),2),N=t(O);N.__click=Js;var _e=t(N,!0);s(N);var fe=n(N,2);{var Me=r=>{var u=Zt();let F;var ge=t(u,!0);s(u),x(()=>{F=B(u,1,"test-result svelte-hj1sc2",null,F,{success:e(M).success}),f(ge,e(M).message)}),v(r,u)};_(fe,r=>{e(M)&&r(Me)})}s(O),s(S);var X=n(S,2),ys=n(t(X),2);H(ys),s(X);var Pe=n(X,2),bs=n(t(Pe),2);H(bs),s(Pe);var Oe=n(Pe,2),ws=n(t(Oe),2);H(ws),s(Oe);var Ne=n(Oe,2),Ss=n(t(Ne),2);H(Ss),s(Ne);var xs=n(Ne,2),Z=t(xs);Z.__click=Us;var bt=t(Z);{var wt=r=>{var u=$t();C(),v(r,u)},St=r=>{var u=Ts("Save HA Settings");v(r,u)};_(bt,r=>{e(de)?r(wt):r(St,!1)})}s(Z);var ks=n(Z,2);{var xt=r=>{var u=ea(),F=t(u,!0);s(u),x(()=>f(F,e(pe))),v(r,u)};_(ks,r=>{e(pe)&&r(xt)})}var kt=n(ks,2);{var Tt=r=>{var u=sa();v(r,u)};_(kt,r=>{e(he)&&r(Tt)})}s(xs),x(()=>{N.disabled=e(ce)||!e(V)||!e(W),f(_e,e(ce)?"Testing...":"Test"),Z.disabled=e(de)}),E(y,()=>e(V),r=>l(V,r)),E(z,()=>e(W),r=>l(W,r)),E(ys,()=>e(ie),r=>l(ie,r)),E(bs,()=>e(le),r=>l(le,r)),E(ws,()=>e(oe),r=>l(oe,r)),E(Ss,()=>e(re),r=>l(re,r)),v(a,o)};_(it,a=>{e(U)&&a(lt)})}s(vs),s(ze);var Ee=n(ze,2),ps=n(t(Ee),2),hs=t(ps),Ie=t(hs),ot=t(Ie);{var rt=a=>{var o=aa(),d=Cs(o),g=t(d),j=t(g,!0);s(g),C(2),s(d);var y=n(d,2),b=t(y),z=t(b,!0);s(b),C(2),s(y),x((S,O)=>{f(j,S),f(z,O)},[()=>Ve(e($).total_readings),()=>Ls(e($).estimated_size_bytes)]),v(a,o)},ct=a=>{var o=na();v(a,o)};_(ot,a=>{e($)?a(rt):a(ct,!1)})}s(Ie);var us=n(Ie,2),Re=n(t(us),2),Ue=t(Re),_s=n(t(Ue),2);H(_s),C(2),s(Ue);var fs=n(Ue,2),G=t(fs);G.__click=Ps;var vt=t(G,!0);s(G);var dt=n(G,2);{var pt=a=>{var o=ia();o.__click=Os;var d=t(o,!0);s(o),x(g=>{o.disabled=e(h)!==null,f(d,g)},[()=>e(h)==="cleanup"?"Deleting...":`Delete ${Ve(e(k).readings_to_delete)} readings`]),v(a,o)};_(dt,a=>{e(k)&&e(k).readings_to_delete>0&&a(pt)})}s(fs),s(Re);var ht=n(Re,2);{var ut=a=>{var o=la(),d=t(o);s(o),x(()=>f(d,`No readings older than ${e(K)??""} days found.`)),v(a,o)};_(ht,a=>{e(k)&&e(k).readings_to_delete===0&&a(ut)})}s(us),s(hs),s(ps),s(Ee);var gs=n(Ee,2),ms=n(t(gs),2),js=n(t(ms),2),Q=t(js);Q.__click=Ns;var _t=t(Q);{var ft=a=>{var o=oa();C(),v(a,o)},gt=a=>{var o=ra();C(),v(a,o)};_(_t,a=>{e(h)==="reboot"?a(ft):a(gt,!1)})}s(Q);var ue=n(Q,2);ue.__click=Bs;var mt=t(ue);{var jt=a=>{var o=ca();C(),v(a,o)},yt=a=>{var o=va();C(),v(a,o)};_(mt,a=>{e(h)==="shutdown"?a(jt):a(yt,!1)})}s(ue),s(js),s(ms),s(gs),s(m),x(()=>{Ge=B(we,1,"unit-btn svelte-hj1sc2",null,Ge,{active:e(L)==="C"}),Xe=B(Qe,1,"unit-btn svelte-hj1sc2",null,Xe,{active:e(L)==="F"}),es=B(ke,1,"toggle svelte-hj1sc2",null,es,{active:e(R)}),Be(ke,"aria-pressed",e(R)),ts=B(Ce,1,"toggle svelte-hj1sc2",null,ts,{active:e(J)}),Be(Ce,"aria-pressed",e(J)),Y.disabled=e(te),f(tt,e(D)),A.disabled=e(h)==="timezone",cs!==(cs=e(D))&&(A.value=(A.__value=e(D))??"",Bt(A,e(D))),ds=B(He,1,"toggle svelte-hj1sc2",null,ds,{active:e(U)}),Be(He,"aria-pressed",e(U)),G.disabled=e(h)!==null,f(vt,e(h)==="cleanup-preview"?"Checking...":"Preview"),Q.disabled=e(h)!==null,ue.disabled=e(h)!==null}),E($e,()=>e(ee),a=>l(ee,a)),E(_s,()=>e(K),a=>l(K,a)),v(i,m)};_(Ks,i=>{e(Le)?i(Vs):i(Ws,!1)})}s(me),v(Fs,me),It()}At(["click","change"]);export{ba as component};
