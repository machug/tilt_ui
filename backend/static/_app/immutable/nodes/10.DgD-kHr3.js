import{d as C,f as u,e as m,a as d,s as U}from"../chunks/VJxl01KV.js";import{ag as $,ar as g,ai as q,e as A,aj as o,ak as c,al as E,b as l,an as h,am as p,s as t,as as O,aq as P}from"../chunks/Clf_rkwX.js";import{i as b}from"../chunks/DNJ1XFdY.js";import{h as T}from"../chunks/BrdizEQO.js";import{s as W}from"../chunks/BRatOhsB.js";import{g as B}from"../chunks/DnfLfXwZ.js";import{i as G}from"../chunks/BWleEPaN.js";var H=u('<div class="spinner svelte-559ncu"></div> <p class="drop-text svelte-559ncu">Importing recipe...</p>',1),J=u('<div class="upload-icon svelte-559ncu">ðŸ“„</div> <p class="drop-text svelte-559ncu">Drop BeerXML file here</p> <p class="drop-subtext svelte-559ncu">or click to browse</p> <input type="file" accept=".xml" class="file-input svelte-559ncu"/>',1),K=u('<div class="error-box svelte-559ncu"><svg class="error-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="error-text svelte-559ncu"> </p></div>'),N=u(`<div class="page-container svelte-559ncu"><div class="back-link svelte-559ncu"><a href="/recipes" class="back-btn svelte-559ncu"><svg class="back-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="import-container svelte-559ncu"><h1 class="page-title svelte-559ncu">Import Recipe</h1> <p class="page-description svelte-559ncu">Upload BeerXML files from Brewfather, BeerSmith, Brewer's Friend, or any brewing software</p> <div role="button" tabindex="0"><!></div> <div class="file-info svelte-559ncu"><p class="info-text svelte-559ncu">Supported: .xml files (max 1MB)</p></div> <!></div></div>`);function se(w,M){$(M,!0);let n=h(!1),i=h(null),v=h(!1);async function _(e){if(t(i,null),!e.name.endsWith(".xml")){t(i,"Please upload a .xml BeerXML file");return}if(e.size>1e6){t(i,"File must be smaller than 1MB");return}t(n,!0);try{const a=await G(e);a.length===1?B(`/recipes/${a[0].id}`):B("/recipes")}catch(a){t(i,a instanceof Error?a.message:"Failed to import recipe",!0)}finally{t(n,!1)}}function D(e){e.preventDefault(),t(v,!1);const a=e.dataTransfer?.files[0];a&&_(a)}function y(e){e.preventDefault(),t(v,!0)}function F(){t(v,!1)}function L(e){const s=e.target.files?.[0];s&&_(s)}var f=N();T("559ncu",e=>{A(()=>{E.title="Import Recipe | BrewSignal"})});var x=o(c(f),2),r=o(c(x),4);let k;var I=c(r);{var X=e=>{var a=H();O(2),d(e,a)},j=e=>{var a=J(),s=o(P(a),6);s.__change=L,g(()=>s.disabled=l(n)),d(e,a)};b(I,e=>{l(n)?e(X):e(j,!1)})}p(r);var z=o(r,4);{var R=e=>{var a=K(),s=o(c(a),2),S=c(s,!0);p(s),p(a),g(()=>U(S,l(i))),d(e,a)};b(z,e=>{l(i)&&e(R)})}p(x),p(f),g(()=>k=W(r,1,"drop-zone svelte-559ncu",null,k,{active:l(v),uploading:l(n)})),m("drop",r,D),m("dragover",r,y),m("dragleave",r,F),d(w,f),q()}C(["change"]);export{se as component};
