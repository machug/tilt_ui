import{d as io,f as Ze,s as _t,a as He,c as ds,e as Ar,t as Dr}from"../chunks/BHvHOtuG.js";import{ab as Ts,ac as Dt,p as wi,ad as oo,s as qe,aD as Lr,ae as is,g as Z,am as Zt,ah as pe,aj as ae,al as Kt,ag as Ve,an as il,af as Ms,ak as kn,V as Cr,ai as Pr}from"../chunks/BeYMcFNd.js";import{e as Es,i as ro}from"../chunks/Cn7aBH5Z.js";import{i as bt}from"../chunks/Cd5u1CHp.js";import{c as xn,f as Rr,g as ao,b as zr,r as Fr,s as Vr,h as Nr}from"../chunks/D-gZUYAx.js";import{u as Hr,c as Or,d as Wr,t as jt}from"../chunks/fLeet4l0.js";import{s as hs}from"../chunks/80fypgvT.js";import{s as Sn}from"../chunks/CoDAZAoR.js";import{b as Gr}from"../chunks/BperHIsi.js";import{b as uo,p as Br}from"../chunks/UOvl9E0t.js";const Ur=!0,Qe="u-",Ir="uplot",Yr=Qe+"hz",jr=Qe+"vt",qr=Qe+"title",Kr=Qe+"wrap",Jr=Qe+"under",Zr=Qe+"over",Qr=Qe+"axis",vl=Qe+"off",$r=Qe+"select",Xr=Qe+"cursor-x",ea=Qe+"cursor-y",ta=Qe+"cursor-pt",la=Qe+"legend",na=Qe+"live",sa=Qe+"inline",ia=Qe+"series",oa=Qe+"marker",_i=Qe+"label",ra=Qe+"value",ln="width",nn="height",en="top",bi="bottom",Nl="left",os="right",As="#000",xi=As+"0",rs="mousemove",Si="mousedown",as="mouseup",yi="mouseenter",ki="mouseleave",Ti="dblclick",aa="resize",ua="scroll",Mi="change",Tn="dppxchange",Ds="--",Il=typeof window<"u",ms=Il?document:null,Ol=Il?window:null,ca=Il?navigator:null;let Se,wn;function gs(){let e=devicePixelRatio;Se!=e&&(Se=e,wn&&ws(Mi,wn,gs),wn=matchMedia(`(min-resolution: ${Se-.001}dppx) and (max-resolution: ${Se+.001}dppx)`),wl(Mi,wn,gs),Ol.dispatchEvent(new CustomEvent(Tn)))}function wt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function vs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Re(e,l,i){e.style[l]=i+"px"}function Ft(e,l,i,n){let o=ms.createElement(e);return l!=null&&wt(o,l),i?.insertBefore(o,n),o}function At(e,l){return Ft("div",e,l)}const Ei=new WeakMap;function qt(e,l,i,n,o){let c="translate("+l+"px,"+i+"px)",u=Ei.get(e);c!=u&&(e.style.transform=c,Ei.set(e,c),l<0||i<0||l>n||i>o?wt(e,vl):vs(e,vl))}const Ai=new WeakMap;function Di(e,l,i){let n=l+i,o=Ai.get(e);n!=o&&(Ai.set(e,n),e.style.background=l,e.style.borderColor=i)}const Li=new WeakMap;function Ci(e,l,i,n){let o=l+""+i,c=Li.get(e);o!=c&&(Li.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ls={passive:!0},fa={...Ls,capture:!0};function wl(e,l,i,n){l.addEventListener(e,i,n?fa:Ls)}function ws(e,l,i,n){l.removeEventListener(e,i,Ls)}Il&&gs();function Vt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)o=c?i+n>>1:xt((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function co(e){return(i,n,o)=>{let c=-1,u=-1;for(let p=n;p<=o;p++)if(e(i[p])){c=p;break}for(let p=o;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const fo=e=>e!=null,po=e=>e!=null&&e>0,An=co(fo),pa=co(po);function da(e,l,i,n=0,o=!1){let c=o?pa:An,u=o?po:fo;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let m=l;m<=i;m++){let _=e[m];u(_)&&(_<p?p=_:_>d&&(d=_))}return[p??Ae,d??-Ae]}function Dn(e,l,i,n){let o=zi(e),c=zi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Qt:ho,p=o==1?xt:Lt,d=c==1?Lt:xt,m=p(u(Ke(e))),_=d(u(Ke(l))),g=Wl(i,m),v=Wl(i,_);return i==10&&(m<0&&(g=De(g,-m)),_<0&&(v=De(v,-_))),n||i==2?(e=g*o,l=v*c):(e=wo(e,g),l=Ln(l,v)),[e,l]}function Cs(e,l,i,n){let o=Dn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Ps=.1,Pi={mode:3,pad:Ps},on={pad:0,soft:null,mode:0},ha={min:on,max:on};function Mn(e,l,i,n){return Cn(i)?Ri(e,l,i):(on.pad=i,on.soft=n?0:null,on.mode=n?3:0,Ri(e,l,ha))}function be(e,l){return e??l}function ma(e,l,i){for(l=be(l,0),i=be(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ri(e,l,i){let n=i.min,o=i.max,c=be(n.pad,0),u=be(o.pad,0),p=be(n.hard,-Ae),d=be(o.hard,Ae),m=be(n.soft,Ae),_=be(o.soft,-Ae),g=be(n.mode,0),v=be(o.mode,0),D=l-e,M=Qt(D),P=ft(Ke(e),Ke(l)),z=Qt(P),U=Ke(z-M);(D<1e-24||U>10)&&(D=0,(e==0||l==0)&&(D=1e-24,g==2&&m!=Ae&&(c=0),v==2&&_!=-Ae&&(u=0)));let b=D||P||1e3,E=Qt(b),y=Wl(10,xt(E)),ne=b*(D==0?e==0?.1:1:c),T=De(wo(e-ne,y/10),24),J=e>=m&&(g==1||g==3&&T<=m||g==2&&T>=m)?m:Ae,K=ft(p,T<J&&e>=J?J:Nt(J,T)),le=b*(D==0?l==0?.1:1:u),Q=De(Ln(l+le,y/10),24),k=l<=_&&(v==1||v==3&&Q>=_||v==2&&Q<=_)?_:-Ae,ee=Nt(d,Q>k&&l<=k?k:ft(k,Q));return K==ee&&K==0&&(ee=100),[K,ee]}const ga=new Intl.NumberFormat(Il?ca.language:"en-US"),Rs=e=>ga.format(e),St=Math,yn=St.PI,Ke=St.abs,xt=St.floor,je=St.round,Lt=St.ceil,Nt=St.min,ft=St.max,Wl=St.pow,zi=St.sign,Qt=St.log10,ho=St.log2,va=(e,l=1)=>St.sinh(e)*l,us=(e,l=1)=>St.asinh(e/l),Ae=1/0;function Fi(e){return(Qt((e^e>>31)-(e>>31))|0)+1}function _s(e,l,i){return Nt(ft(e,l),i)}function mo(e){return typeof e=="function"}function ve(e){return mo(e)?e:()=>e}const wa=()=>{},go=e=>e,vo=(e,l)=>l,_a=e=>null,Vi=e=>!0,Ni=(e,l)=>e==l,ba=/\.\d*?(?=9{6,}|0{6,})/gm,_l=e=>{if(bo(e)||ol.has(e))return e;const l=`${e}`,i=l.match(ba);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,c]=l.split("e");return+`${_l(o)}e${c}`}return De(e,n)};function ml(e,l){return _l(De(_l(e/l))*l)}function Ln(e,l){return _l(Lt(_l(e/l))*l)}function wo(e,l){return _l(xt(_l(e/l))*l)}function De(e,l=0){if(bo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return je(n)/i}const ol=new Map;function _o(e){return((""+e).split(".")[1]||"").length}function an(e,l,i,n){let o=[],c=n.map(_o);for(let u=l;u<i;u++){let p=Ke(u),d=De(Wl(e,u),p);for(let m=0;m<n.length;m++){let _=e==10?+`${n[m]}e${u}`:n[m]*d,g=(u>=0?0:p)+(u>=c[m]?0:c[m]),v=e==10?_:De(_,g);o.push(v),ol.set(v,g)}}return o}const rn={},zs=[],Gl=[null,null],sl=Array.isArray,bo=Number.isInteger,xa=e=>e===void 0;function Hi(e){return typeof e=="string"}function Cn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Sa(e){return e!=null&&typeof e=="object"}const ya=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Bl(e,l=Cn){let i;if(sl(e)){let n=e.find(o=>o!=null);if(sl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof ya)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Bl(e[n],l))}else i=e;return i}function Ie(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(Cn(e[o])?Ie(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const ka=0,Ta=1,Ma=2;function Ea(e,l,i){for(let n=0,o,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[c=o++]=null}}}function Aa(e,l){if(Ca(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Pa(u[0])||(u=La(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],m=d.length;for(let _=0;_<m;_++)i.add(d[_])}let n=[Array.from(i).sort((u,p)=>u-p)],o=n[0].length,c=new Map;for(let u=0;u<o;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let m=1;m<p.length;m++){let _=p[m],g=Array(o).fill(void 0),v=l?l[u][m]:Ta,D=[];for(let M=0;M<_.length;M++){let P=_[M],z=c.get(d[M]);P===null?v!=ka&&(g[z]=P,v==Ma&&D.push(z)):g[z]=P}Ea(g,D,o),n.push(g)}}return n}const Da=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function La(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let o=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];o.push(p)}return o}function Ca(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let c=0;c<i;c++)if(o[c]!=l[c])return!1}}return!0}function Pa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const c=ft(1,xt((o-n+1)/l));for(let u=e[n],p=n+c;p<=o;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const So=["January","February","March","April","May","June","July","August","September","October","November","December"],yo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ko(e){return e.slice(0,3)}const Ra=yo.map(ko),za=So.map(ko),Fa={MMMM:So,MMM:za,WWWW:yo,WWW:Ra};function tn(e){return(e<10?"0":"")+e}function Va(e){return(e<10?"00":e<100?"0":"")+e}const Na={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>tn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>tn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>tn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>tn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>tn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Va(e.getMilliseconds())};function Fs(e,l){l=l||Fa;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Na[o[1]]:o[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ha=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Oa(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ha?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const To=e=>e%1==0,En=[1,2,2.5,5],Wa=an(10,-32,0,En),Mo=an(10,0,32,En),Ga=Mo.filter(To),gl=Wa.concat(Mo),Vs=`
`,Eo="{YYYY}",Oi=Vs+Eo,Ao="{M}/{D}",sn=Vs+Ao,_n=sn+"/{YY}",Do="{aa}",Ba="{h}:{mm}",Hl=Ba+Do,Wi=Vs+Hl,Gi=":{ss}",ye=null;function Lo(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,c=o*30,u=o*365,d=(e==1?an(10,0,3,En).filter(To):an(10,-3,0,En)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Eo,ye,ye,ye,ye,ye,ye,1],[o*28,"{MMM}",Oi,ye,ye,ye,ye,ye,1],[o,Ao,Oi,ye,ye,ye,ye,ye,1],[n,"{h}"+Do,_n,ye,sn,ye,ye,ye,1],[i,Hl,_n,ye,sn,ye,ye,ye,1],[l,Gi,_n+" "+Hl,ye,sn+" "+Hl,ye,Wi,ye,1],[e,Gi+".{fff}",_n+" "+Hl,ye,sn+" "+Hl,ye,Wi,ye,1]];function _(g){return(v,D,M,P,z,U)=>{let b=[],E=z>=u,y=z>=c&&z<u,ne=g(M),T=De(ne*e,3),J=cs(ne.getFullYear(),E?0:ne.getMonth(),y||E?1:ne.getDate()),K=De(J*e,3);if(y||E){let le=y?z/c:0,Q=E?z/u:0,k=T==K?T:De(cs(J.getFullYear()+Q,J.getMonth()+le,1)*e,3),ee=new Date(je(k/e)),F=ee.getFullYear(),$=ee.getMonth();for(let G=0;k<=P;G++){let ue=cs(F+Q*G,$+le*G,1),N=ue-g(De(ue*e,3));k=De((+ue+N)*e,3),k<=P&&b.push(k)}}else{let le=z>=o?o:z,Q=xt(M)-xt(T),k=K+Q+Ln(T-K,le);b.push(k);let ee=g(k),F=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,$=z/n,G=v.axes[D]._space,ue=U/G;for(;k=De(k+z,e==1?0:3),!(k>P);)if($>1){let N=xt(De(F+$,6))%24,de=g(k).getHours()-N;de>1&&(de=-1),k-=de*n,F=(F+$)%24;let ge=b[b.length-1];De((k-ge)/z,3)*ue>=.7&&b.push(k)}else b.push(k)}return b}}return[d,m,_]}const[Ua,Ia,Ya]=Lo(1),[ja,qa,Ka]=Lo(.001);an(2,-53,53,[1]);function Bi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Ui(e,l){return(i,n,o,c,u)=>{let p=l.find(M=>u>=M[0])||l[l.length-1],d,m,_,g,v,D;return n.map(M=>{let P=e(M),z=P.getFullYear(),U=P.getMonth(),b=P.getDate(),E=P.getHours(),y=P.getMinutes(),ne=P.getSeconds(),T=z!=d&&p[2]||U!=m&&p[3]||b!=_&&p[4]||E!=g&&p[5]||y!=v&&p[6]||ne!=D&&p[7]||p[1];return d=z,m=U,_=b,g=E,v=y,D=ne,T(P)})}}function Ja(e,l){let i=Fs(l);return(n,o,c,u,p)=>o.map(d=>i(e(d)))}function cs(e,l,i){return new Date(e,l,i)}function Ii(e,l){return l(e)}const Za="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Yi(e,l){return(i,n,o,c)=>c==null?Ds:l(e(n))}function Qa(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function $a(e,l){return e.series[l].fill(e,l)}const Xa={show:!0,live:!0,isolate:!1,mount:wa,markers:{show:!0,width:2,stroke:Qa,fill:$a,dash:"solid"},idx:null,idxs:null,values:[]};function eu(e,l){let i=e.cursor.points,n=At(),o=i.size(e,l);Re(n,ln,o),Re(n,nn,o);let c=o/-2;Re(n,"marginLeft",c),Re(n,"marginTop",c);let u=i.width(e,l,o);return u&&Re(n,"borderWidth",u),n}function tu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function lu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function nu(e,l){return e.series[l].points.size}const fs=[0,0];function su(e,l,i){return fs[0]=l,fs[1]=i,fs}function bn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ps(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const iu={show:!0,x:!0,y:!0,lock:!1,move:su,points:{one:!1,show:eu,size:nu,width:0,stroke:lu,fill:tu},bind:{mousedown:bn,mouseup:bn,click:bn,dblclick:bn,mousemove:ps,mouseleave:ps,mouseenter:ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Co={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ns=Ie({},Co,{filter:vo}),Po=Ie({},Ns,{size:10}),Ro=Ie({},Co,{show:!1}),Hs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',zo="bold "+Hs,Fo=1.5,ji={show:!0,scale:"x",stroke:As,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:zo,side:2,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:Fo,rotate:0},ou="Value",ru="Time",qi={show:!0,scale:"x",auto:!1,sorted:1,min:Ae,max:-Ae,idxs:[]};function au(e,l,i,n,o){return l.map(c=>c==null?"":Rs(c))}function uu(e,l,i,n,o,c,u){let p=[],d=ol.get(o)||0;i=u?i:De(Ln(i,o),d);for(let m=i;m<=n;m=De(m+o,d))p.push(Object.is(m,-0)?0:m);return p}function bs(e,l,i,n,o,c,u){const p=[],d=e.scales[e.axes[l].scale].log,m=d==10?Qt:ho,_=xt(m(i));o=Wl(d,_),d==10&&(o=gl[Vt(o,gl)]);let g=i,v=o*d;d==10&&(v=gl[Vt(v,gl)]);do p.push(g),g=g+o,d==10&&!ol.has(g)&&(g=De(g,ol.get(o))),g>=v&&(o=g,v=o*d,d==10&&(v=gl[Vt(v,gl)]));while(g<=n);return p}function cu(e,l,i,n,o,c,u){let d=e.scales[e.axes[l].scale].asinh,m=n>d?bs(e,l,ft(d,i),n,o):[d],_=n>=0&&i<=0?[0]:[];return(i<-d?bs(e,l,ft(d,-n),-i,o):[d]).reverse().map(v=>-v).concat(_,m)}const Vo=/./,fu=/[12357]/,pu=/[125]/,Ki=/1/,xs=(e,l,i,n)=>e.map((o,c)=>l==4&&o==0||c%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function du(e,l,i,n,o){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,m=c._space,_=d(10,u),g=d(9,u)-_>=m?Vo:d(7,u)-_>=m?fu:d(5,u)-_>=m?pu:Ki;if(g==Ki){let v=Ke(d(1,u)-_);if(v<m)return xs(l.slice().reverse(),p.distr,g,Lt(m/v)).reverse()}return xs(l,p.distr,g,1)}function hu(e,l,i,n,o){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,m=Ke(d(1,u)-d(2,u));return m<p?xs(l.slice().reverse(),3,Vo,Lt(p/m)).reverse():l}function mu(e,l,i,n){return n==null?Ds:l==null?"":Rs(l)}const Ji={show:!0,scale:"y",stroke:As,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:zo,side:3,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:Fo,rotate:0};function gu(e,l){let i=3+(e||1)*2;return De(i*l,3)}function vu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],c=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),p=Ke(u-c),d=e.series[l],m=p/(d.points.space*Se);return n[1]-n[0]<=m}const Zi={scale:null,auto:!0,sorted:0,min:Ae,max:-Ae},No=(e,l,i,n,o)=>o,Qi={show:!0,auto:!0,sorted:0,gaps:No,alpha:1,facets:[Ie({},Zi,{scale:"x"}),Ie({},Zi,{scale:"y"})]},$i={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:No,alpha:1,points:{show:vu,filter:null},values:null,min:Ae,max:-Ae,idxs:[],path:null,clip:null};function wu(e,l,i,n,o){return i/10}const Ho={time:Ur,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},_u=Ie({},Ho,{time:!1,ori:1}),Xi={};function Oo(e,l){let i=Xi[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,c,u,p,d,m){for(let _=0;_<i.plots.length;_++)i.plots[_]!=o&&i.plots[_].pub(n,o,c,u,p,d,m)}},e!=null&&(Xi[e]=i)),i}const Ul=1,Ss=2;function bl(e,l,i){const n=e.mode,o=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],m=n==2?c[1]:c[l],_=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=p.left,D=p.top,M=p.width,P=p.height,z=e.valToPosH,U=e.valToPosV;return _.ori==0?i(o,d,m,_,g,z,U,v,D,M,P,Rn,Yl,Fn,Go,Uo):i(o,d,m,_,g,U,z,D,v,P,M,zn,jl,Gs,Bo,Io)}function Os(e,l){let i=0,n=0,o=be(e.bands,zs);for(let c=0;c<o.length;c++){let u=o[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function bu(e,l,i,n,o){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return o==-1?d.min:o==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function $t(e,l,i,n,o,c){return bl(e,l,(u,p,d,m,_,g,v,D,M,P,z)=>{let U=u.pxRound;const b=m.dir*(m.ori==0?1:-1),E=m.ori==0?Yl:jl;let y,ne;b==1?(y=i,ne=n):(y=n,ne=i);let T=U(g(p[y],m,P,D)),J=U(v(d[y],_,z,M)),K=U(g(p[ne],m,P,D)),le=U(v(c==1?_.max:_.min,_,z,M)),Q=new Path2D(o);return E(Q,K,le),E(Q,T,le),E(Q,T,J),Q})}function Pn(e,l,i,n,o,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?Fn:Gs;let d=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let D=v[0]-d;D>0&&p(u,d,n,D,n+c),d=v[1]}}let m=i+o-d,_=10;m>0&&p(u,d,n-_/2,m,n+c+_)}return u}function xu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Ws(e,l,i,n,o,c,u){let p=[],d=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,v=m;if(o==1)for(;++m<=n&&l[m]===null;)v=m;else for(;--m>=i&&l[m]===null;)v=m;let D=c(e[g]),M=v==g?D:c(e[v]),P=g-o;D=u<=0&&P>=0&&P<d?c(e[P]):D;let U=v+o;M=u>=0&&U>=0&&U<d?c(e[U]):M,M>=D&&p.push([D,M])}return p}function eo(e){return e==0?go:e==1?je:l=>ml(l,e)}function Wo(e){let l=e==0?Rn:zn,i=e==0?(o,c,u,p,d,m)=>{o.arcTo(c,u,p,d,m)}:(o,c,u,p,d,m)=>{o.arcTo(u,c,d,p,m)},n=e==0?(o,c,u,p,d)=>{o.rect(c,u,p,d)}:(o,c,u,p,d)=>{o.rect(u,c,d,p)};return(o,c,u,p,d,m=0,_=0)=>{m==0&&_==0?n(o,c,u,p,d):(m=Nt(m,p/2,d/2),_=Nt(_,p/2,d/2),l(o,c+m,u),i(o,c+p,u,c+p,u+d,m),i(o,c+p,u+d,c,u+d,_),i(o,c,u+d,c,u,_),i(o,c,u,c+p,u,m),o.closePath())}}const Rn=(e,l,i)=>{e.moveTo(l,i)},zn=(e,l,i)=>{e.moveTo(i,l)},Yl=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},Fn=Wo(0),Gs=Wo(1),Go=(e,l,i,n,o,c)=>{e.arc(l,i,n,o,c)},Bo=(e,l,i,n,o,c)=>{e.arc(i,l,n,o,c)},Uo=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(l,i,n,o,c,u)},Io=(e,l,i,n,o,c,u)=>{e.bezierCurveTo(i,l,o,n,u,c)};function Yo(e){return(l,i,n,o,c)=>bl(l,i,(u,p,d,m,_,g,v,D,M,P,z)=>{let{pxRound:U,points:b}=u,E,y;m.ori==0?(E=Rn,y=Go):(E=zn,y=Bo);const ne=De(b.width*Se,3);let T=(b.size-b.width)/2*Se,J=De(T*2,3),K=new Path2D,le=new Path2D,{left:Q,top:k,width:ee,height:F}=l.bbox;Fn(le,Q-J,k-J,ee+J*2,F+J*2);const $=G=>{if(d[G]!=null){let ue=U(g(p[G],m,P,D)),N=U(v(d[G],_,z,M));E(K,ue+T,N),y(K,ue,N,T,0,yn*2)}};if(c)c.forEach($);else for(let G=n;G<=o;G++)$(G);return{stroke:ne>0?K:null,fill:K,clip:le,flags:Ul|Ss}})}function jo(e){return(l,i,n,o,c,u)=>{n!=o&&(c!=n&&u!=n&&e(l,i,n),c!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const Su=jo(Yl),yu=jo(jl);function qo(e){const l=be(e?.alignGaps,0);return(i,n,o,c)=>bl(i,n,(u,p,d,m,_,g,v,D,M,P,z)=>{[o,c]=An(d,o,c);let U=u.pxRound,b=F=>U(g(F,m,P,D)),E=F=>U(v(F,_,z,M)),y,ne;m.ori==0?(y=Yl,ne=Su):(y=jl,ne=yu);const T=m.dir*(m.ori==0?1:-1),J={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ul},K=J.stroke;let le=!1;if(c-o>=P*4){let F=O=>i.posToVal(O,m.key,!0),$=null,G=null,ue,N,Be,ke=b(p[T==1?o:c]),de=b(p[o]),ge=b(p[c]),oe=F(T==1?de+1:ge-1);for(let O=T==1?o:c;O>=o&&O<=c;O+=T){let ze=p[O],B=(T==1?ze<oe:ze>oe)?ke:b(ze),I=d[O];B==ke?I!=null?(N=I,$==null?(y(K,B,E(N)),ue=$=G=N):N<$?$=N:N>G&&(G=N)):I===null&&(le=!0):($!=null&&ne(K,ke,E($),E(G),E(ue),E(N)),I!=null?(N=I,y(K,B,E(N)),$=G=ue=N):($=G=null,I===null&&(le=!0)),ke=B,oe=F(ke+T))}$!=null&&$!=G&&Be!=ke&&ne(K,ke,E($),E(G),E(ue),E(N))}else for(let F=T==1?o:c;F>=o&&F<=c;F+=T){let $=d[F];$===null?le=!0:$!=null&&y(K,b(p[F]),E($))}let[k,ee]=Os(i,n);if(u.fill!=null||k!=0){let F=J.fill=new Path2D(K),$=u.fillTo(i,n,u.min,u.max,k),G=E($),ue=b(p[o]),N=b(p[c]);T==-1&&([N,ue]=[ue,N]),y(F,N,G),y(F,ue,G)}if(!u.spanGaps){let F=[];le&&F.push(...Ws(p,d,o,c,T,b,l)),J.gaps=F=u.gaps(i,n,o,c,F),J.clip=Pn(F,m.ori,D,M,P,z)}return ee!=0&&(J.band=ee==2?[$t(i,n,o,c,K,-1),$t(i,n,o,c,K,1)]:$t(i,n,o,c,K,ee)),J})}function ku(e){const l=be(e.align,1),i=be(e.ascDesc,!1),n=be(e.alignGaps,0),o=be(e.extend,!1);return(c,u,p,d)=>bl(c,u,(m,_,g,v,D,M,P,z,U,b,E)=>{[p,d]=An(g,p,d);let y=m.pxRound,{left:ne,width:T}=c.bbox,J=de=>y(M(de,v,b,z)),K=de=>y(P(de,D,E,U)),le=v.ori==0?Yl:jl;const Q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Ul},k=Q.stroke,ee=v.dir*(v.ori==0?1:-1);let F=K(g[ee==1?p:d]),$=J(_[ee==1?p:d]),G=$,ue=$;o&&l==-1&&(ue=ne,le(k,ue,F)),le(k,$,F);for(let de=ee==1?p:d;de>=p&&de<=d;de+=ee){let ge=g[de];if(ge==null)continue;let oe=J(_[de]),O=K(ge);l==1?le(k,oe,F):le(k,G,O),le(k,oe,O),F=O,G=oe}let N=G;o&&l==1&&(N=ne+T,le(k,N,F));let[Be,ke]=Os(c,u);if(m.fill!=null||Be!=0){let de=Q.fill=new Path2D(k),ge=m.fillTo(c,u,m.min,m.max,Be),oe=K(ge);le(de,N,oe),le(de,ue,oe)}if(!m.spanGaps){let de=[];de.push(...Ws(_,g,p,d,ee,J,n));let ge=m.width*Se/2,oe=i||l==1?ge:-ge,O=i||l==-1?-ge:ge;de.forEach(ze=>{ze[0]+=oe,ze[1]+=O}),Q.gaps=de=m.gaps(c,u,p,d,de),Q.clip=Pn(de,v.ori,z,U,b,E)}return ke!=0&&(Q.band=ke==2?[$t(c,u,p,d,k,-1),$t(c,u,p,d,k,1)]:$t(c,u,p,d,k,ke)),Q})}function to(e,l,i,n,o,c,u=Ae){if(e.length>1){let p=null;for(let d=0,m=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let _=Ke(e[d]-e[p]);_<m&&(m=_,u=Ke(i(e[d],n,o,c)-i(e[p],n,o,c)))}p=d}}return u}function Tu(e){e=e||rn;const l=be(e.size,[.6,Ae,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const c=ve(o),u=1-l[0],p=be(l[1],Ae),d=be(l[2],1),m=be(e.disp,rn),_=be(e.each,D=>{}),{fill:g,stroke:v}=m;return(D,M,P,z)=>bl(D,M,(U,b,E,y,ne,T,J,K,le,Q,k)=>{let ee=U.pxRound,F=i,$=n*Se,G=p*Se,ue=d*Se,N,Be;y.ori==0?[N,Be]=c(D,M):[Be,N]=c(D,M);const ke=y.dir*(y.ori==0?1:-1);let de=y.ori==0?Fn:Gs,ge=y.ori==0?_:(L,Te,Ye,xl,rl,Wt,al)=>{_(L,Te,Ye,rl,xl,al,Wt)},oe=be(D.bands,zs).find(L=>L.series[0]==M),O=oe!=null?oe.dir:0,ze=U.fillTo(D,M,U.min,U.max,O),R=ee(J(ze,ne,k,le)),B,I,ce,se=Q,Y=ee(U.width*Se),H=!1,W=null,he=null,fe=null,Ne=null;g!=null&&(Y==0||v!=null)&&(H=!0,W=g.values(D,M,P,z),he=new Map,new Set(W).forEach(L=>{L!=null&&he.set(L,new Path2D)}),Y>0&&(fe=v.values(D,M,P,z),Ne=new Map,new Set(fe).forEach(L=>{L!=null&&Ne.set(L,new Path2D)})));let{x0:rt,size:Ht}=m;if(rt!=null&&Ht!=null){F=1,b=rt.values(D,M,P,z),rt.unit==2&&(b=b.map(Ye=>D.posToVal(K+Ye*Q,y.key,!0)));let L=Ht.values(D,M,P,z);Ht.unit==2?I=L[0]*Q:I=T(L[0],y,Q,K)-T(0,y,Q,K),se=to(b,E,T,y,Q,K,se),ce=se-I+$}else se=to(b,E,T,y,Q,K,se),ce=se*u+$,I=se-ce;ce<1&&(ce=0),Y>=I/2&&(Y=0),ce<5&&(ee=go);let Ot=ce>0,X=se-ce-(Ot?Y:0);I=ee(_s(X,ue,G)),B=(F==0?I/2:F==ke?0:I)-F*ke*((F==0?$/2:0)+(Ot?Y/2:0));const q={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},we=H?null:new Path2D;let Ee=null;if(oe!=null)Ee=D.data[oe.series[1]];else{let{y0:L,y1:Te}=m;L!=null&&Te!=null&&(E=Te.values(D,M,P,z),Ee=L.values(D,M,P,z))}let Oe=N*I,re=Be*I;for(let L=ke==1?P:z;L>=P&&L<=z;L+=ke){let Te=E[L];if(Te==null)continue;if(Ee!=null){let pt=Ee[L]??0;if(Te-pt==0)continue;R=J(pt,ne,k,le)}let Ye=y.distr!=2||m!=null?b[L]:L,xl=T(Ye,y,Q,K),rl=J(be(Te,ze),ne,k,le),Wt=ee(xl-B),al=ee(ft(rl,R)),ht=ee(Nt(rl,R)),yt=al-ht;if(Te!=null){let pt=Te<0?re:Oe,Ct=Te<0?Oe:re;H?(Y>0&&fe[L]!=null&&de(Ne.get(fe[L]),Wt,ht+xt(Y/2),I,ft(0,yt-Y),pt,Ct),W[L]!=null&&de(he.get(W[L]),Wt,ht+xt(Y/2),I,ft(0,yt-Y),pt,Ct)):de(we,Wt,ht+xt(Y/2),I,ft(0,yt-Y),pt,Ct),ge(D,M,L,Wt-Y/2,ht,I+Y,yt)}}return Y>0?q.stroke=H?Ne:we:H||(q._fill=U.width==0?U._fill:U._stroke??U._fill,q.width=0),q.fill=H?he:we,q})}function Mu(e,l){const i=be(l?.alignGaps,0);return(n,o,c,u)=>bl(n,o,(p,d,m,_,g,v,D,M,P,z,U)=>{[c,u]=An(m,c,u);let b=p.pxRound,E=N=>b(v(N,_,z,M)),y=N=>b(D(N,g,U,P)),ne,T,J;_.ori==0?(ne=Rn,J=Yl,T=Uo):(ne=zn,J=jl,T=Io);const K=_.dir*(_.ori==0?1:-1);let le=E(d[K==1?c:u]),Q=le,k=[],ee=[];for(let N=K==1?c:u;N>=c&&N<=u;N+=K)if(m[N]!=null){let ke=d[N],de=E(ke);k.push(Q=de),ee.push(y(m[N]))}const F={stroke:e(k,ee,ne,J,T,b),fill:null,clip:null,band:null,gaps:null,flags:Ul},$=F.stroke;let[G,ue]=Os(n,o);if(p.fill!=null||G!=0){let N=F.fill=new Path2D($),Be=p.fillTo(n,o,p.min,p.max,G),ke=y(Be);J(N,Q,ke),J(N,le,ke)}if(!p.spanGaps){let N=[];N.push(...Ws(d,m,c,u,K,E,i)),F.gaps=N=p.gaps(n,o,c,u,N),F.clip=Pn(N,_.ori,M,P,z,U)}return ue!=0&&(F.band=ue==2?[$t(n,o,c,u,$,-1),$t(n,o,c,u,$,1)]:$t(n,o,c,u,$,ue)),F})}function Eu(e){return Mu(Au,e)}function Au(e,l,i,n,o,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),m=Array(u-1),_=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)_[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],m[v]=_[v]/g[v];d[0]=m[0];for(let v=1;v<u-1;v++)m[v]===0||m[v-1]===0||m[v-1]>0!=m[v]>0?d[v]=0:(d[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/m[v-1]+(g[v]+2*g[v-1])/m[v]),isFinite(d[v])||(d[v]=0));d[u-1]=m[u-2];for(let v=0;v<u-1;v++)o(p,e[v]+g[v]/3,l[v]+d[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-d[v+1]*g[v]/3,e[v+1],l[v+1])}return p}const ys=new Set;function lo(){for(let e of ys)e.syncRect(!0)}Il&&(wl(aa,Ol,lo),wl(ua,Ol,lo,!0),wl(Tn,Ol,()=>{Je.pxRatio=Se}));const Du=qo(),Lu=Yo();function no(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>ks(c,u,l,i))}function Cu(e,l){return e.map((i,n)=>n==0?{}:Ie({},l,i))}function ks(e,l,i,n){return Ie({},l==0?i:n,e)}function Ko(e,l,i){return l==null?Gl:[l,i]}const Pu=Ko;function Ru(e,l,i){return l==null?Gl:Mn(l,i,Ps,!0)}function Jo(e,l,i,n){return l==null?Gl:Dn(l,i,e.scales[n].log,!1)}const zu=Jo;function Zo(e,l,i,n){return l==null?Gl:Cs(l,i,e.scales[n].log,!1)}const Fu=Zo;function Vu(e,l,i,n,o){let c=ft(Fi(e),Fi(l)),u=l-e,p=Vt(o/n*u,i);do{let d=i[p],m=n*d/u;if(m>=o&&c+(d<5?ol.get(d):0)<=17)return[d,m]}while(++p<i.length);return[0,0]}function so(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=je((i=+o)*Se))+"px"),[e,l,i]}function Nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=De(l[2]*Se,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Je(e,l,i){const n={mode:be(e.mode,1)},o=n.mode;function c(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?1-f:f)}function u(t,s,r,a){let f=s.valToPct(t);return a+r*(s.dir==-1?f:1-f)}function p(t,s,r,a){return s.ori==0?c(t,s,r,a):u(t,s,r,a)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const m=n.root=At(Ir);if(e.id!=null&&(m.id=e.id),wt(m,e.class),e.title){let t=At(qr,m);t.textContent=e.title}const _=Ft("canvas"),g=n.ctx=_.getContext("2d"),v=At(Kr,m);wl("click",v,t=>{t.target===M&&(Le!=Pl||Fe!=Rl)&&it.click(n,t)},!0);const D=n.under=At(Jr,v);v.appendChild(_);const M=n.over=At(Zr,v);e=Bl(e);const P=+be(e.pxAlign,1),z=eo(P);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const U=e.ms||.001,b=n.series=o==1?no(e.series||[],qi,$i,!1):Cu(e.series||[null],Qi),E=n.axes=no(e.axes||[],ji,Ji,!0),y=n.scales={},ne=n.bands=e.bands||[];ne.forEach(t=>{t.fill=ve(t.fill||null),t.dir=be(t.dir,-1)});const T=o==2?b[1].facets[0].scale:b[0].scale,J={axes:dr,series:ar},K=(e.drawOrder||["axes","series"]).map(t=>J[t]);function le(t){const s=t.distr==3?r=>Qt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>us(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:f,_max:h}=t,w=h-f;return(a-f)/w}}function Q(t){let s=y[t];if(s==null){let r=(e.scales||rn)[t]||rn;if(r.from!=null){Q(r.from);let a=Ie({},y[r.from],r,{key:t});a.valToPct=le(a),y[t]=a}else{s=y[t]=Ie({},t==T?Ho:_u,r),s.key=t;let a=s.time,f=s.range,h=sl(f);if((t!=T||o==2&&!a)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Pi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Pi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Cn(f))){let w=f;f=(x,S,A)=>S==null?Gl:Mn(S,A,w)}s.range=ve(f||(a?Pu:t==T?s.distr==3?zu:s.distr==4?Fu:Ko:s.distr==3?Jo:s.distr==4?Zo:Ru)),s.auto=ve(h?!1:s.auto),s.clamp=ve(s.clamp||wu),s._min=s._max=null,s.valToPct=le(s)}}}Q("x"),Q("y"),o==1&&b.forEach(t=>{Q(t.scale)}),E.forEach(t=>{Q(t.scale)});for(let t in e.scales)Q(t);const k=y[T],ee=k.distr;let F,$;k.ori==0?(wt(m,Yr),F=c,$=u):(wt(m,jr),F=u,$=c);const G={};for(let t in y){let s=y[t];(s.min!=null||s.max!=null)&&(G[t]={min:s.min,max:s.max},s.min=s.max=null)}const ue=e.tzDate||(t=>new Date(je(t/U))),N=e.fmtDate||Fs,Be=U==1?Ya(ue):Ka(ue),ke=Ui(ue,Bi(U==1?Ia:qa,N)),de=Yi(ue,Ii(Za,N)),ge=[],oe=n.legend=Ie({},Xa,e.legend),O=n.cursor=Ie({},iu,{drag:{y:o==2}},e.cursor),ze=oe.show,R=O.show,B=oe.markers;oe.idxs=ge,B.width=ve(B.width),B.dash=ve(B.dash),B.stroke=ve(B.stroke),B.fill=ve(B.fill);let I,ce,se,Y=[],H=[],W,he=!1,fe={};if(oe.live){const t=b[1]?b[1].values:null;he=t!=null,W=he?t(n,1,0):{_:0};for(let s in W)fe[s]=Ds}if(ze)if(I=Ft("table",la,m),se=Ft("tbody",null,I),oe.mount(n,I),he){ce=Ft("thead",null,I,se);let t=Ft("tr",null,ce);Ft("th",null,t);for(var Ne in W)Ft("th",_i,t).textContent=Ne}else wt(I,sa),oe.live&&wt(I,na);const rt={show:!0},Ht={show:!1};function Ot(t,s){if(s==0&&(he||!oe.live||o==2))return Gl;let r=[],a=Ft("tr",ia,se,se.childNodes[s]);wt(a,t.class),t.show||wt(a,vl);let f=Ft("th",null,a);if(B.show){let x=At(oa,f);if(s>0){let S=B.width(n,s);S&&(x.style.border=S+"px "+B.dash(n,s)+" "+B.stroke(n,s)),x.style.background=B.fill(n,s)}}let h=At(_i,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(B.show||(h.style.color=t.width>0?B.stroke(n,s):B.fill(n,s)),q("click",f,x=>{if(O._lock)return;cl(x);let S=b.indexOf(t);if((x.ctrlKey||x.metaKey)!=oe.isolate){let A=b.some((C,V)=>V>0&&V!=S&&C.show);b.forEach((C,V)=>{V>0&&Bt(V,A?V==S?rt:Ht:rt,!0,Ue.setSeries)})}else Bt(S,{show:!t.show},!0,Ue.setSeries)},!1),yl&&q(yi,f,x=>{O._lock||(cl(x),Bt(b.indexOf(t),Fl,!0,Ue.setSeries))},!1));for(var w in W){let x=Ft("td",ra,a);x.textContent="--",r.push(x)}return[a,r]}const X=new Map;function q(t,s,r,a=!0){const f=X.get(s)||{},h=O.bind[t](n,s,r,a);h&&(wl(t,s,f[t]=h),X.set(s,f))}function we(t,s,r){const a=X.get(s)||{};for(let f in a)(t==null||f==t)&&(ws(f,s,a[f]),delete a[f]);t==null&&X.delete(s)}let Ee=0,Oe=0,re=0,L=0,Te=0,Ye=0,xl=Te,rl=Ye,Wt=re,al=L,ht=0,yt=0,pt=0,Ct=0;n.bbox={};let Vn=!1,un=!1,Sl=!1,ul=!1,cn=!1,kt=!1;function Nn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Al(!1),Sl=!0,un=!0,Dl()}function Bs(t,s){n.width=Ee=re=t,n.height=Oe=L=s,Te=Ye=0,tr(),lr();let r=n.bbox;ht=r.left=ml(Te*Se,.5),yt=r.top=ml(Ye*Se,.5),pt=r.width=ml(re*Se,.5),Ct=r.height=ml(L*Se,.5)}const $o=3;function Xo(){let t=!1,s=0;for(;!t;){s++;let r=fr(s),a=pr(s);t=s==$o||r&&a,t||(Bs(n.width,n.height),un=!0)}}function er({width:t,height:s}){Nn(t,s)}n.setSize=er;function tr(){let t=!1,s=!1,r=!1,a=!1;E.forEach((f,h)=>{if(f.show&&f._show){let{side:w,_size:x}=f,S=w%2,A=f.label!=null?f.labelSize:0,C=x+A;C>0&&(S?(re-=C,w==3?(Te+=C,a=!0):r=!0):(L-=C,w==0?(Ye+=C,t=!0):s=!0))}}),fl[0]=t,fl[1]=r,fl[2]=s,fl[3]=a,re-=Xt[1]+Xt[3],Te+=Xt[3],L-=Xt[2]+Xt[0],Ye+=Xt[0]}function lr(){let t=Te+re,s=Ye+L,r=Te,a=Ye;function f(h,w){switch(h){case 1:return t+=w,t-w;case 2:return s+=w,s-w;case 3:return r-=w,r+w;case 0:return a-=w,a+w}}E.forEach((h,w)=>{if(h.show&&h._show){let x=h.side;h._pos=f(x,h._size),h.label!=null&&(h._lpos=f(x,h.labelSize))}})}if(O.dataIdx==null){let t=O.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=ve(t.prox),a=t.bias??=0;O.dataIdx=(f,h,w,x)=>{if(h==0)return w;let S=w,A=r(f,h,w,x)??Ae,C=A>=0&&A<Ae,V=k.ori==0?re:L,ie=O.left,xe=l[0],_e=l[h];if(s.has(_e[w])){S=null;let me=null,te=null,j;if(a==0||a==-1)for(j=w;me==null&&j-- >0;)s.has(_e[j])||(me=j);if(a==0||a==1)for(j=w;te==null&&j++<_e.length;)s.has(_e[j])||(te=j);if(me!=null||te!=null)if(C){let Pe=me==null?-1/0:F(xe[me],k,V,0),We=te==null?1/0:F(xe[te],k,V,0),nt=ie-Pe,Me=We-ie;nt<=Me?nt<=A&&(S=me):Me<=A&&(S=te)}else S=te==null?me:me==null?te:w-me<=te-w?me:te}else C&&Ke(ie-F(xe[w],k,V,0))>A&&(S=null);return S}}const cl=t=>{O.event=t};O.idxs=ge,O._lock=!1;let ot=O.points;ot.show=ve(ot.show),ot.size=ve(ot.size),ot.stroke=ve(ot.stroke),ot.width=ve(ot.width),ot.fill=ve(ot.fill);const Gt=n.focus=Ie({},e.focus||{alpha:.3},O.focus),yl=Gt.prox>=0,kl=yl&&ot.one;let Tt=[],Tl=[],Ml=[];function Us(t,s){let r=ot.show(n,s);if(r instanceof HTMLElement)return wt(r,ta),wt(r,t.class),qt(r,-10,-10,re,L),M.insertBefore(r,Tt[s]),r}function Is(t,s){if(o==1||s>0){let r=o==1&&y[t.scale].time,a=t.value;t.value=r?Hi(a)?Yi(ue,Ii(a,N)):a||de:a||mu,t.label=t.label||(r?ru:ou)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Du||_a,t.fillTo=ve(t.fillTo||bu),t.pxAlign=+be(t.pxAlign,P),t.pxRound=eo(t.pxAlign),t.stroke=ve(t.stroke||null),t.fill=ve(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gu(ft(1,t.width),1),a=t.points=Ie({},{size:r,width:ft(1,r*.2),stroke:t.stroke,space:r*2,paths:Lu,_stroke:null,_fill:null},t.points);a.show=ve(a.show),a.filter=ve(a.filter),a.fill=ve(a.fill),a.stroke=ve(a.stroke),a.paths=ve(a.paths),a.pxAlign=t.pxAlign}if(ze){let r=Ot(t,s);Y.splice(s,0,r[0]),H.splice(s,0,r[1]),oe.values.push(null)}if(R){ge.splice(s,0,null);let r=null;kl?s==0&&(r=Us(t,s)):s>0&&(r=Us(t,s)),Tt.splice(s,0,r),Tl.splice(s,0,0),Ml.splice(s,0,0)}lt("addSeries",s)}function nr(t,s){s=s??b.length,t=o==1?ks(t,s,qi,$i):ks(t,s,{},Qi),b.splice(s,0,t),Is(b[s],s)}n.addSeries=nr;function sr(t){if(b.splice(t,1),ze){oe.values.splice(t,1),H.splice(t,1);let s=Y.splice(t,1)[0];we(null,s.firstChild),s.remove()}R&&(ge.splice(t,1),Tt.splice(t,1)[0].remove(),Tl.splice(t,1),Ml.splice(t,1)),lt("delSeries",t)}n.delSeries=sr;const fl=[!1,!1,!1,!1];function ir(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=y[t.scale];a==null&&(t.scale=r?b[1].scale:T,a=y[t.scale]);let f=a.time;t.size=ve(t.size),t.space=ve(t.space),t.rotate=ve(t.rotate),sl(t.incrs)&&t.incrs.forEach(w=>{!ol.has(w)&&ol.set(w,_o(w))}),t.incrs=ve(t.incrs||(a.distr==2?Ga:f?U==1?Ua:ja:gl)),t.splits=ve(t.splits||(f&&a.distr==1?Be:a.distr==3?bs:a.distr==4?cu:uu)),t.stroke=ve(t.stroke),t.grid.stroke=ve(t.grid.stroke),t.ticks.stroke=ve(t.ticks.stroke),t.border.stroke=ve(t.border.stroke);let h=t.values;t.values=sl(h)&&!sl(h[0])?ve(h):f?sl(h)?Ui(ue,Bi(h,N)):Hi(h)?Ja(ue,h):h||ke:h||au,t.filter=ve(t.filter||(a.distr>=3&&a.log==10?du:a.distr==3&&a.log==2?hu:vo)),t.font=so(t.font),t.labelFont=so(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(fl[s]=!0,t._el=At(Qr,v))}}function ql(t,s,r,a){let[f,h,w,x]=r,S=s%2,A=0;return S==0&&(x||h)&&(A=s==0&&!f||s==2&&!w?je(ji.size/3):0),S==1&&(f||w)&&(A=s==1&&!h||s==3&&!x?je(Ji.size/2):0),A}const Ys=n.padding=(e.padding||[ql,ql,ql,ql]).map(t=>ve(be(t,ql))),Xt=n._padding=Ys.map((t,s)=>t(n,s,fl,0));let st,$e=null,Xe=null;const fn=o==1?b[0].idxs:null;let Pt=null,Kl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){st=0;for(let r=1;r<b.length;r++)st+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Pt=l[0],st=Pt.length;let r=l;if(ee==2){r=l.slice();let a=r[0]=Array(st);for(let f=0;f<st;f++)a[f]=f}n._data=l=r}if(Al(!0),lt("setData"),ee==2&&(Sl=!0),s!==!1){let r=k;r.auto(n,Kl)?Hn():tl(T,r.min,r.max),ul=ul||O.left>=0,kt=!0,Dl()}}n.setData=js;function Hn(){Kl=!0;let t,s;o==1&&(st>0?($e=fn[0]=0,Xe=fn[1]=st-1,t=l[0][$e],s=l[0][Xe],ee==2?(t=$e,s=Xe):t==s&&(ee==3?[t,s]=Dn(t,t,k.log,!1):ee==4?[t,s]=Cs(t,t,k.log,!1):k.time?s=t+je(86400/U):[t,s]=Mn(t,s,Ps,!0))):($e=fn[0]=t=null,Xe=fn[1]=s=null)),tl(T,t,s)}let pn,El,On,Wn,Gn,Bn,Un,In,Yn,dt;function qs(t,s,r,a,f,h){t??=xi,r??=zs,a??="butt",f??=xi,h??="round",t!=pn&&(g.strokeStyle=pn=t),f!=El&&(g.fillStyle=El=f),s!=On&&(g.lineWidth=On=s),h!=Gn&&(g.lineJoin=Gn=h),a!=Bn&&(g.lineCap=Bn=a),r!=Wn&&g.setLineDash(Wn=r)}function Ks(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=Un&&(g.font=Un=t),r!=In&&(g.textAlign=In=r),a!=Yn&&(g.textBaseline=Yn=a)}function jn(t,s,r,a,f=0){if(a.length>0&&t.auto(n,Kl)&&(s==null||s.min==null)){let h=be($e,0),w=be(Xe,a.length-1),x=r.min==null?da(a,h,w,f,t.distr==3):[r.min,r.max];t.min=Nt(t.min,r.min=x[0]),t.max=ft(t.max,r.max=x[1])}}const Js={min:null,max:null};function or(){for(let a in y){let f=y[a];G[a]==null&&(f.min==null||G[T]!=null&&f.auto(n,Kl))&&(G[a]=Js)}for(let a in y){let f=y[a];G[a]==null&&f.from!=null&&G[f.from]!=null&&(G[a]=Js)}G[T]!=null&&Al(!0);let t={};for(let a in G){let f=G[a];if(f!=null){let h=t[a]=Bl(y[a],Sa);if(f.min!=null)Ie(h,f);else if(a!=T||o==2)if(st==0&&h.from==null){let w=h.range(n,null,null,a);h.min=w[0],h.max=w[1]}else h.min=Ae,h.max=-Ae}}if(st>0){b.forEach((a,f)=>{if(o==1){let h=a.scale,w=G[h];if(w==null)return;let x=t[h];if(f==0){let S=x.range(n,x.min,x.max,h);x.min=S[0],x.max=S[1],$e=Vt(x.min,l[0]),Xe=Vt(x.max,l[0]),Xe-$e>1&&(l[0][$e]<x.min&&$e++,l[0][Xe]>x.max&&Xe--),a.min=Pt[$e],a.max=Pt[Xe]}else a.show&&a.auto&&jn(x,w,a,l[f],a.sorted);a.idxs[0]=$e,a.idxs[1]=Xe}else if(f>0&&a.show&&a.auto){let[h,w]=a.facets,x=h.scale,S=w.scale,[A,C]=l[f],V=t[x],ie=t[S];V!=null&&jn(V,G[x],h,A,h.sorted),ie!=null&&jn(ie,G[S],w,C,w.sorted),a.min=w.min,a.max=w.max}});for(let a in t){let f=t[a],h=G[a];if(f.from==null&&(h==null||h.min==null)){let w=f.range(n,f.min==Ae?null:f.min,f.max==-Ae?null:f.max,a);f.min=w[0],f.max=w[1]}}}for(let a in t){let f=t[a];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let w=f.range(n,h.min,h.max,a);f.min=w[0],f.max=w[1]}}}let s={},r=!1;for(let a in t){let f=t[a],h=y[a];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let w=h.distr;h._min=w==3?Qt(h.min):w==4?us(h.min,h.asinh):w==100?h.fwd(h.min):h.min,h._max=w==3?Qt(h.max):w==4?us(h.max,h.asinh):w==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){b.forEach((a,f)=>{o==2?f>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)Sl=!0,lt("setScale",a);R&&O.left>=0&&(ul=kt=!0)}for(let a in G)G[a]=null}function rr(t){let s=_s($e-1,0,st-1),r=_s(Xe+1,0,st-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<st-1;)r++;return[s,r]}function ar(){if(st>0){let t=b.some(s=>s._focus)&&dt!=Gt.alpha;t&&(g.globalAlpha=dt=Gt.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(Zs(r,!1),Zs(r,!0),s._paths==null)){let a=dt;dt!=s.alpha&&(g.globalAlpha=dt=s.alpha);let f=o==2?[0,l[r][0].length-1]:rr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),dt!=a&&(g.globalAlpha=dt=a)}}),b.forEach((s,r)=>{if(r>0&&s.show){let a=dt;dt!=s.alpha&&(g.globalAlpha=dt=s.alpha),s._paths!=null&&Qs(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,$e,Xe,f),w=s.points.filter(n,r,h,f);(h||w)&&(s.points._paths=s.points.paths(n,r,$e,Xe,w),Qs(r,!0))}dt!=a&&(g.globalAlpha=dt=a),lt("drawSeries",r)}}),t&&(g.globalAlpha=dt=1)}}function Zs(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function Qs(t,s){let r=s?b[t].points:b[t],{stroke:a,fill:f,clip:h,flags:w,_stroke:x=r._stroke,_fill:S=r._fill,_width:A=r.width}=r._paths;A=De(A*Se,3);let C=null,V=A%2/2;s&&S==null&&(S=A>0?"#fff":x);let ie=r.pxAlign==1&&V>0;if(ie&&g.translate(V,V),!s){let xe=ht-A/2,_e=yt-A/2,me=pt+A,te=Ct+A;C=new Path2D,C.rect(xe,_e,me,te)}s?qn(x,A,r.dash,r.cap,S,a,f,w,h):ur(t,x,A,r.dash,r.cap,S,a,f,w,C,h),ie&&g.translate(-V,-V)}function ur(t,s,r,a,f,h,w,x,S,A,C){let V=!1;S!=0&&ne.forEach((ie,xe)=>{if(ie.series[0]==t){let _e=b[ie.series[1]],me=l[ie.series[1]],te=(_e._paths||rn).band;sl(te)&&(te=ie.dir==1?te[0]:te[1]);let j,Pe=null;_e.show&&te&&ma(me,$e,Xe)?(Pe=ie.fill(n,xe)||h,j=_e._paths.clip):te=null,qn(s,r,a,f,Pe,w,x,S,A,C,j,te),V=!0}}),V||qn(s,r,a,f,h,w,x,S,A,C)}const $s=Ul|Ss;function qn(t,s,r,a,f,h,w,x,S,A,C,V){qs(t,s,r,a,f),(S||A||V)&&(g.save(),S&&g.clip(S),A&&g.clip(A)),V?(x&$s)==$s?(g.clip(V),C&&g.clip(C),hn(f,w),dn(t,h,s)):x&Ss?(hn(f,w),g.clip(V),dn(t,h,s)):x&Ul&&(g.save(),g.clip(V),C&&g.clip(C),hn(f,w),g.restore(),dn(t,h,s)):(hn(f,w),dn(t,h,s)),(S||A||V)&&g.restore()}function dn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,f)=>{g.strokeStyle=pn=f,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function hn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function cr(t,s,r,a){let f=E[t],h;if(a<=0)h=[0,0];else{let w=f._space=f.space(n,t,s,r,a),x=f._incrs=f.incrs(n,t,s,r,a,w);h=Vu(s,r,x,a,w)}return f._found=h}function Kn(t,s,r,a,f,h,w,x,S,A){let C=w%2/2;P==1&&g.translate(C,C),qs(x,w,S,A,x),g.beginPath();let V,ie,xe,_e,me=f+(a==0||a==3?-h:h);r==0?(ie=f,_e=me):(V=f,xe=me);for(let te=0;te<t.length;te++)s[te]!=null&&(r==0?V=xe=t[te]:ie=_e=t[te],g.moveTo(V,ie),g.lineTo(xe,_e));g.stroke(),P==1&&g.translate(-C,-C)}function fr(t){let s=!0;return E.forEach((r,a)=>{if(!r.show)return;let f=y[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Al(!1));return}else r._show||(s=!1,r._show=!0,Al(!1));let h=r.side,w=h%2,{min:x,max:S}=f,[A,C]=cr(a,x,S,w==0?re:L);if(C==0)return;let V=f.distr==2,ie=r._splits=r.splits(n,a,x,S,A,C,V),xe=f.distr==2?ie.map(j=>Pt[j]):ie,_e=f.distr==2?Pt[ie[1]]-Pt[ie[0]]:A,me=r._values=r.values(n,r.filter(n,xe,a,C,_e),a,C,_e);r._rotate=h==2?r.rotate(n,me,a,C):0;let te=r._size;r._size=Lt(r.size(n,me,a,t)),te!=null&&r._size!=te&&(s=!1)}),s}function pr(t){let s=!0;return Ys.forEach((r,a)=>{let f=r(n,a,fl,t);f!=Xt[a]&&(s=!1),Xt[a]=f}),s}function dr(){for(let t=0;t<E.length;t++){let s=E[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,f,h,w=s.stroke(n,t),x=r==0||r==3?-1:1,[S,A]=s._found;if(s.label!=null){let ut=s.labelGap*x,vt=je((s._lpos+ut)*Se);Ks(s.labelFont[0],w,"center",r==2?en:bi),g.save(),a==1?(f=h=0,g.translate(vt,je(yt+Ct/2)),g.rotate((r==3?-yn:yn)/2)):(f=je(ht+pt/2),h=vt);let hl=mo(s.label)?s.label(n,t,S,A):s.label;g.fillText(hl,f,h),g.restore()}if(A==0)continue;let C=y[s.scale],V=a==0?pt:Ct,ie=a==0?ht:yt,xe=s._splits,_e=C.distr==2?xe.map(ut=>Pt[ut]):xe,me=C.distr==2?Pt[xe[1]]-Pt[xe[0]]:S,te=s.ticks,j=s.border,Pe=te.show?te.size:0,We=je(Pe*Se),nt=je((s.alignTo==2?s._size-Pe-s.gap:s.gap)*Se),Me=s._rotate*-yn/180,Ge=z(s._pos*Se),mt=(We+nt)*x,at=Ge+mt;h=a==0?at:0,f=a==1?at:0;let Mt=s.font[0],Rt=s.align==1?Nl:s.align==2?os:Me>0?Nl:Me<0?os:a==0?"center":r==3?os:Nl,It=Me||a==1?"middle":r==2?en:bi;Ks(Mt,w,Rt,It);let gt=s.font[1]*s.lineGap,Et=xe.map(ut=>z(p(ut,C,V,ie))),zt=s._values;for(let ut=0;ut<zt.length;ut++){let vt=zt[ut];if(vt!=null){a==0?f=Et[ut]:h=Et[ut],vt=""+vt;let hl=vt.indexOf(`
`)==-1?[vt]:vt.split(/\n/gm);for(let ct=0;ct<hl.length;ct++){let vi=hl[ct];Me?(g.save(),g.translate(f,h+ct*gt),g.rotate(Me),g.fillText(vi,0,0),g.restore()):g.fillText(vi,f,h+ct*gt)}}}te.show&&Kn(Et,te.filter(n,_e,t,A,me),a,r,Ge,We,De(te.width*Se,3),te.stroke(n,t),te.dash,te.cap);let Yt=s.grid;Yt.show&&Kn(Et,Yt.filter(n,_e,t,A,me),a,a==0?2:1,a==0?yt:ht,a==0?Ct:pt,De(Yt.width*Se,3),Yt.stroke(n,t),Yt.dash,Yt.cap),j.show&&Kn([Ge],[1],a==0?1:0,a==0?1:2,a==1?yt:ht,a==1?Ct:pt,De(j.width*Se,3),j.stroke(n,t),j.dash,j.cap)}lt("drawAxes")}function Al(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let mn=!1,Jn=!1,Jl=[];function hr(){Jn=!1;for(let t=0;t<Jl.length;t++)lt(...Jl[t]);Jl.length=0}function Dl(){mn||(Da(Xs),mn=!0)}function mr(t,s=!1){mn=!0,Jn=s,t(n),Xs(),s&&Jl.length>0&&queueMicrotask(hr)}n.batch=mr;function Xs(){if(Vn&&(or(),Vn=!1),Sl&&(Xo(),Sl=!1),un){if(Re(D,Nl,Te),Re(D,en,Ye),Re(D,ln,re),Re(D,nn,L),Re(M,Nl,Te),Re(M,en,Ye),Re(M,ln,re),Re(M,nn,L),Re(v,ln,Ee),Re(v,nn,Oe),_.width=je(Ee*Se),_.height=je(Oe*Se),E.forEach(({_el:t,_show:s,_size:r,_pos:a,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,w=f%2==1;Re(t,w?"left":"top",a-h),Re(t,w?"width":"height",r),Re(t,w?"top":"left",w?Ye:Te),Re(t,w?"height":"width",w?L:re),vs(t,vl)}else wt(t,vl)}),pn=El=On=Gn=Bn=Un=In=Yn=Wn=null,dt=1,$l(!0),Te!=xl||Ye!=rl||re!=Wt||L!=al){Al(!1);let t=re/Wt,s=L/al;if(R&&!ul&&O.left>=0){O.left*=t,O.top*=s,Ll&&qt(Ll,je(O.left),0,re,L),Cl&&qt(Cl,0,je(O.top),re,L);for(let r=0;r<Tt.length;r++){let a=Tt[r];a!=null&&(Tl[r]*=t,Ml[r]*=s,qt(a,Lt(Tl[r]),Lt(Ml[r]),re,L))}}if(Ce.show&&!cn&&Ce.left>=0&&Ce.width>0){Ce.left*=t,Ce.width*=t,Ce.top*=s,Ce.height*=s;for(let r in ts)Re(zl,r,Ce[r])}xl=Te,rl=Ye,Wt=re,al=L}lt("setSize"),un=!1}Ee>0&&Oe>0&&(g.clearRect(0,0,_.width,_.height),lt("drawClear"),K.forEach(t=>t()),lt("draw")),Ce.show&&cn&&(gn(Ce),cn=!1),R&&ul&&(dl(null,!0,!1),ul=!1),oe.show&&oe.live&&kt&&(Xn(),kt=!1),d||(d=!0,n.status=1,lt("ready")),Kl=!1,mn=!1}n.redraw=(t,s)=>{Sl=s||!1,t!==!1?tl(T,k.min,k.max):Dl()};function Zn(t,s){let r=y[t];if(r.from==null){if(st==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(st>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==T&&r.distr==2&&st>0&&(s.min=Vt(s.min,l[0]),s.max=Vt(s.max,l[0]),s.min==s.max&&s.max++),G[t]=s,Vn=!0,Dl()}}n.setScale=Zn;let Qn,$n,Ll,Cl,ei,ti,Pl,Rl,li,ni,Le,Fe,el=!1;const it=O.drag;let et=it.x,tt=it.y;R&&(O.x&&(Qn=At(Xr,M)),O.y&&($n=At(ea,M)),k.ori==0?(Ll=Qn,Cl=$n):(Ll=$n,Cl=Qn),Le=O.left,Fe=O.top);const Ce=n.select=Ie({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),zl=Ce.show?At($r,Ce.over?M:D):null;function gn(t,s){if(Ce.show){for(let r in t)Ce[r]=t[r],r in ts&&Re(zl,r,t[r]);s!==!1&&lt("setSelect")}}n.setSelect=gn;function gr(t){if(b[t].show)ze&&vs(Y[t],vl);else if(ze&&wt(Y[t],vl),R){let r=kl?Tt[0]:Tt[t];r!=null&&qt(r,-10,-10,re,L)}}function tl(t,s,r){Zn(t,{min:s,max:r})}function Bt(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&b.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,gr(h),o==2?(tl(f.facets[0].scale,null,null),tl(f.facets[1].scale,null,null)):tl(f.scale,null,null),Dl())}),r!==!1&&lt("setSeries",t,s),a&&Xl("setSeries",n,t,s)}n.setSeries=Bt;function vr(t,s){Ie(ne[t],s)}function wr(t,s){t.fill=ve(t.fill||null),t.dir=be(t.dir,-1),s=s??ne.length,ne.splice(s,0,t)}function _r(t){t==null?ne.length=0:ne.splice(t,1)}n.addBand=wr,n.setBand=vr,n.delBand=_r;function br(t,s){b[t].alpha=s,R&&Tt[t]!=null&&(Tt[t].style.opacity=s),ze&&Y[t]&&(Y[t].style.opacity=s)}let Jt,ll,pl;const Fl={focus:!0};function xr(t){if(t!=pl){let s=t==null,r=Gt.alpha!=1;b.forEach((a,f)=>{if(o==1||f>0){let h=s||f==0||f==t;a._focus=s?null:h,r&&br(f,h?1:Gt.alpha)}}),pl=t,r&&Dl()}}ze&&yl&&q(ki,I,t=>{O._lock||(cl(t),pl!=null&&Bt(null,Fl,!0,Ue.setSeries))});function Ut(t,s,r){let a=y[s];r&&(t=t/Se-(a.ori==1?Ye:Te));let f=re;a.ori==1&&(f=L,t=f-t),a.dir==-1&&(t=f-t);let h=a._min,w=a._max,x=t/f,S=h+(w-h)*x,A=a.distr;return A==3?Wl(10,S):A==4?va(S,a.asinh):A==100?a.bwd(S):S}function Sr(t,s){let r=Ut(t,T,s);return Vt(r,l[0],$e,Xe)}n.valToIdx=t=>Vt(t,l[0]),n.posToIdx=Sr,n.posToVal=Ut,n.valToPos=(t,s,r)=>y[s].ori==0?c(t,y[s],r?pt:re,r?ht:0):u(t,y[s],r?Ct:L,r?yt:0),n.setCursor=(t,s,r)=>{Le=t.left,Fe=t.top,dl(null,s,r)};function si(t,s){Re(zl,Nl,Ce.left=t),Re(zl,ln,Ce.width=s)}function ii(t,s){Re(zl,en,Ce.top=t),Re(zl,nn,Ce.height=s)}let Zl=k.ori==0?si:ii,Ql=k.ori==1?si:ii;function yr(){if(ze&&oe.live)for(let t=o==2?1:0;t<b.length;t++){if(t==0&&he)continue;let s=oe.values[t],r=0;for(let a in s)H[t][r++].firstChild.nodeValue=s[a]}}function Xn(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{ge[a]=r}):xa(t.idx)||ge.fill(t.idx),oe.idx=ge[0]),ze&&oe.live){for(let r=0;r<b.length;r++)(r>0||o==1&&!he)&&kr(r,ge[r]);yr()}kt=!1,s!==!1&&lt("setLegend")}n.setLegend=Xn;function kr(t,s){let r=b[t],a=t==0&&ee==2?Pt:l[t],f;he?f=r.values(n,t,s)??fe:(f=r.value(n,s==null?null:a[s],t,s),f=f==null?fe:{_:f}),oe.values[t]=f}function dl(t,s,r){li=Le,ni=Fe,[Le,Fe]=O.move(n,Le,Fe),O.left=Le,O.top=Fe,R&&(Ll&&qt(Ll,je(Le),0,re,L),Cl&&qt(Cl,0,je(Fe),re,L));let a,f=$e>Xe;Jt=Ae,ll=null;let h=k.ori==0?re:L,w=k.ori==1?re:L;if(Le<0||st==0||f){a=O.idx=null;for(let x=0;x<b.length;x++){let S=Tt[x];S!=null&&qt(S,-10,-10,re,L)}yl&&Bt(null,Fl,!0,t==null&&Ue.setSeries),oe.live&&(ge.fill(a),kt=!0)}else{let x,S,A;o==1&&(x=k.ori==0?Le:Fe,S=Ut(x,T),a=O.idx=Vt(S,l[0],$e,Xe),A=F(l[0][a],k,h,0));let C=-10,V=-10,ie=0,xe=0,_e=!0,me="",te="";for(let j=o==2?1:0;j<b.length;j++){let Pe=b[j],We=ge[j],nt=We==null?null:o==1?l[j][We]:l[j][1][We],Me=O.dataIdx(n,j,a,S),Ge=Me==null?null:o==1?l[j][Me]:l[j][1][Me];if(kt=kt||Ge!=nt||Me!=We,ge[j]=Me,j>0&&Pe.show){let mt=Me==null?-10:Me==a?A:F(o==1?l[0][Me]:l[j][0][Me],k,h,0),at=Ge==null?-10:$(Ge,o==1?y[Pe.scale]:y[Pe.facets[1].scale],w,0);if(yl&&Ge!=null){let Mt=k.ori==1?Le:Fe,Rt=Ke(Gt.dist(n,j,Me,at,Mt));if(Rt<Jt){let It=Gt.bias;if(It!=0){let gt=Ut(Mt,Pe.scale),Et=Ge>=0?1:-1,zt=gt>=0?1:-1;zt==Et&&(zt==1?It==1?Ge>=gt:Ge<=gt:It==1?Ge<=gt:Ge>=gt)&&(Jt=Rt,ll=j)}else Jt=Rt,ll=j}}if(kt||kl){let Mt,Rt;k.ori==0?(Mt=mt,Rt=at):(Mt=at,Rt=mt);let It,gt,Et,zt,Yt,ut,vt=!0,hl=ot.bbox;if(hl!=null){vt=!1;let ct=hl(n,j);Et=ct.left,zt=ct.top,It=ct.width,gt=ct.height}else Et=Mt,zt=Rt,It=gt=ot.size(n,j);if(ut=ot.fill(n,j),Yt=ot.stroke(n,j),kl)j==ll&&Jt<=Gt.prox&&(C=Et,V=zt,ie=It,xe=gt,_e=vt,me=ut,te=Yt);else{let ct=Tt[j];ct!=null&&(Tl[j]=Et,Ml[j]=zt,Ci(ct,It,gt,vt),Di(ct,ut,Yt),qt(ct,Lt(Et),Lt(zt),re,L))}}}}if(kl){let j=Gt.prox,Pe=pl==null?Jt<=j:Jt>j||ll!=pl;if(kt||Pe){let We=Tt[0];We!=null&&(Tl[0]=C,Ml[0]=V,Ci(We,ie,xe,_e),Di(We,me,te),qt(We,Lt(C),Lt(V),re,L))}}}if(Ce.show&&el)if(t!=null){let[x,S]=Ue.scales,[A,C]=Ue.match,[V,ie]=t.cursor.sync.scales,xe=t.cursor.drag;if(et=xe._x,tt=xe._y,et||tt){let{left:_e,top:me,width:te,height:j}=t.select,Pe=t.scales[V].ori,We=t.posToVal,nt,Me,Ge,mt,at,Mt=x!=null&&A(x,V),Rt=S!=null&&C(S,ie);Mt&&et?(Pe==0?(nt=_e,Me=te):(nt=me,Me=j),Ge=y[x],mt=F(We(nt,V),Ge,h,0),at=F(We(nt+Me,V),Ge,h,0),Zl(Nt(mt,at),Ke(at-mt))):Zl(0,h),Rt&&tt?(Pe==1?(nt=_e,Me=te):(nt=me,Me=j),Ge=y[S],mt=$(We(nt,ie),Ge,w,0),at=$(We(nt+Me,ie),Ge,w,0),Ql(Nt(mt,at),Ke(at-mt))):Ql(0,w)}else ls()}else{let x=Ke(li-ei),S=Ke(ni-ti);if(k.ori==1){let ie=x;x=S,S=ie}et=it.x&&x>=it.dist,tt=it.y&&S>=it.dist;let A=it.uni;A!=null?et&&tt&&(et=x>=A,tt=S>=A,!et&&!tt&&(S>x?tt=!0:et=!0)):it.x&&it.y&&(et||tt)&&(et=tt=!0);let C,V;et&&(k.ori==0?(C=Pl,V=Le):(C=Rl,V=Fe),Zl(Nt(C,V),Ke(V-C)),tt||Ql(0,w)),tt&&(k.ori==1?(C=Pl,V=Le):(C=Rl,V=Fe),Ql(Nt(C,V),Ke(V-C)),et||Zl(0,h)),!et&&!tt&&(Zl(0,0),Ql(0,0))}if(it._x=et,it._y=tt,t==null){if(r){if(gi!=null){let[x,S]=Ue.scales;Ue.values[0]=x!=null?Ut(k.ori==0?Le:Fe,x):null,Ue.values[1]=S!=null?Ut(k.ori==1?Le:Fe,S):null}Xl(rs,n,Le,Fe,re,L,a)}if(yl){let x=r&&Ue.setSeries,S=Gt.prox;pl==null?Jt<=S&&Bt(ll,Fl,!0,x):Jt>S?Bt(null,Fl,!0,x):ll!=pl&&Bt(ll,Fl,!0,x)}}kt&&(oe.idx=a,Xn()),s!==!1&&lt("setCursor")}let nl=null;Object.defineProperty(n,"rect",{get(){return nl==null&&$l(!1),nl}});function $l(t=!1){t?nl=null:(nl=M.getBoundingClientRect(),lt("syncRect",nl))}function oi(t,s,r,a,f,h,w){O._lock||el&&t!=null&&t.movementX==0&&t.movementY==0||(es(t,s,r,a,f,h,w,!1,t!=null),t!=null?dl(null,!0,!0):dl(s,!0,!1))}function es(t,s,r,a,f,h,w,x,S){if(nl==null&&$l(!1),cl(t),t!=null)r=t.clientX-nl.left,a=t.clientY-nl.top;else{if(r<0||a<0){Le=-10,Fe=-10;return}let[A,C]=Ue.scales,V=s.cursor.sync,[ie,xe]=V.values,[_e,me]=V.scales,[te,j]=Ue.match,Pe=s.axes[0].side%2==1,We=k.ori==0?re:L,nt=k.ori==1?re:L,Me=Pe?h:f,Ge=Pe?f:h,mt=Pe?a:r,at=Pe?r:a;if(_e!=null?r=te(A,_e)?p(ie,y[A],We,0):-10:r=We*(mt/Me),me!=null?a=j(C,me)?p(xe,y[C],nt,0):-10:a=nt*(at/Ge),k.ori==1){let Mt=r;r=a,a=Mt}}S&&(s==null||s.cursor.event.type==rs)&&((r<=1||r>=re-1)&&(r=ml(r,re)),(a<=1||a>=L-1)&&(a=ml(a,L))),x?(ei=r,ti=a,[Pl,Rl]=O.move(n,r,a)):(Le=r,Fe=a)}const ts={width:0,height:0,left:0,top:0};function ls(){gn(ts,!1)}let ri,ai,ui,ci;function fi(t,s,r,a,f,h,w){el=!0,et=tt=it._x=it._y=!1,es(t,s,r,a,f,h,w,!0,!1),t!=null&&(q(as,ms,pi,!1),Xl(Si,n,Pl,Rl,re,L,null));let{left:x,top:S,width:A,height:C}=Ce;ri=x,ai=S,ui=A,ci=C}function pi(t,s,r,a,f,h,w){el=it._x=it._y=!1,es(t,s,r,a,f,h,w,!1,!0);let{left:x,top:S,width:A,height:C}=Ce,V=A>0||C>0,ie=ri!=x||ai!=S||ui!=A||ci!=C;if(V&&ie&&gn(Ce),it.setScale&&V&&ie){let xe=x,_e=A,me=S,te=C;if(k.ori==1&&(xe=S,_e=C,me=x,te=A),et&&tl(T,Ut(xe,T),Ut(xe+_e,T)),tt)for(let j in y){let Pe=y[j];j!=T&&Pe.from==null&&Pe.min!=Ae&&tl(j,Ut(me+te,j),Ut(me,j))}ls()}else O.lock&&(O._lock=!O._lock,dl(s,!0,t!=null));t!=null&&(we(as,ms),Xl(as,n,Le,Fe,re,L,null))}function Tr(t,s,r,a,f,h,w){if(O._lock)return;cl(t);let x=el;if(el){let S=!0,A=!0,C=10,V,ie;k.ori==0?(V=et,ie=tt):(V=tt,ie=et),V&&ie&&(S=Le<=C||Le>=re-C,A=Fe<=C||Fe>=L-C),V&&S&&(Le=Le<Pl?0:re),ie&&A&&(Fe=Fe<Rl?0:L),dl(null,!0,!0),el=!1}Le=-10,Fe=-10,ge.fill(null),dl(null,!0,!0),x&&(el=x)}function di(t,s,r,a,f,h,w){O._lock||(cl(t),Hn(),ls(),t!=null&&Xl(Ti,n,Le,Fe,re,L,null))}function hi(){E.forEach(Nu),Nn(n.width,n.height,!0)}wl(Tn,Ol,hi);const Vl={};Vl.mousedown=fi,Vl.mousemove=oi,Vl.mouseup=pi,Vl.dblclick=di,Vl.setSeries=(t,s,r,a)=>{let f=Ue.match[2];r=f(n,s,r),r!=-1&&Bt(r,a,!0,!1)},R&&(q(Si,M,fi),q(rs,M,oi),q(yi,M,t=>{cl(t),$l(!1)}),q(ki,M,Tr),q(Ti,M,di),ys.add(n),n.syncRect=$l);const vn=n.hooks=e.hooks||{};function lt(t,s,r){Jn?Jl.push([t,s,r]):t in vn&&vn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)vn[s]=(vn[s]||[]).concat(t.hooks[s])});const mi=(t,s,r)=>r,Ue=Ie({key:null,setSeries:!1,filters:{pub:Vi,sub:Vi},scales:[T,b[1]?b[1].scale:null],match:[Ni,Ni,mi],values:[null,null]},O.sync);Ue.match.length==2&&Ue.match.push(mi),O.sync=Ue;const gi=Ue.key,ns=Oo(gi);function Xl(t,s,r,a,f,h,w){Ue.filters.pub(t,s,r,a,f,h,w)&&ns.pub(t,s,r,a,f,h,w)}ns.sub(n);function Mr(t,s,r,a,f,h,w){Ue.filters.sub(t,s,r,a,f,h,w)&&Vl[t](null,s,r,a,f,h,w)}n.pub=Mr;function Er(){ns.unsub(n),ys.delete(n),X.clear(),ws(Tn,Ol,hi),m.remove(),I?.remove(),lt("destroy")}n.destroy=Er;function ss(){lt("init",e,l),js(l||e.data,!1),G[T]?Zn(T,G[T]):Hn(),cn=Ce.show&&(Ce.width>0||Ce.height>0),ul=kt=!0,Nn(e.width,e.height)}return b.forEach(Is),E.forEach(ir),i?i instanceof HTMLElement?(i.appendChild(m),ss()):i(n,ss):ss(),n}Je.assign=Ie;Je.fmtNum=Rs;Je.rangeNum=Mn;Je.rangeLog=Dn;Je.rangeAsinh=Cs;Je.orient=bl;Je.pxRatio=Se;Je.join=Aa;Je.fmtDate=Fs,Je.tzDate=Oa;Je.sync=Oo;{Je.addGap=xu,Je.clipGaps=Pn;let e=Je.paths={points:Yo};e.linear=qo,e.stepped=ku,e.bars=Tu,e.spline=Eu}const Qo="/api",Hu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ou(e,l=24){const i=await fetch(`${Qo}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Wu(e=24){const l=await fetch(`${Qo}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Gu=Ze('<button type="button"> </button>'),Bu=Ze('<div class="chart-loading svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div> <span>Loading chart data...</span></div>'),Uu=Ze('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Iu=Ze('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yu=Ze('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--amber-400);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function ju(e,l){Ts(l,!0);let i=Zt(()=>xn.config.smoothing_enabled),n=Zt(()=>xn.config.smoothing_samples),o=Dt("UTC"),c=Dt(!1),u=Zt(()=>xn.config.temp_units==="C"),p,d=null,m=Dt(!0),_=Dt(null),g=Dt(24),v=Dt(wi([])),D=Dt(wi([]));const M={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},P="#fbbf24",z="rgba(251, 191, 36, 0.3)",U="#71717a",b="#a1a1aa",E="rgba(255, 255, 255, 0.04)",y="#22d3ee";function ne(R,B,I){const ce=new Date(R*1e3);try{return I?ce.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:B}):ce.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:B})}catch(se){return console.warn("Invalid timezone:",B,se),I?ce.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ce.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function T(R,B,I){const ce=P,se=M[l.tiltColor]||b;return{width:R,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(Y,H,W)=>{const he=(W-H)*.1||.005;return[H-he,W+he]}},temp:{auto:!0,range:(Y,H,W)=>{const he=W-H,fe=10;if(he<fe){const rt=(W+H)/2;return[rt-fe/2,rt+fe/2]}const Ne=he*.1;return[H-Ne,W+Ne]}}},axes:[{stroke:U,grid:{stroke:E,width:1},ticks:{stroke:E,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Y,H)=>H.map(W=>ne(W,I,Z(g)<=24))},{scale:"sg",stroke:ce,grid:{stroke:E,width:1},ticks:{stroke:E,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Y,H)=>H.map(W=>W.toFixed(3)),side:3},{scale:"temp",stroke:se,grid:{show:!1},ticks:{stroke:E,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Y,H)=>H.map(W=>W.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:ce,width:2,fill:(Y,H)=>{const W=Y.ctx.createLinearGradient(0,Y.bbox.top,0,Y.bbox.top+Y.bbox.height);return W.addColorStop(0,z),W.addColorStop(1,"transparent"),W},points:{show:!1},paths:Je.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:se,width:1.5,dash:[4,4],points:{show:!1},paths:Je.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:y,width:1.5,dash:[2,4],points:{show:!1},paths:Je.paths.spline?.()}]}}function J(R,B){if(B<=1)return R;const I=[];for(let ce=0;ce<R.length;ce++){const se=[],Y=Math.floor(B/2);for(let H=Math.max(0,ce-Y);H<=Math.min(R.length-1,ce+Y);H++){const W=R[H];W!==null&&se.push(W)}se.length>0?I.push(se.reduce((H,W)=>H+W,0)/se.length):I.push(null)}return I}function K(R,B,I,ce,se){if(R.length<=se)return[R,B,I,ce];const Y=Math.ceil(R.length/se),H=[],W=[],he=[],fe=[];for(let Ne=0;Ne<R.length;Ne+=Y){const rt=Math.min(Ne+Y,R.length);let Ht=0,Ot=0,X=0,q=0,we=0,Ee=0;for(let Oe=Ne;Oe<rt;Oe++)B[Oe]!==null&&(Ht+=B[Oe],Ot++),I[Oe]!==null&&(X+=I[Oe],q++),ce[Oe]!==null&&(we+=ce[Oe],Ee++);H.push(R[Math.floor((Ne+rt-1)/2)]),W.push(Ot>0?Ht/Ot:null),he.push(q>0?X/q:null),fe.push(Ee>0?we/Ee:null)}return[H,W,he,fe]}function le(R){return!R.endsWith("Z")&&!R.match(/[+-]\d{2}:\d{2}$/)&&(R=R+"Z"),new Date(R).getTime()/1e3}function Q(R,B,I){if(R.length===0||B.length===0)return B.map(()=>null);const ce=[...R].sort((H,W)=>le(H.timestamp)-le(W.timestamp)),se=ce.map(H=>le(H.timestamp)),Y=ce.map(H=>H.temperature===null?null:I?H.temperature:H.temperature*9/5+32);return B.map(H=>{let W=null,he=null;for(let fe=0;fe<se.length;fe++)if(se[fe]<=H&&(W={time:se[fe],temp:Y[fe]}),se[fe]>=H&&he===null){he={time:se[fe],temp:Y[fe]};break}if(W&&he&&W.temp!==null&&he.temp!==null){if(W.time===he.time)return W.temp;const fe=(H-W.time)/(he.time-W.time);return W.temp+fe*(he.temp-W.temp)}return W!==null&&W.temp!==null?W.temp:he!==null&&he.temp!==null?he.temp:null})}function k(R,B,I){const ce=[...R].reverse();let se=[],Y=[],H=[];for(const fe of ce){se.push(le(fe.timestamp)),Y.push(fe.sg_calibrated??fe.sg_raw);const Ne=fe.temp_calibrated??fe.temp_raw;Ne!==null?H.push(I?Rr(Ne):Ne):H.push(null)}let W=Q(B,se,I);return Z(i)&&Z(n)>1&&(Y=J(Y,Z(n)),H=J(H,Z(n)),W=J(W,Z(n))),[se,Y,H,W]=K(se,Y,H,W,500),[se,Y,H,W]}async function ee(){qe(m,!0),qe(_,null);try{const[R,B]=await Promise.all([Ou(l.tiltId,Z(g)),Wu(Z(g)).catch(()=>[])]);qe(v,R,!0),qe(D,B,!0),F()}catch(R){qe(_,R instanceof Error?R.message:"Failed to load data",!0)}finally{qe(m,!1)}}function F(){if(!p||Z(v).length===0)return;const R=k(Z(v),Z(D),Z(u)),B=T(p.clientWidth,Z(u),Z(o));d&&d.destroy(),d=new Je(B,R,p)}function $(){d&&p&&d.setSize({width:p.clientWidth,height:220})}oo(async()=>{try{const R=await fetch("/api/system/timezone");if(R.ok){const B=await R.json();qe(o,B.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ee(),qe(c,!0),window.addEventListener("resize",$)}),Lr(()=>{d?.destroy(),window.removeEventListener("resize",$)}),is(()=>{Z(c)&&Z(g)&&ee()}),is(()=>{Z(u)!==void 0&&Z(v).length>0&&p&&F()}),is(()=>{Z(i),Z(n),Z(v).length>0&&p&&F()});var G=Yu(),ue=pe(G),N=pe(ue);Es(N,21,()=>Hu,ro,(R,B)=>{var I=Gu();let ce;I.__click=()=>qe(g,Z(B).hours,!0);var se=pe(I,!0);ae(I),Kt(()=>{ce=hs(I,1,"range-btn svelte-1e832qd",null,ce,{active:Z(g)===Z(B).hours}),_t(se,Z(B).label)}),He(R,I)}),ae(N);var Be=Ve(N,2),ke=Ve(pe(Be),2),de=pe(ke);il(2),ae(ke),il(2),ae(Be),ae(ue);var ge=Ve(ue,2),oe=pe(ge);{var O=R=>{var B=Bu();He(R,B)},ze=R=>{var B=ds(),I=kn(B);{var ce=Y=>{var H=Uu(),W=Ve(pe(H),2);W.__click=ee,ae(H),He(Y,H)},se=Y=>{var H=ds(),W=kn(H);{var he=fe=>{var Ne=Iu();He(fe,Ne)};bt(W,fe=>{Z(v).length===0&&fe(he)},!0)}He(Y,H)};bt(I,Y=>{Z(_)?Y(ce):Y(se,!1)},!0)}He(R,B)};bt(oe,R=>{Z(m)?R(O):R(ze,!1)})}ae(ge),uo(ge,R=>p=R,()=>p),ae(G),Kt(()=>Sn(de,`background: ${(M[l.tiltColor]||"var(--text-secondary)")??""};`)),He(e,G),Ms()}io(["click"]);var qu=Ze('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),Ku=Ze('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Ju=Ze('<div class="w-1 rounded-sm transition-all"></div>'),Zu=Ze('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qu=Ze('<div class="chart-section svelte-3twv7v"><!></div>'),$u=Ze('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xu=Ze('<div style="background: var(--bg-card); border: 1px solid var(--bg-hover);"><div class="h-1"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight reading-glow" style="color: var(--amber-400);"> </p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Gravity</p></div> <div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight text-[var(--text-primary)]"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full animate-pulse-soft" style="background: var(--tilt-green);"></div></div></div></div></div>');function ec(e,l){Ts(l,!0);let i=Br(l,"expanded",3,!1),n=Dt(!1),o=Dt(""),c=Dt(null),u=Dt(!1);function p(){qe(o,l.tilt.beer_name,!0),qe(n,!0),setTimeout(()=>Z(c)?.focus(),0)}async function d(){if(Z(u))return;const X=Z(o).trim();if(!X||X===l.tilt.beer_name){qe(n,!1);return}qe(u,!0);const q=await Hr(l.tilt.id,X);qe(u,!1),q&&qe(n,!1)}function m(X){X.key==="Enter"?d():X.key==="Escape"&&qe(n,!1)}let _=Zt(ao);const g={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function v(X){return X.toFixed(3)}function D(X){return zr(X)}function M(X){return X>=-50?{bars:4,color:"var(--tilt-green)"}:X>=-60?{bars:3,color:"var(--tilt-green)"}:X>=-70?{bars:2,color:"var(--amber-400)"}:{bars:1,color:"var(--tilt-red)"}}function P(X){const q=Math.floor((Date.now()-new Date(X).getTime())/1e3);if(q<10)return"just now";if(q<60)return`${q}s ago`;const we=Math.floor(q/60);if(we<60)return`${we}m ago`;const Ee=Math.floor(we/60);return Ee<24?`${Ee}h ago`:`${Math.floor(Ee/24)}d ago`}let z=Zt(()=>g[l.tilt.color]||"var(--tilt-black)"),U=Zt(()=>M(l.tilt.rssi)),b=Zt(()=>P(l.tilt.last_seen));var E=Xu();let y;var ne=pe(E),T=Ve(ne,2),J=pe(T),K=pe(J),le=pe(K);{var Q=X=>{var q=qu();Fr(q),q.__keydown=m,uo(q,we=>qe(c,we),()=>Z(c)),Kt(()=>q.disabled=Z(u)),Ar("blur",q,d),Gr(q,()=>Z(o),we=>qe(o,we)),He(X,q)},k=X=>{var q=Ku();q.__click=p;var we=pe(q),Ee=pe(we,!0);ae(we),il(2),ae(q),Kt(()=>_t(Ee,l.tilt.beer_name)),He(X,q)};bt(le,X=>{Z(n)?X(Q):X(k,!1)})}var ee=Ve(le,2),F=pe(ee),$=Ve(F,2),G=pe($,!0);ae($),ae(ee),ae(K);var ue=Ve(K,2),N=pe(ue);Es(N,20,()=>Array(4),ro,(X,q,we)=>{var Ee=Ju();Kt(()=>Sn(Ee,`
								height: ${8+we*4}px;
								background: ${(we<Z(U).bars?Z(U).color:"var(--bg-hover)")??""};
								opacity: ${we<Z(U).bars?1:.4};
							`)),He(X,Ee)}),ae(N);var Be=Ve(N,2),ke=pe(Be);ae(Be),ae(ue),ae(J);var de=Ve(J,2),ge=pe(de),oe=pe(ge),O=pe(oe,!0);ae(oe),il(2),ae(ge);var ze=Ve(ge,2),R=pe(ze),B=pe(R,!0),I=Ve(B),ce=pe(I,!0);ae(I),ae(R),il(2),ae(ze),ae(de);var se=Ve(de,2);{var Y=X=>{var q=Zu(),we=Ve(pe(q),2),Ee=pe(we,!0);ae(we);var Oe=Ve(we,4),re=pe(Oe);ae(Oe),ae(q),Kt((L,Te)=>{_t(Ee,L),_t(re,`${Te??""}${Z(_)??""}`)},[()=>v(l.tilt.sg_raw),()=>D(l.tilt.temp_raw)]),He(X,q)};bt(se,X=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&X(Y)})}var H=Ve(se,2);{var W=X=>{var q=Qu(),we=pe(q);ju(we,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),ae(q),He(X,q)};bt(H,X=>{i()&&X(W)})}var he=Ve(H,2),fe=pe(he),Ne=pe(fe);ae(fe);var rt=Ve(fe,2),Ht=pe(rt);{var Ot=X=>{var q=$u();q.__click=function(...Oe){l.onToggleExpand?.apply(this,Oe)};var we=pe(q);let Ee;ae(q),Kt(()=>{Vr(q,"aria-label",i()?"Collapse chart":"Expand chart"),Ee=hs(we,0,"w-4 h-4 transition-transform",null,Ee,{"rotate-180":i()})}),He(X,q)};bt(Ht,X=>{l.onToggleExpand&&X(Ot)})}il(2),ae(rt),ae(he),ae(T),ae(E),Kt((X,q)=>{y=hs(E,1,"card-glow rounded-xl overflow-hidden animate-fade-in-up svelte-3twv7v",null,y,{expanded:i()}),Sn(ne,`background: ${Z(z)??""}; box-shadow: 0 0 20px ${Z(z)??""}40;`),Sn(F,`background: ${Z(z)??""}; box-shadow: 0 0 8px ${Z(z)??""};`),_t(G,l.tilt.color),_t(ke,`${l.tilt.rssi??""} dBm`),_t(O,X),_t(B,q),_t(ce,Z(_)),_t(Ne,`Updated ${Z(b)??""}`)},[()=>v(l.tilt.sg),()=>D(l.tilt.temp)]),He(e,E),Ms()}io(["keydown","click"]);var tc=Ze('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),lc=Ze('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),nc=Ze('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),sc=Ze('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag"> </span> <span class="label svelte-1uha8ag">Temp</span></div>'),ic=Ze('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag">%</span> <span class="label svelte-1uha8ag">Humidity</span></div>'),oc=Ze('<div class="ambient-card svelte-1uha8ag"><div class="ambient-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Room Ambient</span></div> <div class="ambient-values svelte-1uha8ag"><!> <!></div></div>'),rc=Ze('<div class="tilt-grid svelte-1uha8ag"></div> <!>',1);function wc(e,l){Ts(l,!0),oo(()=>(Or(),()=>Wr()));let i=Zt(()=>Array.from(jt.tilts.values())),n=Dt(null);function o(_){qe(n,Z(n)===_?null:_,!0)}function c(_){return xn.config.temp_units==="F"?(_*9/5+32).toFixed(1):_.toFixed(1)}var u=ds();Nr("1uha8ag",_=>{Cr(()=>{Pr.title="Dashboard | Tilt UI"})});var p=kn(u);{var d=_=>{var g=nc(),v=Ve(pe(g),4),D=pe(v);{var M=b=>{var E=Dr("Waiting for Tilt hydrometers to broadcast...");He(b,E)},P=b=>{var E=tc();He(b,E)};bt(D,b=>{jt.connected?b(M):b(P,!1)})}ae(v);var z=Ve(v,2);{var U=b=>{var E=lc();He(b,E)};bt(z,b=>{jt.connected&&b(U)})}ae(g),He(_,g)},m=_=>{var g=rc(),v=kn(g);Es(v,21,()=>Z(i),P=>P.id,(P,z)=>{{let U=Zt(()=>Z(n)===Z(z).id);ec(P,{get tilt(){return Z(z)},get expanded(){return Z(U)},onToggleExpand:()=>o(Z(z).id)})}}),ae(v);var D=Ve(v,2);{var M=P=>{var z=oc(),U=Ve(pe(z),2),b=pe(U);{var E=T=>{var J=sc(),K=pe(J),le=pe(K,!0);ae(K);var Q=Ve(K,2),k=pe(Q,!0);ae(Q),il(2),ae(J),Kt((ee,F)=>{_t(le,ee),_t(k,F)},[()=>c(jt.ambient.temperature),ao]),He(T,J)};bt(b,T=>{jt.ambient.temperature!==null&&T(E)})}var y=Ve(b,2);{var ne=T=>{var J=ic(),K=pe(J),le=pe(K,!0);ae(K),il(4),ae(J),Kt(Q=>_t(le,Q),[()=>jt.ambient.humidity.toFixed(0)]),He(T,J)};bt(y,T=>{jt.ambient.humidity!==null&&T(ne)})}ae(U),ae(z),He(P,z)};bt(D,P=>{jt.ambient&&(jt.ambient.temperature!==null||jt.ambient.humidity!==null)&&P(M)})}He(_,g)};bt(p,_=>{Z(i).length===0?_(d):_(m,!1)})}He(e,u),Ms()}export{wc as component};
