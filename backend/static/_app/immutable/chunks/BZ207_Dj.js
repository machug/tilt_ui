import{p as _}from"./CJ9U_lt3.js";const l=[...` 	
\r\f \v\uFEFF`];function m(t,n,i){var e=t==null?"":""+t;if(n&&(e=e?e+" "+n:n),i){for(var a in i)if(i[a])e=e?e+" "+a:a;else if(e.length)for(var f=a.length,s=0;(s=e.indexOf(a,s))>=0;){var o=s+f;(s===0||l.includes(e[s-1]))&&(o===e.length||l.includes(e[o]))?e=(s===0?"":e.substring(0,s))+e.substring(o+1):s=o}}return e===""?null:e}function p(t,n){return t==null?null:String(t)}const c={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:3},r=_({config:c,loaded:!1});async function y(){try{const t=await fetch("/api/config");if(t.ok){const n=await t.json();r.config={...c,...n}}}catch(t){console.error("Failed to load config:",t)}finally{r.loaded=!0}}async function b(t){try{const n=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(n.ok){const e=await n.json();return r.config={...c,...e},{success:!0}}const i=await n.json();return i.detail&&Array.isArray(i.detail)?{success:!1,error:i.detail.map(a=>a.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(n){return console.error("Failed to update config:",n),{success:!1,error:"Network error saving settings"}}}function d(t){return(t-32)*(5/9)}function w(t){return t*(9/5)+32}function x(t,n=r.config.temp_units){return n==="C"?d(t).toFixed(1):t.toFixed(1)}function F(){return r.config.temp_units==="C"?"°C":"°F"}function u(t){return-616.868+1111.14*t-630.272*t**2+135.997*t**3}function g(t){return u(t)}function C(t,n=r.config.sg_units){switch(n){case"plato":return u(t).toFixed(1);case"brix":return g(t).toFixed(1);default:return t.toFixed(3)}}function T(){switch(r.config.sg_units){case"plato":return"°P";case"brix":return"°Bx";default:return"SG"}}export{m as a,w as b,r as c,C as d,T as e,d as f,F as g,x as h,y as l,p as t,b as u};
