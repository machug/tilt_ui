import{d as Cn,c as qs,a as xe,f as Se,s as de,e as Sa,t as Gr}from"../chunks/B24rBQoI.js";import{w as Nr,H as zr,b6 as Vr,C as Ir,aa as Ln,au as Mn,b as g,ao as rt,ab as Pn,ad as k,af as b,ac as G,an as et,aq as at,s as Ee,ar as Dl,p as Os,ap as ka,aK as Hr,ai as Gs,b7 as Br,e as jr,ae as Wr}from"../chunks/C_T8bajI.js";import{e as Il,i as ln}from"../chunks/CZKidgdh.js";import{B as Ur,i as Ze}from"../chunks/djw2b56P.js";import{r as Ta,s as An,h as Yr}from"../chunks/DlGheIU4.js";import{s as ml}from"../chunks/t-emS6lL.js";import{u as qr,e as Kr,t as Ms}from"../chunks/04PLVICl.js";import{w as _n}from"../chunks/Cb2Ru3UF.js";import{T as Jr,g as Zr,h as Qr,e as Xr}from"../chunks/C_g1FNU9.js";import{s as zl}from"../chunks/_viQy8uA.js";import{b as Ea}from"../chunks/DfSvvF4c.js";import{b as Ks}from"../chunks/CTvV6IFe.js";import{p as qn}from"../chunks/DQ4PuS3a.js";import{f as bn,c as Un,d as Js,e as Zs,g as Ma,h as $r}from"../chunks/DYQtcwFc.js";import{i as eo,s as to}from"../chunks/BwuipzDw.js";import{g as Hn}from"../chunks/D9gP4VA-.js";function lo(e,l,i){Nr&&zr();var n=new Ur(e),a=!Vr();Ir(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const no=!0,Tt="u-",so="uplot",io=Tt+"hz",ao=Tt+"vt",ro=Tt+"title",oo=Tt+"wrap",co=Tt+"under",uo=Tt+"over",fo=Tt+"axis",Nl=Tt+"off",po=Tt+"select",vo=Tt+"cursor-x",ho=Tt+"cursor-y",go=Tt+"cursor-pt",mo=Tt+"legend",_o=Tt+"live",wo=Tt+"inline",xo=Tt+"series",bo=Tt+"marker",Ni=Tt+"label",yo=Tt+"value",yn="width",Sn="height",wn="top",zi="bottom",$l="left",As="right",Qs="#000",Vi=Qs+"0",Ds="mousemove",Ii="mousedown",Cs="mouseup",Hi="mouseenter",Bi="mouseleave",ji="dblclick",So="resize",ko="scroll",Wi="change",Kn="dppxchange",Xs="--",on=typeof window<"u",Ns=on?document:null,tn=on?window:null,To=on?navigator:null;let Ne,Bn;function zs(){let e=devicePixelRatio;Ne!=e&&(Ne=e,Bn&&Is(Wi,Bn,zs),Bn=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),Vl(Wi,Bn,zs),tn.dispatchEvent(new CustomEvent(Kn)))}function Ut(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Vs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Je(e,l,i){e.style[l]=i+"px"}function rl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&Ut(a,l),i?.insertBefore(a,n),a}function Xt(e,l){return rl("div",e,l)}const Ui=new WeakMap;function gl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Ui.get(e);c!=u&&(e.style.transform=c,Ui.set(e,c),l<0||i<0||l>n||i>a?Ut(e,Nl):Vs(e,Nl))}const Yi=new WeakMap;function qi(e,l,i){let n=l+i,a=Yi.get(e);n!=a&&(Yi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ki=new WeakMap;function Ji(e,l,i,n){let a=l+""+i,c=Ki.get(e);a!=c&&(Ki.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const $s={passive:!0},Eo={...$s,capture:!0};function Vl(e,l,i,n){l.addEventListener(e,i,n?Eo:$s)}function Is(e,l,i,n){l.removeEventListener(e,i,$s)}on&&zs();function ol(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:Yt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Aa(e){return(i,n,a)=>{let c=-1,u=-1;for(let d=n;d<=a;d++)if(e(i[d])){c=d;break}for(let d=a;d>=n;d--)if(e(i[d])){u=d;break}return[c,u]}}const Da=e=>e!=null,Ca=e=>e!=null&&e>0,Qn=Aa(Da),Mo=Aa(Ca);function Ao(e,l,i,n=0,a=!1){let c=a?Mo:Qn,u=a?Ca:Da;[l,i]=c(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let v=l;v<=i;v++){let y=e[v];u(y)&&(y<d?d=y:y>p&&(p=y))}return[d??Be,p??-Be]}function Xn(e,l,i,n){let a=Xi(e),c=Xi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?xl:La,d=a==1?Yt:$t,p=c==1?$t:Yt,v=d(u(St(e))),y=p(u(St(l))),m=nn(i,v),_=nn(i,y);return i==10&&(v<0&&(m=je(m,-v)),y<0&&(_=je(_,-y))),n||i==2?(e=m*a,l=_*c):(e=Oa(e,m),l=$n(l,_)),[e,l]}function ei(e,l,i,n){let a=Xn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const ti=.1,Zi={mode:3,pad:ti},Tn={pad:0,soft:null,mode:0},Do={min:Tn,max:Tn};function Jn(e,l,i,n){return es(i)?Qi(e,l,i):(Tn.pad=i,Tn.soft=n?0:null,Tn.mode=n?3:0,Qi(e,l,Do))}function Fe(e,l){return e??l}function Co(e,l,i){for(l=Fe(l,0),i=Fe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Qi(e,l,i){let n=i.min,a=i.max,c=Fe(n.pad,0),u=Fe(a.pad,0),d=Fe(n.hard,-Be),p=Fe(a.hard,Be),v=Fe(n.soft,Be),y=Fe(a.soft,-Be),m=Fe(n.mode,0),_=Fe(a.mode,0),z=l-e,E=xl(z),ee=zt(St(e),St(l)),N=xl(ee),H=St(N-E);(z<1e-24||H>10)&&(z=0,(e==0||l==0)&&(z=1e-24,m==2&&v!=Be&&(c=0),_==2&&y!=-Be&&(u=0)));let T=z||ee||1e3,C=xl(T),S=nn(10,Yt(C)),Y=T*(z==0?e==0?.1:1:c),O=je(Oa(e-Y,S/10),24),J=e>=v&&(m==1||m==3&&O<=v||m==2&&O>=v)?v:Be,Q=zt(d,O<J&&e>=J?J:cl(J,O)),te=T*(z==0?l==0?.1:1:u),Z=je($n(l+te,S/10),24),w=l<=y&&(_==1||_==3&&Z>=y||_==2&&Z<=y)?y:-Be,L=cl(p,Z>w&&l<=w?w:zt(w,Z));return Q==L&&Q==0&&(L=100),[Q,L]}const Lo=new Intl.NumberFormat(on?To.language:"en-US"),li=e=>Lo.format(e),qt=Math,Yn=qt.PI,St=qt.abs,Yt=qt.floor,yt=qt.round,$t=qt.ceil,cl=qt.min,zt=qt.max,nn=qt.pow,Xi=qt.sign,xl=qt.log10,La=qt.log2,Po=(e,l=1)=>qt.sinh(e)*l,Ls=(e,l=1)=>qt.asinh(e/l),Be=1/0;function $i(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Hs(e,l,i){return cl(zt(e,l),i)}function Pa(e){return typeof e=="function"}function Ae(e){return Pa(e)?e:()=>e}const Ro=()=>{},Ra=e=>e,Fa=(e,l)=>l,Fo=e=>null,ea=e=>!0,ta=(e,l)=>e==l,Oo=/\.\d*?(?=9{6,}|0{6,})/gm,Hl=e=>{if(Na(e)||Cl.has(e))return e;const l=`${e}`,i=l.match(Oo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Hl(a)}e${c}`}return je(e,n)};function Ol(e,l){return Hl(je(Hl(e/l))*l)}function $n(e,l){return Hl($t(Hl(e/l))*l)}function Oa(e,l){return Hl(Yt(Hl(e/l))*l)}function je(e,l=0){if(Na(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return yt(n)/i}const Cl=new Map;function Ga(e){return((""+e).split(".")[1]||"").length}function Dn(e,l,i,n){let a=[],c=n.map(Ga);for(let u=l;u<i;u++){let d=St(u),p=je(nn(e,u),d);for(let v=0;v<n.length;v++){let y=e==10?+`${n[v]}e${u}`:n[v]*p,m=(u>=0?0:d)+(u>=c[v]?0:c[v]),_=e==10?y:je(y,m);a.push(_),Cl.set(_,m)}}return a}const En={},ni=[],sn=[null,null],Al=Array.isArray,Na=Number.isInteger,Go=e=>e===void 0;function la(e){return typeof e=="string"}function es(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function No(e){return e!=null&&typeof e=="object"}const zo=Object.getPrototypeOf(Uint8Array),za="__proto__";function an(e,l=es){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=an(e[a],l)}else i=e.slice()}else if(e instanceof zo)i=e.slice();else if(l(e)){i={};for(let n in e)n!=za&&(i[n]=an(e[n],l))}else i=e;return i}function mt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=za&&(es(e[a])?mt(e[a],an(n[a])):e[a]=an(n[a]))}return e}const Vo=0,Io=1,Ho=2;function Bo(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function jo(e,l){if(Yo(e)){let u=e[0].slice();for(let d=1;d<e.length;d++)u.push(...e[d].slice(1));return qo(u[0])||(u=Uo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let p=e[u][0],v=p.length;for(let y=0;y<v;y++)i.add(p[y])}let n=[Array.from(i).sort((u,d)=>u-d)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let d=e[u],p=d[0];for(let v=1;v<d.length;v++){let y=d[v],m=Array(a).fill(void 0),_=l?l[u][v]:Io,z=[];for(let E=0;E<y.length;E++){let ee=y[E],N=c.get(p[E]);ee===null?_!=Vo&&(m[N]=ee,_==Ho&&z.push(N)):m[N]=ee}Bo(m,z,a),n.push(m)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],d=Array(i);for(let p=0;p<i;p++)d[p]=u[n[p]];a.push(d)}return a}function Yo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function qo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=zt(1,Yt((a-n+1)/l));for(let u=e[n],d=n+c;d<=a;d+=c){const p=e[d];if(p!=null){if(p<=u)return!1;u=p}}return!0}const Va=["January","February","March","April","May","June","July","August","September","October","November","December"],Ia=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ha(e){return e.slice(0,3)}const Ko=Ia.map(Ha),Jo=Va.map(Ha),Zo={MMMM:Va,MMM:Jo,WWWW:Ia,WWW:Ko};function xn(e){return(e<10?"0":"")+e}function Qo(e){return(e<10?"00":e<100?"0":"")+e}const Xo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>xn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>xn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>xn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>xn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>xn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Qo(e.getMilliseconds())};function si(e,l){l=l||Zo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Xo[a[1]]:a[0]);return c=>{let u="";for(let d=0;d<i.length;d++)u+=typeof i[d]=="string"?i[d]:i[d](c,l);return u}}const $o=new Intl.DateTimeFormat().resolvedOptions().timeZone;function ec(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==$o?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Zn=[1,2,2.5,5],tc=Dn(10,-32,0,Zn),ja=Dn(10,0,32,Zn),lc=ja.filter(Ba),Gl=tc.concat(ja),ii=`
`,Wa="{YYYY}",na=ii+Wa,Ua="{M}/{D}",kn=ii+Ua,jn=kn+"/{YY}",Ya="{aa}",nc="{h}:{mm}",en=nc+Ya,sa=ii+en,ia=":{ss}",Ve=null;function qa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,p=(e==1?Dn(10,0,3,Zn).filter(Ba):Dn(10,-3,0,Zn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Wa,Ve,Ve,Ve,Ve,Ve,Ve,1],[a*28,"{MMM}",na,Ve,Ve,Ve,Ve,Ve,1],[a,Ua,na,Ve,Ve,Ve,Ve,Ve,1],[n,"{h}"+Ya,jn,Ve,kn,Ve,Ve,Ve,1],[i,en,jn,Ve,kn,Ve,Ve,Ve,1],[l,ia,jn+" "+en,Ve,kn+" "+en,Ve,sa,Ve,1],[e,ia+".{fff}",jn+" "+en,Ve,kn+" "+en,Ve,sa,Ve,1]];function y(m){return(_,z,E,ee,N,H)=>{let T=[],C=N>=u,S=N>=c&&N<u,Y=m(E),O=je(Y*e,3),J=Ps(Y.getFullYear(),C?0:Y.getMonth(),S||C?1:Y.getDate()),Q=je(J*e,3);if(S||C){let te=S?N/c:0,Z=C?N/u:0,w=O==Q?O:je(Ps(J.getFullYear()+Z,J.getMonth()+te,1)*e,3),L=new Date(yt(w/e)),M=L.getFullYear(),V=L.getMonth();for(let A=0;w<=ee;A++){let q=Ps(M+Z*A,V+te*A,1),R=q-m(je(q*e,3));w=je((+q+R)*e,3),w<=ee&&T.push(w)}}else{let te=N>=a?a:N,Z=Yt(E)-Yt(O),w=Q+Z+$n(O-Q,te);T.push(w);let L=m(w),M=L.getHours()+L.getMinutes()/i+L.getSeconds()/n,V=N/n,A=_.axes[z]._space,q=H/A;for(;w=je(w+N,e==1?0:3),!(w>ee);)if(V>1){let R=Yt(je(M+V,6))%24,re=m(w).getHours()-R;re>1&&(re=-1),w-=re*n,M=(M+V)%24;let me=T[T.length-1];je((w-me)/N,3)*q>=.7&&T.push(w)}else T.push(w)}return T}}return[p,v,y]}const[sc,ic,ac]=qa(1),[rc,oc,cc]=qa(.001);Dn(2,-53,53,[1]);function aa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ra(e,l){return(i,n,a,c,u)=>{let d=l.find(E=>u>=E[0])||l[l.length-1],p,v,y,m,_,z;return n.map(E=>{let ee=e(E),N=ee.getFullYear(),H=ee.getMonth(),T=ee.getDate(),C=ee.getHours(),S=ee.getMinutes(),Y=ee.getSeconds(),O=N!=p&&d[2]||H!=v&&d[3]||T!=y&&d[4]||C!=m&&d[5]||S!=_&&d[6]||Y!=z&&d[7]||d[1];return p=N,v=H,y=T,m=C,_=S,z=Y,O(ee)})}}function uc(e,l){let i=si(l);return(n,a,c,u,d)=>a.map(p=>i(e(p)))}function Ps(e,l,i){return new Date(e,l,i)}function oa(e,l){return l(e)}const fc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ca(e,l){return(i,n,a,c)=>c==null?Xs:l(e(n))}function dc(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function pc(e,l){return e.series[l].fill(e,l)}const vc={show:!0,live:!0,isolate:!1,mount:Ro,markers:{show:!0,width:2,stroke:dc,fill:pc,dash:"solid"},idx:null,idxs:null,values:[]};function hc(e,l){let i=e.cursor.points,n=Xt(),a=i.size(e,l);Je(n,yn,a),Je(n,Sn,a);let c=a/-2;Je(n,"marginLeft",c),Je(n,"marginTop",c);let u=i.width(e,l,a);return u&&Je(n,"borderWidth",u),n}function gc(e,l){let i=e.series[l].points;return i._fill||i._stroke}function mc(e,l){let i=e.series[l].points;return i._stroke||i._fill}function _c(e,l){return e.series[l].points.size}const Rs=[0,0];function wc(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function Wn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const xc={show:!0,x:!0,y:!0,lock:!1,move:wc,points:{one:!1,show:hc,size:_c,width:0,stroke:mc,fill:gc},bind:{mousedown:Wn,mouseup:Wn,click:Wn,dblclick:Wn,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ka={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ai=mt({},Ka,{filter:Fa}),Ja=mt({},ai,{size:10}),Za=mt({},Ka,{show:!1}),ri='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Qa="bold "+ri,Xa=1.5,ua={show:!0,scale:"x",stroke:Qs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:2,grid:ai,ticks:Ja,border:Za,font:ri,lineGap:Xa,rotate:0},bc="Value",yc="Time",fa={show:!0,scale:"x",auto:!1,sorted:1,min:Be,max:-Be,idxs:[]};function Sc(e,l,i,n,a){return l.map(c=>c==null?"":li(c))}function kc(e,l,i,n,a,c,u){let d=[],p=Cl.get(a)||0;i=u?i:je($n(i,a),p);for(let v=i;v<=n;v=je(v+a,p))d.push(Object.is(v,-0)?0:v);return d}function Bs(e,l,i,n,a,c,u){const d=[],p=e.scales[e.axes[l].scale].log,v=p==10?xl:La,y=Yt(v(i));a=nn(p,y),p==10&&(a=Gl[ol(a,Gl)]);let m=i,_=a*p;p==10&&(_=Gl[ol(_,Gl)]);do d.push(m),m=m+a,p==10&&!Cl.has(m)&&(m=je(m,Cl.get(a))),m>=_&&(a=m,_=a*p,p==10&&(_=Gl[ol(_,Gl)]));while(m<=n);return d}function Tc(e,l,i,n,a,c,u){let p=e.scales[e.axes[l].scale].asinh,v=n>p?Bs(e,l,zt(p,i),n,a):[p],y=n>=0&&i<=0?[0]:[];return(i<-p?Bs(e,l,zt(p,-n),-i,a):[p]).reverse().map(_=>-_).concat(y,v)}const $a=/./,Ec=/[12357]/,Mc=/[125]/,da=/1/,js=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Ac(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=e.scales[u],p=e.valToPos,v=c._space,y=p(10,u),m=p(9,u)-y>=v?$a:p(7,u)-y>=v?Ec:p(5,u)-y>=v?Mc:da;if(m==da){let _=St(p(1,u)-y);if(_<v)return js(l.slice().reverse(),d.distr,m,$t(v/_)).reverse()}return js(l,d.distr,m,1)}function Dc(e,l,i,n,a){let c=e.axes[i],u=c.scale,d=c._space,p=e.valToPos,v=St(p(1,u)-p(2,u));return v<d?js(l.slice().reverse(),3,$a,$t(d/v)).reverse():l}function Cc(e,l,i,n){return n==null?Xs:l==null?"":li(l)}const pa={show:!0,scale:"y",stroke:Qs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:3,grid:ai,ticks:Ja,border:Za,font:ri,lineGap:Xa,rotate:0};function Lc(e,l){let i=3+(e||1)*2;return je(i*l,3)}function Pc(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),d=St(u-c),p=e.series[l],v=d/(p.points.space*Ne);return n[1]-n[0]<=v}const va={scale:null,auto:!0,sorted:0,min:Be,max:-Be},er=(e,l,i,n,a)=>a,ha={show:!0,auto:!0,sorted:0,gaps:er,alpha:1,facets:[mt({},va,{scale:"x"}),mt({},va,{scale:"y"})]},ga={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:er,alpha:1,points:{show:Pc,filter:null},values:null,min:Be,max:-Be,idxs:[],path:null,clip:null};function Rc(e,l,i,n,a){return i/10}const tr={time:no,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Fc=mt({},tr,{time:!1,ori:1}),ma={};function lr(e,l){let i=ma[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,d,p,v){for(let y=0;y<i.plots.length;y++)i.plots[y]!=a&&i.plots[y].pub(n,a,c,u,d,p,v)}},e!=null&&(ma[e]=i)),i}const rn=1,Ws=2;function Bl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,d=e.bbox;let p=c[0],v=n==2?c[1]:c[l],y=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=d.left,z=d.top,E=d.width,ee=d.height,N=e.valToPosH,H=e.valToPosV;return y.ori==0?i(a,p,v,y,m,N,H,_,z,E,ee,ls,cn,ss,sr,ar):i(a,p,v,y,m,H,N,z,_,ee,E,ns,un,ui,ir,rr)}function oi(e,l){let i=0,n=0,a=Fe(e.bands,ni);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Oc(e,l,i,n,a){let c=e.mode,u=e.series[l],d=c==2?u.facets[1].scale:u.scale,p=e.scales[d];return a==-1?p.min:a==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function bl(e,l,i,n,a,c){return Bl(e,l,(u,d,p,v,y,m,_,z,E,ee,N)=>{let H=u.pxRound;const T=v.dir*(v.ori==0?1:-1),C=v.ori==0?cn:un;let S,Y;T==1?(S=i,Y=n):(S=n,Y=i);let O=H(m(d[S],v,ee,z)),J=H(_(p[S],y,N,E)),Q=H(m(d[Y],v,ee,z)),te=H(_(c==1?y.max:y.min,y,N,E)),Z=new Path2D(a);return C(Z,Q,te),C(Z,O,te),C(Z,O,J),Z})}function ts(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const d=l==0?ss:ui;let p=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let z=_[0]-p;z>0&&d(u,p,n,z,n+c),p=_[1]}}let v=i+a-p,y=10;v>0&&d(u,p,n-y/2,v,n+c+y)}return u}function Gc(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ci(e,l,i,n,a,c,u){let d=[],p=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let m=v,_=v;if(a==1)for(;++v<=n&&l[v]===null;)_=v;else for(;--v>=i&&l[v]===null;)_=v;let z=c(e[m]),E=_==m?z:c(e[_]),ee=m-a;z=u<=0&&ee>=0&&ee<p?c(e[ee]):z;let H=_+a;E=u>=0&&H>=0&&H<p?c(e[H]):E,E>=z&&d.push([z,E])}return d}function _a(e){return e==0?Ra:e==1?yt:l=>Ol(l,e)}function nr(e){let l=e==0?ls:ns,i=e==0?(a,c,u,d,p,v)=>{a.arcTo(c,u,d,p,v)}:(a,c,u,d,p,v)=>{a.arcTo(u,c,p,d,v)},n=e==0?(a,c,u,d,p)=>{a.rect(c,u,d,p)}:(a,c,u,d,p)=>{a.rect(u,c,p,d)};return(a,c,u,d,p,v=0,y=0)=>{v==0&&y==0?n(a,c,u,d,p):(v=cl(v,d/2,p/2),y=cl(y,d/2,p/2),l(a,c+v,u),i(a,c+d,u,c+d,u+p,v),i(a,c+d,u+p,c,u+p,y),i(a,c,u+p,c,u,y),i(a,c,u,c+d,u,v),a.closePath())}}const ls=(e,l,i)=>{e.moveTo(l,i)},ns=(e,l,i)=>{e.moveTo(i,l)},cn=(e,l,i)=>{e.lineTo(l,i)},un=(e,l,i)=>{e.lineTo(i,l)},ss=nr(0),ui=nr(1),sr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},ir=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},ar=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},rr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function or(e){return(l,i,n,a,c)=>Bl(l,i,(u,d,p,v,y,m,_,z,E,ee,N)=>{let{pxRound:H,points:T}=u,C,S;v.ori==0?(C=ls,S=sr):(C=ns,S=ir);const Y=je(T.width*Ne,3);let O=(T.size-T.width)/2*Ne,J=je(O*2,3),Q=new Path2D,te=new Path2D,{left:Z,top:w,width:L,height:M}=l.bbox;ss(te,Z-J,w-J,L+J*2,M+J*2);const V=A=>{if(p[A]!=null){let q=H(m(d[A],v,ee,z)),R=H(_(p[A],y,N,E));C(Q,q+O,R),S(Q,q,R,O,0,Yn*2)}};if(c)c.forEach(V);else for(let A=n;A<=a;A++)V(A);return{stroke:Y>0?Q:null,fill:Q,clip:te,flags:rn|Ws}})}function cr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Nc=cr(cn),zc=cr(un);function ur(e){const l=Fe(e?.alignGaps,0);return(i,n,a,c)=>Bl(i,n,(u,d,p,v,y,m,_,z,E,ee,N)=>{[a,c]=Qn(p,a,c);let H=u.pxRound,T=M=>H(m(M,v,ee,z)),C=M=>H(_(M,y,N,E)),S,Y;v.ori==0?(S=cn,Y=Nc):(S=un,Y=zc);const O=v.dir*(v.ori==0?1:-1),J={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:rn},Q=J.stroke;let te=!1;if(c-a>=ee*4){let M=j=>i.posToVal(j,v.key,!0),V=null,A=null,q,R,we,ge=T(d[O==1?a:c]),re=T(d[a]),me=T(d[c]),se=M(O==1?re+1:me-1);for(let j=O==1?a:c;j>=a&&j<=c;j+=O){let Me=d[j],ke=(O==1?Me<se:Me>se)?ge:T(Me),pe=p[j];ke==ge?pe!=null?(R=pe,V==null?(S(Q,ke,C(R)),q=V=A=R):R<V?V=R:R>A&&(A=R)):pe===null&&(te=!0):(V!=null&&Y(Q,ge,C(V),C(A),C(q),C(R)),pe!=null?(R=pe,S(Q,ke,C(R)),V=A=q=R):(V=A=null,pe===null&&(te=!0)),ge=ke,se=M(ge+O))}V!=null&&V!=A&&we!=ge&&Y(Q,ge,C(V),C(A),C(q),C(R))}else for(let M=O==1?a:c;M>=a&&M<=c;M+=O){let V=p[M];V===null?te=!0:V!=null&&S(Q,T(d[M]),C(V))}let[w,L]=oi(i,n);if(u.fill!=null||w!=0){let M=J.fill=new Path2D(Q),V=u.fillTo(i,n,u.min,u.max,w),A=C(V),q=T(d[a]),R=T(d[c]);O==-1&&([R,q]=[q,R]),S(M,R,A),S(M,q,A)}if(!u.spanGaps){let M=[];te&&M.push(...ci(d,p,a,c,O,T,l)),J.gaps=M=u.gaps(i,n,a,c,M),J.clip=ts(M,v.ori,z,E,ee,N)}return L!=0&&(J.band=L==2?[bl(i,n,a,c,Q,-1),bl(i,n,a,c,Q,1)]:bl(i,n,a,c,Q,L)),J})}function Vc(e){const l=Fe(e.align,1),i=Fe(e.ascDesc,!1),n=Fe(e.alignGaps,0),a=Fe(e.extend,!1);return(c,u,d,p)=>Bl(c,u,(v,y,m,_,z,E,ee,N,H,T,C)=>{[d,p]=Qn(m,d,p);let S=v.pxRound,{left:Y,width:O}=c.bbox,J=re=>S(E(re,_,T,N)),Q=re=>S(ee(re,z,C,H)),te=_.ori==0?cn:un;const Z={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:rn},w=Z.stroke,L=_.dir*(_.ori==0?1:-1);let M=Q(m[L==1?d:p]),V=J(y[L==1?d:p]),A=V,q=V;a&&l==-1&&(q=Y,te(w,q,M)),te(w,V,M);for(let re=L==1?d:p;re>=d&&re<=p;re+=L){let me=m[re];if(me==null)continue;let se=J(y[re]),j=Q(me);l==1?te(w,se,M):te(w,A,j),te(w,se,j),M=j,A=se}let R=A;a&&l==1&&(R=Y+O,te(w,R,M));let[we,ge]=oi(c,u);if(v.fill!=null||we!=0){let re=Z.fill=new Path2D(w),me=v.fillTo(c,u,v.min,v.max,we),se=Q(me);te(re,R,se),te(re,q,se)}if(!v.spanGaps){let re=[];re.push(...ci(y,m,d,p,L,J,n));let me=v.width*Ne/2,se=i||l==1?me:-me,j=i||l==-1?-me:me;re.forEach(Me=>{Me[0]+=se,Me[1]+=j}),Z.gaps=re=v.gaps(c,u,d,p,re),Z.clip=ts(re,_.ori,N,H,T,C)}return ge!=0&&(Z.band=ge==2?[bl(c,u,d,p,w,-1),bl(c,u,d,p,w,1)]:bl(c,u,d,p,w,ge)),Z})}function wa(e,l,i,n,a,c,u=Be){if(e.length>1){let d=null;for(let p=0,v=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let y=St(e[p]-e[d]);y<v&&(v=y,u=St(i(e[p],n,a,c)-i(e[d],n,a,c)))}d=p}}return u}function Ic(e){e=e||En;const l=Fe(e.size,[.6,Be,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Ae(a),u=1-l[0],d=Fe(l[1],Be),p=Fe(l[2],1),v=Fe(e.disp,En),y=Fe(e.each,z=>{}),{fill:m,stroke:_}=v;return(z,E,ee,N)=>Bl(z,E,(H,T,C,S,Y,O,J,Q,te,Z,w)=>{let L=H.pxRound,M=i,V=n*Ne,A=d*Ne,q=p*Ne,R,we;S.ori==0?[R,we]=c(z,E):[we,R]=c(z,E);const ge=S.dir*(S.ori==0?1:-1);let re=S.ori==0?ss:ui,me=S.ori==0?y:(I,Le,X,ue,Ce,Oe,ut)=>{y(I,Le,X,Ce,ue,ut,Oe)},se=Fe(z.bands,ni).find(I=>I.series[0]==E),j=se!=null?se.dir:0,Me=H.fillTo(z,E,H.min,H.max,j),He=L(J(Me,Y,w,te)),ke,pe,tt,Xe=Z,De=L(H.width*Ne),ot=!1,lt=null,We=null,$e=null,_t=null;m!=null&&(De==0||_!=null)&&(ot=!0,lt=m.values(z,E,ee,N),We=new Map,new Set(lt).forEach(I=>{I!=null&&We.set(I,new Path2D)}),De>0&&($e=_.values(z,E,ee,N),_t=new Map,new Set($e).forEach(I=>{I!=null&&_t.set(I,new Path2D)})));let{x0:ve,size:ct}=v;if(ve!=null&&ct!=null){M=1,T=ve.values(z,E,ee,N),ve.unit==2&&(T=T.map(X=>z.posToVal(Q+X*Z,S.key,!0)));let I=ct.values(z,E,ee,N);ct.unit==2?pe=I[0]*Z:pe=O(I[0],S,Z,Q)-O(0,S,Z,Q),Xe=wa(T,C,O,S,Z,Q,Xe),tt=Xe-pe+V}else Xe=wa(T,C,O,S,Z,Q,Xe),tt=Xe*u+V,pe=Xe-tt;tt<1&&(tt=0),De>=pe/2&&(De=0),tt<5&&(L=Ra);let Ft=tt>0,wt=Xe-tt-(Ft?De:0);pe=L(Hs(wt,q,A)),ke=(M==0?pe/2:M==ge?0:pe)-M*ge*((M==0?V/2:0)+(Ft?De/2:0));const Ue={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},dt=ot?null:new Path2D;let xt=null;if(se!=null)xt=z.data[se.series[1]];else{let{y0:I,y1:Le}=v;I!=null&&Le!=null&&(C=Le.values(z,E,ee,N),xt=I.values(z,E,ee,N))}let Vt=R*pe,oe=we*pe;for(let I=ge==1?ee:N;I>=ee&&I<=N;I+=ge){let Le=C[I];if(Le==null)continue;if(xt!=null){let K=xt[I]??0;if(Le-K==0)continue;He=J(K,Y,w,te)}let X=S.distr!=2||v!=null?T[I]:I,ue=O(X,S,Z,Q),Ce=J(Fe(Le,Me),Y,w,te),Oe=L(ue-ke),ut=L(zt(Ce,He)),F=L(cl(Ce,He)),W=ut-F;if(Le!=null){let K=Le<0?oe:Vt,ie=Le<0?Vt:oe;ot?(De>0&&$e[I]!=null&&re(_t.get($e[I]),Oe,F+Yt(De/2),pe,zt(0,W-De),K,ie),lt[I]!=null&&re(We.get(lt[I]),Oe,F+Yt(De/2),pe,zt(0,W-De),K,ie)):re(dt,Oe,F+Yt(De/2),pe,zt(0,W-De),K,ie),me(z,E,I,Oe-De/2,F,pe+De,W)}}return De>0?Ue.stroke=ot?_t:dt:ot||(Ue._fill=H.width==0?H._fill:H._stroke??H._fill,Ue.width=0),Ue.fill=ot?We:dt,Ue})}function Hc(e,l){const i=Fe(l?.alignGaps,0);return(n,a,c,u)=>Bl(n,a,(d,p,v,y,m,_,z,E,ee,N,H)=>{[c,u]=Qn(v,c,u);let T=d.pxRound,C=R=>T(_(R,y,N,E)),S=R=>T(z(R,m,H,ee)),Y,O,J;y.ori==0?(Y=ls,J=cn,O=ar):(Y=ns,J=un,O=rr);const Q=y.dir*(y.ori==0?1:-1);let te=C(p[Q==1?c:u]),Z=te,w=[],L=[];for(let R=Q==1?c:u;R>=c&&R<=u;R+=Q)if(v[R]!=null){let ge=p[R],re=C(ge);w.push(Z=re),L.push(S(v[R]))}const M={stroke:e(w,L,Y,J,O,T),fill:null,clip:null,band:null,gaps:null,flags:rn},V=M.stroke;let[A,q]=oi(n,a);if(d.fill!=null||A!=0){let R=M.fill=new Path2D(V),we=d.fillTo(n,a,d.min,d.max,A),ge=S(we);J(R,Z,ge),J(R,te,ge)}if(!d.spanGaps){let R=[];R.push(...ci(p,v,c,u,Q,C,i)),M.gaps=R=d.gaps(n,a,c,u,R),M.clip=ts(R,y.ori,E,ee,N,H)}return q!=0&&(M.band=q==2?[bl(n,a,c,u,V,-1),bl(n,a,c,u,V,1)]:bl(n,a,c,u,V,q)),M})}function Bc(e){return Hc(jc,e)}function jc(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),u==2)n(d,e[1],l[1]);else{let p=Array(u),v=Array(u-1),y=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)y[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],v[_]=y[_]/m[_];p[0]=v[0];for(let _=1;_<u-1;_++)v[_]===0||v[_-1]===0||v[_-1]>0!=v[_]>0?p[_]=0:(p[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/v[_-1]+(m[_]+2*m[_-1])/v[_]),isFinite(p[_])||(p[_]=0));p[u-1]=v[u-2];for(let _=0;_<u-1;_++)a(d,e[_]+m[_]/3,l[_]+p[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-p[_+1]*m[_]/3,e[_+1],l[_+1])}return d}const Us=new Set;function xa(){for(let e of Us)e.syncRect(!0)}on&&(Vl(So,tn,xa),Vl(ko,tn,xa,!0),Vl(Kn,tn,()=>{kt.pxRatio=Ne}));const Wc=ur(),Uc=or();function ba(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Yc(e,l){return e.map((i,n)=>n==0?{}:mt({},l,i))}function Ys(e,l,i,n){return mt({},l==0?i:n,e)}function fr(e,l,i){return l==null?sn:[l,i]}const qc=fr;function Kc(e,l,i){return l==null?sn:Jn(l,i,ti,!0)}function dr(e,l,i,n){return l==null?sn:Xn(l,i,e.scales[n].log,!1)}const Jc=dr;function pr(e,l,i,n){return l==null?sn:ei(l,i,e.scales[n].log,!1)}const Zc=pr;function Qc(e,l,i,n,a){let c=zt($i(e),$i(l)),u=l-e,d=ol(a/n*u,i);do{let p=i[d],v=n*p/u;if(v>=a&&c+(p<5?Cl.get(p):0)<=17)return[p,v]}while(++d<i.length);return[0,0]}function ya(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=yt((i=+a)*Ne))+"px"),[e,l,i]}function Xc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=je(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function kt(e,l,i){const n={mode:Fe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let p=!1;n.status=0;const v=n.root=Xt(so);if(e.id!=null&&(v.id=e.id),Ut(v,e.class),e.title){let t=Xt(ro,v);t.textContent=e.title}const y=rl("canvas"),m=n.ctx=y.getContext("2d"),_=Xt(oo,v);Vl("click",_,t=>{t.target===E&&(Ye!=Kl||Qe!=Jl)&&Rt.click(n,t)},!0);const z=n.under=Xt(co,_);_.appendChild(y);const E=n.over=Xt(uo,_);e=an(e);const ee=+Fe(e.pxAlign,1),N=_a(ee);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const H=e.ms||.001,T=n.series=a==1?ba(e.series||[],fa,ga,!1):Yc(e.series||[null],ha),C=n.axes=ba(e.axes||[],ua,pa,!0),S=n.scales={},Y=n.bands=e.bands||[];Y.forEach(t=>{t.fill=Ae(t.fill||null),t.dir=Fe(t.dir,-1)});const O=a==2?T[1].facets[0].scale:T[0].scale,J={axes:br,series:gr},Q=(e.drawOrder||["axes","series"]).map(t=>J[t]);function te(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ls(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,x=h-f;return(o-f)/x}}function Z(t){let s=S[t];if(s==null){let r=(e.scales||En)[t]||En;if(r.from!=null){Z(r.from);let o=mt({},S[r.from],r,{key:t});o.valToPct=te(o),S[t]=o}else{s=S[t]=mt({},t==O?tr:Fc,r),s.key=t;let o=s.time,f=s.range,h=Al(f);if((t!=O||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Zi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Zi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&es(f))){let x=f;f=(D,P,B)=>P==null?sn:Jn(P,B,x)}s.range=Ae(f||(o?qc:t==O?s.distr==3?Jc:s.distr==4?Zc:fr:s.distr==3?dr:s.distr==4?pr:Kc)),s.auto=Ae(h?!1:s.auto),s.clamp=Ae(s.clamp||Rc),s._min=s._max=null,s.valToPct=te(s)}}}Z("x"),Z("y"),a==1&&T.forEach(t=>{Z(t.scale)}),C.forEach(t=>{Z(t.scale)});for(let t in e.scales)Z(t);const w=S[O],L=w.distr;let M,V;w.ori==0?(Ut(v,io),M=c,V=u):(Ut(v,ao),M=u,V=c);const A={};for(let t in S){let s=S[t];(s.min!=null||s.max!=null)&&(A[t]={min:s.min,max:s.max},s.min=s.max=null)}const q=e.tzDate||(t=>new Date(yt(t/H))),R=e.fmtDate||si,we=H==1?ac(q):cc(q),ge=ra(q,aa(H==1?ic:oc,R)),re=ca(q,oa(fc,R)),me=[],se=n.legend=mt({},vc,e.legend),j=n.cursor=mt({},xc,{drag:{y:a==2}},e.cursor),Me=se.show,He=j.show,ke=se.markers;se.idxs=me,ke.width=Ae(ke.width),ke.dash=Ae(ke.dash),ke.stroke=Ae(ke.stroke),ke.fill=Ae(ke.fill);let pe,tt,Xe,De=[],ot=[],lt,We=!1,$e={};if(se.live){const t=T[1]?T[1].values:null;We=t!=null,lt=We?t(n,1,0):{_:0};for(let s in lt)$e[s]=Xs}if(Me)if(pe=rl("table",mo,v),Xe=rl("tbody",null,pe),se.mount(n,pe),We){tt=rl("thead",null,pe,Xe);let t=rl("tr",null,tt);rl("th",null,t);for(var _t in lt)rl("th",Ni,t).textContent=_t}else Ut(pe,wo),se.live&&Ut(pe,_o);const ve={show:!0},ct={show:!1};function Ft(t,s){if(s==0&&(We||!se.live||a==2))return sn;let r=[],o=rl("tr",xo,Xe,Xe.childNodes[s]);Ut(o,t.class),t.show||Ut(o,Nl);let f=rl("th",null,o);if(ke.show){let D=Xt(bo,f);if(s>0){let P=ke.width(n,s);P&&(D.style.border=P+"px "+ke.dash(n,s)+" "+ke.stroke(n,s)),D.style.background=ke.fill(n,s)}}let h=Xt(Ni,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(ke.show||(h.style.color=t.width>0?ke.stroke(n,s):ke.fill(n,s)),Ue("click",f,D=>{if(j._lock)return;vt(D);let P=T.indexOf(t);if((D.ctrlKey||D.metaKey)!=se.isolate){let B=T.some((U,$)=>$>0&&$!=P&&U.show);T.forEach((U,$)=>{$>0&&dl($,B?$==P?ve:ct:ve,!0,gt.setSeries)})}else dl(P,{show:!t.show},!0,gt.setSeries)},!1),ll&&Ue(Hi,f,D=>{j._lock||(vt(D),dl(T.indexOf(t),Ql,!0,gt.setSeries))},!1));for(var x in lt){let D=rl("td",yo,o);D.textContent="--",r.push(D)}return[o,r]}const wt=new Map;function Ue(t,s,r,o=!0){const f=wt.get(s)||{},h=j.bind[t](n,s,r,o);h&&(Vl(t,s,f[t]=h),wt.set(s,f))}function dt(t,s,r){const o=wt.get(s)||{};for(let f in o)(t==null||f==t)&&(Is(f,s,o[f]),delete o[f]);t==null&&wt.delete(s)}let xt=0,Vt=0,oe=0,I=0,Le=0,X=0,ue=Le,Ce=X,Oe=oe,ut=I,F=0,W=0,K=0,ie=0;n.bbox={};let ce=!1,be=!1,ne=!1,le=!1,ze=!1,ye=!1;function nt(t,s,r){(r||t!=n.width||s!=n.height)&&pt(t,s),Wl(!1),ne=!0,be=!0,Ul()}function pt(t,s){n.width=xt=oe=t,n.height=Vt=I=s,Le=X=0,ul(),tl();let r=n.bbox;F=r.left=Ol(Le*Ne,.5),W=r.top=Ol(X*Ne,.5),K=r.width=Ol(oe*Ne,.5),ie=r.height=Ol(I*Ne,.5)}const Kt=3;function Jt(){let t=!1,s=0;for(;!t;){s++;let r=wr(s),o=xr(s);t=s==Kt||r&&o,t||(pt(n.width,n.height),be=!0)}}function el({width:t,height:s}){nt(t,s)}n.setSize=el;function ul(){let t=!1,s=!1,r=!1,o=!1;C.forEach((f,h)=>{if(f.show&&f._show){let{side:x,_size:D}=f,P=x%2,B=f.label!=null?f.labelSize:0,U=D+B;U>0&&(P?(oe-=U,x==3?(Le+=U,o=!0):r=!0):(I-=U,x==0?(X+=U,t=!0):s=!0))}}),nl[0]=t,nl[1]=r,nl[2]=s,nl[3]=o,oe-=fl[1]+fl[3],Le+=fl[3],I-=fl[2]+fl[0],X+=fl[0]}function tl(){let t=Le+oe,s=X+I,r=Le,o=X;function f(h,x){switch(h){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}C.forEach((h,x)=>{if(h.show&&h._show){let D=h.side;h._pos=f(D,h._size),h.label!=null&&(h._lpos=f(D,h.labelSize))}})}if(j.dataIdx==null){let t=j.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Ae(t.prox),o=t.bias??=0;j.dataIdx=(f,h,x,D)=>{if(h==0)return x;let P=x,B=r(f,h,x,D)??Be,U=B>=0&&B<Be,$=w.ori==0?oe:I,he=j.left,Ge=l[0],Re=l[h];if(s.has(Re[x])){P=null;let Te=null,fe=null,ae;if(o==0||o==-1)for(ae=x;Te==null&&ae-- >0;)s.has(Re[ae])||(Te=ae);if(o==0||o==1)for(ae=x;fe==null&&ae++<Re.length;)s.has(Re[ae])||(fe=ae);if(Te!=null||fe!=null)if(U){let Ke=Te==null?-1/0:M(Ge[Te],w,$,0),st=fe==null?1/0:M(Ge[fe],w,$,0),Lt=he-Ke,Ie=st-he;Lt<=Ie?Lt<=B&&(P=Te):Ie<=B&&(P=fe)}else P=fe==null?Te:Te==null?fe:x-Te<=fe-x?Te:fe}else U&&St(he-M(Ge[x],w,$,0))>B&&(P=null);return P}}const vt=t=>{j.event=t};j.idxs=me,j._lock=!1;let _e=j.points;_e.show=Ae(_e.show),_e.size=Ae(_e.size),_e.stroke=Ae(_e.stroke),_e.width=Ae(_e.width),_e.fill=Ae(_e.fill);const ft=n.focus=mt({},e.focus||{alpha:.3},j.focus),ll=ft.prox>=0,bt=ll&&_e.one;let Pe=[],ht=[],Ht=[];function yl(t,s){let r=_e.show(n,s);if(r instanceof HTMLElement)return Ut(r,go),Ut(r,t.class),gl(r,-10,-10,oe,I),E.insertBefore(r,Pe[s]),r}function Sl(t,s){if(a==1||s>0){let r=a==1&&S[t.scale].time,o=t.value;t.value=r?la(o)?ca(q,oa(o,R)):o||re:o||Cc,t.label=t.label||(r?yc:bc)}if(bt||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wc||Fo,t.fillTo=Ae(t.fillTo||Oc),t.pxAlign=+Fe(t.pxAlign,ee),t.pxRound=_a(t.pxAlign),t.stroke=Ae(t.stroke||null),t.fill=Ae(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lc(zt(1,t.width),1),o=t.points=mt({},{size:r,width:zt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uc,_stroke:null,_fill:null},t.points);o.show=Ae(o.show),o.filter=Ae(o.filter),o.fill=Ae(o.fill),o.stroke=Ae(o.stroke),o.paths=Ae(o.paths),o.pxAlign=t.pxAlign}if(Me){let r=Ft(t,s);De.splice(s,0,r[0]),ot.splice(s,0,r[1]),se.values.push(null)}if(He){me.splice(s,0,null);let r=null;bt?s==0&&(r=yl(t,s)):s>0&&(r=yl(t,s)),Pe.splice(s,0,r),ht.splice(s,0,0),Ht.splice(s,0,0)}Ct("addSeries",s)}function fn(t,s){s=s??T.length,t=a==1?Ys(t,s,fa,ga):Ys(t,s,{},ha),T.splice(s,0,t),Sl(T[s],s)}n.addSeries=fn;function _l(t){if(T.splice(t,1),Me){se.values.splice(t,1),ot.splice(t,1);let s=De.splice(t,1)[0];dt(null,s.firstChild),s.remove()}He&&(me.splice(t,1),Pe.splice(t,1)[0].remove(),ht.splice(t,1),Ht.splice(t,1)),Ct("delSeries",t)}n.delSeries=_l;const nl=[!1,!1,!1,!1];function is(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=S[t.scale];o==null&&(t.scale=r?T[1].scale:O,o=S[t.scale]);let f=o.time;t.size=Ae(t.size),t.space=Ae(t.space),t.rotate=Ae(t.rotate),Al(t.incrs)&&t.incrs.forEach(x=>{!Cl.has(x)&&Cl.set(x,Ga(x))}),t.incrs=Ae(t.incrs||(o.distr==2?lc:f?H==1?sc:rc:Gl)),t.splits=Ae(t.splits||(f&&o.distr==1?we:o.distr==3?Bs:o.distr==4?Tc:kc)),t.stroke=Ae(t.stroke),t.grid.stroke=Ae(t.grid.stroke),t.ticks.stroke=Ae(t.ticks.stroke),t.border.stroke=Ae(t.border.stroke);let h=t.values;t.values=Al(h)&&!Al(h[0])?Ae(h):f?Al(h)?ra(q,aa(h,R)):la(h)?uc(q,h):h||ge:h||Sc,t.filter=Ae(t.filter||(o.distr>=3&&o.log==10?Ac:o.distr==3&&o.log==2?Dc:Fa)),t.font=ya(t.font),t.labelFont=ya(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(nl[s]=!0,t._el=Xt(fo,_))}}function Ll(t,s,r,o){let[f,h,x,D]=r,P=s%2,B=0;return P==0&&(D||h)&&(B=s==0&&!f||s==2&&!x?yt(ua.size/3):0),P==1&&(f||x)&&(B=s==1&&!h||s==3&&!D?yt(pa.size/2):0),B}const Rn=n.padding=(e.padding||[Ll,Ll,Ll,Ll]).map(t=>Ae(Fe(t,Ll))),fl=n._padding=Rn.map((t,s)=>t(n,s,nl,0));let Pt,Et=null,Mt=null;const Fn=a==1?T[0].idxs:null;let sl=null,dn=!1;function fi(t,s){if(l=t??[],n.data=n._data=l,a==2){Pt=0;for(let r=1;r<T.length;r++)Pt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),sl=l[0],Pt=sl.length;let r=l;if(L==2){r=l.slice();let o=r[0]=Array(Pt);for(let f=0;f<Pt;f++)o[f]=f}n._data=l=r}if(Wl(!0),Ct("setData"),L==2&&(ne=!0),s!==!1){let r=w;r.auto(n,dn)?as():Tl(O,r.min,r.max),le=le||j.left>=0,ye=!0,Ul()}}n.setData=fi;function as(){dn=!0;let t,s;a==1&&(Pt>0?(Et=Fn[0]=0,Mt=Fn[1]=Pt-1,t=l[0][Et],s=l[0][Mt],L==2?(t=Et,s=Mt):t==s&&(L==3?[t,s]=Xn(t,t,w.log,!1):L==4?[t,s]=ei(t,t,w.log,!1):w.time?s=t+yt(86400/H):[t,s]=Jn(t,s,ti,!0))):(Et=Fn[0]=t=null,Mt=Fn[1]=s=null)),Tl(O,t,s)}let On,jl,rs,os,cs,us,fs,ds,ps,It;function di(t,s,r,o,f,h){t??=Vi,r??=ni,o??="butt",f??=Vi,h??="round",t!=On&&(m.strokeStyle=On=t),f!=jl&&(m.fillStyle=jl=f),s!=rs&&(m.lineWidth=rs=s),h!=cs&&(m.lineJoin=cs=h),o!=us&&(m.lineCap=us=o),r!=os&&m.setLineDash(os=r)}function pi(t,s,r,o){s!=jl&&(m.fillStyle=jl=s),t!=fs&&(m.font=fs=t),r!=ds&&(m.textAlign=ds=r),o!=ps&&(m.textBaseline=ps=o)}function vs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,dn)&&(s==null||s.min==null)){let h=Fe(Et,0),x=Fe(Mt,o.length-1),D=r.min==null?Ao(o,h,x,f,t.distr==3):[r.min,r.max];t.min=cl(t.min,r.min=D[0]),t.max=zt(t.max,r.max=D[1])}}const vi={min:null,max:null};function vr(){for(let o in S){let f=S[o];A[o]==null&&(f.min==null||A[O]!=null&&f.auto(n,dn))&&(A[o]=vi)}for(let o in S){let f=S[o];A[o]==null&&f.from!=null&&A[f.from]!=null&&(A[o]=vi)}A[O]!=null&&Wl(!0);let t={};for(let o in A){let f=A[o];if(f!=null){let h=t[o]=an(S[o],No);if(f.min!=null)mt(h,f);else if(o!=O||a==2)if(Pt==0&&h.from==null){let x=h.range(n,null,null,o);h.min=x[0],h.max=x[1]}else h.min=Be,h.max=-Be}}if(Pt>0){T.forEach((o,f)=>{if(a==1){let h=o.scale,x=A[h];if(x==null)return;let D=t[h];if(f==0){let P=D.range(n,D.min,D.max,h);D.min=P[0],D.max=P[1],Et=ol(D.min,l[0]),Mt=ol(D.max,l[0]),Mt-Et>1&&(l[0][Et]<D.min&&Et++,l[0][Mt]>D.max&&Mt--),o.min=sl[Et],o.max=sl[Mt]}else o.show&&o.auto&&vs(D,x,o,l[f],o.sorted);o.idxs[0]=Et,o.idxs[1]=Mt}else if(f>0&&o.show&&o.auto){let[h,x]=o.facets,D=h.scale,P=x.scale,[B,U]=l[f],$=t[D],he=t[P];$!=null&&vs($,A[D],h,B,h.sorted),he!=null&&vs(he,A[P],x,U,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],h=A[o];if(f.from==null&&(h==null||h.min==null)){let x=f.range(n,f.min==Be?null:f.min,f.max==-Be?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let x=f.range(n,h.min,h.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=S[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let x=h.distr;h._min=x==3?xl(h.min):x==4?Ls(h.min,h.asinh):x==100?h.fwd(h.min):h.min,h._max=x==3?xl(h.max):x==4?Ls(h.max,h.asinh):x==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){T.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)ne=!0,Ct("setScale",o);He&&j.left>=0&&(le=ye=!0)}for(let o in A)A[o]=null}function hr(t){let s=Hs(Et-1,0,Pt-1),r=Hs(Mt+1,0,Pt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Pt-1;)r++;return[s,r]}function gr(){if(Pt>0){let t=T.some(s=>s._focus)&&It!=ft.alpha;t&&(m.globalAlpha=It=ft.alpha),T.forEach((s,r)=>{if(r>0&&s.show&&(hi(r,!1),hi(r,!0),s._paths==null)){let o=It;It!=s.alpha&&(m.globalAlpha=It=s.alpha);let f=a==2?[0,l[r][0].length-1]:hr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),It!=o&&(m.globalAlpha=It=o)}}),T.forEach((s,r)=>{if(r>0&&s.show){let o=It;It!=s.alpha&&(m.globalAlpha=It=s.alpha),s._paths!=null&&gi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,Et,Mt,f),x=s.points.filter(n,r,h,f);(h||x)&&(s.points._paths=s.points.paths(n,r,Et,Mt,x),gi(r,!0))}It!=o&&(m.globalAlpha=It=o),Ct("drawSeries",r)}}),t&&(m.globalAlpha=It=1)}}function hi(t,s){let r=s?T[t].points:T[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function gi(t,s){let r=s?T[t].points:T[t],{stroke:o,fill:f,clip:h,flags:x,_stroke:D=r._stroke,_fill:P=r._fill,_width:B=r.width}=r._paths;B=je(B*Ne,3);let U=null,$=B%2/2;s&&P==null&&(P=B>0?"#fff":D);let he=r.pxAlign==1&&$>0;if(he&&m.translate($,$),!s){let Ge=F-B/2,Re=W-B/2,Te=K+B,fe=ie+B;U=new Path2D,U.rect(Ge,Re,Te,fe)}s?hs(D,B,r.dash,r.cap,P,o,f,x,h):mr(t,D,B,r.dash,r.cap,P,o,f,x,U,h),he&&m.translate(-$,-$)}function mr(t,s,r,o,f,h,x,D,P,B,U){let $=!1;P!=0&&Y.forEach((he,Ge)=>{if(he.series[0]==t){let Re=T[he.series[1]],Te=l[he.series[1]],fe=(Re._paths||En).band;Al(fe)&&(fe=he.dir==1?fe[0]:fe[1]);let ae,Ke=null;Re.show&&fe&&Co(Te,Et,Mt)?(Ke=he.fill(n,Ge)||h,ae=Re._paths.clip):fe=null,hs(s,r,o,f,Ke,x,D,P,B,U,ae,fe),$=!0}}),$||hs(s,r,o,f,h,x,D,P,B,U)}const mi=rn|Ws;function hs(t,s,r,o,f,h,x,D,P,B,U,$){di(t,s,r,o,f),(P||B||$)&&(m.save(),P&&m.clip(P),B&&m.clip(B)),$?(D&mi)==mi?(m.clip($),U&&m.clip(U),Nn(f,x),Gn(t,h,s)):D&Ws?(Nn(f,x),m.clip($),Gn(t,h,s)):D&rn&&(m.save(),m.clip($),U&&m.clip(U),Nn(f,x),m.restore(),Gn(t,h,s)):(Nn(f,x),Gn(t,h,s)),(P||B||$)&&m.restore()}function Gn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=On=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Nn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=jl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function _r(t,s,r,o){let f=C[t],h;if(o<=0)h=[0,0];else{let x=f._space=f.space(n,t,s,r,o),D=f._incrs=f.incrs(n,t,s,r,o,x);h=Qc(s,r,D,o,x)}return f._found=h}function gs(t,s,r,o,f,h,x,D,P,B){let U=x%2/2;ee==1&&m.translate(U,U),di(D,x,P,B,D),m.beginPath();let $,he,Ge,Re,Te=f+(o==0||o==3?-h:h);r==0?(he=f,Re=Te):($=f,Ge=Te);for(let fe=0;fe<t.length;fe++)s[fe]!=null&&(r==0?$=Ge=t[fe]:he=Re=t[fe],m.moveTo($,he),m.lineTo(Ge,Re));m.stroke(),ee==1&&m.translate(-U,-U)}function wr(t){let s=!0;return C.forEach((r,o)=>{if(!r.show)return;let f=S[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Wl(!1));return}else r._show||(s=!1,r._show=!0,Wl(!1));let h=r.side,x=h%2,{min:D,max:P}=f,[B,U]=_r(o,D,P,x==0?oe:I);if(U==0)return;let $=f.distr==2,he=r._splits=r.splits(n,o,D,P,B,U,$),Ge=f.distr==2?he.map(ae=>sl[ae]):he,Re=f.distr==2?sl[he[1]]-sl[he[0]]:B,Te=r._values=r.values(n,r.filter(n,Ge,o,U,Re),o,U,Re);r._rotate=h==2?r.rotate(n,Te,o,U):0;let fe=r._size;r._size=$t(r.size(n,Te,o,t)),fe!=null&&r._size!=fe&&(s=!1)}),s}function xr(t){let s=!0;return Rn.forEach((r,o)=>{let f=r(n,o,nl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function br(){for(let t=0;t<C.length;t++){let s=C[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,x=s.stroke(n,t),D=r==0||r==3?-1:1,[P,B]=s._found;if(s.label!=null){let Gt=s.labelGap*D,Wt=yt((s._lpos+Gt)*Ne);pi(s.labelFont[0],x,"center",r==2?wn:zi),m.save(),o==1?(f=h=0,m.translate(Wt,yt(W+ie/2)),m.rotate((r==3?-Yn:Yn)/2)):(f=yt(F+K/2),h=Wt);let Fl=Pa(s.label)?s.label(n,t,P,B):s.label;m.fillText(Fl,f,h),m.restore()}if(B==0)continue;let U=S[s.scale],$=o==0?K:ie,he=o==0?F:W,Ge=s._splits,Re=U.distr==2?Ge.map(Gt=>sl[Gt]):Ge,Te=U.distr==2?sl[Ge[1]]-sl[Ge[0]]:P,fe=s.ticks,ae=s.border,Ke=fe.show?fe.size:0,st=yt(Ke*Ne),Lt=yt((s.alignTo==2?s._size-Ke-s.gap:s.gap)*Ne),Ie=s._rotate*-Yn/180,it=N(s._pos*Ne),Bt=(st+Lt)*D,Ot=it+Bt;h=o==0?Ot:0,f=o==1?Ot:0;let Zt=s.font[0],il=s.align==1?$l:s.align==2?As:Ie>0?$l:Ie<0?As:o==0?"center":r==3?As:$l,vl=Ie||o==1?"middle":r==2?wn:zi;pi(Zt,x,il,vl);let jt=s.font[1]*s.lineGap,Qt=Ge.map(Gt=>N(d(Gt,U,$,he))),al=s._values;for(let Gt=0;Gt<al.length;Gt++){let Wt=al[Gt];if(Wt!=null){o==0?f=Qt[Gt]:h=Qt[Gt],Wt=""+Wt;let Fl=Wt.indexOf(`
`)==-1?[Wt]:Wt.split(/\n/gm);for(let Nt=0;Nt<Fl.length;Nt++){let Gi=Fl[Nt];Ie?(m.save(),m.translate(f,h+Nt*jt),m.rotate(Ie),m.fillText(Gi,0,0),m.restore()):m.fillText(Gi,f,h+Nt*jt)}}}fe.show&&gs(Qt,fe.filter(n,Re,t,B,Te),o,r,it,st,je(fe.width*Ne,3),fe.stroke(n,t),fe.dash,fe.cap);let hl=s.grid;hl.show&&gs(Qt,hl.filter(n,Re,t,B,Te),o,o==0?2:1,o==0?W:F,o==0?ie:K,je(hl.width*Ne,3),hl.stroke(n,t),hl.dash,hl.cap),ae.show&&gs([it],[1],o==0?1:0,o==0?1:2,o==1?W:F,o==1?ie:K,je(ae.width*Ne,3),ae.stroke(n,t),ae.dash,ae.cap)}Ct("drawAxes")}function Wl(t){T.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let zn=!1,ms=!1,pn=[];function yr(){ms=!1;for(let t=0;t<pn.length;t++)Ct(...pn[t]);pn.length=0}function Ul(){zn||(Wo(_i),zn=!0)}function Sr(t,s=!1){zn=!0,ms=s,t(n),_i(),s&&pn.length>0&&queueMicrotask(yr)}n.batch=Sr;function _i(){if(ce&&(vr(),ce=!1),ne&&(Jt(),ne=!1),be){if(Je(z,$l,Le),Je(z,wn,X),Je(z,yn,oe),Je(z,Sn,I),Je(E,$l,Le),Je(E,wn,X),Je(E,yn,oe),Je(E,Sn,I),Je(_,yn,xt),Je(_,Sn,Vt),y.width=yt(xt*Ne),y.height=yt(Vt*Ne),C.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,x=f%2==1;Je(t,x?"left":"top",o-h),Je(t,x?"width":"height",r),Je(t,x?"top":"left",x?X:Le),Je(t,x?"height":"width",x?I:oe),Vs(t,Nl)}else Ut(t,Nl)}),On=jl=rs=cs=us=fs=ds=ps=os=null,It=1,gn(!0),Le!=ue||X!=Ce||oe!=Oe||I!=ut){Wl(!1);let t=oe/Oe,s=I/ut;if(He&&!le&&j.left>=0){j.left*=t,j.top*=s,Yl&&gl(Yl,yt(j.left),0,oe,I),ql&&gl(ql,0,yt(j.top),oe,I);for(let r=0;r<Pe.length;r++){let o=Pe[r];o!=null&&(ht[r]*=t,Ht[r]*=s,gl(o,$t(ht[r]),$t(Ht[r]),oe,I))}}if(qe.show&&!ze&&qe.left>=0&&qe.width>0){qe.left*=t,qe.width*=t,qe.top*=s,qe.height*=s;for(let r in Ss)Je(Zl,r,qe[r])}ue=Le,Ce=X,Oe=oe,ut=I}Ct("setSize"),be=!1}xt>0&&Vt>0&&(m.clearRect(0,0,y.width,y.height),Ct("drawClear"),Q.forEach(t=>t()),Ct("draw")),qe.show&&ze&&(Vn(qe),ze=!1),He&&le&&(Rl(null,!0,!1),le=!1),se.show&&se.live&&ye&&(bs(),ye=!1),p||(p=!0,n.status=1,Ct("ready")),dn=!1,zn=!1}n.redraw=(t,s)=>{ne=s||!1,t!==!1?Tl(O,w.min,w.max):Ul()};function _s(t,s){let r=S[t];if(r.from==null){if(Pt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Pt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==O&&r.distr==2&&Pt>0&&(s.min=ol(s.min,l[0]),s.max=ol(s.max,l[0]),s.min==s.max&&s.max++),A[t]=s,ce=!0,Ul()}}n.setScale=_s;let ws,xs,Yl,ql,wi,xi,Kl,Jl,bi,yi,Ye,Qe,kl=!1;const Rt=j.drag;let At=Rt.x,Dt=Rt.y;He&&(j.x&&(ws=Xt(vo,E)),j.y&&(xs=Xt(ho,E)),w.ori==0?(Yl=ws,ql=xs):(Yl=xs,ql=ws),Ye=j.left,Qe=j.top);const qe=n.select=mt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Zl=qe.show?Xt(po,qe.over?E:z):null;function Vn(t,s){if(qe.show){for(let r in t)qe[r]=t[r],r in Ss&&Je(Zl,r,t[r]);s!==!1&&Ct("setSelect")}}n.setSelect=Vn;function kr(t){if(T[t].show)Me&&Vs(De[t],Nl);else if(Me&&Ut(De[t],Nl),He){let r=bt?Pe[0]:Pe[t];r!=null&&gl(r,-10,-10,oe,I)}}function Tl(t,s,r){_s(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Dr(t),s.show!=null&&T.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,kr(h),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Ul())}),r!==!1&&Ct("setSeries",t,s),o&&mn("setSeries",n,t,s)}n.setSeries=dl;function Tr(t,s){mt(Y[t],s)}function Er(t,s){t.fill=Ae(t.fill||null),t.dir=Fe(t.dir,-1),s=s??Y.length,Y.splice(s,0,t)}function Mr(t){t==null?Y.length=0:Y.splice(t,1)}n.addBand=Er,n.setBand=Tr,n.delBand=Mr;function Ar(t,s){T[t].alpha=s,He&&Pe[t]!=null&&(Pe[t].style.opacity=s),Me&&De[t]&&(De[t].style.opacity=s)}let wl,El,Pl;const Ql={focus:!0};function Dr(t){if(t!=Pl){let s=t==null,r=ft.alpha!=1;T.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Ar(f,h?1:ft.alpha)}}),Pl=t,r&&Ul()}}Me&&ll&&Ue(Bi,pe,t=>{j._lock||(vt(t),Pl!=null&&dl(null,Ql,!0,gt.setSeries))});function pl(t,s,r){let o=S[s];r&&(t=t/Ne-(o.ori==1?X:Le));let f=oe;o.ori==1&&(f=I,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,x=o._max,D=t/f,P=h+(x-h)*D,B=o.distr;return B==3?nn(10,P):B==4?Po(P,o.asinh):B==100?o.bwd(P):P}function Cr(t,s){let r=pl(t,O,s);return ol(r,l[0],Et,Mt)}n.valToIdx=t=>ol(t,l[0]),n.posToIdx=Cr,n.posToVal=pl,n.valToPos=(t,s,r)=>S[s].ori==0?c(t,S[s],r?K:oe,r?F:0):u(t,S[s],r?ie:I,r?W:0),n.setCursor=(t,s,r)=>{Ye=t.left,Qe=t.top,Rl(null,s,r)};function Si(t,s){Je(Zl,$l,qe.left=t),Je(Zl,yn,qe.width=s)}function ki(t,s){Je(Zl,wn,qe.top=t),Je(Zl,Sn,qe.height=s)}let vn=w.ori==0?Si:ki,hn=w.ori==1?Si:ki;function Lr(){if(Me&&se.live)for(let t=a==2?1:0;t<T.length;t++){if(t==0&&We)continue;let s=se.values[t],r=0;for(let o in s)ot[t][r++].firstChild.nodeValue=s[o]}}function bs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{me[o]=r}):Go(t.idx)||me.fill(t.idx),se.idx=me[0]),Me&&se.live){for(let r=0;r<T.length;r++)(r>0||a==1&&!We)&&Pr(r,me[r]);Lr()}ye=!1,s!==!1&&Ct("setLegend")}n.setLegend=bs;function Pr(t,s){let r=T[t],o=t==0&&L==2?sl:l[t],f;We?f=r.values(n,t,s)??$e:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?$e:{_:f}),se.values[t]=f}function Rl(t,s,r){bi=Ye,yi=Qe,[Ye,Qe]=j.move(n,Ye,Qe),j.left=Ye,j.top=Qe,He&&(Yl&&gl(Yl,yt(Ye),0,oe,I),ql&&gl(ql,0,yt(Qe),oe,I));let o,f=Et>Mt;wl=Be,El=null;let h=w.ori==0?oe:I,x=w.ori==1?oe:I;if(Ye<0||Pt==0||f){o=j.idx=null;for(let D=0;D<T.length;D++){let P=Pe[D];P!=null&&gl(P,-10,-10,oe,I)}ll&&dl(null,Ql,!0,t==null&&gt.setSeries),se.live&&(me.fill(o),ye=!0)}else{let D,P,B;a==1&&(D=w.ori==0?Ye:Qe,P=pl(D,O),o=j.idx=ol(P,l[0],Et,Mt),B=M(l[0][o],w,h,0));let U=-10,$=-10,he=0,Ge=0,Re=!0,Te="",fe="";for(let ae=a==2?1:0;ae<T.length;ae++){let Ke=T[ae],st=me[ae],Lt=st==null?null:a==1?l[ae][st]:l[ae][1][st],Ie=j.dataIdx(n,ae,o,P),it=Ie==null?null:a==1?l[ae][Ie]:l[ae][1][Ie];if(ye=ye||it!=Lt||Ie!=st,me[ae]=Ie,ae>0&&Ke.show){let Bt=Ie==null?-10:Ie==o?B:M(a==1?l[0][Ie]:l[ae][0][Ie],w,h,0),Ot=it==null?-10:V(it,a==1?S[Ke.scale]:S[Ke.facets[1].scale],x,0);if(ll&&it!=null){let Zt=w.ori==1?Ye:Qe,il=St(ft.dist(n,ae,Ie,Ot,Zt));if(il<wl){let vl=ft.bias;if(vl!=0){let jt=pl(Zt,Ke.scale),Qt=it>=0?1:-1,al=jt>=0?1:-1;al==Qt&&(al==1?vl==1?it>=jt:it<=jt:vl==1?it<=jt:it>=jt)&&(wl=il,El=ae)}else wl=il,El=ae}}if(ye||bt){let Zt,il;w.ori==0?(Zt=Bt,il=Ot):(Zt=Ot,il=Bt);let vl,jt,Qt,al,hl,Gt,Wt=!0,Fl=_e.bbox;if(Fl!=null){Wt=!1;let Nt=Fl(n,ae);Qt=Nt.left,al=Nt.top,vl=Nt.width,jt=Nt.height}else Qt=Zt,al=il,vl=jt=_e.size(n,ae);if(Gt=_e.fill(n,ae),hl=_e.stroke(n,ae),bt)ae==El&&wl<=ft.prox&&(U=Qt,$=al,he=vl,Ge=jt,Re=Wt,Te=Gt,fe=hl);else{let Nt=Pe[ae];Nt!=null&&(ht[ae]=Qt,Ht[ae]=al,Ji(Nt,vl,jt,Wt),qi(Nt,Gt,hl),gl(Nt,$t(Qt),$t(al),oe,I))}}}}if(bt){let ae=ft.prox,Ke=Pl==null?wl<=ae:wl>ae||El!=Pl;if(ye||Ke){let st=Pe[0];st!=null&&(ht[0]=U,Ht[0]=$,Ji(st,he,Ge,Re),qi(st,Te,fe),gl(st,$t(U),$t($),oe,I))}}}if(qe.show&&kl)if(t!=null){let[D,P]=gt.scales,[B,U]=gt.match,[$,he]=t.cursor.sync.scales,Ge=t.cursor.drag;if(At=Ge._x,Dt=Ge._y,At||Dt){let{left:Re,top:Te,width:fe,height:ae}=t.select,Ke=t.scales[$].ori,st=t.posToVal,Lt,Ie,it,Bt,Ot,Zt=D!=null&&B(D,$),il=P!=null&&U(P,he);Zt&&At?(Ke==0?(Lt=Re,Ie=fe):(Lt=Te,Ie=ae),it=S[D],Bt=M(st(Lt,$),it,h,0),Ot=M(st(Lt+Ie,$),it,h,0),vn(cl(Bt,Ot),St(Ot-Bt))):vn(0,h),il&&Dt?(Ke==1?(Lt=Re,Ie=fe):(Lt=Te,Ie=ae),it=S[P],Bt=V(st(Lt,he),it,x,0),Ot=V(st(Lt+Ie,he),it,x,0),hn(cl(Bt,Ot),St(Ot-Bt))):hn(0,x)}else ks()}else{let D=St(bi-wi),P=St(yi-xi);if(w.ori==1){let he=D;D=P,P=he}At=Rt.x&&D>=Rt.dist,Dt=Rt.y&&P>=Rt.dist;let B=Rt.uni;B!=null?At&&Dt&&(At=D>=B,Dt=P>=B,!At&&!Dt&&(P>D?Dt=!0:At=!0)):Rt.x&&Rt.y&&(At||Dt)&&(At=Dt=!0);let U,$;At&&(w.ori==0?(U=Kl,$=Ye):(U=Jl,$=Qe),vn(cl(U,$),St($-U)),Dt||hn(0,x)),Dt&&(w.ori==1?(U=Kl,$=Ye):(U=Jl,$=Qe),hn(cl(U,$),St($-U)),At||vn(0,h)),!At&&!Dt&&(vn(0,0),hn(0,0))}if(Rt._x=At,Rt._y=Dt,t==null){if(r){if(Oi!=null){let[D,P]=gt.scales;gt.values[0]=D!=null?pl(w.ori==0?Ye:Qe,D):null,gt.values[1]=P!=null?pl(w.ori==1?Ye:Qe,P):null}mn(Ds,n,Ye,Qe,oe,I,o)}if(ll){let D=r&&gt.setSeries,P=ft.prox;Pl==null?wl<=P&&dl(El,Ql,!0,D):wl>P?dl(null,Ql,!0,D):El!=Pl&&dl(El,Ql,!0,D)}}ye&&(se.idx=o,bs()),s!==!1&&Ct("setCursor")}let Ml=null;Object.defineProperty(n,"rect",{get(){return Ml==null&&gn(!1),Ml}});function gn(t=!1){t?Ml=null:(Ml=E.getBoundingClientRect(),Ct("syncRect",Ml))}function Ti(t,s,r,o,f,h,x){j._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(ys(t,s,r,o,f,h,x,!1,t!=null),t!=null?Rl(null,!0,!0):Rl(s,!0,!1))}function ys(t,s,r,o,f,h,x,D,P){if(Ml==null&&gn(!1),vt(t),t!=null)r=t.clientX-Ml.left,o=t.clientY-Ml.top;else{if(r<0||o<0){Ye=-10,Qe=-10;return}let[B,U]=gt.scales,$=s.cursor.sync,[he,Ge]=$.values,[Re,Te]=$.scales,[fe,ae]=gt.match,Ke=s.axes[0].side%2==1,st=w.ori==0?oe:I,Lt=w.ori==1?oe:I,Ie=Ke?h:f,it=Ke?f:h,Bt=Ke?o:r,Ot=Ke?r:o;if(Re!=null?r=fe(B,Re)?d(he,S[B],st,0):-10:r=st*(Bt/Ie),Te!=null?o=ae(U,Te)?d(Ge,S[U],Lt,0):-10:o=Lt*(Ot/it),w.ori==1){let Zt=r;r=o,o=Zt}}P&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=oe-1)&&(r=Ol(r,oe)),(o<=1||o>=I-1)&&(o=Ol(o,I))),D?(wi=r,xi=o,[Kl,Jl]=j.move(n,r,o)):(Ye=r,Qe=o)}const Ss={width:0,height:0,left:0,top:0};function ks(){Vn(Ss,!1)}let Ei,Mi,Ai,Di;function Ci(t,s,r,o,f,h,x){kl=!0,At=Dt=Rt._x=Rt._y=!1,ys(t,s,r,o,f,h,x,!0,!1),t!=null&&(Ue(Cs,Ns,Li,!1),mn(Ii,n,Kl,Jl,oe,I,null));let{left:D,top:P,width:B,height:U}=qe;Ei=D,Mi=P,Ai=B,Di=U}function Li(t,s,r,o,f,h,x){kl=Rt._x=Rt._y=!1,ys(t,s,r,o,f,h,x,!1,!0);let{left:D,top:P,width:B,height:U}=qe,$=B>0||U>0,he=Ei!=D||Mi!=P||Ai!=B||Di!=U;if($&&he&&Vn(qe),Rt.setScale&&$&&he){let Ge=D,Re=B,Te=P,fe=U;if(w.ori==1&&(Ge=P,Re=U,Te=D,fe=B),At&&Tl(O,pl(Ge,O),pl(Ge+Re,O)),Dt)for(let ae in S){let Ke=S[ae];ae!=O&&Ke.from==null&&Ke.min!=Be&&Tl(ae,pl(Te+fe,ae),pl(Te,ae))}ks()}else j.lock&&(j._lock=!j._lock,Rl(s,!0,t!=null));t!=null&&(dt(Cs,Ns),mn(Cs,n,Ye,Qe,oe,I,null))}function Rr(t,s,r,o,f,h,x){if(j._lock)return;vt(t);let D=kl;if(kl){let P=!0,B=!0,U=10,$,he;w.ori==0?($=At,he=Dt):($=Dt,he=At),$&&he&&(P=Ye<=U||Ye>=oe-U,B=Qe<=U||Qe>=I-U),$&&P&&(Ye=Ye<Kl?0:oe),he&&B&&(Qe=Qe<Jl?0:I),Rl(null,!0,!0),kl=!1}Ye=-10,Qe=-10,me.fill(null),Rl(null,!0,!0),D&&(kl=D)}function Pi(t,s,r,o,f,h,x){j._lock||(vt(t),as(),ks(),t!=null&&mn(ji,n,Ye,Qe,oe,I,null))}function Ri(){C.forEach(Xc),nt(n.width,n.height,!0)}Vl(Kn,tn,Ri);const Xl={};Xl.mousedown=Ci,Xl.mousemove=Ti,Xl.mouseup=Li,Xl.dblclick=Pi,Xl.setSeries=(t,s,r,o)=>{let f=gt.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},He&&(Ue(Ii,E,Ci),Ue(Ds,E,Ti),Ue(Hi,E,t=>{vt(t),gn(!1)}),Ue(Bi,E,Rr),Ue(ji,E,Pi),Us.add(n),n.syncRect=gn);const In=n.hooks=e.hooks||{};function Ct(t,s,r){ms?pn.push([t,s,r]):t in In&&In[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)In[s]=(In[s]||[]).concat(t.hooks[s])});const Fi=(t,s,r)=>r,gt=mt({key:null,setSeries:!1,filters:{pub:ea,sub:ea},scales:[O,T[1]?T[1].scale:null],match:[ta,ta,Fi],values:[null,null]},j.sync);gt.match.length==2&&gt.match.push(Fi),j.sync=gt;const Oi=gt.key,Ts=lr(Oi);function mn(t,s,r,o,f,h,x){gt.filters.pub(t,s,r,o,f,h,x)&&Ts.pub(t,s,r,o,f,h,x)}Ts.sub(n);function Fr(t,s,r,o,f,h,x){gt.filters.sub(t,s,r,o,f,h,x)&&Xl[t](null,s,r,o,f,h,x)}n.pub=Fr;function Or(){Ts.unsub(n),Us.delete(n),wt.clear(),Is(Kn,tn,Ri),v.remove(),pe?.remove(),Ct("destroy")}n.destroy=Or;function Es(){Ct("init",e,l),fi(l||e.data,!1),A[O]?_s(O,A[O]):as(),ze=qe.show&&(qe.width>0||qe.height>0),le=ye=!0,nt(e.width,e.height)}return T.forEach(Sl),C.forEach(is),i?i instanceof HTMLElement?(i.appendChild(v),Es()):i(n,Es):Es(),n}kt.assign=mt;kt.fmtNum=li;kt.rangeNum=Jn;kt.rangeLog=Xn;kt.rangeAsinh=ei;kt.orient=Bl;kt.pxRatio=Ne;kt.join=jo;kt.fmtDate=si,kt.tzDate=ec;kt.sync=lr;{kt.addGap=Gc,kt.clipGaps=ts;let e=kt.paths={points:or};e.linear=ur,e.stepped=Vc,e.bars=Ic,e.spline=Bc}var $c=Se('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),eu=Se('<span class="estimated-badge svelte-3wi8ix">est</span>'),tu=Se('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),lu=Se('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),nu=Se('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),su=Se('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function iu(e,l){Ln(l,!0);const i=.5,n=1.2,a=32,c=212;function u(w,L){const M=[...w].sort((R,we)=>R-we),V=L/100*(M.length-1),A=Math.floor(V),q=Math.ceil(V);return A===q?M[A]:M[A]+(M[q]-M[A])*(V-A)}let d=qn(l,"trend",3,null),p=et(!1),v=et(""),y=et(null),m=rt(()=>Un.config.temp_units==="C"),_=rt(Ma),z=rt(Zs),E=rt(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(ve=>ve.status!=="invalid");if(w.length===0)return null;const L=[...w].sort((ve,ct)=>new Date(ve.timestamp).getTime()-new Date(ct.timestamp).getTime()),M=L[0],V=L[L.length-1],A=L.map(ve=>ve.sg_calibrated??ve.sg_raw).filter(ve=>ve!==null&&ve>=i&&ve<=n),q=L.map(ve=>ve.temp_calibrated??ve.temp_raw).filter(ve=>ve!==null&&ve>=a&&ve<=c);if(A.length===0)return null;const R=A[A.length-1],we=A[0],ge=u(A,95),re=u(A,5),me=new Date(M.timestamp).getTime(),se=new Date(V.timestamp).getTime(),Me=(se-me)/(1e3*60*60*24),He=Me>0?(R-we)/Me:0;let ke=null,pe=null,tt=null,Xe=null;if(q.length>0){const ve=q[q.length-1],ct=q.reduce((Ue,dt)=>Ue+dt,0)/q.length,Ft=u(q,95),wt=u(q,5);ke=g(m)?bn(ve):ve,pe=g(m)?bn(ct):ct,tt=g(m)?bn(Ft):Ft,Xe=g(m)?bn(wt):wt}let De=0;const ot=.001;for(let ve=A.length-2;ve>=0;ve--)if(Math.abs(A[ve]-R)>ot){const ct=new Date(L[ve+1].timestamp).getTime();De=(se-ct)/(1e3*60*60*24);break}let lt=null,We=null;const $e=l.originalGravity??ge,_t=l.originalGravity===null;return $e>1&&$e>R&&(lt=($e-R)/($e-1)*100,We=($e-R)*131.25),{currentSg:R,firstSg:we,highSg:ge,lowSg:re,currentTemp:ke,avgTemp:pe,highTemp:tt,lowTemp:Xe,fermRate:He,durationDays:Me,daysAtCurrentSg:De,apparentAttenuation:lt,abv:We,ogIsEstimated:_t,effectiveOg:$e}});function ee(){Ee(v,l.originalGravity?.toFixed(3)??"",!0),Ee(p,!0),setTimeout(()=>g(y)?.focus(),0)}function N(){const w=g(v).trim();if(!w)l.onOgChange(null);else{const L=parseFloat(w);!isNaN(L)&&L>=.99&&L<=1.2&&l.onOgChange(L)}Ee(p,!1)}function H(w){w.key==="Enter"?N():w.key==="Escape"&&Ee(p,!1)}function T(w){return Js(w)}function C(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function S(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function Y(w){return w===null?"--":w.toFixed(1)}function O(w){return w===null?"--":`${w.toFixed(1)}%`}var J=qs(),Q=Mn(J);{var te=w=>{var L=nu(),M=k(L),V=k(M),A=k(V),q=k(A,!0);b(A);var R=G(A,2),we=G(k(R),2),ge=k(we,!0);b(we),b(R);var re=G(R,2),me=G(k(re),2),se=k(me,!0);b(me),b(re);var j=G(re,2),Me=G(k(j),2),He=k(Me,!0);b(Me),b(j);var ke=G(j,2),pe=G(k(ke),2),tt=k(pe,!0);b(pe),b(ke),b(V);var Xe=G(V,2),De=G(k(Xe),2),ot=G(k(De),2),lt=k(ot,!0),We=G(lt),$e=k(We,!0);b(We),b(ot),b(De);var _t=G(De,2),ve=G(k(_t),2),ct=k(ve,!0),Ft=G(ct),wt=k(Ft,!0);b(Ft),b(ve),b(_t);var Ue=G(_t,2),dt=G(k(Ue),2),xt=k(dt,!0),Vt=G(xt),oe=k(Vt,!0);b(Vt),b(dt),b(Ue);var I=G(Ue,2),Le=G(k(I),2),X=k(Le,!0),ue=G(X),Ce=k(ue,!0);b(ue),b(Le),b(I),b(Xe),b(M);var Oe=G(M,2),ut=k(Oe),F=G(k(ut),2);let W;var K=k(F);b(F),b(ut);var ie=G(ut,2),ce=G(k(ie),2),be=k(ce,!0);b(ce),b(ie);var ne=G(ie,2),le=G(k(ne),2),ze=k(le,!0);b(le),b(ne);var ye=G(ne,2),nt=G(k(ye),2);{var pt=bt=>{var Pe=$c();Ta(Pe),Pe.__keydown=H,Ks(Pe,ht=>Ee(y,ht),()=>g(y)),Sa("blur",Pe,N),Ea(Pe,()=>g(v),ht=>Ee(v,ht)),xe(bt,Pe)},Kt=bt=>{var Pe=tu();Pe.__click=ee;var ht=k(Pe);let Ht;var yl=k(ht,!0);b(ht);var Sl=G(ht,2);{var fn=_l=>{var nl=eu();xe(_l,nl)};Ze(Sl,_l=>{g(E).ogIsEstimated&&_l(fn)})}Dl(2),b(Pe),at(_l=>{An(Pe,"title",g(E).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Ht=ml(ht,1,"stat-value svelte-3wi8ix",null,Ht,{estimated:g(E).ogIsEstimated}),de(yl,_l)},[()=>T(g(E).effectiveOg)]),xe(bt,Pe)};Ze(nt,bt=>{g(p)?bt(pt):bt(Kt,!1)})}b(ye);var Jt=G(ye,2),el=G(k(Jt),2),ul=k(el,!0);b(el),b(Jt);var tl=G(Jt,2),vt=G(k(tl),2),_e=k(vt,!0);b(vt),b(tl);var ft=G(tl,2);{var ll=bt=>{var Pe=lu(),ht=G(k(Pe),2),Ht=k(ht,!0);b(ht),Dl(2),b(Pe),at((yl,Sl)=>{An(Pe,"title",`Estimated time until target FG (R=${yl??""})`),de(Ht,Sl)},[()=>d().r2.toFixed(2),()=>S(d().daysToFg)]),xe(bt,Pe)};Ze(ft,bt=>{d()?.daysToFg!==null&&d()?.daysToFg!==void 0&&bt(ll)})}b(Oe),b(L),at((bt,Pe,ht,Ht,yl,Sl,fn,_l,nl,is,Ll,Rn,fl)=>{de(q,g(z)==="SG"?"Gravity":g(z)==="P"?"Plato":"Brix"),de(ge,bt),de(se,Pe),de(He,ht),de(tt,Ht),de(lt,yl),de($e,g(_)),de(ct,Sl),de(wt,g(_)),de(xt,fn),de(oe,g(_)),de(X,_l),de(Ce,g(_)),W=ml(F,1,"stat-value rate svelte-3wi8ix",null,W,{fermenting:g(E).fermRate<0}),de(K,`${nl??""}/day`),de(be,is),de(ze,Ll),de(ul,Rn),de(_e,fl)},[()=>T(g(E).currentSg),()=>T(g(E).firstSg),()=>T(g(E).highSg),()=>T(g(E).lowSg),()=>Y(g(E).currentTemp),()=>Y(g(E).avgTemp),()=>Y(g(E).highTemp),()=>Y(g(E).lowTemp),()=>C(g(E).fermRate),()=>S(g(E).durationDays),()=>S(g(E).daysAtCurrentSg),()=>O(g(E).apparentAttenuation),()=>O(g(E).abv)]),xe(w,L)},Z=w=>{var L=su();xe(w,L)};Ze(Q,w=>{g(E)?w(te):w(Z,!1)})}xe(e,J),Pn()}Cn(["keydown","click"]);var au=Se('<button type="button"> </button>'),ru=Se("<option> </option>"),ou=Se('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),cu=Se('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),uu=Se('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),fu=Se('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-1e832qd"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function du(e,l){Ln(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=rt(()=>Un.config.smoothing_enabled),c=rt(()=>Un.config.smoothing_samples),u=et("UTC"),d=et(0),p=et(3),v=qn(l,"originalGravity",3,null),y=rt(()=>Un.config.temp_units==="C"),m=rt(Zs),_,z=null,E=et(!0),ee=et(null),N=et(24),H=et(Os([])),T=et(Os([])),C=et(null);const S={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},Y="#facc15",O="rgba(250, 204, 21, 0.3)",J="#71717a",Q="#a1a1aa",te="rgba(255, 255, 255, 0.04)",Z="#22d3ee",w="rgba(250, 204, 21, 0.5)",L="brewsignal_chart_trend_enabled";let M=et(!0);function V(F,W,K=1.01){const ie=[];for(let _e=0;_e<F.length;_e++)W[_e]!==null&&ie.push([F[_e],W[_e]]);if(ie.length<10)return null;const ce=ie.length;let be=0,ne=0,le=0,ze=0;for(const[_e,ft]of ie)be+=_e,ne+=ft,le+=_e*ft,ze+=_e*_e;const ye=ce*ze-be*be;if(Math.abs(ye)<1e-10)return null;const nt=(ce*le-be*ne)/ye,pt=(ne-nt*be)/ce,Kt=ne/ce;let Jt=0,el=0;for(const[_e,ft]of ie){const ll=nt*_e+pt;Jt+=(ft-ll)**2,el+=(ft-Kt)**2}const ul=el>0?1-Jt/el:0;let tl=null,vt=null;if(nt<0&&ul>.3){const _e=F[F.length-1],ft=(K-pt)/nt;ft>_e&&(vt=(ft-_e)/(1440*60),vt>0&&vt<60?tl=K:vt=null)}return{slope:nt,intercept:pt,r2:ul,predictedFg:tl,daysToFg:vt}}function A(F,W){return F.map(K=>W.slope*K+W.intercept)}function q(F,W,K){const ie=new Date(F*1e3);try{return K?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:W}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:W})}catch(ce){return console.warn("Invalid timezone:",W,ce),K?ie.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ie.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function R(F,W,K){const ie=Y,ce=S[l.tiltColor]||Q;return{width:F,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(be,ne,le)=>{const ze=(le-ne)*.1||.005;return[ne-ze,le+ze]}},temp:{auto:!0,range:(be,ne,le)=>{const ze=le-ne,ye=10;if(ze<ye){const pt=(le+ne)/2;return[pt-ye/2,pt+ye/2]}const nt=ze*.1;return[ne-nt,le+nt]}}},axes:[{stroke:J,grid:{stroke:te,width:1},ticks:{stroke:te,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(be,ne)=>ne.map(le=>q(le,K,g(N)<=24))},{scale:"sg",stroke:ie,grid:{stroke:te,width:1},ticks:{stroke:te,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(be,ne)=>ne.map(le=>Js(le)),side:3},{scale:"temp",stroke:ce,grid:{show:!1},ticks:{stroke:te,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(be,ne)=>ne.map(le=>le.toFixed(0)+""),side:1}],series:[{},{label:g(m)==="SG"?"Gravity":g(m)==="P"?"Plato":"Brix",scale:"sg",stroke:ie,width:2,fill:(be,ne)=>{const le=be.ctx.createLinearGradient(0,be.bbox.top,0,be.bbox.top+be.bbox.height);return le.addColorStop(0,O),le.addColorStop(1,"transparent"),le},points:{show:!1},paths:kt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ce,width:1.5,dash:[4,4],points:{show:!1},paths:kt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:Z,width:1.5,dash:[2,4],points:{show:!1},paths:kt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:w,width:2,dash:[8,4],points:{show:!1},show:g(M)}]}}function we(F,W){if(W<=1)return F;const K=[];for(let ie=0;ie<F.length;ie++){const ce=[],be=Math.floor(W/2);for(let ne=Math.max(0,ie-be);ne<=Math.min(F.length-1,ie+be);ne++){const le=F[ne];le!==null&&ce.push(le)}ce.length>0?K.push(ce.reduce((ne,le)=>ne+le,0)/ce.length):K.push(null)}return K}function ge(F,W,K,ie,ce){if(F.length<=ce)return[F,W,K,ie];const be=Math.ceil(F.length/ce),ne=[],le=[],ze=[],ye=[];for(let nt=0;nt<F.length;nt+=be){const pt=Math.min(nt+be,F.length);let Kt=0,Jt=0,el=0,ul=0,tl=0,vt=0;for(let _e=nt;_e<pt;_e++)W[_e]!==null&&(Kt+=W[_e],Jt++),K[_e]!==null&&(el+=K[_e],ul++),ie[_e]!==null&&(tl+=ie[_e],vt++);ne.push(F[Math.floor((nt+pt-1)/2)]),le.push(Jt>0?Kt/Jt:null),ze.push(ul>0?el/ul:null),ye.push(vt>0?tl/vt:null)}return[ne,le,ze,ye]}function re(F){return!F.endsWith("Z")&&!F.match(/[+-]\d{2}:\d{2}$/)&&(F=F+"Z"),new Date(F).getTime()/1e3}function me(F,W,K){if(F.length===0||W.length===0)return W.map(()=>null);const ie=[...F].sort((ne,le)=>re(ne.timestamp)-re(le.timestamp)),ce=ie.map(ne=>re(ne.timestamp)),be=ie.map(ne=>ne.temperature===null?null:K?ne.temperature:ne.temperature*9/5+32);return W.map(ne=>{let le=null,ze=null;for(let ye=0;ye<ce.length;ye++)if(ce[ye]<=ne&&(le={time:ce[ye],temp:be[ye]}),ce[ye]>=ne&&ze===null){ze={time:ce[ye],temp:be[ye]};break}if(le&&ze&&le.temp!==null&&ze.temp!==null){if(le.time===ze.time)return le.temp;const ye=(ne-le.time)/(ze.time-le.time);return le.temp+ye*(ze.temp-le.temp)}return le!==null&&le.temp!==null?le.temp:ze!==null&&ze.temp!==null?ze.temp:null})}function se(F,W,K){const ie=[...F].reverse();let ce=[],be=[],ne=[];for(const pt of ie){ce.push(re(pt.timestamp)),be.push(pt.sg_calibrated??pt.sg_raw);const Kt=pt.temp_calibrated??pt.temp_raw;Kt!==null?ne.push(K?bn(Kt):Kt):ne.push(null)}let le=me(W,ce,K);g(a)&&g(c)>1&&(be=we(be,g(c)),ne=we(ne,g(c)),le=we(le,g(c))),[ce,be,ne,le]=ge(ce,be,ne,le,500);const ye=V(ce,be);Ee(C,ye,!0);const nt=ye?A(ce,ye):ce.map(()=>null);return[ce,be,ne,le,nt]}const j=3e4;async function Me(F=!1){const K=Date.now()-g(d);if(!(!F&&g(d)>0&&K<j)){Ee(E,!0),Ee(ee,null);try{const[ie,ce]=await Promise.all([Zr(l.tiltId,g(N)),Qr(g(N)).catch(()=>[])]);Ee(H,ie,!0),Ee(T,ce,!0),He()}catch(ie){Ee(ee,ie instanceof Error?ie.message:"Failed to load data",!0)}finally{Ee(d,Date.now(),!0),Ee(E,!1)}}}function He(){if(!_||g(H).length===0)return;const F=se(g(H),g(T),g(y)),W=R(_.clientWidth,g(y),g(u));z&&z.destroy(),z=new kt(W,F,_)}function ke(){z&&_&&z.setSize({width:_.clientWidth,height:220})}let pe=null;function tt(){if(pe&&(clearInterval(pe),pe=null),g(p)>0){const F=g(p)*60*1e3;pe=setInterval(()=>{g(E)||Me(!1)},F)}}ka(async()=>{const F=localStorage.getItem(i);if(F!==null){const K=parseInt(F,10);Number.isNaN(K)||Ee(p,K,!0)}const W=localStorage.getItem(L);W!==null&&Ee(M,W==="true");try{const K=await fetch("/api/system/timezone");if(K.ok){const ie=await K.json();Ee(u,ie.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await Me(!0),window.addEventListener("resize",ke),tt()}),Hr(()=>{z?.destroy(),window.removeEventListener("resize",ke),pe&&clearInterval(pe)}),Gs(()=>{g(y)!==void 0&&g(H).length>0&&_&&He()}),Gs(()=>{g(a),g(c),g(H).length>0&&_&&He()});function Xe(F){const W=Number(F.target.value);Ee(p,W,!0),localStorage.setItem(i,String(W)),tt(),Me(!0)}function De(){Ee(M,!g(M)),localStorage.setItem(L,String(g(M))),z&&z.setSeries(4,{show:g(M)})}var ot=fu(),lt=k(ot),We=k(lt);Il(We,21,()=>Jr,ln,(F,W)=>{var K=au();let ie;K.__click=()=>{g(N)!==g(W).hours&&(Ee(N,g(W).hours,!0),Me(!0))};var ce=k(K,!0);b(K),at(()=>{ie=ml(K,1,"range-btn svelte-1e832qd",null,ie,{active:g(N)===g(W).hours}),de(ce,g(W).label)}),xe(F,K)}),b(We);var $e=G(We,2),_t=k($e),ve=G(k(_t),2);ve.__change=Xe,Il(ve,21,()=>n,ln,(F,W)=>{var K=ru(),ie=k(K,!0);b(K);var ce={};at(()=>{de(ie,g(W).label),ce!==(ce=g(W).value)&&(K.value=(K.__value=g(W).value)??"")}),xe(F,K)}),b(ve);var ct;eo(ve),b(_t);var Ft=G(_t,2),wt=G(k(Ft),2),Ue=k(wt);Dl(2),b(wt);var dt=G(wt,4);let xt;dt.__click=De;var Vt=k(dt);zl(Vt,"background: rgba(250, 204, 21, 0.5);"),Dl(2),b(dt),b(Ft),b($e),b(lt);var oe=G(lt,2),I=k(oe);{var Le=F=>{var W=ou();xe(F,W)};Ze(I,F=>{g(E)&&F(Le)})}var X=G(I,2);{var ue=F=>{var W=cu(),K=G(k(W),2);K.__click=()=>Me(!0),b(W),xe(F,W)},Ce=F=>{var W=qs(),K=Mn(W);{var ie=ce=>{var be=uu();xe(ce,be)};Ze(K,ce=>{g(H).length===0&&ce(ie)},!0)}xe(F,W)};Ze(X,F=>{g(ee)?F(ue):F(Ce,!1)})}b(oe),Ks(oe,F=>_=F,()=>_);var Oe=G(oe,2);{var ut=F=>{{let W=rt(()=>l.onOgChange??(()=>{})),K=rt(()=>g(C)?{predictedFg:g(C).predictedFg,daysToFg:g(C).daysToFg,r2:g(C).r2}:null);iu(F,{get readings(){return g(H)},get originalGravity(){return v()},get onOgChange(){return g(W)},get trend(){return g(K)}})}};Ze(Oe,F=>{g(H).length>0&&F(ut)})}b(ot),at(()=>{ct!==(ct=g(p))&&(ve.value=(ve.__value=g(p))??"",to(ve,g(p))),zl(Ue,`background: ${(S[l.tiltColor]||"var(--text-secondary)")??""};`),xt=ml(dt,1,"legend-item legend-toggle svelte-1e832qd",null,xt,{"legend-disabled":!g(M)}),An(dt,"title",g(M)?"Hide trend line":"Show trend line")}),xe(e,ot),Pn()}Cn(["click","change"]);var pu=Se('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),vu=Se('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),hu=Se('<div class="w-1 rounded-sm transition-all"></div>'),gu=Se('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),mu=Se("<div><!></div>"),_u=Se('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),wu=Se('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function xu(e,l){Ln(l,!0);let i=qn(l,"expanded",3,!1),n=qn(l,"wide",3,!1),a=et(!1);Gs(()=>{i()&&!g(a)&&Ee(a,!0)});let c=et(!1),u=et(""),d=et(null),p=et(!1);function v(){Ee(u,l.tilt.beer_name,!0),Ee(c,!0),setTimeout(()=>g(d)?.focus(),0)}async function y(){if(g(p))return;const X=g(u).trim();if(!X||X===l.tilt.beer_name){Ee(c,!1);return}Ee(p,!0);const ue=await qr(l.tilt.id,X);Ee(p,!1),ue&&Ee(c,!1)}function m(X){X.key==="Enter"?y():X.key==="Escape"&&Ee(c,!1)}async function _(X){await Kr(l.tilt.id,X)}let z=rt(Ma),E=rt(Zs);const ee={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function N(X){return Js(X)}function H(X){return $r(X)}function T(X){return X>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:X>=-60?{bars:3,color:"var(--positive)",label:"Good"}:X>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function C(X){const ue=Math.floor((Date.now()-new Date(X).getTime())/1e3);if(ue<10)return"just now";if(ue<60)return`${ue}s ago`;const Ce=Math.floor(ue/60);if(Ce<60)return`${Ce}m ago`;const Oe=Math.floor(Ce/60);return Oe<24?`${Oe}h ago`:`${Math.floor(Oe/24)}d ago`}let S=rt(()=>ee[l.tilt.color]||"var(--tilt-black)"),Y=rt(()=>T(l.tilt.rssi)),O=rt(()=>C(l.tilt.last_seen));var J=wu();let Q;var te=k(J),Z=G(te,2),w=k(Z),L=k(w),M=k(L);{var V=X=>{var ue=pu();Ta(ue),ue.__keydown=m,Ks(ue,Ce=>Ee(d,Ce),()=>g(d)),at(()=>ue.disabled=g(p)),Sa("blur",ue,y),Ea(ue,()=>g(u),Ce=>Ee(u,Ce)),xe(X,ue)},A=X=>{var ue=vu();ue.__click=v;var Ce=k(ue),Oe=k(Ce,!0);b(Ce),Dl(2),b(ue),at(()=>de(Oe,l.tilt.beer_name)),xe(X,ue)};Ze(M,X=>{g(c)?X(V):X(A,!1)})}var q=G(M,2),R=k(q),we=G(R,2),ge=k(we,!0);b(we),b(q),b(L);var re=G(L,2),me=k(re);Il(me,20,()=>Array(4),ln,(X,ue,Ce)=>{var Oe=hu();at(()=>zl(Oe,`
								height: ${8+Ce*4}px;
								background: ${(Ce<g(Y).bars?g(Y).color:"var(--bg-hover)")??""};
								opacity: ${Ce<g(Y).bars?1:.4};
							`)),xe(X,Oe)}),b(me);var se=G(me,2),j=k(se);b(se),b(re),b(w);var Me=G(w,2),He=k(Me),ke=k(He),pe=k(ke,!0),tt=G(pe),Xe=k(tt,!0);b(tt),b(ke);var De=G(ke,2),ot=k(De,!0);b(De),b(He);var lt=G(He,2),We=k(lt),$e=k(We,!0),_t=G($e),ve=k(_t,!0);b(_t),b(We),Dl(2),b(lt),b(Me);var ct=G(Me,2);{var Ft=X=>{var ue=gu(),Ce=G(k(ue),2),Oe=k(Ce,!0);b(Ce);var ut=G(Ce,4),F=k(ut);b(ut),b(ue),at((W,K)=>{de(Oe,W),de(F,`${K??""}${g(z)??""}`)},[()=>N(l.tilt.sg_raw),()=>H(l.tilt.temp_raw)]),xe(X,ue)};Ze(ct,X=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&X(Ft)})}var wt=G(ct,2);{var Ue=X=>{var ue=mu();let Ce;var Oe=k(ue);lo(Oe,()=>l.tilt.id,ut=>{du(ut,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:_})}),b(ue),at(()=>Ce=ml(ue,1,"chart-section svelte-3twv7v",null,Ce,{hidden:!i()})),xe(X,ue)};Ze(wt,X=>{g(a)&&X(Ue)})}var dt=G(wt,2),xt=k(dt),Vt=k(xt);b(xt);var oe=G(xt,2),I=k(oe);{var Le=X=>{var ue=_u();ue.__click=function(...ut){l.onToggleExpand?.apply(this,ut)};var Ce=k(ue);let Oe;b(ue),at(()=>{An(ue,"aria-label",i()?"Collapse chart":"Expand chart"),Oe=ml(Ce,0,"w-4 h-4 transition-transform",null,Oe,{"rotate-180":i()})}),xe(X,ue)};Ze(I,X=>{l.onToggleExpand&&X(Le)})}Dl(2),b(oe),b(dt),b(Z),b(J),at((X,ue)=>{Q=ml(J,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,Q,{expanded:i(),wide:n()}),zl(te,`background: ${g(S)??""};`),zl(R,`background: ${g(S)??""};`),de(ge,l.tilt.color),An(re,"title",`${g(Y).label??""} signal (${l.tilt.rssi??""} dBm)`),de(j,`${l.tilt.rssi??""} dBm`),de(pe,X),de(Xe,g(E)!=="SG"?g(E):""),de(ot,g(E)==="SG"?"Gravity":g(E)==="P"?"Plato":"Brix"),de($e,ue),de(ve,g(z)),de(Vt,`Updated ${g(O)??""}`)},[()=>N(l.tilt.sg),()=>H(l.tilt.temp)]),xe(e,J),Pn()}Cn(["keydown","click"]);var bu=Se('<span><span class="pill-count svelte-xij760"> </span> </span>'),yu=Se('<span class="status-dot svelte-xij760"></span>'),Su=Se('<button type="button" class="featured-batch svelte-xij760"><div class="featured-left svelte-xij760"><span class="batch-number svelte-xij760"> </span> <div class="batch-info svelte-xij760"><span class="batch-name svelte-xij760"> </span> <span class="batch-status svelte-xij760"><!> </span></div></div> <div class="featured-right svelte-xij760"><span class="days-label svelte-xij760"> </span> <svg class="chevron svelte-xij760" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" class="svelte-xij760"></path></svg></div></button>'),ku=Se('<button type="button" class="mini-batch svelte-xij760"><span class="mini-name svelte-xij760"> </span> <span class="mini-days svelte-xij760"> </span></button>'),Tu=Se('<span class="more-count svelte-xij760"> </span>'),Eu=Se('<div class="other-batches svelte-xij760"><!> <!></div>'),Mu=Se('<div class="status-pills svelte-xij760"></div> <!> <!>',1),Au=Se('<div class="no-active svelte-xij760"><p class="no-active-text svelte-xij760">No active fermentations</p> <button type="button" class="start-btn svelte-xij760">Start Batch</button></div>'),Du=Se('<div class="batch-summary svelte-xij760"><div class="summary-header svelte-xij760"><div class="header-left svelte-xij760"><h3 class="summary-title svelte-xij760">Batches</h3> <span class="batch-count svelte-xij760"> </span></div> <button type="button" class="view-all-btn svelte-xij760">View All <svg class="btn-icon svelte-xij760" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" class="svelte-xij760"></path></svg></button></div> <!></div>');function Cu(e,l){Ln(l,!0);const i={planning:{label:"Planning",color:"var(--text-muted)"},fermenting:{label:"Fermenting",color:"#f59e0b"},conditioning:{label:"Conditioning",color:"#8b5cf6"},completed:{label:"Completed",color:"var(--positive)"},archived:{label:"Archived",color:"var(--text-muted)"}};let n=rt(()=>l.batches.reduce((N,H)=>(N[H.status]=(N[H.status]||0)+1,N),{})),a=rt(()=>l.batches.filter(N=>N.status==="fermenting"||N.status==="conditioning")),c=rt(()=>g(a)[0]);function u(N){if(!N)return"--";const H=new Date(N),C=Math.floor((new Date().getTime()-H.getTime())/(1e3*60*60*24));return C===0?"Today":C===1?"1 day":`${C} days`}var d=Du(),p=k(d),v=k(p),y=G(k(v),2),m=k(y,!0);b(y),b(v);var _=G(v,2);_.__click=()=>Hn("/batches"),b(p);var z=G(p,2);{var E=N=>{var H=Mu(),T=Mn(H);Il(T,21,()=>Object.entries(g(n)),ln,(J,Q)=>{var te=rt(()=>Br(g(Q),2));let Z=()=>g(te)[0],w=()=>g(te)[1];var L=qs(),M=Mn(L);{var V=A=>{var q=bu();let R;var we=k(q),ge=k(we,!0);b(we);var re=G(we);b(q),at(()=>{R=ml(q,1,"status-pill svelte-xij760",null,R,{active:Z()==="fermenting"||Z()==="conditioning"}),zl(q,`--status-color: ${(i[Z()]?.color||"var(--text-muted)")??""}`),de(ge,w()),de(re,` ${(i[Z()]?.label||Z())??""}`)}),xe(A,q)};Ze(M,A=>{w()>0&&A(V)})}xe(J,L)}),b(T);var C=G(T,2);{var S=J=>{var Q=Su();Q.__click=()=>Hn(`/batches/${g(c).id}`);var te=k(Q),Z=k(te),w=k(Z);b(Z);var L=G(Z,2),M=k(L),V=k(M,!0);b(M);var A=G(M,2),q=k(A);{var R=se=>{var j=yu();xe(se,j)};Ze(q,se=>{g(c).status==="fermenting"&&se(R)})}var we=G(q);b(A),b(L),b(te);var ge=G(te,2),re=k(ge),me=k(re,!0);b(re),Dl(2),b(ge),b(Q),at(se=>{de(w,`#${(g(c).batch_number||"?")??""}`),de(V,g(c).name||g(c).recipe?.name||"Unnamed"),zl(A,`color: ${i[g(c).status]?.color??""}`),de(we,` ${i[g(c).status]?.label??""}`),de(me,se)},[()=>u(g(c).brew_date)]),xe(J,Q)};Ze(C,J=>{g(c)&&J(S)})}var Y=G(C,2);{var O=J=>{var Q=Eu(),te=k(Q);Il(te,17,()=>g(a).slice(1,3),ln,(L,M)=>{var V=ku();V.__click=()=>Hn(`/batches/${g(M).id}`);var A=k(V),q=k(A,!0);b(A);var R=G(A,2),we=k(R,!0);b(R),b(V),at(ge=>{de(q,g(M).name||g(M).recipe?.name||"Unnamed"),de(we,ge)},[()=>u(g(M).brew_date)]),xe(L,V)});var Z=G(te,2);{var w=L=>{var M=Tu(),V=k(M);b(M),at(()=>de(V,`+${g(a).length-3} more`)),xe(L,M)};Ze(Z,L=>{g(a).length>3&&L(w)})}b(Q),xe(J,Q)};Ze(Y,J=>{g(a).length>1&&J(O)})}xe(N,H)},ee=N=>{var H=Au(),T=G(k(H),2);T.__click=()=>Hn("/batches/new"),b(H),xe(N,H)};Ze(z,N=>{g(a).length>0?N(E):N(ee,!1)})}b(d),at(()=>de(m,l.batches.length)),xe(e,d),Pn()}Cn(["click"]);var Lu=Se('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Pu=Se('<div class="alerts-list svelte-1uha8ag"></div>'),Ru=Se('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Fu=Se('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Ou=Se('<div class="batch-summary-container svelte-1uha8ag"><!></div>'),Gu=Se('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Nu=Se('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),zu=Se('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Vu=Se("<div></div>"),Iu=Se("<!> <!> <!>",1);function nf(e,l){Ln(l,!0);let i=et(!1),n=et(!1),a=et(Os([])),c=et(!1);ka(async()=>{const C=localStorage.getItem("brewsignal_alerts_dismissed"),S=localStorage.getItem("brewsignal_alerts_dismissed_time");C==="true"&&S&&Date.now()-parseInt(S,10)<360*60*1e3&&Ee(i,!0);try{Ee(a,await Xr(),!0),Ee(c,!0)}catch(Y){console.error("Failed to load batches:",Y),Ee(c,!0)}});let u=rt(()=>Array.from(Ms.tilts.values())),d=et(null);function p(C){Ee(d,g(d)===C?null:C,!0)}function v(){Ee(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function y(){Ee(n,!g(n))}var m=Iu();Yr("1uha8ag",C=>{jr(()=>{Wr.title="Dashboard | BrewSignal"})});var _=Mn(m);{var z=C=>{var S=Fu(),Y=k(S),O=k(Y),J=G(k(O),4),Q=k(J,!0);b(J),b(O);var te=G(O,2);te.__click=v,b(Y);var Z=G(Y,2);{var w=V=>{var A=Pu();Il(A,21,()=>_n.alerts,ln,(q,R)=>{var we=Lu();let ge;var re=k(we),me=k(re);b(re);var se=G(re,2),j=k(se,!0);b(se),b(we),at(()=>{ge=ml(we,1,"alert-item svelte-1uha8ag",null,ge,{warning:g(R).level==="warning",critical:g(R).level==="critical"}),de(me,`${g(R).day??""}:`),de(j,g(R).message)}),xe(q,we)}),b(A),xe(V,A)};Ze(Z,V=>{g(n)||V(w)})}var L=G(Z,2);{var M=V=>{var A=Ru();A.__click=y;var q=k(A,!0);b(A),at(()=>de(q,g(n)?`Show ${_n.alerts.length} alerts`:"Show less")),xe(V,A)};Ze(L,V=>{_n.alerts.length>3&&V(M)})}b(S),at(()=>de(Q,_n.alerts.length)),xe(C,S)};Ze(_,C=>{_n.alerts.length>0&&!g(i)&&C(z)})}var E=G(_,2);{var ee=C=>{var S=Ou(),Y=k(S);Cu(Y,{get batches(){return g(a)}}),b(S),xe(C,S)};Ze(E,C=>{g(c)&&g(a).length>0&&C(ee)})}var N=G(E,2);{var H=C=>{var S=zu(),Y=G(k(S),4),O=k(Y);{var J=w=>{var L=Gr("Waiting for Tilt hydrometers to broadcast...");xe(w,L)},Q=w=>{var L=Gu();xe(w,L)};Ze(O,w=>{Ms.connected?w(J):w(Q,!1)})}b(Y);var te=G(Y,2);{var Z=w=>{var L=Nu();xe(w,L)};Ze(te,w=>{Ms.connected&&w(Z)})}b(S),xe(C,S)},T=C=>{var S=Vu();let Y;Il(S,21,()=>g(u),O=>O.id,(O,J)=>{{let Q=rt(()=>g(d)===g(J).id),te=rt(()=>g(u).length===1);xu(O,{get tilt(){return g(J)},get expanded(){return g(Q)},get wide(){return g(te)},onToggleExpand:()=>p(g(J).id)})}}),b(S),at(()=>Y=ml(S,1,"tilt-grid svelte-1uha8ag",null,Y,{"single-tilt":g(u).length===1})),xe(C,S)};Ze(N,C=>{g(u).length===0?C(H):C(T,!1)})}xe(e,m),Pn()}Cn(["click"]);export{nf as component};
