import{d as qn,c as ya,a as Ee,f as Oe,s as me,e as ka,t as Gr}from"../chunks/hWEB2Dyj.js";import{n as zr,J as Nr,b6 as Vr,G as Ir,ag as jn,aq as Us,b as w,ah as Et,ai as Kn,ak as D,am as E,aj as Y,an as lt,ar as Tt,s as Te,as as Dl,p as Oi,ao as Ys,aw as Hr,ap as Rs,e as Br,al as Wr}from"../chunks/DlOb-_Gl.js";import{e as Tn,i as Hn}from"../chunks/DrYgZuka.js";import{B as Ur,i as ft}from"../chunks/C6MV343X.js";import{h as Yr}from"../chunks/42hnd-d-.js";import{s as _l}from"../chunks/DKk6epAh.js";import{u as qr,b as jr,t as Ts}from"../chunks/462MkpFd.js";import{w as gn}from"../chunks/JdV-jdQx.js";import{r as Ta,s as En}from"../chunks/sGIw1ujw.js";import{s as $l}from"../chunks/CqjIVC5T.js";import{b as Ea}from"../chunks/DR-HoMPN.js";import{b as qs}from"../chunks/BwRu2Gdf.js";import{p as Bn}from"../chunks/DaCv1kmG.js";import{g as Kr}from"../chunks/CE3bz6QZ.js";import{f as _n,c as Vn,b as js,d as Ks,g as Ma,e as Jr}from"../chunks/dZIvBOCD.js";import{T as Zr,l as Qr,m as Xr,h as Gi}from"../chunks/CwcUsz70.js";import{i as $r,s as eo}from"../chunks/C4-eiHH7.js";function to(e,l,i){zr&&Nr();var n=new Ur(e),a=!Vr();Ir(()=>{var u=l();a&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const lo=!0,mt="u-",no="uplot",so=mt+"hz",io=mt+"vt",ao=mt+"title",ro=mt+"wrap",oo=mt+"under",co=mt+"over",uo=mt+"axis",zl=mt+"off",fo=mt+"select",vo=mt+"cursor-x",po=mt+"cursor-y",ho=mt+"cursor-pt",go=mt+"legend",mo=mt+"live",wo=mt+"inline",_o=mt+"series",xo=mt+"marker",zi=mt+"label",bo=mt+"value",xn="width",bn="height",mn="top",Ni="bottom",Ql="left",Es="right",Js="#000",Vi=Js+"0",Ms="mousemove",Ii="mousedown",As="mouseup",Hi="mouseenter",Bi="mouseleave",Wi="dblclick",So="resize",yo="scroll",Ui="change",Wn="dppxchange",Zs="--",an=typeof window<"u",Fs=an?document:null,en=an?window:null,ko=an?navigator:null;let Re,Gn;function Os(){let e=devicePixelRatio;Re!=e&&(Re=e,Gn&&zs(Ui,Gn,Os),Gn=matchMedia(`(min-resolution: ${Re-.001}dppx) and (max-resolution: ${Re+.001}dppx)`),Nl(Ui,Gn,Os),en.dispatchEvent(new CustomEvent(Wn)))}function Yt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Gs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function qe(e,l,i){e.style[l]=i+"px"}function rl(e,l,i,n){let a=Fs.createElement(e);return l!=null&&Yt(a,l),i?.insertBefore(a,n),a}function Xt(e,l){return rl("div",e,l)}const Yi=new WeakMap;function gl(e,l,i,n,a){let u="translate("+l+"px,"+i+"px)",c=Yi.get(e);u!=c&&(e.style.transform=u,Yi.set(e,u),l<0||i<0||l>n||i>a?Yt(e,zl):Gs(e,zl))}const qi=new WeakMap;function ji(e,l,i){let n=l+i,a=qi.get(e);n!=a&&(qi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ki=new WeakMap;function Ji(e,l,i,n){let a=l+""+i,u=Ki.get(e);a!=u&&(Ki.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Qs={passive:!0},To={...Qs,capture:!0};function Nl(e,l,i,n){l.addEventListener(e,i,n?To:Qs)}function zs(e,l,i,n){l.removeEventListener(e,i,Qs)}an&&Os();function ol(e,l,i,n){let a;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)a=u?i+n>>1:qt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Aa(e){return(i,n,a)=>{let u=-1,c=-1;for(let d=n;d<=a;d++)if(e(i[d])){u=d;break}for(let d=a;d>=n;d--)if(e(i[d])){c=d;break}return[u,c]}}const Da=e=>e!=null,La=e=>e!=null&&e>0,Jn=Aa(Da),Eo=Aa(La);function Mo(e,l,i,n=0,a=!1){let u=a?Eo:Jn,c=a?La:Da;[l,i]=u(e,l,i);let d=e[l],v=e[l];if(l>-1)if(n==1)d=e[l],v=e[i];else if(n==-1)d=e[i],v=e[l];else for(let p=l;p<=i;p++){let k=e[p];c(k)&&(k<d?d=k:k>v&&(v=k))}return[d??Ne,v??-Ne]}function Zn(e,l,i,n){let a=Xi(e),u=Xi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?xl:Ca,d=a==1?qt:$t,v=u==1?$t:qt,p=d(c(ht(e))),k=v(c(ht(l))),g=tn(i,p),m=tn(i,k);return i==10&&(p<0&&(g=Ve(g,-p)),k<0&&(m=Ve(m,-k))),n||i==2?(e=g*a,l=m*u):(e=Oa(e,g),l=Qn(l,m)),[e,l]}function Xs(e,l,i,n){let a=Zn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const $s=.1,Zi={mode:3,pad:$s},yn={pad:0,soft:null,mode:0},Ao={min:yn,max:yn};function Un(e,l,i,n){return Xn(i)?Qi(e,l,i):(yn.pad=i,yn.soft=n?0:null,yn.mode=n?3:0,Qi(e,l,Ao))}function Ce(e,l){return e??l}function Do(e,l,i){for(l=Ce(l,0),i=Ce(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Qi(e,l,i){let n=i.min,a=i.max,u=Ce(n.pad,0),c=Ce(a.pad,0),d=Ce(n.hard,-Ne),v=Ce(a.hard,Ne),p=Ce(n.soft,Ne),k=Ce(a.soft,-Ne),g=Ce(n.mode,0),m=Ce(a.mode,0),z=l-e,M=xl(z),R=zt(ht(e),ht(l)),N=xl(R),B=ht(N-M);(z<1e-24||B>10)&&(z=0,(e==0||l==0)&&(z=1e-24,g==2&&p!=Ne&&(u=0),m==2&&k!=-Ne&&(c=0)));let y=z||R||1e3,W=xl(y),A=tn(10,qt(W)),ie=y*(z==0?e==0?.1:1:u),G=Ve(Oa(e-ie,A/10),24),te=e>=p&&(g==1||g==3&&G<=p||g==2&&G>=p)?p:Ne,$=zt(d,G<te&&e>=te?te:cl(te,G)),oe=y*(z==0?l==0?.1:1:c),le=Ve(Qn(l+oe,A/10),24),_=l<=k&&(m==1||m==3&&le>=k||m==2&&le<=k)?k:-Ne,H=cl(v,le>_&&l<=_?_:zt(_,le));return $==H&&$==0&&(H=100),[$,H]}const Lo=new Intl.NumberFormat(an?ko.language:"en-US"),ei=e=>Lo.format(e),jt=Math,In=jt.PI,ht=jt.abs,qt=jt.floor,pt=jt.round,$t=jt.ceil,cl=jt.min,zt=jt.max,tn=jt.pow,Xi=jt.sign,xl=jt.log10,Ca=jt.log2,Co=(e,l=1)=>jt.sinh(e)*l,Ds=(e,l=1)=>jt.asinh(e/l),Ne=1/0;function $i(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Ns(e,l,i){return cl(zt(e,l),i)}function Pa(e){return typeof e=="function"}function be(e){return Pa(e)?e:()=>e}const Po=()=>{},Ra=e=>e,Fa=(e,l)=>l,Ro=e=>null,ea=e=>!0,ta=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Vl=e=>{if(za(e)||Ll.has(e))return e;const l=`${e}`,i=l.match(Fo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,u]=l.split("e");return+`${Vl(a)}e${u}`}return Ve(e,n)};function Ol(e,l){return Vl(Ve(Vl(e/l))*l)}function Qn(e,l){return Vl($t(Vl(e/l))*l)}function Oa(e,l){return Vl(qt(Vl(e/l))*l)}function Ve(e,l=0){if(za(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return pt(n)/i}const Ll=new Map;function Ga(e){return((""+e).split(".")[1]||"").length}function Mn(e,l,i,n){let a=[],u=n.map(Ga);for(let c=l;c<i;c++){let d=ht(c),v=Ve(tn(e,c),d);for(let p=0;p<n.length;p++){let k=e==10?+`${n[p]}e${c}`:n[p]*v,g=(c>=0?0:d)+(c>=u[p]?0:u[p]),m=e==10?k:Ve(k,g);a.push(m),Ll.set(m,g)}}return a}const kn={},ti=[],ln=[null,null],Al=Array.isArray,za=Number.isInteger,Oo=e=>e===void 0;function la(e){return typeof e=="string"}function Xn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Go(e){return e!=null&&typeof e=="object"}const zo=Object.getPrototypeOf(Uint8Array),Na="__proto__";function nn(e,l=Xn){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=nn(e[a],l)}else i=e.slice()}else if(e instanceof zo)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=nn(e[n],l))}else i=e;return i}function ut(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(Xn(e[a])?ut(e[a],nn(n[a])):e[a]=nn(n[a]))}return e}const No=0,Vo=1,Io=2;function Ho(e,l,i){for(let n=0,a,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[u=a++]=null}}}function Bo(e,l){if(Yo(e)){let c=e[0].slice();for(let d=1;d<e.length;d++)c.push(...e[d].slice(1));return qo(c[0])||(c=Uo(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let v=e[c][0],p=v.length;for(let k=0;k<p;k++)i.add(v[k])}let n=[Array.from(i).sort((c,d)=>c-d)],a=n[0].length,u=new Map;for(let c=0;c<a;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let d=e[c],v=d[0];for(let p=1;p<d.length;p++){let k=d[p],g=Array(a).fill(void 0),m=l?l[c][p]:Vo,z=[];for(let M=0;M<k.length;M++){let R=k[M],N=u.get(v[M]);R===null?m!=No&&(g[N]=R,m==Io&&z.push(N)):g[N]=R}Ho(g,z,a),n.push(g)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let a=[];for(let u=0;u<e.length;u++){let c=e[u],d=Array(i);for(let v=0;v<i;v++)d[v]=c[n[v]];a.push(d)}return a}function Yo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let u=0;u<i;u++)if(a[u]!=l[u])return!1}}return!0}function qo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const u=zt(1,qt((a-n+1)/l));for(let c=e[n],d=n+u;d<=a;d+=u){const v=e[d];if(v!=null){if(v<=c)return!1;c=v}}return!0}const Va=["January","February","March","April","May","June","July","August","September","October","November","December"],Ia=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ha(e){return e.slice(0,3)}const jo=Ia.map(Ha),Ko=Va.map(Ha),Jo={MMMM:Va,MMM:Ko,WWWW:Ia,WWW:jo};function wn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>wn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>wn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>wn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>wn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>wn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function li(e,l){l=l||Jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Qo[a[1]]:a[0]);return u=>{let c="";for(let d=0;d<i.length;d++)c+=typeof i[d]=="string"?i[d]:i[d](u,l);return c}}const Xo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Xo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Yn=[1,2,2.5,5],ec=Mn(10,-32,0,Yn),Wa=Mn(10,0,32,Yn),tc=Wa.filter(Ba),Gl=ec.concat(Wa),ni=`
`,Ua="{YYYY}",na=ni+Ua,Ya="{M}/{D}",Sn=ni+Ya,zn=Sn+"/{YY}",qa="{aa}",lc="{h}:{mm}",Xl=lc+qa,sa=ni+Xl,ia=":{ss}",Fe=null;function ja(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,u=a*30,c=a*365,v=(e==1?Mn(10,0,3,Yn).filter(Ba):Mn(10,-3,0,Yn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const p=[[c,Ua,Fe,Fe,Fe,Fe,Fe,Fe,1],[a*28,"{MMM}",na,Fe,Fe,Fe,Fe,Fe,1],[a,Ya,na,Fe,Fe,Fe,Fe,Fe,1],[n,"{h}"+qa,zn,Fe,Sn,Fe,Fe,Fe,1],[i,Xl,zn,Fe,Sn,Fe,Fe,Fe,1],[l,ia,zn+" "+Xl,Fe,Sn+" "+Xl,Fe,sa,Fe,1],[e,ia+".{fff}",zn+" "+Xl,Fe,Sn+" "+Xl,Fe,sa,Fe,1]];function k(g){return(m,z,M,R,N,B)=>{let y=[],W=N>=c,A=N>=u&&N<c,ie=g(M),G=Ve(ie*e,3),te=Ls(ie.getFullYear(),W?0:ie.getMonth(),A||W?1:ie.getDate()),$=Ve(te*e,3);if(A||W){let oe=A?N/u:0,le=W?N/c:0,_=G==$?G:Ve(Ls(te.getFullYear()+le,te.getMonth()+oe,1)*e,3),H=new Date(pt(_/e)),C=H.getFullYear(),Q=H.getMonth();for(let F=0;_<=R;F++){let se=Ls(C+le*F,Q+oe*F,1),I=se-g(Ve(se*e,3));_=Ve((+se+I)*e,3),_<=R&&y.push(_)}}else{let oe=N>=a?a:N,le=qt(M)-qt(G),_=$+le+Qn(G-$,oe);y.push(_);let H=g(_),C=H.getHours()+H.getMinutes()/i+H.getSeconds()/n,Q=N/n,F=m.axes[z]._space,se=B/F;for(;_=Ve(_+N,e==1?0:3),!(_>R);)if(Q>1){let I=qt(Ve(C+Q,6))%24,fe=g(_).getHours()-I;fe>1&&(fe=-1),_-=fe*n,C=(C+Q)%24;let ge=y[y.length-1];Ve((_-ge)/N,3)*se>=.7&&y.push(_)}else y.push(_)}return y}}return[v,p,k]}const[nc,sc,ic]=ja(1),[ac,rc,oc]=ja(.001);Mn(2,-53,53,[1]);function aa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ra(e,l){return(i,n,a,u,c)=>{let d=l.find(M=>c>=M[0])||l[l.length-1],v,p,k,g,m,z;return n.map(M=>{let R=e(M),N=R.getFullYear(),B=R.getMonth(),y=R.getDate(),W=R.getHours(),A=R.getMinutes(),ie=R.getSeconds(),G=N!=v&&d[2]||B!=p&&d[3]||y!=k&&d[4]||W!=g&&d[5]||A!=m&&d[6]||ie!=z&&d[7]||d[1];return v=N,p=B,k=y,g=W,m=A,z=ie,G(R)})}}function cc(e,l){let i=li(l);return(n,a,u,c,d)=>a.map(v=>i(e(v)))}function Ls(e,l,i){return new Date(e,l,i)}function oa(e,l){return l(e)}const uc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ca(e,l){return(i,n,a,u)=>u==null?Zs:l(e(n))}function fc(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function dc(e,l){return e.series[l].fill(e,l)}const vc={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fc,fill:dc,dash:"solid"},idx:null,idxs:null,values:[]};function pc(e,l){let i=e.cursor.points,n=Xt(),a=i.size(e,l);qe(n,xn,a),qe(n,bn,a);let u=a/-2;qe(n,"marginLeft",u),qe(n,"marginTop",u);let c=i.width(e,l,a);return c&&qe(n,"borderWidth",c),n}function hc(e,l){let i=e.series[l].points;return i._fill||i._stroke}function gc(e,l){let i=e.series[l].points;return i._stroke||i._fill}function mc(e,l){return e.series[l].points.size}const Cs=[0,0];function wc(e,l,i){return Cs[0]=l,Cs[1]=i,Cs}function Nn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ps(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _c={show:!0,x:!0,y:!0,lock:!1,move:wc,points:{one:!1,show:pc,size:mc,width:0,stroke:gc,fill:hc},bind:{mousedown:Nn,mouseup:Nn,click:Nn,dblclick:Nn,mousemove:Ps,mouseleave:Ps,mouseenter:Ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ka={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},si=ut({},Ka,{filter:Fa}),Ja=ut({},si,{size:10}),Za=ut({},Ka,{show:!1}),ii='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Qa="bold "+ii,Xa=1.5,ua={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:2,grid:si,ticks:Ja,border:Za,font:ii,lineGap:Xa,rotate:0},xc="Value",bc="Time",fa={show:!0,scale:"x",auto:!1,sorted:1,min:Ne,max:-Ne,idxs:[]};function Sc(e,l,i,n,a){return l.map(u=>u==null?"":ei(u))}function yc(e,l,i,n,a,u,c){let d=[],v=Ll.get(a)||0;i=c?i:Ve(Qn(i,a),v);for(let p=i;p<=n;p=Ve(p+a,v))d.push(Object.is(p,-0)?0:p);return d}function Vs(e,l,i,n,a,u,c){const d=[],v=e.scales[e.axes[l].scale].log,p=v==10?xl:Ca,k=qt(p(i));a=tn(v,k),v==10&&(a=Gl[ol(a,Gl)]);let g=i,m=a*v;v==10&&(m=Gl[ol(m,Gl)]);do d.push(g),g=g+a,v==10&&!Ll.has(g)&&(g=Ve(g,Ll.get(a))),g>=m&&(a=g,m=a*v,v==10&&(m=Gl[ol(m,Gl)]));while(g<=n);return d}function kc(e,l,i,n,a,u,c){let v=e.scales[e.axes[l].scale].asinh,p=n>v?Vs(e,l,zt(v,i),n,a):[v],k=n>=0&&i<=0?[0]:[];return(i<-v?Vs(e,l,zt(v,-n),-i,a):[v]).reverse().map(m=>-m).concat(k,p)}const $a=/./,Tc=/[12357]/,Ec=/[125]/,da=/1/,Is=(e,l,i,n)=>e.map((a,u)=>l==4&&a==0||u%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mc(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=e.scales[c],v=e.valToPos,p=u._space,k=v(10,c),g=v(9,c)-k>=p?$a:v(7,c)-k>=p?Tc:v(5,c)-k>=p?Ec:da;if(g==da){let m=ht(v(1,c)-k);if(m<p)return Is(l.slice().reverse(),d.distr,g,$t(p/m)).reverse()}return Is(l,d.distr,g,1)}function Ac(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=u._space,v=e.valToPos,p=ht(v(1,c)-v(2,c));return p<d?Is(l.slice().reverse(),3,$a,$t(d/p)).reverse():l}function Dc(e,l,i,n){return n==null?Zs:l==null?"":ei(l)}const va={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:3,grid:si,ticks:Ja,border:Za,font:ii,lineGap:Xa,rotate:0};function Lc(e,l){let i=3+(e||1)*2;return Ve(i*l,3)}function Cc(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],u=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),d=ht(c-u),v=e.series[l],p=d/(v.points.space*Re);return n[1]-n[0]<=p}const pa={scale:null,auto:!0,sorted:0,min:Ne,max:-Ne},er=(e,l,i,n,a)=>a,ha={show:!0,auto:!0,sorted:0,gaps:er,alpha:1,facets:[ut({},pa,{scale:"x"}),ut({},pa,{scale:"y"})]},ga={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:er,alpha:1,points:{show:Cc,filter:null},values:null,min:Ne,max:-Ne,idxs:[],path:null,clip:null};function Pc(e,l,i,n,a){return i/10}const tr={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Rc=ut({},tr,{time:!1,ori:1}),ma={};function lr(e,l){let i=ma[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,u,c,d,v,p){for(let k=0;k<i.plots.length;k++)i.plots[k]!=a&&i.plots[k].pub(n,a,u,c,d,v,p)}},e!=null&&(ma[e]=i)),i}const sn=1,Hs=2;function Il(e,l,i){const n=e.mode,a=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,d=e.bbox;let v=u[0],p=n==2?u[1]:u[l],k=n==2?c[a.facets[0].scale]:c[e.series[0].scale],g=n==2?c[a.facets[1].scale]:c[a.scale],m=d.left,z=d.top,M=d.width,R=d.height,N=e.valToPosH,B=e.valToPosV;return k.ori==0?i(a,v,p,k,g,N,B,m,z,M,R,es,rn,ls,sr,ar):i(a,v,p,k,g,B,N,z,m,R,M,ts,on,oi,ir,rr)}function ai(e,l){let i=0,n=0,a=Ce(e.bands,ti);for(let u=0;u<a.length;u++){let c=a[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Fc(e,l,i,n,a){let u=e.mode,c=e.series[l],d=u==2?c.facets[1].scale:c.scale,v=e.scales[d];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function bl(e,l,i,n,a,u){return Il(e,l,(c,d,v,p,k,g,m,z,M,R,N)=>{let B=c.pxRound;const y=p.dir*(p.ori==0?1:-1),W=p.ori==0?rn:on;let A,ie;y==1?(A=i,ie=n):(A=n,ie=i);let G=B(g(d[A],p,R,z)),te=B(m(v[A],k,N,M)),$=B(g(d[ie],p,R,z)),oe=B(m(u==1?k.max:k.min,k,N,M)),le=new Path2D(a);return W(le,$,oe),W(le,G,oe),W(le,G,te),le})}function $n(e,l,i,n,a,u){let c=null;if(e.length>0){c=new Path2D;const d=l==0?ls:oi;let v=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let z=m[0]-v;z>0&&d(c,v,n,z,n+u),v=m[1]}}let p=i+a-v,k=10;p>0&&d(c,v,n-k/2,p,n+u+k)}return c}function Oc(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ri(e,l,i,n,a,u,c){let d=[],v=e.length;for(let p=a==1?i:n;p>=i&&p<=n;p+=a)if(l[p]===null){let g=p,m=p;if(a==1)for(;++p<=n&&l[p]===null;)m=p;else for(;--p>=i&&l[p]===null;)m=p;let z=u(e[g]),M=m==g?z:u(e[m]),R=g-a;z=c<=0&&R>=0&&R<v?u(e[R]):z;let B=m+a;M=c>=0&&B>=0&&B<v?u(e[B]):M,M>=z&&d.push([z,M])}return d}function wa(e){return e==0?Ra:e==1?pt:l=>Ol(l,e)}function nr(e){let l=e==0?es:ts,i=e==0?(a,u,c,d,v,p)=>{a.arcTo(u,c,d,v,p)}:(a,u,c,d,v,p)=>{a.arcTo(c,u,v,d,p)},n=e==0?(a,u,c,d,v)=>{a.rect(u,c,d,v)}:(a,u,c,d,v)=>{a.rect(c,u,v,d)};return(a,u,c,d,v,p=0,k=0)=>{p==0&&k==0?n(a,u,c,d,v):(p=cl(p,d/2,v/2),k=cl(k,d/2,v/2),l(a,u+p,c),i(a,u+d,c,u+d,c+v,p),i(a,u+d,c+v,u,c+v,k),i(a,u,c+v,u,c,k),i(a,u,c,u+d,c,p),a.closePath())}}const es=(e,l,i)=>{e.moveTo(l,i)},ts=(e,l,i)=>{e.moveTo(i,l)},rn=(e,l,i)=>{e.lineTo(l,i)},on=(e,l,i)=>{e.lineTo(i,l)},ls=nr(0),oi=nr(1),sr=(e,l,i,n,a,u)=>{e.arc(l,i,n,a,u)},ir=(e,l,i,n,a,u)=>{e.arc(i,l,n,a,u)},ar=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(l,i,n,a,u,c)},rr=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(i,l,a,n,c,u)};function or(e){return(l,i,n,a,u)=>Il(l,i,(c,d,v,p,k,g,m,z,M,R,N)=>{let{pxRound:B,points:y}=c,W,A;p.ori==0?(W=es,A=sr):(W=ts,A=ir);const ie=Ve(y.width*Re,3);let G=(y.size-y.width)/2*Re,te=Ve(G*2,3),$=new Path2D,oe=new Path2D,{left:le,top:_,width:H,height:C}=l.bbox;ls(oe,le-te,_-te,H+te*2,C+te*2);const Q=F=>{if(v[F]!=null){let se=B(g(d[F],p,R,z)),I=B(m(v[F],k,N,M));W($,se+G,I),A($,se,I,G,0,In*2)}};if(u)u.forEach(Q);else for(let F=n;F<=a;F++)Q(F);return{stroke:ie>0?$:null,fill:$,clip:oe,flags:sn|Hs}})}function cr(e){return(l,i,n,a,u,c)=>{n!=a&&(u!=n&&c!=n&&e(l,i,n),u!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Gc=cr(rn),zc=cr(on);function ur(e){const l=Ce(e?.alignGaps,0);return(i,n,a,u)=>Il(i,n,(c,d,v,p,k,g,m,z,M,R,N)=>{[a,u]=Jn(v,a,u);let B=c.pxRound,y=C=>B(g(C,p,R,z)),W=C=>B(m(C,k,N,M)),A,ie;p.ori==0?(A=rn,ie=Gc):(A=on,ie=zc);const G=p.dir*(p.ori==0?1:-1),te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},$=te.stroke;let oe=!1;if(u-a>=R*4){let C=K=>i.posToVal(K,p.key,!0),Q=null,F=null,se,I,Me,_e=y(d[G==1?a:u]),fe=y(d[a]),ge=y(d[u]),ae=C(G==1?fe+1:ge-1);for(let K=G==1?a:u;K>=a&&K<=u;K+=G){let Se=d[K],ye=(G==1?Se<ae:Se>ae)?_e:y(Se),de=v[K];ye==_e?de!=null?(I=de,Q==null?(A($,ye,W(I)),se=Q=F=I):I<Q?Q=I:I>F&&(F=I)):de===null&&(oe=!0):(Q!=null&&ie($,_e,W(Q),W(F),W(se),W(I)),de!=null?(I=de,A($,ye,W(I)),Q=F=se=I):(Q=F=null,de===null&&(oe=!0)),_e=ye,ae=C(_e+G))}Q!=null&&Q!=F&&Me!=_e&&ie($,_e,W(Q),W(F),W(se),W(I))}else for(let C=G==1?a:u;C>=a&&C<=u;C+=G){let Q=v[C];Q===null?oe=!0:Q!=null&&A($,y(d[C]),W(Q))}let[_,H]=ai(i,n);if(c.fill!=null||_!=0){let C=te.fill=new Path2D($),Q=c.fillTo(i,n,c.min,c.max,_),F=W(Q),se=y(d[a]),I=y(d[u]);G==-1&&([I,se]=[se,I]),A(C,I,F),A(C,se,F)}if(!c.spanGaps){let C=[];oe&&C.push(...ri(d,v,a,u,G,y,l)),te.gaps=C=c.gaps(i,n,a,u,C),te.clip=$n(C,p.ori,z,M,R,N)}return H!=0&&(te.band=H==2?[bl(i,n,a,u,$,-1),bl(i,n,a,u,$,1)]:bl(i,n,a,u,$,H)),te})}function Nc(e){const l=Ce(e.align,1),i=Ce(e.ascDesc,!1),n=Ce(e.alignGaps,0),a=Ce(e.extend,!1);return(u,c,d,v)=>Il(u,c,(p,k,g,m,z,M,R,N,B,y,W)=>{[d,v]=Jn(g,d,v);let A=p.pxRound,{left:ie,width:G}=u.bbox,te=fe=>A(M(fe,m,y,N)),$=fe=>A(R(fe,z,W,B)),oe=m.ori==0?rn:on;const le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},_=le.stroke,H=m.dir*(m.ori==0?1:-1);let C=$(g[H==1?d:v]),Q=te(k[H==1?d:v]),F=Q,se=Q;a&&l==-1&&(se=ie,oe(_,se,C)),oe(_,Q,C);for(let fe=H==1?d:v;fe>=d&&fe<=v;fe+=H){let ge=g[fe];if(ge==null)continue;let ae=te(k[fe]),K=$(ge);l==1?oe(_,ae,C):oe(_,F,K),oe(_,ae,K),C=K,F=ae}let I=F;a&&l==1&&(I=ie+G,oe(_,I,C));let[Me,_e]=ai(u,c);if(p.fill!=null||Me!=0){let fe=le.fill=new Path2D(_),ge=p.fillTo(u,c,p.min,p.max,Me),ae=$(ge);oe(fe,I,ae),oe(fe,se,ae)}if(!p.spanGaps){let fe=[];fe.push(...ri(k,g,d,v,H,te,n));let ge=p.width*Re/2,ae=i||l==1?ge:-ge,K=i||l==-1?-ge:ge;fe.forEach(Se=>{Se[0]+=ae,Se[1]+=K}),le.gaps=fe=p.gaps(u,c,d,v,fe),le.clip=$n(fe,m.ori,N,B,y,W)}return _e!=0&&(le.band=_e==2?[bl(u,c,d,v,_,-1),bl(u,c,d,v,_,1)]:bl(u,c,d,v,_,_e)),le})}function _a(e,l,i,n,a,u,c=Ne){if(e.length>1){let d=null;for(let v=0,p=1/0;v<e.length;v++)if(l[v]!==void 0){if(d!=null){let k=ht(e[v]-e[d]);k<p&&(p=k,c=ht(i(e[v],n,a,u)-i(e[d],n,a,u)))}d=v}}return c}function Vc(e){e=e||kn;const l=Ce(e.size,[.6,Ne,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const u=be(a),c=1-l[0],d=Ce(l[1],Ne),v=Ce(l[2],1),p=Ce(e.disp,kn),k=Ce(e.each,z=>{}),{fill:g,stroke:m}=p;return(z,M,R,N)=>Il(z,M,(B,y,W,A,ie,G,te,$,oe,le,_)=>{let H=B.pxRound,C=i,Q=n*Re,F=d*Re,se=v*Re,I,Me;A.ori==0?[I,Me]=u(z,M):[Me,I]=u(z,M);const _e=A.dir*(A.ori==0?1:-1);let fe=A.ori==0?ls:oi,ge=A.ori==0?k:(V,ke,Ge,Vt,It,At,Pt)=>{k(V,ke,Ge,It,Vt,Pt,At)},ae=Ce(z.bands,ti).find(V=>V.series[0]==M),K=ae!=null?ae.dir:0,Se=B.fillTo(z,M,B.min,B.max,K),Ie=H(te(Se,ie,_,oe)),ye,de,Je,He=le,xe=H(B.width*Re),Qe=!1,Xe=null,je=null,Ze=null,wt=null;g!=null&&(xe==0||m!=null)&&(Qe=!0,Xe=g.values(z,M,R,N),je=new Map,new Set(Xe).forEach(V=>{V!=null&&je.set(V,new Path2D)}),xe>0&&(Ze=m.values(z,M,R,N),wt=new Map,new Set(Ze).forEach(V=>{V!=null&&wt.set(V,new Path2D)})));let{x0:ue,size:nt}=p;if(ue!=null&&nt!=null){C=1,y=ue.values(z,M,R,N),ue.unit==2&&(y=y.map(Ge=>z.posToVal($+Ge*le,A.key,!0)));let V=nt.values(z,M,R,N);nt.unit==2?de=V[0]*le:de=G(V[0],A,le,$)-G(0,A,le,$),He=_a(y,W,G,A,le,$,He),Je=He-de+Q}else He=_a(y,W,G,A,le,$,He),Je=He*c+Q,de=He-Je;Je<1&&(Je=0),xe>=de/2&&(xe=0),Je<5&&(H=Ra);let Ct=Je>0,dt=He-Je-(Ct?xe:0);de=H(Ns(dt,se,F)),ye=(C==0?de/2:C==_e?0:de)-C*_e*((C==0?Q/2:0)+(Ct?xe/2:0));const Be={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},it=Qe?null:new Path2D;let Mt=null;if(ae!=null)Mt=z.data[ae.series[1]];else{let{y0:V,y1:ke}=p;V!=null&&ke!=null&&(W=ke.values(z,M,R,N),Mt=V.values(z,M,R,N))}let Rt=I*de,re=Me*de;for(let V=_e==1?R:N;V>=R&&V<=N;V+=_e){let ke=W[V];if(ke==null)continue;if(Mt!=null){let x=Mt[V]??0;if(ke-x==0)continue;Ie=te(x,ie,_,oe)}let Ge=A.distr!=2||p!=null?y[V]:V,Vt=G(Ge,A,le,$),It=te(Ce(ke,Se),ie,_,oe),At=H(Vt-ye),Pt=H(zt(It,Ie)),P=H(cl(It,Ie)),q=Pt-P;if(ke!=null){let x=ke<0?re:Rt,S=ke<0?Rt:re;Qe?(xe>0&&Ze[V]!=null&&fe(wt.get(Ze[V]),At,P+qt(xe/2),de,zt(0,q-xe),x,S),Xe[V]!=null&&fe(je.get(Xe[V]),At,P+qt(xe/2),de,zt(0,q-xe),x,S)):fe(it,At,P+qt(xe/2),de,zt(0,q-xe),x,S),ge(z,M,V,At-xe/2,P,de+xe,q)}}return xe>0?Be.stroke=Qe?wt:it:Qe||(Be._fill=B.width==0?B._fill:B._stroke??B._fill,Be.width=0),Be.fill=Qe?je:it,Be})}function Ic(e,l){const i=Ce(l?.alignGaps,0);return(n,a,u,c)=>Il(n,a,(d,v,p,k,g,m,z,M,R,N,B)=>{[u,c]=Jn(p,u,c);let y=d.pxRound,W=I=>y(m(I,k,N,M)),A=I=>y(z(I,g,B,R)),ie,G,te;k.ori==0?(ie=es,te=rn,G=ar):(ie=ts,te=on,G=rr);const $=k.dir*(k.ori==0?1:-1);let oe=W(v[$==1?u:c]),le=oe,_=[],H=[];for(let I=$==1?u:c;I>=u&&I<=c;I+=$)if(p[I]!=null){let _e=v[I],fe=W(_e);_.push(le=fe),H.push(A(p[I]))}const C={stroke:e(_,H,ie,te,G,y),fill:null,clip:null,band:null,gaps:null,flags:sn},Q=C.stroke;let[F,se]=ai(n,a);if(d.fill!=null||F!=0){let I=C.fill=new Path2D(Q),Me=d.fillTo(n,a,d.min,d.max,F),_e=A(Me);te(I,le,_e),te(I,oe,_e)}if(!d.spanGaps){let I=[];I.push(...ri(v,p,u,c,$,W,i)),C.gaps=I=d.gaps(n,a,u,c,I),C.clip=$n(I,k.ori,M,R,N,B)}return se!=0&&(C.band=se==2?[bl(n,a,u,c,Q,-1),bl(n,a,u,c,Q,1)]:bl(n,a,u,c,Q,se)),C})}function Hc(e){return Ic(Bc,e)}function Bc(e,l,i,n,a,u){const c=e.length;if(c<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),c==2)n(d,e[1],l[1]);else{let v=Array(c),p=Array(c-1),k=Array(c-1),g=Array(c-1);for(let m=0;m<c-1;m++)k[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],p[m]=k[m]/g[m];v[0]=p[0];for(let m=1;m<c-1;m++)p[m]===0||p[m-1]===0||p[m-1]>0!=p[m]>0?v[m]=0:(v[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/p[m-1]+(g[m]+2*g[m-1])/p[m]),isFinite(v[m])||(v[m]=0));v[c-1]=p[c-2];for(let m=0;m<c-1;m++)a(d,e[m]+g[m]/3,l[m]+v[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-v[m+1]*g[m]/3,e[m+1],l[m+1])}return d}const Bs=new Set;function xa(){for(let e of Bs)e.syncRect(!0)}an&&(Nl(So,en,xa),Nl(yo,en,xa,!0),Nl(Wn,en,()=>{gt.pxRatio=Re}));const Wc=ur(),Uc=or();function ba(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Ws(u,c,l,i))}function Yc(e,l){return e.map((i,n)=>n==0?{}:ut({},l,i))}function Ws(e,l,i,n){return ut({},l==0?i:n,e)}function fr(e,l,i){return l==null?ln:[l,i]}const qc=fr;function jc(e,l,i){return l==null?ln:Un(l,i,$s,!0)}function dr(e,l,i,n){return l==null?ln:Zn(l,i,e.scales[n].log,!1)}const Kc=dr;function vr(e,l,i,n){return l==null?ln:Xs(l,i,e.scales[n].log,!1)}const Jc=vr;function Zc(e,l,i,n,a){let u=zt($i(e),$i(l)),c=l-e,d=ol(a/n*c,i);do{let v=i[d],p=n*v/c;if(p>=a&&u+(v<5?Ll.get(v):0)<=17)return[v,p]}while(++d<i.length);return[0,0]}function Sa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=pt((i=+a)*Re))+"px"),[e,l,i]}function Qc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ve(l[2]*Re,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function gt(e,l,i){const n={mode:Ce(e.mode,1)},a=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let v=!1;n.status=0;const p=n.root=Xt(no);if(e.id!=null&&(p.id=e.id),Yt(p,e.class),e.title){let t=Xt(ao,p);t.textContent=e.title}const k=rl("canvas"),g=n.ctx=k.getContext("2d"),m=Xt(ro,p);Nl("click",m,t=>{t.target===M&&(We!=ql||Ke!=jl)&&Lt.click(n,t)},!0);const z=n.under=Xt(oo,m);m.appendChild(k);const M=n.over=Xt(co,m);e=nn(e);const R=+Ce(e.pxAlign,1),N=wa(R);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const B=e.ms||.001,y=n.series=a==1?ba(e.series||[],fa,ga,!1):Yc(e.series||[null],ha),W=n.axes=ba(e.axes||[],ua,va,!0),A=n.scales={},ie=n.bands=e.bands||[];ie.forEach(t=>{t.fill=be(t.fill||null),t.dir=Ce(t.dir,-1)});const G=a==2?y[1].facets[0].scale:y[0].scale,te={axes:br,series:gr},$=(e.drawOrder||["axes","series"]).map(t=>te[t]);function oe(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,b=h-f;return(o-f)/b}}function le(t){let s=A[t];if(s==null){let r=(e.scales||kn)[t]||kn;if(r.from!=null){le(r.from);let o=ut({},A[r.from],r,{key:t});o.valToPct=oe(o),A[t]=o}else{s=A[t]=ut({},t==G?tr:Rc,r),s.key=t;let o=s.time,f=s.range,h=Al(f);if((t!=G||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Zi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Zi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Xn(f))){let b=f;f=(T,L,U)=>L==null?ln:Un(L,U,b)}s.range=be(f||(o?qc:t==G?s.distr==3?Kc:s.distr==4?Jc:fr:s.distr==3?dr:s.distr==4?vr:jc)),s.auto=be(h?!1:s.auto),s.clamp=be(s.clamp||Pc),s._min=s._max=null,s.valToPct=oe(s)}}}le("x"),le("y"),a==1&&y.forEach(t=>{le(t.scale)}),W.forEach(t=>{le(t.scale)});for(let t in e.scales)le(t);const _=A[G],H=_.distr;let C,Q;_.ori==0?(Yt(p,so),C=u,Q=c):(Yt(p,io),C=c,Q=u);const F={};for(let t in A){let s=A[t];(s.min!=null||s.max!=null)&&(F[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(pt(t/B))),I=e.fmtDate||li,Me=B==1?ic(se):oc(se),_e=ra(se,aa(B==1?sc:rc,I)),fe=ca(se,oa(uc,I)),ge=[],ae=n.legend=ut({},vc,e.legend),K=n.cursor=ut({},_c,{drag:{y:a==2}},e.cursor),Se=ae.show,Ie=K.show,ye=ae.markers;ae.idxs=ge,ye.width=be(ye.width),ye.dash=be(ye.dash),ye.stroke=be(ye.stroke),ye.fill=be(ye.fill);let de,Je,He,xe=[],Qe=[],Xe,je=!1,Ze={};if(ae.live){const t=y[1]?y[1].values:null;je=t!=null,Xe=je?t(n,1,0):{_:0};for(let s in Xe)Ze[s]=Zs}if(Se)if(de=rl("table",go,p),He=rl("tbody",null,de),ae.mount(n,de),je){Je=rl("thead",null,de,He);let t=rl("tr",null,Je);rl("th",null,t);for(var wt in Xe)rl("th",zi,t).textContent=wt}else Yt(de,wo),ae.live&&Yt(de,mo);const ue={show:!0},nt={show:!1};function Ct(t,s){if(s==0&&(je||!ae.live||a==2))return ln;let r=[],o=rl("tr",_o,He,He.childNodes[s]);Yt(o,t.class),t.show||Yt(o,zl);let f=rl("th",null,o);if(ye.show){let T=Xt(xo,f);if(s>0){let L=ye.width(n,s);L&&(T.style.border=L+"px "+ye.dash(n,s)+" "+ye.stroke(n,s)),T.style.background=ye.fill(n,s)}}let h=Xt(zi,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(ye.show||(h.style.color=t.width>0?ye.stroke(n,s):ye.fill(n,s)),Be("click",f,T=>{if(K._lock)return;rt(T);let L=y.indexOf(t);if((T.ctrlKey||T.metaKey)!=ae.isolate){let U=y.some((j,Z)=>Z>0&&Z!=L&&j.show);y.forEach((j,Z)=>{Z>0&&dl(Z,U?Z==L?ue:nt:ue,!0,ct.setSeries)})}else dl(L,{show:!t.show},!0,ct.setSeries)},!1),ll&&Be(Hi,f,T=>{K._lock||(rt(T),dl(y.indexOf(t),Jl,!0,ct.setSeries))},!1));for(var b in Xe){let T=rl("td",bo,o);T.textContent="--",r.push(T)}return[o,r]}const dt=new Map;function Be(t,s,r,o=!0){const f=dt.get(s)||{},h=K.bind[t](n,s,r,o);h&&(Nl(t,s,f[t]=h),dt.set(s,f))}function it(t,s,r){const o=dt.get(s)||{};for(let f in o)(t==null||f==t)&&(zs(f,s,o[f]),delete o[f]);t==null&&dt.delete(s)}let Mt=0,Rt=0,re=0,V=0,ke=0,Ge=0,Vt=ke,It=Ge,At=re,Pt=V,P=0,q=0,x=0,S=0;n.bbox={};let O=!1,ee=!1,J=!1,X=!1,Ae=!1,pe=!1;function $e(t,s,r){(r||t!=n.width||s!=n.height)&&at(t,s),Bl(!1),J=!0,ee=!0,Wl()}function at(t,s){n.width=Mt=re=t,n.height=Rt=V=s,ke=Ge=0,ul(),tl();let r=n.bbox;P=r.left=Ol(ke*Re,.5),q=r.top=Ol(Ge*Re,.5),x=r.width=Ol(re*Re,.5),S=r.height=Ol(V*Re,.5)}const Kt=3;function Jt(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=xr(s);t=s==Kt||r&&o,t||(at(n.width,n.height),ee=!0)}}function el({width:t,height:s}){$e(t,s)}n.setSize=el;function ul(){let t=!1,s=!1,r=!1,o=!1;W.forEach((f,h)=>{if(f.show&&f._show){let{side:b,_size:T}=f,L=b%2,U=f.label!=null?f.labelSize:0,j=T+U;j>0&&(L?(re-=j,b==3?(ke+=j,o=!0):r=!0):(V-=j,b==0?(Ge+=j,t=!0):s=!0))}}),nl[0]=t,nl[1]=r,nl[2]=s,nl[3]=o,re-=fl[1]+fl[3],ke+=fl[3],V-=fl[2]+fl[0],Ge+=fl[0]}function tl(){let t=ke+re,s=Ge+V,r=ke,o=Ge;function f(h,b){switch(h){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}W.forEach((h,b)=>{if(h.show&&h._show){let T=h.side;h._pos=f(T,h._size),h.label!=null&&(h._lpos=f(T,h.labelSize))}})}if(K.dataIdx==null){let t=K.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=be(t.prox),o=t.bias??=0;K.dataIdx=(f,h,b,T)=>{if(h==0)return b;let L=b,U=r(f,h,b,T)??Ne,j=U>=0&&U<Ne,Z=_.ori==0?re:V,ve=K.left,Pe=l[0],Le=l[h];if(s.has(Le[b])){L=null;let we=null,ce=null,ne;if(o==0||o==-1)for(ne=b;we==null&&ne-- >0;)s.has(Le[ne])||(we=ne);if(o==0||o==1)for(ne=b;ce==null&&ne++<Le.length;)s.has(Le[ne])||(ce=ne);if(we!=null||ce!=null)if(j){let Ye=we==null?-1/0:C(Pe[we],_,Z,0),et=ce==null?1/0:C(Pe[ce],_,Z,0),kt=ve-Ye,ze=et-ve;kt<=ze?kt<=U&&(L=we):ze<=U&&(L=ce)}else L=ce==null?we:we==null?ce:b-we<=ce-b?we:ce}else j&&ht(ve-C(Pe[b],_,Z,0))>U&&(L=null);return L}}const rt=t=>{K.event=t};K.idxs=ge,K._lock=!1;let he=K.points;he.show=be(he.show),he.size=be(he.size),he.stroke=be(he.stroke),he.width=be(he.width),he.fill=be(he.fill);const st=n.focus=ut({},e.focus||{alpha:.3},K.focus),ll=st.prox>=0,vt=ll&&he.one;let De=[],ot=[],Ht=[];function Sl(t,s){let r=he.show(n,s);if(r instanceof HTMLElement)return Yt(r,ho),Yt(r,t.class),gl(r,-10,-10,re,V),M.insertBefore(r,De[s]),r}function yl(t,s){if(a==1||s>0){let r=a==1&&A[t.scale].time,o=t.value;t.value=r?la(o)?ca(se,oa(o,I)):o||fe:o||Dc,t.label=t.label||(r?bc:xc)}if(vt||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wc||Ro,t.fillTo=be(t.fillTo||Fc),t.pxAlign=+Ce(t.pxAlign,R),t.pxRound=wa(t.pxAlign),t.stroke=be(t.stroke||null),t.fill=be(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lc(zt(1,t.width),1),o=t.points=ut({},{size:r,width:zt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uc,_stroke:null,_fill:null},t.points);o.show=be(o.show),o.filter=be(o.filter),o.fill=be(o.fill),o.stroke=be(o.stroke),o.paths=be(o.paths),o.pxAlign=t.pxAlign}if(Se){let r=Ct(t,s);xe.splice(s,0,r[0]),Qe.splice(s,0,r[1]),ae.values.push(null)}if(Ie){ge.splice(s,0,null);let r=null;vt?s==0&&(r=Sl(t,s)):s>0&&(r=Sl(t,s)),De.splice(s,0,r),ot.splice(s,0,0),Ht.splice(s,0,0)}yt("addSeries",s)}function cn(t,s){s=s??y.length,t=a==1?Ws(t,s,fa,ga):Ws(t,s,{},ha),y.splice(s,0,t),yl(y[s],s)}n.addSeries=cn;function ml(t){if(y.splice(t,1),Se){ae.values.splice(t,1),Qe.splice(t,1);let s=xe.splice(t,1)[0];it(null,s.firstChild),s.remove()}Ie&&(ge.splice(t,1),De.splice(t,1)[0].remove(),ot.splice(t,1),Ht.splice(t,1)),yt("delSeries",t)}n.delSeries=ml;const nl=[!1,!1,!1,!1];function ns(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=A[t.scale];o==null&&(t.scale=r?y[1].scale:G,o=A[t.scale]);let f=o.time;t.size=be(t.size),t.space=be(t.space),t.rotate=be(t.rotate),Al(t.incrs)&&t.incrs.forEach(b=>{!Ll.has(b)&&Ll.set(b,Ga(b))}),t.incrs=be(t.incrs||(o.distr==2?tc:f?B==1?nc:ac:Gl)),t.splits=be(t.splits||(f&&o.distr==1?Me:o.distr==3?Vs:o.distr==4?kc:yc)),t.stroke=be(t.stroke),t.grid.stroke=be(t.grid.stroke),t.ticks.stroke=be(t.ticks.stroke),t.border.stroke=be(t.border.stroke);let h=t.values;t.values=Al(h)&&!Al(h[0])?be(h):f?Al(h)?ra(se,aa(h,I)):la(h)?cc(se,h):h||_e:h||Sc,t.filter=be(t.filter||(o.distr>=3&&o.log==10?Mc:o.distr==3&&o.log==2?Ac:Fa)),t.font=Sa(t.font),t.labelFont=Sa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(nl[s]=!0,t._el=Xt(uo,m))}}function Cl(t,s,r,o){let[f,h,b,T]=r,L=s%2,U=0;return L==0&&(T||h)&&(U=s==0&&!f||s==2&&!b?pt(ua.size/3):0),L==1&&(f||b)&&(U=s==1&&!h||s==3&&!T?pt(va.size/2):0),U}const An=n.padding=(e.padding||[Cl,Cl,Cl,Cl]).map(t=>be(Ce(t,Cl))),fl=n._padding=An.map((t,s)=>t(n,s,nl,0));let Dt,_t=null,xt=null;const Dn=a==1?y[0].idxs:null;let sl=null,un=!1;function ci(t,s){if(l=t??[],n.data=n._data=l,a==2){Dt=0;for(let r=1;r<y.length;r++)Dt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),sl=l[0],Dt=sl.length;let r=l;if(H==2){r=l.slice();let o=r[0]=Array(Dt);for(let f=0;f<Dt;f++)o[f]=f}n._data=l=r}if(Bl(!0),yt("setData"),H==2&&(J=!0),s!==!1){let r=_;r.auto(n,un)?ss():Tl(G,r.min,r.max),X=X||K.left>=0,pe=!0,Wl()}}n.setData=ci;function ss(){un=!0;let t,s;a==1&&(Dt>0?(_t=Dn[0]=0,xt=Dn[1]=Dt-1,t=l[0][_t],s=l[0][xt],H==2?(t=_t,s=xt):t==s&&(H==3?[t,s]=Zn(t,t,_.log,!1):H==4?[t,s]=Xs(t,t,_.log,!1):_.time?s=t+pt(86400/B):[t,s]=Un(t,s,$s,!0))):(_t=Dn[0]=t=null,xt=Dn[1]=s=null)),Tl(G,t,s)}let Ln,Hl,is,as,rs,os,cs,us,fs,Nt;function ui(t,s,r,o,f,h){t??=Vi,r??=ti,o??="butt",f??=Vi,h??="round",t!=Ln&&(g.strokeStyle=Ln=t),f!=Hl&&(g.fillStyle=Hl=f),s!=is&&(g.lineWidth=is=s),h!=rs&&(g.lineJoin=rs=h),o!=os&&(g.lineCap=os=o),r!=as&&g.setLineDash(as=r)}function fi(t,s,r,o){s!=Hl&&(g.fillStyle=Hl=s),t!=cs&&(g.font=cs=t),r!=us&&(g.textAlign=us=r),o!=fs&&(g.textBaseline=fs=o)}function ds(t,s,r,o,f=0){if(o.length>0&&t.auto(n,un)&&(s==null||s.min==null)){let h=Ce(_t,0),b=Ce(xt,o.length-1),T=r.min==null?Mo(o,h,b,f,t.distr==3):[r.min,r.max];t.min=cl(t.min,r.min=T[0]),t.max=zt(t.max,r.max=T[1])}}const di={min:null,max:null};function pr(){for(let o in A){let f=A[o];F[o]==null&&(f.min==null||F[G]!=null&&f.auto(n,un))&&(F[o]=di)}for(let o in A){let f=A[o];F[o]==null&&f.from!=null&&F[f.from]!=null&&(F[o]=di)}F[G]!=null&&Bl(!0);let t={};for(let o in F){let f=F[o];if(f!=null){let h=t[o]=nn(A[o],Go);if(f.min!=null)ut(h,f);else if(o!=G||a==2)if(Dt==0&&h.from==null){let b=h.range(n,null,null,o);h.min=b[0],h.max=b[1]}else h.min=Ne,h.max=-Ne}}if(Dt>0){y.forEach((o,f)=>{if(a==1){let h=o.scale,b=F[h];if(b==null)return;let T=t[h];if(f==0){let L=T.range(n,T.min,T.max,h);T.min=L[0],T.max=L[1],_t=ol(T.min,l[0]),xt=ol(T.max,l[0]),xt-_t>1&&(l[0][_t]<T.min&&_t++,l[0][xt]>T.max&&xt--),o.min=sl[_t],o.max=sl[xt]}else o.show&&o.auto&&ds(T,b,o,l[f],o.sorted);o.idxs[0]=_t,o.idxs[1]=xt}else if(f>0&&o.show&&o.auto){let[h,b]=o.facets,T=h.scale,L=b.scale,[U,j]=l[f],Z=t[T],ve=t[L];Z!=null&&ds(Z,F[T],h,U,h.sorted),ve!=null&&ds(ve,F[L],b,j,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],h=F[o];if(f.from==null&&(h==null||h.min==null)){let b=f.range(n,f.min==Ne?null:f.min,f.max==-Ne?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let b=f.range(n,h.min,h.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=A[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let b=h.distr;h._min=b==3?xl(h.min):b==4?Ds(h.min,h.asinh):b==100?h.fwd(h.min):h.min,h._max=b==3?xl(h.max):b==4?Ds(h.max,h.asinh):b==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)J=!0,yt("setScale",o);Ie&&K.left>=0&&(X=pe=!0)}for(let o in F)F[o]=null}function hr(t){let s=Ns(_t-1,0,Dt-1),r=Ns(xt+1,0,Dt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Dt-1;)r++;return[s,r]}function gr(){if(Dt>0){let t=y.some(s=>s._focus)&&Nt!=st.alpha;t&&(g.globalAlpha=Nt=st.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(vi(r,!1),vi(r,!0),s._paths==null)){let o=Nt;Nt!=s.alpha&&(g.globalAlpha=Nt=s.alpha);let f=a==2?[0,l[r][0].length-1]:hr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Nt!=o&&(g.globalAlpha=Nt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Nt;Nt!=s.alpha&&(g.globalAlpha=Nt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,_t,xt,f),b=s.points.filter(n,r,h,f);(h||b)&&(s.points._paths=s.points.paths(n,r,_t,xt,b),pi(r,!0))}Nt!=o&&(g.globalAlpha=Nt=o),yt("drawSeries",r)}}),t&&(g.globalAlpha=Nt=1)}}function vi(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:h,flags:b,_stroke:T=r._stroke,_fill:L=r._fill,_width:U=r.width}=r._paths;U=Ve(U*Re,3);let j=null,Z=U%2/2;s&&L==null&&(L=U>0?"#fff":T);let ve=r.pxAlign==1&&Z>0;if(ve&&g.translate(Z,Z),!s){let Pe=P-U/2,Le=q-U/2,we=x+U,ce=S+U;j=new Path2D,j.rect(Pe,Le,we,ce)}s?vs(T,U,r.dash,r.cap,L,o,f,b,h):mr(t,T,U,r.dash,r.cap,L,o,f,b,j,h),ve&&g.translate(-Z,-Z)}function mr(t,s,r,o,f,h,b,T,L,U,j){let Z=!1;L!=0&&ie.forEach((ve,Pe)=>{if(ve.series[0]==t){let Le=y[ve.series[1]],we=l[ve.series[1]],ce=(Le._paths||kn).band;Al(ce)&&(ce=ve.dir==1?ce[0]:ce[1]);let ne,Ye=null;Le.show&&ce&&Do(we,_t,xt)?(Ye=ve.fill(n,Pe)||h,ne=Le._paths.clip):ce=null,vs(s,r,o,f,Ye,b,T,L,U,j,ne,ce),Z=!0}}),Z||vs(s,r,o,f,h,b,T,L,U,j)}const hi=sn|Hs;function vs(t,s,r,o,f,h,b,T,L,U,j,Z){ui(t,s,r,o,f),(L||U||Z)&&(g.save(),L&&g.clip(L),U&&g.clip(U)),Z?(T&hi)==hi?(g.clip(Z),j&&g.clip(j),Pn(f,b),Cn(t,h,s)):T&Hs?(Pn(f,b),g.clip(Z),Cn(t,h,s)):T&sn&&(g.save(),g.clip(Z),j&&g.clip(j),Pn(f,b),g.restore(),Cn(t,h,s)):(Pn(f,b),Cn(t,h,s)),(L||U||Z)&&g.restore()}function Cn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Ln=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Pn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Hl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function wr(t,s,r,o){let f=W[t],h;if(o<=0)h=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);h=Zc(s,r,T,o,b)}return f._found=h}function ps(t,s,r,o,f,h,b,T,L,U){let j=b%2/2;R==1&&g.translate(j,j),ui(T,b,L,U,T),g.beginPath();let Z,ve,Pe,Le,we=f+(o==0||o==3?-h:h);r==0?(ve=f,Le=we):(Z=f,Pe=we);for(let ce=0;ce<t.length;ce++)s[ce]!=null&&(r==0?Z=Pe=t[ce]:ve=Le=t[ce],g.moveTo(Z,ve),g.lineTo(Pe,Le));g.stroke(),R==1&&g.translate(-j,-j)}function _r(t){let s=!0;return W.forEach((r,o)=>{if(!r.show)return;let f=A[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Bl(!1));return}else r._show||(s=!1,r._show=!0,Bl(!1));let h=r.side,b=h%2,{min:T,max:L}=f,[U,j]=wr(o,T,L,b==0?re:V);if(j==0)return;let Z=f.distr==2,ve=r._splits=r.splits(n,o,T,L,U,j,Z),Pe=f.distr==2?ve.map(ne=>sl[ne]):ve,Le=f.distr==2?sl[ve[1]]-sl[ve[0]]:U,we=r._values=r.values(n,r.filter(n,Pe,o,j,Le),o,j,Le);r._rotate=h==2?r.rotate(n,we,o,j):0;let ce=r._size;r._size=$t(r.size(n,we,o,t)),ce!=null&&r._size!=ce&&(s=!1)}),s}function xr(t){let s=!0;return An.forEach((r,o)=>{let f=r(n,o,nl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function br(){for(let t=0;t<W.length;t++){let s=W[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,b=s.stroke(n,t),T=r==0||r==3?-1:1,[L,U]=s._found;if(s.label!=null){let Ot=s.labelGap*T,Ut=pt((s._lpos+Ot)*Re);fi(s.labelFont[0],b,"center",r==2?mn:Ni),g.save(),o==1?(f=h=0,g.translate(Ut,pt(q+S/2)),g.rotate((r==3?-In:In)/2)):(f=pt(P+x/2),h=Ut);let Fl=Pa(s.label)?s.label(n,t,L,U):s.label;g.fillText(Fl,f,h),g.restore()}if(U==0)continue;let j=A[s.scale],Z=o==0?x:S,ve=o==0?P:q,Pe=s._splits,Le=j.distr==2?Pe.map(Ot=>sl[Ot]):Pe,we=j.distr==2?sl[Pe[1]]-sl[Pe[0]]:L,ce=s.ticks,ne=s.border,Ye=ce.show?ce.size:0,et=pt(Ye*Re),kt=pt((s.alignTo==2?s._size-Ye-s.gap:s.gap)*Re),ze=s._rotate*-In/180,tt=N(s._pos*Re),Bt=(et+kt)*T,Ft=tt+Bt;h=o==0?Ft:0,f=o==1?Ft:0;let Zt=s.font[0],il=s.align==1?Ql:s.align==2?Es:ze>0?Ql:ze<0?Es:o==0?"center":r==3?Es:Ql,pl=ze||o==1?"middle":r==2?mn:Ni;fi(Zt,b,il,pl);let Wt=s.font[1]*s.lineGap,Qt=Pe.map(Ot=>N(d(Ot,j,Z,ve))),al=s._values;for(let Ot=0;Ot<al.length;Ot++){let Ut=al[Ot];if(Ut!=null){o==0?f=Qt[Ot]:h=Qt[Ot],Ut=""+Ut;let Fl=Ut.indexOf(`
`)==-1?[Ut]:Ut.split(/\n/gm);for(let Gt=0;Gt<Fl.length;Gt++){let Fi=Fl[Gt];ze?(g.save(),g.translate(f,h+Gt*Wt),g.rotate(ze),g.fillText(Fi,0,0),g.restore()):g.fillText(Fi,f,h+Gt*Wt)}}}ce.show&&ps(Qt,ce.filter(n,Le,t,U,we),o,r,tt,et,Ve(ce.width*Re,3),ce.stroke(n,t),ce.dash,ce.cap);let hl=s.grid;hl.show&&ps(Qt,hl.filter(n,Le,t,U,we),o,o==0?2:1,o==0?q:P,o==0?S:x,Ve(hl.width*Re,3),hl.stroke(n,t),hl.dash,hl.cap),ne.show&&ps([tt],[1],o==0?1:0,o==0?1:2,o==1?q:P,o==1?S:x,Ve(ne.width*Re,3),ne.stroke(n,t),ne.dash,ne.cap)}yt("drawAxes")}function Bl(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Rn=!1,hs=!1,fn=[];function Sr(){hs=!1;for(let t=0;t<fn.length;t++)yt(...fn[t]);fn.length=0}function Wl(){Rn||(Wo(gi),Rn=!0)}function yr(t,s=!1){Rn=!0,hs=s,t(n),gi(),s&&fn.length>0&&queueMicrotask(Sr)}n.batch=yr;function gi(){if(O&&(pr(),O=!1),J&&(Jt(),J=!1),ee){if(qe(z,Ql,ke),qe(z,mn,Ge),qe(z,xn,re),qe(z,bn,V),qe(M,Ql,ke),qe(M,mn,Ge),qe(M,xn,re),qe(M,bn,V),qe(m,xn,Mt),qe(m,bn,Rt),k.width=pt(Mt*Re),k.height=pt(Rt*Re),W.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,b=f%2==1;qe(t,b?"left":"top",o-h),qe(t,b?"width":"height",r),qe(t,b?"top":"left",b?Ge:ke),qe(t,b?"height":"width",b?V:re),Gs(t,zl)}else Yt(t,zl)}),Ln=Hl=is=rs=os=cs=us=fs=as=null,Nt=1,pn(!0),ke!=Vt||Ge!=It||re!=At||V!=Pt){Bl(!1);let t=re/At,s=V/Pt;if(Ie&&!X&&K.left>=0){K.left*=t,K.top*=s,Ul&&gl(Ul,pt(K.left),0,re,V),Yl&&gl(Yl,0,pt(K.top),re,V);for(let r=0;r<De.length;r++){let o=De[r];o!=null&&(ot[r]*=t,Ht[r]*=s,gl(o,$t(ot[r]),$t(Ht[r]),re,V))}}if(Ue.show&&!Ae&&Ue.left>=0&&Ue.width>0){Ue.left*=t,Ue.width*=t,Ue.top*=s,Ue.height*=s;for(let r in bs)qe(Kl,r,Ue[r])}Vt=ke,It=Ge,At=re,Pt=V}yt("setSize"),ee=!1}Mt>0&&Rt>0&&(g.clearRect(0,0,k.width,k.height),yt("drawClear"),$.forEach(t=>t()),yt("draw")),Ue.show&&Ae&&(Fn(Ue),Ae=!1),Ie&&X&&(Rl(null,!0,!1),X=!1),ae.show&&ae.live&&pe&&(_s(),pe=!1),v||(v=!0,n.status=1,yt("ready")),un=!1,Rn=!1}n.redraw=(t,s)=>{J=s||!1,t!==!1?Tl(G,_.min,_.max):Wl()};function gs(t,s){let r=A[t];if(r.from==null){if(Dt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Dt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==G&&r.distr==2&&Dt>0&&(s.min=ol(s.min,l[0]),s.max=ol(s.max,l[0]),s.min==s.max&&s.max++),F[t]=s,O=!0,Wl()}}n.setScale=gs;let ms,ws,Ul,Yl,mi,wi,ql,jl,_i,xi,We,Ke,kl=!1;const Lt=K.drag;let bt=Lt.x,St=Lt.y;Ie&&(K.x&&(ms=Xt(vo,M)),K.y&&(ws=Xt(po,M)),_.ori==0?(Ul=ms,Yl=ws):(Ul=ws,Yl=ms),We=K.left,Ke=K.top);const Ue=n.select=ut({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Kl=Ue.show?Xt(fo,Ue.over?M:z):null;function Fn(t,s){if(Ue.show){for(let r in t)Ue[r]=t[r],r in bs&&qe(Kl,r,t[r]);s!==!1&&yt("setSelect")}}n.setSelect=Fn;function kr(t){if(y[t].show)Se&&Gs(xe[t],zl);else if(Se&&Yt(xe[t],zl),Ie){let r=vt?De[0]:De[t];r!=null&&gl(r,-10,-10,re,V)}}function Tl(t,s,r){gs(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Dr(t),s.show!=null&&y.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,kr(h),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Wl())}),r!==!1&&yt("setSeries",t,s),o&&hn("setSeries",n,t,s)}n.setSeries=dl;function Tr(t,s){ut(ie[t],s)}function Er(t,s){t.fill=be(t.fill||null),t.dir=Ce(t.dir,-1),s=s??ie.length,ie.splice(s,0,t)}function Mr(t){t==null?ie.length=0:ie.splice(t,1)}n.addBand=Er,n.setBand=Tr,n.delBand=Mr;function Ar(t,s){y[t].alpha=s,Ie&&De[t]!=null&&(De[t].style.opacity=s),Se&&xe[t]&&(xe[t].style.opacity=s)}let wl,El,Pl;const Jl={focus:!0};function Dr(t){if(t!=Pl){let s=t==null,r=st.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Ar(f,h?1:st.alpha)}}),Pl=t,r&&Wl()}}Se&&ll&&Be(Bi,de,t=>{K._lock||(rt(t),Pl!=null&&dl(null,Jl,!0,ct.setSeries))});function vl(t,s,r){let o=A[s];r&&(t=t/Re-(o.ori==1?Ge:ke));let f=re;o.ori==1&&(f=V,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,b=o._max,T=t/f,L=h+(b-h)*T,U=o.distr;return U==3?tn(10,L):U==4?Co(L,o.asinh):U==100?o.bwd(L):L}function Lr(t,s){let r=vl(t,G,s);return ol(r,l[0],_t,xt)}n.valToIdx=t=>ol(t,l[0]),n.posToIdx=Lr,n.posToVal=vl,n.valToPos=(t,s,r)=>A[s].ori==0?u(t,A[s],r?x:re,r?P:0):c(t,A[s],r?S:V,r?q:0),n.setCursor=(t,s,r)=>{We=t.left,Ke=t.top,Rl(null,s,r)};function bi(t,s){qe(Kl,Ql,Ue.left=t),qe(Kl,xn,Ue.width=s)}function Si(t,s){qe(Kl,mn,Ue.top=t),qe(Kl,bn,Ue.height=s)}let dn=_.ori==0?bi:Si,vn=_.ori==1?bi:Si;function Cr(){if(Se&&ae.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&je)continue;let s=ae.values[t],r=0;for(let o in s)Qe[t][r++].firstChild.nodeValue=s[o]}}function _s(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ge[o]=r}):Oo(t.idx)||ge.fill(t.idx),ae.idx=ge[0]),Se&&ae.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!je)&&Pr(r,ge[r]);Cr()}pe=!1,s!==!1&&yt("setLegend")}n.setLegend=_s;function Pr(t,s){let r=y[t],o=t==0&&H==2?sl:l[t],f;je?f=r.values(n,t,s)??Ze:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?Ze:{_:f}),ae.values[t]=f}function Rl(t,s,r){_i=We,xi=Ke,[We,Ke]=K.move(n,We,Ke),K.left=We,K.top=Ke,Ie&&(Ul&&gl(Ul,pt(We),0,re,V),Yl&&gl(Yl,0,pt(Ke),re,V));let o,f=_t>xt;wl=Ne,El=null;let h=_.ori==0?re:V,b=_.ori==1?re:V;if(We<0||Dt==0||f){o=K.idx=null;for(let T=0;T<y.length;T++){let L=De[T];L!=null&&gl(L,-10,-10,re,V)}ll&&dl(null,Jl,!0,t==null&&ct.setSeries),ae.live&&(ge.fill(o),pe=!0)}else{let T,L,U;a==1&&(T=_.ori==0?We:Ke,L=vl(T,G),o=K.idx=ol(L,l[0],_t,xt),U=C(l[0][o],_,h,0));let j=-10,Z=-10,ve=0,Pe=0,Le=!0,we="",ce="";for(let ne=a==2?1:0;ne<y.length;ne++){let Ye=y[ne],et=ge[ne],kt=et==null?null:a==1?l[ne][et]:l[ne][1][et],ze=K.dataIdx(n,ne,o,L),tt=ze==null?null:a==1?l[ne][ze]:l[ne][1][ze];if(pe=pe||tt!=kt||ze!=et,ge[ne]=ze,ne>0&&Ye.show){let Bt=ze==null?-10:ze==o?U:C(a==1?l[0][ze]:l[ne][0][ze],_,h,0),Ft=tt==null?-10:Q(tt,a==1?A[Ye.scale]:A[Ye.facets[1].scale],b,0);if(ll&&tt!=null){let Zt=_.ori==1?We:Ke,il=ht(st.dist(n,ne,ze,Ft,Zt));if(il<wl){let pl=st.bias;if(pl!=0){let Wt=vl(Zt,Ye.scale),Qt=tt>=0?1:-1,al=Wt>=0?1:-1;al==Qt&&(al==1?pl==1?tt>=Wt:tt<=Wt:pl==1?tt<=Wt:tt>=Wt)&&(wl=il,El=ne)}else wl=il,El=ne}}if(pe||vt){let Zt,il;_.ori==0?(Zt=Bt,il=Ft):(Zt=Ft,il=Bt);let pl,Wt,Qt,al,hl,Ot,Ut=!0,Fl=he.bbox;if(Fl!=null){Ut=!1;let Gt=Fl(n,ne);Qt=Gt.left,al=Gt.top,pl=Gt.width,Wt=Gt.height}else Qt=Zt,al=il,pl=Wt=he.size(n,ne);if(Ot=he.fill(n,ne),hl=he.stroke(n,ne),vt)ne==El&&wl<=st.prox&&(j=Qt,Z=al,ve=pl,Pe=Wt,Le=Ut,we=Ot,ce=hl);else{let Gt=De[ne];Gt!=null&&(ot[ne]=Qt,Ht[ne]=al,Ji(Gt,pl,Wt,Ut),ji(Gt,Ot,hl),gl(Gt,$t(Qt),$t(al),re,V))}}}}if(vt){let ne=st.prox,Ye=Pl==null?wl<=ne:wl>ne||El!=Pl;if(pe||Ye){let et=De[0];et!=null&&(ot[0]=j,Ht[0]=Z,Ji(et,ve,Pe,Le),ji(et,we,ce),gl(et,$t(j),$t(Z),re,V))}}}if(Ue.show&&kl)if(t!=null){let[T,L]=ct.scales,[U,j]=ct.match,[Z,ve]=t.cursor.sync.scales,Pe=t.cursor.drag;if(bt=Pe._x,St=Pe._y,bt||St){let{left:Le,top:we,width:ce,height:ne}=t.select,Ye=t.scales[Z].ori,et=t.posToVal,kt,ze,tt,Bt,Ft,Zt=T!=null&&U(T,Z),il=L!=null&&j(L,ve);Zt&&bt?(Ye==0?(kt=Le,ze=ce):(kt=we,ze=ne),tt=A[T],Bt=C(et(kt,Z),tt,h,0),Ft=C(et(kt+ze,Z),tt,h,0),dn(cl(Bt,Ft),ht(Ft-Bt))):dn(0,h),il&&St?(Ye==1?(kt=Le,ze=ce):(kt=we,ze=ne),tt=A[L],Bt=Q(et(kt,ve),tt,b,0),Ft=Q(et(kt+ze,ve),tt,b,0),vn(cl(Bt,Ft),ht(Ft-Bt))):vn(0,b)}else Ss()}else{let T=ht(_i-mi),L=ht(xi-wi);if(_.ori==1){let ve=T;T=L,L=ve}bt=Lt.x&&T>=Lt.dist,St=Lt.y&&L>=Lt.dist;let U=Lt.uni;U!=null?bt&&St&&(bt=T>=U,St=L>=U,!bt&&!St&&(L>T?St=!0:bt=!0)):Lt.x&&Lt.y&&(bt||St)&&(bt=St=!0);let j,Z;bt&&(_.ori==0?(j=ql,Z=We):(j=jl,Z=Ke),dn(cl(j,Z),ht(Z-j)),St||vn(0,b)),St&&(_.ori==1?(j=ql,Z=We):(j=jl,Z=Ke),vn(cl(j,Z),ht(Z-j)),bt||dn(0,h)),!bt&&!St&&(dn(0,0),vn(0,0))}if(Lt._x=bt,Lt._y=St,t==null){if(r){if(Ri!=null){let[T,L]=ct.scales;ct.values[0]=T!=null?vl(_.ori==0?We:Ke,T):null,ct.values[1]=L!=null?vl(_.ori==1?We:Ke,L):null}hn(Ms,n,We,Ke,re,V,o)}if(ll){let T=r&&ct.setSeries,L=st.prox;Pl==null?wl<=L&&dl(El,Jl,!0,T):wl>L?dl(null,Jl,!0,T):El!=Pl&&dl(El,Jl,!0,T)}}pe&&(ae.idx=o,_s()),s!==!1&&yt("setCursor")}let Ml=null;Object.defineProperty(n,"rect",{get(){return Ml==null&&pn(!1),Ml}});function pn(t=!1){t?Ml=null:(Ml=M.getBoundingClientRect(),yt("syncRect",Ml))}function yi(t,s,r,o,f,h,b){K._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(xs(t,s,r,o,f,h,b,!1,t!=null),t!=null?Rl(null,!0,!0):Rl(s,!0,!1))}function xs(t,s,r,o,f,h,b,T,L){if(Ml==null&&pn(!1),rt(t),t!=null)r=t.clientX-Ml.left,o=t.clientY-Ml.top;else{if(r<0||o<0){We=-10,Ke=-10;return}let[U,j]=ct.scales,Z=s.cursor.sync,[ve,Pe]=Z.values,[Le,we]=Z.scales,[ce,ne]=ct.match,Ye=s.axes[0].side%2==1,et=_.ori==0?re:V,kt=_.ori==1?re:V,ze=Ye?h:f,tt=Ye?f:h,Bt=Ye?o:r,Ft=Ye?r:o;if(Le!=null?r=ce(U,Le)?d(ve,A[U],et,0):-10:r=et*(Bt/ze),we!=null?o=ne(j,we)?d(Pe,A[j],kt,0):-10:o=kt*(Ft/tt),_.ori==1){let Zt=r;r=o,o=Zt}}L&&(s==null||s.cursor.event.type==Ms)&&((r<=1||r>=re-1)&&(r=Ol(r,re)),(o<=1||o>=V-1)&&(o=Ol(o,V))),T?(mi=r,wi=o,[ql,jl]=K.move(n,r,o)):(We=r,Ke=o)}const bs={width:0,height:0,left:0,top:0};function Ss(){Fn(bs,!1)}let ki,Ti,Ei,Mi;function Ai(t,s,r,o,f,h,b){kl=!0,bt=St=Lt._x=Lt._y=!1,xs(t,s,r,o,f,h,b,!0,!1),t!=null&&(Be(As,Fs,Di,!1),hn(Ii,n,ql,jl,re,V,null));let{left:T,top:L,width:U,height:j}=Ue;ki=T,Ti=L,Ei=U,Mi=j}function Di(t,s,r,o,f,h,b){kl=Lt._x=Lt._y=!1,xs(t,s,r,o,f,h,b,!1,!0);let{left:T,top:L,width:U,height:j}=Ue,Z=U>0||j>0,ve=ki!=T||Ti!=L||Ei!=U||Mi!=j;if(Z&&ve&&Fn(Ue),Lt.setScale&&Z&&ve){let Pe=T,Le=U,we=L,ce=j;if(_.ori==1&&(Pe=L,Le=j,we=T,ce=U),bt&&Tl(G,vl(Pe,G),vl(Pe+Le,G)),St)for(let ne in A){let Ye=A[ne];ne!=G&&Ye.from==null&&Ye.min!=Ne&&Tl(ne,vl(we+ce,ne),vl(we,ne))}Ss()}else K.lock&&(K._lock=!K._lock,Rl(s,!0,t!=null));t!=null&&(it(As,Fs),hn(As,n,We,Ke,re,V,null))}function Rr(t,s,r,o,f,h,b){if(K._lock)return;rt(t);let T=kl;if(kl){let L=!0,U=!0,j=10,Z,ve;_.ori==0?(Z=bt,ve=St):(Z=St,ve=bt),Z&&ve&&(L=We<=j||We>=re-j,U=Ke<=j||Ke>=V-j),Z&&L&&(We=We<ql?0:re),ve&&U&&(Ke=Ke<jl?0:V),Rl(null,!0,!0),kl=!1}We=-10,Ke=-10,ge.fill(null),Rl(null,!0,!0),T&&(kl=T)}function Li(t,s,r,o,f,h,b){K._lock||(rt(t),ss(),Ss(),t!=null&&hn(Wi,n,We,Ke,re,V,null))}function Ci(){W.forEach(Qc),$e(n.width,n.height,!0)}Nl(Wn,en,Ci);const Zl={};Zl.mousedown=Ai,Zl.mousemove=yi,Zl.mouseup=Di,Zl.dblclick=Li,Zl.setSeries=(t,s,r,o)=>{let f=ct.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},Ie&&(Be(Ii,M,Ai),Be(Ms,M,yi),Be(Hi,M,t=>{rt(t),pn(!1)}),Be(Bi,M,Rr),Be(Wi,M,Li),Bs.add(n),n.syncRect=pn);const On=n.hooks=e.hooks||{};function yt(t,s,r){hs?fn.push([t,s,r]):t in On&&On[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)On[s]=(On[s]||[]).concat(t.hooks[s])});const Pi=(t,s,r)=>r,ct=ut({key:null,setSeries:!1,filters:{pub:ea,sub:ea},scales:[G,y[1]?y[1].scale:null],match:[ta,ta,Pi],values:[null,null]},K.sync);ct.match.length==2&&ct.match.push(Pi),K.sync=ct;const Ri=ct.key,ys=lr(Ri);function hn(t,s,r,o,f,h,b){ct.filters.pub(t,s,r,o,f,h,b)&&ys.pub(t,s,r,o,f,h,b)}ys.sub(n);function Fr(t,s,r,o,f,h,b){ct.filters.sub(t,s,r,o,f,h,b)&&Zl[t](null,s,r,o,f,h,b)}n.pub=Fr;function Or(){ys.unsub(n),Bs.delete(n),dt.clear(),zs(Wn,en,Ci),p.remove(),de?.remove(),yt("destroy")}n.destroy=Or;function ks(){yt("init",e,l),ci(l||e.data,!1),F[G]?gs(G,F[G]):ss(),Ae=Ue.show&&(Ue.width>0||Ue.height>0),X=pe=!0,$e(e.width,e.height)}return y.forEach(yl),W.forEach(ns),i?i instanceof HTMLElement?(i.appendChild(p),ks()):i(n,ks):ks(),n}gt.assign=ut;gt.fmtNum=ei;gt.rangeNum=Un;gt.rangeLog=Zn;gt.rangeAsinh=Xs;gt.orient=Il;gt.pxRatio=Re;gt.join=Bo;gt.fmtDate=li,gt.tzDate=$o;gt.sync=lr;{gt.addGap=Oc,gt.clipGaps=$n;let e=gt.paths={points:or};e.linear=ur,e.stepped=Nc,e.bars=Vc,e.spline=Hc}var Xc=Oe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$c=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),eu=Oe('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tu=Oe('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),lu=Oe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),nu=Oe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function su(e,l){jn(l,!0);const i=.5,n=1.2,a=32,u=212;function c(_,H){const C=[..._].sort((I,Me)=>I-Me),Q=H/100*(C.length-1),F=Math.floor(Q),se=Math.ceil(Q);return F===se?C[F]:C[F]+(C[se]-C[F])*(Q-F)}let d=Bn(l,"trend",3,null),v=lt(!1),p=lt(""),k=lt(null),g=Et(()=>Vn.config.temp_units==="C"),m=Et(Ma),z=Et(Ks),M=Et(()=>{if(l.readings.length===0)return null;const _=l.readings.filter(ue=>ue.status!=="invalid");if(_.length===0)return null;const H=[..._].sort((ue,nt)=>new Date(ue.timestamp).getTime()-new Date(nt.timestamp).getTime()),C=H[0],Q=H[H.length-1],F=H.map(ue=>ue.sg_calibrated??ue.sg_raw).filter(ue=>ue!==null&&ue>=i&&ue<=n),se=H.map(ue=>ue.temp_calibrated??ue.temp_raw).filter(ue=>ue!==null&&ue>=a&&ue<=u);if(F.length===0)return null;const I=F[F.length-1],Me=F[0],_e=c(F,95),fe=c(F,5),ge=new Date(C.timestamp).getTime(),ae=new Date(Q.timestamp).getTime(),Se=(ae-ge)/(1e3*60*60*24),Ie=Se>0?(I-Me)/Se:0;let ye=null,de=null,Je=null,He=null;if(se.length>0){const ue=se[se.length-1],nt=se.reduce((Be,it)=>Be+it,0)/se.length,Ct=c(se,95),dt=c(se,5);ye=w(g)?_n(ue):ue,de=w(g)?_n(nt):nt,Je=w(g)?_n(Ct):Ct,He=w(g)?_n(dt):dt}let xe=0;const Qe=.001;for(let ue=F.length-2;ue>=0;ue--)if(Math.abs(F[ue]-I)>Qe){const nt=new Date(H[ue+1].timestamp).getTime();xe=(ae-nt)/(1e3*60*60*24);break}let Xe=null,je=null;const Ze=l.originalGravity??_e,wt=l.originalGravity===null;return Ze>1&&Ze>I&&(Xe=(Ze-I)/(Ze-1)*100,je=(Ze-I)*131.25),{currentSg:I,firstSg:Me,highSg:_e,lowSg:fe,currentTemp:ye,avgTemp:de,highTemp:Je,lowTemp:He,fermRate:Ie,durationDays:Se,daysAtCurrentSg:xe,apparentAttenuation:Xe,abv:je,ogIsEstimated:wt,effectiveOg:Ze}});function R(){Te(p,l.originalGravity?.toFixed(3)??"",!0),Te(v,!0),setTimeout(()=>w(k)?.focus(),0)}function N(){const _=w(p).trim();if(!_)l.onOgChange(null);else{const H=parseFloat(_);!isNaN(H)&&H>=.99&&H<=1.2&&l.onOgChange(H)}Te(v,!1)}function B(_){_.key==="Enter"?N():_.key==="Escape"&&Te(v,!1)}function y(_){return js(_)}function W(_){return`${_>=0?"+":""}${_.toFixed(4)}`}function A(_){return _<1?`${(_*24).toFixed(1)}h`:`${_.toFixed(1)}d`}function ie(_){return _===null?"--":_.toFixed(1)}function G(_){return _===null?"--":`${_.toFixed(1)}%`}var te=ya(),$=Us(te);{var oe=_=>{var H=lu(),C=D(H),Q=D(C),F=D(Q),se=D(F,!0);E(F);var I=Y(F,2),Me=Y(D(I),2),_e=D(Me,!0);E(Me),E(I);var fe=Y(I,2),ge=Y(D(fe),2),ae=D(ge,!0);E(ge),E(fe);var K=Y(fe,2),Se=Y(D(K),2),Ie=D(Se,!0);E(Se),E(K);var ye=Y(K,2),de=Y(D(ye),2),Je=D(de,!0);E(de),E(ye),E(Q);var He=Y(Q,2),xe=Y(D(He),2),Qe=Y(D(xe),2),Xe=D(Qe,!0),je=Y(Xe),Ze=D(je,!0);E(je),E(Qe),E(xe);var wt=Y(xe,2),ue=Y(D(wt),2),nt=D(ue,!0),Ct=Y(nt),dt=D(Ct,!0);E(Ct),E(ue),E(wt);var Be=Y(wt,2),it=Y(D(Be),2),Mt=D(it,!0),Rt=Y(Mt),re=D(Rt,!0);E(Rt),E(it),E(Be);var V=Y(Be,2),ke=Y(D(V),2),Ge=D(ke,!0),Vt=Y(Ge),It=D(Vt,!0);E(Vt),E(ke),E(V),E(He),E(C);var At=Y(C,2),Pt=D(At),P=Y(D(Pt),2);let q;var x=D(P);E(P),E(Pt);var S=Y(Pt,2),O=Y(D(S),2),ee=D(O,!0);E(O),E(S);var J=Y(S,2),X=Y(D(J),2),Ae=D(X,!0);E(X),E(J);var pe=Y(J,2),$e=Y(D(pe),2);{var at=vt=>{var De=Xc();Ta(De),De.__keydown=B,qs(De,ot=>Te(k,ot),()=>w(k)),ka("blur",De,N),Ea(De,()=>w(p),ot=>Te(p,ot)),Ee(vt,De)},Kt=vt=>{var De=eu();De.__click=R;var ot=D(De);let Ht;var Sl=D(ot,!0);E(ot);var yl=Y(ot,2);{var cn=ml=>{var nl=$c();Ee(ml,nl)};ft(yl,ml=>{w(M).ogIsEstimated&&ml(cn)})}Dl(2),E(De),Tt(ml=>{En(De,"title",w(M).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Ht=_l(ot,1,"stat-value svelte-3wi8ix",null,Ht,{estimated:w(M).ogIsEstimated}),me(Sl,ml)},[()=>y(w(M).effectiveOg)]),Ee(vt,De)};ft($e,vt=>{w(v)?vt(at):vt(Kt,!1)})}E(pe);var Jt=Y(pe,2),el=Y(D(Jt),2),ul=D(el,!0);E(el),E(Jt);var tl=Y(Jt,2),rt=Y(D(tl),2),he=D(rt,!0);E(rt),E(tl);var st=Y(tl,2);{var ll=vt=>{var De=tu(),ot=Y(D(De),2),Ht=D(ot,!0);E(ot),Dl(2),E(De),Tt((Sl,yl)=>{En(De,"title",`Estimated time until target FG (R=${Sl??""})`),me(Ht,yl)},[()=>d().r2.toFixed(2),()=>A(d().daysToFg)]),Ee(vt,De)};ft(st,vt=>{d()?.daysToFg!==null&&d()?.daysToFg!==void 0&&vt(ll)})}E(At),E(H),Tt((vt,De,ot,Ht,Sl,yl,cn,ml,nl,ns,Cl,An,fl)=>{me(se,w(z)==="SG"?"Gravity":w(z)==="P"?"Plato":"Brix"),me(_e,vt),me(ae,De),me(Ie,ot),me(Je,Ht),me(Xe,Sl),me(Ze,w(m)),me(nt,yl),me(dt,w(m)),me(Mt,cn),me(re,w(m)),me(Ge,ml),me(It,w(m)),q=_l(P,1,"stat-value rate svelte-3wi8ix",null,q,{fermenting:w(M).fermRate<0}),me(x,`${nl??""}/day`),me(ee,ns),me(Ae,Cl),me(ul,An),me(he,fl)},[()=>y(w(M).currentSg),()=>y(w(M).firstSg),()=>y(w(M).highSg),()=>y(w(M).lowSg),()=>ie(w(M).currentTemp),()=>ie(w(M).avgTemp),()=>ie(w(M).highTemp),()=>ie(w(M).lowTemp),()=>W(w(M).fermRate),()=>A(w(M).durationDays),()=>A(w(M).daysAtCurrentSg),()=>G(w(M).apparentAttenuation),()=>G(w(M).abv)]),Ee(_,H)},le=_=>{var H=nu();Ee(_,H)};ft($,_=>{w(M)?_(oe):_(le,!1)})}Ee(e,te),Kn()}qn(["keydown","click"]);var iu=Oe('<button type="button"> </button>'),au=Oe("<option> </option>"),ru=Oe('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ou=Oe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),cu=Oe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uu=Oe('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-1e832qd"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function fu(e,l){jn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Et(()=>Vn.config.smoothing_enabled),u=Et(()=>Vn.config.smoothing_samples),c=lt("UTC"),d=lt(0),v=lt(3),p=Bn(l,"originalGravity",3,null),k=Et(()=>Vn.config.temp_units==="C"),g=Et(Ks),m,z=null,M=lt(!0),R=lt(null),N=lt(24),B=lt(Oi([])),y=lt(Oi([])),W=lt(null);const A={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},ie="#facc15",G="rgba(250, 204, 21, 0.3)",te="#71717a",$="#a1a1aa",oe="rgba(255, 255, 255, 0.04)",le="#22d3ee",_="rgba(250, 204, 21, 0.5)",H="brewsignal_chart_trend_enabled";let C=lt(!0);function Q(P,q,x=1.01){const S=[];for(let he=0;he<P.length;he++)q[he]!==null&&S.push([P[he],q[he]]);if(S.length<10)return null;const O=S.length;let ee=0,J=0,X=0,Ae=0;for(const[he,st]of S)ee+=he,J+=st,X+=he*st,Ae+=he*he;const pe=O*Ae-ee*ee;if(Math.abs(pe)<1e-10)return null;const $e=(O*X-ee*J)/pe,at=(J-$e*ee)/O,Kt=J/O;let Jt=0,el=0;for(const[he,st]of S){const ll=$e*he+at;Jt+=(st-ll)**2,el+=(st-Kt)**2}const ul=el>0?1-Jt/el:0;let tl=null,rt=null;if($e<0&&ul>.3){const he=P[P.length-1],st=(x-at)/$e;st>he&&(rt=(st-he)/(1440*60),rt>0&&rt<60?tl=x:rt=null)}return{slope:$e,intercept:at,r2:ul,predictedFg:tl,daysToFg:rt}}function F(P,q){return P.map(x=>q.slope*x+q.intercept)}function se(P,q,x){const S=new Date(P*1e3);try{return x?S.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:q}):S.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:q})}catch(O){return console.warn("Invalid timezone:",q,O),x?S.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):S.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function I(P,q,x){const S=ie,O=A[l.tiltColor]||$;return{width:P,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(ee,J,X)=>{const Ae=(X-J)*.1||.005;return[J-Ae,X+Ae]}},temp:{auto:!0,range:(ee,J,X)=>{const Ae=X-J,pe=10;if(Ae<pe){const at=(X+J)/2;return[at-pe/2,at+pe/2]}const $e=Ae*.1;return[J-$e,X+$e]}}},axes:[{stroke:te,grid:{stroke:oe,width:1},ticks:{stroke:oe,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ee,J)=>J.map(X=>se(X,x,w(N)<=24))},{scale:"sg",stroke:S,grid:{stroke:oe,width:1},ticks:{stroke:oe,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ee,J)=>J.map(X=>js(X)),side:3},{scale:"temp",stroke:O,grid:{show:!1},ticks:{stroke:oe,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ee,J)=>J.map(X=>X.toFixed(0)+""),side:1}],series:[{},{label:w(g)==="SG"?"Gravity":w(g)==="P"?"Plato":"Brix",scale:"sg",stroke:S,width:2,fill:(ee,J)=>{const X=ee.ctx.createLinearGradient(0,ee.bbox.top,0,ee.bbox.top+ee.bbox.height);return X.addColorStop(0,G),X.addColorStop(1,"transparent"),X},points:{show:!1},paths:gt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:O,width:1.5,dash:[4,4],points:{show:!1},paths:gt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:le,width:1.5,dash:[2,4],points:{show:!1},paths:gt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:_,width:2,dash:[8,4],points:{show:!1},show:w(C)}]}}function Me(P,q){if(q<=1)return P;const x=[];for(let S=0;S<P.length;S++){const O=[],ee=Math.floor(q/2);for(let J=Math.max(0,S-ee);J<=Math.min(P.length-1,S+ee);J++){const X=P[J];X!==null&&O.push(X)}O.length>0?x.push(O.reduce((J,X)=>J+X,0)/O.length):x.push(null)}return x}function _e(P,q,x,S,O){if(P.length<=O)return[P,q,x,S];const ee=Math.ceil(P.length/O),J=[],X=[],Ae=[],pe=[];for(let $e=0;$e<P.length;$e+=ee){const at=Math.min($e+ee,P.length);let Kt=0,Jt=0,el=0,ul=0,tl=0,rt=0;for(let he=$e;he<at;he++)q[he]!==null&&(Kt+=q[he],Jt++),x[he]!==null&&(el+=x[he],ul++),S[he]!==null&&(tl+=S[he],rt++);J.push(P[Math.floor(($e+at-1)/2)]),X.push(Jt>0?Kt/Jt:null),Ae.push(ul>0?el/ul:null),pe.push(rt>0?tl/rt:null)}return[J,X,Ae,pe]}function fe(P){return!P.endsWith("Z")&&!P.match(/[+-]\d{2}:\d{2}$/)&&(P=P+"Z"),new Date(P).getTime()/1e3}function ge(P,q,x){if(P.length===0||q.length===0)return q.map(()=>null);const S=[...P].sort((J,X)=>fe(J.timestamp)-fe(X.timestamp)),O=S.map(J=>fe(J.timestamp)),ee=S.map(J=>J.temperature===null?null:x?J.temperature:J.temperature*9/5+32);return q.map(J=>{let X=null,Ae=null;for(let pe=0;pe<O.length;pe++)if(O[pe]<=J&&(X={time:O[pe],temp:ee[pe]}),O[pe]>=J&&Ae===null){Ae={time:O[pe],temp:ee[pe]};break}if(X&&Ae&&X.temp!==null&&Ae.temp!==null){if(X.time===Ae.time)return X.temp;const pe=(J-X.time)/(Ae.time-X.time);return X.temp+pe*(Ae.temp-X.temp)}return X!==null&&X.temp!==null?X.temp:Ae!==null&&Ae.temp!==null?Ae.temp:null})}function ae(P,q,x){const S=[...P].reverse();let O=[],ee=[],J=[];for(const at of S){O.push(fe(at.timestamp)),ee.push(at.sg_calibrated??at.sg_raw);const Kt=at.temp_calibrated??at.temp_raw;Kt!==null?J.push(x?_n(Kt):Kt):J.push(null)}let X=ge(q,O,x);w(a)&&w(u)>1&&(ee=Me(ee,w(u)),J=Me(J,w(u)),X=Me(X,w(u))),[O,ee,J,X]=_e(O,ee,J,X,500);const pe=Q(O,ee);Te(W,pe,!0);const $e=pe?F(O,pe):O.map(()=>null);return[O,ee,J,X,$e]}const K=3e4;async function Se(P=!1){const x=Date.now()-w(d);if(!(!P&&w(d)>0&&x<K)){Te(M,!0),Te(R,null);try{const[S,O]=await Promise.all([Qr(l.tiltId,w(N)),Xr(w(N)).catch(()=>[])]);Te(B,S,!0),Te(y,O,!0),Ie()}catch(S){Te(R,S instanceof Error?S.message:"Failed to load data",!0)}finally{Te(d,Date.now(),!0),Te(M,!1)}}}function Ie(){if(!m||w(B).length===0)return;const P=ae(w(B),w(y),w(k)),q=I(m.clientWidth,w(k),w(c));z&&z.destroy(),z=new gt(q,P,m)}function ye(){z&&m&&z.setSize({width:m.clientWidth,height:220})}let de=null;function Je(){if(de&&(clearInterval(de),de=null),w(v)>0){const P=w(v)*60*1e3;de=setInterval(()=>{w(M)||Se(!1)},P)}}Ys(async()=>{const P=localStorage.getItem(i);if(P!==null){const x=parseInt(P,10);Number.isNaN(x)||Te(v,x,!0)}const q=localStorage.getItem(H);q!==null&&Te(C,q==="true");try{const x=await fetch("/api/system/timezone");if(x.ok){const S=await x.json();Te(c,S.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await Se(!0),window.addEventListener("resize",ye),Je()}),Hr(()=>{z?.destroy(),window.removeEventListener("resize",ye),de&&clearInterval(de)}),Rs(()=>{w(k)!==void 0&&w(B).length>0&&m&&Ie()}),Rs(()=>{w(a),w(u),w(B).length>0&&m&&Ie()});function He(P){const q=Number(P.target.value);Te(v,q,!0),localStorage.setItem(i,String(q)),Je(),Se(!0)}function xe(){Te(C,!w(C)),localStorage.setItem(H,String(w(C))),z&&z.setSeries(4,{show:w(C)})}var Qe=uu(),Xe=D(Qe),je=D(Xe);Tn(je,21,()=>Zr,Hn,(P,q)=>{var x=iu();let S;x.__click=()=>{w(N)!==w(q).hours&&(Te(N,w(q).hours,!0),Se(!0))};var O=D(x,!0);E(x),Tt(()=>{S=_l(x,1,"range-btn svelte-1e832qd",null,S,{active:w(N)===w(q).hours}),me(O,w(q).label)}),Ee(P,x)}),E(je);var Ze=Y(je,2),wt=D(Ze),ue=Y(D(wt),2);ue.__change=He,Tn(ue,21,()=>n,Hn,(P,q)=>{var x=au(),S=D(x,!0);E(x);var O={};Tt(()=>{me(S,w(q).label),O!==(O=w(q).value)&&(x.value=(x.__value=w(q).value)??"")}),Ee(P,x)}),E(ue);var nt;$r(ue),E(wt);var Ct=Y(wt,2),dt=Y(D(Ct),2),Be=D(dt);Dl(2),E(dt);var it=Y(dt,4);let Mt;it.__click=xe;var Rt=D(it);$l(Rt,"background: rgba(250, 204, 21, 0.5);"),Dl(2),E(it),E(Ct),E(Ze),E(Xe);var re=Y(Xe,2),V=D(re);{var ke=P=>{var q=ru();Ee(P,q)};ft(V,P=>{w(M)&&P(ke)})}var Ge=Y(V,2);{var Vt=P=>{var q=ou(),x=Y(D(q),2);x.__click=()=>Se(!0),E(q),Ee(P,q)},It=P=>{var q=ya(),x=Us(q);{var S=O=>{var ee=cu();Ee(O,ee)};ft(x,O=>{w(B).length===0&&O(S)},!0)}Ee(P,q)};ft(Ge,P=>{w(R)?P(Vt):P(It,!1)})}E(re),qs(re,P=>m=P,()=>m);var At=Y(re,2);{var Pt=P=>{{let q=Et(()=>l.onOgChange??(()=>{})),x=Et(()=>w(W)?{predictedFg:w(W).predictedFg,daysToFg:w(W).daysToFg,r2:w(W).r2}:null);su(P,{get readings(){return w(B)},get originalGravity(){return p()},get onOgChange(){return w(q)},get trend(){return w(x)}})}};ft(At,P=>{w(B).length>0&&P(Pt)})}E(Qe),Tt(()=>{nt!==(nt=w(v))&&(ue.value=(ue.__value=w(v))??"",eo(ue,w(v))),$l(Be,`background: ${(A[l.tiltColor]||"var(--text-secondary)")??""};`),Mt=_l(it,1,"legend-item legend-toggle svelte-1e832qd",null,Mt,{"legend-disabled":!w(C)}),En(it,"title",w(C)?"Hide trend line":"Show trend line")}),Ee(e,Qe),Kn()}qn(["click","change"]);var du=Oe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),vu=Oe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate svelte-3twv7v"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-3twv7v"></path></svg></button>'),pu=Oe('<div class="w-1 rounded-sm transition-all svelte-3twv7v"></div>'),hu=Oe('<div class="pairing-badge svelte-3twv7v" title="Device not paired - readings not being logged"><svg class="w-3 h-3 svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" class="svelte-3twv7v"></path></svg> Unpaired</div>'),gu=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1 svelte-3twv7v"><span class="opacity-60 svelte-3twv7v">Raw:</span> <span class="ml-1 svelte-3twv7v"> </span> <span class="mx-1 opacity-40 svelte-3twv7v"></span> <span class="svelte-3twv7v"> </span></div>'),mu=Oe("<div><!></div>"),wu=Oe('<button type="button" class="batch-link svelte-3twv7v"><span class="batch-status-dot svelte-3twv7v"></span> <svg class="batch-link-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" class="svelte-3twv7v"></path></svg></button>'),_u=Oe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-3twv7v"></path></svg></button>'),xu=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5 svelte-3twv7v"></div> <div class="p-5 svelte-3twv7v"><div class="flex justify-between items-start mb-5 svelte-3twv7v"><div class="flex-1 min-w-0 mr-3 svelte-3twv7v"><!> <div class="flex items-center gap-2 mt-1 svelte-3twv7v"><span class="w-2 h-2 rounded-full svelte-3twv7v"></span> <span class="text-sm text-[var(--text-muted)] font-medium svelte-3twv7v"> </span></div></div> <div class="flex flex-col items-end gap-2 svelte-3twv7v"><div class="flex flex-col items-end gap-1 svelte-3twv7v"><div class="flex items-end gap-0.5 svelte-3twv7v"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono svelte-3twv7v"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4 svelte-3twv7v"><div class="rounded-md p-4 text-center svelte-3twv7v" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)] svelte-3twv7v"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium svelte-3twv7v"> </p></div> <div class="rounded-md p-4 text-center svelte-3twv7v" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)] svelte-3twv7v"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium svelte-3twv7v">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)] svelte-3twv7v"><div class="flex items-center gap-3 svelte-3twv7v"><span class="text-[11px] text-[var(--text-muted)] svelte-3twv7v"> </span> <!></div> <div class="flex items-center gap-2 svelte-3twv7v"><!> <div class="w-1.5 h-1.5 rounded-full svelte-3twv7v" style="background: var(--positive);"></div></div></div></div></div>');function bu(e,l){jn(l,!0);let i=Bn(l,"expanded",3,!1),n=Bn(l,"wide",3,!1),a=lt(null);Ys(async()=>{try{const x=l.tilt.color.toUpperCase();let S=await Gi(void 0,x,1);S.length===0&&(S=await Gi(void 0,`tilt-${l.tilt.color.toLowerCase()}`,1)),S.length>0&&Te(a,S.find(O=>O.status==="fermenting"||O.status==="conditioning")||S[0],!0)}catch(x){console.error("Failed to fetch linked batch:",x)}});let u=lt(!1);Rs(()=>{i()&&!w(u)&&Te(u,!0)});let c=lt(!1),d=lt(""),v=lt(null),p=lt(!1);function k(){Te(d,l.tilt.beer_name,!0),Te(c,!0),setTimeout(()=>w(v)?.focus(),0)}async function g(){if(w(p))return;const x=w(d).trim();if(!x||x===l.tilt.beer_name){Te(c,!1);return}Te(p,!0);const S=await qr(l.tilt.id,x);Te(p,!1),S&&Te(c,!1)}function m(x){x.key==="Enter"?g():x.key==="Escape"&&Te(c,!1)}async function z(x){await jr(l.tilt.id,x)}let M=Et(Ma),R=Et(Ks);const N={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function B(x){return js(x)}function y(x){return Jr(x)}function W(x){return x>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:x>=-60?{bars:3,color:"var(--positive)",label:"Good"}:x>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function A(x){const S=Math.floor((Date.now()-new Date(x).getTime())/1e3);if(S<10)return"just now";if(S<60)return`${S}s ago`;const O=Math.floor(S/60);if(O<60)return`${O}m ago`;const ee=Math.floor(O/60);return ee<24?`${ee}h ago`:`${Math.floor(ee/24)}d ago`}let ie=Et(()=>N[l.tilt.color]||"var(--tilt-black)"),G=Et(()=>W(l.tilt.rssi)),te=Et(()=>A(l.tilt.last_seen));var $=xu();let oe;var le=D($),_=Y(le,2),H=D(_),C=D(H),Q=D(C);{var F=x=>{var S=du();Ta(S),S.__keydown=m,qs(S,O=>Te(v,O),()=>w(v)),Tt(()=>S.disabled=w(p)),ka("blur",S,g),Ea(S,()=>w(d),O=>Te(d,O)),Ee(x,S)},se=x=>{var S=vu();S.__click=k;var O=D(S),ee=D(O,!0);E(O),Dl(2),E(S),Tt(()=>me(ee,l.tilt.beer_name)),Ee(x,S)};ft(Q,x=>{w(c)?x(F):x(se,!1)})}var I=Y(Q,2),Me=D(I),_e=Y(Me,2),fe=D(_e,!0);E(_e),E(I),E(C);var ge=Y(C,2),ae=D(ge),K=D(ae);Tn(K,20,()=>Array(4),Hn,(x,S,O)=>{var ee=pu();Tt(()=>$l(ee,`
									height: ${8+O*4}px;
									background: ${(O<w(G).bars?w(G).color:"var(--bg-hover)")??""};
									opacity: ${O<w(G).bars?1:.4};
								`)),Ee(x,ee)}),E(K);var Se=Y(K,2),Ie=D(Se);E(Se),E(ae);var ye=Y(ae,2);{var de=x=>{var S=hu();Ee(x,S)};ft(ye,x=>{l.tilt.paired||x(de)})}E(ge),E(H);var Je=Y(H,2),He=D(Je),xe=D(He),Qe=D(xe,!0),Xe=Y(Qe),je=D(Xe,!0);E(Xe),E(xe);var Ze=Y(xe,2),wt=D(Ze,!0);E(Ze),E(He);var ue=Y(He,2),nt=D(ue),Ct=D(nt,!0),dt=Y(Ct),Be=D(dt,!0);E(dt),E(nt),Dl(2),E(ue),E(Je);var it=Y(Je,2);{var Mt=x=>{var S=gu(),O=Y(D(S),2),ee=D(O,!0);E(O);var J=Y(O,4),X=D(J);E(J),E(S),Tt((Ae,pe)=>{me(ee,Ae),me(X,`${pe??""}${w(M)??""}`)},[()=>B(l.tilt.sg_raw),()=>y(l.tilt.temp_raw)]),Ee(x,S)};ft(it,x=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&x(Mt)})}var Rt=Y(it,2);{var re=x=>{var S=mu();let O;var ee=D(S);to(ee,()=>l.tilt.id,J=>{fu(J,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:z})}),E(S),Tt(()=>O=_l(S,1,"chart-section svelte-3twv7v",null,O,{hidden:!i()})),Ee(x,S)};ft(Rt,x=>{w(u)&&x(re)})}var V=Y(Rt,2),ke=D(V),Ge=D(ke),Vt=D(Ge);E(Ge);var It=Y(Ge,2);{var At=x=>{var S=wu();S.__click=()=>Kr(`/batches/${w(a).id}`);var O=D(S),ee=Y(O);Dl(),E(S),Tt(()=>{$l(O,`background: ${w(a).status==="fermenting"?"#f59e0b":w(a).status==="conditioning"?"#8b5cf6":"var(--text-muted)"}`),me(ee,` Batch #${w(a).batch_number??""} `)}),Ee(x,S)};ft(It,x=>{w(a)&&x(At)})}E(ke);var Pt=Y(ke,2),P=D(Pt);{var q=x=>{var S=_u();S.__click=function(...J){l.onToggleExpand?.apply(this,J)};var O=D(S);let ee;E(S),Tt(()=>{En(S,"aria-label",i()?"Collapse chart":"Expand chart"),ee=_l(O,0,"w-4 h-4 transition-transform svelte-3twv7v",null,ee,{"rotate-180":i()})}),Ee(x,S)};ft(P,x=>{l.onToggleExpand&&x(q)})}Dl(2),E(Pt),E(V),E(_),E($),Tt((x,S)=>{oe=_l($,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,oe,{expanded:i(),wide:n()}),$l(le,`background: ${w(ie)??""};`),$l(Me,`background: ${w(ie)??""};`),me(fe,l.tilt.color),En(ae,"title",`${w(G).label??""} signal (${l.tilt.rssi??""} dBm)`),me(Ie,`${l.tilt.rssi??""} dBm`),me(Qe,x),me(je,w(R)!=="SG"?w(R):""),me(wt,w(R)==="SG"?"Gravity":w(R)==="P"?"Plato":"Brix"),me(Ct,S),me(Be,w(M)),me(Vt,`Updated ${w(te)??""}`)},[()=>B(l.tilt.sg),()=>y(l.tilt.temp)]),Ee(e,$),Kn()}qn(["keydown","click"]);var Su=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),yu=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),ku=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Tu=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Eu=Oe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Mu=Oe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),Au=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Du=Oe("<div></div>"),Lu=Oe("<!> <!>",1);function Ku(e,l){jn(l,!0);let i=lt(!1),n=lt(!1);Ys(async()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),N=localStorage.getItem("brewsignal_alerts_dismissed_time");R==="true"&&N&&Date.now()-parseInt(N,10)<360*60*1e3&&Te(i,!0)});let a=Et(()=>Array.from(Ts.tilts.values())),u=lt(null);function c(R){Te(u,w(u)===R?null:R,!0)}function d(){Te(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function v(){Te(n,!w(n))}var p=Lu();Yr("1uha8ag",R=>{Br(()=>{Wr.title="Dashboard | BrewSignal"})});var k=Us(p);{var g=R=>{var N=Tu(),B=D(N),y=D(B),W=Y(D(y),4),A=D(W,!0);E(W),E(y);var ie=Y(y,2);ie.__click=d,E(B);var G=Y(B,2);{var te=le=>{var _=yu();Tn(_,21,()=>gn.alerts,Hn,(H,C)=>{var Q=Su();let F;var se=D(Q),I=D(se);E(se);var Me=Y(se,2),_e=D(Me,!0);E(Me),E(Q),Tt(()=>{F=_l(Q,1,"alert-item svelte-1uha8ag",null,F,{warning:w(C).level==="warning",critical:w(C).level==="critical"}),me(I,`${w(C).day??""}:`),me(_e,w(C).message)}),Ee(H,Q)}),E(_),Ee(le,_)};ft(G,le=>{w(n)||le(te)})}var $=Y(G,2);{var oe=le=>{var _=ku();_.__click=v;var H=D(_,!0);E(_),Tt(()=>me(H,w(n)?`Show ${gn.alerts.length} alerts`:"Show less")),Ee(le,_)};ft($,le=>{gn.alerts.length>3&&le(oe)})}E(N),Tt(()=>me(A,gn.alerts.length)),Ee(R,N)};ft(k,R=>{gn.alerts.length>0&&!w(i)&&R(g)})}var m=Y(k,2);{var z=R=>{var N=Au(),B=Y(D(N),4),y=D(B);{var W=te=>{var $=Gr("Waiting for Tilt hydrometers to broadcast...");Ee(te,$)},A=te=>{var $=Eu();Ee(te,$)};ft(y,te=>{Ts.connected?te(W):te(A,!1)})}E(B);var ie=Y(B,2);{var G=te=>{var $=Mu();Ee(te,$)};ft(ie,te=>{Ts.connected&&te(G)})}E(N),Ee(R,N)},M=R=>{var N=Du();let B;Tn(N,21,()=>w(a),y=>y.id,(y,W)=>{{let A=Et(()=>w(u)===w(W).id),ie=Et(()=>w(a).length===1);bu(y,{get tilt(){return w(W)},get expanded(){return w(A)},get wide(){return w(ie)},onToggleExpand:()=>c(w(W).id)})}}),E(N),Tt(()=>B=_l(N,1,"tilt-grid svelte-1uha8ag",null,B,{"single-tilt":w(a).length===1})),Ee(R,N)};ft(m,R=>{w(a).length===0?R(z):R(M,!1)})}Ee(e,p),Kn()}qn(["click"]);export{Ku as component};
