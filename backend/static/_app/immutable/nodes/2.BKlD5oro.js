import{d as io,f as je,s as vt,a as ze,c as ds,e as Ar,t as Dr}from"../chunks/BHvHOtuG.js";import{ab as Ts,ac as Nt,p as wi,ad as oo,s as et,aD as Lr,ae as is,g as Q,am as Zt,ah as ce,aj as re,al as qt,ag as Re,an as il,af as Ms,ak as kn,V as Cr,ai as Pr}from"../chunks/BeYMcFNd.js";import{e as Es,i as ro}from"../chunks/Cn7aBH5Z.js";import{i as wt}from"../chunks/Cd5u1CHp.js";import{c as xn,f as Rr,g as ao,b as Fr,r as zr,s as Vr,h as Nr}from"../chunks/D-gZUYAx.js";import{u as Hr,c as Or,d as Wr,t as Yt}from"../chunks/fLeet4l0.js";import{s as hs}from"../chunks/80fypgvT.js";import{s as Sn}from"../chunks/CoDAZAoR.js";import{b as Gr}from"../chunks/BperHIsi.js";import{b as uo,p as Br}from"../chunks/UOvl9E0t.js";const Ir=!0,qe="u-",Ur="uplot",Yr=qe+"hz",jr=qe+"vt",qr=qe+"title",Kr=qe+"wrap",Jr=qe+"under",Zr=qe+"over",Qr=qe+"axis",vl=qe+"off",$r=qe+"select",Xr=qe+"cursor-x",ea=qe+"cursor-y",ta=qe+"cursor-pt",la=qe+"legend",na=qe+"live",sa=qe+"inline",ia=qe+"series",oa=qe+"marker",_i=qe+"label",ra=qe+"value",ln="width",nn="height",en="top",bi="bottom",Nl="left",os="right",As="#000",xi=As+"0",rs="mousemove",Si="mousedown",as="mouseup",yi="mouseenter",ki="mouseleave",Ti="dblclick",aa="resize",ua="scroll",Mi="change",Tn="dppxchange",Ds="--",Ul=typeof window<"u",ms=Ul?document:null,Ol=Ul?window:null,fa=Ul?navigator:null;let _e,wn;function gs(){let e=devicePixelRatio;_e!=e&&(_e=e,wn&&ws(Mi,wn,gs),wn=matchMedia(`(min-resolution: ${_e-.001}dppx) and (max-resolution: ${_e+.001}dppx)`),wl(Mi,wn,gs),Ol.dispatchEvent(new CustomEvent(Tn)))}function gt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function vs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ce(e,l,i){e.style[l]=i+"px"}function zt(e,l,i,n){let o=ms.createElement(e);return l!=null&&gt(o,l),i?.insertBefore(o,n),o}function At(e,l){return zt("div",e,l)}const Ei=new WeakMap;function jt(e,l,i,n,o){let f="translate("+l+"px,"+i+"px)",u=Ei.get(e);f!=u&&(e.style.transform=f,Ei.set(e,f),l<0||i<0||l>n||i>o?gt(e,vl):vs(e,vl))}const Ai=new WeakMap;function Di(e,l,i){let n=l+i,o=Ai.get(e);n!=o&&(Ai.set(e,n),e.style.background=l,e.style.borderColor=i)}const Li=new WeakMap;function Ci(e,l,i,n){let o=l+""+i,f=Li.get(e);o!=f&&(Li.set(e,o),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ls={passive:!0},ca={...Ls,capture:!0};function wl(e,l,i,n){l.addEventListener(e,i,n?ca:Ls)}function ws(e,l,i,n){l.removeEventListener(e,i,Ls)}Ul&&gs();function Vt(e,l,i,n){let o;i=i||0,n=n||l.length-1;let f=n<=2147483647;for(;n-i>1;)o=f?i+n>>1:_t((i+n)/2),l[o]<e?i=o:n=o;return e-l[i]<=l[n]-e?i:n}function fo(e){return(i,n,o)=>{let f=-1,u=-1;for(let p=n;p<=o;p++)if(e(i[p])){f=p;break}for(let p=o;p>=n;p--)if(e(i[p])){u=p;break}return[f,u]}}const co=e=>e!=null,po=e=>e!=null&&e>0,An=fo(co),pa=fo(po);function da(e,l,i,n=0,o=!1){let f=o?pa:An,u=o?po:co;[l,i]=f(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let m=l;m<=i;m++){let w=e[m];u(w)&&(w<p?p=w:w>d&&(d=w))}return[p??Te,d??-Te]}function Dn(e,l,i,n){let o=Fi(e),f=Fi(l);e==l&&(o==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?Qt:ho,p=o==1?_t:Dt,d=f==1?Dt:_t,m=p(u(Ue(e))),w=d(u(Ue(l))),g=Wl(i,m),v=Wl(i,w);return i==10&&(m<0&&(g=Me(g,-m)),w<0&&(v=Me(v,-w))),n||i==2?(e=g*o,l=v*f):(e=wo(e,g),l=Ln(l,v)),[e,l]}function Cs(e,l,i,n){let o=Dn(e,l,i,n);return e==0&&(o[0]=0),l==0&&(o[1]=0),o}const Ps=.1,Pi={mode:3,pad:Ps},on={pad:0,soft:null,mode:0},ha={min:on,max:on};function Mn(e,l,i,n){return Cn(i)?Ri(e,l,i):(on.pad=i,on.soft=n?0:null,on.mode=n?3:0,Ri(e,l,ha))}function ve(e,l){return e??l}function ma(e,l,i){for(l=ve(l,0),i=ve(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ri(e,l,i){let n=i.min,o=i.max,f=ve(n.pad,0),u=ve(o.pad,0),p=ve(n.hard,-Te),d=ve(o.hard,Te),m=ve(n.soft,Te),w=ve(o.soft,-Te),g=ve(n.mode,0),v=ve(o.mode,0),D=l-e,L=Qt(D),F=at(Ue(e),Ue(l)),z=Qt(F),I=Ue(z-L);(D<1e-24||I>10)&&(D=0,(e==0||l==0)&&(D=1e-24,g==2&&m!=Te&&(f=0),v==2&&w!=-Te&&(u=0)));let b=D||F||1e3,R=Qt(b),k=Wl(10,_t(R)),le=b*(D==0?e==0?.1:1:f),E=Me(wo(e-le,k/10),24),J=e>=m&&(g==1||g==3&&E<=m||g==2&&E>=m)?m:Te,j=at(p,E<J&&e>=J?J:Ht(J,E)),ne=b*(D==0?l==0?.1:1:u),q=Me(Ln(l+ne,k/10),24),T=l<=w&&(v==1||v==3&&q>=w||v==2&&q<=w)?w:-Te,ee=Ht(d,q>T&&l<=T?T:at(T,q));return j==ee&&j==0&&(ee=100),[j,ee]}const ga=new Intl.NumberFormat(Ul?fa.language:"en-US"),Rs=e=>ga.format(e),bt=Math,yn=bt.PI,Ue=bt.abs,_t=bt.floor,Ie=bt.round,Dt=bt.ceil,Ht=bt.min,at=bt.max,Wl=bt.pow,Fi=bt.sign,Qt=bt.log10,ho=bt.log2,va=(e,l=1)=>bt.sinh(e)*l,us=(e,l=1)=>bt.asinh(e/l),Te=1/0;function zi(e){return(Qt((e^e>>31)-(e>>31))|0)+1}function _s(e,l,i){return Ht(at(e,l),i)}function mo(e){return typeof e=="function"}function he(e){return mo(e)?e:()=>e}const wa=()=>{},go=e=>e,vo=(e,l)=>l,_a=e=>null,Vi=e=>!0,Ni=(e,l)=>e==l,ba=/\.\d*?(?=9{6,}|0{6,})/gm,_l=e=>{if(bo(e)||ol.has(e))return e;const l=`${e}`,i=l.match(ba);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[o,f]=l.split("e");return+`${_l(o)}e${f}`}return Me(e,n)};function ml(e,l){return _l(Me(_l(e/l))*l)}function Ln(e,l){return _l(Dt(_l(e/l))*l)}function wo(e,l){return _l(_t(_l(e/l))*l)}function Me(e,l=0){if(bo(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return Ie(n)/i}const ol=new Map;function _o(e){return((""+e).split(".")[1]||"").length}function an(e,l,i,n){let o=[],f=n.map(_o);for(let u=l;u<i;u++){let p=Ue(u),d=Me(Wl(e,u),p);for(let m=0;m<n.length;m++){let w=e==10?+`${n[m]}e${u}`:n[m]*d,g=(u>=0?0:p)+(u>=f[m]?0:f[m]),v=e==10?w:Me(w,g);o.push(v),ol.set(v,g)}}return o}const rn={},Fs=[],Gl=[null,null],sl=Array.isArray,bo=Number.isInteger,xa=e=>e===void 0;function Hi(e){return typeof e=="string"}function Cn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Sa(e){return e!=null&&typeof e=="object"}const ya=Object.getPrototypeOf(Uint8Array),xo="__proto__";function Bl(e,l=Cn){let i;if(sl(e)){let n=e.find(o=>o!=null);if(sl(n)||l(n)){i=Array(e.length);for(let o=0;o<e.length;o++)i[o]=Bl(e[o],l)}else i=e.slice()}else if(e instanceof ya)i=e.slice();else if(l(e)){i={};for(let n in e)n!=xo&&(i[n]=Bl(e[n],l))}else i=e;return i}function Ge(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let o in n)o!=xo&&(Cn(e[o])?Ge(e[o],Bl(n[o])):e[o]=Bl(n[o]))}return e}const ka=0,Ta=1,Ma=2;function Ea(e,l,i){for(let n=0,o,f=-1;n<l.length;n++){let u=l[n];if(u>f){for(o=u-1;o>=0&&e[o]==null;)e[o--]=null;for(o=u+1;o<i&&e[o]==null;)e[f=o++]=null}}}function Aa(e,l){if(Ca(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Pa(u[0])||(u=La(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],m=d.length;for(let w=0;w<m;w++)i.add(d[w])}let n=[Array.from(i).sort((u,p)=>u-p)],o=n[0].length,f=new Map;for(let u=0;u<o;u++)f.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let m=1;m<p.length;m++){let w=p[m],g=Array(o).fill(void 0),v=l?l[u][m]:Ta,D=[];for(let L=0;L<w.length;L++){let F=w[L],z=f.get(d[L]);F===null?v!=ka&&(g[z]=F,v==Ma&&D.push(z)):g[z]=F}Ea(g,D,o),n.push(g)}}return n}const Da=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function La(e){let l=e[0],i=l.length,n=Array(i);for(let f=0;f<n.length;f++)n[f]=f;n.sort((f,u)=>l[f]-l[u]);let o=[];for(let f=0;f<e.length;f++){let u=e[f],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];o.push(p)}return o}function Ca(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let o=e[n][0];if(o.length!=i)return!1;if(o!=l){for(let f=0;f<i;f++)if(o[f]!=l[f])return!1}}return!0}function Pa(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,o=i-1;for(;n<=o&&e[n]==null;)n++;for(;o>=n&&e[o]==null;)o--;if(o<=n)return!0;const f=at(1,_t((o-n+1)/l));for(let u=e[n],p=n+f;p<=o;p+=f){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const So=["January","February","March","April","May","June","July","August","September","October","November","December"],yo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function ko(e){return e.slice(0,3)}const Ra=yo.map(ko),Fa=So.map(ko),za={MMMM:So,MMM:Fa,WWWW:yo,WWW:Ra};function tn(e){return(e<10?"0":"")+e}function Va(e){return(e<10?"00":e<100?"0":"")+e}const Na={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>tn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>tn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>tn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>tn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>tn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Va(e.getMilliseconds())};function zs(e,l){l=l||za;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,o;for(;o=n.exec(e);)i.push(o[0][0]=="{"?Na[o[1]]:o[0]);return f=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](f,l);return u}}const Ha=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Oa(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ha?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const To=e=>e%1==0,En=[1,2,2.5,5],Wa=an(10,-32,0,En),Mo=an(10,0,32,En),Ga=Mo.filter(To),gl=Wa.concat(Mo),Vs=`
`,Eo="{YYYY}",Oi=Vs+Eo,Ao="{M}/{D}",sn=Vs+Ao,_n=sn+"/{YY}",Do="{aa}",Ba="{h}:{mm}",Hl=Ba+Do,Wi=Vs+Hl,Gi=":{ss}",be=null;function Lo(e){let l=e*1e3,i=l*60,n=i*60,o=n*24,f=o*30,u=o*365,d=(e==1?an(10,0,3,En).filter(To):an(10,-3,0,En)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,o,o*2,o*3,o*4,o*5,o*6,o*7,o*8,o*9,o*10,o*15,f,f*2,f*3,f*4,f*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const m=[[u,Eo,be,be,be,be,be,be,1],[o*28,"{MMM}",Oi,be,be,be,be,be,1],[o,Ao,Oi,be,be,be,be,be,1],[n,"{h}"+Do,_n,be,sn,be,be,be,1],[i,Hl,_n,be,sn,be,be,be,1],[l,Gi,_n+" "+Hl,be,sn+" "+Hl,be,Wi,be,1],[e,Gi+".{fff}",_n+" "+Hl,be,sn+" "+Hl,be,Wi,be,1]];function w(g){return(v,D,L,F,z,I)=>{let b=[],R=z>=u,k=z>=f&&z<u,le=g(L),E=Me(le*e,3),J=fs(le.getFullYear(),R?0:le.getMonth(),k||R?1:le.getDate()),j=Me(J*e,3);if(k||R){let ne=k?z/f:0,q=R?z/u:0,T=E==j?E:Me(fs(J.getFullYear()+q,J.getMonth()+ne,1)*e,3),ee=new Date(Ie(T/e)),V=ee.getFullYear(),Z=ee.getMonth();for(let U=0;T<=F;U++){let ae=fs(V+q*U,Z+ne*U,1),G=ae-g(Me(ae*e,3));T=Me((+ae+G)*e,3),T<=F&&b.push(T)}}else{let ne=z>=o?o:z,q=_t(L)-_t(E),T=j+q+Ln(E-j,ne);b.push(T);let ee=g(T),V=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,Z=z/n,U=v.axes[D]._space,ae=I/U;for(;T=Me(T+z,e==1?0:3),!(T>F);)if(Z>1){let G=_t(Me(V+Z,6))%24,pe=g(T).getHours()-G;pe>1&&(pe=-1),T-=pe*n,V=(V+Z)%24;let me=b[b.length-1];Me((T-me)/z,3)*ae>=.7&&b.push(T)}else b.push(T)}return b}}return[d,m,w]}const[Ia,Ua,Ya]=Lo(1),[ja,qa,Ka]=Lo(.001);an(2,-53,53,[1]);function Bi(e,l){return e.map(i=>i.map((n,o)=>o==0||o==8||n==null?n:l(o==1||i[8]==0?n:i[1]+n)))}function Ii(e,l){return(i,n,o,f,u)=>{let p=l.find(L=>u>=L[0])||l[l.length-1],d,m,w,g,v,D;return n.map(L=>{let F=e(L),z=F.getFullYear(),I=F.getMonth(),b=F.getDate(),R=F.getHours(),k=F.getMinutes(),le=F.getSeconds(),E=z!=d&&p[2]||I!=m&&p[3]||b!=w&&p[4]||R!=g&&p[5]||k!=v&&p[6]||le!=D&&p[7]||p[1];return d=z,m=I,w=b,g=R,v=k,D=le,E(F)})}}function Ja(e,l){let i=zs(l);return(n,o,f,u,p)=>o.map(d=>i(e(d)))}function fs(e,l,i){return new Date(e,l,i)}function Ui(e,l){return l(e)}const Za="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Yi(e,l){return(i,n,o,f)=>f==null?Ds:l(e(n))}function Qa(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function $a(e,l){return e.series[l].fill(e,l)}const Xa={show:!0,live:!0,isolate:!1,mount:wa,markers:{show:!0,width:2,stroke:Qa,fill:$a,dash:"solid"},idx:null,idxs:null,values:[]};function eu(e,l){let i=e.cursor.points,n=At(),o=i.size(e,l);Ce(n,ln,o),Ce(n,nn,o);let f=o/-2;Ce(n,"marginLeft",f),Ce(n,"marginTop",f);let u=i.width(e,l,o);return u&&Ce(n,"borderWidth",u),n}function tu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function lu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function nu(e,l){return e.series[l].points.size}const cs=[0,0];function su(e,l,i){return cs[0]=l,cs[1]=i,cs}function bn(e,l,i,n=!0){return o=>{o.button==0&&(!n||o.target==l)&&i(o)}}function ps(e,l,i,n=!0){return o=>{(!n||o.target==l)&&i(o)}}const iu={show:!0,x:!0,y:!0,lock:!1,move:su,points:{one:!1,show:eu,size:nu,width:0,stroke:lu,fill:tu},bind:{mousedown:bn,mouseup:bn,click:bn,dblclick:bn,mousemove:ps,mouseleave:ps,mouseenter:ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,o)=>n-o,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Co={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ns=Ge({},Co,{filter:vo}),Po=Ge({},Ns,{size:10}),Ro=Ge({},Co,{show:!1}),Hs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Fo="bold "+Hs,zo=1.5,ji={show:!0,scale:"x",stroke:As,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:2,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0},ou="Value",ru="Time",qi={show:!0,scale:"x",auto:!1,sorted:1,min:Te,max:-Te,idxs:[]};function au(e,l,i,n,o){return l.map(f=>f==null?"":Rs(f))}function uu(e,l,i,n,o,f,u){let p=[],d=ol.get(o)||0;i=u?i:Me(Ln(i,o),d);for(let m=i;m<=n;m=Me(m+o,d))p.push(Object.is(m,-0)?0:m);return p}function bs(e,l,i,n,o,f,u){const p=[],d=e.scales[e.axes[l].scale].log,m=d==10?Qt:ho,w=_t(m(i));o=Wl(d,w),d==10&&(o=gl[Vt(o,gl)]);let g=i,v=o*d;d==10&&(v=gl[Vt(v,gl)]);do p.push(g),g=g+o,d==10&&!ol.has(g)&&(g=Me(g,ol.get(o))),g>=v&&(o=g,v=o*d,d==10&&(v=gl[Vt(v,gl)]));while(g<=n);return p}function fu(e,l,i,n,o,f,u){let d=e.scales[e.axes[l].scale].asinh,m=n>d?bs(e,l,at(d,i),n,o):[d],w=n>=0&&i<=0?[0]:[];return(i<-d?bs(e,l,at(d,-n),-i,o):[d]).reverse().map(v=>-v).concat(w,m)}const Vo=/./,cu=/[12357]/,pu=/[125]/,Ki=/1/,xs=(e,l,i,n)=>e.map((o,f)=>l==4&&o==0||f%n==0&&i.test(o.toExponential()[o<0?1:0])?o:null);function du(e,l,i,n,o){let f=e.axes[i],u=f.scale,p=e.scales[u],d=e.valToPos,m=f._space,w=d(10,u),g=d(9,u)-w>=m?Vo:d(7,u)-w>=m?cu:d(5,u)-w>=m?pu:Ki;if(g==Ki){let v=Ue(d(1,u)-w);if(v<m)return xs(l.slice().reverse(),p.distr,g,Dt(m/v)).reverse()}return xs(l,p.distr,g,1)}function hu(e,l,i,n,o){let f=e.axes[i],u=f.scale,p=f._space,d=e.valToPos,m=Ue(d(1,u)-d(2,u));return m<p?xs(l.slice().reverse(),3,Vo,Dt(p/m)).reverse():l}function mu(e,l,i,n){return n==null?Ds:l==null?"":Rs(l)}const Ji={show:!0,scale:"y",stroke:As,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Fo,side:3,grid:Ns,ticks:Po,border:Ro,font:Hs,lineGap:zo,rotate:0};function gu(e,l){let i=3+(e||1)*2;return Me(i*l,3)}function vu(e,l){let{scale:i,idxs:n}=e.series[0],o=e._data[0],f=e.valToPos(o[n[0]],i,!0),u=e.valToPos(o[n[1]],i,!0),p=Ue(u-f),d=e.series[l],m=p/(d.points.space*_e);return n[1]-n[0]<=m}const Zi={scale:null,auto:!0,sorted:0,min:Te,max:-Te},No=(e,l,i,n,o)=>o,Qi={show:!0,auto:!0,sorted:0,gaps:No,alpha:1,facets:[Ge({},Zi,{scale:"x"}),Ge({},Zi,{scale:"y"})]},$i={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:No,alpha:1,points:{show:vu,filter:null},values:null,min:Te,max:-Te,idxs:[],path:null,clip:null};function wu(e,l,i,n,o){return i/10}const Ho={time:Ir,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},_u=Ge({},Ho,{time:!1,ori:1}),Xi={};function Oo(e,l){let i=Xi[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(o=>o!=n)},pub(n,o,f,u,p,d,m){for(let w=0;w<i.plots.length;w++)i.plots[w]!=o&&i.plots[w].pub(n,o,f,u,p,d,m)}},e!=null&&(Xi[e]=i)),i}const Il=1,Ss=2;function bl(e,l,i){const n=e.mode,o=e.series[l],f=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=f[0],m=n==2?f[1]:f[l],w=n==2?u[o.facets[0].scale]:u[e.series[0].scale],g=n==2?u[o.facets[1].scale]:u[o.scale],v=p.left,D=p.top,L=p.width,F=p.height,z=e.valToPosH,I=e.valToPosV;return w.ori==0?i(o,d,m,w,g,z,I,v,D,L,F,Rn,Yl,zn,Go,Io):i(o,d,m,w,g,I,z,D,v,F,L,Fn,jl,Gs,Bo,Uo)}function Os(e,l){let i=0,n=0,o=ve(e.bands,Fs);for(let f=0;f<o.length;f++){let u=o[f];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function bu(e,l,i,n,o){let f=e.mode,u=e.series[l],p=f==2?u.facets[1].scale:u.scale,d=e.scales[p];return o==-1?d.min:o==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function $t(e,l,i,n,o,f){return bl(e,l,(u,p,d,m,w,g,v,D,L,F,z)=>{let I=u.pxRound;const b=m.dir*(m.ori==0?1:-1),R=m.ori==0?Yl:jl;let k,le;b==1?(k=i,le=n):(k=n,le=i);let E=I(g(p[k],m,F,D)),J=I(v(d[k],w,z,L)),j=I(g(p[le],m,F,D)),ne=I(v(f==1?w.max:w.min,w,z,L)),q=new Path2D(o);return R(q,j,ne),R(q,E,ne),R(q,E,J),q})}function Pn(e,l,i,n,o,f){let u=null;if(e.length>0){u=new Path2D;const p=l==0?zn:Gs;let d=i;for(let g=0;g<e.length;g++){let v=e[g];if(v[1]>v[0]){let D=v[0]-d;D>0&&p(u,d,n,D,n+f),d=v[1]}}let m=i+o-d,w=10;m>0&&p(u,d,n-w/2,m,n+f+w)}return u}function xu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Ws(e,l,i,n,o,f,u){let p=[],d=e.length;for(let m=o==1?i:n;m>=i&&m<=n;m+=o)if(l[m]===null){let g=m,v=m;if(o==1)for(;++m<=n&&l[m]===null;)v=m;else for(;--m>=i&&l[m]===null;)v=m;let D=f(e[g]),L=v==g?D:f(e[v]),F=g-o;D=u<=0&&F>=0&&F<d?f(e[F]):D;let I=v+o;L=u>=0&&I>=0&&I<d?f(e[I]):L,L>=D&&p.push([D,L])}return p}function eo(e){return e==0?go:e==1?Ie:l=>ml(l,e)}function Wo(e){let l=e==0?Rn:Fn,i=e==0?(o,f,u,p,d,m)=>{o.arcTo(f,u,p,d,m)}:(o,f,u,p,d,m)=>{o.arcTo(u,f,d,p,m)},n=e==0?(o,f,u,p,d)=>{o.rect(f,u,p,d)}:(o,f,u,p,d)=>{o.rect(u,f,d,p)};return(o,f,u,p,d,m=0,w=0)=>{m==0&&w==0?n(o,f,u,p,d):(m=Ht(m,p/2,d/2),w=Ht(w,p/2,d/2),l(o,f+m,u),i(o,f+p,u,f+p,u+d,m),i(o,f+p,u+d,f,u+d,w),i(o,f,u+d,f,u,w),i(o,f,u,f+p,u,m),o.closePath())}}const Rn=(e,l,i)=>{e.moveTo(l,i)},Fn=(e,l,i)=>{e.moveTo(i,l)},Yl=(e,l,i)=>{e.lineTo(l,i)},jl=(e,l,i)=>{e.lineTo(i,l)},zn=Wo(0),Gs=Wo(1),Go=(e,l,i,n,o,f)=>{e.arc(l,i,n,o,f)},Bo=(e,l,i,n,o,f)=>{e.arc(i,l,n,o,f)},Io=(e,l,i,n,o,f,u)=>{e.bezierCurveTo(l,i,n,o,f,u)},Uo=(e,l,i,n,o,f,u)=>{e.bezierCurveTo(i,l,o,n,u,f)};function Yo(e){return(l,i,n,o,f)=>bl(l,i,(u,p,d,m,w,g,v,D,L,F,z)=>{let{pxRound:I,points:b}=u,R,k;m.ori==0?(R=Rn,k=Go):(R=Fn,k=Bo);const le=Me(b.width*_e,3);let E=(b.size-b.width)/2*_e,J=Me(E*2,3),j=new Path2D,ne=new Path2D,{left:q,top:T,width:ee,height:V}=l.bbox;zn(ne,q-J,T-J,ee+J*2,V+J*2);const Z=U=>{if(d[U]!=null){let ae=I(g(p[U],m,F,D)),G=I(v(d[U],w,z,L));R(j,ae+E,G),k(j,ae,G,E,0,yn*2)}};if(f)f.forEach(Z);else for(let U=n;U<=o;U++)Z(U);return{stroke:le>0?j:null,fill:j,clip:ne,flags:Il|Ss}})}function jo(e){return(l,i,n,o,f,u)=>{n!=o&&(f!=n&&u!=n&&e(l,i,n),f!=o&&u!=o&&e(l,i,o),e(l,i,u))}}const Su=jo(Yl),yu=jo(jl);function qo(e){const l=ve(e?.alignGaps,0);return(i,n,o,f)=>bl(i,n,(u,p,d,m,w,g,v,D,L,F,z)=>{[o,f]=An(d,o,f);let I=u.pxRound,b=V=>I(g(V,m,F,D)),R=V=>I(v(V,w,z,L)),k,le;m.ori==0?(k=Yl,le=Su):(k=jl,le=yu);const E=m.dir*(m.ori==0?1:-1),J={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},j=J.stroke;let ne=!1;if(f-o>=F*4){let V=S=>i.posToVal(S,m.key,!0),Z=null,U=null,ae,G,He,Se=b(p[E==1?o:f]),pe=b(p[o]),me=b(p[f]),M=V(E==1?pe+1:me-1);for(let S=E==1?o:f;S>=o&&S<=f;S+=E){let se=p[S],K=(E==1?se<M:se>M)?Se:b(se),N=d[S];K==Se?N!=null?(G=N,Z==null?(k(j,K,R(G)),ae=Z=U=G):G<Z?Z=G:G>U&&(U=G)):N===null&&(ne=!0):(Z!=null&&le(j,Se,R(Z),R(U),R(ae),R(G)),N!=null?(G=N,k(j,K,R(G)),Z=U=ae=G):(Z=U=null,N===null&&(ne=!0)),Se=K,M=V(Se+E))}Z!=null&&Z!=U&&He!=Se&&le(j,Se,R(Z),R(U),R(ae),R(G))}else for(let V=E==1?o:f;V>=o&&V<=f;V+=E){let Z=d[V];Z===null?ne=!0:Z!=null&&k(j,b(p[V]),R(Z))}let[T,ee]=Os(i,n);if(u.fill!=null||T!=0){let V=J.fill=new Path2D(j),Z=u.fillTo(i,n,u.min,u.max,T),U=R(Z),ae=b(p[o]),G=b(p[f]);E==-1&&([G,ae]=[ae,G]),k(V,G,U),k(V,ae,U)}if(!u.spanGaps){let V=[];ne&&V.push(...Ws(p,d,o,f,E,b,l)),J.gaps=V=u.gaps(i,n,o,f,V),J.clip=Pn(V,m.ori,D,L,F,z)}return ee!=0&&(J.band=ee==2?[$t(i,n,o,f,j,-1),$t(i,n,o,f,j,1)]:$t(i,n,o,f,j,ee)),J})}function ku(e){const l=ve(e.align,1),i=ve(e.ascDesc,!1),n=ve(e.alignGaps,0),o=ve(e.extend,!1);return(f,u,p,d)=>bl(f,u,(m,w,g,v,D,L,F,z,I,b,R)=>{[p,d]=An(g,p,d);let k=m.pxRound,{left:le,width:E}=f.bbox,J=pe=>k(L(pe,v,b,z)),j=pe=>k(F(pe,D,R,I)),ne=v.ori==0?Yl:jl;const q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Il},T=q.stroke,ee=v.dir*(v.ori==0?1:-1);let V=j(g[ee==1?p:d]),Z=J(w[ee==1?p:d]),U=Z,ae=Z;o&&l==-1&&(ae=le,ne(T,ae,V)),ne(T,Z,V);for(let pe=ee==1?p:d;pe>=p&&pe<=d;pe+=ee){let me=g[pe];if(me==null)continue;let M=J(w[pe]),S=j(me);l==1?ne(T,M,V):ne(T,U,S),ne(T,M,S),V=S,U=M}let G=U;o&&l==1&&(G=le+E,ne(T,G,V));let[He,Se]=Os(f,u);if(m.fill!=null||He!=0){let pe=q.fill=new Path2D(T),me=m.fillTo(f,u,m.min,m.max,He),M=j(me);ne(pe,G,M),ne(pe,ae,M)}if(!m.spanGaps){let pe=[];pe.push(...Ws(w,g,p,d,ee,J,n));let me=m.width*_e/2,M=i||l==1?me:-me,S=i||l==-1?-me:me;pe.forEach(se=>{se[0]+=M,se[1]+=S}),q.gaps=pe=m.gaps(f,u,p,d,pe),q.clip=Pn(pe,v.ori,z,I,b,R)}return Se!=0&&(q.band=Se==2?[$t(f,u,p,d,T,-1),$t(f,u,p,d,T,1)]:$t(f,u,p,d,T,Se)),q})}function to(e,l,i,n,o,f,u=Te){if(e.length>1){let p=null;for(let d=0,m=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let w=Ue(e[d]-e[p]);w<m&&(m=w,u=Ue(i(e[d],n,o,f)-i(e[p],n,o,f)))}p=d}}return u}function Tu(e){e=e||rn;const l=ve(e.size,[.6,Te,1]),i=e.align||0,n=e.gap||0;let o=e.radius;o=o==null?[0,0]:typeof o=="number"?[o,0]:o;const f=he(o),u=1-l[0],p=ve(l[1],Te),d=ve(l[2],1),m=ve(e.disp,rn),w=ve(e.each,D=>{}),{fill:g,stroke:v}=m;return(D,L,F,z)=>bl(D,L,(I,b,R,k,le,E,J,j,ne,q,T)=>{let ee=I.pxRound,V=i,Z=n*_e,U=p*_e,ae=d*_e,G,He;k.ori==0?[G,He]=f(D,L):[He,G]=f(D,L);const Se=k.dir*(k.ori==0?1:-1);let pe=k.ori==0?zn:Gs,me=k.ori==0?w:(C,ye,Be,xl,rl,Ot,al)=>{w(C,ye,Be,rl,xl,al,Ot)},M=ve(D.bands,Fs).find(C=>C.series[0]==L),S=M!=null?M.dir:0,se=I.fillTo(D,L,I.min,I.max,S),fe=ee(J(se,le,T,ne)),K,N,W,H=q,$=ee(I.width*_e),ue=!1,Ee=null,Oe=null,st=null,xt=null;g!=null&&($==0||v!=null)&&(ue=!0,Ee=g.values(D,L,F,z),Oe=new Map,new Set(Ee).forEach(C=>{C!=null&&Oe.set(C,new Path2D)}),$>0&&(st=v.values(D,L,F,z),xt=new Map,new Set(st).forEach(C=>{C!=null&&xt.set(C,new Path2D)})));let{x0:St,size:Lt}=m;if(St!=null&&Lt!=null){V=1,b=St.values(D,L,F,z),St.unit==2&&(b=b.map(Be=>D.posToVal(j+Be*q,k.key,!0)));let C=Lt.values(D,L,F,z);Lt.unit==2?N=C[0]*q:N=E(C[0],k,q,j)-E(0,k,q,j),H=to(b,R,E,k,q,j,H),W=H-N+Z}else H=to(b,R,E,k,q,j,H),W=H*u+Z,N=H-W;W<1&&(W=0),$>=N/2&&($=0),W<5&&(ee=go);let Kt=W>0,X=H-W-(Kt?$:0);N=ee(_s(X,ae,U)),K=(V==0?N/2:V==Se?0:N)-V*Se*((V==0?Z/2:0)+(Kt?$/2:0));const B={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},xe=ue?null:new Path2D;let Fe=null;if(M!=null)Fe=D.data[M.series[1]];else{let{y0:C,y1:ye}=m;C!=null&&ye!=null&&(R=ye.values(D,L,F,z),Fe=C.values(D,L,F,z))}let ct=G*N,oe=He*N;for(let C=Se==1?F:z;C>=F&&C<=z;C+=Se){let ye=R[C];if(ye==null)continue;if(Fe!=null){let ut=Fe[C]??0;if(ye-ut==0)continue;fe=J(ut,le,T,ne)}let Be=k.distr!=2||m!=null?b[C]:C,xl=E(Be,k,q,j),rl=J(ve(ye,se),le,T,ne),Ot=ee(xl-K),al=ee(at(rl,fe)),pt=ee(Ht(rl,fe)),yt=al-pt;if(ye!=null){let ut=ye<0?oe:ct,Ct=ye<0?ct:oe;ue?($>0&&st[C]!=null&&pe(xt.get(st[C]),Ot,pt+_t($/2),N,at(0,yt-$),ut,Ct),Ee[C]!=null&&pe(Oe.get(Ee[C]),Ot,pt+_t($/2),N,at(0,yt-$),ut,Ct)):pe(xe,Ot,pt+_t($/2),N,at(0,yt-$),ut,Ct),me(D,L,C,Ot-$/2,pt,N+$,yt)}}return $>0?B.stroke=ue?xt:xe:ue||(B._fill=I.width==0?I._fill:I._stroke??I._fill,B.width=0),B.fill=ue?Oe:xe,B})}function Mu(e,l){const i=ve(l?.alignGaps,0);return(n,o,f,u)=>bl(n,o,(p,d,m,w,g,v,D,L,F,z,I)=>{[f,u]=An(m,f,u);let b=p.pxRound,R=G=>b(v(G,w,z,L)),k=G=>b(D(G,g,I,F)),le,E,J;w.ori==0?(le=Rn,J=Yl,E=Io):(le=Fn,J=jl,E=Uo);const j=w.dir*(w.ori==0?1:-1);let ne=R(d[j==1?f:u]),q=ne,T=[],ee=[];for(let G=j==1?f:u;G>=f&&G<=u;G+=j)if(m[G]!=null){let Se=d[G],pe=R(Se);T.push(q=pe),ee.push(k(m[G]))}const V={stroke:e(T,ee,le,J,E,b),fill:null,clip:null,band:null,gaps:null,flags:Il},Z=V.stroke;let[U,ae]=Os(n,o);if(p.fill!=null||U!=0){let G=V.fill=new Path2D(Z),He=p.fillTo(n,o,p.min,p.max,U),Se=k(He);J(G,q,Se),J(G,ne,Se)}if(!p.spanGaps){let G=[];G.push(...Ws(d,m,f,u,j,R,i)),V.gaps=G=p.gaps(n,o,f,u,G),V.clip=Pn(G,w.ori,L,F,z,I)}return ae!=0&&(V.band=ae==2?[$t(n,o,f,u,Z,-1),$t(n,o,f,u,Z,1)]:$t(n,o,f,u,Z,ae)),V})}function Eu(e){return Mu(Au,e)}function Au(e,l,i,n,o,f){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),m=Array(u-1),w=Array(u-1),g=Array(u-1);for(let v=0;v<u-1;v++)w[v]=l[v+1]-l[v],g[v]=e[v+1]-e[v],m[v]=w[v]/g[v];d[0]=m[0];for(let v=1;v<u-1;v++)m[v]===0||m[v-1]===0||m[v-1]>0!=m[v]>0?d[v]=0:(d[v]=3*(g[v-1]+g[v])/((2*g[v]+g[v-1])/m[v-1]+(g[v]+2*g[v-1])/m[v]),isFinite(d[v])||(d[v]=0));d[u-1]=m[u-2];for(let v=0;v<u-1;v++)o(p,e[v]+g[v]/3,l[v]+d[v]*g[v]/3,e[v+1]-g[v]/3,l[v+1]-d[v+1]*g[v]/3,e[v+1],l[v+1])}return p}const ys=new Set;function lo(){for(let e of ys)e.syncRect(!0)}Ul&&(wl(aa,Ol,lo),wl(ua,Ol,lo,!0),wl(Tn,Ol,()=>{Ye.pxRatio=_e}));const Du=qo(),Lu=Yo();function no(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((f,u)=>ks(f,u,l,i))}function Cu(e,l){return e.map((i,n)=>n==0?{}:Ge({},l,i))}function ks(e,l,i,n){return Ge({},l==0?i:n,e)}function Ko(e,l,i){return l==null?Gl:[l,i]}const Pu=Ko;function Ru(e,l,i){return l==null?Gl:Mn(l,i,Ps,!0)}function Jo(e,l,i,n){return l==null?Gl:Dn(l,i,e.scales[n].log,!1)}const Fu=Jo;function Zo(e,l,i,n){return l==null?Gl:Cs(l,i,e.scales[n].log,!1)}const zu=Zo;function Vu(e,l,i,n,o){let f=at(zi(e),zi(l)),u=l-e,p=Vt(o/n*u,i);do{let d=i[p],m=n*d/u;if(m>=o&&f+(d<5?ol.get(d):0)<=17)return[d,m]}while(++p<i.length);return[0,0]}function so(e){let l,i;return e=e.replace(/(\d+)px/,(n,o)=>(l=Ie((i=+o)*_e))+"px"),[e,l,i]}function Nu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Me(l[2]*_e,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Ye(e,l,i){const n={mode:ve(e.mode,1)},o=n.mode;function f(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?1-c:c)}function u(t,s,r,a){let c=s.valToPct(t);return a+r*(s.dir==-1?c:1-c)}function p(t,s,r,a){return s.ori==0?f(t,s,r,a):u(t,s,r,a)}n.valToPosH=f,n.valToPosV=u;let d=!1;n.status=0;const m=n.root=At(Ur);if(e.id!=null&&(m.id=e.id),gt(m,e.class),e.title){let t=At(qr,m);t.textContent=e.title}const w=zt("canvas"),g=n.ctx=w.getContext("2d"),v=At(Kr,m);wl("click",v,t=>{t.target===L&&(Ae!=Pl||Pe!=Rl)&&lt.click(n,t)},!0);const D=n.under=At(Jr,v);v.appendChild(w);const L=n.over=At(Zr,v);e=Bl(e);const F=+ve(e.pxAlign,1),z=eo(F);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const I=e.ms||.001,b=n.series=o==1?no(e.series||[],qi,$i,!1):Cu(e.series||[null],Qi),R=n.axes=no(e.axes||[],ji,Ji,!0),k=n.scales={},le=n.bands=e.bands||[];le.forEach(t=>{t.fill=he(t.fill||null),t.dir=ve(t.dir,-1)});const E=o==2?b[1].facets[0].scale:b[0].scale,J={axes:dr,series:ar},j=(e.drawOrder||["axes","series"]).map(t=>J[t]);function ne(t){const s=t.distr==3?r=>Qt(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>us(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let a=s(r),{_min:c,_max:h}=t,_=h-c;return(a-c)/_}}function q(t){let s=k[t];if(s==null){let r=(e.scales||rn)[t]||rn;if(r.from!=null){q(r.from);let a=Ge({},k[r.from],r,{key:t});a.valToPct=ne(a),k[t]=a}else{s=k[t]=Ge({},t==E?Ho:_u,r),s.key=t;let a=s.time,c=s.range,h=sl(c);if((t!=E||o==2&&!a)&&(h&&(c[0]==null||c[1]==null)&&(c={min:c[0]==null?Pi:{mode:1,hard:c[0],soft:c[0]},max:c[1]==null?Pi:{mode:1,hard:c[1],soft:c[1]}},h=!1),!h&&Cn(c))){let _=c;c=(x,y,A)=>y==null?Gl:Mn(y,A,_)}s.range=he(c||(a?Pu:t==E?s.distr==3?Fu:s.distr==4?zu:Ko:s.distr==3?Jo:s.distr==4?Zo:Ru)),s.auto=he(h?!1:s.auto),s.clamp=he(s.clamp||wu),s._min=s._max=null,s.valToPct=ne(s)}}}q("x"),q("y"),o==1&&b.forEach(t=>{q(t.scale)}),R.forEach(t=>{q(t.scale)});for(let t in e.scales)q(t);const T=k[E],ee=T.distr;let V,Z;T.ori==0?(gt(m,Yr),V=f,Z=u):(gt(m,jr),V=u,Z=f);const U={};for(let t in k){let s=k[t];(s.min!=null||s.max!=null)&&(U[t]={min:s.min,max:s.max},s.min=s.max=null)}const ae=e.tzDate||(t=>new Date(Ie(t/I))),G=e.fmtDate||zs,He=I==1?Ya(ae):Ka(ae),Se=Ii(ae,Bi(I==1?Ua:qa,G)),pe=Yi(ae,Ui(Za,G)),me=[],M=n.legend=Ge({},Xa,e.legend),S=n.cursor=Ge({},iu,{drag:{y:o==2}},e.cursor),se=M.show,fe=S.show,K=M.markers;M.idxs=me,K.width=he(K.width),K.dash=he(K.dash),K.stroke=he(K.stroke),K.fill=he(K.fill);let N,W,H,$=[],ue=[],Ee,Oe=!1,st={};if(M.live){const t=b[1]?b[1].values:null;Oe=t!=null,Ee=Oe?t(n,1,0):{_:0};for(let s in Ee)st[s]=Ds}if(se)if(N=zt("table",la,m),H=zt("tbody",null,N),M.mount(n,N),Oe){W=zt("thead",null,N,H);let t=zt("tr",null,W);zt("th",null,t);for(var xt in Ee)zt("th",_i,t).textContent=xt}else gt(N,sa),M.live&&gt(N,na);const St={show:!0},Lt={show:!1};function Kt(t,s){if(s==0&&(Oe||!M.live||o==2))return Gl;let r=[],a=zt("tr",ia,H,H.childNodes[s]);gt(a,t.class),t.show||gt(a,vl);let c=zt("th",null,a);if(K.show){let x=At(oa,c);if(s>0){let y=K.width(n,s);y&&(x.style.border=y+"px "+K.dash(n,s)+" "+K.stroke(n,s)),x.style.background=K.fill(n,s)}}let h=At(_i,c);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(K.show||(h.style.color=t.width>0?K.stroke(n,s):K.fill(n,s)),B("click",c,x=>{if(S._lock)return;fl(x);let y=b.indexOf(t);if((x.ctrlKey||x.metaKey)!=M.isolate){let A=b.some((P,O)=>O>0&&O!=y&&P.show);b.forEach((P,O)=>{O>0&&Gt(O,A?O==y?St:Lt:St,!0,We.setSeries)})}else Gt(y,{show:!t.show},!0,We.setSeries)},!1),yl&&B(yi,c,x=>{S._lock||(fl(x),Gt(b.indexOf(t),zl,!0,We.setSeries))},!1));for(var _ in Ee){let x=zt("td",ra,a);x.textContent="--",r.push(x)}return[a,r]}const X=new Map;function B(t,s,r,a=!0){const c=X.get(s)||{},h=S.bind[t](n,s,r,a);h&&(wl(t,s,c[t]=h),X.set(s,c))}function xe(t,s,r){const a=X.get(s)||{};for(let c in a)(t==null||c==t)&&(ws(c,s,a[c]),delete a[c]);t==null&&X.delete(s)}let Fe=0,ct=0,oe=0,C=0,ye=0,Be=0,xl=ye,rl=Be,Ot=oe,al=C,pt=0,yt=0,ut=0,Ct=0;n.bbox={};let Vn=!1,un=!1,Sl=!1,ul=!1,fn=!1,kt=!1;function Nn(t,s,r){(r||t!=n.width||s!=n.height)&&Bs(t,s),Al(!1),Sl=!0,un=!0,Dl()}function Bs(t,s){n.width=Fe=oe=t,n.height=ct=C=s,ye=Be=0,tr(),lr();let r=n.bbox;pt=r.left=ml(ye*_e,.5),yt=r.top=ml(Be*_e,.5),ut=r.width=ml(oe*_e,.5),Ct=r.height=ml(C*_e,.5)}const $o=3;function Xo(){let t=!1,s=0;for(;!t;){s++;let r=cr(s),a=pr(s);t=s==$o||r&&a,t||(Bs(n.width,n.height),un=!0)}}function er({width:t,height:s}){Nn(t,s)}n.setSize=er;function tr(){let t=!1,s=!1,r=!1,a=!1;R.forEach((c,h)=>{if(c.show&&c._show){let{side:_,_size:x}=c,y=_%2,A=c.label!=null?c.labelSize:0,P=x+A;P>0&&(y?(oe-=P,_==3?(ye+=P,a=!0):r=!0):(C-=P,_==0?(Be+=P,t=!0):s=!0))}}),cl[0]=t,cl[1]=r,cl[2]=s,cl[3]=a,oe-=Xt[1]+Xt[3],ye+=Xt[3],C-=Xt[2]+Xt[0],Be+=Xt[0]}function lr(){let t=ye+oe,s=Be+C,r=ye,a=Be;function c(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return a-=_,a+_}}R.forEach((h,_)=>{if(h.show&&h._show){let x=h.side;h._pos=c(x,h._size),h.label!=null&&(h._lpos=c(x,h.labelSize))}})}if(S.dataIdx==null){let t=S.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=he(t.prox),a=t.bias??=0;S.dataIdx=(c,h,_,x)=>{if(h==0)return _;let y=_,A=r(c,h,_,x)??Te,P=A>=0&&A<Te,O=T.ori==0?oe:C,ie=S.left,we=l[0],ge=l[h];if(s.has(ge[_])){y=null;let de=null,te=null,Y;if(a==0||a==-1)for(Y=_;de==null&&Y-- >0;)s.has(ge[Y])||(de=Y);if(a==0||a==1)for(Y=_;te==null&&Y++<ge.length;)s.has(ge[Y])||(te=Y);if(de!=null||te!=null)if(P){let Le=de==null?-1/0:V(we[de],T,O,0),Ve=te==null?1/0:V(we[te],T,O,0),Xe=ie-Le,ke=Ve-ie;Xe<=ke?Xe<=A&&(y=de):ke<=A&&(y=te)}else y=te==null?de:de==null?te:_-de<=te-_?de:te}else P&&Ue(ie-V(we[_],T,O,0))>A&&(y=null);return y}}const fl=t=>{S.event=t};S.idxs=me,S._lock=!1;let nt=S.points;nt.show=he(nt.show),nt.size=he(nt.size),nt.stroke=he(nt.stroke),nt.width=he(nt.width),nt.fill=he(nt.fill);const Wt=n.focus=Ge({},e.focus||{alpha:.3},S.focus),yl=Wt.prox>=0,kl=yl&&nt.one;let Tt=[],Tl=[],Ml=[];function Is(t,s){let r=nt.show(n,s);if(r instanceof HTMLElement)return gt(r,ta),gt(r,t.class),jt(r,-10,-10,oe,C),L.insertBefore(r,Tt[s]),r}function Us(t,s){if(o==1||s>0){let r=o==1&&k[t.scale].time,a=t.value;t.value=r?Hi(a)?Yi(ae,Ui(a,G)):a||pe:a||mu,t.label=t.label||(r?ru:ou)}if(kl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Du||_a,t.fillTo=he(t.fillTo||bu),t.pxAlign=+ve(t.pxAlign,F),t.pxRound=eo(t.pxAlign),t.stroke=he(t.stroke||null),t.fill=he(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=gu(at(1,t.width),1),a=t.points=Ge({},{size:r,width:at(1,r*.2),stroke:t.stroke,space:r*2,paths:Lu,_stroke:null,_fill:null},t.points);a.show=he(a.show),a.filter=he(a.filter),a.fill=he(a.fill),a.stroke=he(a.stroke),a.paths=he(a.paths),a.pxAlign=t.pxAlign}if(se){let r=Kt(t,s);$.splice(s,0,r[0]),ue.splice(s,0,r[1]),M.values.push(null)}if(fe){me.splice(s,0,null);let r=null;kl?s==0&&(r=Is(t,s)):s>0&&(r=Is(t,s)),Tt.splice(s,0,r),Tl.splice(s,0,0),Ml.splice(s,0,0)}$e("addSeries",s)}function nr(t,s){s=s??b.length,t=o==1?ks(t,s,qi,$i):ks(t,s,{},Qi),b.splice(s,0,t),Us(b[s],s)}n.addSeries=nr;function sr(t){if(b.splice(t,1),se){M.values.splice(t,1),ue.splice(t,1);let s=$.splice(t,1)[0];xe(null,s.firstChild),s.remove()}fe&&(me.splice(t,1),Tt.splice(t,1)[0].remove(),Tl.splice(t,1),Ml.splice(t,1)),$e("delSeries",t)}n.delSeries=sr;const cl=[!1,!1,!1,!1];function ir(t,s){if(t._show=t.show,t.show){let r=t.side%2,a=k[t.scale];a==null&&(t.scale=r?b[1].scale:E,a=k[t.scale]);let c=a.time;t.size=he(t.size),t.space=he(t.space),t.rotate=he(t.rotate),sl(t.incrs)&&t.incrs.forEach(_=>{!ol.has(_)&&ol.set(_,_o(_))}),t.incrs=he(t.incrs||(a.distr==2?Ga:c?I==1?Ia:ja:gl)),t.splits=he(t.splits||(c&&a.distr==1?He:a.distr==3?bs:a.distr==4?fu:uu)),t.stroke=he(t.stroke),t.grid.stroke=he(t.grid.stroke),t.ticks.stroke=he(t.ticks.stroke),t.border.stroke=he(t.border.stroke);let h=t.values;t.values=sl(h)&&!sl(h[0])?he(h):c?sl(h)?Ii(ae,Bi(h,G)):Hi(h)?Ja(ae,h):h||Se:h||au,t.filter=he(t.filter||(a.distr>=3&&a.log==10?du:a.distr==3&&a.log==2?hu:vo)),t.font=so(t.font),t.labelFont=so(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(cl[s]=!0,t._el=At(Qr,v))}}function ql(t,s,r,a){let[c,h,_,x]=r,y=s%2,A=0;return y==0&&(x||h)&&(A=s==0&&!c||s==2&&!_?Ie(ji.size/3):0),y==1&&(c||_)&&(A=s==1&&!h||s==3&&!x?Ie(Ji.size/2):0),A}const Ys=n.padding=(e.padding||[ql,ql,ql,ql]).map(t=>he(ve(t,ql))),Xt=n._padding=Ys.map((t,s)=>t(n,s,cl,0));let tt,Ke=null,Je=null;const cn=o==1?b[0].idxs:null;let Pt=null,Kl=!1;function js(t,s){if(l=t??[],n.data=n._data=l,o==2){tt=0;for(let r=1;r<b.length;r++)tt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),Pt=l[0],tt=Pt.length;let r=l;if(ee==2){r=l.slice();let a=r[0]=Array(tt);for(let c=0;c<tt;c++)a[c]=c}n._data=l=r}if(Al(!0),$e("setData"),ee==2&&(Sl=!0),s!==!1){let r=T;r.auto(n,Kl)?Hn():tl(E,r.min,r.max),ul=ul||S.left>=0,kt=!0,Dl()}}n.setData=js;function Hn(){Kl=!0;let t,s;o==1&&(tt>0?(Ke=cn[0]=0,Je=cn[1]=tt-1,t=l[0][Ke],s=l[0][Je],ee==2?(t=Ke,s=Je):t==s&&(ee==3?[t,s]=Dn(t,t,T.log,!1):ee==4?[t,s]=Cs(t,t,T.log,!1):T.time?s=t+Ie(86400/I):[t,s]=Mn(t,s,Ps,!0))):(Ke=cn[0]=t=null,Je=cn[1]=s=null)),tl(E,t,s)}let pn,El,On,Wn,Gn,Bn,In,Un,Yn,ft;function qs(t,s,r,a,c,h){t??=xi,r??=Fs,a??="butt",c??=xi,h??="round",t!=pn&&(g.strokeStyle=pn=t),c!=El&&(g.fillStyle=El=c),s!=On&&(g.lineWidth=On=s),h!=Gn&&(g.lineJoin=Gn=h),a!=Bn&&(g.lineCap=Bn=a),r!=Wn&&g.setLineDash(Wn=r)}function Ks(t,s,r,a){s!=El&&(g.fillStyle=El=s),t!=In&&(g.font=In=t),r!=Un&&(g.textAlign=Un=r),a!=Yn&&(g.textBaseline=Yn=a)}function jn(t,s,r,a,c=0){if(a.length>0&&t.auto(n,Kl)&&(s==null||s.min==null)){let h=ve(Ke,0),_=ve(Je,a.length-1),x=r.min==null?da(a,h,_,c,t.distr==3):[r.min,r.max];t.min=Ht(t.min,r.min=x[0]),t.max=at(t.max,r.max=x[1])}}const Js={min:null,max:null};function or(){for(let a in k){let c=k[a];U[a]==null&&(c.min==null||U[E]!=null&&c.auto(n,Kl))&&(U[a]=Js)}for(let a in k){let c=k[a];U[a]==null&&c.from!=null&&U[c.from]!=null&&(U[a]=Js)}U[E]!=null&&Al(!0);let t={};for(let a in U){let c=U[a];if(c!=null){let h=t[a]=Bl(k[a],Sa);if(c.min!=null)Ge(h,c);else if(a!=E||o==2)if(tt==0&&h.from==null){let _=h.range(n,null,null,a);h.min=_[0],h.max=_[1]}else h.min=Te,h.max=-Te}}if(tt>0){b.forEach((a,c)=>{if(o==1){let h=a.scale,_=U[h];if(_==null)return;let x=t[h];if(c==0){let y=x.range(n,x.min,x.max,h);x.min=y[0],x.max=y[1],Ke=Vt(x.min,l[0]),Je=Vt(x.max,l[0]),Je-Ke>1&&(l[0][Ke]<x.min&&Ke++,l[0][Je]>x.max&&Je--),a.min=Pt[Ke],a.max=Pt[Je]}else a.show&&a.auto&&jn(x,_,a,l[c],a.sorted);a.idxs[0]=Ke,a.idxs[1]=Je}else if(c>0&&a.show&&a.auto){let[h,_]=a.facets,x=h.scale,y=_.scale,[A,P]=l[c],O=t[x],ie=t[y];O!=null&&jn(O,U[x],h,A,h.sorted),ie!=null&&jn(ie,U[y],_,P,_.sorted),a.min=_.min,a.max=_.max}});for(let a in t){let c=t[a],h=U[a];if(c.from==null&&(h==null||h.min==null)){let _=c.range(n,c.min==Te?null:c.min,c.max==-Te?null:c.max,a);c.min=_[0],c.max=_[1]}}}for(let a in t){let c=t[a];if(c.from!=null){let h=t[c.from];if(h.min==null)c.min=c.max=null;else{let _=c.range(n,h.min,h.max,a);c.min=_[0],c.max=_[1]}}}let s={},r=!1;for(let a in t){let c=t[a],h=k[a];if(h.min!=c.min||h.max!=c.max){h.min=c.min,h.max=c.max;let _=h.distr;h._min=_==3?Qt(h.min):_==4?us(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?Qt(h.max):_==4?us(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[a]=r=!0}}if(r){b.forEach((a,c)=>{o==2?c>0&&s.y&&(a._paths=null):s[a.scale]&&(a._paths=null)});for(let a in s)Sl=!0,$e("setScale",a);fe&&S.left>=0&&(ul=kt=!0)}for(let a in U)U[a]=null}function rr(t){let s=_s(Ke-1,0,tt-1),r=_s(Je+1,0,tt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<tt-1;)r++;return[s,r]}function ar(){if(tt>0){let t=b.some(s=>s._focus)&&ft!=Wt.alpha;t&&(g.globalAlpha=ft=Wt.alpha),b.forEach((s,r)=>{if(r>0&&s.show&&(Zs(r,!1),Zs(r,!0),s._paths==null)){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha);let c=o==2?[0,l[r][0].length-1]:rr(l[r]);s._paths=s.paths(n,r,c[0],c[1]),ft!=a&&(g.globalAlpha=ft=a)}}),b.forEach((s,r)=>{if(r>0&&s.show){let a=ft;ft!=s.alpha&&(g.globalAlpha=ft=s.alpha),s._paths!=null&&Qs(r,!1);{let c=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,Ke,Je,c),_=s.points.filter(n,r,h,c);(h||_)&&(s.points._paths=s.points.paths(n,r,Ke,Je,_),Qs(r,!0))}ft!=a&&(g.globalAlpha=ft=a),$e("drawSeries",r)}}),t&&(g.globalAlpha=ft=1)}}function Zs(t,s){let r=s?b[t].points:b[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function Qs(t,s){let r=s?b[t].points:b[t],{stroke:a,fill:c,clip:h,flags:_,_stroke:x=r._stroke,_fill:y=r._fill,_width:A=r.width}=r._paths;A=Me(A*_e,3);let P=null,O=A%2/2;s&&y==null&&(y=A>0?"#fff":x);let ie=r.pxAlign==1&&O>0;if(ie&&g.translate(O,O),!s){let we=pt-A/2,ge=yt-A/2,de=ut+A,te=Ct+A;P=new Path2D,P.rect(we,ge,de,te)}s?qn(x,A,r.dash,r.cap,y,a,c,_,h):ur(t,x,A,r.dash,r.cap,y,a,c,_,P,h),ie&&g.translate(-O,-O)}function ur(t,s,r,a,c,h,_,x,y,A,P){let O=!1;y!=0&&le.forEach((ie,we)=>{if(ie.series[0]==t){let ge=b[ie.series[1]],de=l[ie.series[1]],te=(ge._paths||rn).band;sl(te)&&(te=ie.dir==1?te[0]:te[1]);let Y,Le=null;ge.show&&te&&ma(de,Ke,Je)?(Le=ie.fill(n,we)||h,Y=ge._paths.clip):te=null,qn(s,r,a,c,Le,_,x,y,A,P,Y,te),O=!0}}),O||qn(s,r,a,c,h,_,x,y,A,P)}const $s=Il|Ss;function qn(t,s,r,a,c,h,_,x,y,A,P,O){qs(t,s,r,a,c),(y||A||O)&&(g.save(),y&&g.clip(y),A&&g.clip(A)),O?(x&$s)==$s?(g.clip(O),P&&g.clip(P),hn(c,_),dn(t,h,s)):x&Ss?(hn(c,_),g.clip(O),dn(t,h,s)):x&Il&&(g.save(),g.clip(O),P&&g.clip(P),hn(c,_),g.restore(),dn(t,h,s)):(hn(c,_),dn(t,h,s)),(y||A||O)&&g.restore()}function dn(t,s,r){r>0&&(s instanceof Map?s.forEach((a,c)=>{g.strokeStyle=pn=c,g.stroke(a)}):s!=null&&t&&g.stroke(s))}function hn(t,s){s instanceof Map?s.forEach((r,a)=>{g.fillStyle=El=a,g.fill(r)}):s!=null&&t&&g.fill(s)}function fr(t,s,r,a){let c=R[t],h;if(a<=0)h=[0,0];else{let _=c._space=c.space(n,t,s,r,a),x=c._incrs=c.incrs(n,t,s,r,a,_);h=Vu(s,r,x,a,_)}return c._found=h}function Kn(t,s,r,a,c,h,_,x,y,A){let P=_%2/2;F==1&&g.translate(P,P),qs(x,_,y,A,x),g.beginPath();let O,ie,we,ge,de=c+(a==0||a==3?-h:h);r==0?(ie=c,ge=de):(O=c,we=de);for(let te=0;te<t.length;te++)s[te]!=null&&(r==0?O=we=t[te]:ie=ge=t[te],g.moveTo(O,ie),g.lineTo(we,ge));g.stroke(),F==1&&g.translate(-P,-P)}function cr(t){let s=!0;return R.forEach((r,a)=>{if(!r.show)return;let c=k[r.scale];if(c.min==null){r._show&&(s=!1,r._show=!1,Al(!1));return}else r._show||(s=!1,r._show=!0,Al(!1));let h=r.side,_=h%2,{min:x,max:y}=c,[A,P]=fr(a,x,y,_==0?oe:C);if(P==0)return;let O=c.distr==2,ie=r._splits=r.splits(n,a,x,y,A,P,O),we=c.distr==2?ie.map(Y=>Pt[Y]):ie,ge=c.distr==2?Pt[ie[1]]-Pt[ie[0]]:A,de=r._values=r.values(n,r.filter(n,we,a,P,ge),a,P,ge);r._rotate=h==2?r.rotate(n,de,a,P):0;let te=r._size;r._size=Dt(r.size(n,de,a,t)),te!=null&&r._size!=te&&(s=!1)}),s}function pr(t){let s=!0;return Ys.forEach((r,a)=>{let c=r(n,a,cl,t);c!=Xt[a]&&(s=!1),Xt[a]=c}),s}function dr(){for(let t=0;t<R.length;t++){let s=R[t];if(!s.show||!s._show)continue;let r=s.side,a=r%2,c,h,_=s.stroke(n,t),x=r==0||r==3?-1:1,[y,A]=s._found;if(s.label!=null){let ot=s.labelGap*x,mt=Ie((s._lpos+ot)*_e);Ks(s.labelFont[0],_,"center",r==2?en:bi),g.save(),a==1?(c=h=0,g.translate(mt,Ie(yt+Ct/2)),g.rotate((r==3?-yn:yn)/2)):(c=Ie(pt+ut/2),h=mt);let hl=mo(s.label)?s.label(n,t,y,A):s.label;g.fillText(hl,c,h),g.restore()}if(A==0)continue;let P=k[s.scale],O=a==0?ut:Ct,ie=a==0?pt:yt,we=s._splits,ge=P.distr==2?we.map(ot=>Pt[ot]):we,de=P.distr==2?Pt[we[1]]-Pt[we[0]]:y,te=s.ticks,Y=s.border,Le=te.show?te.size:0,Ve=Ie(Le*_e),Xe=Ie((s.alignTo==2?s._size-Le-s.gap:s.gap)*_e),ke=s._rotate*-yn/180,Ne=z(s._pos*_e),dt=(Ve+Xe)*x,it=Ne+dt;h=a==0?it:0,c=a==1?it:0;let Mt=s.font[0],Rt=s.align==1?Nl:s.align==2?os:ke>0?Nl:ke<0?os:a==0?"center":r==3?os:Nl,It=ke||a==1?"middle":r==2?en:bi;Ks(Mt,_,Rt,It);let ht=s.font[1]*s.lineGap,Et=we.map(ot=>z(p(ot,P,O,ie))),Ft=s._values;for(let ot=0;ot<Ft.length;ot++){let mt=Ft[ot];if(mt!=null){a==0?c=Et[ot]:h=Et[ot],mt=""+mt;let hl=mt.indexOf(`
`)==-1?[mt]:mt.split(/\n/gm);for(let rt=0;rt<hl.length;rt++){let vi=hl[rt];ke?(g.save(),g.translate(c,h+rt*ht),g.rotate(ke),g.fillText(vi,0,0),g.restore()):g.fillText(vi,c,h+rt*ht)}}}te.show&&Kn(Et,te.filter(n,ge,t,A,de),a,r,Ne,Ve,Me(te.width*_e,3),te.stroke(n,t),te.dash,te.cap);let Ut=s.grid;Ut.show&&Kn(Et,Ut.filter(n,ge,t,A,de),a,a==0?2:1,a==0?yt:pt,a==0?Ct:ut,Me(Ut.width*_e,3),Ut.stroke(n,t),Ut.dash,Ut.cap),Y.show&&Kn([Ne],[1],a==0?1:0,a==0?1:2,a==1?yt:pt,a==1?Ct:ut,Me(Y.width*_e,3),Y.stroke(n,t),Y.dash,Y.cap)}$e("drawAxes")}function Al(t){b.forEach((s,r)=>{r>0&&(s._paths=null,t&&(o==1?(s.min=null,s.max=null):s.facets.forEach(a=>{a.min=null,a.max=null})))})}let mn=!1,Jn=!1,Jl=[];function hr(){Jn=!1;for(let t=0;t<Jl.length;t++)$e(...Jl[t]);Jl.length=0}function Dl(){mn||(Da(Xs),mn=!0)}function mr(t,s=!1){mn=!0,Jn=s,t(n),Xs(),s&&Jl.length>0&&queueMicrotask(hr)}n.batch=mr;function Xs(){if(Vn&&(or(),Vn=!1),Sl&&(Xo(),Sl=!1),un){if(Ce(D,Nl,ye),Ce(D,en,Be),Ce(D,ln,oe),Ce(D,nn,C),Ce(L,Nl,ye),Ce(L,en,Be),Ce(L,ln,oe),Ce(L,nn,C),Ce(v,ln,Fe),Ce(v,nn,ct),w.width=Ie(Fe*_e),w.height=Ie(ct*_e),R.forEach(({_el:t,_show:s,_size:r,_pos:a,side:c})=>{if(t!=null)if(s){let h=c===3||c===0?r:0,_=c%2==1;Ce(t,_?"left":"top",a-h),Ce(t,_?"width":"height",r),Ce(t,_?"top":"left",_?Be:ye),Ce(t,_?"height":"width",_?C:oe),vs(t,vl)}else gt(t,vl)}),pn=El=On=Gn=Bn=In=Un=Yn=Wn=null,ft=1,$l(!0),ye!=xl||Be!=rl||oe!=Ot||C!=al){Al(!1);let t=oe/Ot,s=C/al;if(fe&&!ul&&S.left>=0){S.left*=t,S.top*=s,Ll&&jt(Ll,Ie(S.left),0,oe,C),Cl&&jt(Cl,0,Ie(S.top),oe,C);for(let r=0;r<Tt.length;r++){let a=Tt[r];a!=null&&(Tl[r]*=t,Ml[r]*=s,jt(a,Dt(Tl[r]),Dt(Ml[r]),oe,C))}}if(De.show&&!fn&&De.left>=0&&De.width>0){De.left*=t,De.width*=t,De.top*=s,De.height*=s;for(let r in ts)Ce(Fl,r,De[r])}xl=ye,rl=Be,Ot=oe,al=C}$e("setSize"),un=!1}Fe>0&&ct>0&&(g.clearRect(0,0,w.width,w.height),$e("drawClear"),j.forEach(t=>t()),$e("draw")),De.show&&fn&&(gn(De),fn=!1),fe&&ul&&(dl(null,!0,!1),ul=!1),M.show&&M.live&&kt&&(Xn(),kt=!1),d||(d=!0,n.status=1,$e("ready")),Kl=!1,mn=!1}n.redraw=(t,s)=>{Sl=s||!1,t!==!1?tl(E,T.min,T.max):Dl()};function Zn(t,s){let r=k[t];if(r.from==null){if(tt==0){let a=r.range(n,s.min,s.max,t);s.min=a[0],s.max=a[1]}if(s.min>s.max){let a=s.min;s.min=s.max,s.max=a}if(tt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==E&&r.distr==2&&tt>0&&(s.min=Vt(s.min,l[0]),s.max=Vt(s.max,l[0]),s.min==s.max&&s.max++),U[t]=s,Vn=!0,Dl()}}n.setScale=Zn;let Qn,$n,Ll,Cl,ei,ti,Pl,Rl,li,ni,Ae,Pe,el=!1;const lt=S.drag;let Ze=lt.x,Qe=lt.y;fe&&(S.x&&(Qn=At(Xr,L)),S.y&&($n=At(ea,L)),T.ori==0?(Ll=Qn,Cl=$n):(Ll=$n,Cl=Qn),Ae=S.left,Pe=S.top);const De=n.select=Ge({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Fl=De.show?At($r,De.over?L:D):null;function gn(t,s){if(De.show){for(let r in t)De[r]=t[r],r in ts&&Ce(Fl,r,t[r]);s!==!1&&$e("setSelect")}}n.setSelect=gn;function gr(t){if(b[t].show)se&&vs($[t],vl);else if(se&&gt($[t],vl),fe){let r=kl?Tt[0]:Tt[t];r!=null&&jt(r,-10,-10,oe,C)}}function tl(t,s,r){Zn(t,{min:s,max:r})}function Gt(t,s,r,a){s.focus!=null&&xr(t),s.show!=null&&b.forEach((c,h)=>{h>0&&(t==h||t==null)&&(c.show=s.show,gr(h),o==2?(tl(c.facets[0].scale,null,null),tl(c.facets[1].scale,null,null)):tl(c.scale,null,null),Dl())}),r!==!1&&$e("setSeries",t,s),a&&Xl("setSeries",n,t,s)}n.setSeries=Gt;function vr(t,s){Ge(le[t],s)}function wr(t,s){t.fill=he(t.fill||null),t.dir=ve(t.dir,-1),s=s??le.length,le.splice(s,0,t)}function _r(t){t==null?le.length=0:le.splice(t,1)}n.addBand=wr,n.setBand=vr,n.delBand=_r;function br(t,s){b[t].alpha=s,fe&&Tt[t]!=null&&(Tt[t].style.opacity=s),se&&$[t]&&($[t].style.opacity=s)}let Jt,ll,pl;const zl={focus:!0};function xr(t){if(t!=pl){let s=t==null,r=Wt.alpha!=1;b.forEach((a,c)=>{if(o==1||c>0){let h=s||c==0||c==t;a._focus=s?null:h,r&&br(c,h?1:Wt.alpha)}}),pl=t,r&&Dl()}}se&&yl&&B(ki,N,t=>{S._lock||(fl(t),pl!=null&&Gt(null,zl,!0,We.setSeries))});function Bt(t,s,r){let a=k[s];r&&(t=t/_e-(a.ori==1?Be:ye));let c=oe;a.ori==1&&(c=C,t=c-t),a.dir==-1&&(t=c-t);let h=a._min,_=a._max,x=t/c,y=h+(_-h)*x,A=a.distr;return A==3?Wl(10,y):A==4?va(y,a.asinh):A==100?a.bwd(y):y}function Sr(t,s){let r=Bt(t,E,s);return Vt(r,l[0],Ke,Je)}n.valToIdx=t=>Vt(t,l[0]),n.posToIdx=Sr,n.posToVal=Bt,n.valToPos=(t,s,r)=>k[s].ori==0?f(t,k[s],r?ut:oe,r?pt:0):u(t,k[s],r?Ct:C,r?yt:0),n.setCursor=(t,s,r)=>{Ae=t.left,Pe=t.top,dl(null,s,r)};function si(t,s){Ce(Fl,Nl,De.left=t),Ce(Fl,ln,De.width=s)}function ii(t,s){Ce(Fl,en,De.top=t),Ce(Fl,nn,De.height=s)}let Zl=T.ori==0?si:ii,Ql=T.ori==1?si:ii;function yr(){if(se&&M.live)for(let t=o==2?1:0;t<b.length;t++){if(t==0&&Oe)continue;let s=M.values[t],r=0;for(let a in s)ue[t][r++].firstChild.nodeValue=s[a]}}function Xn(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,a)=>{me[a]=r}):xa(t.idx)||me.fill(t.idx),M.idx=me[0]),se&&M.live){for(let r=0;r<b.length;r++)(r>0||o==1&&!Oe)&&kr(r,me[r]);yr()}kt=!1,s!==!1&&$e("setLegend")}n.setLegend=Xn;function kr(t,s){let r=b[t],a=t==0&&ee==2?Pt:l[t],c;Oe?c=r.values(n,t,s)??st:(c=r.value(n,s==null?null:a[s],t,s),c=c==null?st:{_:c}),M.values[t]=c}function dl(t,s,r){li=Ae,ni=Pe,[Ae,Pe]=S.move(n,Ae,Pe),S.left=Ae,S.top=Pe,fe&&(Ll&&jt(Ll,Ie(Ae),0,oe,C),Cl&&jt(Cl,0,Ie(Pe),oe,C));let a,c=Ke>Je;Jt=Te,ll=null;let h=T.ori==0?oe:C,_=T.ori==1?oe:C;if(Ae<0||tt==0||c){a=S.idx=null;for(let x=0;x<b.length;x++){let y=Tt[x];y!=null&&jt(y,-10,-10,oe,C)}yl&&Gt(null,zl,!0,t==null&&We.setSeries),M.live&&(me.fill(a),kt=!0)}else{let x,y,A;o==1&&(x=T.ori==0?Ae:Pe,y=Bt(x,E),a=S.idx=Vt(y,l[0],Ke,Je),A=V(l[0][a],T,h,0));let P=-10,O=-10,ie=0,we=0,ge=!0,de="",te="";for(let Y=o==2?1:0;Y<b.length;Y++){let Le=b[Y],Ve=me[Y],Xe=Ve==null?null:o==1?l[Y][Ve]:l[Y][1][Ve],ke=S.dataIdx(n,Y,a,y),Ne=ke==null?null:o==1?l[Y][ke]:l[Y][1][ke];if(kt=kt||Ne!=Xe||ke!=Ve,me[Y]=ke,Y>0&&Le.show){let dt=ke==null?-10:ke==a?A:V(o==1?l[0][ke]:l[Y][0][ke],T,h,0),it=Ne==null?-10:Z(Ne,o==1?k[Le.scale]:k[Le.facets[1].scale],_,0);if(yl&&Ne!=null){let Mt=T.ori==1?Ae:Pe,Rt=Ue(Wt.dist(n,Y,ke,it,Mt));if(Rt<Jt){let It=Wt.bias;if(It!=0){let ht=Bt(Mt,Le.scale),Et=Ne>=0?1:-1,Ft=ht>=0?1:-1;Ft==Et&&(Ft==1?It==1?Ne>=ht:Ne<=ht:It==1?Ne<=ht:Ne>=ht)&&(Jt=Rt,ll=Y)}else Jt=Rt,ll=Y}}if(kt||kl){let Mt,Rt;T.ori==0?(Mt=dt,Rt=it):(Mt=it,Rt=dt);let It,ht,Et,Ft,Ut,ot,mt=!0,hl=nt.bbox;if(hl!=null){mt=!1;let rt=hl(n,Y);Et=rt.left,Ft=rt.top,It=rt.width,ht=rt.height}else Et=Mt,Ft=Rt,It=ht=nt.size(n,Y);if(ot=nt.fill(n,Y),Ut=nt.stroke(n,Y),kl)Y==ll&&Jt<=Wt.prox&&(P=Et,O=Ft,ie=It,we=ht,ge=mt,de=ot,te=Ut);else{let rt=Tt[Y];rt!=null&&(Tl[Y]=Et,Ml[Y]=Ft,Ci(rt,It,ht,mt),Di(rt,ot,Ut),jt(rt,Dt(Et),Dt(Ft),oe,C))}}}}if(kl){let Y=Wt.prox,Le=pl==null?Jt<=Y:Jt>Y||ll!=pl;if(kt||Le){let Ve=Tt[0];Ve!=null&&(Tl[0]=P,Ml[0]=O,Ci(Ve,ie,we,ge),Di(Ve,de,te),jt(Ve,Dt(P),Dt(O),oe,C))}}}if(De.show&&el)if(t!=null){let[x,y]=We.scales,[A,P]=We.match,[O,ie]=t.cursor.sync.scales,we=t.cursor.drag;if(Ze=we._x,Qe=we._y,Ze||Qe){let{left:ge,top:de,width:te,height:Y}=t.select,Le=t.scales[O].ori,Ve=t.posToVal,Xe,ke,Ne,dt,it,Mt=x!=null&&A(x,O),Rt=y!=null&&P(y,ie);Mt&&Ze?(Le==0?(Xe=ge,ke=te):(Xe=de,ke=Y),Ne=k[x],dt=V(Ve(Xe,O),Ne,h,0),it=V(Ve(Xe+ke,O),Ne,h,0),Zl(Ht(dt,it),Ue(it-dt))):Zl(0,h),Rt&&Qe?(Le==1?(Xe=ge,ke=te):(Xe=de,ke=Y),Ne=k[y],dt=Z(Ve(Xe,ie),Ne,_,0),it=Z(Ve(Xe+ke,ie),Ne,_,0),Ql(Ht(dt,it),Ue(it-dt))):Ql(0,_)}else ls()}else{let x=Ue(li-ei),y=Ue(ni-ti);if(T.ori==1){let ie=x;x=y,y=ie}Ze=lt.x&&x>=lt.dist,Qe=lt.y&&y>=lt.dist;let A=lt.uni;A!=null?Ze&&Qe&&(Ze=x>=A,Qe=y>=A,!Ze&&!Qe&&(y>x?Qe=!0:Ze=!0)):lt.x&&lt.y&&(Ze||Qe)&&(Ze=Qe=!0);let P,O;Ze&&(T.ori==0?(P=Pl,O=Ae):(P=Rl,O=Pe),Zl(Ht(P,O),Ue(O-P)),Qe||Ql(0,_)),Qe&&(T.ori==1?(P=Pl,O=Ae):(P=Rl,O=Pe),Ql(Ht(P,O),Ue(O-P)),Ze||Zl(0,h)),!Ze&&!Qe&&(Zl(0,0),Ql(0,0))}if(lt._x=Ze,lt._y=Qe,t==null){if(r){if(gi!=null){let[x,y]=We.scales;We.values[0]=x!=null?Bt(T.ori==0?Ae:Pe,x):null,We.values[1]=y!=null?Bt(T.ori==1?Ae:Pe,y):null}Xl(rs,n,Ae,Pe,oe,C,a)}if(yl){let x=r&&We.setSeries,y=Wt.prox;pl==null?Jt<=y&&Gt(ll,zl,!0,x):Jt>y?Gt(null,zl,!0,x):ll!=pl&&Gt(ll,zl,!0,x)}}kt&&(M.idx=a,Xn()),s!==!1&&$e("setCursor")}let nl=null;Object.defineProperty(n,"rect",{get(){return nl==null&&$l(!1),nl}});function $l(t=!1){t?nl=null:(nl=L.getBoundingClientRect(),$e("syncRect",nl))}function oi(t,s,r,a,c,h,_){S._lock||el&&t!=null&&t.movementX==0&&t.movementY==0||(es(t,s,r,a,c,h,_,!1,t!=null),t!=null?dl(null,!0,!0):dl(s,!0,!1))}function es(t,s,r,a,c,h,_,x,y){if(nl==null&&$l(!1),fl(t),t!=null)r=t.clientX-nl.left,a=t.clientY-nl.top;else{if(r<0||a<0){Ae=-10,Pe=-10;return}let[A,P]=We.scales,O=s.cursor.sync,[ie,we]=O.values,[ge,de]=O.scales,[te,Y]=We.match,Le=s.axes[0].side%2==1,Ve=T.ori==0?oe:C,Xe=T.ori==1?oe:C,ke=Le?h:c,Ne=Le?c:h,dt=Le?a:r,it=Le?r:a;if(ge!=null?r=te(A,ge)?p(ie,k[A],Ve,0):-10:r=Ve*(dt/ke),de!=null?a=Y(P,de)?p(we,k[P],Xe,0):-10:a=Xe*(it/Ne),T.ori==1){let Mt=r;r=a,a=Mt}}y&&(s==null||s.cursor.event.type==rs)&&((r<=1||r>=oe-1)&&(r=ml(r,oe)),(a<=1||a>=C-1)&&(a=ml(a,C))),x?(ei=r,ti=a,[Pl,Rl]=S.move(n,r,a)):(Ae=r,Pe=a)}const ts={width:0,height:0,left:0,top:0};function ls(){gn(ts,!1)}let ri,ai,ui,fi;function ci(t,s,r,a,c,h,_){el=!0,Ze=Qe=lt._x=lt._y=!1,es(t,s,r,a,c,h,_,!0,!1),t!=null&&(B(as,ms,pi,!1),Xl(Si,n,Pl,Rl,oe,C,null));let{left:x,top:y,width:A,height:P}=De;ri=x,ai=y,ui=A,fi=P}function pi(t,s,r,a,c,h,_){el=lt._x=lt._y=!1,es(t,s,r,a,c,h,_,!1,!0);let{left:x,top:y,width:A,height:P}=De,O=A>0||P>0,ie=ri!=x||ai!=y||ui!=A||fi!=P;if(O&&ie&&gn(De),lt.setScale&&O&&ie){let we=x,ge=A,de=y,te=P;if(T.ori==1&&(we=y,ge=P,de=x,te=A),Ze&&tl(E,Bt(we,E),Bt(we+ge,E)),Qe)for(let Y in k){let Le=k[Y];Y!=E&&Le.from==null&&Le.min!=Te&&tl(Y,Bt(de+te,Y),Bt(de,Y))}ls()}else S.lock&&(S._lock=!S._lock,dl(s,!0,t!=null));t!=null&&(xe(as,ms),Xl(as,n,Ae,Pe,oe,C,null))}function Tr(t,s,r,a,c,h,_){if(S._lock)return;fl(t);let x=el;if(el){let y=!0,A=!0,P=10,O,ie;T.ori==0?(O=Ze,ie=Qe):(O=Qe,ie=Ze),O&&ie&&(y=Ae<=P||Ae>=oe-P,A=Pe<=P||Pe>=C-P),O&&y&&(Ae=Ae<Pl?0:oe),ie&&A&&(Pe=Pe<Rl?0:C),dl(null,!0,!0),el=!1}Ae=-10,Pe=-10,me.fill(null),dl(null,!0,!0),x&&(el=x)}function di(t,s,r,a,c,h,_){S._lock||(fl(t),Hn(),ls(),t!=null&&Xl(Ti,n,Ae,Pe,oe,C,null))}function hi(){R.forEach(Nu),Nn(n.width,n.height,!0)}wl(Tn,Ol,hi);const Vl={};Vl.mousedown=ci,Vl.mousemove=oi,Vl.mouseup=pi,Vl.dblclick=di,Vl.setSeries=(t,s,r,a)=>{let c=We.match[2];r=c(n,s,r),r!=-1&&Gt(r,a,!0,!1)},fe&&(B(Si,L,ci),B(rs,L,oi),B(yi,L,t=>{fl(t),$l(!1)}),B(ki,L,Tr),B(Ti,L,di),ys.add(n),n.syncRect=$l);const vn=n.hooks=e.hooks||{};function $e(t,s,r){Jn?Jl.push([t,s,r]):t in vn&&vn[t].forEach(a=>{a.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)vn[s]=(vn[s]||[]).concat(t.hooks[s])});const mi=(t,s,r)=>r,We=Ge({key:null,setSeries:!1,filters:{pub:Vi,sub:Vi},scales:[E,b[1]?b[1].scale:null],match:[Ni,Ni,mi],values:[null,null]},S.sync);We.match.length==2&&We.match.push(mi),S.sync=We;const gi=We.key,ns=Oo(gi);function Xl(t,s,r,a,c,h,_){We.filters.pub(t,s,r,a,c,h,_)&&ns.pub(t,s,r,a,c,h,_)}ns.sub(n);function Mr(t,s,r,a,c,h,_){We.filters.sub(t,s,r,a,c,h,_)&&Vl[t](null,s,r,a,c,h,_)}n.pub=Mr;function Er(){ns.unsub(n),ys.delete(n),X.clear(),ws(Tn,Ol,hi),m.remove(),N?.remove(),$e("destroy")}n.destroy=Er;function ss(){$e("init",e,l),js(l||e.data,!1),U[E]?Zn(E,U[E]):Hn(),fn=De.show&&(De.width>0||De.height>0),ul=kt=!0,Nn(e.width,e.height)}return b.forEach(Us),R.forEach(ir),i?i instanceof HTMLElement?(i.appendChild(m),ss()):i(n,ss):ss(),n}Ye.assign=Ge;Ye.fmtNum=Rs;Ye.rangeNum=Mn;Ye.rangeLog=Dn;Ye.rangeAsinh=Cs;Ye.orient=bl;Ye.pxRatio=_e;Ye.join=Aa;Ye.fmtDate=zs,Ye.tzDate=Oa;Ye.sync=Oo;{Ye.addGap=xu,Ye.clipGaps=Pn;let e=Ye.paths={points:Yo};e.linear=qo,e.stepped=ku,e.bars=Tu,e.spline=Eu}const Qo="/api",Hu=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ou(e,l=24){const i=await fetch(`${Qo}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Wu(e=24){const l=await fetch(`${Qo}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Gu=je('<button type="button"> </button>'),Bu=je('<div class="chart-loading svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div> <span>Loading chart data...</span></div>'),Iu=je('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),Uu=je('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),Yu=je('<div class="chart-wrapper svelte-1e832qd"><div class="flex items-center justify-between mb-3"><div class="flex items-center gap-1.5"></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--amber-400);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div> <div class="chart-container svelte-1e832qd"><!></div></div>');function ju(e,l){Ts(l,!0);let i=Zt(()=>xn.config.smoothing_enabled),n=Zt(()=>xn.config.smoothing_samples),o=Nt("UTC"),f=Zt(()=>xn.config.temp_units==="C"),u,p=null,d=Nt(!0),m=Nt(null),w=Nt(24),g=Nt(wi([])),v=Nt(wi([]));const D={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},L="#fbbf24",F="rgba(251, 191, 36, 0.3)",z="#71717a",I="#a1a1aa",b="rgba(255, 255, 255, 0.04)",R="#22d3ee";function k(M,S,se){const fe=L,K=D[l.tiltColor]||I;return{width:M,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(N,W,H)=>{const $=(H-W)*.1||.005;return[W-$,H+$]}},temp:{auto:!0,range:(N,W,H)=>{const $=H-W,ue=10;if($<ue){const Oe=(H+W)/2;return[Oe-ue/2,Oe+ue/2]}const Ee=$*.1;return[W-Ee,H+Ee]}}},axes:[{stroke:z,grid:{stroke:b,width:1},ticks:{stroke:b,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,W)=>W.map(H=>{const $=new Date(H*1e3);return Q(w)<=24?$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",timeZone:se}):$.toLocaleDateString([],{month:"short",day:"numeric",timeZone:se})})},{scale:"sg",stroke:fe,grid:{stroke:b,width:1},ticks:{stroke:b,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,W)=>W.map(H=>H.toFixed(3)),side:3},{scale:"temp",stroke:K,grid:{show:!1},ticks:{stroke:b,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(N,W)=>W.map(H=>H.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:fe,width:2,fill:(N,W)=>{const H=N.ctx.createLinearGradient(0,N.bbox.top,0,N.bbox.top+N.bbox.height);return H.addColorStop(0,F),H.addColorStop(1,"transparent"),H},points:{show:!1},paths:Ye.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:K,width:1.5,dash:[4,4],points:{show:!1},paths:Ye.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:R,width:1.5,dash:[2,4],points:{show:!1},paths:Ye.paths.spline?.()}]}}function le(M,S){if(S<=1)return M;const se=[];for(let fe=0;fe<M.length;fe++){const K=[],N=Math.floor(S/2);for(let W=Math.max(0,fe-N);W<=Math.min(M.length-1,fe+N);W++){const H=M[W];H!==null&&K.push(H)}K.length>0?se.push(K.reduce((W,H)=>W+H,0)/K.length):se.push(null)}return se}function E(M,S,se,fe,K){if(M.length<=K)return[M,S,se,fe];const N=Math.ceil(M.length/K),W=[],H=[],$=[],ue=[];for(let Ee=0;Ee<M.length;Ee+=N){const Oe=Math.min(Ee+N,M.length);let st=0,xt=0,St=0,Lt=0,Kt=0,X=0;for(let B=Ee;B<Oe;B++)S[B]!==null&&(st+=S[B],xt++),se[B]!==null&&(St+=se[B],Lt++),fe[B]!==null&&(Kt+=fe[B],X++);W.push(M[Math.floor((Ee+Oe-1)/2)]),H.push(xt>0?st/xt:null),$.push(Lt>0?St/Lt:null),ue.push(X>0?Kt/X:null)}return[W,H,$,ue]}function J(M,S,se){if(M.length===0||S.length===0)return S.map(()=>null);const fe=[...M].sort((W,H)=>new Date(W.timestamp).getTime()-new Date(H.timestamp).getTime()),K=fe.map(W=>new Date(W.timestamp).getTime()/1e3),N=fe.map(W=>W.temperature===null?null:se?W.temperature:W.temperature*9/5+32);return S.map(W=>{let H=null,$=null;for(let ue=0;ue<K.length;ue++)if(K[ue]<=W&&(H={time:K[ue],temp:N[ue]}),K[ue]>=W&&$===null){$={time:K[ue],temp:N[ue]};break}if(H&&$&&H.temp!==null&&$.temp!==null){if(H.time===$.time)return H.temp;const ue=(W-H.time)/($.time-H.time);return H.temp+ue*($.temp-H.temp)}return H!==null&&H.temp!==null?H.temp:$!==null&&$.temp!==null?$.temp:null})}function j(M,S,se){const fe=[...M].reverse();let K=[],N=[],W=[];for(const ue of fe){K.push(new Date(ue.timestamp).getTime()/1e3),N.push(ue.sg_calibrated??ue.sg_raw);const Ee=ue.temp_calibrated??ue.temp_raw;Ee!==null?W.push(se?Rr(Ee):Ee):W.push(null)}let H=J(S,K,se);return Q(i)&&Q(n)>1&&(N=le(N,Q(n)),W=le(W,Q(n)),H=le(H,Q(n))),[K,N,W,H]=E(K,N,W,H,500),[K,N,W,H]}async function ne(){et(d,!0),et(m,null);try{const[M,S]=await Promise.all([Ou(l.tiltId,Q(w)),Wu(Q(w)).catch(()=>[])]);et(g,M,!0),et(v,S,!0),q()}catch(M){et(m,M instanceof Error?M.message:"Failed to load data",!0)}finally{et(d,!1)}}function q(){if(!u||Q(g).length===0)return;const M=j(Q(g),Q(v),Q(f)),S=k(u.clientWidth,Q(f),Q(o));p&&p.destroy(),p=new Ye(S,M,u)}function T(){p&&u&&p.setSize({width:u.clientWidth,height:220})}oo(async()=>{try{const M=await fetch("/api/system/timezone");if(M.ok){const S=await M.json();et(o,S.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}ne(),window.addEventListener("resize",T)}),Lr(()=>{p?.destroy(),window.removeEventListener("resize",T)}),is(()=>{Q(w)&&ne()}),is(()=>{Q(f)!==void 0&&Q(g).length>0&&u&&q()}),is(()=>{Q(i),Q(n),Q(g).length>0&&u&&q()});var ee=Yu(),V=ce(ee),Z=ce(V);Es(Z,21,()=>Hu,ro,(M,S)=>{var se=Gu();let fe;se.__click=()=>et(w,Q(S).hours,!0);var K=ce(se,!0);re(se),qt(()=>{fe=hs(se,1,"range-btn svelte-1e832qd",null,fe,{active:Q(w)===Q(S).hours}),vt(K,Q(S).label)}),ze(M,se)}),re(Z);var U=Re(Z,2),ae=Re(ce(U),2),G=ce(ae);il(2),re(ae),il(2),re(U),re(V);var He=Re(V,2),Se=ce(He);{var pe=M=>{var S=Bu();ze(M,S)},me=M=>{var S=ds(),se=kn(S);{var fe=N=>{var W=Iu(),H=Re(ce(W),2);H.__click=ne,re(W),ze(N,W)},K=N=>{var W=ds(),H=kn(W);{var $=ue=>{var Ee=Uu();ze(ue,Ee)};wt(H,ue=>{Q(g).length===0&&ue($)},!0)}ze(N,W)};wt(se,N=>{Q(m)?N(fe):N(K,!1)},!0)}ze(M,S)};wt(Se,M=>{Q(d)?M(pe):M(me,!1)})}re(He),uo(He,M=>u=M,()=>u),re(ee),qt(()=>Sn(G,`background: ${(D[l.tiltColor]||"var(--text-secondary)")??""};`)),ze(e,ee),Ms()}io(["click"]);var qu=je('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),Ku=je('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Ju=je('<div class="w-1 rounded-sm transition-all"></div>'),Zu=je('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),Qu=je('<div class="chart-section svelte-3twv7v"><!></div>'),$u=je('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),Xu=je('<div style="background: var(--bg-card); border: 1px solid var(--bg-hover);"><div class="h-1"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight reading-glow" style="color: var(--amber-400);"> </p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Gravity</p></div> <div class="rounded-lg p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-bold font-mono tracking-tight text-[var(--text-primary)]"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[10px] text-[var(--text-muted)] uppercase tracking-widest mt-1 font-medium">Temp</p></div></div> <!> <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full animate-pulse-soft" style="background: var(--tilt-green);"></div></div></div></div></div>');function ef(e,l){Ts(l,!0);let i=Br(l,"expanded",3,!1),n=Nt(!1),o=Nt(""),f=Nt(null),u=Nt(!1);function p(){et(o,l.tilt.beer_name,!0),et(n,!0),setTimeout(()=>Q(f)?.focus(),0)}async function d(){if(Q(u))return;const X=Q(o).trim();if(!X||X===l.tilt.beer_name){et(n,!1);return}et(u,!0);const B=await Hr(l.tilt.id,X);et(u,!1),B&&et(n,!1)}function m(X){X.key==="Enter"?d():X.key==="Escape"&&et(n,!1)}let w=Zt(ao);const g={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function v(X){return X.toFixed(3)}function D(X){return Fr(X)}function L(X){return X>=-50?{bars:4,color:"var(--tilt-green)"}:X>=-60?{bars:3,color:"var(--tilt-green)"}:X>=-70?{bars:2,color:"var(--amber-400)"}:{bars:1,color:"var(--tilt-red)"}}function F(X){const B=Math.floor((Date.now()-new Date(X).getTime())/1e3);if(B<10)return"just now";if(B<60)return`${B}s ago`;const xe=Math.floor(B/60);if(xe<60)return`${xe}m ago`;const Fe=Math.floor(xe/60);return Fe<24?`${Fe}h ago`:`${Math.floor(Fe/24)}d ago`}let z=Zt(()=>g[l.tilt.color]||"var(--tilt-black)"),I=Zt(()=>L(l.tilt.rssi)),b=Zt(()=>F(l.tilt.last_seen));var R=Xu();let k;var le=ce(R),E=Re(le,2),J=ce(E),j=ce(J),ne=ce(j);{var q=X=>{var B=qu();zr(B),B.__keydown=m,uo(B,xe=>et(f,xe),()=>Q(f)),qt(()=>B.disabled=Q(u)),Ar("blur",B,d),Gr(B,()=>Q(o),xe=>et(o,xe)),ze(X,B)},T=X=>{var B=Ku();B.__click=p;var xe=ce(B),Fe=ce(xe,!0);re(xe),il(2),re(B),qt(()=>vt(Fe,l.tilt.beer_name)),ze(X,B)};wt(ne,X=>{Q(n)?X(q):X(T,!1)})}var ee=Re(ne,2),V=ce(ee),Z=Re(V,2),U=ce(Z,!0);re(Z),re(ee),re(j);var ae=Re(j,2),G=ce(ae);Es(G,20,()=>Array(4),ro,(X,B,xe)=>{var Fe=Ju();qt(()=>Sn(Fe,`
								height: ${8+xe*4}px;
								background: ${(xe<Q(I).bars?Q(I).color:"var(--bg-hover)")??""};
								opacity: ${xe<Q(I).bars?1:.4};
							`)),ze(X,Fe)}),re(G);var He=Re(G,2),Se=ce(He);re(He),re(ae),re(J);var pe=Re(J,2),me=ce(pe),M=ce(me),S=ce(M,!0);re(M),il(2),re(me);var se=Re(me,2),fe=ce(se),K=ce(fe,!0),N=Re(K),W=ce(N,!0);re(N),re(fe),il(2),re(se),re(pe);var H=Re(pe,2);{var $=X=>{var B=Zu(),xe=Re(ce(B),2),Fe=ce(xe,!0);re(xe);var ct=Re(xe,4),oe=ce(ct);re(ct),re(B),qt((C,ye)=>{vt(Fe,C),vt(oe,`${ye??""}${Q(w)??""}`)},[()=>v(l.tilt.sg_raw),()=>D(l.tilt.temp_raw)]),ze(X,B)};wt(H,X=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&X($)})}var ue=Re(H,2);{var Ee=X=>{var B=Qu(),xe=ce(B);ju(xe,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color}}),re(B),ze(X,B)};wt(ue,X=>{i()&&X(Ee)})}var Oe=Re(ue,2),st=ce(Oe),xt=ce(st);re(st);var St=Re(st,2),Lt=ce(St);{var Kt=X=>{var B=$u();B.__click=function(...ct){l.onToggleExpand?.apply(this,ct)};var xe=ce(B);let Fe;re(B),qt(()=>{Vr(B,"aria-label",i()?"Collapse chart":"Expand chart"),Fe=hs(xe,0,"w-4 h-4 transition-transform",null,Fe,{"rotate-180":i()})}),ze(X,B)};wt(Lt,X=>{l.onToggleExpand&&X(Kt)})}il(2),re(St),re(Oe),re(E),re(R),qt((X,B)=>{k=hs(R,1,"card-glow rounded-xl overflow-hidden animate-fade-in-up svelte-3twv7v",null,k,{expanded:i()}),Sn(le,`background: ${Q(z)??""}; box-shadow: 0 0 20px ${Q(z)??""}40;`),Sn(V,`background: ${Q(z)??""}; box-shadow: 0 0 8px ${Q(z)??""};`),vt(U,l.tilt.color),vt(Se,`${l.tilt.rssi??""} dBm`),vt(S,X),vt(K,B),vt(W,Q(w)),vt(xt,`Updated ${Q(b)??""}`)},[()=>v(l.tilt.sg),()=>D(l.tilt.temp)]),ze(e,R),Ms()}io(["keydown","click"]);var tf=je('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),lf=je('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),nf=je('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),sf=je('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag"> </span> <span class="label svelte-1uha8ag">Temp</span></div>'),of=je('<div class="ambient-value svelte-1uha8ag"><span class="value svelte-1uha8ag"> </span> <span class="unit svelte-1uha8ag">%</span> <span class="label svelte-1uha8ag">Humidity</span></div>'),rf=je('<div class="ambient-card svelte-1uha8ag"><div class="ambient-header svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Room Ambient</span></div> <div class="ambient-values svelte-1uha8ag"><!> <!></div></div>'),af=je('<div class="tilt-grid svelte-1uha8ag"></div> <!>',1);function _f(e,l){Ts(l,!0),oo(()=>(Or(),()=>Wr()));let i=Zt(()=>Array.from(Yt.tilts.values())),n=Nt(null);function o(w){et(n,Q(n)===w?null:w,!0)}function f(w){return xn.config.temp_units==="F"?(w*9/5+32).toFixed(1):w.toFixed(1)}var u=ds();Nr("1uha8ag",w=>{Cr(()=>{Pr.title="Dashboard | Tilt UI"})});var p=kn(u);{var d=w=>{var g=nf(),v=Re(ce(g),4),D=ce(v);{var L=b=>{var R=Dr("Waiting for Tilt hydrometers to broadcast...");ze(b,R)},F=b=>{var R=tf();ze(b,R)};wt(D,b=>{Yt.connected?b(L):b(F,!1)})}re(v);var z=Re(v,2);{var I=b=>{var R=lf();ze(b,R)};wt(z,b=>{Yt.connected&&b(I)})}re(g),ze(w,g)},m=w=>{var g=af(),v=kn(g);Es(v,21,()=>Q(i),F=>F.id,(F,z)=>{{let I=Zt(()=>Q(n)===Q(z).id);ef(F,{get tilt(){return Q(z)},get expanded(){return Q(I)},onToggleExpand:()=>o(Q(z).id)})}}),re(v);var D=Re(v,2);{var L=F=>{var z=rf(),I=Re(ce(z),2),b=ce(I);{var R=E=>{var J=sf(),j=ce(J),ne=ce(j,!0);re(j);var q=Re(j,2),T=ce(q,!0);re(q),il(2),re(J),qt((ee,V)=>{vt(ne,ee),vt(T,V)},[()=>f(Yt.ambient.temperature),ao]),ze(E,J)};wt(b,E=>{Yt.ambient.temperature!==null&&E(R)})}var k=Re(b,2);{var le=E=>{var J=of(),j=ce(J),ne=ce(j,!0);re(j),il(4),re(J),qt(q=>vt(ne,q),[()=>Yt.ambient.humidity.toFixed(0)]),ze(E,J)};wt(k,E=>{Yt.ambient.humidity!==null&&E(le)})}re(I),re(z),ze(F,z)};wt(D,F=>{Yt.ambient&&(Yt.ambient.temperature!==null||Yt.ambient.humidity!==null)&&F(L)})}ze(w,g)};wt(p,w=>{Q(i).length===0?w(d):w(m,!1)})}ze(e,u),Ms()}export{_f as component};
