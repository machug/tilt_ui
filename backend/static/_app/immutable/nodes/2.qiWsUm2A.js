import{d as qn,c as ba,a as Ge,f as He,s as be,g as Sa,t as Gr}from"../chunks/lZYuFeLm.js";import{h as zr,k as Nr,b4 as Vr,f as Hr,ab as jn,ak as Us,g as _,am as Dt,af as Kn,ah as A,aj as E,ag as U,ac as ot,al as Rt,s as Me,an as zl,p as Fi,ad as ya,b3 as Ir,ae as Rs,V as Wr,ai as Br}from"../chunks/KfNDMb7P.js";import{e as Tn,i as In}from"../chunks/BrMo0dxU.js";import{B as Ur,i as Lt}from"../chunks/DN3Nn4_2.js";import{f as _n,c as Vn,d as Ys,e as qs,g as ka,r as Ta,s as En,i as Yr,h as qr}from"../chunks/ChgzmWUd.js";import{s as wl}from"../chunks/DG5yL5GD.js";import{u as jr,e as Kr,a as Ts}from"../chunks/Bz1qyV9t.js";import{w as vn}from"../chunks/Dp8S1B6d.js";import{s as Sn}from"../chunks/CeWgBmgT.js";import{b as Ea}from"../chunks/DvdFc3xZ.js";import{p as Wn,b as js}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){zr&&Nr();var n=new Ur(e),a=!Vr();Hr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const Xr=!0,St="u-",$r="uplot",eo=St+"hz",to=St+"vt",lo=St+"title",no=St+"wrap",so=St+"under",io=St+"over",ao=St+"axis",Gl=St+"off",ro=St+"select",oo=St+"cursor-x",uo=St+"cursor-y",co=St+"cursor-pt",fo=St+"legend",po=St+"live",ho=St+"inline",vo=St+"series",go=St+"marker",Oi=St+"label",mo=St+"value",wn="width",xn="height",gn="top",Gi="bottom",Ql="left",Es="right",Ks="#000",zi=Ks+"0",Ms="mousemove",Ni="mousedown",As="mouseup",Vi="mouseenter",Hi="mouseleave",Ii="dblclick",_o="resize",wo="scroll",Wi="change",Bn="dppxchange",Js="--",sn=typeof window<"u",Fs=sn?document:null,$l=sn?window:null,xo=sn?navigator:null;let Oe,Gn;function Os(){let e=devicePixelRatio;Oe!=e&&(Oe=e,Gn&&zs(Wi,Gn,Os),Gn=matchMedia(`(min-resolution: ${Oe-.001}dppx) and (max-resolution: ${Oe+.001}dppx)`),Nl(Wi,Gn,Os),$l.dispatchEvent(new CustomEvent(Bn)))}function Yt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Gs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Je(e,l,i){e.style[l]=i+"px"}function rl(e,l,i,n){let a=Fs.createElement(e);return l!=null&&Yt(a,l),i?.insertBefore(a,n),a}function Xt(e,l){return rl("div",e,l)}const Bi=new WeakMap;function gl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Bi.get(e);c!=u&&(e.style.transform=c,Bi.set(e,c),l<0||i<0||l>n||i>a?Yt(e,Gl):Gs(e,Gl))}const Ui=new WeakMap;function Yi(e,l,i){let n=l+i,a=Ui.get(e);n!=a&&(Ui.set(e,n),e.style.background=l,e.style.borderColor=i)}const qi=new WeakMap;function ji(e,l,i,n){let a=l+""+i,c=qi.get(e);a!=c&&(qi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},bo={...Zs,capture:!0};function Nl(e,l,i,n){l.addEventListener(e,i,n?bo:Zs)}function zs(e,l,i,n){l.removeEventListener(e,i,Zs)}sn&&Os();function ol(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:qt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ma(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Aa=e=>e!=null,Da=e=>e!=null&&e>0,Jn=Ma(Aa),So=Ma(Da);function yo(e,l,i,n=0,a=!1){let c=a?So:Jn,u=a?Da:Aa;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let v=l;v<=i;v++){let b=e[v];u(b)&&(b<p?p=b:b>d&&(d=b))}return[p??We,d??-We]}function Zn(e,l,i,n){let a=Zi(e),c=Zi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?xl:La,p=a==1?qt:$t,d=c==1?$t:qt,v=p(u(xt(e))),b=d(u(xt(l))),g=en(i,v),m=en(i,b);return i==10&&(v<0&&(g=Be(g,-v)),b<0&&(m=Be(m,-b))),n||i==2?(e=g*a,l=m*c):(e=Fa(e,g),l=Qn(l,m)),[e,l]}function Qs(e,l,i,n){let a=Zn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},yn={pad:0,soft:null,mode:0},ko={min:yn,max:yn};function Un(e,l,i,n){return Xn(i)?Ji(e,l,i):(yn.pad=i,yn.soft=n?0:null,yn.mode=n?3:0,Ji(e,l,ko))}function Pe(e,l){return e??l}function To(e,l,i){for(l=Pe(l,0),i=Pe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ji(e,l,i){let n=i.min,a=i.max,c=Pe(n.pad,0),u=Pe(a.pad,0),p=Pe(n.hard,-We),d=Pe(a.hard,We),v=Pe(n.soft,We),b=Pe(a.soft,-We),g=Pe(n.mode,0),m=Pe(a.mode,0),P=l-e,k=xl(P),R=Nt(xt(e),xt(l)),F=xl(R),V=xt(F-k);(P<1e-24||V>10)&&(P=0,(e==0||l==0)&&(P=1e-24,g==2&&v!=We&&(c=0),m==2&&b!=-We&&(u=0)));let S=P||R||1e3,H=xl(S),T=en(10,qt(H)),ee=S*(P==0?e==0?.1:1:c),O=Be(Fa(e-ee,T/10),24),Z=e>=v&&(g==1||g==3&&O<=v||g==2&&O>=v)?v:We,te=Nt(p,O<Z&&e>=Z?Z:ul(Z,O)),re=S*(P==0?l==0?.1:1:u),X=Be(Qn(l+re,T/10),24),w=l<=b&&(m==1||m==3&&X>=b||m==2&&X<=b)?b:-We,N=ul(d,X>w&&l<=w?w:Nt(w,X));return te==N&&te==0&&(N=100),[te,N]}const Eo=new Intl.NumberFormat(sn?xo.language:"en-US"),$s=e=>Eo.format(e),jt=Math,Hn=jt.PI,xt=jt.abs,qt=jt.floor,wt=jt.round,$t=jt.ceil,ul=jt.min,Nt=jt.max,en=jt.pow,Zi=jt.sign,xl=jt.log10,La=jt.log2,Mo=(e,l=1)=>jt.sinh(e)*l,Ds=(e,l=1)=>jt.asinh(e/l),We=1/0;function Qi(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Ns(e,l,i){return ul(Nt(e,l),i)}function Ca(e){return typeof e=="function"}function ye(e){return Ca(e)?e:()=>e}const Ao=()=>{},Pa=e=>e,Ra=(e,l)=>l,Do=e=>null,Xi=e=>!0,$i=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Vl=e=>{if(Ga(e)||Dl.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Vl(a)}e${c}`}return Be(e,n)};function Fl(e,l){return Vl(Be(Vl(e/l))*l)}function Qn(e,l){return Vl($t(Vl(e/l))*l)}function Fa(e,l){return Vl(qt(Vl(e/l))*l)}function Be(e,l=0){if(Ga(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return wt(n)/i}const Dl=new Map;function Oa(e){return((""+e).split(".")[1]||"").length}function Mn(e,l,i,n){let a=[],c=n.map(Oa);for(let u=l;u<i;u++){let p=xt(u),d=Be(en(e,u),p);for(let v=0;v<n.length;v++){let b=e==10?+`${n[v]}e${u}`:n[v]*d,g=(u>=0?0:p)+(u>=c[v]?0:c[v]),m=e==10?b:Be(b,g);a.push(m),Dl.set(m,g)}}return a}const kn={},ei=[],tn=[null,null],Al=Array.isArray,Ga=Number.isInteger,Co=e=>e===void 0;function ea(e){return typeof e=="string"}function Xn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),za="__proto__";function ln(e,l=Xn){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=ln(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=za&&(i[n]=ln(e[n],l))}else i=e;return i}function ht(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=za&&(Xn(e[a])?ht(e[a],ln(n[a])):e[a]=ln(n[a]))}return e}const Fo=0,Oo=1,Go=2;function zo(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function No(e,l){if(Io(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Wo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],v=d.length;for(let b=0;b<v;b++)i.add(d[b])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let v=1;v<p.length;v++){let b=p[v],g=Array(a).fill(void 0),m=l?l[u][v]:Oo,P=[];for(let k=0;k<b.length;k++){let R=b[k],F=c.get(d[k]);R===null?m!=Fo&&(g[F]=R,m==Go&&P.push(F)):g[F]=R}zo(g,P,a),n.push(g)}}return n}const Vo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];a.push(p)}return a}function Io(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Wo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Nt(1,qt((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const Na=["January","February","March","April","May","June","July","August","September","October","November","December"],Va=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ha(e){return e.slice(0,3)}const Bo=Va.map(Ha),Uo=Na.map(Ha),Yo={MMMM:Na,MMM:Uo,WWWW:Va,WWW:Bo};function mn(e){return(e<10?"0":"")+e}function qo(e){return(e<10?"00":e<100?"0":"")+e}const jo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>mn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>mn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>mn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>mn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>mn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>qo(e.getMilliseconds())};function ti(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?jo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Yn=[1,2,2.5,5],Zo=Mn(10,-32,0,Yn),Wa=Mn(10,0,32,Yn),Qo=Wa.filter(Ia),Ol=Zo.concat(Wa),li=`
`,Ba="{YYYY}",ta=li+Ba,Ua="{M}/{D}",bn=li+Ua,zn=bn+"/{YY}",Ya="{aa}",Xo="{h}:{mm}",Xl=Xo+Ya,la=li+Xl,na=":{ss}",Ne=null;function qa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,d=(e==1?Mn(10,0,3,Yn).filter(Ia):Mn(10,-3,0,Yn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Ba,Ne,Ne,Ne,Ne,Ne,Ne,1],[a*28,"{MMM}",ta,Ne,Ne,Ne,Ne,Ne,1],[a,Ua,ta,Ne,Ne,Ne,Ne,Ne,1],[n,"{h}"+Ya,zn,Ne,bn,Ne,Ne,Ne,1],[i,Xl,zn,Ne,bn,Ne,Ne,Ne,1],[l,na,zn+" "+Xl,Ne,bn+" "+Xl,Ne,la,Ne,1],[e,na+".{fff}",zn+" "+Xl,Ne,bn+" "+Xl,Ne,la,Ne,1]];function b(g){return(m,P,k,R,F,V)=>{let S=[],H=F>=u,T=F>=c&&F<u,ee=g(k),O=Be(ee*e,3),Z=Ls(ee.getFullYear(),H?0:ee.getMonth(),T||H?1:ee.getDate()),te=Be(Z*e,3);if(T||H){let re=T?F/c:0,X=H?F/u:0,w=O==te?O:Be(Ls(Z.getFullYear()+X,Z.getMonth()+re,1)*e,3),N=new Date(wt(w/e)),D=N.getFullYear(),J=N.getMonth();for(let C=0;w<=R;C++){let le=Ls(D+X*C,J+re*C,1),z=le-g(Be(le*e,3));w=Be((+le+z)*e,3),w<=R&&S.push(w)}}else{let re=F>=a?a:F,X=qt(k)-qt(O),w=te+X+Qn(O-te,re);S.push(w);let N=g(w),D=N.getHours()+N.getMinutes()/i+N.getSeconds()/n,J=F/n,C=m.axes[P]._space,le=V/C;for(;w=Be(w+F,e==1?0:3),!(w>R);)if(J>1){let z=qt(Be(D+J,6))%24,fe=g(w).getHours()-z;fe>1&&(fe=-1),w-=fe*n,D=(D+J)%24;let _e=S[S.length-1];Be((w-_e)/F,3)*le>=.7&&S.push(w)}else S.push(w)}return S}}return[d,v,b]}const[$o,eu,tu]=qa(1),[lu,nu,su]=qa(.001);Mn(2,-53,53,[1]);function sa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ia(e,l){return(i,n,a,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],d,v,b,g,m,P;return n.map(k=>{let R=e(k),F=R.getFullYear(),V=R.getMonth(),S=R.getDate(),H=R.getHours(),T=R.getMinutes(),ee=R.getSeconds(),O=F!=d&&p[2]||V!=v&&p[3]||S!=b&&p[4]||H!=g&&p[5]||T!=m&&p[6]||ee!=P&&p[7]||p[1];return d=F,v=V,b=S,g=H,m=T,P=ee,O(R)})}}function iu(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(d=>i(e(d)))}function Ls(e,l,i){return new Date(e,l,i)}function aa(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ra(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=Xt(),a=i.size(e,l);Je(n,wn,a),Je(n,xn,a);let c=a/-2;Je(n,"marginLeft",c),Je(n,"marginTop",c);let u=i.width(e,l,a);return u&&Je(n,"borderWidth",u),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const Cs=[0,0];function hu(e,l,i){return Cs[0]=l,Cs[1]=i,Cs}function Nn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ps(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Nn,mouseup:Nn,click:Nn,dblclick:Nn,mousemove:Ps,mouseleave:Ps,mouseenter:Ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},ja={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=ht({},ja,{filter:Ra}),Ka=ht({},ni,{size:10}),Ja=ht({},ja,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Za="bold "+si,Qa=1.5,oa={show:!0,scale:"x",stroke:Ks,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Za,side:2,grid:ni,ticks:Ka,border:Ja,font:si,lineGap:Qa,rotate:0},gu="Value",mu="Time",ua={show:!0,scale:"x",auto:!1,sorted:1,min:We,max:-We,idxs:[]};function _u(e,l,i,n,a){return l.map(c=>c==null?"":$s(c))}function wu(e,l,i,n,a,c,u){let p=[],d=Dl.get(a)||0;i=u?i:Be(Qn(i,a),d);for(let v=i;v<=n;v=Be(v+a,d))p.push(Object.is(v,-0)?0:v);return p}function Vs(e,l,i,n,a,c,u){const p=[],d=e.scales[e.axes[l].scale].log,v=d==10?xl:La,b=qt(v(i));a=en(d,b),d==10&&(a=Ol[ol(a,Ol)]);let g=i,m=a*d;d==10&&(m=Ol[ol(m,Ol)]);do p.push(g),g=g+a,d==10&&!Dl.has(g)&&(g=Be(g,Dl.get(a))),g>=m&&(a=g,m=a*d,d==10&&(m=Ol[ol(m,Ol)]));while(g<=n);return p}function xu(e,l,i,n,a,c,u){let d=e.scales[e.axes[l].scale].asinh,v=n>d?Vs(e,l,Nt(d,i),n,a):[d],b=n>=0&&i<=0?[0]:[];return(i<-d?Vs(e,l,Nt(d,-n),-i,a):[d]).reverse().map(m=>-m).concat(b,v)}const Xa=/./,bu=/[12357]/,Su=/[125]/,ca=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,v=c._space,b=d(10,u),g=d(9,u)-b>=v?Xa:d(7,u)-b>=v?bu:d(5,u)-b>=v?Su:ca;if(g==ca){let m=xt(d(1,u)-b);if(m<v)return Hs(l.slice().reverse(),p.distr,g,$t(v/m)).reverse()}return Hs(l,p.distr,g,1)}function ku(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,v=xt(d(1,u)-d(2,u));return v<p?Hs(l.slice().reverse(),3,Xa,$t(p/v)).reverse():l}function Tu(e,l,i,n){return n==null?Js:l==null?"":$s(l)}const fa={show:!0,scale:"y",stroke:Ks,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Za,side:3,grid:ni,ticks:Ka,border:Ja,font:si,lineGap:Qa,rotate:0};function Eu(e,l){let i=3+(e||1)*2;return Be(i*l,3)}function Mu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=xt(u-c),d=e.series[l],v=p/(d.points.space*Oe);return n[1]-n[0]<=v}const da={scale:null,auto:!0,sorted:0,min:We,max:-We},$a=(e,l,i,n,a)=>a,pa={show:!0,auto:!0,sorted:0,gaps:$a,alpha:1,facets:[ht({},da,{scale:"x"}),ht({},da,{scale:"y"})]},ha={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:$a,alpha:1,points:{show:Mu,filter:null},values:null,min:We,max:-We,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const er={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=ht({},er,{time:!1,ori:1}),va={};function tr(e,l){let i=va[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,d,v){for(let b=0;b<i.plots.length;b++)i.plots[b]!=a&&i.plots[b].pub(n,a,c,u,p,d,v)}},e!=null&&(va[e]=i)),i}const nn=1,Is=2;function Hl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],v=n==2?c[1]:c[l],b=n==2?u[a.facets[0].scale]:u[e.series[0].scale],g=n==2?u[a.facets[1].scale]:u[a.scale],m=p.left,P=p.top,k=p.width,R=p.height,F=e.valToPosH,V=e.valToPosV;return b.ori==0?i(a,d,v,b,g,F,V,m,P,k,R,es,an,ls,nr,ir):i(a,d,v,b,g,V,F,P,m,R,k,ts,rn,ri,sr,ar)}function ii(e,l){let i=0,n=0,a=Pe(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return a==-1?d.min:a==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function bl(e,l,i,n,a,c){return Hl(e,l,(u,p,d,v,b,g,m,P,k,R,F)=>{let V=u.pxRound;const S=v.dir*(v.ori==0?1:-1),H=v.ori==0?an:rn;let T,ee;S==1?(T=i,ee=n):(T=n,ee=i);let O=V(g(p[T],v,R,P)),Z=V(m(d[T],b,F,k)),te=V(g(p[ee],v,R,P)),re=V(m(c==1?b.max:b.min,b,F,k)),X=new Path2D(a);return H(X,te,re),H(X,O,re),H(X,O,Z),X})}function $n(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?ls:ri;let d=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let P=m[0]-d;P>0&&p(u,d,n,P,n+c),d=m[1]}}let v=i+a-d,b=10;v>0&&p(u,d,n-b/2,v,n+c+b)}return u}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],d=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let g=v,m=v;if(a==1)for(;++v<=n&&l[v]===null;)m=v;else for(;--v>=i&&l[v]===null;)m=v;let P=c(e[g]),k=m==g?P:c(e[m]),R=g-a;P=u<=0&&R>=0&&R<d?c(e[R]):P;let V=m+a;k=u>=0&&V>=0&&V<d?c(e[V]):k,k>=P&&p.push([P,k])}return p}function ga(e){return e==0?Pa:e==1?wt:l=>Fl(l,e)}function lr(e){let l=e==0?es:ts,i=e==0?(a,c,u,p,d,v)=>{a.arcTo(c,u,p,d,v)}:(a,c,u,p,d,v)=>{a.arcTo(u,c,d,p,v)},n=e==0?(a,c,u,p,d)=>{a.rect(c,u,p,d)}:(a,c,u,p,d)=>{a.rect(u,c,d,p)};return(a,c,u,p,d,v=0,b=0)=>{v==0&&b==0?n(a,c,u,p,d):(v=ul(v,p/2,d/2),b=ul(b,p/2,d/2),l(a,c+v,u),i(a,c+p,u,c+p,u+d,v),i(a,c+p,u+d,c,u+d,b),i(a,c,u+d,c,u,b),i(a,c,u,c+p,u,v),a.closePath())}}const es=(e,l,i)=>{e.moveTo(l,i)},ts=(e,l,i)=>{e.moveTo(i,l)},an=(e,l,i)=>{e.lineTo(l,i)},rn=(e,l,i)=>{e.lineTo(i,l)},ls=lr(0),ri=lr(1),nr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},sr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ar=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function rr(e){return(l,i,n,a,c)=>Hl(l,i,(u,p,d,v,b,g,m,P,k,R,F)=>{let{pxRound:V,points:S}=u,H,T;v.ori==0?(H=es,T=nr):(H=ts,T=sr);const ee=Be(S.width*Oe,3);let O=(S.size-S.width)/2*Oe,Z=Be(O*2,3),te=new Path2D,re=new Path2D,{left:X,top:w,width:N,height:D}=l.bbox;ls(re,X-Z,w-Z,N+Z*2,D+Z*2);const J=C=>{if(d[C]!=null){let le=V(g(p[C],v,R,P)),z=V(m(d[C],b,F,k));H(te,le+O,z),T(te,le,z,O,0,Hn*2)}};if(c)c.forEach(J);else for(let C=n;C<=a;C++)J(C);return{stroke:ee>0?te:null,fill:te,clip:re,flags:nn|Is}})}function or(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Pu=or(an),Ru=or(rn);function ur(e){const l=Pe(e?.alignGaps,0);return(i,n,a,c)=>Hl(i,n,(u,p,d,v,b,g,m,P,k,R,F)=>{[a,c]=Jn(d,a,c);let V=u.pxRound,S=D=>V(g(D,v,R,P)),H=D=>V(m(D,b,F,k)),T,ee;v.ori==0?(T=an,ee=Pu):(T=rn,ee=Ru);const O=v.dir*(v.ori==0?1:-1),Z={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:nn},te=Z.stroke;let re=!1;if(c-a>=R*4){let D=q=>i.posToVal(q,v.key,!0),J=null,C=null,le,z,De,ke=S(p[O==1?a:c]),fe=S(p[a]),_e=S(p[c]),ce=D(O==1?fe+1:_e-1);for(let q=O==1?a:c;q>=a&&q<=c;q+=O){let Se=p[q],we=(O==1?Se<ce:Se>ce)?ke:S(Se),de=d[q];we==ke?de!=null?(z=de,J==null?(T(te,we,H(z)),le=J=C=z):z<J?J=z:z>C&&(C=z)):de===null&&(re=!0):(J!=null&&ee(te,ke,H(J),H(C),H(le),H(z)),de!=null?(z=de,T(te,we,H(z)),J=C=le=z):(J=C=null,de===null&&(re=!0)),ke=we,ce=D(ke+O))}J!=null&&J!=C&&De!=ke&&ee(te,ke,H(J),H(C),H(le),H(z))}else for(let D=O==1?a:c;D>=a&&D<=c;D+=O){let J=d[D];J===null?re=!0:J!=null&&T(te,S(p[D]),H(J))}let[w,N]=ii(i,n);if(u.fill!=null||w!=0){let D=Z.fill=new Path2D(te),J=u.fillTo(i,n,u.min,u.max,w),C=H(J),le=S(p[a]),z=S(p[c]);O==-1&&([z,le]=[le,z]),T(D,z,C),T(D,le,C)}if(!u.spanGaps){let D=[];re&&D.push(...ai(p,d,a,c,O,S,l)),Z.gaps=D=u.gaps(i,n,a,c,D),Z.clip=$n(D,v.ori,P,k,R,F)}return N!=0&&(Z.band=N==2?[bl(i,n,a,c,te,-1),bl(i,n,a,c,te,1)]:bl(i,n,a,c,te,N)),Z})}function Fu(e){const l=Pe(e.align,1),i=Pe(e.ascDesc,!1),n=Pe(e.alignGaps,0),a=Pe(e.extend,!1);return(c,u,p,d)=>Hl(c,u,(v,b,g,m,P,k,R,F,V,S,H)=>{[p,d]=Jn(g,p,d);let T=v.pxRound,{left:ee,width:O}=c.bbox,Z=fe=>T(k(fe,m,S,F)),te=fe=>T(R(fe,P,H,V)),re=m.ori==0?an:rn;const X={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:nn},w=X.stroke,N=m.dir*(m.ori==0?1:-1);let D=te(g[N==1?p:d]),J=Z(b[N==1?p:d]),C=J,le=J;a&&l==-1&&(le=ee,re(w,le,D)),re(w,J,D);for(let fe=N==1?p:d;fe>=p&&fe<=d;fe+=N){let _e=g[fe];if(_e==null)continue;let ce=Z(b[fe]),q=te(_e);l==1?re(w,ce,D):re(w,C,q),re(w,ce,q),D=q,C=ce}let z=C;a&&l==1&&(z=ee+O,re(w,z,D));let[De,ke]=ii(c,u);if(v.fill!=null||De!=0){let fe=X.fill=new Path2D(w),_e=v.fillTo(c,u,v.min,v.max,De),ce=te(_e);re(fe,z,ce),re(fe,le,ce)}if(!v.spanGaps){let fe=[];fe.push(...ai(b,g,p,d,N,Z,n));let _e=v.width*Oe/2,ce=i||l==1?_e:-_e,q=i||l==-1?-_e:_e;fe.forEach(Se=>{Se[0]+=ce,Se[1]+=q}),X.gaps=fe=v.gaps(c,u,p,d,fe),X.clip=$n(fe,m.ori,F,V,S,H)}return ke!=0&&(X.band=ke==2?[bl(c,u,p,d,w,-1),bl(c,u,p,d,w,1)]:bl(c,u,p,d,w,ke)),X})}function ma(e,l,i,n,a,c,u=We){if(e.length>1){let p=null;for(let d=0,v=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let b=xt(e[d]-e[p]);b<v&&(v=b,u=xt(i(e[d],n,a,c)-i(e[p],n,a,c)))}p=d}}return u}function Ou(e){e=e||kn;const l=Pe(e.size,[.6,We,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=ye(a),u=1-l[0],p=Pe(l[1],We),d=Pe(l[2],1),v=Pe(e.disp,kn),b=Pe(e.each,P=>{}),{fill:g,stroke:m}=v;return(P,k,R,F)=>Hl(P,k,(V,S,H,T,ee,O,Z,te,re,X,w)=>{let N=V.pxRound,D=i,J=n*Oe,C=p*Oe,le=d*Oe,z,De;T.ori==0?[z,De]=c(P,k):[De,z]=c(P,k);const ke=T.dir*(T.ori==0?1:-1);let fe=T.ori==0?ls:ri,_e=T.ori==0?b:(G,Ae,j,oe,Ee,Re,at)=>{b(G,Ae,j,Ee,oe,at,Re)},ce=Pe(P.bands,ei).find(G=>G.series[0]==k),q=ce!=null?ce.dir:0,Se=V.fillTo(P,k,V.min,V.max,q),Ie=N(Z(Se,ee,w,re)),we,de,$e,Qe=X,Te=N(V.width*Oe),st=!1,et=null,Ue=null,Xe=null,vt=null;g!=null&&(Te==0||m!=null)&&(st=!0,et=g.values(P,k,R,F),Ue=new Map,new Set(et).forEach(G=>{G!=null&&Ue.set(G,new Path2D)}),Te>0&&(Xe=m.values(P,k,R,F),vt=new Map,new Set(Xe).forEach(G=>{G!=null&&vt.set(G,new Path2D)})));let{x0:pe,size:it}=v;if(pe!=null&&it!=null){D=1,S=pe.values(P,k,R,F),pe.unit==2&&(S=S.map(j=>P.posToVal(te+j*X,T.key,!0)));let G=it.values(P,k,R,F);it.unit==2?de=G[0]*X:de=O(G[0],T,X,te)-O(0,T,X,te),Qe=ma(S,H,O,T,X,te,Qe),$e=Qe-de+J}else Qe=ma(S,H,O,T,X,te,Qe),$e=Qe*u+J,de=Qe-$e;$e<1&&($e=0),Te>=de/2&&(Te=0),$e<5&&(N=Pa);let Ft=$e>0,gt=Qe-$e-(Ft?Te:0);de=N(Ns(gt,le,C)),we=(D==0?de/2:D==ke?0:de)-D*ke*((D==0?J/2:0)+(Ft?Te/2:0));const Ye={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},ut=st?null:new Path2D;let mt=null;if(ce!=null)mt=P.data[ce.series[1]];else{let{y0:G,y1:Ae}=v;G!=null&&Ae!=null&&(H=Ae.values(P,k,R,F),mt=G.values(P,k,R,F))}let Vt=z*de,ie=De*de;for(let G=ke==1?R:F;G>=R&&G<=F;G+=ke){let Ae=H[G];if(Ae==null)continue;if(mt!=null){let Y=mt[G]??0;if(Ae-Y==0)continue;Ie=Z(Y,ee,w,re)}let j=T.distr!=2||v!=null?S[G]:G,oe=O(j,T,X,te),Ee=Z(Pe(Ae,Se),ee,w,re),Re=N(oe-we),at=N(Nt(Ee,Ie)),L=N(ul(Ee,Ie)),W=at-L;if(Ae!=null){let Y=Ae<0?ie:Vt,ne=Ae<0?Vt:ie;st?(Te>0&&Xe[G]!=null&&fe(vt.get(Xe[G]),Re,L+qt(Te/2),de,Nt(0,W-Te),Y,ne),et[G]!=null&&fe(Ue.get(et[G]),Re,L+qt(Te/2),de,Nt(0,W-Te),Y,ne)):fe(ut,Re,L+qt(Te/2),de,Nt(0,W-Te),Y,ne),_e(P,k,G,Re-Te/2,L,de+Te,W)}}return Te>0?Ye.stroke=st?vt:ut:st||(Ye._fill=V.width==0?V._fill:V._stroke??V._fill,Ye.width=0),Ye.fill=st?Ue:ut,Ye})}function Gu(e,l){const i=Pe(l?.alignGaps,0);return(n,a,c,u)=>Hl(n,a,(p,d,v,b,g,m,P,k,R,F,V)=>{[c,u]=Jn(v,c,u);let S=p.pxRound,H=z=>S(m(z,b,F,k)),T=z=>S(P(z,g,V,R)),ee,O,Z;b.ori==0?(ee=es,Z=an,O=ir):(ee=ts,Z=rn,O=ar);const te=b.dir*(b.ori==0?1:-1);let re=H(d[te==1?c:u]),X=re,w=[],N=[];for(let z=te==1?c:u;z>=c&&z<=u;z+=te)if(v[z]!=null){let ke=d[z],fe=H(ke);w.push(X=fe),N.push(T(v[z]))}const D={stroke:e(w,N,ee,Z,O,S),fill:null,clip:null,band:null,gaps:null,flags:nn},J=D.stroke;let[C,le]=ii(n,a);if(p.fill!=null||C!=0){let z=D.fill=new Path2D(J),De=p.fillTo(n,a,p.min,p.max,C),ke=T(De);Z(z,X,ke),Z(z,re,ke)}if(!p.spanGaps){let z=[];z.push(...ai(d,v,c,u,te,H,i)),D.gaps=z=p.gaps(n,a,c,u,z),D.clip=$n(z,b.ori,k,R,F,V)}return le!=0&&(D.band=le==2?[bl(n,a,c,u,J,-1),bl(n,a,c,u,J,1)]:bl(n,a,c,u,J,le)),D})}function zu(e){return Gu(Nu,e)}function Nu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),v=Array(u-1),b=Array(u-1),g=Array(u-1);for(let m=0;m<u-1;m++)b[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],v[m]=b[m]/g[m];d[0]=v[0];for(let m=1;m<u-1;m++)v[m]===0||v[m-1]===0||v[m-1]>0!=v[m]>0?d[m]=0:(d[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/v[m-1]+(g[m]+2*g[m-1])/v[m]),isFinite(d[m])||(d[m]=0));d[u-1]=v[u-2];for(let m=0;m<u-1;m++)a(p,e[m]+g[m]/3,l[m]+d[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-d[m+1]*g[m]/3,e[m+1],l[m+1])}return p}const Ws=new Set;function _a(){for(let e of Ws)e.syncRect(!0)}sn&&(Nl(_o,$l,_a),Nl(wo,$l,_a,!0),Nl(Bn,$l,()=>{bt.pxRatio=Oe}));const Vu=ur(),Hu=rr();function wa(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Bs(c,u,l,i))}function Iu(e,l){return e.map((i,n)=>n==0?{}:ht({},l,i))}function Bs(e,l,i,n){return ht({},l==0?i:n,e)}function cr(e,l,i){return l==null?tn:[l,i]}const Wu=cr;function Bu(e,l,i){return l==null?tn:Un(l,i,Xs,!0)}function fr(e,l,i,n){return l==null?tn:Zn(l,i,e.scales[n].log,!1)}const Uu=fr;function dr(e,l,i,n){return l==null?tn:Qs(l,i,e.scales[n].log,!1)}const Yu=dr;function qu(e,l,i,n,a){let c=Nt(Qi(e),Qi(l)),u=l-e,p=ol(a/n*u,i);do{let d=i[p],v=n*d/u;if(v>=a&&c+(d<5?Dl.get(d):0)<=17)return[d,v]}while(++p<i.length);return[0,0]}function xa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=wt((i=+a)*Oe))+"px"),[e,l,i]}function ju(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Be(l[2]*Oe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function bt(e,l,i){const n={mode:Pe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const v=n.root=Xt($r);if(e.id!=null&&(v.id=e.id),Yt(v,e.class),e.title){let t=Xt(lo,v);t.textContent=e.title}const b=rl("canvas"),g=n.ctx=b.getContext("2d"),m=Xt(no,v);Nl("click",m,t=>{t.target===k&&(qe!=ql||Ze!=jl)&&Pt.click(n,t)},!0);const P=n.under=Xt(so,m);m.appendChild(b);const k=n.over=Xt(io,m);e=ln(e);const R=+Pe(e.pxAlign,1),F=ga(R);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const V=e.ms||.001,S=n.series=a==1?wa(e.series||[],ua,ha,!1):Iu(e.series||[null],pa),H=n.axes=wa(e.axes||[],oa,fa,!0),T=n.scales={},ee=n.bands=e.bands||[];ee.forEach(t=>{t.fill=ye(t.fill||null),t.dir=Pe(t.dir,-1)});const O=a==2?S[1].facets[0].scale:S[0].scale,Z={axes:br,series:gr},te=(e.drawOrder||["axes","series"]).map(t=>Z[t]);function re(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,x=h-f;return(o-f)/x}}function X(t){let s=T[t];if(s==null){let r=(e.scales||kn)[t]||kn;if(r.from!=null){X(r.from);let o=ht({},T[r.from],r,{key:t});o.valToPct=re(o),T[t]=o}else{s=T[t]=ht({},t==O?er:Du,r),s.key=t;let o=s.time,f=s.range,h=Al(f);if((t!=O||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Xn(f))){let x=f;f=(y,M,I)=>M==null?tn:Un(M,I,x)}s.range=ye(f||(o?Wu:t==O?s.distr==3?Uu:s.distr==4?Yu:cr:s.distr==3?fr:s.distr==4?dr:Bu)),s.auto=ye(h?!1:s.auto),s.clamp=ye(s.clamp||Au),s._min=s._max=null,s.valToPct=re(s)}}}X("x"),X("y"),a==1&&S.forEach(t=>{X(t.scale)}),H.forEach(t=>{X(t.scale)});for(let t in e.scales)X(t);const w=T[O],N=w.distr;let D,J;w.ori==0?(Yt(v,eo),D=c,J=u):(Yt(v,to),D=u,J=c);const C={};for(let t in T){let s=T[t];(s.min!=null||s.max!=null)&&(C[t]={min:s.min,max:s.max},s.min=s.max=null)}const le=e.tzDate||(t=>new Date(wt(t/V))),z=e.fmtDate||ti,De=V==1?tu(le):su(le),ke=ia(le,sa(V==1?eu:nu,z)),fe=ra(le,aa(au,z)),_e=[],ce=n.legend=ht({},uu,e.legend),q=n.cursor=ht({},vu,{drag:{y:a==2}},e.cursor),Se=ce.show,Ie=q.show,we=ce.markers;ce.idxs=_e,we.width=ye(we.width),we.dash=ye(we.dash),we.stroke=ye(we.stroke),we.fill=ye(we.fill);let de,$e,Qe,Te=[],st=[],et,Ue=!1,Xe={};if(ce.live){const t=S[1]?S[1].values:null;Ue=t!=null,et=Ue?t(n,1,0):{_:0};for(let s in et)Xe[s]=Js}if(Se)if(de=rl("table",fo,v),Qe=rl("tbody",null,de),ce.mount(n,de),Ue){$e=rl("thead",null,de,Qe);let t=rl("tr",null,$e);rl("th",null,t);for(var vt in et)rl("th",Oi,t).textContent=vt}else Yt(de,ho),ce.live&&Yt(de,po);const pe={show:!0},it={show:!1};function Ft(t,s){if(s==0&&(Ue||!ce.live||a==2))return tn;let r=[],o=rl("tr",vo,Qe,Qe.childNodes[s]);Yt(o,t.class),t.show||Yt(o,Gl);let f=rl("th",null,o);if(we.show){let y=Xt(go,f);if(s>0){let M=we.width(n,s);M&&(y.style.border=M+"px "+we.dash(n,s)+" "+we.stroke(n,s)),y.style.background=we.fill(n,s)}}let h=Xt(Oi,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(we.show||(h.style.color=t.width>0?we.stroke(n,s):we.fill(n,s)),Ye("click",f,y=>{if(q._lock)return;ft(y);let M=S.indexOf(t);if((y.ctrlKey||y.metaKey)!=ce.isolate){let I=S.some((B,K)=>K>0&&K!=M&&B.show);S.forEach((B,K)=>{K>0&&dl(K,I?K==M?pe:it:pe,!0,pt.setSeries)})}else dl(M,{show:!t.show},!0,pt.setSeries)},!1),ll&&Ye(Vi,f,y=>{q._lock||(ft(y),dl(S.indexOf(t),Jl,!0,pt.setSeries))},!1));for(var x in et){let y=rl("td",mo,o);y.textContent="--",r.push(y)}return[o,r]}const gt=new Map;function Ye(t,s,r,o=!0){const f=gt.get(s)||{},h=q.bind[t](n,s,r,o);h&&(Nl(t,s,f[t]=h),gt.set(s,f))}function ut(t,s,r){const o=gt.get(s)||{};for(let f in o)(t==null||f==t)&&(zs(f,s,o[f]),delete o[f]);t==null&&gt.delete(s)}let mt=0,Vt=0,ie=0,G=0,Ae=0,j=0,oe=Ae,Ee=j,Re=ie,at=G,L=0,W=0,Y=0,ne=0;n.bbox={};let ae=!1,ge=!1,$=!1,Q=!1,ze=!1,me=!1;function tt(t,s,r){(r||t!=n.width||s!=n.height)&&ct(t,s),Wl(!1),$=!0,ge=!0,Bl()}function ct(t,s){n.width=mt=ie=t,n.height=Vt=G=s,Ae=j=0,cl(),tl();let r=n.bbox;L=r.left=Fl(Ae*Oe,.5),W=r.top=Fl(j*Oe,.5),Y=r.width=Fl(ie*Oe,.5),ne=r.height=Fl(G*Oe,.5)}const Kt=3;function Jt(){let t=!1,s=0;for(;!t;){s++;let r=wr(s),o=xr(s);t=s==Kt||r&&o,t||(ct(n.width,n.height),ge=!0)}}function el({width:t,height:s}){tt(t,s)}n.setSize=el;function cl(){let t=!1,s=!1,r=!1,o=!1;H.forEach((f,h)=>{if(f.show&&f._show){let{side:x,_size:y}=f,M=x%2,I=f.label!=null?f.labelSize:0,B=y+I;B>0&&(M?(ie-=B,x==3?(Ae+=B,o=!0):r=!0):(G-=B,x==0?(j+=B,t=!0):s=!0))}}),nl[0]=t,nl[1]=r,nl[2]=s,nl[3]=o,ie-=fl[1]+fl[3],Ae+=fl[3],G-=fl[2]+fl[0],j+=fl[0]}function tl(){let t=Ae+ie,s=j+G,r=Ae,o=j;function f(h,x){switch(h){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}H.forEach((h,x)=>{if(h.show&&h._show){let y=h.side;h._pos=f(y,h._size),h.label!=null&&(h._lpos=f(y,h.labelSize))}})}if(q.dataIdx==null){let t=q.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=ye(t.prox),o=t.bias??=0;q.dataIdx=(f,h,x,y)=>{if(h==0)return x;let M=x,I=r(f,h,x,y)??We,B=I>=0&&I<We,K=w.ori==0?ie:G,he=q.left,Fe=l[0],Ce=l[h];if(s.has(Ce[x])){M=null;let xe=null,ue=null,se;if(o==0||o==-1)for(se=x;xe==null&&se-- >0;)s.has(Ce[se])||(xe=se);if(o==0||o==1)for(se=x;ue==null&&se++<Ce.length;)s.has(Ce[se])||(ue=se);if(xe!=null||ue!=null)if(B){let Ke=xe==null?-1/0:D(Fe[xe],w,K,0),lt=ue==null?1/0:D(Fe[ue],w,K,0),At=he-Ke,Ve=lt-he;At<=Ve?At<=I&&(M=xe):Ve<=I&&(M=ue)}else M=ue==null?xe:xe==null?ue:x-xe<=ue-x?xe:ue}else B&&xt(he-D(Fe[x],w,K,0))>I&&(M=null);return M}}const ft=t=>{q.event=t};q.idxs=_e,q._lock=!1;let ve=q.points;ve.show=ye(ve.show),ve.size=ye(ve.size),ve.stroke=ye(ve.stroke),ve.width=ye(ve.width),ve.fill=ye(ve.fill);const rt=n.focus=ht({},e.focus||{alpha:.3},q.focus),ll=rt.prox>=0,_t=ll&&ve.one;let Le=[],dt=[],It=[];function Sl(t,s){let r=ve.show(n,s);if(r instanceof HTMLElement)return Yt(r,co),Yt(r,t.class),gl(r,-10,-10,ie,G),k.insertBefore(r,Le[s]),r}function yl(t,s){if(a==1||s>0){let r=a==1&&T[t.scale].time,o=t.value;t.value=r?ea(o)?ra(le,aa(o,z)):o||fe:o||Tu,t.label=t.label||(r?mu:gu)}if(_t||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Vu||Do,t.fillTo=ye(t.fillTo||Lu),t.pxAlign=+Pe(t.pxAlign,R),t.pxRound=ga(t.pxAlign),t.stroke=ye(t.stroke||null),t.fill=ye(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Eu(Nt(1,t.width),1),o=t.points=ht({},{size:r,width:Nt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=ye(o.show),o.filter=ye(o.filter),o.fill=ye(o.fill),o.stroke=ye(o.stroke),o.paths=ye(o.paths),o.pxAlign=t.pxAlign}if(Se){let r=Ft(t,s);Te.splice(s,0,r[0]),st.splice(s,0,r[1]),ce.values.push(null)}if(Ie){_e.splice(s,0,null);let r=null;_t?s==0&&(r=Sl(t,s)):s>0&&(r=Sl(t,s)),Le.splice(s,0,r),dt.splice(s,0,0),It.splice(s,0,0)}Mt("addSeries",s)}function on(t,s){s=s??S.length,t=a==1?Bs(t,s,ua,ha):Bs(t,s,{},pa),S.splice(s,0,t),yl(S[s],s)}n.addSeries=on;function ml(t){if(S.splice(t,1),Se){ce.values.splice(t,1),st.splice(t,1);let s=Te.splice(t,1)[0];ut(null,s.firstChild),s.remove()}Ie&&(_e.splice(t,1),Le.splice(t,1)[0].remove(),dt.splice(t,1),It.splice(t,1)),Mt("delSeries",t)}n.delSeries=ml;const nl=[!1,!1,!1,!1];function ns(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=T[t.scale];o==null&&(t.scale=r?S[1].scale:O,o=T[t.scale]);let f=o.time;t.size=ye(t.size),t.space=ye(t.space),t.rotate=ye(t.rotate),Al(t.incrs)&&t.incrs.forEach(x=>{!Dl.has(x)&&Dl.set(x,Oa(x))}),t.incrs=ye(t.incrs||(o.distr==2?Qo:f?V==1?$o:lu:Ol)),t.splits=ye(t.splits||(f&&o.distr==1?De:o.distr==3?Vs:o.distr==4?xu:wu)),t.stroke=ye(t.stroke),t.grid.stroke=ye(t.grid.stroke),t.ticks.stroke=ye(t.ticks.stroke),t.border.stroke=ye(t.border.stroke);let h=t.values;t.values=Al(h)&&!Al(h[0])?ye(h):f?Al(h)?ia(le,sa(h,z)):ea(h)?iu(le,h):h||ke:h||_u,t.filter=ye(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Ra)),t.font=xa(t.font),t.labelFont=xa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(nl[s]=!0,t._el=Xt(ao,m))}}function Ll(t,s,r,o){let[f,h,x,y]=r,M=s%2,I=0;return M==0&&(y||h)&&(I=s==0&&!f||s==2&&!x?wt(oa.size/3):0),M==1&&(f||x)&&(I=s==1&&!h||s==3&&!y?wt(fa.size/2):0),I}const An=n.padding=(e.padding||[Ll,Ll,Ll,Ll]).map(t=>ye(Pe(t,Ll))),fl=n._padding=An.map((t,s)=>t(n,s,nl,0));let Ct,yt=null,kt=null;const Dn=a==1?S[0].idxs:null;let sl=null,un=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){Ct=0;for(let r=1;r<S.length;r++)Ct+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),sl=l[0],Ct=sl.length;let r=l;if(N==2){r=l.slice();let o=r[0]=Array(Ct);for(let f=0;f<Ct;f++)o[f]=f}n._data=l=r}if(Wl(!0),Mt("setData"),N==2&&($=!0),s!==!1){let r=w;r.auto(n,un)?ss():Tl(O,r.min,r.max),Q=Q||q.left>=0,me=!0,Bl()}}n.setData=oi;function ss(){un=!0;let t,s;a==1&&(Ct>0?(yt=Dn[0]=0,kt=Dn[1]=Ct-1,t=l[0][yt],s=l[0][kt],N==2?(t=yt,s=kt):t==s&&(N==3?[t,s]=Zn(t,t,w.log,!1):N==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+wt(86400/V):[t,s]=Un(t,s,Xs,!0))):(yt=Dn[0]=t=null,kt=Dn[1]=s=null)),Tl(O,t,s)}let Ln,Il,is,as,rs,os,us,cs,fs,Ht;function ui(t,s,r,o,f,h){t??=zi,r??=ei,o??="butt",f??=zi,h??="round",t!=Ln&&(g.strokeStyle=Ln=t),f!=Il&&(g.fillStyle=Il=f),s!=is&&(g.lineWidth=is=s),h!=rs&&(g.lineJoin=rs=h),o!=os&&(g.lineCap=os=o),r!=as&&g.setLineDash(as=r)}function ci(t,s,r,o){s!=Il&&(g.fillStyle=Il=s),t!=us&&(g.font=us=t),r!=cs&&(g.textAlign=cs=r),o!=fs&&(g.textBaseline=fs=o)}function ds(t,s,r,o,f=0){if(o.length>0&&t.auto(n,un)&&(s==null||s.min==null)){let h=Pe(yt,0),x=Pe(kt,o.length-1),y=r.min==null?yo(o,h,x,f,t.distr==3):[r.min,r.max];t.min=ul(t.min,r.min=y[0]),t.max=Nt(t.max,r.max=y[1])}}const fi={min:null,max:null};function hr(){for(let o in T){let f=T[o];C[o]==null&&(f.min==null||C[O]!=null&&f.auto(n,un))&&(C[o]=fi)}for(let o in T){let f=T[o];C[o]==null&&f.from!=null&&C[f.from]!=null&&(C[o]=fi)}C[O]!=null&&Wl(!0);let t={};for(let o in C){let f=C[o];if(f!=null){let h=t[o]=ln(T[o],Po);if(f.min!=null)ht(h,f);else if(o!=O||a==2)if(Ct==0&&h.from==null){let x=h.range(n,null,null,o);h.min=x[0],h.max=x[1]}else h.min=We,h.max=-We}}if(Ct>0){S.forEach((o,f)=>{if(a==1){let h=o.scale,x=C[h];if(x==null)return;let y=t[h];if(f==0){let M=y.range(n,y.min,y.max,h);y.min=M[0],y.max=M[1],yt=ol(y.min,l[0]),kt=ol(y.max,l[0]),kt-yt>1&&(l[0][yt]<y.min&&yt++,l[0][kt]>y.max&&kt--),o.min=sl[yt],o.max=sl[kt]}else o.show&&o.auto&&ds(y,x,o,l[f],o.sorted);o.idxs[0]=yt,o.idxs[1]=kt}else if(f>0&&o.show&&o.auto){let[h,x]=o.facets,y=h.scale,M=x.scale,[I,B]=l[f],K=t[y],he=t[M];K!=null&&ds(K,C[y],h,I,h.sorted),he!=null&&ds(he,C[M],x,B,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],h=C[o];if(f.from==null&&(h==null||h.min==null)){let x=f.range(n,f.min==We?null:f.min,f.max==-We?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let x=f.range(n,h.min,h.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=T[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let x=h.distr;h._min=x==3?xl(h.min):x==4?Ds(h.min,h.asinh):x==100?h.fwd(h.min):h.min,h._max=x==3?xl(h.max):x==4?Ds(h.max,h.asinh):x==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){S.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)$=!0,Mt("setScale",o);Ie&&q.left>=0&&(Q=me=!0)}for(let o in C)C[o]=null}function vr(t){let s=Ns(yt-1,0,Ct-1),r=Ns(kt+1,0,Ct-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Ct-1;)r++;return[s,r]}function gr(){if(Ct>0){let t=S.some(s=>s._focus)&&Ht!=rt.alpha;t&&(g.globalAlpha=Ht=rt.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=Ht;Ht!=s.alpha&&(g.globalAlpha=Ht=s.alpha);let f=a==2?[0,l[r][0].length-1]:vr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Ht!=o&&(g.globalAlpha=Ht=o)}}),S.forEach((s,r)=>{if(r>0&&s.show){let o=Ht;Ht!=s.alpha&&(g.globalAlpha=Ht=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,yt,kt,f),x=s.points.filter(n,r,h,f);(h||x)&&(s.points._paths=s.points.paths(n,r,yt,kt,x),pi(r,!0))}Ht!=o&&(g.globalAlpha=Ht=o),Mt("drawSeries",r)}}),t&&(g.globalAlpha=Ht=1)}}function di(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?S[t].points:S[t],{stroke:o,fill:f,clip:h,flags:x,_stroke:y=r._stroke,_fill:M=r._fill,_width:I=r.width}=r._paths;I=Be(I*Oe,3);let B=null,K=I%2/2;s&&M==null&&(M=I>0?"#fff":y);let he=r.pxAlign==1&&K>0;if(he&&g.translate(K,K),!s){let Fe=L-I/2,Ce=W-I/2,xe=Y+I,ue=ne+I;B=new Path2D,B.rect(Fe,Ce,xe,ue)}s?ps(y,I,r.dash,r.cap,M,o,f,x,h):mr(t,y,I,r.dash,r.cap,M,o,f,x,B,h),he&&g.translate(-K,-K)}function mr(t,s,r,o,f,h,x,y,M,I,B){let K=!1;M!=0&&ee.forEach((he,Fe)=>{if(he.series[0]==t){let Ce=S[he.series[1]],xe=l[he.series[1]],ue=(Ce._paths||kn).band;Al(ue)&&(ue=he.dir==1?ue[0]:ue[1]);let se,Ke=null;Ce.show&&ue&&To(xe,yt,kt)?(Ke=he.fill(n,Fe)||h,se=Ce._paths.clip):ue=null,ps(s,r,o,f,Ke,x,y,M,I,B,se,ue),K=!0}}),K||ps(s,r,o,f,h,x,y,M,I,B)}const hi=nn|Is;function ps(t,s,r,o,f,h,x,y,M,I,B,K){ui(t,s,r,o,f),(M||I||K)&&(g.save(),M&&g.clip(M),I&&g.clip(I)),K?(y&hi)==hi?(g.clip(K),B&&g.clip(B),Pn(f,x),Cn(t,h,s)):y&Is?(Pn(f,x),g.clip(K),Cn(t,h,s)):y&nn&&(g.save(),g.clip(K),B&&g.clip(B),Pn(f,x),g.restore(),Cn(t,h,s)):(Pn(f,x),Cn(t,h,s)),(M||I||K)&&g.restore()}function Cn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Ln=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Pn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Il=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function _r(t,s,r,o){let f=H[t],h;if(o<=0)h=[0,0];else{let x=f._space=f.space(n,t,s,r,o),y=f._incrs=f.incrs(n,t,s,r,o,x);h=qu(s,r,y,o,x)}return f._found=h}function hs(t,s,r,o,f,h,x,y,M,I){let B=x%2/2;R==1&&g.translate(B,B),ui(y,x,M,I,y),g.beginPath();let K,he,Fe,Ce,xe=f+(o==0||o==3?-h:h);r==0?(he=f,Ce=xe):(K=f,Fe=xe);for(let ue=0;ue<t.length;ue++)s[ue]!=null&&(r==0?K=Fe=t[ue]:he=Ce=t[ue],g.moveTo(K,he),g.lineTo(Fe,Ce));g.stroke(),R==1&&g.translate(-B,-B)}function wr(t){let s=!0;return H.forEach((r,o)=>{if(!r.show)return;let f=T[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Wl(!1));return}else r._show||(s=!1,r._show=!0,Wl(!1));let h=r.side,x=h%2,{min:y,max:M}=f,[I,B]=_r(o,y,M,x==0?ie:G);if(B==0)return;let K=f.distr==2,he=r._splits=r.splits(n,o,y,M,I,B,K),Fe=f.distr==2?he.map(se=>sl[se]):he,Ce=f.distr==2?sl[he[1]]-sl[he[0]]:I,xe=r._values=r.values(n,r.filter(n,Fe,o,B,Ce),o,B,Ce);r._rotate=h==2?r.rotate(n,xe,o,B):0;let ue=r._size;r._size=$t(r.size(n,xe,o,t)),ue!=null&&r._size!=ue&&(s=!1)}),s}function xr(t){let s=!0;return An.forEach((r,o)=>{let f=r(n,o,nl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function br(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,x=s.stroke(n,t),y=r==0||r==3?-1:1,[M,I]=s._found;if(s.label!=null){let Gt=s.labelGap*y,Ut=wt((s._lpos+Gt)*Oe);ci(s.labelFont[0],x,"center",r==2?gn:Gi),g.save(),o==1?(f=h=0,g.translate(Ut,wt(W+ne/2)),g.rotate((r==3?-Hn:Hn)/2)):(f=wt(L+Y/2),h=Ut);let Rl=Ca(s.label)?s.label(n,t,M,I):s.label;g.fillText(Rl,f,h),g.restore()}if(I==0)continue;let B=T[s.scale],K=o==0?Y:ne,he=o==0?L:W,Fe=s._splits,Ce=B.distr==2?Fe.map(Gt=>sl[Gt]):Fe,xe=B.distr==2?sl[Fe[1]]-sl[Fe[0]]:M,ue=s.ticks,se=s.border,Ke=ue.show?ue.size:0,lt=wt(Ke*Oe),At=wt((s.alignTo==2?s._size-Ke-s.gap:s.gap)*Oe),Ve=s._rotate*-Hn/180,nt=F(s._pos*Oe),Wt=(lt+At)*y,Ot=nt+Wt;h=o==0?Ot:0,f=o==1?Ot:0;let Zt=s.font[0],il=s.align==1?Ql:s.align==2?Es:Ve>0?Ql:Ve<0?Es:o==0?"center":r==3?Es:Ql,hl=Ve||o==1?"middle":r==2?gn:Gi;ci(Zt,x,il,hl);let Bt=s.font[1]*s.lineGap,Qt=Fe.map(Gt=>F(p(Gt,B,K,he))),al=s._values;for(let Gt=0;Gt<al.length;Gt++){let Ut=al[Gt];if(Ut!=null){o==0?f=Qt[Gt]:h=Qt[Gt],Ut=""+Ut;let Rl=Ut.indexOf(`
`)==-1?[Ut]:Ut.split(/\n/gm);for(let zt=0;zt<Rl.length;zt++){let Ri=Rl[zt];Ve?(g.save(),g.translate(f,h+zt*Bt),g.rotate(Ve),g.fillText(Ri,0,0),g.restore()):g.fillText(Ri,f,h+zt*Bt)}}}ue.show&&hs(Qt,ue.filter(n,Ce,t,I,xe),o,r,nt,lt,Be(ue.width*Oe,3),ue.stroke(n,t),ue.dash,ue.cap);let vl=s.grid;vl.show&&hs(Qt,vl.filter(n,Ce,t,I,xe),o,o==0?2:1,o==0?W:L,o==0?ne:Y,Be(vl.width*Oe,3),vl.stroke(n,t),vl.dash,vl.cap),se.show&&hs([nt],[1],o==0?1:0,o==0?1:2,o==1?W:L,o==1?ne:Y,Be(se.width*Oe,3),se.stroke(n,t),se.dash,se.cap)}Mt("drawAxes")}function Wl(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Rn=!1,vs=!1,cn=[];function Sr(){vs=!1;for(let t=0;t<cn.length;t++)Mt(...cn[t]);cn.length=0}function Bl(){Rn||(Vo(vi),Rn=!0)}function yr(t,s=!1){Rn=!0,vs=s,t(n),vi(),s&&cn.length>0&&queueMicrotask(Sr)}n.batch=yr;function vi(){if(ae&&(hr(),ae=!1),$&&(Jt(),$=!1),ge){if(Je(P,Ql,Ae),Je(P,gn,j),Je(P,wn,ie),Je(P,xn,G),Je(k,Ql,Ae),Je(k,gn,j),Je(k,wn,ie),Je(k,xn,G),Je(m,wn,mt),Je(m,xn,Vt),b.width=wt(mt*Oe),b.height=wt(Vt*Oe),H.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,x=f%2==1;Je(t,x?"left":"top",o-h),Je(t,x?"width":"height",r),Je(t,x?"top":"left",x?j:Ae),Je(t,x?"height":"width",x?G:ie),Gs(t,Gl)}else Yt(t,Gl)}),Ln=Il=is=rs=os=us=cs=fs=as=null,Ht=1,pn(!0),Ae!=oe||j!=Ee||ie!=Re||G!=at){Wl(!1);let t=ie/Re,s=G/at;if(Ie&&!Q&&q.left>=0){q.left*=t,q.top*=s,Ul&&gl(Ul,wt(q.left),0,ie,G),Yl&&gl(Yl,0,wt(q.top),ie,G);for(let r=0;r<Le.length;r++){let o=Le[r];o!=null&&(dt[r]*=t,It[r]*=s,gl(o,$t(dt[r]),$t(It[r]),ie,G))}}if(je.show&&!ze&&je.left>=0&&je.width>0){je.left*=t,je.width*=t,je.top*=s,je.height*=s;for(let r in bs)Je(Kl,r,je[r])}oe=Ae,Ee=j,Re=ie,at=G}Mt("setSize"),ge=!1}mt>0&&Vt>0&&(g.clearRect(0,0,b.width,b.height),Mt("drawClear"),te.forEach(t=>t()),Mt("draw")),je.show&&ze&&(Fn(je),ze=!1),Ie&&Q&&(Pl(null,!0,!1),Q=!1),ce.show&&ce.live&&me&&(ws(),me=!1),d||(d=!0,n.status=1,Mt("ready")),un=!1,Rn=!1}n.redraw=(t,s)=>{$=s||!1,t!==!1?Tl(O,w.min,w.max):Bl()};function gs(t,s){let r=T[t];if(r.from==null){if(Ct==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Ct>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==O&&r.distr==2&&Ct>0&&(s.min=ol(s.min,l[0]),s.max=ol(s.max,l[0]),s.min==s.max&&s.max++),C[t]=s,ae=!0,Bl()}}n.setScale=gs;let ms,_s,Ul,Yl,gi,mi,ql,jl,_i,wi,qe,Ze,kl=!1;const Pt=q.drag;let Tt=Pt.x,Et=Pt.y;Ie&&(q.x&&(ms=Xt(oo,k)),q.y&&(_s=Xt(uo,k)),w.ori==0?(Ul=ms,Yl=_s):(Ul=_s,Yl=ms),qe=q.left,Ze=q.top);const je=n.select=ht({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Kl=je.show?Xt(ro,je.over?k:P):null;function Fn(t,s){if(je.show){for(let r in t)je[r]=t[r],r in bs&&Je(Kl,r,t[r]);s!==!1&&Mt("setSelect")}}n.setSelect=Fn;function kr(t){if(S[t].show)Se&&Gs(Te[t],Gl);else if(Se&&Yt(Te[t],Gl),Ie){let r=_t?Le[0]:Le[t];r!=null&&gl(r,-10,-10,ie,G)}}function Tl(t,s,r){gs(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Dr(t),s.show!=null&&S.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,kr(h),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Bl())}),r!==!1&&Mt("setSeries",t,s),o&&hn("setSeries",n,t,s)}n.setSeries=dl;function Tr(t,s){ht(ee[t],s)}function Er(t,s){t.fill=ye(t.fill||null),t.dir=Pe(t.dir,-1),s=s??ee.length,ee.splice(s,0,t)}function Mr(t){t==null?ee.length=0:ee.splice(t,1)}n.addBand=Er,n.setBand=Tr,n.delBand=Mr;function Ar(t,s){S[t].alpha=s,Ie&&Le[t]!=null&&(Le[t].style.opacity=s),Se&&Te[t]&&(Te[t].style.opacity=s)}let _l,El,Cl;const Jl={focus:!0};function Dr(t){if(t!=Cl){let s=t==null,r=rt.alpha!=1;S.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Ar(f,h?1:rt.alpha)}}),Cl=t,r&&Bl()}}Se&&ll&&Ye(Hi,de,t=>{q._lock||(ft(t),Cl!=null&&dl(null,Jl,!0,pt.setSeries))});function pl(t,s,r){let o=T[s];r&&(t=t/Oe-(o.ori==1?j:Ae));let f=ie;o.ori==1&&(f=G,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,x=o._max,y=t/f,M=h+(x-h)*y,I=o.distr;return I==3?en(10,M):I==4?Mo(M,o.asinh):I==100?o.bwd(M):M}function Lr(t,s){let r=pl(t,O,s);return ol(r,l[0],yt,kt)}n.valToIdx=t=>ol(t,l[0]),n.posToIdx=Lr,n.posToVal=pl,n.valToPos=(t,s,r)=>T[s].ori==0?c(t,T[s],r?Y:ie,r?L:0):u(t,T[s],r?ne:G,r?W:0),n.setCursor=(t,s,r)=>{qe=t.left,Ze=t.top,Pl(null,s,r)};function xi(t,s){Je(Kl,Ql,je.left=t),Je(Kl,wn,je.width=s)}function bi(t,s){Je(Kl,gn,je.top=t),Je(Kl,xn,je.height=s)}let fn=w.ori==0?xi:bi,dn=w.ori==1?xi:bi;function Cr(){if(Se&&ce.live)for(let t=a==2?1:0;t<S.length;t++){if(t==0&&Ue)continue;let s=ce.values[t],r=0;for(let o in s)st[t][r++].firstChild.nodeValue=s[o]}}function ws(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{_e[o]=r}):Co(t.idx)||_e.fill(t.idx),ce.idx=_e[0]),Se&&ce.live){for(let r=0;r<S.length;r++)(r>0||a==1&&!Ue)&&Pr(r,_e[r]);Cr()}me=!1,s!==!1&&Mt("setLegend")}n.setLegend=ws;function Pr(t,s){let r=S[t],o=t==0&&N==2?sl:l[t],f;Ue?f=r.values(n,t,s)??Xe:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?Xe:{_:f}),ce.values[t]=f}function Pl(t,s,r){_i=qe,wi=Ze,[qe,Ze]=q.move(n,qe,Ze),q.left=qe,q.top=Ze,Ie&&(Ul&&gl(Ul,wt(qe),0,ie,G),Yl&&gl(Yl,0,wt(Ze),ie,G));let o,f=yt>kt;_l=We,El=null;let h=w.ori==0?ie:G,x=w.ori==1?ie:G;if(qe<0||Ct==0||f){o=q.idx=null;for(let y=0;y<S.length;y++){let M=Le[y];M!=null&&gl(M,-10,-10,ie,G)}ll&&dl(null,Jl,!0,t==null&&pt.setSeries),ce.live&&(_e.fill(o),me=!0)}else{let y,M,I;a==1&&(y=w.ori==0?qe:Ze,M=pl(y,O),o=q.idx=ol(M,l[0],yt,kt),I=D(l[0][o],w,h,0));let B=-10,K=-10,he=0,Fe=0,Ce=!0,xe="",ue="";for(let se=a==2?1:0;se<S.length;se++){let Ke=S[se],lt=_e[se],At=lt==null?null:a==1?l[se][lt]:l[se][1][lt],Ve=q.dataIdx(n,se,o,M),nt=Ve==null?null:a==1?l[se][Ve]:l[se][1][Ve];if(me=me||nt!=At||Ve!=lt,_e[se]=Ve,se>0&&Ke.show){let Wt=Ve==null?-10:Ve==o?I:D(a==1?l[0][Ve]:l[se][0][Ve],w,h,0),Ot=nt==null?-10:J(nt,a==1?T[Ke.scale]:T[Ke.facets[1].scale],x,0);if(ll&&nt!=null){let Zt=w.ori==1?qe:Ze,il=xt(rt.dist(n,se,Ve,Ot,Zt));if(il<_l){let hl=rt.bias;if(hl!=0){let Bt=pl(Zt,Ke.scale),Qt=nt>=0?1:-1,al=Bt>=0?1:-1;al==Qt&&(al==1?hl==1?nt>=Bt:nt<=Bt:hl==1?nt<=Bt:nt>=Bt)&&(_l=il,El=se)}else _l=il,El=se}}if(me||_t){let Zt,il;w.ori==0?(Zt=Wt,il=Ot):(Zt=Ot,il=Wt);let hl,Bt,Qt,al,vl,Gt,Ut=!0,Rl=ve.bbox;if(Rl!=null){Ut=!1;let zt=Rl(n,se);Qt=zt.left,al=zt.top,hl=zt.width,Bt=zt.height}else Qt=Zt,al=il,hl=Bt=ve.size(n,se);if(Gt=ve.fill(n,se),vl=ve.stroke(n,se),_t)se==El&&_l<=rt.prox&&(B=Qt,K=al,he=hl,Fe=Bt,Ce=Ut,xe=Gt,ue=vl);else{let zt=Le[se];zt!=null&&(dt[se]=Qt,It[se]=al,ji(zt,hl,Bt,Ut),Yi(zt,Gt,vl),gl(zt,$t(Qt),$t(al),ie,G))}}}}if(_t){let se=rt.prox,Ke=Cl==null?_l<=se:_l>se||El!=Cl;if(me||Ke){let lt=Le[0];lt!=null&&(dt[0]=B,It[0]=K,ji(lt,he,Fe,Ce),Yi(lt,xe,ue),gl(lt,$t(B),$t(K),ie,G))}}}if(je.show&&kl)if(t!=null){let[y,M]=pt.scales,[I,B]=pt.match,[K,he]=t.cursor.sync.scales,Fe=t.cursor.drag;if(Tt=Fe._x,Et=Fe._y,Tt||Et){let{left:Ce,top:xe,width:ue,height:se}=t.select,Ke=t.scales[K].ori,lt=t.posToVal,At,Ve,nt,Wt,Ot,Zt=y!=null&&I(y,K),il=M!=null&&B(M,he);Zt&&Tt?(Ke==0?(At=Ce,Ve=ue):(At=xe,Ve=se),nt=T[y],Wt=D(lt(At,K),nt,h,0),Ot=D(lt(At+Ve,K),nt,h,0),fn(ul(Wt,Ot),xt(Ot-Wt))):fn(0,h),il&&Et?(Ke==1?(At=Ce,Ve=ue):(At=xe,Ve=se),nt=T[M],Wt=J(lt(At,he),nt,x,0),Ot=J(lt(At+Ve,he),nt,x,0),dn(ul(Wt,Ot),xt(Ot-Wt))):dn(0,x)}else Ss()}else{let y=xt(_i-gi),M=xt(wi-mi);if(w.ori==1){let he=y;y=M,M=he}Tt=Pt.x&&y>=Pt.dist,Et=Pt.y&&M>=Pt.dist;let I=Pt.uni;I!=null?Tt&&Et&&(Tt=y>=I,Et=M>=I,!Tt&&!Et&&(M>y?Et=!0:Tt=!0)):Pt.x&&Pt.y&&(Tt||Et)&&(Tt=Et=!0);let B,K;Tt&&(w.ori==0?(B=ql,K=qe):(B=jl,K=Ze),fn(ul(B,K),xt(K-B)),Et||dn(0,x)),Et&&(w.ori==1?(B=ql,K=qe):(B=jl,K=Ze),dn(ul(B,K),xt(K-B)),Tt||fn(0,h)),!Tt&&!Et&&(fn(0,0),dn(0,0))}if(Pt._x=Tt,Pt._y=Et,t==null){if(r){if(Pi!=null){let[y,M]=pt.scales;pt.values[0]=y!=null?pl(w.ori==0?qe:Ze,y):null,pt.values[1]=M!=null?pl(w.ori==1?qe:Ze,M):null}hn(Ms,n,qe,Ze,ie,G,o)}if(ll){let y=r&&pt.setSeries,M=rt.prox;Cl==null?_l<=M&&dl(El,Jl,!0,y):_l>M?dl(null,Jl,!0,y):El!=Cl&&dl(El,Jl,!0,y)}}me&&(ce.idx=o,ws()),s!==!1&&Mt("setCursor")}let Ml=null;Object.defineProperty(n,"rect",{get(){return Ml==null&&pn(!1),Ml}});function pn(t=!1){t?Ml=null:(Ml=k.getBoundingClientRect(),Mt("syncRect",Ml))}function Si(t,s,r,o,f,h,x){q._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(xs(t,s,r,o,f,h,x,!1,t!=null),t!=null?Pl(null,!0,!0):Pl(s,!0,!1))}function xs(t,s,r,o,f,h,x,y,M){if(Ml==null&&pn(!1),ft(t),t!=null)r=t.clientX-Ml.left,o=t.clientY-Ml.top;else{if(r<0||o<0){qe=-10,Ze=-10;return}let[I,B]=pt.scales,K=s.cursor.sync,[he,Fe]=K.values,[Ce,xe]=K.scales,[ue,se]=pt.match,Ke=s.axes[0].side%2==1,lt=w.ori==0?ie:G,At=w.ori==1?ie:G,Ve=Ke?h:f,nt=Ke?f:h,Wt=Ke?o:r,Ot=Ke?r:o;if(Ce!=null?r=ue(I,Ce)?p(he,T[I],lt,0):-10:r=lt*(Wt/Ve),xe!=null?o=se(B,xe)?p(Fe,T[B],At,0):-10:o=At*(Ot/nt),w.ori==1){let Zt=r;r=o,o=Zt}}M&&(s==null||s.cursor.event.type==Ms)&&((r<=1||r>=ie-1)&&(r=Fl(r,ie)),(o<=1||o>=G-1)&&(o=Fl(o,G))),y?(gi=r,mi=o,[ql,jl]=q.move(n,r,o)):(qe=r,Ze=o)}const bs={width:0,height:0,left:0,top:0};function Ss(){Fn(bs,!1)}let yi,ki,Ti,Ei;function Mi(t,s,r,o,f,h,x){kl=!0,Tt=Et=Pt._x=Pt._y=!1,xs(t,s,r,o,f,h,x,!0,!1),t!=null&&(Ye(As,Fs,Ai,!1),hn(Ni,n,ql,jl,ie,G,null));let{left:y,top:M,width:I,height:B}=je;yi=y,ki=M,Ti=I,Ei=B}function Ai(t,s,r,o,f,h,x){kl=Pt._x=Pt._y=!1,xs(t,s,r,o,f,h,x,!1,!0);let{left:y,top:M,width:I,height:B}=je,K=I>0||B>0,he=yi!=y||ki!=M||Ti!=I||Ei!=B;if(K&&he&&Fn(je),Pt.setScale&&K&&he){let Fe=y,Ce=I,xe=M,ue=B;if(w.ori==1&&(Fe=M,Ce=B,xe=y,ue=I),Tt&&Tl(O,pl(Fe,O),pl(Fe+Ce,O)),Et)for(let se in T){let Ke=T[se];se!=O&&Ke.from==null&&Ke.min!=We&&Tl(se,pl(xe+ue,se),pl(xe,se))}Ss()}else q.lock&&(q._lock=!q._lock,Pl(s,!0,t!=null));t!=null&&(ut(As,Fs),hn(As,n,qe,Ze,ie,G,null))}function Rr(t,s,r,o,f,h,x){if(q._lock)return;ft(t);let y=kl;if(kl){let M=!0,I=!0,B=10,K,he;w.ori==0?(K=Tt,he=Et):(K=Et,he=Tt),K&&he&&(M=qe<=B||qe>=ie-B,I=Ze<=B||Ze>=G-B),K&&M&&(qe=qe<ql?0:ie),he&&I&&(Ze=Ze<jl?0:G),Pl(null,!0,!0),kl=!1}qe=-10,Ze=-10,_e.fill(null),Pl(null,!0,!0),y&&(kl=y)}function Di(t,s,r,o,f,h,x){q._lock||(ft(t),ss(),Ss(),t!=null&&hn(Ii,n,qe,Ze,ie,G,null))}function Li(){H.forEach(ju),tt(n.width,n.height,!0)}Nl(Bn,$l,Li);const Zl={};Zl.mousedown=Mi,Zl.mousemove=Si,Zl.mouseup=Ai,Zl.dblclick=Di,Zl.setSeries=(t,s,r,o)=>{let f=pt.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},Ie&&(Ye(Ni,k,Mi),Ye(Ms,k,Si),Ye(Vi,k,t=>{ft(t),pn(!1)}),Ye(Hi,k,Rr),Ye(Ii,k,Di),Ws.add(n),n.syncRect=pn);const On=n.hooks=e.hooks||{};function Mt(t,s,r){vs?cn.push([t,s,r]):t in On&&On[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)On[s]=(On[s]||[]).concat(t.hooks[s])});const Ci=(t,s,r)=>r,pt=ht({key:null,setSeries:!1,filters:{pub:Xi,sub:Xi},scales:[O,S[1]?S[1].scale:null],match:[$i,$i,Ci],values:[null,null]},q.sync);pt.match.length==2&&pt.match.push(Ci),q.sync=pt;const Pi=pt.key,ys=tr(Pi);function hn(t,s,r,o,f,h,x){pt.filters.pub(t,s,r,o,f,h,x)&&ys.pub(t,s,r,o,f,h,x)}ys.sub(n);function Fr(t,s,r,o,f,h,x){pt.filters.sub(t,s,r,o,f,h,x)&&Zl[t](null,s,r,o,f,h,x)}n.pub=Fr;function Or(){ys.unsub(n),Ws.delete(n),gt.clear(),zs(Bn,$l,Li),v.remove(),de?.remove(),Mt("destroy")}n.destroy=Or;function ks(){Mt("init",e,l),oi(l||e.data,!1),C[O]?gs(O,C[O]):ss(),ze=je.show&&(je.width>0||je.height>0),Q=me=!0,tt(e.width,e.height)}return S.forEach(yl),H.forEach(ns),i?i instanceof HTMLElement?(i.appendChild(v),ks()):i(n,ks):ks(),n}bt.assign=ht;bt.fmtNum=$s;bt.rangeNum=Un;bt.rangeLog=Zn;bt.rangeAsinh=Qs;bt.orient=Hl;bt.pxRatio=Oe;bt.join=No;bt.fmtDate=ti,bt.tzDate=Jo;bt.sync=tr;{bt.addGap=Cu,bt.clipGaps=$n;let e=bt.paths={points:rr};e.linear=ur,e.stepped=Fu,e.bars=Ou,e.spline=zu}const pr="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${pr}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${pr}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=He('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=He('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=He('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=He('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),tc=He('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),lc=He('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function nc(e,l){jn(l,!0);const i=.5,n=1.2,a=32,c=212;function u(w,N){const D=[...w].sort((z,De)=>z-De),J=N/100*(D.length-1),C=Math.floor(J),le=Math.ceil(J);return C===le?D[C]:D[C]+(D[le]-D[C])*(J-C)}let p=Wn(l,"trend",3,null),d=ot(!1),v=ot(""),b=ot(null),g=Dt(()=>Vn.config.temp_units==="C"),m=Dt(ka),P=Dt(qs),k=Dt(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(pe=>pe.status!=="invalid");if(w.length===0)return null;const N=[...w].sort((pe,it)=>new Date(pe.timestamp).getTime()-new Date(it.timestamp).getTime()),D=N[0],J=N[N.length-1],C=N.map(pe=>pe.sg_calibrated??pe.sg_raw).filter(pe=>pe!==null&&pe>=i&&pe<=n),le=N.map(pe=>pe.temp_calibrated??pe.temp_raw).filter(pe=>pe!==null&&pe>=a&&pe<=c);if(C.length===0)return null;const z=C[C.length-1],De=C[0],ke=u(C,95),fe=u(C,5),_e=new Date(D.timestamp).getTime(),ce=new Date(J.timestamp).getTime(),Se=(ce-_e)/(1e3*60*60*24),Ie=Se>0?(z-De)/Se:0;let we=null,de=null,$e=null,Qe=null;if(le.length>0){const pe=le[le.length-1],it=le.reduce((Ye,ut)=>Ye+ut,0)/le.length,Ft=u(le,95),gt=u(le,5);we=_(g)?_n(pe):pe,de=_(g)?_n(it):it,$e=_(g)?_n(Ft):Ft,Qe=_(g)?_n(gt):gt}let Te=0;const st=.001;for(let pe=C.length-2;pe>=0;pe--)if(Math.abs(C[pe]-z)>st){const it=new Date(N[pe+1].timestamp).getTime();Te=(ce-it)/(1e3*60*60*24);break}let et=null,Ue=null;const Xe=l.originalGravity??ke,vt=l.originalGravity===null;return Xe>1&&Xe>z&&(et=(Xe-z)/(Xe-1)*100,Ue=(Xe-z)*131.25),{currentSg:z,firstSg:De,highSg:ke,lowSg:fe,currentTemp:we,avgTemp:de,highTemp:$e,lowTemp:Qe,fermRate:Ie,durationDays:Se,daysAtCurrentSg:Te,apparentAttenuation:et,abv:Ue,ogIsEstimated:vt,effectiveOg:Xe}});function R(){Me(v,l.originalGravity?.toFixed(3)??"",!0),Me(d,!0),setTimeout(()=>_(b)?.focus(),0)}function F(){const w=_(v).trim();if(!w)l.onOgChange(null);else{const N=parseFloat(w);!isNaN(N)&&N>=.99&&N<=1.2&&l.onOgChange(N)}Me(d,!1)}function V(w){w.key==="Enter"?F():w.key==="Escape"&&Me(d,!1)}function S(w){return Ys(w)}function H(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function T(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function ee(w){return w===null?"--":w.toFixed(1)}function O(w){return w===null?"--":`${w.toFixed(1)}%`}var Z=ba(),te=Us(Z);{var re=w=>{var N=tc(),D=A(N),J=A(D),C=A(J),le=A(C,!0);E(C);var z=U(C,2),De=U(A(z),2),ke=A(De,!0);E(De),E(z);var fe=U(z,2),_e=U(A(fe),2),ce=A(_e,!0);E(_e),E(fe);var q=U(fe,2),Se=U(A(q),2),Ie=A(Se,!0);E(Se),E(q);var we=U(q,2),de=U(A(we),2),$e=A(de,!0);E(de),E(we),E(J);var Qe=U(J,2),Te=U(A(Qe),2),st=U(A(Te),2),et=A(st,!0),Ue=U(et),Xe=A(Ue,!0);E(Ue),E(st),E(Te);var vt=U(Te,2),pe=U(A(vt),2),it=A(pe,!0),Ft=U(it),gt=A(Ft,!0);E(Ft),E(pe),E(vt);var Ye=U(vt,2),ut=U(A(Ye),2),mt=A(ut,!0),Vt=U(mt),ie=A(Vt,!0);E(Vt),E(ut),E(Ye);var G=U(Ye,2),Ae=U(A(G),2),j=A(Ae,!0),oe=U(j),Ee=A(oe,!0);E(oe),E(Ae),E(G),E(Qe),E(D);var Re=U(D,2),at=A(Re),L=U(A(at),2);let W;var Y=A(L);E(L),E(at);var ne=U(at,2),ae=U(A(ne),2),ge=A(ae,!0);E(ae),E(ne);var $=U(ne,2),Q=U(A($),2),ze=A(Q,!0);E(Q),E($);var me=U($,2),tt=U(A(me),2);{var ct=_t=>{var Le=Qu();Ta(Le),Le.__keydown=V,js(Le,dt=>Me(b,dt),()=>_(b)),Sa("blur",Le,F),Ea(Le,()=>_(v),dt=>Me(v,dt)),Ge(_t,Le)},Kt=_t=>{var Le=$u();Le.__click=R;var dt=A(Le);let It;var Sl=A(dt,!0);E(dt);var yl=U(dt,2);{var on=ml=>{var nl=Xu();Ge(ml,nl)};Lt(yl,ml=>{_(k).ogIsEstimated&&ml(on)})}zl(2),E(Le),Rt(ml=>{En(Le,"title",_(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),It=wl(dt,1,"stat-value svelte-3wi8ix",null,It,{estimated:_(k).ogIsEstimated}),be(Sl,ml)},[()=>S(_(k).effectiveOg)]),Ge(_t,Le)};Lt(tt,_t=>{_(d)?_t(ct):_t(Kt,!1)})}E(me);var Jt=U(me,2),el=U(A(Jt),2),cl=A(el,!0);E(el),E(Jt);var tl=U(Jt,2),ft=U(A(tl),2),ve=A(ft,!0);E(ft),E(tl);var rt=U(tl,2);{var ll=_t=>{var Le=ec(),dt=U(A(Le),2),It=A(dt,!0);E(dt),zl(2),E(Le),Rt((Sl,yl)=>{En(Le,"title",`Estimated time until target FG (R=${Sl??""})`),be(It,yl)},[()=>p().r2.toFixed(2),()=>T(p().daysToFg)]),Ge(_t,Le)};Lt(rt,_t=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&_t(ll)})}E(Re),E(N),Rt((_t,Le,dt,It,Sl,yl,on,ml,nl,ns,Ll,An,fl)=>{be(le,_(P)==="SG"?"Gravity":_(P)==="P"?"Plato":"Brix"),be(ke,_t),be(ce,Le),be(Ie,dt),be($e,It),be(et,Sl),be(Xe,_(m)),be(it,yl),be(gt,_(m)),be(mt,on),be(ie,_(m)),be(j,ml),be(Ee,_(m)),W=wl(L,1,"stat-value rate svelte-3wi8ix",null,W,{fermenting:_(k).fermRate<0}),be(Y,`${nl??""}/day`),be(ge,ns),be(ze,Ll),be(cl,An),be(ve,fl)},[()=>S(_(k).currentSg),()=>S(_(k).firstSg),()=>S(_(k).highSg),()=>S(_(k).lowSg),()=>ee(_(k).currentTemp),()=>ee(_(k).avgTemp),()=>ee(_(k).highTemp),()=>ee(_(k).lowTemp),()=>H(_(k).fermRate),()=>T(_(k).durationDays),()=>T(_(k).daysAtCurrentSg),()=>O(_(k).apparentAttenuation),()=>O(_(k).abv)]),Ge(w,N)},X=w=>{var N=lc();Ge(w,N)};Lt(te,w=>{_(k)?w(re):w(X,!1)})}Ge(e,Z),Kn()}qn(["keydown","click"]);var sc=He('<button type="button"> </button>'),ic=He("<option> </option>"),ac=He('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),rc=He('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),oc=He('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uc=He('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-1e832qd"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function cc(e,l){jn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Dt(()=>Vn.config.smoothing_enabled),c=Dt(()=>Vn.config.smoothing_samples),u=ot("UTC"),p=ot(0),d=ot(3),v=Wn(l,"originalGravity",3,null),b=Dt(()=>Vn.config.temp_units==="C"),g=Dt(qs),m,P=null,k=ot(!0),R=ot(null),F=ot(24),V=ot(Fi([])),S=ot(Fi([])),H=ot(null);const T={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},ee="#facc15",O="rgba(250, 204, 21, 0.3)",Z="#71717a",te="#a1a1aa",re="rgba(255, 255, 255, 0.04)",X="#22d3ee",w="rgba(250, 204, 21, 0.5)",N="brewsignal_chart_trend_enabled";let D=ot(!0);function J(L,W,Y=1.01){const ne=[];for(let ve=0;ve<L.length;ve++)W[ve]!==null&&ne.push([L[ve],W[ve]]);if(ne.length<10)return null;const ae=ne.length;let ge=0,$=0,Q=0,ze=0;for(const[ve,rt]of ne)ge+=ve,$+=rt,Q+=ve*rt,ze+=ve*ve;const me=ae*ze-ge*ge;if(Math.abs(me)<1e-10)return null;const tt=(ae*Q-ge*$)/me,ct=($-tt*ge)/ae,Kt=$/ae;let Jt=0,el=0;for(const[ve,rt]of ne){const ll=tt*ve+ct;Jt+=(rt-ll)**2,el+=(rt-Kt)**2}const cl=el>0?1-Jt/el:0;let tl=null,ft=null;if(tt<0&&cl>.3){const ve=L[L.length-1],rt=(Y-ct)/tt;rt>ve&&(ft=(rt-ve)/(1440*60),ft>0&&ft<60?tl=Y:ft=null)}return{slope:tt,intercept:ct,r2:cl,predictedFg:tl,daysToFg:ft}}function C(L,W){return L.map(Y=>W.slope*Y+W.intercept)}function le(L,W,Y){const ne=new Date(L*1e3);try{return Y?ne.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:W}):ne.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:W})}catch(ae){return console.warn("Invalid timezone:",W,ae),Y?ne.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ne.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function z(L,W,Y){const ne=ee,ae=T[l.tiltColor]||te;return{width:L,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(ge,$,Q)=>{const ze=(Q-$)*.1||.005;return[$-ze,Q+ze]}},temp:{auto:!0,range:(ge,$,Q)=>{const ze=Q-$,me=10;if(ze<me){const ct=(Q+$)/2;return[ct-me/2,ct+me/2]}const tt=ze*.1;return[$-tt,Q+tt]}}},axes:[{stroke:Z,grid:{stroke:re,width:1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ge,$)=>$.map(Q=>le(Q,Y,_(F)<=24))},{scale:"sg",stroke:ne,grid:{stroke:re,width:1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ge,$)=>$.map(Q=>Ys(Q)),side:3},{scale:"temp",stroke:ae,grid:{show:!1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ge,$)=>$.map(Q=>Q.toFixed(0)+""),side:1}],series:[{},{label:_(g)==="SG"?"Gravity":_(g)==="P"?"Plato":"Brix",scale:"sg",stroke:ne,width:2,fill:(ge,$)=>{const Q=ge.ctx.createLinearGradient(0,ge.bbox.top,0,ge.bbox.top+ge.bbox.height);return Q.addColorStop(0,O),Q.addColorStop(1,"transparent"),Q},points:{show:!1},paths:bt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ae,width:1.5,dash:[4,4],points:{show:!1},paths:bt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:X,width:1.5,dash:[2,4],points:{show:!1},paths:bt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:w,width:2,dash:[8,4],points:{show:!1},show:_(D)}]}}function De(L,W){if(W<=1)return L;const Y=[];for(let ne=0;ne<L.length;ne++){const ae=[],ge=Math.floor(W/2);for(let $=Math.max(0,ne-ge);$<=Math.min(L.length-1,ne+ge);$++){const Q=L[$];Q!==null&&ae.push(Q)}ae.length>0?Y.push(ae.reduce(($,Q)=>$+Q,0)/ae.length):Y.push(null)}return Y}function ke(L,W,Y,ne,ae){if(L.length<=ae)return[L,W,Y,ne];const ge=Math.ceil(L.length/ae),$=[],Q=[],ze=[],me=[];for(let tt=0;tt<L.length;tt+=ge){const ct=Math.min(tt+ge,L.length);let Kt=0,Jt=0,el=0,cl=0,tl=0,ft=0;for(let ve=tt;ve<ct;ve++)W[ve]!==null&&(Kt+=W[ve],Jt++),Y[ve]!==null&&(el+=Y[ve],cl++),ne[ve]!==null&&(tl+=ne[ve],ft++);$.push(L[Math.floor((tt+ct-1)/2)]),Q.push(Jt>0?Kt/Jt:null),ze.push(cl>0?el/cl:null),me.push(ft>0?tl/ft:null)}return[$,Q,ze,me]}function fe(L){return!L.endsWith("Z")&&!L.match(/[+-]\d{2}:\d{2}$/)&&(L=L+"Z"),new Date(L).getTime()/1e3}function _e(L,W,Y){if(L.length===0||W.length===0)return W.map(()=>null);const ne=[...L].sort(($,Q)=>fe($.timestamp)-fe(Q.timestamp)),ae=ne.map($=>fe($.timestamp)),ge=ne.map($=>$.temperature===null?null:Y?$.temperature:$.temperature*9/5+32);return W.map($=>{let Q=null,ze=null;for(let me=0;me<ae.length;me++)if(ae[me]<=$&&(Q={time:ae[me],temp:ge[me]}),ae[me]>=$&&ze===null){ze={time:ae[me],temp:ge[me]};break}if(Q&&ze&&Q.temp!==null&&ze.temp!==null){if(Q.time===ze.time)return Q.temp;const me=($-Q.time)/(ze.time-Q.time);return Q.temp+me*(ze.temp-Q.temp)}return Q!==null&&Q.temp!==null?Q.temp:ze!==null&&ze.temp!==null?ze.temp:null})}function ce(L,W,Y){const ne=[...L].reverse();let ae=[],ge=[],$=[];for(const ct of ne){ae.push(fe(ct.timestamp)),ge.push(ct.sg_calibrated??ct.sg_raw);const Kt=ct.temp_calibrated??ct.temp_raw;Kt!==null?$.push(Y?_n(Kt):Kt):$.push(null)}let Q=_e(W,ae,Y);_(a)&&_(c)>1&&(ge=De(ge,_(c)),$=De($,_(c)),Q=De(Q,_(c))),[ae,ge,$,Q]=ke(ae,ge,$,Q,500);const me=J(ae,ge);Me(H,me,!0);const tt=me?C(ae,me):ae.map(()=>null);return[ae,ge,$,Q,tt]}const q=3e4;async function Se(L=!1){const Y=Date.now()-_(p);if(!(!L&&_(p)>0&&Y<q)){Me(k,!0),Me(R,null);try{const[ne,ae]=await Promise.all([Ju(l.tiltId,_(F)),Zu(_(F)).catch(()=>[])]);Me(V,ne,!0),Me(S,ae,!0),Ie()}catch(ne){Me(R,ne instanceof Error?ne.message:"Failed to load data",!0)}finally{Me(p,Date.now(),!0),Me(k,!1)}}}function Ie(){if(!m||_(V).length===0)return;const L=ce(_(V),_(S),_(b)),W=z(m.clientWidth,_(b),_(u));P&&P.destroy(),P=new bt(W,L,m)}function we(){P&&m&&P.setSize({width:m.clientWidth,height:220})}let de=null;function $e(){if(de&&(clearInterval(de),de=null),_(d)>0){const L=_(d)*60*1e3;de=setInterval(()=>{_(k)||Se(!1)},L)}}ya(async()=>{const L=localStorage.getItem(i);if(L!==null){const Y=parseInt(L,10);Number.isNaN(Y)||Me(d,Y,!0)}const W=localStorage.getItem(N);W!==null&&Me(D,W==="true");try{const Y=await fetch("/api/system/timezone");if(Y.ok){const ne=await Y.json();Me(u,ne.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await Se(!0),window.addEventListener("resize",we),$e()}),Ir(()=>{P?.destroy(),window.removeEventListener("resize",we),de&&clearInterval(de)}),Rs(()=>{_(b)!==void 0&&_(V).length>0&&m&&Ie()}),Rs(()=>{_(a),_(c),_(V).length>0&&m&&Ie()});function Qe(L){const W=Number(L.target.value);Me(d,W,!0),localStorage.setItem(i,String(W)),$e(),Se(!0)}function Te(){Me(D,!_(D)),localStorage.setItem(N,String(_(D))),P&&P.setSeries(4,{show:_(D)})}var st=uc(),et=A(st),Ue=A(et);Tn(Ue,21,()=>Ku,In,(L,W)=>{var Y=sc();let ne;Y.__click=()=>{_(F)!==_(W).hours&&(Me(F,_(W).hours,!0),Se(!0))};var ae=A(Y,!0);E(Y),Rt(()=>{ne=wl(Y,1,"range-btn svelte-1e832qd",null,ne,{active:_(F)===_(W).hours}),be(ae,_(W).label)}),Ge(L,Y)}),E(Ue);var Xe=U(Ue,2),vt=A(Xe),pe=U(A(vt),2);pe.__change=Qe,Tn(pe,21,()=>n,In,(L,W)=>{var Y=ic(),ne=A(Y,!0);E(Y);var ae={};Rt(()=>{be(ne,_(W).label),ae!==(ae=_(W).value)&&(Y.value=(Y.__value=_(W).value)??"")}),Ge(L,Y)}),E(pe);var it;Jr(pe),E(vt);var Ft=U(vt,2),gt=U(A(Ft),2),Ye=A(gt);zl(2),E(gt);var ut=U(gt,4);let mt;ut.__click=Te;var Vt=A(ut);Sn(Vt,"background: rgba(250, 204, 21, 0.5);"),zl(2),E(ut),E(Ft),E(Xe),E(et);var ie=U(et,2),G=A(ie);{var Ae=L=>{var W=ac();Ge(L,W)};Lt(G,L=>{_(k)&&L(Ae)})}var j=U(G,2);{var oe=L=>{var W=rc(),Y=U(A(W),2);Y.__click=()=>Se(!0),E(W),Ge(L,W)},Ee=L=>{var W=ba(),Y=Us(W);{var ne=ae=>{var ge=oc();Ge(ae,ge)};Lt(Y,ae=>{_(V).length===0&&ae(ne)},!0)}Ge(L,W)};Lt(j,L=>{_(R)?L(oe):L(Ee,!1)})}E(ie),js(ie,L=>m=L,()=>m);var Re=U(ie,2);{var at=L=>{{let W=Dt(()=>l.onOgChange??(()=>{})),Y=Dt(()=>_(H)?{predictedFg:_(H).predictedFg,daysToFg:_(H).daysToFg,r2:_(H).r2}:null);nc(L,{get readings(){return _(V)},get originalGravity(){return v()},get onOgChange(){return _(W)},get trend(){return _(Y)}})}};Lt(Re,L=>{_(V).length>0&&L(at)})}E(st),Rt(()=>{it!==(it=_(d))&&(pe.value=(pe.__value=_(d))??"",Zr(pe,_(d))),Sn(Ye,`background: ${(T[l.tiltColor]||"var(--text-secondary)")??""};`),mt=wl(ut,1,"legend-item legend-toggle svelte-1e832qd",null,mt,{"legend-disabled":!_(D)}),En(ut,"title",_(D)?"Hide trend line":"Show trend line")}),Ge(e,st),Kn()}qn(["click","change"]);var fc=He('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),dc=He('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),pc=He('<div class="w-1 rounded-sm transition-all"></div>'),hc=He('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),vc=He("<div><!></div>"),gc=He('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),mc=He('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function _c(e,l){jn(l,!0);let i=Wn(l,"expanded",3,!1),n=Wn(l,"wide",3,!1),a=ot(!1);Rs(()=>{i()&&!_(a)&&Me(a,!0)});let c=ot(!1),u=ot(""),p=ot(null),d=ot(!1);function v(){Me(u,l.tilt.beer_name,!0),Me(c,!0),setTimeout(()=>_(p)?.focus(),0)}async function b(){if(_(d))return;const j=_(u).trim();if(!j||j===l.tilt.beer_name){Me(c,!1);return}Me(d,!0);const oe=await jr(l.tilt.id,j);Me(d,!1),oe&&Me(c,!1)}function g(j){j.key==="Enter"?b():j.key==="Escape"&&Me(c,!1)}async function m(j){await Kr(l.tilt.id,j)}let P=Dt(ka),k=Dt(qs);const R={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function F(j){return Ys(j)}function V(j){return Yr(j)}function S(j){return j>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:j>=-60?{bars:3,color:"var(--positive)",label:"Good"}:j>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function H(j){const oe=Math.floor((Date.now()-new Date(j).getTime())/1e3);if(oe<10)return"just now";if(oe<60)return`${oe}s ago`;const Ee=Math.floor(oe/60);if(Ee<60)return`${Ee}m ago`;const Re=Math.floor(Ee/60);return Re<24?`${Re}h ago`:`${Math.floor(Re/24)}d ago`}let T=Dt(()=>R[l.tilt.color]||"var(--tilt-black)"),ee=Dt(()=>S(l.tilt.rssi)),O=Dt(()=>H(l.tilt.last_seen));var Z=mc();let te;var re=A(Z),X=U(re,2),w=A(X),N=A(w),D=A(N);{var J=j=>{var oe=fc();Ta(oe),oe.__keydown=g,js(oe,Ee=>Me(p,Ee),()=>_(p)),Rt(()=>oe.disabled=_(d)),Sa("blur",oe,b),Ea(oe,()=>_(u),Ee=>Me(u,Ee)),Ge(j,oe)},C=j=>{var oe=dc();oe.__click=v;var Ee=A(oe),Re=A(Ee,!0);E(Ee),zl(2),E(oe),Rt(()=>be(Re,l.tilt.beer_name)),Ge(j,oe)};Lt(D,j=>{_(c)?j(J):j(C,!1)})}var le=U(D,2),z=A(le),De=U(z,2),ke=A(De,!0);E(De),E(le),E(N);var fe=U(N,2),_e=A(fe);Tn(_e,20,()=>Array(4),In,(j,oe,Ee)=>{var Re=pc();Rt(()=>Sn(Re,`
								height: ${8+Ee*4}px;
								background: ${(Ee<_(ee).bars?_(ee).color:"var(--bg-hover)")??""};
								opacity: ${Ee<_(ee).bars?1:.4};
							`)),Ge(j,Re)}),E(_e);var ce=U(_e,2),q=A(ce);E(ce),E(fe),E(w);var Se=U(w,2),Ie=A(Se),we=A(Ie),de=A(we,!0),$e=U(de),Qe=A($e,!0);E($e),E(we);var Te=U(we,2),st=A(Te,!0);E(Te),E(Ie);var et=U(Ie,2),Ue=A(et),Xe=A(Ue,!0),vt=U(Xe),pe=A(vt,!0);E(vt),E(Ue),zl(2),E(et),E(Se);var it=U(Se,2);{var Ft=j=>{var oe=hc(),Ee=U(A(oe),2),Re=A(Ee,!0);E(Ee);var at=U(Ee,4),L=A(at);E(at),E(oe),Rt((W,Y)=>{be(Re,W),be(L,`${Y??""}${_(P)??""}`)},[()=>F(l.tilt.sg_raw),()=>V(l.tilt.temp_raw)]),Ge(j,oe)};Lt(it,j=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&j(Ft)})}var gt=U(it,2);{var Ye=j=>{var oe=vc();let Ee;var Re=A(oe);Qr(Re,()=>l.tilt.id,at=>{cc(at,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:m})}),E(oe),Rt(()=>Ee=wl(oe,1,"chart-section svelte-3twv7v",null,Ee,{hidden:!i()})),Ge(j,oe)};Lt(gt,j=>{_(a)&&j(Ye)})}var ut=U(gt,2),mt=A(ut),Vt=A(mt);E(mt);var ie=U(mt,2),G=A(ie);{var Ae=j=>{var oe=gc();oe.__click=function(...at){l.onToggleExpand?.apply(this,at)};var Ee=A(oe);let Re;E(oe),Rt(()=>{En(oe,"aria-label",i()?"Collapse chart":"Expand chart"),Re=wl(Ee,0,"w-4 h-4 transition-transform",null,Re,{"rotate-180":i()})}),Ge(j,oe)};Lt(G,j=>{l.onToggleExpand&&j(Ae)})}zl(2),E(ie),E(ut),E(X),E(Z),Rt((j,oe)=>{te=wl(Z,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,te,{expanded:i(),wide:n()}),Sn(re,`background: ${_(T)??""};`),Sn(z,`background: ${_(T)??""};`),be(ke,l.tilt.color),En(fe,"title",`${_(ee).label??""} signal (${l.tilt.rssi??""} dBm)`),be(q,`${l.tilt.rssi??""} dBm`),be(de,j),be(Qe,_(k)!=="SG"?_(k):""),be(st,_(k)==="SG"?"Gravity":_(k)==="P"?"Plato":"Brix"),be(Xe,oe),be(pe,_(P)),be(Vt,`Updated ${_(O)??""}`)},[()=>F(l.tilt.sg),()=>V(l.tilt.temp)]),Ge(e,Z),Kn()}qn(["keydown","click"]);var wc=He('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),xc=He('<div class="alerts-list svelte-1uha8ag"></div>'),bc=He('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Sc=He('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),yc=He('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),kc=He('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),Tc=He('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Ec=He("<div></div>"),Mc=He("<!> <!>",1);function Hc(e,l){jn(l,!0);let i=ot(!1),n=ot(!1);ya(()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),F=localStorage.getItem("brewsignal_alerts_dismissed_time");R==="true"&&F&&Date.now()-parseInt(F,10)<360*60*1e3&&Me(i,!0)});let a=Dt(()=>Array.from(Ts.tilts.values())),c=ot(null);function u(R){Me(c,_(c)===R?null:R,!0)}function p(){Me(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function d(){Me(n,!_(n))}var v=Mc();qr("1uha8ag",R=>{Wr(()=>{Br.title="Dashboard | BrewSignal"})});var b=Us(v);{var g=R=>{var F=Sc(),V=A(F),S=A(V),H=U(A(S),4),T=A(H,!0);E(H),E(S);var ee=U(S,2);ee.__click=p,E(V);var O=U(V,2);{var Z=X=>{var w=xc();Tn(w,21,()=>vn.alerts,In,(N,D)=>{var J=wc();let C;var le=A(J),z=A(le);E(le);var De=U(le,2),ke=A(De,!0);E(De),E(J),Rt(()=>{C=wl(J,1,"alert-item svelte-1uha8ag",null,C,{warning:_(D).level==="warning",critical:_(D).level==="critical"}),be(z,`${_(D).day??""}:`),be(ke,_(D).message)}),Ge(N,J)}),E(w),Ge(X,w)};Lt(O,X=>{_(n)||X(Z)})}var te=U(O,2);{var re=X=>{var w=bc();w.__click=d;var N=A(w,!0);E(w),Rt(()=>be(N,_(n)?`Show ${vn.alerts.length} alerts`:"Show less")),Ge(X,w)};Lt(te,X=>{vn.alerts.length>3&&X(re)})}E(F),Rt(()=>be(T,vn.alerts.length)),Ge(R,F)};Lt(b,R=>{vn.alerts.length>0&&!_(i)&&R(g)})}var m=U(b,2);{var P=R=>{var F=Tc(),V=U(A(F),4),S=A(V);{var H=Z=>{var te=Gr("Waiting for Tilt hydrometers to broadcast...");Ge(Z,te)},T=Z=>{var te=yc();Ge(Z,te)};Lt(S,Z=>{Ts.connected?Z(H):Z(T,!1)})}E(V);var ee=U(V,2);{var O=Z=>{var te=kc();Ge(Z,te)};Lt(ee,Z=>{Ts.connected&&Z(O)})}E(F),Ge(R,F)},k=R=>{var F=Ec();let V;Tn(F,21,()=>_(a),S=>S.id,(S,H)=>{{let T=Dt(()=>_(c)===_(H).id),ee=Dt(()=>_(a).length===1);_c(S,{get tilt(){return _(H)},get expanded(){return _(T)},get wide(){return _(ee)},onToggleExpand:()=>u(_(H).id)})}}),E(F),Rt(()=>V=wl(F,1,"tilt-grid svelte-1uha8ag",null,V,{"single-tilt":_(a).length===1})),Ge(R,F)};Lt(m,R=>{_(a).length===0?R(P):R(k,!1)})}Ge(e,v),Kn()}qn(["click"]);export{Hc as component};
