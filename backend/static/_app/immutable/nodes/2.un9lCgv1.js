import{d as Hn,c as ma,a as Ae,f as Oe,s as xe,g as wa,t as Fr}from"../chunks/lZYuFeLm.js";import{h as Or,k as zr,b4 as Nr,f as Vr,ab as In,ak as Is,g as x,am as Pt,af as Wn,ah as F,ag as X,aj as L,ac as nt,al as Tt,s as Ee,an as Ml,p as Li,ad as _a,b3 as Gr,ae as As,V as Hr,ai as Ir}from"../chunks/KfNDMb7P.js";import{e as gn,i as zn}from"../chunks/BrMo0dxU.js";import{B as Wr,i as St}from"../chunks/DN3Nn4_2.js";import{f as cn,c as Rn,g as xa,r as ba,s as Ds,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as wl}from"../chunks/CMo0SdGN.js";import{u as Yr,c as jr,d as qr,e as Kr,a as xs}from"../chunks/CNF3ZaXk.js";import{w as rn}from"../chunks/Dp8S1B6d.js";import{s as Fn}from"../chunks/QJqSGRkr.js";import{b as Sa}from"../chunks/DvdFc3xZ.js";import{b as Ws,p as Ls}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){Or&&zr();var n=new Wr(e),a=!Nr();Vr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const Xr=!0,at="u-",$r="uplot",eo=at+"hz",to=at+"vt",lo=at+"title",no=at+"wrap",so=at+"under",io=at+"over",ao=at+"axis",El=at+"off",ro=at+"select",oo=at+"cursor-x",uo=at+"cursor-y",co=at+"cursor-pt",fo=at+"legend",po=at+"live",ho=at+"inline",vo=at+"series",go=at+"marker",Ci=at+"label",mo=at+"value",fn="width",dn="height",on="top",Pi="bottom",Bl="left",bs="right",Bs="#000",Ri=Bs+"0",Ss="mousemove",Fi="mousedown",ys="mouseup",Oi="mouseenter",zi="mouseleave",Ni="dblclick",wo="resize",_o="scroll",Vi="change",Nn="dppxchange",Us="--",Zl=typeof window<"u",Cs=Zl?document:null,Yl=Zl?window:null,xo=Zl?navigator:null;let Te,Ln;function Ps(){let e=devicePixelRatio;Te!=e&&(Te=e,Ln&&Fs(Vi,Ln,Ps),Ln=matchMedia(`(min-resolution: ${Te-.001}dppx) and (max-resolution: ${Te+.001}dppx)`),Al(Vi,Ln,Ps),Yl.dispatchEvent(new CustomEvent(Nn)))}function Nt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Rs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ge(e,l,i){e.style[l]=i+"px"}function Jt(e,l,i,n){let a=Cs.createElement(e);return l!=null&&Nt(a,l),i?.insertBefore(a,n),a}function Bt(e,l){return Jt("div",e,l)}const Gi=new WeakMap;function al(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Gi.get(e);c!=u&&(e.style.transform=c,Gi.set(e,c),l<0||i<0||l>n||i>a?Nt(e,El):Rs(e,El))}const Hi=new WeakMap;function Ii(e,l,i){let n=l+i,a=Hi.get(e);n!=a&&(Hi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Wi=new WeakMap;function Bi(e,l,i,n){let a=l+""+i,c=Wi.get(e);a!=c&&(Wi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ys={passive:!0},bo={...Ys,capture:!0};function Al(e,l,i,n){l.addEventListener(e,i,n?bo:Ys)}function Fs(e,l,i,n){l.removeEventListener(e,i,Ys)}Zl&&Ps();function Zt(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:Vt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function ya(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const ka=e=>e!=null,Ta=e=>e!=null&&e>0,Bn=ya(ka),So=ya(Ta);function yo(e,l,i,n=0,a=!1){let c=a?So:Bn,u=a?Ta:ka;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let v=l;v<=i;v++){let b=e[v];u(b)&&(b<p?p=b:b>d&&(d=b))}return[p??Re,d??-Re]}function Un(e,l,i,n){let a=ji(e),c=ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?ul:Ea,p=a==1?Vt:Ut,d=c==1?Ut:Vt,v=p(u(st(e))),b=d(u(st(l))),g=jl(i,v),m=jl(i,b);return i==10&&(v<0&&(g=Fe(g,-v)),b<0&&(m=Fe(m,-b))),n||i==2?(e=g*a,l=m*c):(e=La(e,g),l=Yn(l,m)),[e,l]}function js(e,l,i,n){let a=Un(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const qs=.1,Ui={mode:3,pad:qs},hn={pad:0,soft:null,mode:0},ko={min:hn,max:hn};function Vn(e,l,i,n){return jn(i)?Yi(e,l,i):(hn.pad=i,hn.soft=n?0:null,hn.mode=n?3:0,Yi(e,l,ko))}function ye(e,l){return e??l}function To(e,l,i){for(l=ye(l,0),i=ye(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Yi(e,l,i){let n=i.min,a=i.max,c=ye(n.pad,0),u=ye(a.pad,0),p=ye(n.hard,-Re),d=ye(a.hard,Re),v=ye(n.soft,Re),b=ye(a.soft,-Re),g=ye(n.mode,0),m=ye(a.mode,0),G=l-e,V=ul(G),R=Dt(st(e),st(l)),P=ul(R),Z=st(P-V);(G<1e-24||Z>10)&&(G=0,(e==0||l==0)&&(G=1e-24,g==2&&v!=Re&&(c=0),m==2&&b!=-Re&&(u=0)));let k=G||R||1e3,I=ul(k),M=jl(10,Vt(I)),ie=k*(G==0?e==0?.1:1:c),z=Fe(La(e-ie,M/10),24),$=e>=v&&(g==1||g==3&&z<=v||g==2&&z>=v)?v:Re,le=Dt(p,z<$&&e>=$?$:Qt($,z)),N=k*(G==0?l==0?.1:1:u),O=Fe(Yn(l+N,M/10),24),S=l<=b&&(m==1||m==3&&O>=b||m==2&&O<=b)?b:-Re,ee=Qt(d,O>S&&l<=S?S:Dt(S,O));return le==ee&&le==0&&(ee=100),[le,ee]}const Eo=new Intl.NumberFormat(Zl?xo.language:"en-US"),Ks=e=>Eo.format(e),Gt=Math,On=Gt.PI,st=Gt.abs,Vt=Gt.floor,lt=Gt.round,Ut=Gt.ceil,Qt=Gt.min,Dt=Gt.max,jl=Gt.pow,ji=Gt.sign,ul=Gt.log10,Ea=Gt.log2,Mo=(e,l=1)=>Gt.sinh(e)*l,ks=(e,l=1)=>Gt.asinh(e/l),Re=1/0;function qi(e){return(ul((e^e>>31)-(e>>31))|0)+1}function Os(e,l,i){return Qt(Dt(e,l),i)}function Ma(e){return typeof e=="function"}function me(e){return Ma(e)?e:()=>e}const Ao=()=>{},Aa=e=>e,Da=(e,l)=>l,Do=e=>null,Ki=e=>!0,Ji=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Dl=e=>{if(Pa(e)||_l.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Dl(a)}e${c}`}return Fe(e,n)};function kl(e,l){return Dl(Fe(Dl(e/l))*l)}function Yn(e,l){return Dl(Ut(Dl(e/l))*l)}function La(e,l){return Dl(Vt(Dl(e/l))*l)}function Fe(e,l=0){if(Pa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return lt(n)/i}const _l=new Map;function Ca(e){return((""+e).split(".")[1]||"").length}function mn(e,l,i,n){let a=[],c=n.map(Ca);for(let u=l;u<i;u++){let p=st(u),d=Fe(jl(e,u),p);for(let v=0;v<n.length;v++){let b=e==10?+`${n[v]}e${u}`:n[v]*d,g=(u>=0?0:p)+(u>=c[v]?0:c[v]),m=e==10?b:Fe(b,g);a.push(m),_l.set(m,g)}}return a}const vn={},Js=[],ql=[null,null],ml=Array.isArray,Pa=Number.isInteger,Co=e=>e===void 0;function Zi(e){return typeof e=="string"}function jn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),Ra="__proto__";function Kl(e,l=jn){let i;if(ml(e)){let n=e.find(a=>a!=null);if(ml(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Kl(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Ra&&(i[n]=Kl(e[n],l))}else i=e;return i}function et(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Ra&&(jn(e[a])?et(e[a],Kl(n[a])):e[a]=Kl(n[a]))}return e}const Fo=0,Oo=1,zo=2;function No(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Vo(e,l){if(Io(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Wo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],v=d.length;for(let b=0;b<v;b++)i.add(d[b])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let v=1;v<p.length;v++){let b=p[v],g=Array(a).fill(void 0),m=l?l[u][v]:Oo,G=[];for(let V=0;V<b.length;V++){let R=b[V],P=c.get(d[V]);R===null?m!=Fo&&(g[P]=R,m==zo&&G.push(P)):g[P]=R}No(g,G,a),n.push(g)}}return n}const Go=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];a.push(p)}return a}function Io(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Wo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Dt(1,Vt((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const Fa=["January","February","March","April","May","June","July","August","September","October","November","December"],Oa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function za(e){return e.slice(0,3)}const Bo=Oa.map(za),Uo=Fa.map(za),Yo={MMMM:Fa,MMM:Uo,WWWW:Oa,WWW:Bo};function un(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>un(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>un(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>un(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>un(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>un(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function Zs(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?qo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Na=e=>e%1==0,Gn=[1,2,2.5,5],Zo=mn(10,-32,0,Gn),Va=mn(10,0,32,Gn),Qo=Va.filter(Na),Tl=Zo.concat(Va),Qs=`
`,Ga="{YYYY}",Qi=Qs+Ga,Ha="{M}/{D}",pn=Qs+Ha,Cn=pn+"/{YY}",Ia="{aa}",Xo="{h}:{mm}",Ul=Xo+Ia,Xi=Qs+Ul,$i=":{ss}",Me=null;function Wa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,d=(e==1?mn(10,0,3,Gn).filter(Na):mn(10,-3,0,Gn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Ga,Me,Me,Me,Me,Me,Me,1],[a*28,"{MMM}",Qi,Me,Me,Me,Me,Me,1],[a,Ha,Qi,Me,Me,Me,Me,Me,1],[n,"{h}"+Ia,Cn,Me,pn,Me,Me,Me,1],[i,Ul,Cn,Me,pn,Me,Me,Me,1],[l,$i,Cn+" "+Ul,Me,pn+" "+Ul,Me,Xi,Me,1],[e,$i+".{fff}",Cn+" "+Ul,Me,pn+" "+Ul,Me,Xi,Me,1]];function b(g){return(m,G,V,R,P,Z)=>{let k=[],I=P>=u,M=P>=c&&P<u,ie=g(V),z=Fe(ie*e,3),$=Ts(ie.getFullYear(),I?0:ie.getMonth(),M||I?1:ie.getDate()),le=Fe($*e,3);if(M||I){let N=M?P/c:0,O=I?P/u:0,S=z==le?z:Fe(Ts($.getFullYear()+O,$.getMonth()+N,1)*e,3),ee=new Date(lt(S/e)),A=ee.getFullYear(),q=ee.getMonth();for(let H=0;S<=R;H++){let se=Ts(A+O*H,q+N*H,1),W=se-g(Fe(se*e,3));S=Fe((+se+W)*e,3),S<=R&&k.push(S)}}else{let N=P>=a?a:P,O=Vt(V)-Vt(z),S=le+O+Yn(z-le,N);k.push(S);let ee=g(S),A=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,q=P/n,H=m.axes[G]._space,se=Z/H;for(;S=Fe(S+P,e==1?0:3),!(S>R);)if(q>1){let W=Vt(Fe(A+q,6))%24,ae=g(S).getHours()-W;ae>1&&(ae=-1),S-=ae*n,A=(A+q)%24;let pe=k[k.length-1];Fe((S-pe)/P,3)*se>=.7&&k.push(S)}else k.push(S)}return k}}return[d,v,b]}const[$o,eu,tu]=Wa(1),[lu,nu,su]=Wa(.001);mn(2,-53,53,[1]);function ea(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ta(e,l){return(i,n,a,c,u)=>{let p=l.find(V=>u>=V[0])||l[l.length-1],d,v,b,g,m,G;return n.map(V=>{let R=e(V),P=R.getFullYear(),Z=R.getMonth(),k=R.getDate(),I=R.getHours(),M=R.getMinutes(),ie=R.getSeconds(),z=P!=d&&p[2]||Z!=v&&p[3]||k!=b&&p[4]||I!=g&&p[5]||M!=m&&p[6]||ie!=G&&p[7]||p[1];return d=P,v=Z,b=k,g=I,m=M,G=ie,z(R)})}}function iu(e,l){let i=Zs(l);return(n,a,c,u,p)=>a.map(d=>i(e(d)))}function Ts(e,l,i){return new Date(e,l,i)}function la(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function na(e,l){return(i,n,a,c)=>c==null?Us:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=Bt(),a=i.size(e,l);Ge(n,fn,a),Ge(n,dn,a);let c=a/-2;Ge(n,"marginLeft",c),Ge(n,"marginTop",c);let u=i.width(e,l,a);return u&&Ge(n,"borderWidth",u),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const Es=[0,0];function hu(e,l,i){return Es[0]=l,Es[1]=i,Es}function Pn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ms(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Pn,mouseup:Pn,click:Pn,dblclick:Pn,mousemove:Ms,mouseleave:Ms,mouseenter:Ms},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ba={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Xs=et({},Ba,{filter:Da}),Ua=et({},Xs,{size:10}),Ya=et({},Ba,{show:!1}),$s='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ja="bold "+$s,qa=1.5,sa={show:!0,scale:"x",stroke:Bs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ja,side:2,grid:Xs,ticks:Ua,border:Ya,font:$s,lineGap:qa,rotate:0},gu="Value",mu="Time",ia={show:!0,scale:"x",auto:!1,sorted:1,min:Re,max:-Re,idxs:[]};function wu(e,l,i,n,a){return l.map(c=>c==null?"":Ks(c))}function _u(e,l,i,n,a,c,u){let p=[],d=_l.get(a)||0;i=u?i:Fe(Yn(i,a),d);for(let v=i;v<=n;v=Fe(v+a,d))p.push(Object.is(v,-0)?0:v);return p}function zs(e,l,i,n,a,c,u){const p=[],d=e.scales[e.axes[l].scale].log,v=d==10?ul:Ea,b=Vt(v(i));a=jl(d,b),d==10&&(a=Tl[Zt(a,Tl)]);let g=i,m=a*d;d==10&&(m=Tl[Zt(m,Tl)]);do p.push(g),g=g+a,d==10&&!_l.has(g)&&(g=Fe(g,_l.get(a))),g>=m&&(a=g,m=a*d,d==10&&(m=Tl[Zt(m,Tl)]));while(g<=n);return p}function xu(e,l,i,n,a,c,u){let d=e.scales[e.axes[l].scale].asinh,v=n>d?zs(e,l,Dt(d,i),n,a):[d],b=n>=0&&i<=0?[0]:[];return(i<-d?zs(e,l,Dt(d,-n),-i,a):[d]).reverse().map(m=>-m).concat(b,v)}const Ka=/./,bu=/[12357]/,Su=/[125]/,aa=/1/,Ns=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,v=c._space,b=d(10,u),g=d(9,u)-b>=v?Ka:d(7,u)-b>=v?bu:d(5,u)-b>=v?Su:aa;if(g==aa){let m=st(d(1,u)-b);if(m<v)return Ns(l.slice().reverse(),p.distr,g,Ut(v/m)).reverse()}return Ns(l,p.distr,g,1)}function ku(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,v=st(d(1,u)-d(2,u));return v<p?Ns(l.slice().reverse(),3,Ka,Ut(p/v)).reverse():l}function Tu(e,l,i,n){return n==null?Us:l==null?"":Ks(l)}const ra={show:!0,scale:"y",stroke:Bs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ja,side:3,grid:Xs,ticks:Ua,border:Ya,font:$s,lineGap:qa,rotate:0};function Eu(e,l){let i=3+(e||1)*2;return Fe(i*l,3)}function Mu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=st(u-c),d=e.series[l],v=p/(d.points.space*Te);return n[1]-n[0]<=v}const oa={scale:null,auto:!0,sorted:0,min:Re,max:-Re},Ja=(e,l,i,n,a)=>a,ua={show:!0,auto:!0,sorted:0,gaps:Ja,alpha:1,facets:[et({},oa,{scale:"x"}),et({},oa,{scale:"y"})]},ca={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Ja,alpha:1,points:{show:Mu,filter:null},values:null,min:Re,max:-Re,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Za={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=et({},Za,{time:!1,ori:1}),fa={};function Qa(e,l){let i=fa[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,d,v){for(let b=0;b<i.plots.length;b++)i.plots[b]!=a&&i.plots[b].pub(n,a,c,u,p,d,v)}},e!=null&&(fa[e]=i)),i}const Jl=1,Vs=2;function Ll(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],v=n==2?c[1]:c[l],b=n==2?u[a.facets[0].scale]:u[e.series[0].scale],g=n==2?u[a.facets[1].scale]:u[a.scale],m=p.left,G=p.top,V=p.width,R=p.height,P=e.valToPosH,Z=e.valToPosV;return b.ori==0?i(a,d,v,b,g,P,Z,m,G,V,R,Kn,Ql,Zn,$a,tr):i(a,d,v,b,g,Z,P,G,m,R,V,Jn,Xl,li,er,lr)}function ei(e,l){let i=0,n=0,a=ye(e.bands,Js);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return a==-1?d.min:a==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function cl(e,l,i,n,a,c){return Ll(e,l,(u,p,d,v,b,g,m,G,V,R,P)=>{let Z=u.pxRound;const k=v.dir*(v.ori==0?1:-1),I=v.ori==0?Ql:Xl;let M,ie;k==1?(M=i,ie=n):(M=n,ie=i);let z=Z(g(p[M],v,R,G)),$=Z(m(d[M],b,P,V)),le=Z(g(p[ie],v,R,G)),N=Z(m(c==1?b.max:b.min,b,P,V)),O=new Path2D(a);return I(O,le,N),I(O,z,N),I(O,z,$),O})}function qn(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?Zn:li;let d=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let G=m[0]-d;G>0&&p(u,d,n,G,n+c),d=m[1]}}let v=i+a-d,b=10;v>0&&p(u,d,n-b/2,v,n+c+b)}return u}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ti(e,l,i,n,a,c,u){let p=[],d=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let g=v,m=v;if(a==1)for(;++v<=n&&l[v]===null;)m=v;else for(;--v>=i&&l[v]===null;)m=v;let G=c(e[g]),V=m==g?G:c(e[m]),R=g-a;G=u<=0&&R>=0&&R<d?c(e[R]):G;let Z=m+a;V=u>=0&&Z>=0&&Z<d?c(e[Z]):V,V>=G&&p.push([G,V])}return p}function da(e){return e==0?Aa:e==1?lt:l=>kl(l,e)}function Xa(e){let l=e==0?Kn:Jn,i=e==0?(a,c,u,p,d,v)=>{a.arcTo(c,u,p,d,v)}:(a,c,u,p,d,v)=>{a.arcTo(u,c,d,p,v)},n=e==0?(a,c,u,p,d)=>{a.rect(c,u,p,d)}:(a,c,u,p,d)=>{a.rect(u,c,d,p)};return(a,c,u,p,d,v=0,b=0)=>{v==0&&b==0?n(a,c,u,p,d):(v=Qt(v,p/2,d/2),b=Qt(b,p/2,d/2),l(a,c+v,u),i(a,c+p,u,c+p,u+d,v),i(a,c+p,u+d,c,u+d,b),i(a,c,u+d,c,u,b),i(a,c,u,c+p,u,v),a.closePath())}}const Kn=(e,l,i)=>{e.moveTo(l,i)},Jn=(e,l,i)=>{e.moveTo(i,l)},Ql=(e,l,i)=>{e.lineTo(l,i)},Xl=(e,l,i)=>{e.lineTo(i,l)},Zn=Xa(0),li=Xa(1),$a=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},er=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},tr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},lr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function nr(e){return(l,i,n,a,c)=>Ll(l,i,(u,p,d,v,b,g,m,G,V,R,P)=>{let{pxRound:Z,points:k}=u,I,M;v.ori==0?(I=Kn,M=$a):(I=Jn,M=er);const ie=Fe(k.width*Te,3);let z=(k.size-k.width)/2*Te,$=Fe(z*2,3),le=new Path2D,N=new Path2D,{left:O,top:S,width:ee,height:A}=l.bbox;Zn(N,O-$,S-$,ee+$*2,A+$*2);const q=H=>{if(d[H]!=null){let se=Z(g(p[H],v,R,G)),W=Z(m(d[H],b,P,V));I(le,se+z,W),M(le,se,W,z,0,On*2)}};if(c)c.forEach(q);else for(let H=n;H<=a;H++)q(H);return{stroke:ie>0?le:null,fill:le,clip:N,flags:Jl|Vs}})}function sr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Pu=sr(Ql),Ru=sr(Xl);function ir(e){const l=ye(e?.alignGaps,0);return(i,n,a,c)=>Ll(i,n,(u,p,d,v,b,g,m,G,V,R,P)=>{[a,c]=Bn(d,a,c);let Z=u.pxRound,k=A=>Z(g(A,v,R,G)),I=A=>Z(m(A,b,P,V)),M,ie;v.ori==0?(M=Ql,ie=Pu):(M=Xl,ie=Ru);const z=v.dir*(v.ori==0?1:-1),$={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},le=$.stroke;let N=!1;if(c-a>=R*4){let A=U=>i.posToVal(U,v.key,!0),q=null,H=null,se,W,Pe,de=k(p[z==1?a:c]),ae=k(p[a]),pe=k(p[c]),re=A(z==1?ae+1:pe-1);for(let U=z==1?a:c;U>=a&&U<=c;U+=z){let be=p[U],ve=(z==1?be<re:be>re)?de:k(be),ce=d[U];ve==de?ce!=null?(W=ce,q==null?(M(le,ve,I(W)),se=q=H=W):W<q?q=W:W>H&&(H=W)):ce===null&&(N=!0):(q!=null&&ie(le,de,I(q),I(H),I(se),I(W)),ce!=null?(W=ce,M(le,ve,I(W)),q=H=se=W):(q=H=null,ce===null&&(N=!0)),de=ve,re=A(de+z))}q!=null&&q!=H&&Pe!=de&&ie(le,de,I(q),I(H),I(se),I(W))}else for(let A=z==1?a:c;A>=a&&A<=c;A+=z){let q=d[A];q===null?N=!0:q!=null&&M(le,k(p[A]),I(q))}let[S,ee]=ei(i,n);if(u.fill!=null||S!=0){let A=$.fill=new Path2D(le),q=u.fillTo(i,n,u.min,u.max,S),H=I(q),se=k(p[a]),W=k(p[c]);z==-1&&([W,se]=[se,W]),M(A,W,H),M(A,se,H)}if(!u.spanGaps){let A=[];N&&A.push(...ti(p,d,a,c,z,k,l)),$.gaps=A=u.gaps(i,n,a,c,A),$.clip=qn(A,v.ori,G,V,R,P)}return ee!=0&&($.band=ee==2?[cl(i,n,a,c,le,-1),cl(i,n,a,c,le,1)]:cl(i,n,a,c,le,ee)),$})}function Fu(e){const l=ye(e.align,1),i=ye(e.ascDesc,!1),n=ye(e.alignGaps,0),a=ye(e.extend,!1);return(c,u,p,d)=>Ll(c,u,(v,b,g,m,G,V,R,P,Z,k,I)=>{[p,d]=Bn(g,p,d);let M=v.pxRound,{left:ie,width:z}=c.bbox,$=ae=>M(V(ae,m,k,P)),le=ae=>M(R(ae,G,I,Z)),N=m.ori==0?Ql:Xl;const O={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},S=O.stroke,ee=m.dir*(m.ori==0?1:-1);let A=le(g[ee==1?p:d]),q=$(b[ee==1?p:d]),H=q,se=q;a&&l==-1&&(se=ie,N(S,se,A)),N(S,q,A);for(let ae=ee==1?p:d;ae>=p&&ae<=d;ae+=ee){let pe=g[ae];if(pe==null)continue;let re=$(b[ae]),U=le(pe);l==1?N(S,re,A):N(S,H,U),N(S,re,U),A=U,H=re}let W=H;a&&l==1&&(W=ie+z,N(S,W,A));let[Pe,de]=ei(c,u);if(v.fill!=null||Pe!=0){let ae=O.fill=new Path2D(S),pe=v.fillTo(c,u,v.min,v.max,Pe),re=le(pe);N(ae,W,re),N(ae,se,re)}if(!v.spanGaps){let ae=[];ae.push(...ti(b,g,p,d,ee,$,n));let pe=v.width*Te/2,re=i||l==1?pe:-pe,U=i||l==-1?-pe:pe;ae.forEach(be=>{be[0]+=re,be[1]+=U}),O.gaps=ae=v.gaps(c,u,p,d,ae),O.clip=qn(ae,m.ori,P,Z,k,I)}return de!=0&&(O.band=de==2?[cl(c,u,p,d,S,-1),cl(c,u,p,d,S,1)]:cl(c,u,p,d,S,de)),O})}function pa(e,l,i,n,a,c,u=Re){if(e.length>1){let p=null;for(let d=0,v=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let b=st(e[d]-e[p]);b<v&&(v=b,u=st(i(e[d],n,a,c)-i(e[p],n,a,c)))}p=d}}return u}function Ou(e){e=e||vn;const l=ye(e.size,[.6,Re,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=me(a),u=1-l[0],p=ye(l[1],Re),d=ye(l[2],1),v=ye(e.disp,vn),b=ye(e.each,G=>{}),{fill:g,stroke:m}=v;return(G,V,R,P)=>Ll(G,V,(Z,k,I,M,ie,z,$,le,N,O,S)=>{let ee=Z.pxRound,A=i,q=n*Te,H=p*Te,se=d*Te,W,Pe;M.ori==0?[W,Pe]=c(G,V):[Pe,W]=c(G,V);const de=M.dir*(M.ori==0?1:-1);let ae=M.ori==0?Zn:li,pe=M.ori==0?b:(w,Q,K,te,_e,ge,Be)=>{b(w,Q,K,_e,te,Be,ge)},re=ye(G.bands,Js).find(w=>w.series[0]==V),U=re!=null?re.dir:0,be=Z.fillTo(G,V,Z.min,Z.max,U),De=ee($(be,ie,S,N)),ve,ce,Le,He=O,we=ee(Z.width*Te),Ye=!1,Ie=null,We=null,fe=null,tt=null;g!=null&&(we==0||m!=null)&&(Ye=!0,Ie=g.values(G,V,R,P),We=new Map,new Set(Ie).forEach(w=>{w!=null&&We.set(w,new Path2D)}),we>0&&(fe=m.values(G,V,R,P),tt=new Map,new Set(fe).forEach(w=>{w!=null&&tt.set(w,new Path2D)})));let{x0:rt,size:gt}=v;if(rt!=null&&gt!=null){A=1,k=rt.values(G,V,R,P),rt.unit==2&&(k=k.map(K=>G.posToVal(le+K*O,M.key,!0)));let w=gt.values(G,V,R,P);gt.unit==2?ce=w[0]*O:ce=z(w[0],M,O,le)-z(0,M,O,le),He=pa(k,I,z,M,O,le,He),Le=He-ce+q}else He=pa(k,I,z,M,O,le,He),Le=He*u+q,ce=He-Le;Le<1&&(Le=0),we>=ce/2&&(we=0),Le<5&&(ee=Aa);let Rt=Le>0,mt=He-Le-(Rt?we:0);ce=ee(Os(mt,se,H)),ve=(A==0?ce/2:A==de?0:ce)-A*de*((A==0?q/2:0)+(Rt?we/2:0));const Ze={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Y=Ye?null:new Path2D;let y=null;if(re!=null)y=G.data[re.series[1]];else{let{y0:w,y1:Q}=v;w!=null&&Q!=null&&(I=Q.values(G,V,R,P),y=w.values(G,V,R,P))}let C=W*ce,T=Pe*ce;for(let w=de==1?R:P;w>=R&&w<=P;w+=de){let Q=I[w];if(Q==null)continue;if(y!=null){let qe=y[w]??0;if(Q-qe==0)continue;De=$(qe,ie,S,N)}let K=M.distr!=2||v!=null?k[w]:w,te=z(K,M,O,le),_e=$(ye(Q,be),ie,S,N),ge=ee(te-ve),Be=ee(Dt(_e,De)),je=ee(Qt(_e,De)),wt=Be-je;if(Q!=null){let qe=Q<0?T:C,_t=Q<0?C:T;Ye?(we>0&&fe[w]!=null&&ae(tt.get(fe[w]),ge,je+Vt(we/2),ce,Dt(0,wt-we),qe,_t),Ie[w]!=null&&ae(We.get(Ie[w]),ge,je+Vt(we/2),ce,Dt(0,wt-we),qe,_t)):ae(Y,ge,je+Vt(we/2),ce,Dt(0,wt-we),qe,_t),pe(G,V,w,ge-we/2,je,ce+we,wt)}}return we>0?Ze.stroke=Ye?tt:Y:Ye||(Ze._fill=Z.width==0?Z._fill:Z._stroke??Z._fill,Ze.width=0),Ze.fill=Ye?We:Y,Ze})}function zu(e,l){const i=ye(l?.alignGaps,0);return(n,a,c,u)=>Ll(n,a,(p,d,v,b,g,m,G,V,R,P,Z)=>{[c,u]=Bn(v,c,u);let k=p.pxRound,I=W=>k(m(W,b,P,V)),M=W=>k(G(W,g,Z,R)),ie,z,$;b.ori==0?(ie=Kn,$=Ql,z=tr):(ie=Jn,$=Xl,z=lr);const le=b.dir*(b.ori==0?1:-1);let N=I(d[le==1?c:u]),O=N,S=[],ee=[];for(let W=le==1?c:u;W>=c&&W<=u;W+=le)if(v[W]!=null){let de=d[W],ae=I(de);S.push(O=ae),ee.push(M(v[W]))}const A={stroke:e(S,ee,ie,$,z,k),fill:null,clip:null,band:null,gaps:null,flags:Jl},q=A.stroke;let[H,se]=ei(n,a);if(p.fill!=null||H!=0){let W=A.fill=new Path2D(q),Pe=p.fillTo(n,a,p.min,p.max,H),de=M(Pe);$(W,O,de),$(W,N,de)}if(!p.spanGaps){let W=[];W.push(...ti(d,v,c,u,le,I,i)),A.gaps=W=p.gaps(n,a,c,u,W),A.clip=qn(W,b.ori,V,R,P,Z)}return se!=0&&(A.band=se==2?[cl(n,a,c,u,q,-1),cl(n,a,c,u,q,1)]:cl(n,a,c,u,q,se)),A})}function Nu(e){return zu(Vu,e)}function Vu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),v=Array(u-1),b=Array(u-1),g=Array(u-1);for(let m=0;m<u-1;m++)b[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],v[m]=b[m]/g[m];d[0]=v[0];for(let m=1;m<u-1;m++)v[m]===0||v[m-1]===0||v[m-1]>0!=v[m]>0?d[m]=0:(d[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/v[m-1]+(g[m]+2*g[m-1])/v[m]),isFinite(d[m])||(d[m]=0));d[u-1]=v[u-2];for(let m=0;m<u-1;m++)a(p,e[m]+g[m]/3,l[m]+d[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-d[m+1]*g[m]/3,e[m+1],l[m+1])}return p}const Gs=new Set;function ha(){for(let e of Gs)e.syncRect(!0)}Zl&&(Al(wo,Yl,ha),Al(_o,Yl,ha,!0),Al(Nn,Yl,()=>{it.pxRatio=Te}));const Gu=ir(),Hu=nr();function va(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Hs(c,u,l,i))}function Iu(e,l){return e.map((i,n)=>n==0?{}:et({},l,i))}function Hs(e,l,i,n){return et({},l==0?i:n,e)}function ar(e,l,i){return l==null?ql:[l,i]}const Wu=ar;function Bu(e,l,i){return l==null?ql:Vn(l,i,qs,!0)}function rr(e,l,i,n){return l==null?ql:Un(l,i,e.scales[n].log,!1)}const Uu=rr;function or(e,l,i,n){return l==null?ql:js(l,i,e.scales[n].log,!1)}const Yu=or;function ju(e,l,i,n,a){let c=Dt(qi(e),qi(l)),u=l-e,p=Zt(a/n*u,i);do{let d=i[p],v=n*d/u;if(v>=a&&c+(d<5?_l.get(d):0)<=17)return[d,v]}while(++p<i.length);return[0,0]}function ga(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=lt((i=+a)*Te))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Fe(l[2]*Te,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function it(e,l,i){const n={mode:ye(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const v=n.root=Bt($r);if(e.id!=null&&(v.id=e.id),Nt(v,e.class),e.title){let t=Bt(lo,v);t.textContent=e.title}const b=Jt("canvas"),g=n.ctx=b.getContext("2d"),m=Bt(no,v);Al("click",m,t=>{t.target===V&&(ze!=Vl||Ue!=Gl)&&bt.click(n,t)},!0);const G=n.under=Bt(so,m);m.appendChild(b);const V=n.over=Bt(io,m);e=Kl(e);const R=+ye(e.pxAlign,1),P=da(R);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const Z=e.ms||.001,k=n.series=a==1?va(e.series||[],ia,ca,!1):Iu(e.series||[null],ua),I=n.axes=va(e.axes||[],sa,ra,!0),M=n.scales={},ie=n.bands=e.bands||[];ie.forEach(t=>{t.fill=me(t.fill||null),t.dir=ye(t.dir,-1)});const z=a==2?k[1].facets[0].scale:k[0].scale,$={axes:_r,series:hr},le=(e.drawOrder||["axes","series"]).map(t=>$[t]);function N(t){const s=t.distr==3?r=>ul(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ks(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,_=h-f;return(o-f)/_}}function O(t){let s=M[t];if(s==null){let r=(e.scales||vn)[t]||vn;if(r.from!=null){O(r.from);let o=et({},M[r.from],r,{key:t});o.valToPct=N(o),M[t]=o}else{s=M[t]=et({},t==z?Za:Du,r),s.key=t;let o=s.time,f=s.range,h=ml(f);if((t!=z||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ui:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ui:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&jn(f))){let _=f;f=(E,D,B)=>D==null?ql:Vn(D,B,_)}s.range=me(f||(o?Wu:t==z?s.distr==3?Uu:s.distr==4?Yu:ar:s.distr==3?rr:s.distr==4?or:Bu)),s.auto=me(h?!1:s.auto),s.clamp=me(s.clamp||Au),s._min=s._max=null,s.valToPct=N(s)}}}O("x"),O("y"),a==1&&k.forEach(t=>{O(t.scale)}),I.forEach(t=>{O(t.scale)});for(let t in e.scales)O(t);const S=M[z],ee=S.distr;let A,q;S.ori==0?(Nt(v,eo),A=c,q=u):(Nt(v,to),A=u,q=c);const H={};for(let t in M){let s=M[t];(s.min!=null||s.max!=null)&&(H[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(lt(t/Z))),W=e.fmtDate||Zs,Pe=Z==1?tu(se):su(se),de=ta(se,ea(Z==1?eu:nu,W)),ae=na(se,la(au,W)),pe=[],re=n.legend=et({},uu,e.legend),U=n.cursor=et({},vu,{drag:{y:a==2}},e.cursor),be=re.show,De=U.show,ve=re.markers;re.idxs=pe,ve.width=me(ve.width),ve.dash=me(ve.dash),ve.stroke=me(ve.stroke),ve.fill=me(ve.fill);let ce,Le,He,we=[],Ye=[],Ie,We=!1,fe={};if(re.live){const t=k[1]?k[1].values:null;We=t!=null,Ie=We?t(n,1,0):{_:0};for(let s in Ie)fe[s]=Us}if(be)if(ce=Jt("table",fo,v),He=Jt("tbody",null,ce),re.mount(n,ce),We){Le=Jt("thead",null,ce,He);let t=Jt("tr",null,Le);Jt("th",null,t);for(var tt in Ie)Jt("th",Ci,t).textContent=tt}else Nt(ce,ho),re.live&&Nt(ce,po);const rt={show:!0},gt={show:!1};function Rt(t,s){if(s==0&&(We||!re.live||a==2))return ql;let r=[],o=Jt("tr",vo,He,He.childNodes[s]);Nt(o,t.class),t.show||Nt(o,El);let f=Jt("th",null,o);if(ve.show){let E=Bt(go,f);if(s>0){let D=ve.width(n,s);D&&(E.style.border=D+"px "+ve.dash(n,s)+" "+ve.stroke(n,s)),E.style.background=ve.fill(n,s)}}let h=Bt(Ci,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(ve.show||(h.style.color=t.width>0?ve.stroke(n,s):ve.fill(n,s)),Ze("click",f,E=>{if(U._lock)return;ut(E);let D=k.indexOf(t);if((E.ctrlKey||E.metaKey)!=re.isolate){let B=k.some((j,J)=>J>0&&J!=D&&j.show);k.forEach((j,J)=>{J>0&&ll(J,B?J==D?rt:gt:rt,!0,$e.setSeries)})}else ll(D,{show:!t.show},!0,$e.setSeries)},!1),$t&&Ze(Oi,f,E=>{U._lock||(ut(E),ll(k.indexOf(t),Il,!0,$e.setSeries))},!1));for(var _ in Ie){let E=Jt("td",mo,o);E.textContent="--",r.push(E)}return[o,r]}const mt=new Map;function Ze(t,s,r,o=!0){const f=mt.get(s)||{},h=U.bind[t](n,s,r,o);h&&(Al(t,s,f[t]=h),mt.set(s,f))}function Y(t,s,r){const o=mt.get(s)||{};for(let f in o)(t==null||f==t)&&(Fs(f,s,o[f]),delete o[f]);t==null&&mt.delete(s)}let y=0,C=0,T=0,w=0,Q=0,K=0,te=Q,_e=K,ge=T,Be=w,je=0,wt=0,qe=0,_t=0;n.bbox={};let rl=!1,Yt=!1,Ht=!1,ot=!1,Cl=!1,yt=!1;function Pl(t,s,r){(r||t!=n.width||s!=n.height)&&wn(t,s),Fl(!1),Ht=!0,Yt=!0,Ol()}function wn(t,s){n.width=y=T=t,n.height=C=w=s,Q=K=0,Xt(),kt();let r=n.bbox;je=r.left=kl(Q*Te,.5),wt=r.top=kl(K*Te,.5),qe=r.width=kl(T*Te,.5),_t=r.height=kl(w*Te,.5)}const _n=3;function xn(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=wr(s);t=s==_n||r&&o,t||(wn(n.width,n.height),Yt=!0)}}function Qn({width:t,height:s}){Pl(t,s)}n.setSize=Qn;function Xt(){let t=!1,s=!1,r=!1,o=!1;I.forEach((f,h)=>{if(f.show&&f._show){let{side:_,_size:E}=f,D=_%2,B=f.label!=null?f.labelSize:0,j=E+B;j>0&&(D?(T-=j,_==3?(Q+=j,o=!0):r=!0):(w-=j,_==0?(K+=j,t=!0):s=!0))}}),xl[0]=t,xl[1]=r,xl[2]=s,xl[3]=o,T-=dl[1]+dl[3],Q+=dl[3],w-=dl[2]+dl[0],K+=dl[0]}function kt(){let t=Q+T,s=K+w,r=Q,o=K;function f(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return o-=_,o+_}}I.forEach((h,_)=>{if(h.show&&h._show){let E=h.side;h._pos=f(E,h._size),h.label!=null&&(h._lpos=f(E,h.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=me(t.prox),o=t.bias??=0;U.dataIdx=(f,h,_,E)=>{if(h==0)return _;let D=_,B=r(f,h,_,E)??Re,j=B>=0&&B<Re,J=S.ori==0?T:w,ue=U.left,ke=l[0],Se=l[h];if(s.has(Se[_])){D=null;let he=null,oe=null,ne;if(o==0||o==-1)for(ne=_;he==null&&ne-- >0;)s.has(Se[ne])||(he=ne);if(o==0||o==1)for(ne=_;oe==null&&ne++<Se.length;)s.has(Se[ne])||(oe=ne);if(he!=null||oe!=null)if(j){let Ve=he==null?-1/0:A(ke[he],S,J,0),Ke=oe==null?1/0:A(ke[oe],S,J,0),vt=ue-Ve,Ce=Ke-ue;vt<=Ce?vt<=B&&(D=he):Ce<=B&&(D=oe)}else D=oe==null?he:he==null?oe:_-he<=oe-_?he:oe}else j&&st(ue-A(ke[_],S,J,0))>B&&(D=null);return D}}const ut=t=>{U.event=t};U.idxs=pe,U._lock=!1;let Qe=U.points;Qe.show=me(Qe.show),Qe.size=me(Qe.size),Qe.stroke=me(Qe.stroke),Qe.width=me(Qe.width),Qe.fill=me(Qe.fill);const Lt=n.focus=et({},e.focus||{alpha:.3},U.focus),$t=Lt.prox>=0,el=$t&&Qe.one;let Xe=[],tl=[],fl=[];function bn(t,s){let r=Qe.show(n,s);if(r instanceof HTMLElement)return Nt(r,co),Nt(r,t.class),al(r,-10,-10,T,w),V.insertBefore(r,Xe[s]),r}function Sn(t,s){if(a==1||s>0){let r=a==1&&M[t.scale].time,o=t.value;t.value=r?Zi(o)?na(se,la(o,W)):o||ae:o||Tu,t.label=t.label||(r?mu:gu)}if(el||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Gu||Do,t.fillTo=me(t.fillTo||Lu),t.pxAlign=+ye(t.pxAlign,R),t.pxRound=da(t.pxAlign),t.stroke=me(t.stroke||null),t.fill=me(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Eu(Dt(1,t.width),1),o=t.points=et({},{size:r,width:Dt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=me(o.show),o.filter=me(o.filter),o.fill=me(o.fill),o.stroke=me(o.stroke),o.paths=me(o.paths),o.pxAlign=t.pxAlign}if(be){let r=Rt(t,s);we.splice(s,0,r[0]),Ye.splice(s,0,r[1]),re.values.push(null)}if(De){pe.splice(s,0,null);let r=null;el?s==0&&(r=bn(t,s)):s>0&&(r=bn(t,s)),Xe.splice(s,0,r),tl.splice(s,0,0),fl.splice(s,0,0)}ht("addSeries",s)}function Xn(t,s){s=s??k.length,t=a==1?Hs(t,s,ia,ca):Hs(t,s,{},ua),k.splice(s,0,t),Sn(k[s],s)}n.addSeries=Xn;function cr(t){if(k.splice(t,1),be){re.values.splice(t,1),Ye.splice(t,1);let s=we.splice(t,1)[0];Y(null,s.firstChild),s.remove()}De&&(pe.splice(t,1),Xe.splice(t,1)[0].remove(),tl.splice(t,1),fl.splice(t,1)),ht("delSeries",t)}n.delSeries=cr;const xl=[!1,!1,!1,!1];function fr(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=M[t.scale];o==null&&(t.scale=r?k[1].scale:z,o=M[t.scale]);let f=o.time;t.size=me(t.size),t.space=me(t.space),t.rotate=me(t.rotate),ml(t.incrs)&&t.incrs.forEach(_=>{!_l.has(_)&&_l.set(_,Ca(_))}),t.incrs=me(t.incrs||(o.distr==2?Qo:f?Z==1?$o:lu:Tl)),t.splits=me(t.splits||(f&&o.distr==1?Pe:o.distr==3?zs:o.distr==4?xu:_u)),t.stroke=me(t.stroke),t.grid.stroke=me(t.grid.stroke),t.ticks.stroke=me(t.ticks.stroke),t.border.stroke=me(t.border.stroke);let h=t.values;t.values=ml(h)&&!ml(h[0])?me(h):f?ml(h)?ta(se,ea(h,W)):Zi(h)?iu(se,h):h||de:h||wu,t.filter=me(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Da)),t.font=ga(t.font),t.labelFont=ga(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(xl[s]=!0,t._el=Bt(ao,m))}}function $l(t,s,r,o){let[f,h,_,E]=r,D=s%2,B=0;return D==0&&(E||h)&&(B=s==0&&!f||s==2&&!_?lt(sa.size/3):0),D==1&&(f||_)&&(B=s==1&&!h||s==3&&!E?lt(ra.size/2):0),B}const ni=n.padding=(e.padding||[$l,$l,$l,$l]).map(t=>me(ye(t,$l))),dl=n._padding=ni.map((t,s)=>t(n,s,xl,0));let xt,ct=null,ft=null;const yn=a==1?k[0].idxs:null;let jt=null,en=!1;function si(t,s){if(l=t??[],n.data=n._data=l,a==2){xt=0;for(let r=1;r<k.length;r++)xt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),jt=l[0],xt=jt.length;let r=l;if(ee==2){r=l.slice();let o=r[0]=Array(xt);for(let f=0;f<xt;f++)o[f]=f}n._data=l=r}if(Fl(!0),ht("setData"),ee==2&&(Ht=!0),s!==!1){let r=S;r.auto(n,en)?$n():hl(z,r.min,r.max),ot=ot||U.left>=0,yt=!0,Ol()}}n.setData=si;function $n(){en=!0;let t,s;a==1&&(xt>0?(ct=yn[0]=0,ft=yn[1]=xt-1,t=l[0][ct],s=l[0][ft],ee==2?(t=ct,s=ft):t==s&&(ee==3?[t,s]=Un(t,t,S.log,!1):ee==4?[t,s]=js(t,t,S.log,!1):S.time?s=t+lt(86400/Z):[t,s]=Vn(t,s,qs,!0))):(ct=yn[0]=t=null,ft=yn[1]=s=null)),hl(z,t,s)}let kn,Rl,es,ts,ls,ns,ss,is,as,Ct;function ii(t,s,r,o,f,h){t??=Ri,r??=Js,o??="butt",f??=Ri,h??="round",t!=kn&&(g.strokeStyle=kn=t),f!=Rl&&(g.fillStyle=Rl=f),s!=es&&(g.lineWidth=es=s),h!=ls&&(g.lineJoin=ls=h),o!=ns&&(g.lineCap=ns=o),r!=ts&&g.setLineDash(ts=r)}function ai(t,s,r,o){s!=Rl&&(g.fillStyle=Rl=s),t!=ss&&(g.font=ss=t),r!=is&&(g.textAlign=is=r),o!=as&&(g.textBaseline=as=o)}function rs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,en)&&(s==null||s.min==null)){let h=ye(ct,0),_=ye(ft,o.length-1),E=r.min==null?yo(o,h,_,f,t.distr==3):[r.min,r.max];t.min=Qt(t.min,r.min=E[0]),t.max=Dt(t.max,r.max=E[1])}}const ri={min:null,max:null};function dr(){for(let o in M){let f=M[o];H[o]==null&&(f.min==null||H[z]!=null&&f.auto(n,en))&&(H[o]=ri)}for(let o in M){let f=M[o];H[o]==null&&f.from!=null&&H[f.from]!=null&&(H[o]=ri)}H[z]!=null&&Fl(!0);let t={};for(let o in H){let f=H[o];if(f!=null){let h=t[o]=Kl(M[o],Po);if(f.min!=null)et(h,f);else if(o!=z||a==2)if(xt==0&&h.from==null){let _=h.range(n,null,null,o);h.min=_[0],h.max=_[1]}else h.min=Re,h.max=-Re}}if(xt>0){k.forEach((o,f)=>{if(a==1){let h=o.scale,_=H[h];if(_==null)return;let E=t[h];if(f==0){let D=E.range(n,E.min,E.max,h);E.min=D[0],E.max=D[1],ct=Zt(E.min,l[0]),ft=Zt(E.max,l[0]),ft-ct>1&&(l[0][ct]<E.min&&ct++,l[0][ft]>E.max&&ft--),o.min=jt[ct],o.max=jt[ft]}else o.show&&o.auto&&rs(E,_,o,l[f],o.sorted);o.idxs[0]=ct,o.idxs[1]=ft}else if(f>0&&o.show&&o.auto){let[h,_]=o.facets,E=h.scale,D=_.scale,[B,j]=l[f],J=t[E],ue=t[D];J!=null&&rs(J,H[E],h,B,h.sorted),ue!=null&&rs(ue,H[D],_,j,_.sorted),o.min=_.min,o.max=_.max}});for(let o in t){let f=t[o],h=H[o];if(f.from==null&&(h==null||h.min==null)){let _=f.range(n,f.min==Re?null:f.min,f.max==-Re?null:f.max,o);f.min=_[0],f.max=_[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let _=f.range(n,h.min,h.max,o);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=M[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let _=h.distr;h._min=_==3?ul(h.min):_==4?ks(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?ul(h.max):_==4?ks(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){k.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Ht=!0,ht("setScale",o);De&&U.left>=0&&(ot=yt=!0)}for(let o in H)H[o]=null}function pr(t){let s=Os(ct-1,0,xt-1),r=Os(ft+1,0,xt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<xt-1;)r++;return[s,r]}function hr(){if(xt>0){let t=k.some(s=>s._focus)&&Ct!=Lt.alpha;t&&(g.globalAlpha=Ct=Lt.alpha),k.forEach((s,r)=>{if(r>0&&s.show&&(oi(r,!1),oi(r,!0),s._paths==null)){let o=Ct;Ct!=s.alpha&&(g.globalAlpha=Ct=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Ct!=o&&(g.globalAlpha=Ct=o)}}),k.forEach((s,r)=>{if(r>0&&s.show){let o=Ct;Ct!=s.alpha&&(g.globalAlpha=Ct=s.alpha),s._paths!=null&&ui(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,ct,ft,f),_=s.points.filter(n,r,h,f);(h||_)&&(s.points._paths=s.points.paths(n,r,ct,ft,_),ui(r,!0))}Ct!=o&&(g.globalAlpha=Ct=o),ht("drawSeries",r)}}),t&&(g.globalAlpha=Ct=1)}}function oi(t,s){let r=s?k[t].points:k[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ui(t,s){let r=s?k[t].points:k[t],{stroke:o,fill:f,clip:h,flags:_,_stroke:E=r._stroke,_fill:D=r._fill,_width:B=r.width}=r._paths;B=Fe(B*Te,3);let j=null,J=B%2/2;s&&D==null&&(D=B>0?"#fff":E);let ue=r.pxAlign==1&&J>0;if(ue&&g.translate(J,J),!s){let ke=je-B/2,Se=wt-B/2,he=qe+B,oe=_t+B;j=new Path2D,j.rect(ke,Se,he,oe)}s?os(E,B,r.dash,r.cap,D,o,f,_,h):vr(t,E,B,r.dash,r.cap,D,o,f,_,j,h),ue&&g.translate(-J,-J)}function vr(t,s,r,o,f,h,_,E,D,B,j){let J=!1;D!=0&&ie.forEach((ue,ke)=>{if(ue.series[0]==t){let Se=k[ue.series[1]],he=l[ue.series[1]],oe=(Se._paths||vn).band;ml(oe)&&(oe=ue.dir==1?oe[0]:oe[1]);let ne,Ve=null;Se.show&&oe&&To(he,ct,ft)?(Ve=ue.fill(n,ke)||h,ne=Se._paths.clip):oe=null,os(s,r,o,f,Ve,_,E,D,B,j,ne,oe),J=!0}}),J||os(s,r,o,f,h,_,E,D,B,j)}const ci=Jl|Vs;function os(t,s,r,o,f,h,_,E,D,B,j,J){ii(t,s,r,o,f),(D||B||J)&&(g.save(),D&&g.clip(D),B&&g.clip(B)),J?(E&ci)==ci?(g.clip(J),j&&g.clip(j),En(f,_),Tn(t,h,s)):E&Vs?(En(f,_),g.clip(J),Tn(t,h,s)):E&Jl&&(g.save(),g.clip(J),j&&g.clip(j),En(f,_),g.restore(),Tn(t,h,s)):(En(f,_),Tn(t,h,s)),(D||B||J)&&g.restore()}function Tn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=kn=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function En(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Rl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let f=I[t],h;if(o<=0)h=[0,0];else{let _=f._space=f.space(n,t,s,r,o),E=f._incrs=f.incrs(n,t,s,r,o,_);h=ju(s,r,E,o,_)}return f._found=h}function us(t,s,r,o,f,h,_,E,D,B){let j=_%2/2;R==1&&g.translate(j,j),ii(E,_,D,B,E),g.beginPath();let J,ue,ke,Se,he=f+(o==0||o==3?-h:h);r==0?(ue=f,Se=he):(J=f,ke=he);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?J=ke=t[oe]:ue=Se=t[oe],g.moveTo(J,ue),g.lineTo(ke,Se));g.stroke(),R==1&&g.translate(-j,-j)}function mr(t){let s=!0;return I.forEach((r,o)=>{if(!r.show)return;let f=M[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Fl(!1));return}else r._show||(s=!1,r._show=!0,Fl(!1));let h=r.side,_=h%2,{min:E,max:D}=f,[B,j]=gr(o,E,D,_==0?T:w);if(j==0)return;let J=f.distr==2,ue=r._splits=r.splits(n,o,E,D,B,j,J),ke=f.distr==2?ue.map(ne=>jt[ne]):ue,Se=f.distr==2?jt[ue[1]]-jt[ue[0]]:B,he=r._values=r.values(n,r.filter(n,ke,o,j,Se),o,j,Se);r._rotate=h==2?r.rotate(n,he,o,j):0;let oe=r._size;r._size=Ut(r.size(n,he,o,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function wr(t){let s=!0;return ni.forEach((r,o)=>{let f=r(n,o,xl,t);f!=dl[o]&&(s=!1),dl[o]=f}),s}function _r(){for(let t=0;t<I.length;t++){let s=I[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,_=s.stroke(n,t),E=r==0||r==3?-1:1,[D,B]=s._found;if(s.label!=null){let Mt=s.labelGap*E,zt=lt((s._lpos+Mt)*Te);ai(s.labelFont[0],_,"center",r==2?on:Pi),g.save(),o==1?(f=h=0,g.translate(zt,lt(wt+_t/2)),g.rotate((r==3?-On:On)/2)):(f=lt(je+qe/2),h=zt);let yl=Ma(s.label)?s.label(n,t,D,B):s.label;g.fillText(yl,f,h),g.restore()}if(B==0)continue;let j=M[s.scale],J=o==0?qe:_t,ue=o==0?je:wt,ke=s._splits,Se=j.distr==2?ke.map(Mt=>jt[Mt]):ke,he=j.distr==2?jt[ke[1]]-jt[ke[0]]:D,oe=s.ticks,ne=s.border,Ve=oe.show?oe.size:0,Ke=lt(Ve*Te),vt=lt((s.alignTo==2?s._size-Ve-s.gap:s.gap)*Te),Ce=s._rotate*-On/180,Je=P(s._pos*Te),Ft=(Ke+vt)*E,Et=Je+Ft;h=o==0?Et:0,f=o==1?Et:0;let It=s.font[0],qt=s.align==1?Bl:s.align==2?bs:Ce>0?Bl:Ce<0?bs:o==0?"center":r==3?bs:Bl,sl=Ce||o==1?"middle":r==2?on:Pi;ai(It,_,qt,sl);let Ot=s.font[1]*s.lineGap,Wt=ke.map(Mt=>P(p(Mt,j,J,ue))),Kt=s._values;for(let Mt=0;Mt<Kt.length;Mt++){let zt=Kt[Mt];if(zt!=null){o==0?f=Wt[Mt]:h=Wt[Mt],zt=""+zt;let yl=zt.indexOf(`
`)==-1?[zt]:zt.split(/\n/gm);for(let At=0;At<yl.length;At++){let Di=yl[At];Ce?(g.save(),g.translate(f,h+At*Ot),g.rotate(Ce),g.fillText(Di,0,0),g.restore()):g.fillText(Di,f,h+At*Ot)}}}oe.show&&us(Wt,oe.filter(n,Se,t,B,he),o,r,Je,Ke,Fe(oe.width*Te,3),oe.stroke(n,t),oe.dash,oe.cap);let il=s.grid;il.show&&us(Wt,il.filter(n,Se,t,B,he),o,o==0?2:1,o==0?wt:je,o==0?_t:qe,Fe(il.width*Te,3),il.stroke(n,t),il.dash,il.cap),ne.show&&us([Je],[1],o==0?1:0,o==0?1:2,o==1?wt:je,o==1?_t:qe,Fe(ne.width*Te,3),ne.stroke(n,t),ne.dash,ne.cap)}ht("drawAxes")}function Fl(t){k.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Mn=!1,cs=!1,tn=[];function xr(){cs=!1;for(let t=0;t<tn.length;t++)ht(...tn[t]);tn.length=0}function Ol(){Mn||(Go(fi),Mn=!0)}function br(t,s=!1){Mn=!0,cs=s,t(n),fi(),s&&tn.length>0&&queueMicrotask(xr)}n.batch=br;function fi(){if(rl&&(dr(),rl=!1),Ht&&(xn(),Ht=!1),Yt){if(Ge(G,Bl,Q),Ge(G,on,K),Ge(G,fn,T),Ge(G,dn,w),Ge(V,Bl,Q),Ge(V,on,K),Ge(V,fn,T),Ge(V,dn,w),Ge(m,fn,y),Ge(m,dn,C),b.width=lt(y*Te),b.height=lt(C*Te),I.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,_=f%2==1;Ge(t,_?"left":"top",o-h),Ge(t,_?"width":"height",r),Ge(t,_?"top":"left",_?K:Q),Ge(t,_?"height":"width",_?w:T),Rs(t,El)}else Nt(t,El)}),kn=Rl=es=ls=ns=ss=is=as=ts=null,Ct=1,sn(!0),Q!=te||K!=_e||T!=ge||w!=Be){Fl(!1);let t=T/ge,s=w/Be;if(De&&!ot&&U.left>=0){U.left*=t,U.top*=s,zl&&al(zl,lt(U.left),0,T,w),Nl&&al(Nl,0,lt(U.top),T,w);for(let r=0;r<Xe.length;r++){let o=Xe[r];o!=null&&(tl[r]*=t,fl[r]*=s,al(o,Ut(tl[r]),Ut(fl[r]),T,w))}}if(Ne.show&&!Cl&&Ne.left>=0&&Ne.width>0){Ne.left*=t,Ne.width*=t,Ne.top*=s,Ne.height*=s;for(let r in gs)Ge(Hl,r,Ne[r])}te=Q,_e=K,ge=T,Be=w}ht("setSize"),Yt=!1}y>0&&C>0&&(g.clearRect(0,0,b.width,b.height),ht("drawClear"),le.forEach(t=>t()),ht("draw")),Ne.show&&Cl&&(An(Ne),Cl=!1),De&&ot&&(Sl(null,!0,!1),ot=!1),re.show&&re.live&&yt&&(hs(),yt=!1),d||(d=!0,n.status=1,ht("ready")),en=!1,Mn=!1}n.redraw=(t,s)=>{Ht=s||!1,t!==!1?hl(z,S.min,S.max):Ol()};function fs(t,s){let r=M[t];if(r.from==null){if(xt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(xt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==z&&r.distr==2&&xt>0&&(s.min=Zt(s.min,l[0]),s.max=Zt(s.max,l[0]),s.min==s.max&&s.max++),H[t]=s,rl=!0,Ol()}}n.setScale=fs;let ds,ps,zl,Nl,di,pi,Vl,Gl,hi,vi,ze,Ue,pl=!1;const bt=U.drag;let dt=bt.x,pt=bt.y;De&&(U.x&&(ds=Bt(oo,V)),U.y&&(ps=Bt(uo,V)),S.ori==0?(zl=ds,Nl=ps):(zl=ps,Nl=ds),ze=U.left,Ue=U.top);const Ne=n.select=et({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Hl=Ne.show?Bt(ro,Ne.over?V:G):null;function An(t,s){if(Ne.show){for(let r in t)Ne[r]=t[r],r in gs&&Ge(Hl,r,t[r]);s!==!1&&ht("setSelect")}}n.setSelect=An;function Sr(t){if(k[t].show)be&&Rs(we[t],El);else if(be&&Nt(we[t],El),De){let r=el?Xe[0]:Xe[t];r!=null&&al(r,-10,-10,T,w)}}function hl(t,s,r){fs(t,{min:s,max:r})}function ll(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&k.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,Sr(h),a==2?(hl(f.facets[0].scale,null,null),hl(f.facets[1].scale,null,null)):hl(f.scale,null,null),Ol())}),r!==!1&&ht("setSeries",t,s),o&&an("setSeries",n,t,s)}n.setSeries=ll;function yr(t,s){et(ie[t],s)}function kr(t,s){t.fill=me(t.fill||null),t.dir=ye(t.dir,-1),s=s??ie.length,ie.splice(s,0,t)}function Tr(t){t==null?ie.length=0:ie.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Er(t,s){k[t].alpha=s,De&&Xe[t]!=null&&(Xe[t].style.opacity=s),be&&we[t]&&(we[t].style.opacity=s)}let ol,vl,bl;const Il={focus:!0};function Mr(t){if(t!=bl){let s=t==null,r=Lt.alpha!=1;k.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Er(f,h?1:Lt.alpha)}}),bl=t,r&&Ol()}}be&&$t&&Ze(zi,ce,t=>{U._lock||(ut(t),bl!=null&&ll(null,Il,!0,$e.setSeries))});function nl(t,s,r){let o=M[s];r&&(t=t/Te-(o.ori==1?K:Q));let f=T;o.ori==1&&(f=w,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,_=o._max,E=t/f,D=h+(_-h)*E,B=o.distr;return B==3?jl(10,D):B==4?Mo(D,o.asinh):B==100?o.bwd(D):D}function Ar(t,s){let r=nl(t,z,s);return Zt(r,l[0],ct,ft)}n.valToIdx=t=>Zt(t,l[0]),n.posToIdx=Ar,n.posToVal=nl,n.valToPos=(t,s,r)=>M[s].ori==0?c(t,M[s],r?qe:T,r?je:0):u(t,M[s],r?_t:w,r?wt:0),n.setCursor=(t,s,r)=>{ze=t.left,Ue=t.top,Sl(null,s,r)};function gi(t,s){Ge(Hl,Bl,Ne.left=t),Ge(Hl,fn,Ne.width=s)}function mi(t,s){Ge(Hl,on,Ne.top=t),Ge(Hl,dn,Ne.height=s)}let ln=S.ori==0?gi:mi,nn=S.ori==1?gi:mi;function Dr(){if(be&&re.live)for(let t=a==2?1:0;t<k.length;t++){if(t==0&&We)continue;let s=re.values[t],r=0;for(let o in s)Ye[t][r++].firstChild.nodeValue=s[o]}}function hs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{pe[o]=r}):Co(t.idx)||pe.fill(t.idx),re.idx=pe[0]),be&&re.live){for(let r=0;r<k.length;r++)(r>0||a==1&&!We)&&Lr(r,pe[r]);Dr()}yt=!1,s!==!1&&ht("setLegend")}n.setLegend=hs;function Lr(t,s){let r=k[t],o=t==0&&ee==2?jt:l[t],f;We?f=r.values(n,t,s)??fe:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?fe:{_:f}),re.values[t]=f}function Sl(t,s,r){hi=ze,vi=Ue,[ze,Ue]=U.move(n,ze,Ue),U.left=ze,U.top=Ue,De&&(zl&&al(zl,lt(ze),0,T,w),Nl&&al(Nl,0,lt(Ue),T,w));let o,f=ct>ft;ol=Re,vl=null;let h=S.ori==0?T:w,_=S.ori==1?T:w;if(ze<0||xt==0||f){o=U.idx=null;for(let E=0;E<k.length;E++){let D=Xe[E];D!=null&&al(D,-10,-10,T,w)}$t&&ll(null,Il,!0,t==null&&$e.setSeries),re.live&&(pe.fill(o),yt=!0)}else{let E,D,B;a==1&&(E=S.ori==0?ze:Ue,D=nl(E,z),o=U.idx=Zt(D,l[0],ct,ft),B=A(l[0][o],S,h,0));let j=-10,J=-10,ue=0,ke=0,Se=!0,he="",oe="";for(let ne=a==2?1:0;ne<k.length;ne++){let Ve=k[ne],Ke=pe[ne],vt=Ke==null?null:a==1?l[ne][Ke]:l[ne][1][Ke],Ce=U.dataIdx(n,ne,o,D),Je=Ce==null?null:a==1?l[ne][Ce]:l[ne][1][Ce];if(yt=yt||Je!=vt||Ce!=Ke,pe[ne]=Ce,ne>0&&Ve.show){let Ft=Ce==null?-10:Ce==o?B:A(a==1?l[0][Ce]:l[ne][0][Ce],S,h,0),Et=Je==null?-10:q(Je,a==1?M[Ve.scale]:M[Ve.facets[1].scale],_,0);if($t&&Je!=null){let It=S.ori==1?ze:Ue,qt=st(Lt.dist(n,ne,Ce,Et,It));if(qt<ol){let sl=Lt.bias;if(sl!=0){let Ot=nl(It,Ve.scale),Wt=Je>=0?1:-1,Kt=Ot>=0?1:-1;Kt==Wt&&(Kt==1?sl==1?Je>=Ot:Je<=Ot:sl==1?Je<=Ot:Je>=Ot)&&(ol=qt,vl=ne)}else ol=qt,vl=ne}}if(yt||el){let It,qt;S.ori==0?(It=Ft,qt=Et):(It=Et,qt=Ft);let sl,Ot,Wt,Kt,il,Mt,zt=!0,yl=Qe.bbox;if(yl!=null){zt=!1;let At=yl(n,ne);Wt=At.left,Kt=At.top,sl=At.width,Ot=At.height}else Wt=It,Kt=qt,sl=Ot=Qe.size(n,ne);if(Mt=Qe.fill(n,ne),il=Qe.stroke(n,ne),el)ne==vl&&ol<=Lt.prox&&(j=Wt,J=Kt,ue=sl,ke=Ot,Se=zt,he=Mt,oe=il);else{let At=Xe[ne];At!=null&&(tl[ne]=Wt,fl[ne]=Kt,Bi(At,sl,Ot,zt),Ii(At,Mt,il),al(At,Ut(Wt),Ut(Kt),T,w))}}}}if(el){let ne=Lt.prox,Ve=bl==null?ol<=ne:ol>ne||vl!=bl;if(yt||Ve){let Ke=Xe[0];Ke!=null&&(tl[0]=j,fl[0]=J,Bi(Ke,ue,ke,Se),Ii(Ke,he,oe),al(Ke,Ut(j),Ut(J),T,w))}}}if(Ne.show&&pl)if(t!=null){let[E,D]=$e.scales,[B,j]=$e.match,[J,ue]=t.cursor.sync.scales,ke=t.cursor.drag;if(dt=ke._x,pt=ke._y,dt||pt){let{left:Se,top:he,width:oe,height:ne}=t.select,Ve=t.scales[J].ori,Ke=t.posToVal,vt,Ce,Je,Ft,Et,It=E!=null&&B(E,J),qt=D!=null&&j(D,ue);It&&dt?(Ve==0?(vt=Se,Ce=oe):(vt=he,Ce=ne),Je=M[E],Ft=A(Ke(vt,J),Je,h,0),Et=A(Ke(vt+Ce,J),Je,h,0),ln(Qt(Ft,Et),st(Et-Ft))):ln(0,h),qt&&pt?(Ve==1?(vt=Se,Ce=oe):(vt=he,Ce=ne),Je=M[D],Ft=q(Ke(vt,ue),Je,_,0),Et=q(Ke(vt+Ce,ue),Je,_,0),nn(Qt(Ft,Et),st(Et-Ft))):nn(0,_)}else ms()}else{let E=st(hi-di),D=st(vi-pi);if(S.ori==1){let ue=E;E=D,D=ue}dt=bt.x&&E>=bt.dist,pt=bt.y&&D>=bt.dist;let B=bt.uni;B!=null?dt&&pt&&(dt=E>=B,pt=D>=B,!dt&&!pt&&(D>E?pt=!0:dt=!0)):bt.x&&bt.y&&(dt||pt)&&(dt=pt=!0);let j,J;dt&&(S.ori==0?(j=Vl,J=ze):(j=Gl,J=Ue),ln(Qt(j,J),st(J-j)),pt||nn(0,_)),pt&&(S.ori==1?(j=Vl,J=ze):(j=Gl,J=Ue),nn(Qt(j,J),st(J-j)),dt||ln(0,h)),!dt&&!pt&&(ln(0,0),nn(0,0))}if(bt._x=dt,bt._y=pt,t==null){if(r){if(Ai!=null){let[E,D]=$e.scales;$e.values[0]=E!=null?nl(S.ori==0?ze:Ue,E):null,$e.values[1]=D!=null?nl(S.ori==1?ze:Ue,D):null}an(Ss,n,ze,Ue,T,w,o)}if($t){let E=r&&$e.setSeries,D=Lt.prox;bl==null?ol<=D&&ll(vl,Il,!0,E):ol>D?ll(null,Il,!0,E):vl!=bl&&ll(vl,Il,!0,E)}}yt&&(re.idx=o,hs()),s!==!1&&ht("setCursor")}let gl=null;Object.defineProperty(n,"rect",{get(){return gl==null&&sn(!1),gl}});function sn(t=!1){t?gl=null:(gl=V.getBoundingClientRect(),ht("syncRect",gl))}function wi(t,s,r,o,f,h,_){U._lock||pl&&t!=null&&t.movementX==0&&t.movementY==0||(vs(t,s,r,o,f,h,_,!1,t!=null),t!=null?Sl(null,!0,!0):Sl(s,!0,!1))}function vs(t,s,r,o,f,h,_,E,D){if(gl==null&&sn(!1),ut(t),t!=null)r=t.clientX-gl.left,o=t.clientY-gl.top;else{if(r<0||o<0){ze=-10,Ue=-10;return}let[B,j]=$e.scales,J=s.cursor.sync,[ue,ke]=J.values,[Se,he]=J.scales,[oe,ne]=$e.match,Ve=s.axes[0].side%2==1,Ke=S.ori==0?T:w,vt=S.ori==1?T:w,Ce=Ve?h:f,Je=Ve?f:h,Ft=Ve?o:r,Et=Ve?r:o;if(Se!=null?r=oe(B,Se)?p(ue,M[B],Ke,0):-10:r=Ke*(Ft/Ce),he!=null?o=ne(j,he)?p(ke,M[j],vt,0):-10:o=vt*(Et/Je),S.ori==1){let It=r;r=o,o=It}}D&&(s==null||s.cursor.event.type==Ss)&&((r<=1||r>=T-1)&&(r=kl(r,T)),(o<=1||o>=w-1)&&(o=kl(o,w))),E?(di=r,pi=o,[Vl,Gl]=U.move(n,r,o)):(ze=r,Ue=o)}const gs={width:0,height:0,left:0,top:0};function ms(){An(gs,!1)}let _i,xi,bi,Si;function yi(t,s,r,o,f,h,_){pl=!0,dt=pt=bt._x=bt._y=!1,vs(t,s,r,o,f,h,_,!0,!1),t!=null&&(Ze(ys,Cs,ki,!1),an(Fi,n,Vl,Gl,T,w,null));let{left:E,top:D,width:B,height:j}=Ne;_i=E,xi=D,bi=B,Si=j}function ki(t,s,r,o,f,h,_){pl=bt._x=bt._y=!1,vs(t,s,r,o,f,h,_,!1,!0);let{left:E,top:D,width:B,height:j}=Ne,J=B>0||j>0,ue=_i!=E||xi!=D||bi!=B||Si!=j;if(J&&ue&&An(Ne),bt.setScale&&J&&ue){let ke=E,Se=B,he=D,oe=j;if(S.ori==1&&(ke=D,Se=j,he=E,oe=B),dt&&hl(z,nl(ke,z),nl(ke+Se,z)),pt)for(let ne in M){let Ve=M[ne];ne!=z&&Ve.from==null&&Ve.min!=Re&&hl(ne,nl(he+oe,ne),nl(he,ne))}ms()}else U.lock&&(U._lock=!U._lock,Sl(s,!0,t!=null));t!=null&&(Y(ys,Cs),an(ys,n,ze,Ue,T,w,null))}function Cr(t,s,r,o,f,h,_){if(U._lock)return;ut(t);let E=pl;if(pl){let D=!0,B=!0,j=10,J,ue;S.ori==0?(J=dt,ue=pt):(J=pt,ue=dt),J&&ue&&(D=ze<=j||ze>=T-j,B=Ue<=j||Ue>=w-j),J&&D&&(ze=ze<Vl?0:T),ue&&B&&(Ue=Ue<Gl?0:w),Sl(null,!0,!0),pl=!1}ze=-10,Ue=-10,pe.fill(null),Sl(null,!0,!0),E&&(pl=E)}function Ti(t,s,r,o,f,h,_){U._lock||(ut(t),$n(),ms(),t!=null&&an(Ni,n,ze,Ue,T,w,null))}function Ei(){I.forEach(qu),Pl(n.width,n.height,!0)}Al(Nn,Yl,Ei);const Wl={};Wl.mousedown=yi,Wl.mousemove=wi,Wl.mouseup=ki,Wl.dblclick=Ti,Wl.setSeries=(t,s,r,o)=>{let f=$e.match[2];r=f(n,s,r),r!=-1&&ll(r,o,!0,!1)},De&&(Ze(Fi,V,yi),Ze(Ss,V,wi),Ze(Oi,V,t=>{ut(t),sn(!1)}),Ze(zi,V,Cr),Ze(Ni,V,Ti),Gs.add(n),n.syncRect=sn);const Dn=n.hooks=e.hooks||{};function ht(t,s,r){cs?tn.push([t,s,r]):t in Dn&&Dn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Dn[s]=(Dn[s]||[]).concat(t.hooks[s])});const Mi=(t,s,r)=>r,$e=et({key:null,setSeries:!1,filters:{pub:Ki,sub:Ki},scales:[z,k[1]?k[1].scale:null],match:[Ji,Ji,Mi],values:[null,null]},U.sync);$e.match.length==2&&$e.match.push(Mi),U.sync=$e;const Ai=$e.key,ws=Qa(Ai);function an(t,s,r,o,f,h,_){$e.filters.pub(t,s,r,o,f,h,_)&&ws.pub(t,s,r,o,f,h,_)}ws.sub(n);function Pr(t,s,r,o,f,h,_){$e.filters.sub(t,s,r,o,f,h,_)&&Wl[t](null,s,r,o,f,h,_)}n.pub=Pr;function Rr(){ws.unsub(n),Gs.delete(n),mt.clear(),Fs(Nn,Yl,Ei),v.remove(),ce?.remove(),ht("destroy")}n.destroy=Rr;function _s(){ht("init",e,l),si(l||e.data,!1),H[z]?fs(z,H[z]):$n(),Cl=Ne.show&&(Ne.width>0||Ne.height>0),ot=yt=!0,Pl(e.width,e.height)}return k.forEach(Sn),I.forEach(fr),i?i instanceof HTMLElement?(i.appendChild(v),_s()):i(n,_s):_s(),n}it.assign=et;it.fmtNum=Ks;it.rangeNum=Vn;it.rangeLog=Un;it.rangeAsinh=js;it.orient=Ll;it.pxRatio=Te;it.join=Vo;it.fmtDate=Zs,it.tzDate=Jo;it.sync=Qa;{it.addGap=Cu,it.clipGaps=qn;let e=it.paths={points:nr};e.linear=ir,e.stepped=Fu,e.bars=Ou,e.spline=Nu}const ur="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${ur}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${ur}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=Oe('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Oe('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=Oe('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=Oe('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div></div></div>'),tc=Oe('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function lc(e,l){In(l,!0);const i=.5,n=1.2,a=32,c=212;function u(N,O){const S=[...N].sort((H,se)=>H-se),ee=O/100*(S.length-1),A=Math.floor(ee),q=Math.ceil(ee);return A===q?S[A]:S[A]+(S[q]-S[A])*(ee-A)}let p=nt(!1),d=nt(""),v=nt(null),b=Pt(()=>Rn.config.temp_units==="C"),g=Pt(xa),m=Pt(()=>{if(l.readings.length===0)return null;const N=l.readings.filter(fe=>fe.status!=="invalid");if(N.length===0)return null;const O=[...N].sort((fe,tt)=>new Date(fe.timestamp).getTime()-new Date(tt.timestamp).getTime()),S=O[0],ee=O[O.length-1],A=O.map(fe=>fe.sg_calibrated??fe.sg_raw).filter(fe=>fe!==null&&fe>=i&&fe<=n),q=O.map(fe=>fe.temp_calibrated??fe.temp_raw).filter(fe=>fe!==null&&fe>=a&&fe<=c);if(A.length===0)return null;const H=A[A.length-1],se=A[0],W=u(A,95),Pe=u(A,5),de=new Date(S.timestamp).getTime(),ae=new Date(ee.timestamp).getTime(),re=(ae-de)/(1e3*60*60*24),U=re>0?(H-se)/re:0;let be=null,De=null,ve=null,ce=null;if(q.length>0){const fe=q[q.length-1],tt=q.reduce((Rt,mt)=>Rt+mt,0)/q.length,rt=u(q,95),gt=u(q,5);be=x(b)?cn(fe):fe,De=x(b)?cn(tt):tt,ve=x(b)?cn(rt):rt,ce=x(b)?cn(gt):gt}let Le=0;const He=.001;for(let fe=A.length-2;fe>=0;fe--)if(Math.abs(A[fe]-H)>He){const tt=new Date(O[fe+1].timestamp).getTime();Le=(ae-tt)/(1e3*60*60*24);break}let we=null,Ye=null;const Ie=l.originalGravity??W,We=l.originalGravity===null;return Ie>1&&Ie>H&&(we=(Ie-H)/(Ie-1)*100,Ye=(Ie-H)*131.25),{currentSg:H,firstSg:se,highSg:W,lowSg:Pe,currentTemp:be,avgTemp:De,highTemp:ve,lowTemp:ce,fermRate:U,durationDays:re,daysAtCurrentSg:Le,apparentAttenuation:we,abv:Ye,ogIsEstimated:We,effectiveOg:Ie}});function G(){Ee(d,l.originalGravity?.toFixed(3)??"",!0),Ee(p,!0),setTimeout(()=>x(v)?.focus(),0)}function V(){const N=x(d).trim();if(!N)l.onOgChange(null);else{const O=parseFloat(N);!isNaN(O)&&O>=.99&&O<=1.2&&l.onOgChange(O)}Ee(p,!1)}function R(N){N.key==="Enter"?V():N.key==="Escape"&&Ee(p,!1)}function P(N){return N.toFixed(3)}function Z(N){return`${N>=0?"+":""}${N.toFixed(4)}`}function k(N){return N<1?`${(N*24).toFixed(1)}h`:`${N.toFixed(1)}d`}function I(N){return N===null?"--":N.toFixed(1)}function M(N){return N===null?"--":`${N.toFixed(1)}%`}var ie=ma(),z=Is(ie);{var $=N=>{var O=ec(),S=F(O),ee=F(S),A=X(F(ee),2),q=X(F(A),2),H=F(q,!0);L(q),L(A);var se=X(A,2),W=X(F(se),2),Pe=F(W,!0);L(W),L(se);var de=X(se,2),ae=X(F(de),2),pe=F(ae,!0);L(ae),L(de);var re=X(de,2),U=X(F(re),2),be=F(U,!0);L(U),L(re),L(ee);var De=X(ee,2),ve=X(F(De),2),ce=X(F(ve),2),Le=F(ce,!0),He=X(Le),we=F(He,!0);L(He),L(ce),L(ve);var Ye=X(ve,2),Ie=X(F(Ye),2),We=F(Ie,!0),fe=X(We),tt=F(fe,!0);L(fe),L(Ie),L(Ye);var rt=X(Ye,2),gt=X(F(rt),2),Rt=F(gt,!0),mt=X(Rt),Ze=F(mt,!0);L(mt),L(gt),L(rt);var Y=X(rt,2),y=X(F(Y),2),C=F(y,!0),T=X(C),w=F(T,!0);L(T),L(y),L(Y),L(De),L(S);var Q=X(S,2),K=F(Q),te=X(F(K),2);let _e;var ge=F(te);L(te),L(K);var Be=X(K,2),je=X(F(Be),2),wt=F(je,!0);L(je),L(Be);var qe=X(Be,2),_t=X(F(qe),2),rl=F(_t,!0);L(_t),L(qe);var Yt=X(qe,2),Ht=X(F(Yt),2);{var ot=Xt=>{var kt=Qu();ba(kt),kt.__keydown=R,Ws(kt,ut=>Ee(v,ut),()=>x(v)),wa("blur",kt,V),Sa(kt,()=>x(d),ut=>Ee(d,ut)),Ae(Xt,kt)},Cl=Xt=>{var kt=$u();kt.__click=G;var ut=F(kt);let Qe;var Lt=F(ut,!0);L(ut);var $t=X(ut,2);{var el=Xe=>{var tl=Xu();Ae(Xe,tl)};St($t,Xe=>{x(m).ogIsEstimated&&Xe(el)})}Ml(2),L(kt),Tt(Xe=>{Ds(kt,"title",x(m).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Qe=wl(ut,1,"stat-value svelte-3wi8ix",null,Qe,{estimated:x(m).ogIsEstimated}),xe(Lt,Xe)},[()=>P(x(m).effectiveOg)]),Ae(Xt,kt)};St(Ht,Xt=>{x(p)?Xt(ot):Xt(Cl,!1)})}L(Yt);var yt=X(Yt,2),Pl=X(F(yt),2),wn=F(Pl,!0);L(Pl),L(yt);var _n=X(yt,2),xn=X(F(_n),2),Qn=F(xn,!0);L(xn),L(_n),L(Q),L(O),Tt((Xt,kt,ut,Qe,Lt,$t,el,Xe,tl,fl,bn,Sn,Xn)=>{xe(H,Xt),xe(Pe,kt),xe(pe,ut),xe(be,Qe),xe(Le,Lt),xe(we,x(g)),xe(We,$t),xe(tt,x(g)),xe(Rt,el),xe(Ze,x(g)),xe(C,Xe),xe(w,x(g)),_e=wl(te,1,"stat-value rate svelte-3wi8ix",null,_e,{fermenting:x(m).fermRate<0}),xe(ge,`${tl??""}/day`),xe(wt,fl),xe(rl,bn),xe(wn,Sn),xe(Qn,Xn)},[()=>P(x(m).currentSg),()=>P(x(m).firstSg),()=>P(x(m).highSg),()=>P(x(m).lowSg),()=>I(x(m).currentTemp),()=>I(x(m).avgTemp),()=>I(x(m).highTemp),()=>I(x(m).lowTemp),()=>Z(x(m).fermRate),()=>k(x(m).durationDays),()=>k(x(m).daysAtCurrentSg),()=>M(x(m).apparentAttenuation),()=>M(x(m).abv)]),Ae(N,O)},le=N=>{var O=tc();Ae(N,O)};St(z,N=>{x(m)?N($):N(le,!1)})}Ae(e,ie),Wn()}Hn(["keydown","click"]);var nc=Oe('<button type="button"> </button>'),sc=Oe("<option> </option>"),ic=Oe('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ac=Oe('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),rc=Oe('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),oc=Oe('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function uc(e,l){In(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Pt(()=>Rn.config.smoothing_enabled),c=Pt(()=>Rn.config.smoothing_samples),u=nt("UTC"),p=nt(0),d=nt(3),v=Ls(l,"originalGravity",3,null),b=Pt(()=>Rn.config.temp_units==="C"),g,m=null,G=nt(!0),V=nt(null),R=nt(24),P=nt(Li([])),Z=nt(Li([]));const k={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},I="#facc15",M="rgba(250, 204, 21, 0.3)",ie="#71717a",z="#a1a1aa",$="rgba(255, 255, 255, 0.04)",le="#22d3ee";function N(Y,y,C){const T=new Date(Y*1e3);try{return C?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:y}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:y})}catch(w){return console.warn("Invalid timezone:",y,w),C?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function O(Y,y,C){const T=I,w=k[l.tiltColor]||z;return{width:Y,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(Q,K,te)=>{const _e=(te-K)*.1||.005;return[K-_e,te+_e]}},temp:{auto:!0,range:(Q,K,te)=>{const _e=te-K,ge=10;if(_e<ge){const je=(te+K)/2;return[je-ge/2,je+ge/2]}const Be=_e*.1;return[K-Be,te+Be]}}},axes:[{stroke:ie,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>N(te,C,x(R)<=24))},{scale:"sg",stroke:T,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>te.toFixed(3)),side:3},{scale:"temp",stroke:w,grid:{show:!1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>te.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:T,width:2,fill:(Q,K)=>{const te=Q.ctx.createLinearGradient(0,Q.bbox.top,0,Q.bbox.top+Q.bbox.height);return te.addColorStop(0,M),te.addColorStop(1,"transparent"),te},points:{show:!1},paths:it.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:w,width:1.5,dash:[4,4],points:{show:!1},paths:it.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:le,width:1.5,dash:[2,4],points:{show:!1},paths:it.paths.spline?.()}]}}function S(Y,y){if(y<=1)return Y;const C=[];for(let T=0;T<Y.length;T++){const w=[],Q=Math.floor(y/2);for(let K=Math.max(0,T-Q);K<=Math.min(Y.length-1,T+Q);K++){const te=Y[K];te!==null&&w.push(te)}w.length>0?C.push(w.reduce((K,te)=>K+te,0)/w.length):C.push(null)}return C}function ee(Y,y,C,T,w){if(Y.length<=w)return[Y,y,C,T];const Q=Math.ceil(Y.length/w),K=[],te=[],_e=[],ge=[];for(let Be=0;Be<Y.length;Be+=Q){const je=Math.min(Be+Q,Y.length);let wt=0,qe=0,_t=0,rl=0,Yt=0,Ht=0;for(let ot=Be;ot<je;ot++)y[ot]!==null&&(wt+=y[ot],qe++),C[ot]!==null&&(_t+=C[ot],rl++),T[ot]!==null&&(Yt+=T[ot],Ht++);K.push(Y[Math.floor((Be+je-1)/2)]),te.push(qe>0?wt/qe:null),_e.push(rl>0?_t/rl:null),ge.push(Ht>0?Yt/Ht:null)}return[K,te,_e,ge]}function A(Y){return!Y.endsWith("Z")&&!Y.match(/[+-]\d{2}:\d{2}$/)&&(Y=Y+"Z"),new Date(Y).getTime()/1e3}function q(Y,y,C){if(Y.length===0||y.length===0)return y.map(()=>null);const T=[...Y].sort((K,te)=>A(K.timestamp)-A(te.timestamp)),w=T.map(K=>A(K.timestamp)),Q=T.map(K=>K.temperature===null?null:C?K.temperature:K.temperature*9/5+32);return y.map(K=>{let te=null,_e=null;for(let ge=0;ge<w.length;ge++)if(w[ge]<=K&&(te={time:w[ge],temp:Q[ge]}),w[ge]>=K&&_e===null){_e={time:w[ge],temp:Q[ge]};break}if(te&&_e&&te.temp!==null&&_e.temp!==null){if(te.time===_e.time)return te.temp;const ge=(K-te.time)/(_e.time-te.time);return te.temp+ge*(_e.temp-te.temp)}return te!==null&&te.temp!==null?te.temp:_e!==null&&_e.temp!==null?_e.temp:null})}function H(Y,y,C){const T=[...Y].reverse();let w=[],Q=[],K=[];for(const ge of T){w.push(A(ge.timestamp)),Q.push(ge.sg_calibrated??ge.sg_raw);const Be=ge.temp_calibrated??ge.temp_raw;Be!==null?K.push(C?cn(Be):Be):K.push(null)}let te=q(y,w,C);return x(a)&&x(c)>1&&(Q=S(Q,x(c)),K=S(K,x(c)),te=S(te,x(c))),[w,Q,K,te]=ee(w,Q,K,te,500),[w,Q,K,te]}const se=3e4;async function W(Y=!1){const C=Date.now()-x(p);if(!(!Y&&x(p)>0&&C<se)){Ee(G,!0),Ee(V,null);try{const[T,w]=await Promise.all([Ju(l.tiltId,x(R)),Zu(x(R)).catch(()=>[])]);Ee(P,T,!0),Ee(Z,w,!0),Pe()}catch(T){Ee(V,T instanceof Error?T.message:"Failed to load data",!0)}finally{Ee(p,Date.now(),!0),Ee(G,!1)}}}function Pe(){if(!g||x(P).length===0)return;const Y=H(x(P),x(Z),x(b)),y=O(g.clientWidth,x(b),x(u));m&&m.destroy(),m=new it(y,Y,g)}function de(){m&&g&&m.setSize({width:g.clientWidth,height:220})}let ae=null;function pe(){if(ae&&(clearInterval(ae),ae=null),x(d)>0){const Y=x(d)*60*1e3;ae=setInterval(()=>{x(G)||W(!1)},Y)}}_a(async()=>{const Y=localStorage.getItem(i);if(Y!==null){const y=parseInt(Y,10);Number.isNaN(y)||Ee(d,y,!0)}try{const y=await fetch("/api/system/timezone");if(y.ok){const C=await y.json();Ee(u,C.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await W(!0),window.addEventListener("resize",de),pe()}),Gr(()=>{m?.destroy(),window.removeEventListener("resize",de),ae&&clearInterval(ae)}),As(()=>{x(b)!==void 0&&x(P).length>0&&g&&Pe()}),As(()=>{x(a),x(c),x(P).length>0&&g&&Pe()});function re(Y){const y=Number(Y.target.value);Ee(d,y,!0),localStorage.setItem(i,String(y)),pe(),W(!0)}var U=oc(),be=F(U),De=F(be);gn(De,21,()=>Ku,zn,(Y,y)=>{var C=nc();let T;C.__click=()=>{x(R)!==x(y).hours&&(Ee(R,x(y).hours,!0),W(!0))};var w=F(C,!0);L(C),Tt(()=>{T=wl(C,1,"range-btn svelte-1e832qd",null,T,{active:x(R)===x(y).hours}),xe(w,x(y).label)}),Ae(Y,C)}),L(De);var ve=X(De,2),ce=F(ve),Le=X(F(ce),2);Le.__change=re,gn(Le,21,()=>n,zn,(Y,y)=>{var C=sc(),T=F(C,!0);L(C);var w={};Tt(()=>{xe(T,x(y).label),w!==(w=x(y).value)&&(C.value=(C.__value=x(y).value)??"")}),Ae(Y,C)}),L(Le);var He;Jr(Le),L(ce);var we=X(ce,2),Ye=X(F(we),2),Ie=F(Ye);Ml(2),L(Ye),Ml(2),L(we),L(ve),L(be);var We=X(be,2),fe=F(We);{var tt=Y=>{var y=ic();Ae(Y,y)};St(fe,Y=>{x(G)&&Y(tt)})}var rt=X(fe,2);{var gt=Y=>{var y=ac(),C=X(F(y),2);C.__click=()=>W(!0),L(y),Ae(Y,y)},Rt=Y=>{var y=ma(),C=Is(y);{var T=w=>{var Q=rc();Ae(w,Q)};St(C,w=>{x(P).length===0&&w(T)},!0)}Ae(Y,y)};St(rt,Y=>{x(V)?Y(gt):Y(Rt,!1)})}L(We),Ws(We,Y=>g=Y,()=>g);var mt=X(We,2);{var Ze=Y=>{{let y=Pt(()=>l.onOgChange??(()=>{}));lc(Y,{get readings(){return x(P)},get originalGravity(){return v()},get onOgChange(){return x(y)}})}};St(mt,Y=>{x(P).length>0&&Y(Ze)})}L(U),Tt(()=>{He!==(He=x(d))&&(Le.value=(Le.__value=x(d))??"",Zr(Le,x(d))),Fn(Ie,`background: ${(k[l.tiltColor]||"var(--text-secondary)")??""};`)}),Ae(e,U),Wn()}Hn(["click","change"]);var cc=Oe('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),fc=Oe('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),dc=Oe('<div class="w-1 rounded-sm transition-all"></div>'),pc=Oe('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),hc=Oe("<div><!></div>"),vc=Oe('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),gc=Oe('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function mc(e,l){In(l,!0);let i=Ls(l,"expanded",3,!1),n=Ls(l,"wide",3,!1),a=nt(!1);As(()=>{i()&&!x(a)&&Ee(a,!0)});let c=nt(!1),u=nt(""),p=nt(null),d=nt(!1);function v(){Ee(u,l.tilt.beer_name,!0),Ee(c,!0),setTimeout(()=>x(p)?.focus(),0)}async function b(){if(x(d))return;const y=x(u).trim();if(!y||y===l.tilt.beer_name){Ee(c,!1);return}Ee(d,!0);const C=await Yr(l.tilt.id,y);Ee(d,!1),C&&Ee(c,!1)}function g(y){y.key==="Enter"?b():y.key==="Escape"&&Ee(c,!1)}async function m(y){await jr(l.tilt.id,y)}let G=Pt(xa);const V={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function R(y){return y.toFixed(3)}function P(y){return Br(y)}function Z(y){return y>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:y>=-60?{bars:3,color:"var(--positive)",label:"Good"}:y>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function k(y){const C=Math.floor((Date.now()-new Date(y).getTime())/1e3);if(C<10)return"just now";if(C<60)return`${C}s ago`;const T=Math.floor(C/60);if(T<60)return`${T}m ago`;const w=Math.floor(T/60);return w<24?`${w}h ago`:`${Math.floor(w/24)}d ago`}let I=Pt(()=>V[l.tilt.color]||"var(--tilt-black)"),M=Pt(()=>Z(l.tilt.rssi)),ie=Pt(()=>k(l.tilt.last_seen));var z=gc();let $;var le=F(z),N=X(le,2),O=F(N),S=F(O),ee=F(S);{var A=y=>{var C=cc();ba(C),C.__keydown=g,Ws(C,T=>Ee(p,T),()=>x(p)),Tt(()=>C.disabled=x(d)),wa("blur",C,b),Sa(C,()=>x(u),T=>Ee(u,T)),Ae(y,C)},q=y=>{var C=fc();C.__click=v;var T=F(C),w=F(T,!0);L(T),Ml(2),L(C),Tt(()=>xe(w,l.tilt.beer_name)),Ae(y,C)};St(ee,y=>{x(c)?y(A):y(q,!1)})}var H=X(ee,2),se=F(H),W=X(se,2),Pe=F(W,!0);L(W),L(H),L(S);var de=X(S,2),ae=F(de);gn(ae,20,()=>Array(4),zn,(y,C,T)=>{var w=dc();Tt(()=>Fn(w,`
								height: ${8+T*4}px;
								background: ${(T<x(M).bars?x(M).color:"var(--bg-hover)")??""};
								opacity: ${T<x(M).bars?1:.4};
							`)),Ae(y,w)}),L(ae);var pe=X(ae,2),re=F(pe);L(pe),L(de),L(O);var U=X(O,2),be=F(U),De=F(be),ve=F(De,!0);L(De),Ml(2),L(be);var ce=X(be,2),Le=F(ce),He=F(Le,!0),we=X(He),Ye=F(we,!0);L(we),L(Le),Ml(2),L(ce),L(U);var Ie=X(U,2);{var We=y=>{var C=pc(),T=X(F(C),2),w=F(T,!0);L(T);var Q=X(T,4),K=F(Q);L(Q),L(C),Tt((te,_e)=>{xe(w,te),xe(K,`${_e??""}${x(G)??""}`)},[()=>R(l.tilt.sg_raw),()=>P(l.tilt.temp_raw)]),Ae(y,C)};St(Ie,y=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&y(We)})}var fe=X(Ie,2);{var tt=y=>{var C=hc();let T;var w=F(C);Qr(w,()=>l.tilt.id,Q=>{uc(Q,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:m})}),L(C),Tt(()=>T=wl(C,1,"chart-section svelte-3twv7v",null,T,{hidden:!i()})),Ae(y,C)};St(fe,y=>{x(a)&&y(tt)})}var rt=X(fe,2),gt=F(rt),Rt=F(gt);L(gt);var mt=X(gt,2),Ze=F(mt);{var Y=y=>{var C=vc();C.__click=function(...Q){l.onToggleExpand?.apply(this,Q)};var T=F(C);let w;L(C),Tt(()=>{Ds(C,"aria-label",i()?"Collapse chart":"Expand chart"),w=wl(T,0,"w-4 h-4 transition-transform",null,w,{"rotate-180":i()})}),Ae(y,C)};St(Ze,y=>{l.onToggleExpand&&y(Y)})}Ml(2),L(mt),L(rt),L(N),L(z),Tt((y,C)=>{$=wl(z,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,$,{expanded:i(),wide:n()}),Fn(le,`background: ${x(I)??""};`),Fn(se,`background: ${x(I)??""};`),xe(Pe,l.tilt.color),Ds(de,"title",`${x(M).label??""} signal (${l.tilt.rssi??""} dBm)`),xe(re,`${l.tilt.rssi??""} dBm`),xe(ve,y),xe(He,C),xe(Ye,x(G)),xe(Rt,`Updated ${x(ie)??""}`)},[()=>R(l.tilt.sg),()=>P(l.tilt.temp)]),Ae(e,z),Wn()}Hn(["keydown","click"]);var wc=Oe('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),_c=Oe('<div class="alerts-list svelte-1uha8ag"></div>'),xc=Oe('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),bc=Oe('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Sc=Oe('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),yc=Oe('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),kc=Oe('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Tc=Oe("<div></div>"),Ec=Oe("<!> <!>",1);function Gc(e,l){In(l,!0);let i=nt(!1),n=nt(!1);_a(()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),P=localStorage.getItem("brewsignal_alerts_dismissed_time");return R==="true"&&P&&Date.now()-parseInt(P,10)<360*60*1e3&&Ee(i,!0),qr(),()=>{Kr()}});let a=Pt(()=>Array.from(xs.tilts.values())),c=nt(null);function u(R){Ee(c,x(c)===R?null:R,!0)}function p(){Ee(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function d(){Ee(n,!x(n))}var v=Ec();Ur("1uha8ag",R=>{Hr(()=>{Ir.title="Dashboard | BrewSignal"})});var b=Is(v);{var g=R=>{var P=bc(),Z=F(P),k=F(Z),I=X(F(k),4),M=F(I,!0);L(I),L(k);var ie=X(k,2);ie.__click=p,L(Z);var z=X(Z,2);{var $=O=>{var S=_c();gn(S,21,()=>rn.alerts,zn,(ee,A)=>{var q=wc();let H;var se=F(q),W=F(se);L(se);var Pe=X(se,2),de=F(Pe,!0);L(Pe),L(q),Tt(()=>{H=wl(q,1,"alert-item svelte-1uha8ag",null,H,{warning:x(A).level==="warning",critical:x(A).level==="critical"}),xe(W,`${x(A).day??""}:`),xe(de,x(A).message)}),Ae(ee,q)}),L(S),Ae(O,S)};St(z,O=>{x(n)||O($)})}var le=X(z,2);{var N=O=>{var S=xc();S.__click=d;var ee=F(S,!0);L(S),Tt(()=>xe(ee,x(n)?`Show ${rn.alerts.length} alerts`:"Show less")),Ae(O,S)};St(le,O=>{rn.alerts.length>3&&O(N)})}L(P),Tt(()=>xe(M,rn.alerts.length)),Ae(R,P)};St(b,R=>{rn.alerts.length>0&&!x(i)&&R(g)})}var m=X(b,2);{var G=R=>{var P=kc(),Z=X(F(P),4),k=F(Z);{var I=$=>{var le=Fr("Waiting for Tilt hydrometers to broadcast...");Ae($,le)},M=$=>{var le=Sc();Ae($,le)};St(k,$=>{xs.connected?$(I):$(M,!1)})}L(Z);var ie=X(Z,2);{var z=$=>{var le=yc();Ae($,le)};St(ie,$=>{xs.connected&&$(z)})}L(P),Ae(R,P)},V=R=>{var P=Tc();let Z;gn(P,21,()=>x(a),k=>k.id,(k,I)=>{{let M=Pt(()=>x(c)===x(I).id),ie=Pt(()=>x(a).length===1);mc(k,{get tilt(){return x(I)},get expanded(){return x(M)},get wide(){return x(ie)},onToggleExpand:()=>u(x(I).id)})}}),L(P),Tt(()=>Z=wl(P,1,"tilt-grid svelte-1uha8ag",null,Z,{"single-tilt":x(a).length===1})),Ae(R,P)};St(m,R=>{x(a).length===0?R(G):R(V,!1)})}Ae(e,v),Wn()}Hn(["click"]);export{Gc as component};
