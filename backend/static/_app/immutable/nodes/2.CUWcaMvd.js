import{d as Zn,c as Dn,a as ye,f as De,s as we,e as ba}from"../chunks/DFbRLFGc.js";import{o as Or,R as Nr,b7 as Gr,b as zr,ah as Qn,ar as Sl,c as d,ai as ze,aj as $n,al as L,an as E,ak as B,ao as qe,as as pt,s as ge,at as Bl,p as Yn,ap as ya,aL as Vr,aq as Os,e as Ir,am as Br}from"../chunks/-s7GvDYA.js";import{e as Ln,i as qn}from"../chunks/DSjxYGfQ.js";import{B as Hr,i as ot}from"../chunks/DiA6E_7b.js";import{h as Wr}from"../chunks/BsCIOrMO.js";import{s as bl}from"../chunks/DC-wEq0z.js";import{t as Sa}from"../chunks/BJZu1gQI.js";import{w as wn}from"../chunks/fpvWZG4p.js";import{r as ka,s as nn}from"../chunks/CXlnwKpw.js";import{s as Mn}from"../chunks/CxDjpI2d.js";import{b as Ta}from"../chunks/BXlrlxF0.js";import{b as qs}from"../chunks/heAMOb8F.js";import{p as Cn}from"../chunks/BPBk5V8z.js";import{f as yn,c as Wn,d as js,b as Ks,g as Ma,e as Ur}from"../chunks/BH1aWYKn.js";import{T as Yr,h as qr,j as jr,k as Kr,u as Jr,f as Zr,a as Qr}from"../chunks/DLyiWXp0.js";import{i as $r,s as Xr}from"../chunks/D9NHjgjI.js";function eo(e,l,i){Or&&Nr();var n=new Hr(e),a=!Gr();zr(()=>{var u=l();a&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const to=!0,bt="u-",lo="uplot",no=bt+"hz",so=bt+"vt",io=bt+"title",ao=bt+"wrap",ro=bt+"under",oo=bt+"over",co=bt+"axis",Il=bt+"off",uo=bt+"select",fo=bt+"cursor-x",po=bt+"cursor-y",vo=bt+"cursor-pt",ho=bt+"legend",go=bt+"live",mo=bt+"inline",_o=bt+"series",wo=bt+"marker",Oi=bt+"label",xo=bt+"value",Sn="width",kn="height",xn="top",Ni="bottom",tn="left",As="right",Js="#000",Gi=Js+"0",Ds="mousemove",zi="mousedown",Ls="mouseup",Vi="mouseenter",Ii="mouseleave",Bi="dblclick",bo="resize",yo="scroll",Hi="change",jn="dppxchange",Zs="--",un=typeof window<"u",Ns=un?document:null,sn=un?window:null,So=un?navigator:null;let Fe,In;function Gs(){let e=devicePixelRatio;Fe!=e&&(Fe=e,In&&Vs(Hi,In,Gs),In=matchMedia(`(min-resolution: ${Fe-.001}dppx) and (max-resolution: ${Fe+.001}dppx)`),Hl(Hi,In,Gs),sn.dispatchEvent(new CustomEvent(jn)))}function $t(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Qe(e,l,i){e.style[l]=i+"px"}function pl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&$t(a,l),i?.insertBefore(a,n),a}function rl(e,l){return pl("div",e,l)}const Wi=new WeakMap;function xl(e,l,i,n,a){let u="translate("+l+"px,"+i+"px)",c=Wi.get(e);u!=c&&(e.style.transform=u,Wi.set(e,u),l<0||i<0||l>n||i>a?$t(e,Il):zs(e,Il))}const Ui=new WeakMap;function Yi(e,l,i){let n=l+i,a=Ui.get(e);n!=a&&(Ui.set(e,n),e.style.background=l,e.style.borderColor=i)}const qi=new WeakMap;function ji(e,l,i,n){let a=l+""+i,u=qi.get(e);a!=u&&(qi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Qs={passive:!0},ko={...Qs,capture:!0};function Hl(e,l,i,n){l.addEventListener(e,i,n?ko:Qs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Qs)}un&&Gs();function vl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)a=u?i+n>>1:Xt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let u=-1,c=-1;for(let p=n;p<=a;p++)if(e(i[p])){u=p;break}for(let p=a;p>=n;p--)if(e(i[p])){c=p;break}return[u,c]}}const Aa=e=>e!=null,Da=e=>e!=null&&e>0,Xn=Ea(Aa),To=Ea(Da);function Mo(e,l,i,n=0,a=!1){let u=a?To:Xn,c=a?Da:Aa;[l,i]=u(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let k=e[h];c(k)&&(k<p?p=k:k>v&&(v=k))}return[p??We,v??-We]}function es(e,l,i,n){let a=Zi(e),u=Zi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?kl:La,p=a==1?Xt:ol,v=u==1?ol:Xt,h=p(c(wt(e))),k=v(c(wt(l))),m=an(i,h),_=an(i,k);return i==10&&(h<0&&(m=Ue(m,-h)),k<0&&(_=Ue(_,-k))),n||i==2?(e=m*a,l=_*u):(e=Fa(e,m),l=ts(l,_)),[e,l]}function $s(e,l,i,n){let a=es(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},En={pad:0,soft:null,mode:0},Eo={min:En,max:En};function Kn(e,l,i,n){return ls(i)?Ji(e,l,i):(En.pad=i,En.soft=n?0:null,En.mode=n?3:0,Ji(e,l,Eo))}function Pe(e,l){return e??l}function Ao(e,l,i){for(l=Pe(l,0),i=Pe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ji(e,l,i){let n=i.min,a=i.max,u=Pe(n.pad,0),c=Pe(a.pad,0),p=Pe(n.hard,-We),v=Pe(a.hard,We),h=Pe(n.soft,We),k=Pe(a.soft,-We),m=Pe(n.mode,0),_=Pe(a.mode,0),N=l-e,T=kl(N),Y=Wt(wt(e),wt(l)),Z=kl(Y),ee=wt(Z-T);(N<1e-24||ee>10)&&(N=0,(e==0||l==0)&&(N=1e-24,m==2&&h!=We&&(u=0),_==2&&k!=-We&&(c=0)));let y=N||Y||1e3,Q=kl(y),D=an(10,Xt(Q)),O=y*(N==0?e==0?.1:1:u),C=Ue(Fa(e-O,D/10),24),te=e>=h&&(m==1||m==3&&C<=h||m==2&&C>=h)?h:We,$=Wt(p,C<te&&e>=te?te:hl(te,C)),j=y*(N==0?l==0?.1:1:c),le=Ue(ts(l+j,D/10),24),w=l<=k&&(_==1||_==3&&le>=k||_==2&&le<=k)?k:-We,V=hl(v,le>w&&l<=w?w:Wt(w,le));return $==V&&$==0&&(V=100),[$,V]}const Do=new Intl.NumberFormat(un?So.language:"en-US"),ei=e=>Do.format(e),el=Math,Un=el.PI,wt=el.abs,Xt=el.floor,_t=el.round,ol=el.ceil,hl=el.min,Wt=el.max,an=el.pow,Zi=el.sign,kl=el.log10,La=el.log2,Lo=(e,l=1)=>el.sinh(e)*l,Cs=(e,l=1)=>el.asinh(e/l),We=1/0;function Qi(e){return(kl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return hl(Wt(e,l),i)}function Ca(e){return typeof e=="function"}function Te(e){return Ca(e)?e:()=>e}const Co=()=>{},Pa=e=>e,Ra=(e,l)=>l,Po=e=>null,$i=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Wl=e=>{if(Na(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,u]=l.split("e");return+`${Wl(a)}e${u}`}return Ue(e,n)};function zl(e,l){return Wl(Ue(Wl(e/l))*l)}function ts(e,l){return Wl(ol(Wl(e/l))*l)}function Fa(e,l){return Wl(Xt(Wl(e/l))*l)}function Ue(e,l=0){if(Na(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return _t(n)/i}const Rl=new Map;function Oa(e){return((""+e).split(".")[1]||"").length}function Pn(e,l,i,n){let a=[],u=n.map(Oa);for(let c=l;c<i;c++){let p=wt(c),v=Ue(an(e,c),p);for(let h=0;h<n.length;h++){let k=e==10?+`${n[h]}e${c}`:n[h]*v,m=(c>=0?0:p)+(c>=u[h]?0:u[h]),_=e==10?k:Ue(k,m);a.push(_),Rl.set(_,m)}}return a}const An={},ti=[],rn=[null,null],Pl=Array.isArray,Na=Number.isInteger,Fo=e=>e===void 0;function ea(e){return typeof e=="string"}function ls(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Oo(e){return e!=null&&typeof e=="object"}const No=Object.getPrototypeOf(Uint8Array),Ga="__proto__";function on(e,l=ls){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=on(e[a],l)}else i=e.slice()}else if(e instanceof No)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Ga&&(i[n]=on(e[n],l))}else i=e;return i}function mt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Ga&&(ls(e[a])?mt(e[a],on(n[a])):e[a]=on(n[a]))}return e}const Go=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[u=a++]=null}}}function Bo(e,l){if(Uo(e)){let c=e[0].slice();for(let p=1;p<e.length;p++)c.push(...e[p].slice(1));return Yo(c[0])||(c=Wo(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let v=e[c][0],h=v.length;for(let k=0;k<h;k++)i.add(v[k])}let n=[Array.from(i).sort((c,p)=>c-p)],a=n[0].length,u=new Map;for(let c=0;c<a;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let p=e[c],v=p[0];for(let h=1;h<p.length;h++){let k=p[h],m=Array(a).fill(void 0),_=l?l[c][h]:zo,N=[];for(let T=0;T<k.length;T++){let Y=k[T],Z=u.get(v[T]);Y===null?_!=Go&&(m[Z]=Y,_==Vo&&N.push(Z)):m[Z]=Y}Io(m,N,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let a=[];for(let u=0;u<e.length;u++){let c=e[u],p=Array(i);for(let v=0;v<i;v++)p[v]=c[n[v]];a.push(p)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let u=0;u<i;u++)if(a[u]!=l[u])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const u=Wt(1,Xt((a-n+1)/l));for(let c=e[n],p=n+u;p<=a;p+=u){const v=e[p];if(v!=null){if(v<=c)return!1;c=v}}return!0}const za=["January","February","March","April","May","June","July","August","September","October","November","December"],Va=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ia(e){return e.slice(0,3)}const qo=Va.map(Ia),jo=za.map(Ia),Ko={MMMM:za,MMM:jo,WWWW:Va,WWW:qo};function bn(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const Zo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>bn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>bn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>bn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>bn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>bn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function li(e,l){l=l||Ko;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Zo[a[1]]:a[0]);return u=>{let c="";for(let p=0;p<i.length;p++)c+=typeof i[p]=="string"?i[p]:i[p](u,l);return c}}const Qo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Qo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Jn=[1,2,2.5,5],Xo=Pn(10,-32,0,Jn),Ha=Pn(10,0,32,Jn),ec=Ha.filter(Ba),Vl=Xo.concat(Ha),ni=`
`,Wa="{YYYY}",ta=ni+Wa,Ua="{M}/{D}",Tn=ni+Ua,Bn=Tn+"/{YY}",Ya="{aa}",tc="{h}:{mm}",ln=tc+Ya,la=ni+ln,na=":{ss}",Ne=null;function qa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,u=a*30,c=a*365,v=(e==1?Pn(10,0,3,Jn).filter(Ba):Pn(10,-3,0,Jn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const h=[[c,Wa,Ne,Ne,Ne,Ne,Ne,Ne,1],[a*28,"{MMM}",ta,Ne,Ne,Ne,Ne,Ne,1],[a,Ua,ta,Ne,Ne,Ne,Ne,Ne,1],[n,"{h}"+Ya,Bn,Ne,Tn,Ne,Ne,Ne,1],[i,ln,Bn,Ne,Tn,Ne,Ne,Ne,1],[l,na,Bn+" "+ln,Ne,Tn+" "+ln,Ne,la,Ne,1],[e,na+".{fff}",Bn+" "+ln,Ne,Tn+" "+ln,Ne,la,Ne,1]];function k(m){return(_,N,T,Y,Z,ee)=>{let y=[],Q=Z>=c,D=Z>=u&&Z<c,O=m(T),C=Ue(O*e,3),te=Ps(O.getFullYear(),Q?0:O.getMonth(),D||Q?1:O.getDate()),$=Ue(te*e,3);if(D||Q){let j=D?Z/u:0,le=Q?Z/c:0,w=C==$?C:Ue(Ps(te.getFullYear()+le,te.getMonth()+j,1)*e,3),V=new Date(_t(w/e)),G=V.getFullYear(),K=V.getMonth();for(let A=0;w<=Y;A++){let H=Ps(G+le*A,K+j*A,1),F=H-m(Ue(H*e,3));w=Ue((+H+F)*e,3),w<=Y&&y.push(w)}}else{let j=Z>=a?a:Z,le=Xt(T)-Xt(C),w=$+le+ts(C-$,j);y.push(w);let V=m(w),G=V.getHours()+V.getMinutes()/i+V.getSeconds()/n,K=Z/n,A=_.axes[N]._space,H=ee/A;for(;w=Ue(w+Z,e==1?0:3),!(w>Y);)if(K>1){let F=Xt(Ue(G+K,6))%24,re=m(w).getHours()-F;re>1&&(re=-1),w-=re*n,G=(G+K)%24;let he=y[y.length-1];Ue((w-he)/Z,3)*H>=.7&&y.push(w)}else y.push(w)}return y}}return[v,h,k]}const[lc,nc,sc]=qa(1),[ic,ac,rc]=qa(.001);Pn(2,-53,53,[1]);function sa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ia(e,l){return(i,n,a,u,c)=>{let p=l.find(T=>c>=T[0])||l[l.length-1],v,h,k,m,_,N;return n.map(T=>{let Y=e(T),Z=Y.getFullYear(),ee=Y.getMonth(),y=Y.getDate(),Q=Y.getHours(),D=Y.getMinutes(),O=Y.getSeconds(),C=Z!=v&&p[2]||ee!=h&&p[3]||y!=k&&p[4]||Q!=m&&p[5]||D!=_&&p[6]||O!=N&&p[7]||p[1];return v=Z,h=ee,k=y,m=Q,_=D,N=O,C(Y)})}}function oc(e,l){let i=li(l);return(n,a,u,c,p)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function aa(e,l){return l(e)}const cc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ra(e,l){return(i,n,a,u)=>u==null?Zs:l(e(n))}function uc(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fc(e,l){return e.series[l].fill(e,l)}const dc={show:!0,live:!0,isolate:!1,mount:Co,markers:{show:!0,width:2,stroke:uc,fill:fc,dash:"solid"},idx:null,idxs:null,values:[]};function pc(e,l){let i=e.cursor.points,n=rl(),a=i.size(e,l);Qe(n,Sn,a),Qe(n,kn,a);let u=a/-2;Qe(n,"marginLeft",u),Qe(n,"marginTop",u);let c=i.width(e,l,a);return c&&Qe(n,"borderWidth",c),n}function vc(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hc(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gc(e,l){return e.series[l].points.size}const Rs=[0,0];function mc(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function Hn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _c={show:!0,x:!0,y:!0,lock:!1,move:mc,points:{one:!1,show:pc,size:gc,width:0,stroke:hc,fill:vc},bind:{mousedown:Hn,mouseup:Hn,click:Hn,dblclick:Hn,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},ja={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},si=mt({},ja,{filter:Ra}),Ka=mt({},si,{size:10}),Ja=mt({},ja,{show:!1}),ii='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Za="bold "+ii,Qa=1.5,oa={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Za,side:2,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Qa,rotate:0},wc="Value",xc="Time",ca={show:!0,scale:"x",auto:!1,sorted:1,min:We,max:-We,idxs:[]};function bc(e,l,i,n,a){return l.map(u=>u==null?"":ei(u))}function yc(e,l,i,n,a,u,c){let p=[],v=Rl.get(a)||0;i=c?i:Ue(ts(i,a),v);for(let h=i;h<=n;h=Ue(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,u,c){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?kl:La,k=Xt(h(i));a=an(v,k),v==10&&(a=Vl[vl(a,Vl)]);let m=i,_=a*v;v==10&&(_=Vl[vl(_,Vl)]);do p.push(m),m=m+a,v==10&&!Rl.has(m)&&(m=Ue(m,Rl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Vl[vl(_,Vl)]));while(m<=n);return p}function Sc(e,l,i,n,a,u,c){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Wt(v,i),n,a):[v],k=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Wt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(k,h)}const $a=/./,kc=/[12357]/,Tc=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,u)=>l==4&&a==0||u%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mc(e,l,i,n,a){let u=e.axes[i],c=u.scale,p=e.scales[c],v=e.valToPos,h=u._space,k=v(10,c),m=v(9,c)-k>=h?$a:v(7,c)-k>=h?kc:v(5,c)-k>=h?Tc:ua;if(m==ua){let _=wt(v(1,c)-k);if(_<h)return Hs(l.slice().reverse(),p.distr,m,ol(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Ec(e,l,i,n,a){let u=e.axes[i],c=u.scale,p=u._space,v=e.valToPos,h=wt(v(1,c)-v(2,c));return h<p?Hs(l.slice().reverse(),3,$a,ol(p/h)).reverse():l}function Ac(e,l,i,n){return n==null?Zs:l==null?"":ei(l)}const fa={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Za,side:3,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Qa,rotate:0};function Dc(e,l){let i=3+(e||1)*2;return Ue(i*l,3)}function Lc(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],u=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),p=wt(c-u),v=e.series[l],h=p/(v.points.space*Fe);return n[1]-n[0]<=h}const da={scale:null,auto:!0,sorted:0,min:We,max:-We},Xa=(e,l,i,n,a)=>a,pa={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[mt({},da,{scale:"x"}),mt({},da,{scale:"y"})]},va={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Lc,filter:null},values:null,min:We,max:-We,idxs:[],path:null,clip:null};function Cc(e,l,i,n,a){return i/10}const er={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pc=mt({},er,{time:!1,ori:1}),ha={};function tr(e,l){let i=ha[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,u,c,p,v,h){for(let k=0;k<i.plots.length;k++)i.plots[k]!=a&&i.plots[k].pub(n,a,u,c,p,v,h)}},e!=null&&(ha[e]=i)),i}const cn=1,Ws=2;function Ul(e,l,i){const n=e.mode,a=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,p=e.bbox;let v=u[0],h=n==2?u[1]:u[l],k=n==2?c[a.facets[0].scale]:c[e.series[0].scale],m=n==2?c[a.facets[1].scale]:c[a.scale],_=p.left,N=p.top,T=p.width,Y=p.height,Z=e.valToPosH,ee=e.valToPosV;return k.ori==0?i(a,v,h,k,m,Z,ee,_,N,T,Y,ss,fn,as,nr,ir):i(a,v,h,k,m,ee,Z,N,_,Y,T,is,dn,oi,sr,ar)}function ai(e,l){let i=0,n=0,a=Pe(e.bands,ti);for(let u=0;u<a.length;u++){let c=a[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Rc(e,l,i,n,a){let u=e.mode,c=e.series[l],p=u==2?c.facets[1].scale:c.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function Tl(e,l,i,n,a,u){return Ul(e,l,(c,p,v,h,k,m,_,N,T,Y,Z)=>{let ee=c.pxRound;const y=h.dir*(h.ori==0?1:-1),Q=h.ori==0?fn:dn;let D,O;y==1?(D=i,O=n):(D=n,O=i);let C=ee(m(p[D],h,Y,N)),te=ee(_(v[D],k,Z,T)),$=ee(m(p[O],h,Y,N)),j=ee(_(u==1?k.max:k.min,k,Z,T)),le=new Path2D(a);return Q(le,$,j),Q(le,C,j),Q(le,C,te),le})}function ns(e,l,i,n,a,u){let c=null;if(e.length>0){c=new Path2D;const p=l==0?as:oi;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let N=_[0]-v;N>0&&p(c,v,n,N,n+u),v=_[1]}}let h=i+a-v,k=10;h>0&&p(c,v,n-k/2,h,n+u+k)}return c}function Fc(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ri(e,l,i,n,a,u,c){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let N=u(e[m]),T=_==m?N:u(e[_]),Y=m-a;N=c<=0&&Y>=0&&Y<v?u(e[Y]):N;let ee=_+a;T=c>=0&&ee>=0&&ee<v?u(e[ee]):T,T>=N&&p.push([N,T])}return p}function ga(e){return e==0?Pa:e==1?_t:l=>zl(l,e)}function lr(e){let l=e==0?ss:is,i=e==0?(a,u,c,p,v,h)=>{a.arcTo(u,c,p,v,h)}:(a,u,c,p,v,h)=>{a.arcTo(c,u,v,p,h)},n=e==0?(a,u,c,p,v)=>{a.rect(u,c,p,v)}:(a,u,c,p,v)=>{a.rect(c,u,v,p)};return(a,u,c,p,v,h=0,k=0)=>{h==0&&k==0?n(a,u,c,p,v):(h=hl(h,p/2,v/2),k=hl(k,p/2,v/2),l(a,u+h,c),i(a,u+p,c,u+p,c+v,h),i(a,u+p,c+v,u,c+v,k),i(a,u,c+v,u,c,k),i(a,u,c,u+p,c,h),a.closePath())}}const ss=(e,l,i)=>{e.moveTo(l,i)},is=(e,l,i)=>{e.moveTo(i,l)},fn=(e,l,i)=>{e.lineTo(l,i)},dn=(e,l,i)=>{e.lineTo(i,l)},as=lr(0),oi=lr(1),nr=(e,l,i,n,a,u)=>{e.arc(l,i,n,a,u)},sr=(e,l,i,n,a,u)=>{e.arc(i,l,n,a,u)},ir=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(l,i,n,a,u,c)},ar=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(i,l,a,n,c,u)};function rr(e){return(l,i,n,a,u)=>Ul(l,i,(c,p,v,h,k,m,_,N,T,Y,Z)=>{let{pxRound:ee,points:y}=c,Q,D;h.ori==0?(Q=ss,D=nr):(Q=is,D=sr);const O=Ue(y.width*Fe,3);let C=(y.size-y.width)/2*Fe,te=Ue(C*2,3),$=new Path2D,j=new Path2D,{left:le,top:w,width:V,height:G}=l.bbox;as(j,le-te,w-te,V+te*2,G+te*2);const K=A=>{if(v[A]!=null){let H=ee(m(p[A],h,Y,N)),F=ee(_(v[A],k,Z,T));Q($,H+C,F),D($,H,F,C,0,Un*2)}};if(u)u.forEach(K);else for(let A=n;A<=a;A++)K(A);return{stroke:O>0?$:null,fill:$,clip:j,flags:cn|Ws}})}function or(e){return(l,i,n,a,u,c)=>{n!=a&&(u!=n&&c!=n&&e(l,i,n),u!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Oc=or(fn),Nc=or(dn);function cr(e){const l=Pe(e?.alignGaps,0);return(i,n,a,u)=>Ul(i,n,(c,p,v,h,k,m,_,N,T,Y,Z)=>{[a,u]=Xn(v,a,u);let ee=c.pxRound,y=G=>ee(m(G,h,Y,N)),Q=G=>ee(_(G,k,Z,T)),D,O;h.ori==0?(D=fn,O=Oc):(D=dn,O=Nc);const C=h.dir*(h.ori==0?1:-1),te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:cn},$=te.stroke;let j=!1;if(u-a>=Y*4){let G=q=>i.posToVal(q,h.key,!0),K=null,A=null,H,F,Me,ve=y(p[C==1?a:u]),re=y(p[a]),he=y(p[u]),ne=G(C==1?re+1:he-1);for(let q=C==1?a:u;q>=a&&q<=u;q+=C){let Ee=p[q],xe=(C==1?Ee<ne:Ee>ne)?ve:y(Ee),me=v[q];xe==ve?me!=null?(F=me,K==null?(D($,xe,Q(F)),H=K=A=F):F<K?K=F:F>A&&(A=F)):me===null&&(j=!0):(K!=null&&O($,ve,Q(K),Q(A),Q(H),Q(F)),me!=null?(F=me,D($,xe,Q(F)),K=A=H=F):(K=A=null,me===null&&(j=!0)),ve=xe,ne=G(ve+C))}K!=null&&K!=A&&Me!=ve&&O($,ve,Q(K),Q(A),Q(H),Q(F))}else for(let G=C==1?a:u;G>=a&&G<=u;G+=C){let K=v[G];K===null?j=!0:K!=null&&D($,y(p[G]),Q(K))}let[w,V]=ai(i,n);if(c.fill!=null||w!=0){let G=te.fill=new Path2D($),K=c.fillTo(i,n,c.min,c.max,w),A=Q(K),H=y(p[a]),F=y(p[u]);C==-1&&([F,H]=[H,F]),D(G,F,A),D(G,H,A)}if(!c.spanGaps){let G=[];j&&G.push(...ri(p,v,a,u,C,y,l)),te.gaps=G=c.gaps(i,n,a,u,G),te.clip=ns(G,h.ori,N,T,Y,Z)}return V!=0&&(te.band=V==2?[Tl(i,n,a,u,$,-1),Tl(i,n,a,u,$,1)]:Tl(i,n,a,u,$,V)),te})}function Gc(e){const l=Pe(e.align,1),i=Pe(e.ascDesc,!1),n=Pe(e.alignGaps,0),a=Pe(e.extend,!1);return(u,c,p,v)=>Ul(u,c,(h,k,m,_,N,T,Y,Z,ee,y,Q)=>{[p,v]=Xn(m,p,v);let D=h.pxRound,{left:O,width:C}=u.bbox,te=re=>D(T(re,_,y,Z)),$=re=>D(Y(re,N,Q,ee)),j=_.ori==0?fn:dn;const le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:cn},w=le.stroke,V=_.dir*(_.ori==0?1:-1);let G=$(m[V==1?p:v]),K=te(k[V==1?p:v]),A=K,H=K;a&&l==-1&&(H=O,j(w,H,G)),j(w,K,G);for(let re=V==1?p:v;re>=p&&re<=v;re+=V){let he=m[re];if(he==null)continue;let ne=te(k[re]),q=$(he);l==1?j(w,ne,G):j(w,A,q),j(w,ne,q),G=q,A=ne}let F=A;a&&l==1&&(F=O+C,j(w,F,G));let[Me,ve]=ai(u,c);if(h.fill!=null||Me!=0){let re=le.fill=new Path2D(w),he=h.fillTo(u,c,h.min,h.max,Me),ne=$(he);j(re,F,ne),j(re,H,ne)}if(!h.spanGaps){let re=[];re.push(...ri(k,m,p,v,V,te,n));let he=h.width*Fe/2,ne=i||l==1?he:-he,q=i||l==-1?-he:he;re.forEach(Ee=>{Ee[0]+=ne,Ee[1]+=q}),le.gaps=re=h.gaps(u,c,p,v,re),le.clip=ns(re,_.ori,Z,ee,y,Q)}return ve!=0&&(le.band=ve==2?[Tl(u,c,p,v,w,-1),Tl(u,c,p,v,w,1)]:Tl(u,c,p,v,w,ve)),le})}function ma(e,l,i,n,a,u,c=We){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let k=wt(e[v]-e[p]);k<h&&(h=k,c=wt(i(e[v],n,a,u)-i(e[p],n,a,u)))}p=v}}return c}function zc(e){e=e||An;const l=Pe(e.size,[.6,We,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const u=Te(a),c=1-l[0],p=Pe(l[1],We),v=Pe(l[2],1),h=Pe(e.disp,An),k=Pe(e.each,N=>{}),{fill:m,stroke:_}=h;return(N,T,Y,Z)=>Ul(N,T,(ee,y,Q,D,O,C,te,$,j,le,w)=>{let V=ee.pxRound,G=i,K=n*Fe,A=p*Fe,H=v*Fe,F,Me;D.ori==0?[F,Me]=u(N,T):[Me,F]=u(N,T);const ve=D.dir*(D.ori==0?1:-1);let re=D.ori==0?as:oi,he=D.ori==0?k:(z,ke,He,qt,Ut,Rt,Gt)=>{k(z,ke,He,Ut,qt,Gt,Rt)},ne=Pe(N.bands,ti).find(z=>z.series[0]==T),q=ne!=null?ne.dir:0,Ee=ee.fillTo(N,T,ee.min,ee.max,q),Ye=V(te(Ee,O,w,j)),xe,me,ct,Ge=le,be=V(ee.width*Fe),ut=!1,vt=null,$e=null,tt=null,yt=null;m!=null&&(be==0||_!=null)&&(ut=!0,vt=m.values(N,T,Y,Z),$e=new Map,new Set(vt).forEach(z=>{z!=null&&$e.set(z,new Path2D)}),be>0&&(tt=_.values(N,T,Y,Z),yt=new Map,new Set(tt).forEach(z=>{z!=null&&yt.set(z,new Path2D)})));let{x0:_e,size:lt}=h;if(_e!=null&&lt!=null){G=1,y=_e.values(N,T,Y,Z),_e.unit==2&&(y=y.map(He=>N.posToVal($+He*le,D.key,!0)));let z=lt.values(N,T,Y,Z);lt.unit==2?me=z[0]*le:me=C(z[0],D,le,$)-C(0,D,le,$),Ge=ma(y,Q,C,D,le,$,Ge),ct=Ge-me+K}else Ge=ma(y,Q,C,D,le,$,Ge),ct=Ge*c+K,me=Ge-ct;ct<1&&(ct=0),be>=me/2&&(be=0),ct<5&&(V=Pa);let nt=ct>0,St=Ge-ct-(nt?be:0);me=V(Is(St,H,A)),xe=(G==0?me/2:G==ve?0:me)-G*ve*((G==0?K/2:0)+(nt?be/2:0));const Be={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Ct=ut?null:new Path2D;let Pt=null;if(ne!=null)Pt=N.data[ne.series[1]];else{let{y0:z,y1:ke}=h;z!=null&&ke!=null&&(Q=ke.values(N,T,Y,Z),Pt=z.values(N,T,Y,Z))}let kt=F*me,ue=Me*me;for(let z=ve==1?Y:Z;z>=Y&&z<=Z;z+=ve){let ke=Q[z];if(ke==null)continue;if(Pt!=null){let R=Pt[z]??0;if(ke-R==0)continue;Ye=te(R,O,w,j)}let He=D.distr!=2||h!=null?y[z]:z,qt=C(He,D,le,$),Ut=te(Pe(ke,Ee),O,w,j),Rt=V(qt-xe),Gt=V(Wt(Ut,Ye)),ft=V(hl(Ut,Ye)),ht=Gt-ft;if(ke!=null){let R=ke<0?ue:kt,W=ke<0?kt:ue;ut?(be>0&&tt[z]!=null&&re(yt.get(tt[z]),Rt,ft+Xt(be/2),me,Wt(0,ht-be),R,W),vt[z]!=null&&re($e.get(vt[z]),Rt,ft+Xt(be/2),me,Wt(0,ht-be),R,W)):re(Ct,Rt,ft+Xt(be/2),me,Wt(0,ht-be),R,W),he(N,T,z,Rt-be/2,ft,me+be,ht)}}return be>0?Be.stroke=ut?yt:Ct:ut||(Be._fill=ee.width==0?ee._fill:ee._stroke??ee._fill,Be.width=0),Be.fill=ut?$e:Ct,Be})}function Vc(e,l){const i=Pe(l?.alignGaps,0);return(n,a,u,c)=>Ul(n,a,(p,v,h,k,m,_,N,T,Y,Z,ee)=>{[u,c]=Xn(h,u,c);let y=p.pxRound,Q=F=>y(_(F,k,Z,T)),D=F=>y(N(F,m,ee,Y)),O,C,te;k.ori==0?(O=ss,te=fn,C=ir):(O=is,te=dn,C=ar);const $=k.dir*(k.ori==0?1:-1);let j=Q(v[$==1?u:c]),le=j,w=[],V=[];for(let F=$==1?u:c;F>=u&&F<=c;F+=$)if(h[F]!=null){let ve=v[F],re=Q(ve);w.push(le=re),V.push(D(h[F]))}const G={stroke:e(w,V,O,te,C,y),fill:null,clip:null,band:null,gaps:null,flags:cn},K=G.stroke;let[A,H]=ai(n,a);if(p.fill!=null||A!=0){let F=G.fill=new Path2D(K),Me=p.fillTo(n,a,p.min,p.max,A),ve=D(Me);te(F,le,ve),te(F,j,ve)}if(!p.spanGaps){let F=[];F.push(...ri(v,h,u,c,$,Q,i)),G.gaps=F=p.gaps(n,a,u,c,F),G.clip=ns(F,k.ori,T,Y,Z,ee)}return H!=0&&(G.band=H==2?[Tl(n,a,u,c,K,-1),Tl(n,a,u,c,K,1)]:Tl(n,a,u,c,K,H)),G})}function Ic(e){return Vc(Bc,e)}function Bc(e,l,i,n,a,u){const c=e.length;if(c<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),c==2)n(p,e[1],l[1]);else{let v=Array(c),h=Array(c-1),k=Array(c-1),m=Array(c-1);for(let _=0;_<c-1;_++)k[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=k[_]/m[_];v[0]=h[0];for(let _=1;_<c-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[c-1]=h[c-2];for(let _=0;_<c-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function _a(){for(let e of Us)e.syncRect(!0)}un&&(Hl(bo,sn,_a),Hl(yo,sn,_a,!0),Hl(jn,sn,()=>{xt.pxRatio=Fe}));const Hc=cr(),Wc=rr();function wa(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Ys(u,c,l,i))}function Uc(e,l){return e.map((i,n)=>n==0?{}:mt({},l,i))}function Ys(e,l,i,n){return mt({},l==0?i:n,e)}function ur(e,l,i){return l==null?rn:[l,i]}const Yc=ur;function qc(e,l,i){return l==null?rn:Kn(l,i,Xs,!0)}function fr(e,l,i,n){return l==null?rn:es(l,i,e.scales[n].log,!1)}const jc=fr;function dr(e,l,i,n){return l==null?rn:$s(l,i,e.scales[n].log,!1)}const Kc=dr;function Jc(e,l,i,n,a){let u=Wt(Qi(e),Qi(l)),c=l-e,p=vl(a/n*c,i);do{let v=i[p],h=n*v/c;if(h>=a&&u+(v<5?Rl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function xa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=_t((i=+a)*Fe))+"px"),[e,l,i]}function Zc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ue(l[2]*Fe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function xt(e,l,i){const n={mode:Pe(e.mode,1)},a=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let v=!1;n.status=0;const h=n.root=rl(lo);if(e.id!=null&&(h.id=e.id),$t(h,e.class),e.title){let t=rl(io,h);t.textContent=e.title}const k=pl("canvas"),m=n.ctx=k.getContext("2d"),_=rl(ao,h);Hl("click",_,t=>{t.target===T&&(Ke!=Zl||et!=Ql)&&Nt.click(n,t)},!0);const N=n.under=rl(ro,_);_.appendChild(k);const T=n.over=rl(oo,_);e=on(e);const Y=+Pe(e.pxAlign,1),Z=ga(Y);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const ee=e.ms||.001,y=n.series=a==1?wa(e.series||[],ca,va,!1):Uc(e.series||[null],pa),Q=n.axes=wa(e.axes||[],oa,fa,!0),D=n.scales={},O=n.bands=e.bands||[];O.forEach(t=>{t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1)});const C=a==2?y[1].facets[0].scale:y[0].scale,te={axes:xr,series:hr},$=(e.drawOrder||["axes","series"]).map(t=>te[t]);function j(t){const s=t.distr==3?r=>kl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Cs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,x=g-f;return(o-f)/x}}function le(t){let s=D[t];if(s==null){let r=(e.scales||An)[t]||An;if(r.from!=null){le(r.from);let o=mt({},D[r.from],r,{key:t});o.valToPct=j(o),D[t]=o}else{s=D[t]=mt({},t==C?er:Pc,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=C||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ls(f))){let x=f;f=(M,P,I)=>P==null?rn:Kn(P,I,x)}s.range=Te(f||(o?Yc:t==C?s.distr==3?jc:s.distr==4?Kc:ur:s.distr==3?fr:s.distr==4?dr:qc)),s.auto=Te(g?!1:s.auto),s.clamp=Te(s.clamp||Cc),s._min=s._max=null,s.valToPct=j(s)}}}le("x"),le("y"),a==1&&y.forEach(t=>{le(t.scale)}),Q.forEach(t=>{le(t.scale)});for(let t in e.scales)le(t);const w=D[C],V=w.distr;let G,K;w.ori==0?($t(h,no),G=u,K=c):($t(h,so),G=c,K=u);const A={};for(let t in D){let s=D[t];(s.min!=null||s.max!=null)&&(A[t]={min:s.min,max:s.max},s.min=s.max=null)}const H=e.tzDate||(t=>new Date(_t(t/ee))),F=e.fmtDate||li,Me=ee==1?sc(H):rc(H),ve=ia(H,sa(ee==1?nc:ac,F)),re=ra(H,aa(cc,F)),he=[],ne=n.legend=mt({},dc,e.legend),q=n.cursor=mt({},_c,{drag:{y:a==2}},e.cursor),Ee=ne.show,Ye=q.show,xe=ne.markers;ne.idxs=he,xe.width=Te(xe.width),xe.dash=Te(xe.dash),xe.stroke=Te(xe.stroke),xe.fill=Te(xe.fill);let me,ct,Ge,be=[],ut=[],vt,$e=!1,tt={};if(ne.live){const t=y[1]?y[1].values:null;$e=t!=null,vt=$e?t(n,1,0):{_:0};for(let s in vt)tt[s]=Zs}if(Ee)if(me=pl("table",ho,h),Ge=pl("tbody",null,me),ne.mount(n,me),$e){ct=pl("thead",null,me,Ge);let t=pl("tr",null,ct);pl("th",null,t);for(var yt in vt)pl("th",Oi,t).textContent=yt}else $t(me,mo),ne.live&&$t(me,go);const _e={show:!0},lt={show:!1};function nt(t,s){if(s==0&&($e||!ne.live||a==2))return rn;let r=[],o=pl("tr",_o,Ge,Ge.childNodes[s]);$t(o,t.class),t.show||$t(o,Il);let f=pl("th",null,o);if(xe.show){let M=rl(wo,f);if(s>0){let P=xe.width(n,s);P&&(M.style.border=P+"px "+xe.dash(n,s)+" "+xe.stroke(n,s)),M.style.background=xe.fill(n,s)}}let g=rl(Oi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(xe.show||(g.style.color=t.width>0?xe.stroke(n,s):xe.fill(n,s)),Be("click",f,M=>{if(q._lock)return;Ft(M);let P=y.indexOf(t);if((M.ctrlKey||M.metaKey)!=ne.isolate){let I=y.some((U,J)=>J>0&&J!=P&&U.show);y.forEach((U,J)=>{J>0&&gl(J,I?J==P?_e:lt:_e,!0,gt.setSeries)})}else gl(P,{show:!t.show},!0,gt.setSeries)},!1),Ae&&Be(Vi,f,M=>{q._lock||(Ft(M),gl(y.indexOf(t),Xl,!0,gt.setSeries))},!1));for(var x in vt){let M=pl("td",xo,o);M.textContent="--",r.push(M)}return[o,r]}const St=new Map;function Be(t,s,r,o=!0){const f=St.get(s)||{},g=q.bind[t](n,s,r,o);g&&(Hl(t,s,f[t]=g),St.set(s,f))}function Ct(t,s,r){const o=St.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&St.delete(s)}let Pt=0,kt=0,ue=0,z=0,ke=0,He=0,qt=ke,Ut=He,Rt=ue,Gt=z,ft=0,ht=0,R=0,W=0;n.bbox={};let se=!1,oe=!1,ae=!1,de=!1,S=!1,b=!1;function X(t,s,r){(r||t!=n.width||s!=n.height)&&ce(t,s),ql(!1),ae=!0,oe=!0,jl()}function ce(t,s){n.width=Pt=ue=t,n.height=kt=z=s,ke=He=0,tl(),ll();let r=n.bbox;ft=r.left=zl(ke*Fe,.5),ht=r.top=zl(He*Fe,.5),R=r.width=zl(ue*Fe,.5),W=r.height=zl(z*Fe,.5)}const Oe=3;function je(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==Oe||r&&o,t||(ce(n.width,n.height),oe=!0)}}function zt({width:t,height:s}){X(t,s)}n.setSize=zt;function tl(){let t=!1,s=!1,r=!1,o=!1;Q.forEach((f,g)=>{if(f.show&&f._show){let{side:x,_size:M}=f,P=x%2,I=f.label!=null?f.labelSize:0,U=M+I;U>0&&(P?(ue-=U,x==3?(ke+=U,o=!0):r=!0):(z-=U,x==0?(He+=U,t=!0):s=!0))}}),Vt[0]=t,Vt[1]=r,Vt[2]=s,Vt[3]=o,ue-=it[1]+it[3],ke+=it[3],z-=it[2]+it[0],He+=it[0]}function ll(){let t=ke+ue,s=He+z,r=ke,o=He;function f(g,x){switch(g){case 1:return t+=x,t-x;case 2:return s+=x,s-x;case 3:return r-=x,r+x;case 0:return o-=x,o+x}}Q.forEach((g,x)=>{if(g.show&&g._show){let M=g.side;g._pos=f(M,g._size),g.label!=null&&(g._lpos=f(M,g.labelSize))}})}if(q.dataIdx==null){let t=q.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Te(t.prox),o=t.bias??=0;q.dataIdx=(f,g,x,M)=>{if(g==0)return x;let P=x,I=r(f,g,x,M)??We,U=I>=0&&I<We,J=w.ori==0?ue:z,pe=q.left,Re=l[0],Ce=l[g];if(s.has(Ce[x])){P=null;let Se=null,fe=null,ie;if(o==0||o==-1)for(ie=x;Se==null&&ie-- >0;)s.has(Ce[ie])||(Se=ie);if(o==0||o==1)for(ie=x;fe==null&&ie++<Ce.length;)s.has(Ce[ie])||(fe=ie);if(Se!=null||fe!=null)if(U){let Ze=Se==null?-1/0:G(Re[Se],w,J,0),at=fe==null?1/0:G(Re[fe],w,J,0),Lt=pe-Ze,Ie=at-pe;Lt<=Ie?Lt<=I&&(P=Se):Ie<=I&&(P=fe)}else P=fe==null?Se:Se==null?fe:x-Se<=fe-x?Se:fe}else U&&wt(pe-G(Re[x],w,J,0))>I&&(P=null);return P}}const Ft=t=>{q.event=t};q.idxs=he,q._lock=!1;let Xe=q.points;Xe.show=Te(Xe.show),Xe.size=Te(Xe.size),Xe.stroke=Te(Xe.stroke),Xe.width=Te(Xe.width),Xe.fill=Te(Xe.fill);const st=n.focus=mt({},e.focus||{alpha:.3},q.focus),Ae=st.prox>=0,Ve=Ae&&Xe.one;let Le=[],Ot=[],nl=[];function Ml(t,s){let r=Xe.show(n,s);if(r instanceof HTMLElement)return $t(r,vo),$t(r,t.class),xl(r,-10,-10,ue,z),T.insertBefore(r,Le[s]),r}function jt(t,s){if(a==1||s>0){let r=a==1&&D[t.scale].time,o=t.value;t.value=r?ea(o)?ra(H,aa(o,F)):o||re:o||Ac,t.label=t.label||(r?xc:wc)}if(Ve||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hc||Po,t.fillTo=Te(t.fillTo||Rc),t.pxAlign=+Pe(t.pxAlign,Y),t.pxRound=ga(t.pxAlign),t.stroke=Te(t.stroke||null),t.fill=Te(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Dc(Wt(1,t.width),1),o=t.points=mt({},{size:r,width:Wt(1,r*.2),stroke:t.stroke,space:r*2,paths:Wc,_stroke:null,_fill:null},t.points);o.show=Te(o.show),o.filter=Te(o.filter),o.fill=Te(o.fill),o.stroke=Te(o.stroke),o.paths=Te(o.paths),o.pxAlign=t.pxAlign}if(Ee){let r=nt(t,s);be.splice(s,0,r[0]),ut.splice(s,0,r[1]),ne.values.push(null)}if(Ye){he.splice(s,0,null);let r=null;Ve?s==0&&(r=Ml(t,s)):s>0&&(r=Ml(t,s)),Le.splice(s,0,r),Ot.splice(s,0,0),nl.splice(s,0,0)}Dt("addSeries",s)}function sl(t,s){s=s??y.length,t=a==1?Ys(t,s,ca,va):Ys(t,s,{},pa),y.splice(s,0,t),jt(y[s],s)}n.addSeries=sl;function Kt(t){if(y.splice(t,1),Ee){ne.values.splice(t,1),ut.splice(t,1);let s=be.splice(t,1)[0];Ct(null,s.firstChild),s.remove()}Ye&&(he.splice(t,1),Le.splice(t,1)[0].remove(),Ot.splice(t,1),nl.splice(t,1)),Dt("delSeries",t)}n.delSeries=Kt;const Vt=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=D[t.scale];o==null&&(t.scale=r?y[1].scale:C,o=D[t.scale]);let f=o.time;t.size=Te(t.size),t.space=Te(t.space),t.rotate=Te(t.rotate),Pl(t.incrs)&&t.incrs.forEach(x=>{!Rl.has(x)&&Rl.set(x,Oa(x))}),t.incrs=Te(t.incrs||(o.distr==2?ec:f?ee==1?lc:ic:Vl)),t.splits=Te(t.splits||(f&&o.distr==1?Me:o.distr==3?Bs:o.distr==4?Sc:yc)),t.stroke=Te(t.stroke),t.grid.stroke=Te(t.grid.stroke),t.ticks.stroke=Te(t.ticks.stroke),t.border.stroke=Te(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Te(g):f?Pl(g)?ia(H,sa(g,F)):ea(g)?oc(H,g):g||ve:g||bc,t.filter=Te(t.filter||(o.distr>=3&&o.log==10?Mc:o.distr==3&&o.log==2?Ec:Ra)),t.font=xa(t.font),t.labelFont=xa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Vt[s]=!0,t._el=rl(co,_))}}function cl(t,s,r,o){let[f,g,x,M]=r,P=s%2,I=0;return P==0&&(M||g)&&(I=s==0&&!f||s==2&&!x?_t(oa.size/3):0),P==1&&(f||x)&&(I=s==1&&!g||s==3&&!M?_t(fa.size/2):0),I}const El=n.padding=(e.padding||[cl,cl,cl,cl]).map(t=>Te(Pe(t,cl))),it=n._padding=El.map((t,s)=>t(n,s,Vt,0));let dt,Tt=null,Mt=null;const Rn=a==1?y[0].idxs:null;let ul=null,pn=!1;function ci(t,s){if(l=t??[],n.data=n._data=l,a==2){dt=0;for(let r=1;r<y.length;r++)dt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),ul=l[0],dt=ul.length;let r=l;if(V==2){r=l.slice();let o=r[0]=Array(dt);for(let f=0;f<dt;f++)o[f]=f}n._data=l=r}if(ql(!0),Dt("setData"),V==2&&(ae=!0),s!==!1){let r=w;r.auto(n,pn)?rs():Dl(C,r.min,r.max),de=de||q.left>=0,b=!0,jl()}}n.setData=ci;function rs(){pn=!0;let t,s;a==1&&(dt>0?(Tt=Rn[0]=0,Mt=Rn[1]=dt-1,t=l[0][Tt],s=l[0][Mt],V==2?(t=Tt,s=Mt):t==s&&(V==3?[t,s]=es(t,t,w.log,!1):V==4?[t,s]=$s(t,t,w.log,!1):w.time?s=t+_t(86400/ee):[t,s]=Kn(t,s,Xs,!0))):(Tt=Rn[0]=t=null,Mt=Rn[1]=s=null)),Dl(C,t,s)}let Fn,Yl,os,cs,us,fs,ds,ps,vs,Yt;function ui(t,s,r,o,f,g){t??=Gi,r??=ti,o??="butt",f??=Gi,g??="round",t!=Fn&&(m.strokeStyle=Fn=t),f!=Yl&&(m.fillStyle=Yl=f),s!=os&&(m.lineWidth=os=s),g!=us&&(m.lineJoin=us=g),o!=fs&&(m.lineCap=fs=o),r!=cs&&m.setLineDash(cs=r)}function fi(t,s,r,o){s!=Yl&&(m.fillStyle=Yl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,pn)&&(s==null||s.min==null)){let g=Pe(Tt,0),x=Pe(Mt,o.length-1),M=r.min==null?Mo(o,g,x,f,t.distr==3):[r.min,r.max];t.min=hl(t.min,r.min=M[0]),t.max=Wt(t.max,r.max=M[1])}}const di={min:null,max:null};function pr(){for(let o in D){let f=D[o];A[o]==null&&(f.min==null||A[C]!=null&&f.auto(n,pn))&&(A[o]=di)}for(let o in D){let f=D[o];A[o]==null&&f.from!=null&&A[f.from]!=null&&(A[o]=di)}A[C]!=null&&ql(!0);let t={};for(let o in A){let f=A[o];if(f!=null){let g=t[o]=on(D[o],Oo);if(f.min!=null)mt(g,f);else if(o!=C||a==2)if(dt==0&&g.from==null){let x=g.range(n,null,null,o);g.min=x[0],g.max=x[1]}else g.min=We,g.max=-We}}if(dt>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,x=A[g];if(x==null)return;let M=t[g];if(f==0){let P=M.range(n,M.min,M.max,g);M.min=P[0],M.max=P[1],Tt=vl(M.min,l[0]),Mt=vl(M.max,l[0]),Mt-Tt>1&&(l[0][Tt]<M.min&&Tt++,l[0][Mt]>M.max&&Mt--),o.min=ul[Tt],o.max=ul[Mt]}else o.show&&o.auto&&hs(M,x,o,l[f],o.sorted);o.idxs[0]=Tt,o.idxs[1]=Mt}else if(f>0&&o.show&&o.auto){let[g,x]=o.facets,M=g.scale,P=x.scale,[I,U]=l[f],J=t[M],pe=t[P];J!=null&&hs(J,A[M],g,I,g.sorted),pe!=null&&hs(pe,A[P],x,U,x.sorted),o.min=x.min,o.max=x.max}});for(let o in t){let f=t[o],g=A[o];if(f.from==null&&(g==null||g.min==null)){let x=f.range(n,f.min==We?null:f.min,f.max==-We?null:f.max,o);f.min=x[0],f.max=x[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let x=f.range(n,g.min,g.max,o);f.min=x[0],f.max=x[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=D[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let x=g.distr;g._min=x==3?kl(g.min):x==4?Cs(g.min,g.asinh):x==100?g.fwd(g.min):g.min,g._max=x==3?kl(g.max):x==4?Cs(g.max,g.asinh):x==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)ae=!0,Dt("setScale",o);Ye&&q.left>=0&&(de=b=!0)}for(let o in A)A[o]=null}function vr(t){let s=Is(Tt-1,0,dt-1),r=Is(Mt+1,0,dt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<dt-1;)r++;return[s,r]}function hr(){if(dt>0){let t=y.some(s=>s._focus)&&Yt!=st.alpha;t&&(m.globalAlpha=Yt=st.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(pi(r,!1),pi(r,!0),s._paths==null)){let o=Yt;Yt!=s.alpha&&(m.globalAlpha=Yt=s.alpha);let f=a==2?[0,l[r][0].length-1]:vr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Yt!=o&&(m.globalAlpha=Yt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Yt;Yt!=s.alpha&&(m.globalAlpha=Yt=s.alpha),s._paths!=null&&vi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Tt,Mt,f),x=s.points.filter(n,r,g,f);(g||x)&&(s.points._paths=s.points.paths(n,r,Tt,Mt,x),vi(r,!0))}Yt!=o&&(m.globalAlpha=Yt=o),Dt("drawSeries",r)}}),t&&(m.globalAlpha=Yt=1)}}function pi(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function vi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:x,_stroke:M=r._stroke,_fill:P=r._fill,_width:I=r.width}=r._paths;I=Ue(I*Fe,3);let U=null,J=I%2/2;s&&P==null&&(P=I>0?"#fff":M);let pe=r.pxAlign==1&&J>0;if(pe&&m.translate(J,J),!s){let Re=ft-I/2,Ce=ht-I/2,Se=R+I,fe=W+I;U=new Path2D,U.rect(Re,Ce,Se,fe)}s?gs(M,I,r.dash,r.cap,P,o,f,x,g):gr(t,M,I,r.dash,r.cap,P,o,f,x,U,g),pe&&m.translate(-J,-J)}function gr(t,s,r,o,f,g,x,M,P,I,U){let J=!1;P!=0&&O.forEach((pe,Re)=>{if(pe.series[0]==t){let Ce=y[pe.series[1]],Se=l[pe.series[1]],fe=(Ce._paths||An).band;Pl(fe)&&(fe=pe.dir==1?fe[0]:fe[1]);let ie,Ze=null;Ce.show&&fe&&Ao(Se,Tt,Mt)?(Ze=pe.fill(n,Re)||g,ie=Ce._paths.clip):fe=null,gs(s,r,o,f,Ze,x,M,P,I,U,ie,fe),J=!0}}),J||gs(s,r,o,f,g,x,M,P,I,U)}const hi=cn|Ws;function gs(t,s,r,o,f,g,x,M,P,I,U,J){ui(t,s,r,o,f),(P||I||J)&&(m.save(),P&&m.clip(P),I&&m.clip(I)),J?(M&hi)==hi?(m.clip(J),U&&m.clip(U),Nn(f,x),On(t,g,s)):M&Ws?(Nn(f,x),m.clip(J),On(t,g,s)):M&cn&&(m.save(),m.clip(J),U&&m.clip(U),Nn(f,x),m.restore(),On(t,g,s)):(Nn(f,x),On(t,g,s)),(P||I||J)&&m.restore()}function On(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Fn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Nn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Yl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=Q[t],g;if(o<=0)g=[0,0];else{let x=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,x);g=Jc(s,r,M,o,x)}return f._found=g}function ms(t,s,r,o,f,g,x,M,P,I){let U=x%2/2;Y==1&&m.translate(U,U),ui(M,x,P,I,M),m.beginPath();let J,pe,Re,Ce,Se=f+(o==0||o==3?-g:g);r==0?(pe=f,Ce=Se):(J=f,Re=Se);for(let fe=0;fe<t.length;fe++)s[fe]!=null&&(r==0?J=Re=t[fe]:pe=Ce=t[fe],m.moveTo(J,pe),m.lineTo(Re,Ce));m.stroke(),Y==1&&m.translate(-U,-U)}function _r(t){let s=!0;return Q.forEach((r,o)=>{if(!r.show)return;let f=D[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,ql(!1));return}else r._show||(s=!1,r._show=!0,ql(!1));let g=r.side,x=g%2,{min:M,max:P}=f,[I,U]=mr(o,M,P,x==0?ue:z);if(U==0)return;let J=f.distr==2,pe=r._splits=r.splits(n,o,M,P,I,U,J),Re=f.distr==2?pe.map(ie=>ul[ie]):pe,Ce=f.distr==2?ul[pe[1]]-ul[pe[0]]:I,Se=r._values=r.values(n,r.filter(n,Re,o,U,Ce),o,U,Ce);r._rotate=g==2?r.rotate(n,Se,o,U):0;let fe=r._size;r._size=ol(r.size(n,Se,o,t)),fe!=null&&r._size!=fe&&(s=!1)}),s}function wr(t){let s=!0;return El.forEach((r,o)=>{let f=r(n,o,Vt,t);f!=it[o]&&(s=!1),it[o]=f}),s}function xr(){for(let t=0;t<Q.length;t++){let s=Q[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,x=s.stroke(n,t),M=r==0||r==3?-1:1,[P,I]=s._found;if(s.label!=null){let Bt=s.labelGap*M,Qt=_t((s._lpos+Bt)*Fe);fi(s.labelFont[0],x,"center",r==2?xn:Ni),m.save(),o==1?(f=g=0,m.translate(Qt,_t(ht+W/2)),m.rotate((r==3?-Un:Un)/2)):(f=_t(ft+R/2),g=Qt);let Gl=Ca(s.label)?s.label(n,t,P,I):s.label;m.fillText(Gl,f,g),m.restore()}if(I==0)continue;let U=D[s.scale],J=o==0?R:W,pe=o==0?ft:ht,Re=s._splits,Ce=U.distr==2?Re.map(Bt=>ul[Bt]):Re,Se=U.distr==2?ul[Re[1]]-ul[Re[0]]:P,fe=s.ticks,ie=s.border,Ze=fe.show?fe.size:0,at=_t(Ze*Fe),Lt=_t((s.alignTo==2?s._size-Ze-s.gap:s.gap)*Fe),Ie=s._rotate*-Un/180,rt=Z(s._pos*Fe),Jt=(at+Lt)*M,It=rt+Jt;g=o==0?It:0,f=o==1?It:0;let il=s.font[0],fl=s.align==1?tn:s.align==2?As:Ie>0?tn:Ie<0?As:o==0?"center":r==3?As:tn,_l=Ie||o==1?"middle":r==2?xn:Ni;fi(il,x,fl,_l);let Zt=s.font[1]*s.lineGap,al=Re.map(Bt=>Z(p(Bt,U,J,pe))),dl=s._values;for(let Bt=0;Bt<dl.length;Bt++){let Qt=dl[Bt];if(Qt!=null){o==0?f=al[Bt]:g=al[Bt],Qt=""+Qt;let Gl=Qt.indexOf(`
`)==-1?[Qt]:Qt.split(/\n/gm);for(let Ht=0;Ht<Gl.length;Ht++){let Fi=Gl[Ht];Ie?(m.save(),m.translate(f,g+Ht*Zt),m.rotate(Ie),m.fillText(Fi,0,0),m.restore()):m.fillText(Fi,f,g+Ht*Zt)}}}fe.show&&ms(al,fe.filter(n,Ce,t,I,Se),o,r,rt,at,Ue(fe.width*Fe,3),fe.stroke(n,t),fe.dash,fe.cap);let wl=s.grid;wl.show&&ms(al,wl.filter(n,Ce,t,I,Se),o,o==0?2:1,o==0?ht:ft,o==0?W:R,Ue(wl.width*Fe,3),wl.stroke(n,t),wl.dash,wl.cap),ie.show&&ms([rt],[1],o==0?1:0,o==0?1:2,o==1?ht:ft,o==1?W:R,Ue(ie.width*Fe,3),ie.stroke(n,t),ie.dash,ie.cap)}Dt("drawAxes")}function ql(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Gn=!1,_s=!1,vn=[];function br(){_s=!1;for(let t=0;t<vn.length;t++)Dt(...vn[t]);vn.length=0}function jl(){Gn||(Ho(gi),Gn=!0)}function yr(t,s=!1){Gn=!0,_s=s,t(n),gi(),s&&vn.length>0&&queueMicrotask(br)}n.batch=yr;function gi(){if(se&&(pr(),se=!1),ae&&(je(),ae=!1),oe){if(Qe(N,tn,ke),Qe(N,xn,He),Qe(N,Sn,ue),Qe(N,kn,z),Qe(T,tn,ke),Qe(T,xn,He),Qe(T,Sn,ue),Qe(T,kn,z),Qe(_,Sn,Pt),Qe(_,kn,kt),k.width=_t(Pt*Fe),k.height=_t(kt*Fe),Q.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,x=f%2==1;Qe(t,x?"left":"top",o-g),Qe(t,x?"width":"height",r),Qe(t,x?"top":"left",x?He:ke),Qe(t,x?"height":"width",x?z:ue),zs(t,Il)}else $t(t,Il)}),Fn=Yl=os=us=fs=ds=ps=vs=cs=null,Yt=1,mn(!0),ke!=qt||He!=Ut||ue!=Rt||z!=Gt){ql(!1);let t=ue/Rt,s=z/Gt;if(Ye&&!de&&q.left>=0){q.left*=t,q.top*=s,Kl&&xl(Kl,_t(q.left),0,ue,z),Jl&&xl(Jl,0,_t(q.top),ue,z);for(let r=0;r<Le.length;r++){let o=Le[r];o!=null&&(Ot[r]*=t,nl[r]*=s,xl(o,ol(Ot[r]),ol(nl[r]),ue,z))}}if(Je.show&&!S&&Je.left>=0&&Je.width>0){Je.left*=t,Je.width*=t,Je.top*=s,Je.height*=s;for(let r in ks)Qe($l,r,Je[r])}qt=ke,Ut=He,Rt=ue,Gt=z}Dt("setSize"),oe=!1}Pt>0&&kt>0&&(m.clearRect(0,0,k.width,k.height),Dt("drawClear"),$.forEach(t=>t()),Dt("draw")),Je.show&&S&&(zn(Je),S=!1),Ye&&de&&(Nl(null,!0,!1),de=!1),ne.show&&ne.live&&b&&(ys(),b=!1),v||(v=!0,n.status=1,Dt("ready")),pn=!1,Gn=!1}n.redraw=(t,s)=>{ae=s||!1,t!==!1?Dl(C,w.min,w.max):jl()};function ws(t,s){let r=D[t];if(r.from==null){if(dt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(dt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==C&&r.distr==2&&dt>0&&(s.min=vl(s.min,l[0]),s.max=vl(s.max,l[0]),s.min==s.max&&s.max++),A[t]=s,se=!0,jl()}}n.setScale=ws;let xs,bs,Kl,Jl,mi,_i,Zl,Ql,wi,xi,Ke,et,Al=!1;const Nt=q.drag;let Et=Nt.x,At=Nt.y;Ye&&(q.x&&(xs=rl(fo,T)),q.y&&(bs=rl(po,T)),w.ori==0?(Kl=xs,Jl=bs):(Kl=bs,Jl=xs),Ke=q.left,et=q.top);const Je=n.select=mt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),$l=Je.show?rl(uo,Je.over?T:N):null;function zn(t,s){if(Je.show){for(let r in t)Je[r]=t[r],r in ks&&Qe($l,r,t[r]);s!==!1&&Dt("setSelect")}}n.setSelect=zn;function Sr(t){if(y[t].show)Ee&&zs(be[t],Il);else if(Ee&&$t(be[t],Il),Ye){let r=Ve?Le[0]:Le[t];r!=null&&xl(r,-10,-10,ue,z)}}function Dl(t,s,r){ws(t,{min:s,max:r})}function gl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,Sr(g),a==2?(Dl(f.facets[0].scale,null,null),Dl(f.facets[1].scale,null,null)):Dl(f.scale,null,null),jl())}),r!==!1&&Dt("setSeries",t,s),o&&_n("setSeries",n,t,s)}n.setSeries=gl;function kr(t,s){mt(O[t],s)}function Tr(t,s){t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1),s=s??O.length,O.splice(s,0,t)}function Mr(t){t==null?O.length=0:O.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Mr;function Er(t,s){y[t].alpha=s,Ye&&Le[t]!=null&&(Le[t].style.opacity=s),Ee&&be[t]&&(be[t].style.opacity=s)}let yl,Ll,Ol;const Xl={focus:!0};function Ar(t){if(t!=Ol){let s=t==null,r=st.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:st.alpha)}}),Ol=t,r&&jl()}}Ee&&Ae&&Be(Ii,me,t=>{q._lock||(Ft(t),Ol!=null&&gl(null,Xl,!0,gt.setSeries))});function ml(t,s,r){let o=D[s];r&&(t=t/Fe-(o.ori==1?He:ke));let f=ue;o.ori==1&&(f=z,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,x=o._max,M=t/f,P=g+(x-g)*M,I=o.distr;return I==3?an(10,P):I==4?Lo(P,o.asinh):I==100?o.bwd(P):P}function Dr(t,s){let r=ml(t,C,s);return vl(r,l[0],Tt,Mt)}n.valToIdx=t=>vl(t,l[0]),n.posToIdx=Dr,n.posToVal=ml,n.valToPos=(t,s,r)=>D[s].ori==0?u(t,D[s],r?R:ue,r?ft:0):c(t,D[s],r?W:z,r?ht:0),n.setCursor=(t,s,r)=>{Ke=t.left,et=t.top,Nl(null,s,r)};function bi(t,s){Qe($l,tn,Je.left=t),Qe($l,Sn,Je.width=s)}function yi(t,s){Qe($l,xn,Je.top=t),Qe($l,kn,Je.height=s)}let hn=w.ori==0?bi:yi,gn=w.ori==1?bi:yi;function Lr(){if(Ee&&ne.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&$e)continue;let s=ne.values[t],r=0;for(let o in s)ut[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{he[o]=r}):Fo(t.idx)||he.fill(t.idx),ne.idx=he[0]),Ee&&ne.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!$e)&&Cr(r,he[r]);Lr()}b=!1,s!==!1&&Dt("setLegend")}n.setLegend=ys;function Cr(t,s){let r=y[t],o=t==0&&V==2?ul:l[t],f;$e?f=r.values(n,t,s)??tt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?tt:{_:f}),ne.values[t]=f}function Nl(t,s,r){wi=Ke,xi=et,[Ke,et]=q.move(n,Ke,et),q.left=Ke,q.top=et,Ye&&(Kl&&xl(Kl,_t(Ke),0,ue,z),Jl&&xl(Jl,0,_t(et),ue,z));let o,f=Tt>Mt;yl=We,Ll=null;let g=w.ori==0?ue:z,x=w.ori==1?ue:z;if(Ke<0||dt==0||f){o=q.idx=null;for(let M=0;M<y.length;M++){let P=Le[M];P!=null&&xl(P,-10,-10,ue,z)}Ae&&gl(null,Xl,!0,t==null&&gt.setSeries),ne.live&&(he.fill(o),b=!0)}else{let M,P,I;a==1&&(M=w.ori==0?Ke:et,P=ml(M,C),o=q.idx=vl(P,l[0],Tt,Mt),I=G(l[0][o],w,g,0));let U=-10,J=-10,pe=0,Re=0,Ce=!0,Se="",fe="";for(let ie=a==2?1:0;ie<y.length;ie++){let Ze=y[ie],at=he[ie],Lt=at==null?null:a==1?l[ie][at]:l[ie][1][at],Ie=q.dataIdx(n,ie,o,P),rt=Ie==null?null:a==1?l[ie][Ie]:l[ie][1][Ie];if(b=b||rt!=Lt||Ie!=at,he[ie]=Ie,ie>0&&Ze.show){let Jt=Ie==null?-10:Ie==o?I:G(a==1?l[0][Ie]:l[ie][0][Ie],w,g,0),It=rt==null?-10:K(rt,a==1?D[Ze.scale]:D[Ze.facets[1].scale],x,0);if(Ae&&rt!=null){let il=w.ori==1?Ke:et,fl=wt(st.dist(n,ie,Ie,It,il));if(fl<yl){let _l=st.bias;if(_l!=0){let Zt=ml(il,Ze.scale),al=rt>=0?1:-1,dl=Zt>=0?1:-1;dl==al&&(dl==1?_l==1?rt>=Zt:rt<=Zt:_l==1?rt<=Zt:rt>=Zt)&&(yl=fl,Ll=ie)}else yl=fl,Ll=ie}}if(b||Ve){let il,fl;w.ori==0?(il=Jt,fl=It):(il=It,fl=Jt);let _l,Zt,al,dl,wl,Bt,Qt=!0,Gl=Xe.bbox;if(Gl!=null){Qt=!1;let Ht=Gl(n,ie);al=Ht.left,dl=Ht.top,_l=Ht.width,Zt=Ht.height}else al=il,dl=fl,_l=Zt=Xe.size(n,ie);if(Bt=Xe.fill(n,ie),wl=Xe.stroke(n,ie),Ve)ie==Ll&&yl<=st.prox&&(U=al,J=dl,pe=_l,Re=Zt,Ce=Qt,Se=Bt,fe=wl);else{let Ht=Le[ie];Ht!=null&&(Ot[ie]=al,nl[ie]=dl,ji(Ht,_l,Zt,Qt),Yi(Ht,Bt,wl),xl(Ht,ol(al),ol(dl),ue,z))}}}}if(Ve){let ie=st.prox,Ze=Ol==null?yl<=ie:yl>ie||Ll!=Ol;if(b||Ze){let at=Le[0];at!=null&&(Ot[0]=U,nl[0]=J,ji(at,pe,Re,Ce),Yi(at,Se,fe),xl(at,ol(U),ol(J),ue,z))}}}if(Je.show&&Al)if(t!=null){let[M,P]=gt.scales,[I,U]=gt.match,[J,pe]=t.cursor.sync.scales,Re=t.cursor.drag;if(Et=Re._x,At=Re._y,Et||At){let{left:Ce,top:Se,width:fe,height:ie}=t.select,Ze=t.scales[J].ori,at=t.posToVal,Lt,Ie,rt,Jt,It,il=M!=null&&I(M,J),fl=P!=null&&U(P,pe);il&&Et?(Ze==0?(Lt=Ce,Ie=fe):(Lt=Se,Ie=ie),rt=D[M],Jt=G(at(Lt,J),rt,g,0),It=G(at(Lt+Ie,J),rt,g,0),hn(hl(Jt,It),wt(It-Jt))):hn(0,g),fl&&At?(Ze==1?(Lt=Ce,Ie=fe):(Lt=Se,Ie=ie),rt=D[P],Jt=K(at(Lt,pe),rt,x,0),It=K(at(Lt+Ie,pe),rt,x,0),gn(hl(Jt,It),wt(It-Jt))):gn(0,x)}else Ts()}else{let M=wt(wi-mi),P=wt(xi-_i);if(w.ori==1){let pe=M;M=P,P=pe}Et=Nt.x&&M>=Nt.dist,At=Nt.y&&P>=Nt.dist;let I=Nt.uni;I!=null?Et&&At&&(Et=M>=I,At=P>=I,!Et&&!At&&(P>M?At=!0:Et=!0)):Nt.x&&Nt.y&&(Et||At)&&(Et=At=!0);let U,J;Et&&(w.ori==0?(U=Zl,J=Ke):(U=Ql,J=et),hn(hl(U,J),wt(J-U)),At||gn(0,x)),At&&(w.ori==1?(U=Zl,J=Ke):(U=Ql,J=et),gn(hl(U,J),wt(J-U)),Et||hn(0,g)),!Et&&!At&&(hn(0,0),gn(0,0))}if(Nt._x=Et,Nt._y=At,t==null){if(r){if(Ri!=null){let[M,P]=gt.scales;gt.values[0]=M!=null?ml(w.ori==0?Ke:et,M):null,gt.values[1]=P!=null?ml(w.ori==1?Ke:et,P):null}_n(Ds,n,Ke,et,ue,z,o)}if(Ae){let M=r&&gt.setSeries,P=st.prox;Ol==null?yl<=P&&gl(Ll,Xl,!0,M):yl>P?gl(null,Xl,!0,M):Ll!=Ol&&gl(Ll,Xl,!0,M)}}b&&(ne.idx=o,ys()),s!==!1&&Dt("setCursor")}let Cl=null;Object.defineProperty(n,"rect",{get(){return Cl==null&&mn(!1),Cl}});function mn(t=!1){t?Cl=null:(Cl=T.getBoundingClientRect(),Dt("syncRect",Cl))}function Si(t,s,r,o,f,g,x){q._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,x,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function Ss(t,s,r,o,f,g,x,M,P){if(Cl==null&&mn(!1),Ft(t),t!=null)r=t.clientX-Cl.left,o=t.clientY-Cl.top;else{if(r<0||o<0){Ke=-10,et=-10;return}let[I,U]=gt.scales,J=s.cursor.sync,[pe,Re]=J.values,[Ce,Se]=J.scales,[fe,ie]=gt.match,Ze=s.axes[0].side%2==1,at=w.ori==0?ue:z,Lt=w.ori==1?ue:z,Ie=Ze?g:f,rt=Ze?f:g,Jt=Ze?o:r,It=Ze?r:o;if(Ce!=null?r=fe(I,Ce)?p(pe,D[I],at,0):-10:r=at*(Jt/Ie),Se!=null?o=ie(U,Se)?p(Re,D[U],Lt,0):-10:o=Lt*(It/rt),w.ori==1){let il=r;r=o,o=il}}P&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=ue-1)&&(r=zl(r,ue)),(o<=1||o>=z-1)&&(o=zl(o,z))),M?(mi=r,_i=o,[Zl,Ql]=q.move(n,r,o)):(Ke=r,et=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){zn(ks,!1)}let ki,Ti,Mi,Ei;function Ai(t,s,r,o,f,g,x){Al=!0,Et=At=Nt._x=Nt._y=!1,Ss(t,s,r,o,f,g,x,!0,!1),t!=null&&(Be(Ls,Ns,Di,!1),_n(zi,n,Zl,Ql,ue,z,null));let{left:M,top:P,width:I,height:U}=Je;ki=M,Ti=P,Mi=I,Ei=U}function Di(t,s,r,o,f,g,x){Al=Nt._x=Nt._y=!1,Ss(t,s,r,o,f,g,x,!1,!0);let{left:M,top:P,width:I,height:U}=Je,J=I>0||U>0,pe=ki!=M||Ti!=P||Mi!=I||Ei!=U;if(J&&pe&&zn(Je),Nt.setScale&&J&&pe){let Re=M,Ce=I,Se=P,fe=U;if(w.ori==1&&(Re=P,Ce=U,Se=M,fe=I),Et&&Dl(C,ml(Re,C),ml(Re+Ce,C)),At)for(let ie in D){let Ze=D[ie];ie!=C&&Ze.from==null&&Ze.min!=We&&Dl(ie,ml(Se+fe,ie),ml(Se,ie))}Ts()}else q.lock&&(q._lock=!q._lock,Nl(s,!0,t!=null));t!=null&&(Ct(Ls,Ns),_n(Ls,n,Ke,et,ue,z,null))}function Pr(t,s,r,o,f,g,x){if(q._lock)return;Ft(t);let M=Al;if(Al){let P=!0,I=!0,U=10,J,pe;w.ori==0?(J=Et,pe=At):(J=At,pe=Et),J&&pe&&(P=Ke<=U||Ke>=ue-U,I=et<=U||et>=z-U),J&&P&&(Ke=Ke<Zl?0:ue),pe&&I&&(et=et<Ql?0:z),Nl(null,!0,!0),Al=!1}Ke=-10,et=-10,he.fill(null),Nl(null,!0,!0),M&&(Al=M)}function Li(t,s,r,o,f,g,x){q._lock||(Ft(t),rs(),Ts(),t!=null&&_n(Bi,n,Ke,et,ue,z,null))}function Ci(){Q.forEach(Zc),X(n.width,n.height,!0)}Hl(jn,sn,Ci);const en={};en.mousedown=Ai,en.mousemove=Si,en.mouseup=Di,en.dblclick=Li,en.setSeries=(t,s,r,o)=>{let f=gt.match[2];r=f(n,s,r),r!=-1&&gl(r,o,!0,!1)},Ye&&(Be(zi,T,Ai),Be(Ds,T,Si),Be(Vi,T,t=>{Ft(t),mn(!1)}),Be(Ii,T,Pr),Be(Bi,T,Li),Us.add(n),n.syncRect=mn);const Vn=n.hooks=e.hooks||{};function Dt(t,s,r){_s?vn.push([t,s,r]):t in Vn&&Vn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Vn[s]=(Vn[s]||[]).concat(t.hooks[s])});const Pi=(t,s,r)=>r,gt=mt({key:null,setSeries:!1,filters:{pub:$i,sub:$i},scales:[C,y[1]?y[1].scale:null],match:[Xi,Xi,Pi],values:[null,null]},q.sync);gt.match.length==2&&gt.match.push(Pi),q.sync=gt;const Ri=gt.key,Ms=tr(Ri);function _n(t,s,r,o,f,g,x){gt.filters.pub(t,s,r,o,f,g,x)&&Ms.pub(t,s,r,o,f,g,x)}Ms.sub(n);function Rr(t,s,r,o,f,g,x){gt.filters.sub(t,s,r,o,f,g,x)&&en[t](null,s,r,o,f,g,x)}n.pub=Rr;function Fr(){Ms.unsub(n),Us.delete(n),St.clear(),Vs(jn,sn,Ci),h.remove(),me?.remove(),Dt("destroy")}n.destroy=Fr;function Es(){Dt("init",e,l),ci(l||e.data,!1),A[C]?ws(C,A[C]):rs(),S=Je.show&&(Je.width>0||Je.height>0),de=b=!0,X(e.width,e.height)}return y.forEach(jt),Q.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(h),Es()):i(n,Es):Es(),n}xt.assign=mt;xt.fmtNum=ei;xt.rangeNum=Kn;xt.rangeLog=es;xt.rangeAsinh=$s;xt.orient=Ul;xt.pxRatio=Fe;xt.join=Bo;xt.fmtDate=li,xt.tzDate=$o;xt.sync=tr;{xt.addGap=Fc,xt.clipGaps=ns;let e=xt.paths={points:rr};e.linear=cr,e.stepped=Gc,e.bars=zc,e.spline=Ic}var Qc=De('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$c=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),Xc=De('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),eu=De('<span class="estimated-badge svelte-3wi8ix">est</span>'),tu=De("<span> </span> <!>",1),lu=De('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),nu=De('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),su=De('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function iu(e,l){Qn(l,!0);const i=.5,n=1.2,a=32,u=212;function c(w,V){const G=[...w].sort((F,Me)=>F-Me),K=V/100*(G.length-1),A=Math.floor(K),H=Math.ceil(K);return A===H?G[A]:G[A]+(G[H]-G[A])*(K-A)}let p=Cn(l,"trend",3,null),v=qe(!1),h=qe(""),k=qe(null),m=ze(()=>Wn.config.temp_units==="C"),_=ze(Ma),N=ze(Ks),T=ze(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(_e=>_e.status!=="invalid");if(w.length===0)return null;const V=[...w].sort((_e,lt)=>new Date(_e.timestamp).getTime()-new Date(lt.timestamp).getTime()),G=V[0],K=V[V.length-1],A=V.map(_e=>_e.sg_calibrated??_e.sg_raw).filter(_e=>_e!==null&&_e>=i&&_e<=n),H=V.map(_e=>_e.temp_calibrated??_e.temp_raw).filter(_e=>_e!==null&&_e>=a&&_e<=u);if(A.length===0)return null;const F=A[A.length-1],Me=A[0],ve=c(A,95),re=c(A,5),he=new Date(G.timestamp).getTime(),ne=new Date(K.timestamp).getTime(),Ee=(ne-he)/(1e3*60*60*24),Ye=Ee>0?(F-Me)/Ee:0;let xe=null,me=null,ct=null,Ge=null;if(H.length>0){const _e=H[H.length-1],lt=H.reduce((Be,Ct)=>Be+Ct,0)/H.length,nt=c(H,95),St=c(H,5);xe=d(m)?yn(_e):_e,me=d(m)?yn(lt):lt,ct=d(m)?yn(nt):nt,Ge=d(m)?yn(St):St}let be=0;const ut=.001;for(let _e=A.length-2;_e>=0;_e--)if(Math.abs(A[_e]-F)>ut){const lt=new Date(V[_e+1].timestamp).getTime();be=(ne-lt)/(1e3*60*60*24);break}let vt=null,$e=null;const tt=l.originalGravity??ve,yt=l.originalGravity===null;return tt>1&&tt>F&&(vt=(tt-F)/(tt-1)*100,$e=(tt-F)*131.25),{currentSg:F,firstSg:Me,highSg:ve,lowSg:re,currentTemp:xe,avgTemp:me,highTemp:ct,lowTemp:Ge,fermRate:Ye,durationDays:Ee,daysAtCurrentSg:be,apparentAttenuation:vt,abv:$e,ogIsEstimated:yt,effectiveOg:tt}});function Y(){ge(h,l.originalGravity?.toFixed(3)??"",!0),ge(v,!0),setTimeout(()=>d(k)?.focus(),0)}function Z(){const w=d(h).trim();if(!w)l.onOgChange(null);else{const V=parseFloat(w);!isNaN(V)&&V>=.99&&V<=1.2&&l.onOgChange(V)}ge(v,!1)}function ee(w){w.key==="Enter"?Z():w.key==="Escape"&&ge(v,!1)}function y(w){return js(w)}function Q(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function D(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function O(w){return w===null?"--":w.toFixed(1)}function C(w){return w===null?"--":`${w.toFixed(1)}%`}var te=Dn(),$=Sl(te);{var j=w=>{var V=nu(),G=L(V),K=L(G),A=L(K),H=L(A,!0);E(A);var F=B(A,2),Me=B(L(F),2),ve=L(Me,!0);E(Me),E(F);var re=B(F,2),he=B(L(re),2),ne=L(he,!0);E(he),E(re);var q=B(re,2),Ee=B(L(q),2),Ye=L(Ee,!0);E(Ee),E(q);var xe=B(q,2),me=B(L(xe),2),ct=L(me,!0);E(me),E(xe),E(K);var Ge=B(K,2),be=B(L(Ge),2),ut=B(L(be),2),vt=L(ut,!0),$e=B(vt),tt=L($e,!0);E($e),E(ut),E(be);var yt=B(be,2),_e=B(L(yt),2),lt=L(_e,!0),nt=B(lt),St=L(nt,!0);E(nt),E(_e),E(yt);var Be=B(yt,2),Ct=B(L(Be),2),Pt=L(Ct,!0),kt=B(Pt),ue=L(kt,!0);E(kt),E(Ct),E(Be);var z=B(Be,2),ke=B(L(z),2),He=L(ke,!0),qt=B(He),Ut=L(qt,!0);E(qt),E(ke),E(z),E(Ge),E(G);var Rt=B(G,2),Gt=L(Rt),ft=B(L(Gt),2);let ht;var R=L(ft);E(ft),E(Gt);var W=B(Gt,2),se=B(L(W),2),oe=L(se,!0);E(se),E(W);var ae=B(W,2),de=B(L(ae),2),S=L(de,!0);E(de),E(ae);var b=B(ae,2),X=B(L(b),2);{var ce=Ve=>{var Le=Qc();ka(Le),Le.__keydown=ee,qs(Le,Ot=>ge(k,Ot),()=>d(k)),ba("blur",Le,Z),Ta(Le,()=>d(h),Ot=>ge(h,Ot)),ye(Ve,Le)},Oe=Ve=>{var Le=Dn(),Ot=Sl(Le);{var nl=jt=>{var sl=Xc();sl.__click=Y;var Kt=L(sl);let Vt;var Fl=L(Kt,!0);E(Kt);var cl=B(Kt,2);{var El=it=>{var dt=$c();ye(it,dt)};ot(cl,it=>{d(T).ogIsEstimated&&it(El)})}Bl(2),E(sl),pt(it=>{nn(sl,"title",d(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Vt=bl(Kt,1,"stat-value svelte-3wi8ix",null,Vt,{estimated:d(T).ogIsEstimated}),we(Fl,it)},[()=>y(d(T).effectiveOg)]),ye(jt,sl)},Ml=jt=>{var sl=tu(),Kt=Sl(sl);let Vt;var Fl=L(Kt,!0);E(Kt);var cl=B(Kt,2);{var El=it=>{var dt=eu();ye(it,dt)};ot(cl,it=>{d(T).ogIsEstimated&&it(El)})}pt(it=>{Vt=bl(Kt,1,"stat-value svelte-3wi8ix",null,Vt,{estimated:d(T).ogIsEstimated}),we(Fl,it)},[()=>y(d(T).effectiveOg)]),ye(jt,sl)};ot(Ot,jt=>{l.onOgChange?jt(nl):jt(Ml,!1)},!0)}ye(Ve,Le)};ot(X,Ve=>{l.onOgChange&&d(v)?Ve(ce):Ve(Oe,!1)})}E(b);var je=B(b,2),zt=B(L(je),2),tl=L(zt,!0);E(zt),E(je);var ll=B(je,2),Ft=B(L(ll),2),Xe=L(Ft,!0);E(Ft),E(ll);var st=B(ll,2);{var Ae=Ve=>{var Le=lu(),Ot=B(L(Le),2),nl=L(Ot,!0);E(Ot),Bl(2),E(Le),pt((Ml,jt)=>{nn(Le,"title",`Estimated time until target FG (R=${Ml??""})`),we(nl,jt)},[()=>p().r2.toFixed(2),()=>D(p().daysToFg)]),ye(Ve,Le)};ot(st,Ve=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Ve(Ae)})}E(Rt),E(V),pt((Ve,Le,Ot,nl,Ml,jt,sl,Kt,Vt,Fl,cl,El,it)=>{we(H,d(N)==="SG"?"Gravity":d(N)==="P"?"Plato":"Brix"),we(ve,Ve),we(ne,Le),we(Ye,Ot),we(ct,nl),we(vt,Ml),we(tt,d(_)),we(lt,jt),we(St,d(_)),we(Pt,sl),we(ue,d(_)),we(He,Kt),we(Ut,d(_)),ht=bl(ft,1,"stat-value rate svelte-3wi8ix",null,ht,{fermenting:d(T).fermRate<0}),we(R,`${Vt??""}/day`),we(oe,Fl),we(S,cl),we(tl,El),we(Xe,it)},[()=>y(d(T).currentSg),()=>y(d(T).firstSg),()=>y(d(T).highSg),()=>y(d(T).lowSg),()=>O(d(T).currentTemp),()=>O(d(T).avgTemp),()=>O(d(T).highTemp),()=>O(d(T).lowTemp),()=>Q(d(T).fermRate),()=>D(d(T).durationDays),()=>D(d(T).daysAtCurrentSg),()=>C(d(T).apparentAttenuation),()=>C(d(T).abv)]),ye(w,V)},le=w=>{var V=su();ye(w,V)};ot($,w=>{d(T)?w(j):w(le,!1)})}ye(e,te),$n()}Zn(["keydown","click"]);var au=De('<button type="button"> </button>'),ru=De("<option> </option>"),ou=De('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),cu=De('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),uu=De('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),fu=De('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function du(e,l){Qn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=ze(()=>Wn.config.smoothing_enabled),u=ze(()=>Wn.config.smoothing_samples),c=qe("UTC"),p=qe(0),v=qe(3),h=Cn(l,"deviceColor",3,"BLACK"),k=Cn(l,"originalGravity",3,null),m=ze(()=>Wn.config.temp_units==="C"),_=ze(Ks),N,T=null,Y=qe(!0),Z=qe(null),ee=qe(24),y=qe(Yn([])),Q=qe(Yn([])),D=qe(null),O=qe(null);const C={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},te="#facc15",$="rgba(250, 204, 21, 0.3)",j="#71717a",le="#a1a1aa",w="rgba(255, 255, 255, 0.04)",V="#22d3ee",G="rgba(250, 204, 21, 0.5)",K="brewsignal_chart_trend_enabled";let A=qe(!0);function H(R,W,se=1.01){const oe=[];for(let Ae=0;Ae<R.length;Ae++)W[Ae]!==null&&oe.push([R[Ae],W[Ae]]);if(oe.length<10)return null;const ae=oe.length;let de=0,S=0,b=0,X=0;for(const[Ae,Ve]of oe)de+=Ae,S+=Ve,b+=Ae*Ve,X+=Ae*Ae;const ce=ae*X-de*de;if(Math.abs(ce)<1e-10)return null;const Oe=(ae*b-de*S)/ce,je=(S-Oe*de)/ae,zt=S/ae;let tl=0,ll=0;for(const[Ae,Ve]of oe){const Le=Oe*Ae+je;tl+=(Ve-Le)**2,ll+=(Ve-zt)**2}const Ft=ll>0?1-tl/ll:0;let Xe=null,st=null;if(Oe<0&&Ft>.3){const Ae=R[R.length-1],Ve=(se-je)/Oe;Ve>Ae&&(st=(Ve-Ae)/(1440*60),st>0&&st<60?Xe=se:st=null)}return{slope:Oe,intercept:je,r2:Ft,predictedFg:Xe,daysToFg:st}}function F(R,W){return R.map(se=>W.slope*se+W.intercept)}function Me(R,W,se){const oe=new Date(R*1e3);try{return se?oe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:W}):oe.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:W})}catch(ae){return console.warn("Invalid timezone:",W,ae),se?oe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):oe.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function ve(R,W,se){const oe=te,ae=C[h()]||le;return{width:R,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(de,S,b)=>{const X=(b-S)*.1||.005;return[S-X,b+X]}},temp:{auto:!0,range:(de,S,b)=>{const X=b-S,ce=10;if(X<ce){const je=(b+S)/2;return[je-ce/2,je+ce/2]}const Oe=X*.1;return[S-Oe,b+Oe]}}},axes:[{stroke:j,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,S)=>S.map(b=>Me(b,se,d(ee)<=24))},{scale:"sg",stroke:oe,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,S)=>S.map(b=>js(b)),side:3},{scale:"temp",stroke:ae,grid:{show:!1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,S)=>S.map(b=>b.toFixed(0)+""),side:1}],series:[{},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:oe,width:2,fill:(de,S)=>{const b=de.ctx.createLinearGradient(0,de.bbox.top,0,de.bbox.top+de.bbox.height);return b.addColorStop(0,$),b.addColorStop(1,"transparent"),b},points:{show:!1},paths:xt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ae,width:1.5,dash:[4,4],points:{show:!1},paths:xt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:V,width:1.5,dash:[2,4],points:{show:!1},paths:xt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:G,width:2,dash:[8,4],points:{show:!1},show:d(A)}]}}function re(R,W){if(W<=1)return R;const se=[];for(let oe=0;oe<R.length;oe++){const ae=[],de=Math.floor(W/2);for(let S=Math.max(0,oe-de);S<=Math.min(R.length-1,oe+de);S++){const b=R[S];b!==null&&ae.push(b)}ae.length>0?se.push(ae.reduce((S,b)=>S+b,0)/ae.length):se.push(null)}return se}function he(R,W,se,oe,ae){if(R.length<=ae)return[R,W,se,oe];const de=Math.ceil(R.length/ae),S=[],b=[],X=[],ce=[];for(let Oe=0;Oe<R.length;Oe+=de){const je=Math.min(Oe+de,R.length);let zt=0,tl=0,ll=0,Ft=0,Xe=0,st=0;for(let Ae=Oe;Ae<je;Ae++)W[Ae]!==null&&(zt+=W[Ae],tl++),se[Ae]!==null&&(ll+=se[Ae],Ft++),oe[Ae]!==null&&(Xe+=oe[Ae],st++);S.push(R[Math.floor((Oe+je-1)/2)]),b.push(tl>0?zt/tl:null),X.push(Ft>0?ll/Ft:null),ce.push(st>0?Xe/st:null)}return[S,b,X,ce]}function ne(R){return!R.endsWith("Z")&&!R.match(/[+-]\d{2}:\d{2}$/)&&(R=R+"Z"),new Date(R).getTime()/1e3}function q(R,W,se){if(R.length===0||W.length===0)return W.map(()=>null);const oe=[...R].sort((S,b)=>ne(S.timestamp)-ne(b.timestamp)),ae=oe.map(S=>ne(S.timestamp)),de=oe.map(S=>S.temperature===null?null:se?S.temperature:S.temperature*9/5+32);return W.map(S=>{let b=null,X=null;for(let ce=0;ce<ae.length;ce++)if(ae[ce]<=S&&(b={time:ae[ce],temp:de[ce]}),ae[ce]>=S&&X===null){X={time:ae[ce],temp:de[ce]};break}if(b&&X&&b.temp!==null&&X.temp!==null){if(b.time===X.time)return b.temp;const ce=(S-b.time)/(X.time-b.time);return b.temp+ce*(X.temp-b.temp)}return b!==null&&b.temp!==null?b.temp:X!==null&&X.temp!==null?X.temp:null})}function Ee(R,W,se){const oe=[...R].reverse();let ae=[],de=[],S=[];for(const je of oe){ae.push(ne(je.timestamp)),de.push(je.sg_calibrated??je.sg_raw);const zt=je.temp_calibrated??je.temp_raw;zt!==null?S.push(se?yn(zt):zt):S.push(null)}let b=q(W,ae,se);d(a)&&d(u)>1&&(de=re(de,d(u)),S=re(S,d(u)),b=re(b,d(u))),[ae,de,S,b]=he(ae,de,S,b,500);const ce=H(ae,de);ge(D,ce,!0);const Oe=ce?F(ae,ce):ae.map(()=>null);return[ae,de,S,b,Oe]}const Ye=3e4;async function xe(R=!1){const se=Date.now()-d(p);if(!(!R&&d(p)>0&&se<Ye)){ge(Y,!0),ge(Z,null);try{if(!d(O)){const oe=await qr(l.batchId);ge(O,oe.device_id??null,!0)}if(d(O)){const[oe,ae]=await Promise.all([jr(d(O),d(ee)),Kr(d(ee)).catch(()=>[])]);ge(y,oe,!0),ge(Q,ae,!0),me()}else ge(y,[],!0),ge(Q,[],!0),ge(Z,"No device assigned to this batch")}catch(oe){ge(Z,oe instanceof Error?oe.message:"Failed to load data",!0)}finally{ge(p,Date.now(),!0),ge(Y,!1)}}}function me(){if(!N||d(y).length===0)return;const R=Ee(d(y),d(Q),d(m)),W=ve(N.clientWidth,d(m),d(c));T&&T.destroy(),T=new xt(W,R,N)}function ct(){T&&N&&T.setSize({width:N.clientWidth,height:220})}let Ge=null;function be(){if(Ge&&(clearInterval(Ge),Ge=null),d(v)>0){const R=d(v)*60*1e3;Ge=setInterval(()=>{d(Y)||xe(!1)},R)}}ya(async()=>{const R=localStorage.getItem(i);if(R!==null){const se=parseInt(R,10);Number.isNaN(se)||ge(v,se,!0)}const W=localStorage.getItem(K);W!==null&&ge(A,W==="true");try{const se=await fetch("/api/system/timezone");if(se.ok){const oe=await se.json();ge(c,oe.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await xe(!0),window.addEventListener("resize",ct),be()}),Vr(()=>{T?.destroy(),window.removeEventListener("resize",ct),Ge&&clearInterval(Ge)}),Os(()=>{d(m)!==void 0&&d(y).length>0&&N&&me()}),Os(()=>{d(a),d(u),d(y).length>0&&N&&me()});function ut(R){const W=Number(R.target.value);ge(v,W,!0),localStorage.setItem(i,String(W)),be(),xe(!0)}function vt(){ge(A,!d(A)),localStorage.setItem(K,String(d(A))),T&&T.setSeries(4,{show:d(A)})}var $e=fu(),tt=L($e),yt=L(tt);Ln(yt,21,()=>Yr,qn,(R,W)=>{var se=au();let oe;se.__click=()=>{d(ee)!==d(W).hours&&(ge(ee,d(W).hours,!0),xe(!0))};var ae=L(se,!0);E(se),pt(()=>{oe=bl(se,1,"range-btn svelte-12kwequ",null,oe,{active:d(ee)===d(W).hours}),we(ae,d(W).label)}),ye(R,se)}),E(yt);var _e=B(yt,2),lt=L(_e),nt=B(L(lt),2);nt.__change=ut,Ln(nt,21,()=>n,qn,(R,W)=>{var se=ru(),oe=L(se,!0);E(se);var ae={};pt(()=>{we(oe,d(W).label),ae!==(ae=d(W).value)&&(se.value=(se.__value=d(W).value)??"")}),ye(R,se)}),E(nt);var St;$r(nt),E(lt);var Be=B(lt,2),Ct=B(L(Be),2),Pt=L(Ct);Bl(2),E(Ct);var kt=B(Ct,4);let ue;kt.__click=vt;var z=L(kt);Mn(z,"background: rgba(250, 204, 21, 0.5);"),Bl(2),E(kt),E(Be),E(_e),E(tt);var ke=B(tt,2),He=L(ke);{var qt=R=>{var W=ou();ye(R,W)};ot(He,R=>{d(Y)&&R(qt)})}var Ut=B(He,2);{var Rt=R=>{var W=cu(),se=B(L(W),2);se.__click=()=>xe(!0),E(W),ye(R,W)},Gt=R=>{var W=Dn(),se=Sl(W);{var oe=ae=>{var de=uu();ye(ae,de)};ot(se,ae=>{d(y).length===0&&ae(oe)},!0)}ye(R,W)};ot(Ut,R=>{d(Z)?R(Rt):R(Gt,!1)})}E(ke),qs(ke,R=>N=R,()=>N);var ft=B(ke,2);{var ht=R=>{{let W=ze(()=>d(D)?{predictedFg:d(D).predictedFg,daysToFg:d(D).daysToFg,r2:d(D).r2}:null);iu(R,{get readings(){return d(y)},get originalGravity(){return k()},get trend(){return d(W)}})}};ot(ft,R=>{d(y).length>0&&R(ht)})}E($e),pt(()=>{St!==(St=d(v))&&(nt.value=(nt.__value=d(v))??"",Xr(nt,d(v))),Mn(Pt,`background: ${(C[h()]||"var(--text-secondary)")??""};`),ue=bl(kt,1,"legend-item legend-toggle svelte-12kwequ",null,ue,{"legend-disabled":!d(A)}),nn(kt,"title",d(A)?"Hide trend line":"Show trend line")}),ye(e,$e),$n()}Zn(["click","change"]);var pu=De('<input type="text" class="beer-name-input svelte-1k5rb4o" maxlength="100"/>'),vu=De('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),hu=De('<div class="w-1 rounded-sm transition-all"></div>'),gu=De('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),mu=De(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),_u=De('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),wu=De('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),xu=De("<div><!></div>"),bu=De('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),yu=De('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Su(e,l){Qn(l,!0);let i=Cn(l,"expanded",3,!1),n=Cn(l,"wide",3,!1),a=ze(()=>{if(!l.batch.device_id)return null;const S=l.batch.device_id.match(/^(?:tilt-)?(\w+)$/i);if(!S?.[1])return null;const b=S[1].toUpperCase();for(const X of Sa.tilts.values())if(X.color.toUpperCase()===b)return X;return null}),u=ze(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),c=ze(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=ze(()=>l.progress?.temperature?.current??null),v=ze(()=>d(a)?.color??"BLACK"),h=ze(()=>d(a)?.rssi??null),k=ze(()=>d(a)?.paired??!0),m=ze(()=>d(a)?.last_seen??new Date().toISOString()),_=ze(()=>d(a)?.sg_raw??d(c)),N=ze(()=>d(a)?.temp_raw??d(p)),T=qe(!1);Os(()=>{i()&&!d(T)&&ge(T,!0)});let Y=qe(!1),Z=qe(""),ee=qe(null),y=qe(!1);function Q(){ge(Z,d(u),!0),ge(Y,!0),setTimeout(()=>d(ee)?.focus(),0)}async function D(){if(d(y))return;const S=d(Z).trim();if(!S||S===d(u)){ge(Y,!1);return}ge(y,!0);try{await Jr(l.batch.id,{name:S}),ge(Y,!1)}catch(b){console.error("Failed to update batch name:",b)}finally{ge(y,!1)}}function O(S){S.key==="Enter"?D():S.key==="Escape"&&ge(Y,!1)}let C=ze(Ma),te=ze(Ks);const $={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function j(S){return js(S)}function le(S){return Ur(S)}function w(S){return S>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:S>=-60?{bars:3,color:"var(--positive)",label:"Good"}:S>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function V(S){const b=Math.floor((Date.now()-new Date(S).getTime())/1e3);if(b<10)return"just now";if(b<60)return`${b}s ago`;const X=Math.floor(b/60);if(X<60)return`${X}m ago`;const ce=Math.floor(X/60);return ce<24?`${ce}h ago`:`${Math.floor(ce/24)}d ago`}let G=ze(()=>$[d(v)]||"var(--tilt-black)"),K=ze(()=>d(h)!==null?w(d(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),A=ze(()=>V(d(m)));var H=yu();let F;var Me=L(H),ve=B(Me,2),re=L(ve),he=L(re),ne=L(he);{var q=S=>{var b=pu();ka(b),b.__keydown=O,qs(b,X=>ge(ee,X),()=>d(ee)),pt(()=>b.disabled=d(y)),ba("blur",b,D),Ta(b,()=>d(Z),X=>ge(Z,X)),ye(S,b)},Ee=S=>{var b=vu();b.__click=Q;var X=L(b),ce=L(X,!0);E(X),Bl(2),E(b),pt(()=>we(ce,d(u))),ye(S,b)};ot(ne,S=>{d(Y)?S(q):S(Ee,!1)})}var Ye=B(ne,2),xe=L(Ye),me=B(xe,2),ct=L(me,!0);E(me),E(Ye),E(he);var Ge=B(he,2),be=L(Ge),ut=L(be);Ln(ut,20,()=>Array(4),qn,(S,b,X)=>{var ce=hu();pt(()=>Mn(ce,`
									height: ${8+X*4}px;
									background: ${(X<d(K).bars?d(K).color:"var(--bg-hover)")??""};
									opacity: ${X<d(K).bars?1:.4};
								`)),ye(S,ce)}),E(ut);var vt=B(ut,2),$e=L(vt);E(vt),E(be);var tt=B(be,2);{var yt=S=>{var b=gu();ye(S,b)};ot(tt,S=>{d(k)||S(yt)})}E(Ge),E(re);var _e=B(re,2),lt=L(_e),nt=L(lt),St=L(nt,!0),Be=B(St),Ct=L(Be,!0);E(Be),E(nt);var Pt=B(nt,2),kt=L(Pt,!0);E(Pt),E(lt);var ue=B(lt,2),z=L(ue),ke=L(z);{var He=S=>{var b=mu(),X=Sl(b,!0),ce=B(X),Oe=L(ce,!0);E(ce),pt(je=>{we(X,je),we(Oe,d(C))},[()=>le(d(p))]),ye(S,b)},qt=S=>{var b=_u(),X=B(Sl(b)),ce=L(X,!0);E(X),pt(()=>we(ce,d(C))),ye(S,b)};ot(ke,S=>{d(p)!==null?S(He):S(qt,!1)})}E(z),Bl(2),E(ue),E(_e);var Ut=B(_e,2);{var Rt=S=>{var b=wu(),X=B(L(b),2),ce=L(X,!0);E(X);var Oe=B(X,4),je=L(Oe);E(Oe),E(b),pt((zt,tl)=>{we(ce,zt),we(je,`${tl??""}${d(C)??""}`)},[()=>j(d(_)),()=>d(N)!==null?le(d(N)):"--"]),ye(S,b)};ot(Ut,S=>{(d(c)!==d(_)||d(p)!==d(N))&&d(a)&&S(Rt)})}var Gt=B(Ut,2);{var ft=S=>{var b=xu();let X;var ce=L(b);eo(ce,()=>l.batch.id,Oe=>{du(Oe,{get batchId(){return l.batch.id},get deviceColor(){return d(v)},get originalGravity(){return l.batch.measured_og}})}),E(b),pt(()=>X=bl(b,1,"chart-section svelte-1k5rb4o",null,X,{hidden:!i()})),ye(S,b)};ot(Gt,S=>{d(T)&&S(ft)})}var ht=B(Gt,2),R=L(ht),W=L(R);E(R);var se=B(R,2),oe=L(se),ae=B(oe,2);{var de=S=>{var b=bu();b.__click=function(...Oe){l.onToggleExpand?.apply(this,Oe)};var X=L(b);let ce;E(b),pt(()=>{nn(b,"aria-label",i()?"Collapse chart":"Expand chart"),ce=bl(X,0,"w-4 h-4 transition-transform",null,ce,{"rotate-180":i()})}),ye(S,b)};ot(ae,S=>{l.onToggleExpand&&S(de)})}Bl(2),E(se),E(ht),E(ve),E(H),pt(S=>{F=bl(H,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,F,{expanded:i(),wide:n()}),Mn(Me,`background: ${d(G)??""};`),Mn(xe,`background: ${d(G)??""};`),we(ct,d(v)),nn(be,"title",`${d(K).label??""} signal (${d(h)??"N/A"??""} dBm)`),we($e,`${d(h)??"N/A"??""} dBm`),we(St,S),we(Ct,d(te)!=="SG"?d(te):""),we(kt,d(te)==="SG"?"Gravity":d(te)==="P"?"Plato":"Brix"),we(W,`Updated ${d(A)??""}`),nn(oe,"href",`/batches/${l.batch.id??""}`)},[()=>j(d(c))]),ye(e,H),$n()}Zn(["keydown","click"]);var ku=De('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Tu=De('<div class="alerts-list svelte-1uha8ag"></div>'),Mu=De('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Eu=De('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Au=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Du=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Lu=De('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Cu=De("<div></div>"),Pu=De("<!> <!>",1);function Ju(e,l){Qn(l,!0);let i=qe(!1),n=qe(!1),a=qe(Yn([])),u=qe(Yn(new Map)),c=qe(!0),p=qe(null);ya(async()=>{const O=localStorage.getItem("brewsignal_alerts_dismissed"),C=localStorage.getItem("brewsignal_alerts_dismissed_time");O==="true"&&C&&Date.now()-parseInt(C,10)<360*60*1e3&&ge(i,!0),await v()});async function v(){ge(c,!0),ge(p,null);try{const O=await Zr();ge(a,O.filter(j=>j.status==="fermenting"||j.status==="conditioning"),!0);const C=d(a).map(async j=>{try{const le=await Qr(j.id);return[j.id,le]}catch{return null}}),te=await Promise.all(C),$=new Map;for(const j of te)j&&$.set(j[0],j[1]);ge(u,$,!0)}catch(O){ge(p,O instanceof Error?O.message:"Failed to load batches",!0)}finally{ge(c,!1)}}let h=ze(()=>new Map(d(a).filter(O=>O.device_id&&(O.status==="fermenting"||O.status==="conditioning")).map(O=>[O.device_id,O.id]))),k=ze(()=>{const O=new Map(d(u));for(const[C,te]of d(h)){const $=Sa.tilts.get(C);if($){const j=O.get(te)||{batch_id:te,measured:{},temperature:{},progress:{},targets:{}};O.set(te,{...j,measured:{...j.measured,current_sg:$.sg},temperature:{...j.temperature,current:$.temp,status:j.temperature?.yeast_min!==void 0&&j.temperature?.yeast_max!==void 0?$.temp<j.temperature.yeast_min?"too_cold":$.temp>j.temperature.yeast_max?"too_hot":"in_range":j.temperature?.status}})}}return O}),m=qe(null);function _(O){ge(m,d(m)===O?null:O,!0)}function N(){ge(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function T(){ge(n,!d(n))}var Y=Pu();Wr("1uha8ag",O=>{Ir(()=>{Br.title="Dashboard | BrewSignal"})});var Z=Sl(Y);{var ee=O=>{var C=Eu(),te=L(C),$=L(te),j=B(L($),4),le=L(j,!0);E(j),E($);var w=B($,2);w.__click=N,E(te);var V=B(te,2);{var G=H=>{var F=Tu();Ln(F,21,()=>wn.alerts,qn,(Me,ve)=>{var re=ku();let he;var ne=L(re),q=L(ne);E(ne);var Ee=B(ne,2),Ye=L(Ee,!0);E(Ee),E(re),pt(()=>{he=bl(re,1,"alert-item svelte-1uha8ag",null,he,{warning:d(ve).level==="warning",critical:d(ve).level==="critical"}),we(q,`${d(ve).day??""}:`),we(Ye,d(ve).message)}),ye(Me,re)}),E(F),ye(H,F)};ot(V,H=>{d(n)||H(G)})}var K=B(V,2);{var A=H=>{var F=Mu();F.__click=T;var Me=L(F,!0);E(F),pt(()=>we(Me,d(n)?`Show ${wn.alerts.length} alerts`:"Show less")),ye(H,F)};ot(K,H=>{wn.alerts.length>3&&H(A)})}E(C),pt(()=>we(le,wn.alerts.length)),ye(O,C)};ot(Z,O=>{wn.alerts.length>0&&!d(i)&&O(ee)})}var y=B(Z,2);{var Q=O=>{var C=Au();ye(O,C)},D=O=>{var C=Dn(),te=Sl(C);{var $=le=>{var w=Du(),V=B(L(w),4),G=L(V,!0);E(V),E(w),pt(()=>we(G,d(p))),ye(le,w)},j=le=>{var w=Dn(),V=Sl(w);{var G=A=>{var H=Lu();ye(A,H)},K=A=>{var H=Cu();let F;Ln(H,21,()=>d(a),Me=>Me.id,(Me,ve)=>{{let re=ze(()=>d(k).get(d(ve).id)),he=ze(()=>d(m)===d(ve).id),ne=ze(()=>d(a).length===1);Su(Me,{get batch(){return d(ve)},get progress(){return d(re)},get expanded(){return d(he)},get wide(){return d(ne)},onToggleExpand:()=>_(d(ve).id)})}}),E(H),pt(()=>F=bl(H,1,"tilt-grid svelte-1uha8ag",null,F,{"single-tilt":d(a).length===1})),ye(A,H)};ot(V,A=>{d(a).length===0?A(G):A(K,!1)},!0)}ye(le,w)};ot(te,le=>{d(p)?le($):le(j,!1)},!0)}ye(O,C)};ot(y,O=>{d(c)?O(Q):O(D,!1)})}ye(e,Y),$n()}Zn(["click"]);export{Ju as component};
