import{d as Jn,c as Wn,a as Ae,f as Ge,s as be,e as ba}from"../chunks/DFbRLFGc.js";import{o as Nr,R as Gr,b7 as Or,b as zr,ah as $n,ar as Ol,c as d,ai as ze,aj as Zn,al as D,an as E,ak as H,ao as qe,as as vt,s as ge,at as zl,p as Un,ap as ya,aL as Vr,aq as Ns,e as Ir,am as Br}from"../chunks/-s7GvDYA.js";import{e as An,i as Yn}from"../chunks/DSjxYGfQ.js";import{B as Hr,i as ht}from"../chunks/DiA6E_7b.js";import{h as Wr}from"../chunks/BsCIOrMO.js";import{s as wl}from"../chunks/DC-wEq0z.js";import{t as Sa}from"../chunks/BJZu1gQI.js";import{w as _n}from"../chunks/fpvWZG4p.js";import{r as ka,s as en}from"../chunks/CXlnwKpw.js";import{s as Tn}from"../chunks/CxDjpI2d.js";import{b as Ta}from"../chunks/BXlrlxF0.js";import{b as qs}from"../chunks/heAMOb8F.js";import{p as tn}from"../chunks/BPBk5V8z.js";import{f as bn,c as Bn,d as js,b as Ks,g as Ma,e as Ur}from"../chunks/BH1aWYKn.js";import{T as Yr,h as qr,j as jr,k as Kr,u as Jr,f as $r,a as Zr}from"../chunks/DLyiWXp0.js";import{i as Qr,s as Xr}from"../chunks/D9NHjgjI.js";function eo(e,l,i){Nr&&Gr();var n=new Hr(e),a=!Or();zr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const to=!0,yt="u-",lo="uplot",no=yt+"hz",so=yt+"vt",io=yt+"title",ao=yt+"wrap",ro=yt+"under",oo=yt+"over",uo=yt+"axis",Gl=yt+"off",co=yt+"select",fo=yt+"cursor-x",po=yt+"cursor-y",vo=yt+"cursor-pt",ho=yt+"legend",go=yt+"live",mo=yt+"inline",_o=yt+"series",wo=yt+"marker",Ni=yt+"label",xo=yt+"value",yn="width",Sn="height",wn="top",Gi="bottom",Ql="left",As="right",Js="#000",Oi=Js+"0",Ds="mousemove",zi="mousedown",Ls="mouseup",Vi="mouseenter",Ii="mouseleave",Bi="dblclick",bo="resize",yo="scroll",Hi="change",qn="dppxchange",$s="--",on=typeof window<"u",Gs=on?document:null,ln=on?window:null,So=on?navigator:null;let Ne,zn;function Os(){let e=devicePixelRatio;Ne!=e&&(Ne=e,zn&&Vs(Hi,zn,Os),zn=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),Vl(Hi,zn,Os),ln.dispatchEvent(new CustomEvent(qn)))}function $t(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Qe(e,l,i){e.style[l]=i+"px"}function ol(e,l,i,n){let a=Gs.createElement(e);return l!=null&&$t(a,l),i?.insertBefore(a,n),a}function ll(e,l){return ol("div",e,l)}const Wi=new WeakMap;function gl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Wi.get(e);c!=u&&(e.style.transform=c,Wi.set(e,c),l<0||i<0||l>n||i>a?$t(e,Gl):zs(e,Gl))}const Ui=new WeakMap;function Yi(e,l,i){let n=l+i,a=Ui.get(e);n!=a&&(Ui.set(e,n),e.style.background=l,e.style.borderColor=i)}const qi=new WeakMap;function ji(e,l,i,n){let a=l+""+i,c=qi.get(e);a!=c&&(qi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},ko={...Zs,capture:!0};function Vl(e,l,i,n){l.addEventListener(e,i,n?ko:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}on&&Os();function ul(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:Zt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Aa=e=>e!=null,Da=e=>e!=null&&e>0,Qn=Ea(Aa),To=Ea(Da);function Mo(e,l,i,n=0,a=!1){let c=a?To:Qn,u=a?Da:Aa;[l,i]=c(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let S=e[h];u(S)&&(S<p?p=S:S>v&&(v=S))}return[p??Ue,v??-Ue]}function Xn(e,l,i,n){let a=$i(e),c=$i(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?xl:La,p=a==1?Zt:nl,v=c==1?nl:Zt,h=p(u(xt(e))),S=v(u(xt(l))),m=nn(i,h),_=nn(i,S);return i==10&&(h<0&&(m=Ye(m,-h)),S<0&&(_=Ye(_,-S))),n||i==2?(e=m*a,l=_*c):(e=Fa(e,m),l=es(l,_)),[e,l]}function Qs(e,l,i,n){let a=Xn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Xs=.1,Ki={mode:3,pad:Xs},Mn={pad:0,soft:null,mode:0},Eo={min:Mn,max:Mn};function jn(e,l,i,n){return ts(i)?Ji(e,l,i):(Mn.pad=i,Mn.soft=n?0:null,Mn.mode=n?3:0,Ji(e,l,Eo))}function Pe(e,l){return e??l}function Ao(e,l,i){for(l=Pe(l,0),i=Pe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ji(e,l,i){let n=i.min,a=i.max,c=Pe(n.pad,0),u=Pe(a.pad,0),p=Pe(n.hard,-Ue),v=Pe(a.hard,Ue),h=Pe(n.soft,Ue),S=Pe(a.soft,-Ue),m=Pe(n.mode,0),_=Pe(a.mode,0),N=l-e,k=xl(N),Y=Bt(xt(e),xt(l)),j=xl(Y),X=xt(j-k);(N<1e-24||X>10)&&(N=0,(e==0||l==0)&&(N=1e-24,m==2&&h!=Ue&&(c=0),_==2&&S!=-Ue&&(u=0)));let y=N||Y||1e3,K=xl(y),A=nn(10,Zt(K)),R=y*(N==0?e==0?.1:1:c),L=Ye(Fa(e-R,A/10),24),le=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:Ue,J=Bt(p,L<le&&e>=le?le:cl(le,L)),$=y*(N==0?l==0?.1:1:u),te=Ye(es(l+$,A/10),24),w=l<=S&&(_==1||_==3&&te>=S||_==2&&te<=S)?S:-Ue,V=cl(v,te>w&&l<=w?w:Bt(w,te));return J==V&&J==0&&(V=100),[J,V]}const Do=new Intl.NumberFormat(on?So.language:"en-US"),ei=e=>Do.format(e),Qt=Math,Hn=Qt.PI,xt=Qt.abs,Zt=Qt.floor,wt=Qt.round,nl=Qt.ceil,cl=Qt.min,Bt=Qt.max,nn=Qt.pow,$i=Qt.sign,xl=Qt.log10,La=Qt.log2,Lo=(e,l=1)=>Qt.sinh(e)*l,Cs=(e,l=1)=>Qt.asinh(e/l),Ue=1/0;function Zi(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return cl(Bt(e,l),i)}function Ca(e){return typeof e=="function"}function Te(e){return Ca(e)?e:()=>e}const Co=()=>{},Pa=e=>e,Ra=(e,l)=>l,Po=e=>null,Qi=e=>!0,Xi=(e,l)=>e==l,Ro=/\.\d*?(?=9{6,}|0{6,})/gm,Il=e=>{if(Ga(e)||Dl.has(e))return e;const l=`${e}`,i=l.match(Ro);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Il(a)}e${c}`}return Ye(e,n)};function Fl(e,l){return Il(Ye(Il(e/l))*l)}function es(e,l){return Il(nl(Il(e/l))*l)}function Fa(e,l){return Il(Zt(Il(e/l))*l)}function Ye(e,l=0){if(Ga(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return wt(n)/i}const Dl=new Map;function Na(e){return((""+e).split(".")[1]||"").length}function Dn(e,l,i,n){let a=[],c=n.map(Na);for(let u=l;u<i;u++){let p=xt(u),v=Ye(nn(e,u),p);for(let h=0;h<n.length;h++){let S=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:p)+(u>=c[h]?0:c[h]),_=e==10?S:Ye(S,m);a.push(_),Dl.set(_,m)}}return a}const En={},ti=[],sn=[null,null],Al=Array.isArray,Ga=Number.isInteger,Fo=e=>e===void 0;function ea(e){return typeof e=="string"}function ts(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function No(e){return e!=null&&typeof e=="object"}const Go=Object.getPrototypeOf(Uint8Array),Oa="__proto__";function an(e,l=ts){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=an(e[a],l)}else i=e.slice()}else if(e instanceof Go)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Oa&&(i[n]=an(e[n],l))}else i=e;return i}function pt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Oa&&(ts(e[a])?pt(e[a],an(n[a])):e[a]=an(n[a]))}return e}const Oo=0,zo=1,Vo=2;function Io(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Bo(e,l){if(Uo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Yo(u[0])||(u=Wo(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let S=0;S<h;S++)i.add(v[S])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],v=p[0];for(let h=1;h<p.length;h++){let S=p[h],m=Array(a).fill(void 0),_=l?l[u][h]:zo,N=[];for(let k=0;k<S.length;k++){let Y=S[k],j=c.get(v[k]);Y===null?_!=Oo&&(m[j]=Y,_==Vo&&N.push(j)):m[j]=Y}Io(m,N,a),n.push(m)}}return n}const Ho=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Wo(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let v=0;v<i;v++)p[v]=u[n[v]];a.push(p)}return a}function Uo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Yo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Bt(1,Zt((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const v=e[p];if(v!=null){if(v<=u)return!1;u=v}}return!0}const za=["January","February","March","April","May","June","July","August","September","October","November","December"],Va=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ia(e){return e.slice(0,3)}const qo=Va.map(Ia),jo=za.map(Ia),Ko={MMMM:za,MMM:jo,WWWW:Va,WWW:qo};function xn(e){return(e<10?"0":"")+e}function Jo(e){return(e<10?"00":e<100?"0":"")+e}const $o={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>xn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>xn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>xn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>xn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>xn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Jo(e.getMilliseconds())};function li(e,l){l=l||Ko;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?$o[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Zo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Qo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Zo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Kn=[1,2,2.5,5],Xo=Dn(10,-32,0,Kn),Ha=Dn(10,0,32,Kn),eu=Ha.filter(Ba),Nl=Xo.concat(Ha),ni=`
`,Wa="{YYYY}",ta=ni+Wa,Ua="{M}/{D}",kn=ni+Ua,Vn=kn+"/{YY}",Ya="{aa}",tu="{h}:{mm}",Xl=tu+Ya,la=ni+Xl,na=":{ss}",Oe=null;function qa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Dn(10,0,3,Kn).filter(Ba):Dn(10,-3,0,Kn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Wa,Oe,Oe,Oe,Oe,Oe,Oe,1],[a*28,"{MMM}",ta,Oe,Oe,Oe,Oe,Oe,1],[a,Ua,ta,Oe,Oe,Oe,Oe,Oe,1],[n,"{h}"+Ya,Vn,Oe,kn,Oe,Oe,Oe,1],[i,Xl,Vn,Oe,kn,Oe,Oe,Oe,1],[l,na,Vn+" "+Xl,Oe,kn+" "+Xl,Oe,la,Oe,1],[e,na+".{fff}",Vn+" "+Xl,Oe,kn+" "+Xl,Oe,la,Oe,1]];function S(m){return(_,N,k,Y,j,X)=>{let y=[],K=j>=u,A=j>=c&&j<u,R=m(k),L=Ye(R*e,3),le=Ps(R.getFullYear(),K?0:R.getMonth(),A||K?1:R.getDate()),J=Ye(le*e,3);if(A||K){let $=A?j/c:0,te=K?j/u:0,w=L==J?L:Ye(Ps(le.getFullYear()+te,le.getMonth()+$,1)*e,3),V=new Date(wt(w/e)),G=V.getFullYear(),Q=V.getMonth();for(let M=0;w<=Y;M++){let q=Ps(G+te*M,Q+$*M,1),P=q-m(Ye(q*e,3));w=Ye((+q+P)*e,3),w<=Y&&y.push(w)}}else{let $=j>=a?a:j,te=Zt(k)-Zt(L),w=J+te+es(L-J,$);y.push(w);let V=m(w),G=V.getHours()+V.getMinutes()/i+V.getSeconds()/n,Q=j/n,M=_.axes[N]._space,q=X/M;for(;w=Ye(w+j,e==1?0:3),!(w>Y);)if(Q>1){let P=Zt(Ye(G+Q,6))%24,ue=m(w).getHours()-P;ue>1&&(ue=-1),w-=ue*n,G=(G+Q)%24;let he=y[y.length-1];Ye((w-he)/j,3)*q>=.7&&y.push(w)}else y.push(w)}return y}}return[v,h,S]}const[lu,nu,su]=qa(1),[iu,au,ru]=qa(.001);Dn(2,-53,53,[1]);function sa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ia(e,l){return(i,n,a,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],v,h,S,m,_,N;return n.map(k=>{let Y=e(k),j=Y.getFullYear(),X=Y.getMonth(),y=Y.getDate(),K=Y.getHours(),A=Y.getMinutes(),R=Y.getSeconds(),L=j!=v&&p[2]||X!=h&&p[3]||y!=S&&p[4]||K!=m&&p[5]||A!=_&&p[6]||R!=N&&p[7]||p[1];return v=j,h=X,S=y,m=K,_=A,N=R,L(Y)})}}function ou(e,l){let i=li(l);return(n,a,c,u,p)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function aa(e,l){return l(e)}const uu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ra(e,l){return(i,n,a,c)=>c==null?$s:l(e(n))}function cu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function fu(e,l){return e.series[l].fill(e,l)}const du={show:!0,live:!0,isolate:!1,mount:Co,markers:{show:!0,width:2,stroke:cu,fill:fu,dash:"solid"},idx:null,idxs:null,values:[]};function pu(e,l){let i=e.cursor.points,n=ll(),a=i.size(e,l);Qe(n,yn,a),Qe(n,Sn,a);let c=a/-2;Qe(n,"marginLeft",c),Qe(n,"marginTop",c);let u=i.width(e,l,a);return u&&Qe(n,"borderWidth",u),n}function vu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function hu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function gu(e,l){return e.series[l].points.size}const Rs=[0,0];function mu(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function In(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _u={show:!0,x:!0,y:!0,lock:!1,move:mu,points:{one:!1,show:pu,size:gu,width:0,stroke:hu,fill:vu},bind:{mousedown:In,mouseup:In,click:In,dblclick:In,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},ja={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},si=pt({},ja,{filter:Ra}),Ka=pt({},si,{size:10}),Ja=pt({},ja,{show:!1}),ii='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',$a="bold "+ii,Za=1.5,oa={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$a,side:2,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Za,rotate:0},wu="Value",xu="Time",ua={show:!0,scale:"x",auto:!1,sorted:1,min:Ue,max:-Ue,idxs:[]};function bu(e,l,i,n,a){return l.map(c=>c==null?"":ei(c))}function yu(e,l,i,n,a,c,u){let p=[],v=Dl.get(a)||0;i=u?i:Ye(es(i,a),v);for(let h=i;h<=n;h=Ye(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,c,u){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?xl:La,S=Zt(h(i));a=nn(v,S),v==10&&(a=Nl[ul(a,Nl)]);let m=i,_=a*v;v==10&&(_=Nl[ul(_,Nl)]);do p.push(m),m=m+a,v==10&&!Dl.has(m)&&(m=Ye(m,Dl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Nl[ul(_,Nl)]));while(m<=n);return p}function Su(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Bt(v,i),n,a):[v],S=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Bt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(S,h)}const Qa=/./,ku=/[12357]/,Tu=/[125]/,ca=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],v=e.valToPos,h=c._space,S=v(10,u),m=v(9,u)-S>=h?Qa:v(7,u)-S>=h?ku:v(5,u)-S>=h?Tu:ca;if(m==ca){let _=xt(v(1,u)-S);if(_<h)return Hs(l.slice().reverse(),p.distr,m,nl(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,v=e.valToPos,h=xt(v(1,u)-v(2,u));return h<p?Hs(l.slice().reverse(),3,Qa,nl(p/h)).reverse():l}function Au(e,l,i,n){return n==null?$s:l==null?"":ei(l)}const fa={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:$a,side:3,grid:si,ticks:Ka,border:Ja,font:ii,lineGap:Za,rotate:0};function Du(e,l){let i=3+(e||1)*2;return Ye(i*l,3)}function Lu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=xt(u-c),v=e.series[l],h=p/(v.points.space*Ne);return n[1]-n[0]<=h}const da={scale:null,auto:!0,sorted:0,min:Ue,max:-Ue},Xa=(e,l,i,n,a)=>a,pa={show:!0,auto:!0,sorted:0,gaps:Xa,alpha:1,facets:[pt({},da,{scale:"x"}),pt({},da,{scale:"y"})]},va={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Xa,alpha:1,points:{show:Lu,filter:null},values:null,min:Ue,max:-Ue,idxs:[],path:null,clip:null};function Cu(e,l,i,n,a){return i/10}const er={time:to,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Pu=pt({},er,{time:!1,ori:1}),ha={};function tr(e,l){let i=ha[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,v,h){for(let S=0;S<i.plots.length;S++)i.plots[S]!=a&&i.plots[S].pub(n,a,c,u,p,v,h)}},e!=null&&(ha[e]=i)),i}const rn=1,Ws=2;function Bl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let v=c[0],h=n==2?c[1]:c[l],S=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,N=p.top,k=p.width,Y=p.height,j=e.valToPosH,X=e.valToPosV;return S.ori==0?i(a,v,h,S,m,j,X,_,N,k,Y,ns,un,is,nr,ir):i(a,v,h,S,m,X,j,N,_,Y,k,ss,cn,oi,sr,ar)}function ai(e,l){let i=0,n=0,a=Pe(e.bands,ti);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Ru(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function bl(e,l,i,n,a,c){return Bl(e,l,(u,p,v,h,S,m,_,N,k,Y,j)=>{let X=u.pxRound;const y=h.dir*(h.ori==0?1:-1),K=h.ori==0?un:cn;let A,R;y==1?(A=i,R=n):(A=n,R=i);let L=X(m(p[A],h,Y,N)),le=X(_(v[A],S,j,k)),J=X(m(p[R],h,Y,N)),$=X(_(c==1?S.max:S.min,S,j,k)),te=new Path2D(a);return K(te,J,$),K(te,L,$),K(te,L,le),te})}function ls(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?is:oi;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let N=_[0]-v;N>0&&p(u,v,n,N,n+c),v=_[1]}}let h=i+a-v,S=10;h>0&&p(u,v,n-S/2,h,n+c+S)}return u}function Fu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ri(e,l,i,n,a,c,u){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let N=c(e[m]),k=_==m?N:c(e[_]),Y=m-a;N=u<=0&&Y>=0&&Y<v?c(e[Y]):N;let X=_+a;k=u>=0&&X>=0&&X<v?c(e[X]):k,k>=N&&p.push([N,k])}return p}function ga(e){return e==0?Pa:e==1?wt:l=>Fl(l,e)}function lr(e){let l=e==0?ns:ss,i=e==0?(a,c,u,p,v,h)=>{a.arcTo(c,u,p,v,h)}:(a,c,u,p,v,h)=>{a.arcTo(u,c,v,p,h)},n=e==0?(a,c,u,p,v)=>{a.rect(c,u,p,v)}:(a,c,u,p,v)=>{a.rect(u,c,v,p)};return(a,c,u,p,v,h=0,S=0)=>{h==0&&S==0?n(a,c,u,p,v):(h=cl(h,p/2,v/2),S=cl(S,p/2,v/2),l(a,c+h,u),i(a,c+p,u,c+p,u+v,h),i(a,c+p,u+v,c,u+v,S),i(a,c,u+v,c,u,S),i(a,c,u,c+p,u,h),a.closePath())}}const ns=(e,l,i)=>{e.moveTo(l,i)},ss=(e,l,i)=>{e.moveTo(i,l)},un=(e,l,i)=>{e.lineTo(l,i)},cn=(e,l,i)=>{e.lineTo(i,l)},is=lr(0),oi=lr(1),nr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},sr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ar=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function rr(e){return(l,i,n,a,c)=>Bl(l,i,(u,p,v,h,S,m,_,N,k,Y,j)=>{let{pxRound:X,points:y}=u,K,A;h.ori==0?(K=ns,A=nr):(K=ss,A=sr);const R=Ye(y.width*Ne,3);let L=(y.size-y.width)/2*Ne,le=Ye(L*2,3),J=new Path2D,$=new Path2D,{left:te,top:w,width:V,height:G}=l.bbox;is($,te-le,w-le,V+le*2,G+le*2);const Q=M=>{if(v[M]!=null){let q=X(m(p[M],h,Y,N)),P=X(_(v[M],S,j,k));K(J,q+L,P),A(J,q,P,L,0,Hn*2)}};if(c)c.forEach(Q);else for(let M=n;M<=a;M++)Q(M);return{stroke:R>0?J:null,fill:J,clip:$,flags:rn|Ws}})}function or(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Nu=or(un),Gu=or(cn);function ur(e){const l=Pe(e?.alignGaps,0);return(i,n,a,c)=>Bl(i,n,(u,p,v,h,S,m,_,N,k,Y,j)=>{[a,c]=Qn(v,a,c);let X=u.pxRound,y=G=>X(m(G,h,Y,N)),K=G=>X(_(G,S,j,k)),A,R;h.ori==0?(A=un,R=Nu):(A=cn,R=Gu);const L=h.dir*(h.ori==0?1:-1),le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:rn},J=le.stroke;let $=!1;if(c-a>=Y*4){let G=U=>i.posToVal(U,h.key,!0),Q=null,M=null,q,P,Me,ve=y(p[L==1?a:c]),ue=y(p[a]),he=y(p[c]),ne=G(L==1?ue+1:he-1);for(let U=L==1?a:c;U>=a&&U<=c;U+=L){let De=p[U],xe=(L==1?De<ne:De>ne)?ve:y(De),me=v[U];xe==ve?me!=null?(P=me,Q==null?(A(J,xe,K(P)),q=Q=M=P):P<Q?Q=P:P>M&&(M=P)):me===null&&($=!0):(Q!=null&&R(J,ve,K(Q),K(M),K(q),K(P)),me!=null?(P=me,A(J,xe,K(P)),Q=M=q=P):(Q=M=null,me===null&&($=!0)),ve=xe,ne=G(ve+L))}Q!=null&&Q!=M&&Me!=ve&&R(J,ve,K(Q),K(M),K(q),K(P))}else for(let G=L==1?a:c;G>=a&&G<=c;G+=L){let Q=v[G];Q===null?$=!0:Q!=null&&A(J,y(p[G]),K(Q))}let[w,V]=ai(i,n);if(u.fill!=null||w!=0){let G=le.fill=new Path2D(J),Q=u.fillTo(i,n,u.min,u.max,w),M=K(Q),q=y(p[a]),P=y(p[c]);L==-1&&([P,q]=[q,P]),A(G,P,M),A(G,q,M)}if(!u.spanGaps){let G=[];$&&G.push(...ri(p,v,a,c,L,y,l)),le.gaps=G=u.gaps(i,n,a,c,G),le.clip=ls(G,h.ori,N,k,Y,j)}return V!=0&&(le.band=V==2?[bl(i,n,a,c,J,-1),bl(i,n,a,c,J,1)]:bl(i,n,a,c,J,V)),le})}function Ou(e){const l=Pe(e.align,1),i=Pe(e.ascDesc,!1),n=Pe(e.alignGaps,0),a=Pe(e.extend,!1);return(c,u,p,v)=>Bl(c,u,(h,S,m,_,N,k,Y,j,X,y,K)=>{[p,v]=Qn(m,p,v);let A=h.pxRound,{left:R,width:L}=c.bbox,le=ue=>A(k(ue,_,y,j)),J=ue=>A(Y(ue,N,K,X)),$=_.ori==0?un:cn;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:rn},w=te.stroke,V=_.dir*(_.ori==0?1:-1);let G=J(m[V==1?p:v]),Q=le(S[V==1?p:v]),M=Q,q=Q;a&&l==-1&&(q=R,$(w,q,G)),$(w,Q,G);for(let ue=V==1?p:v;ue>=p&&ue<=v;ue+=V){let he=m[ue];if(he==null)continue;let ne=le(S[ue]),U=J(he);l==1?$(w,ne,G):$(w,M,U),$(w,ne,U),G=U,M=ne}let P=M;a&&l==1&&(P=R+L,$(w,P,G));let[Me,ve]=ai(c,u);if(h.fill!=null||Me!=0){let ue=te.fill=new Path2D(w),he=h.fillTo(c,u,h.min,h.max,Me),ne=J(he);$(ue,P,ne),$(ue,q,ne)}if(!h.spanGaps){let ue=[];ue.push(...ri(S,m,p,v,V,le,n));let he=h.width*Ne/2,ne=i||l==1?he:-he,U=i||l==-1?-he:he;ue.forEach(De=>{De[0]+=ne,De[1]+=U}),te.gaps=ue=h.gaps(c,u,p,v,ue),te.clip=ls(ue,_.ori,j,X,y,K)}return ve!=0&&(te.band=ve==2?[bl(c,u,p,v,w,-1),bl(c,u,p,v,w,1)]:bl(c,u,p,v,w,ve)),te})}function ma(e,l,i,n,a,c,u=Ue){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let S=xt(e[v]-e[p]);S<h&&(h=S,u=xt(i(e[v],n,a,c)-i(e[p],n,a,c)))}p=v}}return u}function zu(e){e=e||En;const l=Pe(e.size,[.6,Ue,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Te(a),u=1-l[0],p=Pe(l[1],Ue),v=Pe(l[2],1),h=Pe(e.disp,En),S=Pe(e.each,N=>{}),{fill:m,stroke:_}=h;return(N,k,Y,j)=>Bl(N,k,(X,y,K,A,R,L,le,J,$,te,w)=>{let V=X.pxRound,G=i,Q=n*Ne,M=p*Ne,q=v*Ne,P,Me;A.ori==0?[P,Me]=c(N,k):[Me,P]=c(N,k);const ve=A.dir*(A.ori==0?1:-1);let ue=A.ori==0?is:oi,he=A.ori==0?S:(O,ye,We,Ut,Yt,Tt,Ot)=>{S(O,ye,We,Yt,Ut,Ot,Tt)},ne=Pe(N.bands,ti).find(O=>O.series[0]==k),U=ne!=null?ne.dir:0,De=X.fillTo(N,k,X.min,X.max,U),je=V(le(De,R,w,$)),xe,me,nt,Ve=te,ke=V(X.width*Ne),st=!1,ct=null,Ke=null,tt=null,St=null;m!=null&&(ke==0||_!=null)&&(st=!0,ct=m.values(N,k,Y,j),Ke=new Map,new Set(ct).forEach(O=>{O!=null&&Ke.set(O,new Path2D)}),ke>0&&(tt=_.values(N,k,Y,j),St=new Map,new Set(tt).forEach(O=>{O!=null&&St.set(O,new Path2D)})));let{x0:we,size:lt}=h;if(we!=null&&lt!=null){G=1,y=we.values(N,k,Y,j),we.unit==2&&(y=y.map(We=>N.posToVal(J+We*te,A.key,!0)));let O=lt.values(N,k,Y,j);lt.unit==2?me=O[0]*te:me=L(O[0],A,te,J)-L(0,A,te,J),Ve=ma(y,K,L,A,te,J,Ve),nt=Ve-me+Q}else Ve=ma(y,K,L,A,te,J,Ve),nt=Ve*u+Q,me=Ve-nt;nt<1&&(nt=0),ke>=me/2&&(ke=0),nt<5&&(V=Pa);let it=nt>0,gt=Ve-nt-(it?ke:0);me=V(Is(gt,q,M)),xe=(G==0?me/2:G==ve?0:me)-G*ve*((G==0?Q/2:0)+(it?ke/2:0));const He={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},kt=st?null:new Path2D;let Gt=null;if(ne!=null)Gt=N.data[ne.series[1]];else{let{y0:O,y1:ye}=h;O!=null&&ye!=null&&(K=ye.values(N,k,Y,j),Gt=O.values(N,k,Y,j))}let mt=P*me,fe=Me*me;for(let O=ve==1?Y:j;O>=Y&&O<=j;O+=ve){let ye=K[O];if(ye==null)continue;if(Gt!=null){let F=Gt[O]??0;if(ye-F==0)continue;je=le(F,R,w,$)}let We=A.distr!=2||h!=null?y[O]:O,Ut=L(We,A,te,J),Yt=le(Pe(ye,De),R,w,$),Tt=V(Ut-xe),Ot=V(Bt(Yt,je)),at=V(cl(Yt,je)),_t=Ot-at;if(ye!=null){let F=ye<0?fe:mt,I=ye<0?mt:fe;st?(ke>0&&tt[O]!=null&&ue(St.get(tt[O]),Tt,at+Zt(ke/2),me,Bt(0,_t-ke),F,I),ct[O]!=null&&ue(Ke.get(ct[O]),Tt,at+Zt(ke/2),me,Bt(0,_t-ke),F,I)):ue(kt,Tt,at+Zt(ke/2),me,Bt(0,_t-ke),F,I),he(N,k,O,Tt-ke/2,at,me+ke,_t)}}return ke>0?He.stroke=st?St:kt:st||(He._fill=X.width==0?X._fill:X._stroke??X._fill,He.width=0),He.fill=st?Ke:kt,He})}function Vu(e,l){const i=Pe(l?.alignGaps,0);return(n,a,c,u)=>Bl(n,a,(p,v,h,S,m,_,N,k,Y,j,X)=>{[c,u]=Qn(h,c,u);let y=p.pxRound,K=P=>y(_(P,S,j,k)),A=P=>y(N(P,m,X,Y)),R,L,le;S.ori==0?(R=ns,le=un,L=ir):(R=ss,le=cn,L=ar);const J=S.dir*(S.ori==0?1:-1);let $=K(v[J==1?c:u]),te=$,w=[],V=[];for(let P=J==1?c:u;P>=c&&P<=u;P+=J)if(h[P]!=null){let ve=v[P],ue=K(ve);w.push(te=ue),V.push(A(h[P]))}const G={stroke:e(w,V,R,le,L,y),fill:null,clip:null,band:null,gaps:null,flags:rn},Q=G.stroke;let[M,q]=ai(n,a);if(p.fill!=null||M!=0){let P=G.fill=new Path2D(Q),Me=p.fillTo(n,a,p.min,p.max,M),ve=A(Me);le(P,te,ve),le(P,$,ve)}if(!p.spanGaps){let P=[];P.push(...ri(v,h,c,u,J,K,i)),G.gaps=P=p.gaps(n,a,c,u,P),G.clip=ls(P,S.ori,k,Y,j,X)}return q!=0&&(G.band=q==2?[bl(n,a,c,u,Q,-1),bl(n,a,c,u,Q,1)]:bl(n,a,c,u,Q,q)),G})}function Iu(e){return Vu(Bu,e)}function Bu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let v=Array(u),h=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=S[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function _a(){for(let e of Us)e.syncRect(!0)}on&&(Vl(bo,ln,_a),Vl(yo,ln,_a,!0),Vl(qn,ln,()=>{bt.pxRatio=Ne}));const Hu=ur(),Wu=rr();function wa(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Uu(e,l){return e.map((i,n)=>n==0?{}:pt({},l,i))}function Ys(e,l,i,n){return pt({},l==0?i:n,e)}function cr(e,l,i){return l==null?sn:[l,i]}const Yu=cr;function qu(e,l,i){return l==null?sn:jn(l,i,Xs,!0)}function fr(e,l,i,n){return l==null?sn:Xn(l,i,e.scales[n].log,!1)}const ju=fr;function dr(e,l,i,n){return l==null?sn:Qs(l,i,e.scales[n].log,!1)}const Ku=dr;function Ju(e,l,i,n,a){let c=Bt(Zi(e),Zi(l)),u=l-e,p=ul(a/n*u,i);do{let v=i[p],h=n*v/u;if(h>=a&&c+(v<5?Dl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function xa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=wt((i=+a)*Ne))+"px"),[e,l,i]}function $u(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ye(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function bt(e,l,i){const n={mode:Pe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=ll(lo);if(e.id!=null&&(h.id=e.id),$t(h,e.class),e.title){let t=ll(io,h);t.textContent=e.title}const S=ol("canvas"),m=n.ctx=S.getContext("2d"),_=ll(ao,h);Vl("click",_,t=>{t.target===k&&(Je!=jl||et!=Kl)&&Nt.click(n,t)},!0);const N=n.under=ll(ro,_);_.appendChild(S);const k=n.over=ll(oo,_);e=an(e);const Y=+Pe(e.pxAlign,1),j=ga(Y);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const X=e.ms||.001,y=n.series=a==1?wa(e.series||[],ua,va,!1):Uu(e.series||[null],pa),K=n.axes=wa(e.axes||[],oa,fa,!0),A=n.scales={},R=n.bands=e.bands||[];R.forEach(t=>{t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1)});const L=a==2?y[1].facets[0].scale:y[0].scale,le={axes:xr,series:hr},J=(e.drawOrder||["axes","series"]).map(t=>le[t]);function $(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Cs(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,b=g-f;return(o-f)/b}}function te(t){let s=A[t];if(s==null){let r=(e.scales||En)[t]||En;if(r.from!=null){te(r.from);let o=pt({},A[r.from],r,{key:t});o.valToPct=$(o),A[t]=o}else{s=A[t]=pt({},t==L?er:Pu,r),s.key=t;let o=s.time,f=s.range,g=Al(f);if((t!=L||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ts(f))){let b=f;f=(T,C,B)=>C==null?sn:jn(C,B,b)}s.range=Te(f||(o?Yu:t==L?s.distr==3?ju:s.distr==4?Ku:cr:s.distr==3?fr:s.distr==4?dr:qu)),s.auto=Te(g?!1:s.auto),s.clamp=Te(s.clamp||Cu),s._min=s._max=null,s.valToPct=$(s)}}}te("x"),te("y"),a==1&&y.forEach(t=>{te(t.scale)}),K.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const w=A[L],V=w.distr;let G,Q;w.ori==0?($t(h,no),G=c,Q=u):($t(h,so),G=u,Q=c);const M={};for(let t in A){let s=A[t];(s.min!=null||s.max!=null)&&(M[t]={min:s.min,max:s.max},s.min=s.max=null)}const q=e.tzDate||(t=>new Date(wt(t/X))),P=e.fmtDate||li,Me=X==1?su(q):ru(q),ve=ia(q,sa(X==1?nu:au,P)),ue=ra(q,aa(uu,P)),he=[],ne=n.legend=pt({},du,e.legend),U=n.cursor=pt({},_u,{drag:{y:a==2}},e.cursor),De=ne.show,je=U.show,xe=ne.markers;ne.idxs=he,xe.width=Te(xe.width),xe.dash=Te(xe.dash),xe.stroke=Te(xe.stroke),xe.fill=Te(xe.fill);let me,nt,Ve,ke=[],st=[],ct,Ke=!1,tt={};if(ne.live){const t=y[1]?y[1].values:null;Ke=t!=null,ct=Ke?t(n,1,0):{_:0};for(let s in ct)tt[s]=$s}if(De)if(me=ol("table",ho,h),Ve=ol("tbody",null,me),ne.mount(n,me),Ke){nt=ol("thead",null,me,Ve);let t=ol("tr",null,nt);ol("th",null,t);for(var St in ct)ol("th",Ni,t).textContent=St}else $t(me,mo),ne.live&&$t(me,go);const we={show:!0},lt={show:!1};function it(t,s){if(s==0&&(Ke||!ne.live||a==2))return sn;let r=[],o=ol("tr",_o,Ve,Ve.childNodes[s]);$t(o,t.class),t.show||$t(o,Gl);let f=ol("th",null,o);if(xe.show){let T=ll(wo,f);if(s>0){let C=xe.width(n,s);C&&(T.style.border=C+"px "+xe.dash(n,s)+" "+xe.stroke(n,s)),T.style.background=xe.fill(n,s)}}let g=ll(Ni,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(xe.show||(g.style.color=t.width>0?xe.stroke(n,s):xe.fill(n,s)),He("click",f,T=>{if(U._lock)return;Rt(T);let C=y.indexOf(t);if((T.ctrlKey||T.metaKey)!=ne.isolate){let B=y.some((W,Z)=>Z>0&&Z!=C&&W.show);y.forEach((W,Z)=>{Z>0&&dl(Z,B?Z==C?we:lt:we,!0,dt.setSeries)})}else dl(C,{show:!t.show},!0,dt.setSeries)},!1),Le&&He(Vi,f,T=>{U._lock||(Rt(T),dl(y.indexOf(t),$l,!0,dt.setSeries))},!1));for(var b in ct){let T=ol("td",xo,o);T.textContent="--",r.push(T)}return[o,r]}const gt=new Map;function He(t,s,r,o=!0){const f=gt.get(s)||{},g=U.bind[t](n,s,r,o);g&&(Vl(t,s,f[t]=g),gt.set(s,f))}function kt(t,s,r){const o=gt.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&gt.delete(s)}let Gt=0,mt=0,fe=0,O=0,ye=0,We=0,Ut=ye,Yt=We,Tt=fe,Ot=O,at=0,_t=0,F=0,I=0;n.bbox={};let ae=!1,oe=!1,se=!1,de=!1,re=!1,x=!1;function z(t,s,r){(r||t!=n.width||s!=n.height)&&ee(t,s),Wl(!1),se=!0,oe=!0,Ul()}function ee(t,s){n.width=Gt=fe=t,n.height=mt=O=s,ye=We=0,Xt(),Ht();let r=n.bbox;at=r.left=Fl(ye*Ne,.5),_t=r.top=Fl(We*Ne,.5),F=r.width=Fl(fe*Ne,.5),I=r.height=Fl(O*Ne,.5)}const _e=3;function Re(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=wr(s);t=s==_e||r&&o,t||(ee(n.width,n.height),oe=!0)}}function Pt({width:t,height:s}){z(t,s)}n.setSize=Pt;function Xt(){let t=!1,s=!1,r=!1,o=!1;K.forEach((f,g)=>{if(f.show&&f._show){let{side:b,_size:T}=f,C=b%2,B=f.label!=null?f.labelSize:0,W=T+B;W>0&&(C?(fe-=W,b==3?(ye+=W,o=!0):r=!0):(O-=W,b==0?(We+=W,t=!0):s=!0))}}),sl[0]=t,sl[1]=r,sl[2]=s,sl[3]=o,fe-=fl[1]+fl[3],ye+=fl[3],O-=fl[2]+fl[0],We+=fl[0]}function Ht(){let t=ye+fe,s=We+O,r=ye,o=We;function f(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}K.forEach((g,b)=>{if(g.show&&g._show){let T=g.side;g._pos=f(T,g._size),g.label!=null&&(g._lpos=f(T,g.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Te(t.prox),o=t.bias??=0;U.dataIdx=(f,g,b,T)=>{if(g==0)return b;let C=b,B=r(f,g,b,T)??Ue,W=B>=0&&B<Ue,Z=w.ori==0?fe:O,pe=U.left,Fe=l[0],Ce=l[g];if(s.has(Ce[b])){C=null;let Se=null,ce=null,ie;if(o==0||o==-1)for(ie=b;Se==null&&ie-- >0;)s.has(Ce[ie])||(Se=ie);if(o==0||o==1)for(ie=b;ce==null&&ie++<Ce.length;)s.has(Ce[ie])||(ce=ie);if(Se!=null||ce!=null)if(W){let Ze=Se==null?-1/0:G(Fe[Se],w,Z,0),ot=ce==null?1/0:G(Fe[ce],w,Z,0),Ct=pe-Ze,Be=ot-pe;Ct<=Be?Ct<=B&&(C=Se):Be<=B&&(C=ce)}else C=ce==null?Se:Se==null?ce:b-Se<=ce-b?Se:ce}else W&&xt(pe-G(Fe[b],w,Z,0))>B&&(C=null);return C}}const Rt=t=>{U.event=t};U.idxs=he,U._lock=!1;let Xe=U.points;Xe.show=Te(Xe.show),Xe.size=Te(Xe.size),Xe.stroke=Te(Xe.stroke),Xe.width=Te(Xe.width),Xe.fill=Te(Xe.fill);const rt=n.focus=pt({},e.focus||{alpha:.3},U.focus),Le=rt.prox>=0,Ie=Le&&Xe.one;let Ee=[],ft=[],qt=[];function yl(t,s){let r=Xe.show(n,s);if(r instanceof HTMLElement)return $t(r,vo),$t(r,t.class),gl(r,-10,-10,fe,O),k.insertBefore(r,Ee[s]),r}function Sl(t,s){if(a==1||s>0){let r=a==1&&A[t.scale].time,o=t.value;t.value=r?ea(o)?ra(q,aa(o,P)):o||ue:o||Au,t.label=t.label||(r?xu:wu)}if(Ie||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Hu||Po,t.fillTo=Te(t.fillTo||Ru),t.pxAlign=+Pe(t.pxAlign,Y),t.pxRound=ga(t.pxAlign),t.stroke=Te(t.stroke||null),t.fill=Te(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Du(Bt(1,t.width),1),o=t.points=pt({},{size:r,width:Bt(1,r*.2),stroke:t.stroke,space:r*2,paths:Wu,_stroke:null,_fill:null},t.points);o.show=Te(o.show),o.filter=Te(o.filter),o.fill=Te(o.fill),o.stroke=Te(o.stroke),o.paths=Te(o.paths),o.pxAlign=t.pxAlign}if(De){let r=it(t,s);ke.splice(s,0,r[0]),st.splice(s,0,r[1]),ne.values.push(null)}if(je){he.splice(s,0,null);let r=null;Ie?s==0&&(r=yl(t,s)):s>0&&(r=yl(t,s)),Ee.splice(s,0,r),ft.splice(s,0,0),qt.splice(s,0,0)}Lt("addSeries",s)}function fn(t,s){s=s??y.length,t=a==1?Ys(t,s,ua,va):Ys(t,s,{},pa),y.splice(s,0,t),Sl(y[s],s)}n.addSeries=fn;function ml(t){if(y.splice(t,1),De){ne.values.splice(t,1),st.splice(t,1);let s=ke.splice(t,1)[0];kt(null,s.firstChild),s.remove()}je&&(he.splice(t,1),Ee.splice(t,1)[0].remove(),ft.splice(t,1),qt.splice(t,1)),Lt("delSeries",t)}n.delSeries=ml;const sl=[!1,!1,!1,!1];function as(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=A[t.scale];o==null&&(t.scale=r?y[1].scale:L,o=A[t.scale]);let f=o.time;t.size=Te(t.size),t.space=Te(t.space),t.rotate=Te(t.rotate),Al(t.incrs)&&t.incrs.forEach(b=>{!Dl.has(b)&&Dl.set(b,Na(b))}),t.incrs=Te(t.incrs||(o.distr==2?eu:f?X==1?lu:iu:Nl)),t.splits=Te(t.splits||(f&&o.distr==1?Me:o.distr==3?Bs:o.distr==4?Su:yu)),t.stroke=Te(t.stroke),t.grid.stroke=Te(t.grid.stroke),t.ticks.stroke=Te(t.ticks.stroke),t.border.stroke=Te(t.border.stroke);let g=t.values;t.values=Al(g)&&!Al(g[0])?Te(g):f?Al(g)?ia(q,sa(g,P)):ea(g)?ou(q,g):g||ve:g||bu,t.filter=Te(t.filter||(o.distr>=3&&o.log==10?Mu:o.distr==3&&o.log==2?Eu:Ra)),t.font=xa(t.font),t.labelFont=xa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(sl[s]=!0,t._el=ll(uo,_))}}function Ll(t,s,r,o){let[f,g,b,T]=r,C=s%2,B=0;return C==0&&(T||g)&&(B=s==0&&!f||s==2&&!b?wt(oa.size/3):0),C==1&&(f||b)&&(B=s==1&&!g||s==3&&!T?wt(fa.size/2):0),B}const Ln=n.padding=(e.padding||[Ll,Ll,Ll,Ll]).map(t=>Te(Pe(t,Ll))),fl=n._padding=Ln.map((t,s)=>t(n,s,sl,0));let Ft,Mt=null,Et=null;const Cn=a==1?y[0].idxs:null;let il=null,dn=!1;function ui(t,s){if(l=t??[],n.data=n._data=l,a==2){Ft=0;for(let r=1;r<y.length;r++)Ft+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),il=l[0],Ft=il.length;let r=l;if(V==2){r=l.slice();let o=r[0]=Array(Ft);for(let f=0;f<Ft;f++)o[f]=f}n._data=l=r}if(Wl(!0),Lt("setData"),V==2&&(se=!0),s!==!1){let r=w;r.auto(n,dn)?rs():Tl(L,r.min,r.max),de=de||U.left>=0,x=!0,Ul()}}n.setData=ui;function rs(){dn=!0;let t,s;a==1&&(Ft>0?(Mt=Cn[0]=0,Et=Cn[1]=Ft-1,t=l[0][Mt],s=l[0][Et],V==2?(t=Mt,s=Et):t==s&&(V==3?[t,s]=Xn(t,t,w.log,!1):V==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+wt(86400/X):[t,s]=jn(t,s,Xs,!0))):(Mt=Cn[0]=t=null,Et=Cn[1]=s=null)),Tl(L,t,s)}let Pn,Hl,os,us,cs,fs,ds,ps,vs,Wt;function ci(t,s,r,o,f,g){t??=Oi,r??=ti,o??="butt",f??=Oi,g??="round",t!=Pn&&(m.strokeStyle=Pn=t),f!=Hl&&(m.fillStyle=Hl=f),s!=os&&(m.lineWidth=os=s),g!=cs&&(m.lineJoin=cs=g),o!=fs&&(m.lineCap=fs=o),r!=us&&m.setLineDash(us=r)}function fi(t,s,r,o){s!=Hl&&(m.fillStyle=Hl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,dn)&&(s==null||s.min==null)){let g=Pe(Mt,0),b=Pe(Et,o.length-1),T=r.min==null?Mo(o,g,b,f,t.distr==3):[r.min,r.max];t.min=cl(t.min,r.min=T[0]),t.max=Bt(t.max,r.max=T[1])}}const di={min:null,max:null};function pr(){for(let o in A){let f=A[o];M[o]==null&&(f.min==null||M[L]!=null&&f.auto(n,dn))&&(M[o]=di)}for(let o in A){let f=A[o];M[o]==null&&f.from!=null&&M[f.from]!=null&&(M[o]=di)}M[L]!=null&&Wl(!0);let t={};for(let o in M){let f=M[o];if(f!=null){let g=t[o]=an(A[o],No);if(f.min!=null)pt(g,f);else if(o!=L||a==2)if(Ft==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=Ue,g.max=-Ue}}if(Ft>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,b=M[g];if(b==null)return;let T=t[g];if(f==0){let C=T.range(n,T.min,T.max,g);T.min=C[0],T.max=C[1],Mt=ul(T.min,l[0]),Et=ul(T.max,l[0]),Et-Mt>1&&(l[0][Mt]<T.min&&Mt++,l[0][Et]>T.max&&Et--),o.min=il[Mt],o.max=il[Et]}else o.show&&o.auto&&hs(T,b,o,l[f],o.sorted);o.idxs[0]=Mt,o.idxs[1]=Et}else if(f>0&&o.show&&o.auto){let[g,b]=o.facets,T=g.scale,C=b.scale,[B,W]=l[f],Z=t[T],pe=t[C];Z!=null&&hs(Z,M[T],g,B,g.sorted),pe!=null&&hs(pe,M[C],b,W,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],g=M[o];if(f.from==null&&(g==null||g.min==null)){let b=f.range(n,f.min==Ue?null:f.min,f.max==-Ue?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let b=f.range(n,g.min,g.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=A[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let b=g.distr;g._min=b==3?xl(g.min):b==4?Cs(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?xl(g.max):b==4?Cs(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)se=!0,Lt("setScale",o);je&&U.left>=0&&(de=x=!0)}for(let o in M)M[o]=null}function vr(t){let s=Is(Mt-1,0,Ft-1),r=Is(Et+1,0,Ft-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Ft-1;)r++;return[s,r]}function hr(){if(Ft>0){let t=y.some(s=>s._focus)&&Wt!=rt.alpha;t&&(m.globalAlpha=Wt=rt.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(pi(r,!1),pi(r,!0),s._paths==null)){let o=Wt;Wt!=s.alpha&&(m.globalAlpha=Wt=s.alpha);let f=a==2?[0,l[r][0].length-1]:vr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Wt!=o&&(m.globalAlpha=Wt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=Wt;Wt!=s.alpha&&(m.globalAlpha=Wt=s.alpha),s._paths!=null&&vi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Mt,Et,f),b=s.points.filter(n,r,g,f);(g||b)&&(s.points._paths=s.points.paths(n,r,Mt,Et,b),vi(r,!0))}Wt!=o&&(m.globalAlpha=Wt=o),Lt("drawSeries",r)}}),t&&(m.globalAlpha=Wt=1)}}function pi(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function vi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:b,_stroke:T=r._stroke,_fill:C=r._fill,_width:B=r.width}=r._paths;B=Ye(B*Ne,3);let W=null,Z=B%2/2;s&&C==null&&(C=B>0?"#fff":T);let pe=r.pxAlign==1&&Z>0;if(pe&&m.translate(Z,Z),!s){let Fe=at-B/2,Ce=_t-B/2,Se=F+B,ce=I+B;W=new Path2D,W.rect(Fe,Ce,Se,ce)}s?gs(T,B,r.dash,r.cap,C,o,f,b,g):gr(t,T,B,r.dash,r.cap,C,o,f,b,W,g),pe&&m.translate(-Z,-Z)}function gr(t,s,r,o,f,g,b,T,C,B,W){let Z=!1;C!=0&&R.forEach((pe,Fe)=>{if(pe.series[0]==t){let Ce=y[pe.series[1]],Se=l[pe.series[1]],ce=(Ce._paths||En).band;Al(ce)&&(ce=pe.dir==1?ce[0]:ce[1]);let ie,Ze=null;Ce.show&&ce&&Ao(Se,Mt,Et)?(Ze=pe.fill(n,Fe)||g,ie=Ce._paths.clip):ce=null,gs(s,r,o,f,Ze,b,T,C,B,W,ie,ce),Z=!0}}),Z||gs(s,r,o,f,g,b,T,C,B,W)}const hi=rn|Ws;function gs(t,s,r,o,f,g,b,T,C,B,W,Z){ci(t,s,r,o,f),(C||B||Z)&&(m.save(),C&&m.clip(C),B&&m.clip(B)),Z?(T&hi)==hi?(m.clip(Z),W&&m.clip(W),Fn(f,b),Rn(t,g,s)):T&Ws?(Fn(f,b),m.clip(Z),Rn(t,g,s)):T&rn&&(m.save(),m.clip(Z),W&&m.clip(W),Fn(f,b),m.restore(),Rn(t,g,s)):(Fn(f,b),Rn(t,g,s)),(C||B||Z)&&m.restore()}function Rn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Pn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Fn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Hl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=K[t],g;if(o<=0)g=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);g=Ju(s,r,T,o,b)}return f._found=g}function ms(t,s,r,o,f,g,b,T,C,B){let W=b%2/2;Y==1&&m.translate(W,W),ci(T,b,C,B,T),m.beginPath();let Z,pe,Fe,Ce,Se=f+(o==0||o==3?-g:g);r==0?(pe=f,Ce=Se):(Z=f,Fe=Se);for(let ce=0;ce<t.length;ce++)s[ce]!=null&&(r==0?Z=Fe=t[ce]:pe=Ce=t[ce],m.moveTo(Z,pe),m.lineTo(Fe,Ce));m.stroke(),Y==1&&m.translate(-W,-W)}function _r(t){let s=!0;return K.forEach((r,o)=>{if(!r.show)return;let f=A[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Wl(!1));return}else r._show||(s=!1,r._show=!0,Wl(!1));let g=r.side,b=g%2,{min:T,max:C}=f,[B,W]=mr(o,T,C,b==0?fe:O);if(W==0)return;let Z=f.distr==2,pe=r._splits=r.splits(n,o,T,C,B,W,Z),Fe=f.distr==2?pe.map(ie=>il[ie]):pe,Ce=f.distr==2?il[pe[1]]-il[pe[0]]:B,Se=r._values=r.values(n,r.filter(n,Fe,o,W,Ce),o,W,Ce);r._rotate=g==2?r.rotate(n,Se,o,W):0;let ce=r._size;r._size=nl(r.size(n,Se,o,t)),ce!=null&&r._size!=ce&&(s=!1)}),s}function wr(t){let s=!0;return Ln.forEach((r,o)=>{let f=r(n,o,sl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function xr(){for(let t=0;t<K.length;t++){let s=K[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,b=s.stroke(n,t),T=r==0||r==3?-1:1,[C,B]=s._found;if(s.label!=null){let Vt=s.labelGap*T,Jt=wt((s._lpos+Vt)*Ne);fi(s.labelFont[0],b,"center",r==2?wn:Gi),m.save(),o==1?(f=g=0,m.translate(Jt,wt(_t+I/2)),m.rotate((r==3?-Hn:Hn)/2)):(f=wt(at+F/2),g=Jt);let Rl=Ca(s.label)?s.label(n,t,C,B):s.label;m.fillText(Rl,f,g),m.restore()}if(B==0)continue;let W=A[s.scale],Z=o==0?F:I,pe=o==0?at:_t,Fe=s._splits,Ce=W.distr==2?Fe.map(Vt=>il[Vt]):Fe,Se=W.distr==2?il[Fe[1]]-il[Fe[0]]:C,ce=s.ticks,ie=s.border,Ze=ce.show?ce.size:0,ot=wt(Ze*Ne),Ct=wt((s.alignTo==2?s._size-Ze-s.gap:s.gap)*Ne),Be=s._rotate*-Hn/180,ut=j(s._pos*Ne),jt=(ot+Ct)*T,zt=ut+jt;g=o==0?zt:0,f=o==1?zt:0;let el=s.font[0],al=s.align==1?Ql:s.align==2?As:Be>0?Ql:Be<0?As:o==0?"center":r==3?As:Ql,vl=Be||o==1?"middle":r==2?wn:Gi;fi(el,b,al,vl);let Kt=s.font[1]*s.lineGap,tl=Fe.map(Vt=>j(p(Vt,W,Z,pe))),rl=s._values;for(let Vt=0;Vt<rl.length;Vt++){let Jt=rl[Vt];if(Jt!=null){o==0?f=tl[Vt]:g=tl[Vt],Jt=""+Jt;let Rl=Jt.indexOf(`
`)==-1?[Jt]:Jt.split(/\n/gm);for(let It=0;It<Rl.length;It++){let Fi=Rl[It];Be?(m.save(),m.translate(f,g+It*Kt),m.rotate(Be),m.fillText(Fi,0,0),m.restore()):m.fillText(Fi,f,g+It*Kt)}}}ce.show&&ms(tl,ce.filter(n,Ce,t,B,Se),o,r,ut,ot,Ye(ce.width*Ne,3),ce.stroke(n,t),ce.dash,ce.cap);let hl=s.grid;hl.show&&ms(tl,hl.filter(n,Ce,t,B,Se),o,o==0?2:1,o==0?_t:at,o==0?I:F,Ye(hl.width*Ne,3),hl.stroke(n,t),hl.dash,hl.cap),ie.show&&ms([ut],[1],o==0?1:0,o==0?1:2,o==1?_t:at,o==1?I:F,Ye(ie.width*Ne,3),ie.stroke(n,t),ie.dash,ie.cap)}Lt("drawAxes")}function Wl(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Nn=!1,_s=!1,pn=[];function br(){_s=!1;for(let t=0;t<pn.length;t++)Lt(...pn[t]);pn.length=0}function Ul(){Nn||(Ho(gi),Nn=!0)}function yr(t,s=!1){Nn=!0,_s=s,t(n),gi(),s&&pn.length>0&&queueMicrotask(br)}n.batch=yr;function gi(){if(ae&&(pr(),ae=!1),se&&(Re(),se=!1),oe){if(Qe(N,Ql,ye),Qe(N,wn,We),Qe(N,yn,fe),Qe(N,Sn,O),Qe(k,Ql,ye),Qe(k,wn,We),Qe(k,yn,fe),Qe(k,Sn,O),Qe(_,yn,Gt),Qe(_,Sn,mt),S.width=wt(Gt*Ne),S.height=wt(mt*Ne),K.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,b=f%2==1;Qe(t,b?"left":"top",o-g),Qe(t,b?"width":"height",r),Qe(t,b?"top":"left",b?We:ye),Qe(t,b?"height":"width",b?O:fe),zs(t,Gl)}else $t(t,Gl)}),Pn=Hl=os=cs=fs=ds=ps=vs=us=null,Wt=1,gn(!0),ye!=Ut||We!=Yt||fe!=Tt||O!=Ot){Wl(!1);let t=fe/Tt,s=O/Ot;if(je&&!de&&U.left>=0){U.left*=t,U.top*=s,Yl&&gl(Yl,wt(U.left),0,fe,O),ql&&gl(ql,0,wt(U.top),fe,O);for(let r=0;r<Ee.length;r++){let o=Ee[r];o!=null&&(ft[r]*=t,qt[r]*=s,gl(o,nl(ft[r]),nl(qt[r]),fe,O))}}if($e.show&&!re&&$e.left>=0&&$e.width>0){$e.left*=t,$e.width*=t,$e.top*=s,$e.height*=s;for(let r in ks)Qe(Jl,r,$e[r])}Ut=ye,Yt=We,Tt=fe,Ot=O}Lt("setSize"),oe=!1}Gt>0&&mt>0&&(m.clearRect(0,0,S.width,S.height),Lt("drawClear"),J.forEach(t=>t()),Lt("draw")),$e.show&&re&&(Gn($e),re=!1),je&&de&&(Pl(null,!0,!1),de=!1),ne.show&&ne.live&&x&&(ys(),x=!1),v||(v=!0,n.status=1,Lt("ready")),dn=!1,Nn=!1}n.redraw=(t,s)=>{se=s||!1,t!==!1?Tl(L,w.min,w.max):Ul()};function ws(t,s){let r=A[t];if(r.from==null){if(Ft==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Ft>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&Ft>0&&(s.min=ul(s.min,l[0]),s.max=ul(s.max,l[0]),s.min==s.max&&s.max++),M[t]=s,ae=!0,Ul()}}n.setScale=ws;let xs,bs,Yl,ql,mi,_i,jl,Kl,wi,xi,Je,et,kl=!1;const Nt=U.drag;let At=Nt.x,Dt=Nt.y;je&&(U.x&&(xs=ll(fo,k)),U.y&&(bs=ll(po,k)),w.ori==0?(Yl=xs,ql=bs):(Yl=bs,ql=xs),Je=U.left,et=U.top);const $e=n.select=pt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Jl=$e.show?ll(co,$e.over?k:N):null;function Gn(t,s){if($e.show){for(let r in t)$e[r]=t[r],r in ks&&Qe(Jl,r,t[r]);s!==!1&&Lt("setSelect")}}n.setSelect=Gn;function Sr(t){if(y[t].show)De&&zs(ke[t],Gl);else if(De&&$t(ke[t],Gl),je){let r=Ie?Ee[0]:Ee[t];r!=null&&gl(r,-10,-10,fe,O)}}function Tl(t,s,r){ws(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Ar(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,Sr(g),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Ul())}),r!==!1&&Lt("setSeries",t,s),o&&mn("setSeries",n,t,s)}n.setSeries=dl;function kr(t,s){pt(R[t],s)}function Tr(t,s){t.fill=Te(t.fill||null),t.dir=Pe(t.dir,-1),s=s??R.length,R.splice(s,0,t)}function Mr(t){t==null?R.length=0:R.splice(t,1)}n.addBand=Tr,n.setBand=kr,n.delBand=Mr;function Er(t,s){y[t].alpha=s,je&&Ee[t]!=null&&(Ee[t].style.opacity=s),De&&ke[t]&&(ke[t].style.opacity=s)}let _l,Ml,Cl;const $l={focus:!0};function Ar(t){if(t!=Cl){let s=t==null,r=rt.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:rt.alpha)}}),Cl=t,r&&Ul()}}De&&Le&&He(Ii,me,t=>{U._lock||(Rt(t),Cl!=null&&dl(null,$l,!0,dt.setSeries))});function pl(t,s,r){let o=A[s];r&&(t=t/Ne-(o.ori==1?We:ye));let f=fe;o.ori==1&&(f=O,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,b=o._max,T=t/f,C=g+(b-g)*T,B=o.distr;return B==3?nn(10,C):B==4?Lo(C,o.asinh):B==100?o.bwd(C):C}function Dr(t,s){let r=pl(t,L,s);return ul(r,l[0],Mt,Et)}n.valToIdx=t=>ul(t,l[0]),n.posToIdx=Dr,n.posToVal=pl,n.valToPos=(t,s,r)=>A[s].ori==0?c(t,A[s],r?F:fe,r?at:0):u(t,A[s],r?I:O,r?_t:0),n.setCursor=(t,s,r)=>{Je=t.left,et=t.top,Pl(null,s,r)};function bi(t,s){Qe(Jl,Ql,$e.left=t),Qe(Jl,yn,$e.width=s)}function yi(t,s){Qe(Jl,wn,$e.top=t),Qe(Jl,Sn,$e.height=s)}let vn=w.ori==0?bi:yi,hn=w.ori==1?bi:yi;function Lr(){if(De&&ne.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&Ke)continue;let s=ne.values[t],r=0;for(let o in s)st[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{he[o]=r}):Fo(t.idx)||he.fill(t.idx),ne.idx=he[0]),De&&ne.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!Ke)&&Cr(r,he[r]);Lr()}x=!1,s!==!1&&Lt("setLegend")}n.setLegend=ys;function Cr(t,s){let r=y[t],o=t==0&&V==2?il:l[t],f;Ke?f=r.values(n,t,s)??tt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?tt:{_:f}),ne.values[t]=f}function Pl(t,s,r){wi=Je,xi=et,[Je,et]=U.move(n,Je,et),U.left=Je,U.top=et,je&&(Yl&&gl(Yl,wt(Je),0,fe,O),ql&&gl(ql,0,wt(et),fe,O));let o,f=Mt>Et;_l=Ue,Ml=null;let g=w.ori==0?fe:O,b=w.ori==1?fe:O;if(Je<0||Ft==0||f){o=U.idx=null;for(let T=0;T<y.length;T++){let C=Ee[T];C!=null&&gl(C,-10,-10,fe,O)}Le&&dl(null,$l,!0,t==null&&dt.setSeries),ne.live&&(he.fill(o),x=!0)}else{let T,C,B;a==1&&(T=w.ori==0?Je:et,C=pl(T,L),o=U.idx=ul(C,l[0],Mt,Et),B=G(l[0][o],w,g,0));let W=-10,Z=-10,pe=0,Fe=0,Ce=!0,Se="",ce="";for(let ie=a==2?1:0;ie<y.length;ie++){let Ze=y[ie],ot=he[ie],Ct=ot==null?null:a==1?l[ie][ot]:l[ie][1][ot],Be=U.dataIdx(n,ie,o,C),ut=Be==null?null:a==1?l[ie][Be]:l[ie][1][Be];if(x=x||ut!=Ct||Be!=ot,he[ie]=Be,ie>0&&Ze.show){let jt=Be==null?-10:Be==o?B:G(a==1?l[0][Be]:l[ie][0][Be],w,g,0),zt=ut==null?-10:Q(ut,a==1?A[Ze.scale]:A[Ze.facets[1].scale],b,0);if(Le&&ut!=null){let el=w.ori==1?Je:et,al=xt(rt.dist(n,ie,Be,zt,el));if(al<_l){let vl=rt.bias;if(vl!=0){let Kt=pl(el,Ze.scale),tl=ut>=0?1:-1,rl=Kt>=0?1:-1;rl==tl&&(rl==1?vl==1?ut>=Kt:ut<=Kt:vl==1?ut<=Kt:ut>=Kt)&&(_l=al,Ml=ie)}else _l=al,Ml=ie}}if(x||Ie){let el,al;w.ori==0?(el=jt,al=zt):(el=zt,al=jt);let vl,Kt,tl,rl,hl,Vt,Jt=!0,Rl=Xe.bbox;if(Rl!=null){Jt=!1;let It=Rl(n,ie);tl=It.left,rl=It.top,vl=It.width,Kt=It.height}else tl=el,rl=al,vl=Kt=Xe.size(n,ie);if(Vt=Xe.fill(n,ie),hl=Xe.stroke(n,ie),Ie)ie==Ml&&_l<=rt.prox&&(W=tl,Z=rl,pe=vl,Fe=Kt,Ce=Jt,Se=Vt,ce=hl);else{let It=Ee[ie];It!=null&&(ft[ie]=tl,qt[ie]=rl,ji(It,vl,Kt,Jt),Yi(It,Vt,hl),gl(It,nl(tl),nl(rl),fe,O))}}}}if(Ie){let ie=rt.prox,Ze=Cl==null?_l<=ie:_l>ie||Ml!=Cl;if(x||Ze){let ot=Ee[0];ot!=null&&(ft[0]=W,qt[0]=Z,ji(ot,pe,Fe,Ce),Yi(ot,Se,ce),gl(ot,nl(W),nl(Z),fe,O))}}}if($e.show&&kl)if(t!=null){let[T,C]=dt.scales,[B,W]=dt.match,[Z,pe]=t.cursor.sync.scales,Fe=t.cursor.drag;if(At=Fe._x,Dt=Fe._y,At||Dt){let{left:Ce,top:Se,width:ce,height:ie}=t.select,Ze=t.scales[Z].ori,ot=t.posToVal,Ct,Be,ut,jt,zt,el=T!=null&&B(T,Z),al=C!=null&&W(C,pe);el&&At?(Ze==0?(Ct=Ce,Be=ce):(Ct=Se,Be=ie),ut=A[T],jt=G(ot(Ct,Z),ut,g,0),zt=G(ot(Ct+Be,Z),ut,g,0),vn(cl(jt,zt),xt(zt-jt))):vn(0,g),al&&Dt?(Ze==1?(Ct=Ce,Be=ce):(Ct=Se,Be=ie),ut=A[C],jt=Q(ot(Ct,pe),ut,b,0),zt=Q(ot(Ct+Be,pe),ut,b,0),hn(cl(jt,zt),xt(zt-jt))):hn(0,b)}else Ts()}else{let T=xt(wi-mi),C=xt(xi-_i);if(w.ori==1){let pe=T;T=C,C=pe}At=Nt.x&&T>=Nt.dist,Dt=Nt.y&&C>=Nt.dist;let B=Nt.uni;B!=null?At&&Dt&&(At=T>=B,Dt=C>=B,!At&&!Dt&&(C>T?Dt=!0:At=!0)):Nt.x&&Nt.y&&(At||Dt)&&(At=Dt=!0);let W,Z;At&&(w.ori==0?(W=jl,Z=Je):(W=Kl,Z=et),vn(cl(W,Z),xt(Z-W)),Dt||hn(0,b)),Dt&&(w.ori==1?(W=jl,Z=Je):(W=Kl,Z=et),hn(cl(W,Z),xt(Z-W)),At||vn(0,g)),!At&&!Dt&&(vn(0,0),hn(0,0))}if(Nt._x=At,Nt._y=Dt,t==null){if(r){if(Ri!=null){let[T,C]=dt.scales;dt.values[0]=T!=null?pl(w.ori==0?Je:et,T):null,dt.values[1]=C!=null?pl(w.ori==1?Je:et,C):null}mn(Ds,n,Je,et,fe,O,o)}if(Le){let T=r&&dt.setSeries,C=rt.prox;Cl==null?_l<=C&&dl(Ml,$l,!0,T):_l>C?dl(null,$l,!0,T):Ml!=Cl&&dl(Ml,$l,!0,T)}}x&&(ne.idx=o,ys()),s!==!1&&Lt("setCursor")}let El=null;Object.defineProperty(n,"rect",{get(){return El==null&&gn(!1),El}});function gn(t=!1){t?El=null:(El=k.getBoundingClientRect(),Lt("syncRect",El))}function Si(t,s,r,o,f,g,b){U._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,b,!1,t!=null),t!=null?Pl(null,!0,!0):Pl(s,!0,!1))}function Ss(t,s,r,o,f,g,b,T,C){if(El==null&&gn(!1),Rt(t),t!=null)r=t.clientX-El.left,o=t.clientY-El.top;else{if(r<0||o<0){Je=-10,et=-10;return}let[B,W]=dt.scales,Z=s.cursor.sync,[pe,Fe]=Z.values,[Ce,Se]=Z.scales,[ce,ie]=dt.match,Ze=s.axes[0].side%2==1,ot=w.ori==0?fe:O,Ct=w.ori==1?fe:O,Be=Ze?g:f,ut=Ze?f:g,jt=Ze?o:r,zt=Ze?r:o;if(Ce!=null?r=ce(B,Ce)?p(pe,A[B],ot,0):-10:r=ot*(jt/Be),Se!=null?o=ie(W,Se)?p(Fe,A[W],Ct,0):-10:o=Ct*(zt/ut),w.ori==1){let el=r;r=o,o=el}}C&&(s==null||s.cursor.event.type==Ds)&&((r<=1||r>=fe-1)&&(r=Fl(r,fe)),(o<=1||o>=O-1)&&(o=Fl(o,O))),T?(mi=r,_i=o,[jl,Kl]=U.move(n,r,o)):(Je=r,et=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){Gn(ks,!1)}let ki,Ti,Mi,Ei;function Ai(t,s,r,o,f,g,b){kl=!0,At=Dt=Nt._x=Nt._y=!1,Ss(t,s,r,o,f,g,b,!0,!1),t!=null&&(He(Ls,Gs,Di,!1),mn(zi,n,jl,Kl,fe,O,null));let{left:T,top:C,width:B,height:W}=$e;ki=T,Ti=C,Mi=B,Ei=W}function Di(t,s,r,o,f,g,b){kl=Nt._x=Nt._y=!1,Ss(t,s,r,o,f,g,b,!1,!0);let{left:T,top:C,width:B,height:W}=$e,Z=B>0||W>0,pe=ki!=T||Ti!=C||Mi!=B||Ei!=W;if(Z&&pe&&Gn($e),Nt.setScale&&Z&&pe){let Fe=T,Ce=B,Se=C,ce=W;if(w.ori==1&&(Fe=C,Ce=W,Se=T,ce=B),At&&Tl(L,pl(Fe,L),pl(Fe+Ce,L)),Dt)for(let ie in A){let Ze=A[ie];ie!=L&&Ze.from==null&&Ze.min!=Ue&&Tl(ie,pl(Se+ce,ie),pl(Se,ie))}Ts()}else U.lock&&(U._lock=!U._lock,Pl(s,!0,t!=null));t!=null&&(kt(Ls,Gs),mn(Ls,n,Je,et,fe,O,null))}function Pr(t,s,r,o,f,g,b){if(U._lock)return;Rt(t);let T=kl;if(kl){let C=!0,B=!0,W=10,Z,pe;w.ori==0?(Z=At,pe=Dt):(Z=Dt,pe=At),Z&&pe&&(C=Je<=W||Je>=fe-W,B=et<=W||et>=O-W),Z&&C&&(Je=Je<jl?0:fe),pe&&B&&(et=et<Kl?0:O),Pl(null,!0,!0),kl=!1}Je=-10,et=-10,he.fill(null),Pl(null,!0,!0),T&&(kl=T)}function Li(t,s,r,o,f,g,b){U._lock||(Rt(t),rs(),Ts(),t!=null&&mn(Bi,n,Je,et,fe,O,null))}function Ci(){K.forEach($u),z(n.width,n.height,!0)}Vl(qn,ln,Ci);const Zl={};Zl.mousedown=Ai,Zl.mousemove=Si,Zl.mouseup=Di,Zl.dblclick=Li,Zl.setSeries=(t,s,r,o)=>{let f=dt.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},je&&(He(zi,k,Ai),He(Ds,k,Si),He(Vi,k,t=>{Rt(t),gn(!1)}),He(Ii,k,Pr),He(Bi,k,Li),Us.add(n),n.syncRect=gn);const On=n.hooks=e.hooks||{};function Lt(t,s,r){_s?pn.push([t,s,r]):t in On&&On[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)On[s]=(On[s]||[]).concat(t.hooks[s])});const Pi=(t,s,r)=>r,dt=pt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[L,y[1]?y[1].scale:null],match:[Xi,Xi,Pi],values:[null,null]},U.sync);dt.match.length==2&&dt.match.push(Pi),U.sync=dt;const Ri=dt.key,Ms=tr(Ri);function mn(t,s,r,o,f,g,b){dt.filters.pub(t,s,r,o,f,g,b)&&Ms.pub(t,s,r,o,f,g,b)}Ms.sub(n);function Rr(t,s,r,o,f,g,b){dt.filters.sub(t,s,r,o,f,g,b)&&Zl[t](null,s,r,o,f,g,b)}n.pub=Rr;function Fr(){Ms.unsub(n),Us.delete(n),gt.clear(),Vs(qn,ln,Ci),h.remove(),me?.remove(),Lt("destroy")}n.destroy=Fr;function Es(){Lt("init",e,l),ui(l||e.data,!1),M[L]?ws(L,M[L]):rs(),re=$e.show&&($e.width>0||$e.height>0),de=x=!0,z(e.width,e.height)}return y.forEach(Sl),K.forEach(as),i?i instanceof HTMLElement?(i.appendChild(h),Es()):i(n,Es):Es(),n}bt.assign=pt;bt.fmtNum=ei;bt.rangeNum=jn;bt.rangeLog=Xn;bt.rangeAsinh=Qs;bt.orient=Bl;bt.pxRatio=Ne;bt.join=Bo;bt.fmtDate=li,bt.tzDate=Qo;bt.sync=tr;{bt.addGap=Fu,bt.clipGaps=ls;let e=bt.paths={points:rr};e.linear=ur,e.stepped=Ou,e.bars=zu,e.spline=Iu}var Zu=Ge('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Qu=Ge('<span class="estimated-badge svelte-3wi8ix">est</span>'),Xu=Ge('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=Ge('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),tc=Ge('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),lc=Ge('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function nc(e,l){$n(l,!0);const i=.5,n=1.2,a=32,c=212;function u(w,V){const G=[...w].sort((P,Me)=>P-Me),Q=V/100*(G.length-1),M=Math.floor(Q),q=Math.ceil(Q);return M===q?G[M]:G[M]+(G[q]-G[M])*(Q-M)}let p=tn(l,"trend",3,null),v=qe(!1),h=qe(""),S=qe(null),m=ze(()=>Bn.config.temp_units==="C"),_=ze(Ma),N=ze(Ks),k=ze(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(we=>we.status!=="invalid");if(w.length===0)return null;const V=[...w].sort((we,lt)=>new Date(we.timestamp).getTime()-new Date(lt.timestamp).getTime()),G=V[0],Q=V[V.length-1],M=V.map(we=>we.sg_calibrated??we.sg_raw).filter(we=>we!==null&&we>=i&&we<=n),q=V.map(we=>we.temp_calibrated??we.temp_raw).filter(we=>we!==null&&we>=a&&we<=c);if(M.length===0)return null;const P=M[M.length-1],Me=M[0],ve=u(M,95),ue=u(M,5),he=new Date(G.timestamp).getTime(),ne=new Date(Q.timestamp).getTime(),De=(ne-he)/(1e3*60*60*24),je=De>0?(P-Me)/De:0;let xe=null,me=null,nt=null,Ve=null;if(q.length>0){const we=q[q.length-1],lt=q.reduce((He,kt)=>He+kt,0)/q.length,it=u(q,95),gt=u(q,5);xe=d(m)?bn(we):we,me=d(m)?bn(lt):lt,nt=d(m)?bn(it):it,Ve=d(m)?bn(gt):gt}let ke=0;const st=.001;for(let we=M.length-2;we>=0;we--)if(Math.abs(M[we]-P)>st){const lt=new Date(V[we+1].timestamp).getTime();ke=(ne-lt)/(1e3*60*60*24);break}let ct=null,Ke=null;const tt=l.originalGravity??ve,St=l.originalGravity===null;return tt>1&&tt>P&&(ct=(tt-P)/(tt-1)*100,Ke=(tt-P)*131.25),{currentSg:P,firstSg:Me,highSg:ve,lowSg:ue,currentTemp:xe,avgTemp:me,highTemp:nt,lowTemp:Ve,fermRate:je,durationDays:De,daysAtCurrentSg:ke,apparentAttenuation:ct,abv:Ke,ogIsEstimated:St,effectiveOg:tt}});function Y(){ge(h,l.originalGravity?.toFixed(3)??"",!0),ge(v,!0),setTimeout(()=>d(S)?.focus(),0)}function j(){const w=d(h).trim();if(!w)l.onOgChange(null);else{const V=parseFloat(w);!isNaN(V)&&V>=.99&&V<=1.2&&l.onOgChange(V)}ge(v,!1)}function X(w){w.key==="Enter"?j():w.key==="Escape"&&ge(v,!1)}function y(w){return js(w)}function K(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function A(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function R(w){return w===null?"--":w.toFixed(1)}function L(w){return w===null?"--":`${w.toFixed(1)}%`}var le=Wn(),J=Ol(le);{var $=w=>{var V=tc(),G=D(V),Q=D(G),M=D(Q),q=D(M,!0);E(M);var P=H(M,2),Me=H(D(P),2),ve=D(Me,!0);E(Me),E(P);var ue=H(P,2),he=H(D(ue),2),ne=D(he,!0);E(he),E(ue);var U=H(ue,2),De=H(D(U),2),je=D(De,!0);E(De),E(U);var xe=H(U,2),me=H(D(xe),2),nt=D(me,!0);E(me),E(xe),E(Q);var Ve=H(Q,2),ke=H(D(Ve),2),st=H(D(ke),2),ct=D(st,!0),Ke=H(ct),tt=D(Ke,!0);E(Ke),E(st),E(ke);var St=H(ke,2),we=H(D(St),2),lt=D(we,!0),it=H(lt),gt=D(it,!0);E(it),E(we),E(St);var He=H(St,2),kt=H(D(He),2),Gt=D(kt,!0),mt=H(Gt),fe=D(mt,!0);E(mt),E(kt),E(He);var O=H(He,2),ye=H(D(O),2),We=D(ye,!0),Ut=H(We),Yt=D(Ut,!0);E(Ut),E(ye),E(O),E(Ve),E(G);var Tt=H(G,2),Ot=D(Tt),at=H(D(Ot),2);let _t;var F=D(at);E(at),E(Ot);var I=H(Ot,2),ae=H(D(I),2),oe=D(ae,!0);E(ae),E(I);var se=H(I,2),de=H(D(se),2),re=D(de,!0);E(de),E(se);var x=H(se,2),z=H(D(x),2);{var ee=Ie=>{var Ee=Zu();ka(Ee),Ee.__keydown=X,qs(Ee,ft=>ge(S,ft),()=>d(S)),ba("blur",Ee,j),Ta(Ee,()=>d(h),ft=>ge(h,ft)),Ae(Ie,Ee)},_e=Ie=>{var Ee=Xu();Ee.__click=Y;var ft=D(Ee);let qt;var yl=D(ft,!0);E(ft);var Sl=H(ft,2);{var fn=ml=>{var sl=Qu();Ae(ml,sl)};ht(Sl,ml=>{d(k).ogIsEstimated&&ml(fn)})}zl(2),E(Ee),vt(ml=>{en(Ee,"title",d(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),qt=wl(ft,1,"stat-value svelte-3wi8ix",null,qt,{estimated:d(k).ogIsEstimated}),be(yl,ml)},[()=>y(d(k).effectiveOg)]),Ae(Ie,Ee)};ht(z,Ie=>{d(v)?Ie(ee):Ie(_e,!1)})}E(x);var Re=H(x,2),Pt=H(D(Re),2),Xt=D(Pt,!0);E(Pt),E(Re);var Ht=H(Re,2),Rt=H(D(Ht),2),Xe=D(Rt,!0);E(Rt),E(Ht);var rt=H(Ht,2);{var Le=Ie=>{var Ee=ec(),ft=H(D(Ee),2),qt=D(ft,!0);E(ft),zl(2),E(Ee),vt((yl,Sl)=>{en(Ee,"title",`Estimated time until target FG (R=${yl??""})`),be(qt,Sl)},[()=>p().r2.toFixed(2),()=>A(p().daysToFg)]),Ae(Ie,Ee)};ht(rt,Ie=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Ie(Le)})}E(Tt),E(V),vt((Ie,Ee,ft,qt,yl,Sl,fn,ml,sl,as,Ll,Ln,fl)=>{be(q,d(N)==="SG"?"Gravity":d(N)==="P"?"Plato":"Brix"),be(ve,Ie),be(ne,Ee),be(je,ft),be(nt,qt),be(ct,yl),be(tt,d(_)),be(lt,Sl),be(gt,d(_)),be(Gt,fn),be(fe,d(_)),be(We,ml),be(Yt,d(_)),_t=wl(at,1,"stat-value rate svelte-3wi8ix",null,_t,{fermenting:d(k).fermRate<0}),be(F,`${sl??""}/day`),be(oe,as),be(re,Ll),be(Xt,Ln),be(Xe,fl)},[()=>y(d(k).currentSg),()=>y(d(k).firstSg),()=>y(d(k).highSg),()=>y(d(k).lowSg),()=>R(d(k).currentTemp),()=>R(d(k).avgTemp),()=>R(d(k).highTemp),()=>R(d(k).lowTemp),()=>K(d(k).fermRate),()=>A(d(k).durationDays),()=>A(d(k).daysAtCurrentSg),()=>L(d(k).apparentAttenuation),()=>L(d(k).abv)]),Ae(w,V)},te=w=>{var V=lc();Ae(w,V)};ht(J,w=>{d(k)?w($):w(te,!1)})}Ae(e,le),Zn()}Jn(["keydown","click"]);var sc=Ge('<button type="button"> </button>'),ic=Ge("<option> </option>"),ac=Ge('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),rc=Ge('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),oc=Ge('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uc=Ge('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function cc(e,l){$n(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=ze(()=>Bn.config.smoothing_enabled),c=ze(()=>Bn.config.smoothing_samples),u=qe("UTC"),p=qe(0),v=qe(3),h=tn(l,"deviceColor",3,"BLACK"),S=tn(l,"originalGravity",3,null),m=ze(()=>Bn.config.temp_units==="C"),_=ze(Ks),N,k=null,Y=qe(!0),j=qe(null),X=qe(24),y=qe(Un([])),K=qe(Un([])),A=qe(null),R=qe(null);const L={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},le="#facc15",J="rgba(250, 204, 21, 0.3)",$="#71717a",te="#a1a1aa",w="rgba(255, 255, 255, 0.04)",V="#22d3ee",G="rgba(250, 204, 21, 0.5)",Q="brewsignal_chart_trend_enabled";let M=qe(!0);function q(F,I,ae=1.01){const oe=[];for(let Le=0;Le<F.length;Le++)I[Le]!==null&&oe.push([F[Le],I[Le]]);if(oe.length<10)return null;const se=oe.length;let de=0,re=0,x=0,z=0;for(const[Le,Ie]of oe)de+=Le,re+=Ie,x+=Le*Ie,z+=Le*Le;const ee=se*z-de*de;if(Math.abs(ee)<1e-10)return null;const _e=(se*x-de*re)/ee,Re=(re-_e*de)/se,Pt=re/se;let Xt=0,Ht=0;for(const[Le,Ie]of oe){const Ee=_e*Le+Re;Xt+=(Ie-Ee)**2,Ht+=(Ie-Pt)**2}const Rt=Ht>0?1-Xt/Ht:0;let Xe=null,rt=null;if(_e<0&&Rt>.3){const Le=F[F.length-1],Ie=(ae-Re)/_e;Ie>Le&&(rt=(Ie-Le)/(1440*60),rt>0&&rt<60?Xe=ae:rt=null)}return{slope:_e,intercept:Re,r2:Rt,predictedFg:Xe,daysToFg:rt}}function P(F,I){return F.map(ae=>I.slope*ae+I.intercept)}function Me(F,I,ae){const oe=new Date(F*1e3);try{return ae?oe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:I}):oe.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:I})}catch(se){return console.warn("Invalid timezone:",I,se),ae?oe.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):oe.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function ve(F,I,ae){const oe=le,se=L[h()]||te;return{width:F,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(de,re,x)=>{const z=(x-re)*.1||.005;return[re-z,x+z]}},temp:{auto:!0,range:(de,re,x)=>{const z=x-re,ee=10;if(z<ee){const Re=(x+re)/2;return[Re-ee/2,Re+ee/2]}const _e=z*.1;return[re-_e,x+_e]}}},axes:[{stroke:$,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,re)=>re.map(x=>Me(x,ae,d(X)<=24))},{scale:"sg",stroke:oe,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,re)=>re.map(x=>js(x)),side:3},{scale:"temp",stroke:se,grid:{show:!1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(de,re)=>re.map(x=>x.toFixed(0)+""),side:1}],series:[{},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:oe,width:2,fill:(de,re)=>{const x=de.ctx.createLinearGradient(0,de.bbox.top,0,de.bbox.top+de.bbox.height);return x.addColorStop(0,J),x.addColorStop(1,"transparent"),x},points:{show:!1},paths:bt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:se,width:1.5,dash:[4,4],points:{show:!1},paths:bt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:V,width:1.5,dash:[2,4],points:{show:!1},paths:bt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:G,width:2,dash:[8,4],points:{show:!1},show:d(M)}]}}function ue(F,I){if(I<=1)return F;const ae=[];for(let oe=0;oe<F.length;oe++){const se=[],de=Math.floor(I/2);for(let re=Math.max(0,oe-de);re<=Math.min(F.length-1,oe+de);re++){const x=F[re];x!==null&&se.push(x)}se.length>0?ae.push(se.reduce((re,x)=>re+x,0)/se.length):ae.push(null)}return ae}function he(F,I,ae,oe,se){if(F.length<=se)return[F,I,ae,oe];const de=Math.ceil(F.length/se),re=[],x=[],z=[],ee=[];for(let _e=0;_e<F.length;_e+=de){const Re=Math.min(_e+de,F.length);let Pt=0,Xt=0,Ht=0,Rt=0,Xe=0,rt=0;for(let Le=_e;Le<Re;Le++)I[Le]!==null&&(Pt+=I[Le],Xt++),ae[Le]!==null&&(Ht+=ae[Le],Rt++),oe[Le]!==null&&(Xe+=oe[Le],rt++);re.push(F[Math.floor((_e+Re-1)/2)]),x.push(Xt>0?Pt/Xt:null),z.push(Rt>0?Ht/Rt:null),ee.push(rt>0?Xe/rt:null)}return[re,x,z,ee]}function ne(F){return!F.endsWith("Z")&&!F.match(/[+-]\d{2}:\d{2}$/)&&(F=F+"Z"),new Date(F).getTime()/1e3}function U(F,I,ae){if(F.length===0||I.length===0)return I.map(()=>null);const oe=[...F].sort((re,x)=>ne(re.timestamp)-ne(x.timestamp)),se=oe.map(re=>ne(re.timestamp)),de=oe.map(re=>re.temperature===null?null:ae?re.temperature:re.temperature*9/5+32);return I.map(re=>{let x=null,z=null;for(let ee=0;ee<se.length;ee++)if(se[ee]<=re&&(x={time:se[ee],temp:de[ee]}),se[ee]>=re&&z===null){z={time:se[ee],temp:de[ee]};break}if(x&&z&&x.temp!==null&&z.temp!==null){if(x.time===z.time)return x.temp;const ee=(re-x.time)/(z.time-x.time);return x.temp+ee*(z.temp-x.temp)}return x!==null&&x.temp!==null?x.temp:z!==null&&z.temp!==null?z.temp:null})}function De(F,I,ae){const oe=[...F].reverse();let se=[],de=[],re=[];for(const Re of oe){se.push(ne(Re.timestamp)),de.push(Re.sg_calibrated??Re.sg_raw);const Pt=Re.temp_calibrated??Re.temp_raw;Pt!==null?re.push(ae?bn(Pt):Pt):re.push(null)}let x=U(I,se,ae);d(a)&&d(c)>1&&(de=ue(de,d(c)),re=ue(re,d(c)),x=ue(x,d(c))),[se,de,re,x]=he(se,de,re,x,500);const ee=q(se,de);ge(A,ee,!0);const _e=ee?P(se,ee):se.map(()=>null);return[se,de,re,x,_e]}const je=3e4;async function xe(F=!1){const ae=Date.now()-d(p);if(!(!F&&d(p)>0&&ae<je)){ge(Y,!0),ge(j,null);try{if(!d(R)){const oe=await qr(l.batchId);ge(R,oe.device_id??null,!0)}if(d(R)){const[oe,se]=await Promise.all([jr(d(R),d(X)),Kr(d(X)).catch(()=>[])]);ge(y,oe,!0),ge(K,se,!0),me()}else ge(y,[],!0),ge(K,[],!0),ge(j,"No device assigned to this batch")}catch(oe){ge(j,oe instanceof Error?oe.message:"Failed to load data",!0)}finally{ge(p,Date.now(),!0),ge(Y,!1)}}}function me(){if(!N||d(y).length===0)return;const F=De(d(y),d(K),d(m)),I=ve(N.clientWidth,d(m),d(u));k&&k.destroy(),k=new bt(I,F,N)}function nt(){k&&N&&k.setSize({width:N.clientWidth,height:220})}let Ve=null;function ke(){if(Ve&&(clearInterval(Ve),Ve=null),d(v)>0){const F=d(v)*60*1e3;Ve=setInterval(()=>{d(Y)||xe(!1)},F)}}ya(async()=>{const F=localStorage.getItem(i);if(F!==null){const ae=parseInt(F,10);Number.isNaN(ae)||ge(v,ae,!0)}const I=localStorage.getItem(Q);I!==null&&ge(M,I==="true");try{const ae=await fetch("/api/system/timezone");if(ae.ok){const oe=await ae.json();ge(u,oe.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await xe(!0),window.addEventListener("resize",nt),ke()}),Vr(()=>{k?.destroy(),window.removeEventListener("resize",nt),Ve&&clearInterval(Ve)}),Ns(()=>{d(m)!==void 0&&d(y).length>0&&N&&me()}),Ns(()=>{d(a),d(c),d(y).length>0&&N&&me()});function st(F){const I=Number(F.target.value);ge(v,I,!0),localStorage.setItem(i,String(I)),ke(),xe(!0)}function ct(){ge(M,!d(M)),localStorage.setItem(Q,String(d(M))),k&&k.setSeries(4,{show:d(M)})}var Ke=uc(),tt=D(Ke),St=D(tt);An(St,21,()=>Yr,Yn,(F,I)=>{var ae=sc();let oe;ae.__click=()=>{d(X)!==d(I).hours&&(ge(X,d(I).hours,!0),xe(!0))};var se=D(ae,!0);E(ae),vt(()=>{oe=wl(ae,1,"range-btn svelte-12kwequ",null,oe,{active:d(X)===d(I).hours}),be(se,d(I).label)}),Ae(F,ae)}),E(St);var we=H(St,2),lt=D(we),it=H(D(lt),2);it.__change=st,An(it,21,()=>n,Yn,(F,I)=>{var ae=ic(),oe=D(ae,!0);E(ae);var se={};vt(()=>{be(oe,d(I).label),se!==(se=d(I).value)&&(ae.value=(ae.__value=d(I).value)??"")}),Ae(F,ae)}),E(it);var gt;Qr(it),E(lt);var He=H(lt,2),kt=H(D(He),2),Gt=D(kt);zl(2),E(kt);var mt=H(kt,4);let fe;mt.__click=ct;var O=D(mt);Tn(O,"background: rgba(250, 204, 21, 0.5);"),zl(2),E(mt),E(He),E(we),E(tt);var ye=H(tt,2),We=D(ye);{var Ut=F=>{var I=ac();Ae(F,I)};ht(We,F=>{d(Y)&&F(Ut)})}var Yt=H(We,2);{var Tt=F=>{var I=rc(),ae=H(D(I),2);ae.__click=()=>xe(!0),E(I),Ae(F,I)},Ot=F=>{var I=Wn(),ae=Ol(I);{var oe=se=>{var de=oc();Ae(se,de)};ht(ae,se=>{d(y).length===0&&se(oe)},!0)}Ae(F,I)};ht(Yt,F=>{d(j)?F(Tt):F(Ot,!1)})}E(ye),qs(ye,F=>N=F,()=>N);var at=H(ye,2);{var _t=F=>{{let I=ze(()=>d(A)?{predictedFg:d(A).predictedFg,daysToFg:d(A).daysToFg,r2:d(A).r2}:null);nc(F,{get readings(){return d(y)},get originalGravity(){return S()},onOgChange:()=>{},get trend(){return d(I)}})}};ht(at,F=>{d(y).length>0&&F(_t)})}E(Ke),vt(()=>{gt!==(gt=d(v))&&(it.value=(it.__value=d(v))??"",Xr(it,d(v))),Tn(Gt,`background: ${(L[h()]||"var(--text-secondary)")??""};`),fe=wl(mt,1,"legend-item legend-toggle svelte-12kwequ",null,fe,{"legend-disabled":!d(M)}),en(mt,"title",d(M)?"Hide trend line":"Show trend line")}),Ae(e,Ke),Zn()}Jn(["click","change"]);var fc=Ge('<input type="text" class="beer-name-input svelte-1k5rb4o" maxlength="100"/>'),dc=Ge('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),pc=Ge('<div class="w-1 rounded-sm transition-all"></div>'),vc=Ge('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),hc=Ge(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),gc=Ge('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),mc=Ge('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),_c=Ge("<div><!></div>"),wc=Ge('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),xc=Ge('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function bc(e,l){$n(l,!0);let i=tn(l,"batch",7),n=tn(l,"expanded",3,!1),a=tn(l,"wide",3,!1),c=ze(()=>{if(!i().device_id)return null;const x=i().device_id.match(/^(?:tilt-)?(\w+)$/i);if(!x?.[1])return null;const z=x[1].toUpperCase();for(const ee of Sa.tilts.values())if(ee.color.toUpperCase()===z)return ee;return null}),u=ze(()=>i().name||i().recipe?.name||`Batch #${i().batch_number}`),p=ze(()=>l.progress?.measured?.current_sg??i().measured_og??1),v=ze(()=>l.progress?.temperature?.current??null),h=ze(()=>d(c)?.color??"BLACK"),S=ze(()=>d(c)?.rssi??null),m=ze(()=>d(c)?.paired??!0),_=ze(()=>d(c)?.last_seen??new Date().toISOString()),N=ze(()=>d(c)?.sg_raw??d(p)),k=ze(()=>d(c)?.temp_raw??d(v)),Y=qe(!1);Ns(()=>{n()&&!d(Y)&&ge(Y,!0)});let j=qe(!1),X=qe(""),y=qe(null),K=qe(!1);function A(){ge(X,d(u),!0),ge(j,!0),setTimeout(()=>d(y)?.focus(),0)}async function R(){if(d(K))return;const x=d(X).trim();if(!x||x===d(u)){ge(j,!1);return}ge(K,!0);try{await Jr(i().id,{name:x}),i().name=x,ge(j,!1)}catch(z){console.error("Failed to update batch name:",z)}finally{ge(K,!1)}}function L(x){x.key==="Enter"?R():x.key==="Escape"&&ge(j,!1)}let le=ze(Ma),J=ze(Ks);const $={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function te(x){return js(x)}function w(x){return Ur(x)}function V(x){return x>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:x>=-60?{bars:3,color:"var(--positive)",label:"Good"}:x>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function G(x){const z=Math.floor((Date.now()-new Date(x).getTime())/1e3);if(z<10)return"just now";if(z<60)return`${z}s ago`;const ee=Math.floor(z/60);if(ee<60)return`${ee}m ago`;const _e=Math.floor(ee/60);return _e<24?`${_e}h ago`:`${Math.floor(_e/24)}d ago`}let Q=ze(()=>$[d(h)]||"var(--tilt-black)"),M=ze(()=>d(S)!==null?V(d(S)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),q=ze(()=>G(d(_)));var P=xc();let Me;var ve=D(P),ue=H(ve,2),he=D(ue),ne=D(he),U=D(ne);{var De=x=>{var z=fc();ka(z),z.__keydown=L,qs(z,ee=>ge(y,ee),()=>d(y)),vt(()=>z.disabled=d(K)),ba("blur",z,R),Ta(z,()=>d(X),ee=>ge(X,ee)),Ae(x,z)},je=x=>{var z=dc();z.__click=A;var ee=D(z),_e=D(ee,!0);E(ee),zl(2),E(z),vt(()=>be(_e,d(u))),Ae(x,z)};ht(U,x=>{d(j)?x(De):x(je,!1)})}var xe=H(U,2),me=D(xe),nt=H(me,2),Ve=D(nt,!0);E(nt),E(xe),E(ne);var ke=H(ne,2),st=D(ke),ct=D(st);An(ct,20,()=>Array(4),Yn,(x,z,ee)=>{var _e=pc();vt(()=>Tn(_e,`
									height: ${8+ee*4}px;
									background: ${(ee<d(M).bars?d(M).color:"var(--bg-hover)")??""};
									opacity: ${ee<d(M).bars?1:.4};
								`)),Ae(x,_e)}),E(ct);var Ke=H(ct,2),tt=D(Ke);E(Ke),E(st);var St=H(st,2);{var we=x=>{var z=vc();Ae(x,z)};ht(St,x=>{d(m)||x(we)})}E(ke),E(he);var lt=H(he,2),it=D(lt),gt=D(it),He=D(gt,!0),kt=H(He),Gt=D(kt,!0);E(kt),E(gt);var mt=H(gt,2),fe=D(mt,!0);E(mt),E(it);var O=H(it,2),ye=D(O),We=D(ye);{var Ut=x=>{var z=hc(),ee=Ol(z,!0),_e=H(ee),Re=D(_e,!0);E(_e),vt(Pt=>{be(ee,Pt),be(Re,d(le))},[()=>w(d(v))]),Ae(x,z)},Yt=x=>{var z=gc(),ee=H(Ol(z)),_e=D(ee,!0);E(ee),vt(()=>be(_e,d(le))),Ae(x,z)};ht(We,x=>{d(v)!==null?x(Ut):x(Yt,!1)})}E(ye),zl(2),E(O),E(lt);var Tt=H(lt,2);{var Ot=x=>{var z=mc(),ee=H(D(z),2),_e=D(ee,!0);E(ee);var Re=H(ee,4),Pt=D(Re);E(Re),E(z),vt((Xt,Ht)=>{be(_e,Xt),be(Pt,`${Ht??""}${d(le)??""}`)},[()=>te(d(N)),()=>d(k)!==null?w(d(k)):"--"]),Ae(x,z)};ht(Tt,x=>{(d(p)!==d(N)||d(v)!==d(k))&&d(c)&&x(Ot)})}var at=H(Tt,2);{var _t=x=>{var z=_c();let ee;var _e=D(z);eo(_e,()=>i().id,Re=>{cc(Re,{get batchId(){return i().id},get deviceColor(){return d(h)},get originalGravity(){return i().measured_og}})}),E(z),vt(()=>ee=wl(z,1,"chart-section svelte-1k5rb4o",null,ee,{hidden:!n()})),Ae(x,z)};ht(at,x=>{d(Y)&&x(_t)})}var F=H(at,2),I=D(F),ae=D(I);E(I);var oe=H(I,2),se=D(oe),de=H(se,2);{var re=x=>{var z=wc();z.__click=function(...Re){l.onToggleExpand?.apply(this,Re)};var ee=D(z);let _e;E(z),vt(()=>{en(z,"aria-label",n()?"Collapse chart":"Expand chart"),_e=wl(ee,0,"w-4 h-4 transition-transform",null,_e,{"rotate-180":n()})}),Ae(x,z)};ht(de,x=>{l.onToggleExpand&&x(re)})}zl(2),E(oe),E(F),E(ue),E(P),vt(x=>{Me=wl(P,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Me,{expanded:n(),wide:a()}),Tn(ve,`background: ${d(Q)??""};`),Tn(me,`background: ${d(Q)??""};`),be(Ve,d(h)),en(st,"title",`${d(M).label??""} signal (${d(S)??"N/A"??""} dBm)`),be(tt,`${d(S)??"N/A"??""} dBm`),be(He,x),be(Gt,d(J)!=="SG"?d(J):""),be(fe,d(J)==="SG"?"Gravity":d(J)==="P"?"Plato":"Brix"),be(ae,`Updated ${d(q)??""}`),en(se,"href",`/batches/${i().id??""}`)},[()=>te(d(p))]),Ae(e,P),Zn()}Jn(["keydown","click"]);var yc=Ge('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Sc=Ge('<div class="alerts-list svelte-1uha8ag"></div>'),kc=Ge('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Tc=Ge('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Mc=Ge('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Ec=Ge('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Ac=Ge('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Dc=Ge("<div></div>"),Lc=Ge("<!> <!>",1);function jc(e,l){$n(l,!0);let i=qe(!1),n=qe(!1),a=qe(Un([])),c=qe(Un(new Map)),u=qe(!0),p=qe(null);ya(async()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),L=localStorage.getItem("brewsignal_alerts_dismissed_time");R==="true"&&L&&Date.now()-parseInt(L,10)<360*60*1e3&&ge(i,!0),await v()});async function v(){ge(u,!0),ge(p,null);try{const R=await $r();ge(a,R.filter($=>$.status==="fermenting"||$.status==="conditioning"),!0);const L=d(a).map(async $=>{try{const te=await Zr($.id);return[$.id,te]}catch{return null}}),le=await Promise.all(L),J=new Map;for(const $ of le)$&&J.set($[0],$[1]);ge(c,J,!0)}catch(R){ge(p,R instanceof Error?R.message:"Failed to load batches",!0)}finally{ge(u,!1)}}let h=ze(()=>new Map(d(a).filter(R=>R.device_id&&(R.status==="fermenting"||R.status==="conditioning")).map(R=>[R.device_id,R.id]))),S=ze(()=>{const R=new Map(d(c));for(const[L,le]of d(h)){const J=Sa.tilts.get(L);if(J){const $=R.get(le)||{batch_id:le,measured:{},temperature:{},progress:{},targets:{}};R.set(le,{...$,measured:{...$.measured,current_sg:J.sg},temperature:{...$.temperature,current:J.temp,status:$.temperature?.yeast_min!==void 0&&$.temperature?.yeast_max!==void 0?J.temp<$.temperature.yeast_min?"too_cold":J.temp>$.temperature.yeast_max?"too_hot":"in_range":$.temperature?.status}})}}return R}),m=qe(null);function _(R){ge(m,d(m)===R?null:R,!0)}function N(){ge(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function k(){ge(n,!d(n))}var Y=Lc();Wr("1uha8ag",R=>{Ir(()=>{Br.title="Dashboard | BrewSignal"})});var j=Ol(Y);{var X=R=>{var L=Tc(),le=D(L),J=D(le),$=H(D(J),4),te=D($,!0);E($),E(J);var w=H(J,2);w.__click=N,E(le);var V=H(le,2);{var G=q=>{var P=Sc();An(P,21,()=>_n.alerts,Yn,(Me,ve)=>{var ue=yc();let he;var ne=D(ue),U=D(ne);E(ne);var De=H(ne,2),je=D(De,!0);E(De),E(ue),vt(()=>{he=wl(ue,1,"alert-item svelte-1uha8ag",null,he,{warning:d(ve).level==="warning",critical:d(ve).level==="critical"}),be(U,`${d(ve).day??""}:`),be(je,d(ve).message)}),Ae(Me,ue)}),E(P),Ae(q,P)};ht(V,q=>{d(n)||q(G)})}var Q=H(V,2);{var M=q=>{var P=kc();P.__click=k;var Me=D(P,!0);E(P),vt(()=>be(Me,d(n)?`Show ${_n.alerts.length} alerts`:"Show less")),Ae(q,P)};ht(Q,q=>{_n.alerts.length>3&&q(M)})}E(L),vt(()=>be(te,_n.alerts.length)),Ae(R,L)};ht(j,R=>{_n.alerts.length>0&&!d(i)&&R(X)})}var y=H(j,2);{var K=R=>{var L=Mc();Ae(R,L)},A=R=>{var L=Wn(),le=Ol(L);{var J=te=>{var w=Ec(),V=H(D(w),4),G=D(V,!0);E(V),E(w),vt(()=>be(G,d(p))),Ae(te,w)},$=te=>{var w=Wn(),V=Ol(w);{var G=M=>{var q=Ac();Ae(M,q)},Q=M=>{var q=Dc();let P;An(q,21,()=>d(a),Me=>Me.id,(Me,ve)=>{{let ue=ze(()=>d(S).get(d(ve).id)),he=ze(()=>d(m)===d(ve).id),ne=ze(()=>d(a).length===1);bc(Me,{get batch(){return d(ve)},get progress(){return d(ue)},get expanded(){return d(he)},get wide(){return d(ne)},onToggleExpand:()=>_(d(ve).id)})}}),E(q),vt(()=>P=wl(q,1,"tilt-grid svelte-1uha8ag",null,P,{"single-tilt":d(a).length===1})),Ae(M,q)};ht(V,M=>{d(a).length===0?M(G):M(Q,!1)},!0)}Ae(te,w)};ht(le,te=>{d(p)?te(J):te($,!1)},!0)}Ae(R,L)};ht(y,R=>{d(u)?R(K):R(A,!1)})}Ae(e,Y),Zn()}Jn(["click"]);export{jc as component};
