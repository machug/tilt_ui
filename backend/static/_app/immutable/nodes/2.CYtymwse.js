import{d as Zn,c as Cn,a as ye,f as Ae,s as we,e as xa}from"../chunks/BQ88CgEU.js";import{o as Fr,R as Or,b7 as Nr,b as Gr,ah as Qn,ar as Sl,c as d,ai as ze,aj as $n,al as A,an as E,ak as B,ao as Ue,as as dt,s as pe,at as Bl,p as Yn,ap as ba,aL as zr,aq as Os,e as Vr,am as Ir}from"../chunks/CGXqq0_G.js";import{e as Dn,i as qn}from"../chunks/payu-7ZH.js";import{B as Br,i as nt}from"../chunks/ziKwUJ4R.js";import{h as Hr}from"../chunks/BP8qDDK3.js";import{s as gl}from"../chunks/DqcjHxzZ.js";import{t as ya}from"../chunks/DThvY6M2.js";import{w as wn}from"../chunks/BwsdUUZq.js";import{r as Sa,s as nn}from"../chunks/D2zVhfuI.js";import{s as Tn}from"../chunks/BSw_pJTS.js";import{b as ka}from"../chunks/CL9D8AtU.js";import{b as qs}from"../chunks/C39ACuyu.js";import{p as Ln}from"../chunks/B3wItnqC.js";import{c as Wn,d as En,b as Ks,g as Ta,e as Wr}from"../chunks/BY0zcjvU.js";import{T as Ur,o as Yr,q as qr,s as Kr,u as jr,t as Jr,g as Zr}from"../chunks/DLtesNQI.js";import{i as Qr,s as $r}from"../chunks/C5J5lxM1.js";function Xr(e,l,i){Fr&&Or();var n=new Br(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const eo=!0,Et="u-",to="uplot",lo=Et+"hz",no=Et+"vt",so=Et+"title",io=Et+"wrap",ao=Et+"under",ro=Et+"over",oo=Et+"axis",Il=Et+"off",uo=Et+"select",co=Et+"cursor-x",fo=Et+"cursor-y",po=Et+"cursor-pt",vo=Et+"legend",ho=Et+"live",go=Et+"inline",mo=Et+"series",_o=Et+"marker",Fi=Et+"label",wo=Et+"value",yn="width",Sn="height",xn="top",Oi="bottom",tn="left",As="right",js="#000",Ni=js+"0",Cs="mousemove",Gi="mousedown",Ds="mouseup",zi="mouseenter",Vi="mouseleave",Ii="dblclick",xo="resize",bo="scroll",Bi="change",Kn="dppxchange",Js="--",cn=typeof window<"u",Ns=cn?document:null,sn=cn?window:null,yo=cn?navigator:null;let Ne,In;function Gs(){let e=devicePixelRatio;Ne!=e&&(Ne=e,In&&Vs(Bi,In,Gs),In=matchMedia(`(min-resolution: ${Ne-.001}dppx) and (max-resolution: ${Ne+.001}dppx)`),Hl(Bi,In,Gs),sn.dispatchEvent(new CustomEvent(Kn)))}function el(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function zs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function $e(e,l,i){e.style[l]=i+"px"}function pl(e,l,i,n){let a=Ns.createElement(e);return l!=null&&el(a,l),i?.insertBefore(a,n),a}function rl(e,l){return pl("div",e,l)}const Hi=new WeakMap;function bl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Hi.get(e);c!=u&&(e.style.transform=c,Hi.set(e,c),l<0||i<0||l>n||i>a?el(e,Il):zs(e,Il))}const Wi=new WeakMap;function Ui(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Yi=new WeakMap;function qi(e,l,i,n){let a=l+""+i,c=Yi.get(e);a!=c&&(Yi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Zs={passive:!0},So={...Zs,capture:!0};function Hl(e,l,i,n){l.addEventListener(e,i,n?So:Zs)}function Vs(e,l,i,n){l.removeEventListener(e,i,Zs)}cn&&Gs();function vl(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:tl((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ea(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ma=e=>e!=null,Aa=e=>e!=null&&e>0,Xn=Ea(Ma),ko=Ea(Aa);function To(e,l,i,n=0,a=!1){let c=a?ko:Xn,u=a?Aa:Ma;[l,i]=c(e,l,i);let p=e[l],v=e[l];if(l>-1)if(n==1)p=e[l],v=e[i];else if(n==-1)p=e[i],v=e[l];else for(let h=l;h<=i;h++){let S=e[h];u(S)&&(S<p?p=S:S>v&&(v=S))}return[p??Ye,v??-Ye]}function es(e,l,i,n){let a=Ji(e),c=Ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?kl:Ca,p=a==1?tl:ol,v=c==1?ol:tl,h=p(u(kt(e))),S=v(u(kt(l))),m=an(i,h),_=an(i,S);return i==10&&(h<0&&(m=qe(m,-h)),S<0&&(_=qe(_,-S))),n||i==2?(e=m*a,l=_*c):(e=Ra(e,m),l=ts(l,_)),[e,l]}function Qs(e,l,i,n){let a=es(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const $s=.1,Ki={mode:3,pad:$s},Mn={pad:0,soft:null,mode:0},Eo={min:Mn,max:Mn};function jn(e,l,i,n){return ls(i)?ji(e,l,i):(Mn.pad=i,Mn.soft=n?0:null,Mn.mode=n?3:0,ji(e,l,Eo))}function Fe(e,l){return e??l}function Mo(e,l,i){for(l=Fe(l,0),i=Fe(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Fe(n.pad,0),u=Fe(a.pad,0),p=Fe(n.hard,-Ye),v=Fe(a.hard,Ye),h=Fe(n.soft,Ye),S=Fe(a.soft,-Ye),m=Fe(n.mode,0),_=Fe(a.mode,0),O=l-e,k=kl(O),Y=Yt(kt(e),kt(l)),X=kl(Y),te=kt(X-k);(O<1e-24||te>10)&&(O=0,(e==0||l==0)&&(O=1e-24,m==2&&h!=Ye&&(c=0),_==2&&S!=-Ye&&(u=0)));let y=O||Y||1e3,q=kl(y),C=an(10,tl(q)),R=y*(O==0?e==0?.1:1:c),D=qe(Ra(e-R,C/10),24),ne=e>=h&&(m==1||m==3&&D<=h||m==2&&D>=h)?h:Ye,Z=Yt(p,D<ne&&e>=ne?ne:hl(ne,D)),Q=y*(O==0?l==0?.1:1:u),le=qe(ts(l+Q,C/10),24),w=l<=S&&(_==1||_==3&&le>=S||_==2&&le<=S)?S:-Ye,z=hl(v,le>w&&l<=w?w:Yt(w,le));return Z==z&&Z==0&&(z=100),[Z,z]}const Ao=new Intl.NumberFormat(cn?yo.language:"en-US"),Xs=e=>Ao.format(e),ll=Math,Un=ll.PI,kt=ll.abs,tl=ll.floor,St=ll.round,ol=ll.ceil,hl=ll.min,Yt=ll.max,an=ll.pow,Ji=ll.sign,kl=ll.log10,Ca=ll.log2,Co=(e,l=1)=>ll.sinh(e)*l,Ls=(e,l=1)=>ll.asinh(e/l),Ye=1/0;function Zi(e){return(kl((e^e>>31)-(e>>31))|0)+1}function Is(e,l,i){return hl(Yt(e,l),i)}function Da(e){return typeof e=="function"}function Me(e){return Da(e)?e:()=>e}const Do=()=>{},La=e=>e,Pa=(e,l)=>l,Lo=e=>null,Qi=e=>!0,$i=(e,l)=>e==l,Po=/\.\d*?(?=9{6,}|0{6,})/gm,Wl=e=>{if(Oa(e)||Rl.has(e))return e;const l=`${e}`,i=l.match(Po);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Wl(a)}e${c}`}return qe(e,n)};function zl(e,l){return Wl(qe(Wl(e/l))*l)}function ts(e,l){return Wl(ol(Wl(e/l))*l)}function Ra(e,l){return Wl(tl(Wl(e/l))*l)}function qe(e,l=0){if(Oa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return St(n)/i}const Rl=new Map;function Fa(e){return((""+e).split(".")[1]||"").length}function Pn(e,l,i,n){let a=[],c=n.map(Fa);for(let u=l;u<i;u++){let p=kt(u),v=qe(an(e,u),p);for(let h=0;h<n.length;h++){let S=e==10?+`${n[h]}e${u}`:n[h]*v,m=(u>=0?0:p)+(u>=c[h]?0:c[h]),_=e==10?S:qe(S,m);a.push(_),Rl.set(_,m)}}return a}const An={},ei=[],rn=[null,null],Pl=Array.isArray,Oa=Number.isInteger,Ro=e=>e===void 0;function Xi(e){return typeof e=="string"}function ls(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Fo(e){return e!=null&&typeof e=="object"}const Oo=Object.getPrototypeOf(Uint8Array),Na="__proto__";function on(e,l=ls){let i;if(Pl(e)){let n=e.find(a=>a!=null);if(Pl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=on(e[a],l)}else i=e.slice()}else if(e instanceof Oo)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=on(e[n],l))}else i=e;return i}function mt(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(ls(e[a])?mt(e[a],on(n[a])):e[a]=on(n[a]))}return e}const No=0,Go=1,zo=2;function Vo(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Io(e,l){if(Wo(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Uo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let v=e[u][0],h=v.length;for(let S=0;S<h;S++)i.add(v[S])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],v=p[0];for(let h=1;h<p.length;h++){let S=p[h],m=Array(a).fill(void 0),_=l?l[u][h]:Go,O=[];for(let k=0;k<S.length;k++){let Y=S[k],X=c.get(v[k]);Y===null?_!=No&&(m[X]=Y,_==zo&&O.push(X)):m[X]=Y}Vo(m,O,a),n.push(m)}}return n}const Bo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let v=0;v<i;v++)p[v]=u[n[v]];a.push(p)}return a}function Wo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Uo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Yt(1,tl((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const v=e[p];if(v!=null){if(v<=u)return!1;u=v}}return!0}const Ga=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Va(e){return e.slice(0,3)}const Yo=za.map(Va),qo=Ga.map(Va),Ko={MMMM:Ga,MMM:qo,WWWW:za,WWW:Yo};function bn(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const Jo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>bn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>bn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>bn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>bn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>bn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function ti(e,l){l=l||Ko;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Jo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Zo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Qo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Zo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ia=e=>e%1==0,Jn=[1,2,2.5,5],$o=Pn(10,-32,0,Jn),Ba=Pn(10,0,32,Jn),Xo=Ba.filter(Ia),Vl=$o.concat(Ba),li=`
`,Ha="{YYYY}",ea=li+Ha,Wa="{M}/{D}",kn=li+Wa,Bn=kn+"/{YY}",Ua="{aa}",eu="{h}:{mm}",ln=eu+Ua,ta=li+ln,la=":{ss}",Ge=null;function Ya(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,v=(e==1?Pn(10,0,3,Jn).filter(Ia):Pn(10,-3,0,Jn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const h=[[u,Ha,Ge,Ge,Ge,Ge,Ge,Ge,1],[a*28,"{MMM}",ea,Ge,Ge,Ge,Ge,Ge,1],[a,Wa,ea,Ge,Ge,Ge,Ge,Ge,1],[n,"{h}"+Ua,Bn,Ge,kn,Ge,Ge,Ge,1],[i,ln,Bn,Ge,kn,Ge,Ge,Ge,1],[l,la,Bn+" "+ln,Ge,kn+" "+ln,Ge,ta,Ge,1],[e,la+".{fff}",Bn+" "+ln,Ge,kn+" "+ln,Ge,ta,Ge,1]];function S(m){return(_,O,k,Y,X,te)=>{let y=[],q=X>=u,C=X>=c&&X<u,R=m(k),D=qe(R*e,3),ne=Ps(R.getFullYear(),q?0:R.getMonth(),C||q?1:R.getDate()),Z=qe(ne*e,3);if(C||q){let Q=C?X/c:0,le=q?X/u:0,w=D==Z?D:qe(Ps(ne.getFullYear()+le,ne.getMonth()+Q,1)*e,3),z=new Date(St(w/e)),N=z.getFullYear(),ee=z.getMonth();for(let M=0;w<=Y;M++){let j=Ps(N+le*M,ee+Q*M,1),P=j-m(qe(j*e,3));w=qe((+j+P)*e,3),w<=Y&&y.push(w)}}else{let Q=X>=a?a:X,le=tl(k)-tl(D),w=Z+le+ts(D-Z,Q);y.push(w);let z=m(w),N=z.getHours()+z.getMinutes()/i+z.getSeconds()/n,ee=X/n,M=_.axes[O]._space,j=te/M;for(;w=qe(w+X,e==1?0:3),!(w>Y);)if(ee>1){let P=tl(qe(N+ee,6))%24,ce=m(w).getHours()-P;ce>1&&(ce=-1),w-=ce*n,N=(N+ee)%24;let ge=y[y.length-1];qe((w-ge)/X,3)*j>=.7&&y.push(w)}else y.push(w)}return y}}return[v,h,S]}const[tu,lu,nu]=Ya(1),[su,iu,au]=Ya(.001);Pn(2,-53,53,[1]);function na(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function sa(e,l){return(i,n,a,c,u)=>{let p=l.find(k=>u>=k[0])||l[l.length-1],v,h,S,m,_,O;return n.map(k=>{let Y=e(k),X=Y.getFullYear(),te=Y.getMonth(),y=Y.getDate(),q=Y.getHours(),C=Y.getMinutes(),R=Y.getSeconds(),D=X!=v&&p[2]||te!=h&&p[3]||y!=S&&p[4]||q!=m&&p[5]||C!=_&&p[6]||R!=O&&p[7]||p[1];return v=X,h=te,S=y,m=q,_=C,O=R,D(Y)})}}function ru(e,l){let i=ti(l);return(n,a,c,u,p)=>a.map(v=>i(e(v)))}function Ps(e,l,i){return new Date(e,l,i)}function ia(e,l){return l(e)}const ou="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function aa(e,l){return(i,n,a,c)=>c==null?Js:l(e(n))}function uu(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function cu(e,l){return e.series[l].fill(e,l)}const fu={show:!0,live:!0,isolate:!1,mount:Do,markers:{show:!0,width:2,stroke:uu,fill:cu,dash:"solid"},idx:null,idxs:null,values:[]};function du(e,l){let i=e.cursor.points,n=rl(),a=i.size(e,l);$e(n,yn,a),$e(n,Sn,a);let c=a/-2;$e(n,"marginLeft",c),$e(n,"marginTop",c);let u=i.width(e,l,a);return u&&$e(n,"borderWidth",u),n}function pu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function vu(e,l){let i=e.series[l].points;return i._stroke||i._fill}function hu(e,l){return e.series[l].points.size}const Rs=[0,0];function gu(e,l,i){return Rs[0]=l,Rs[1]=i,Rs}function Hn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Fs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const mu={show:!0,x:!0,y:!0,lock:!1,move:gu,points:{one:!1,show:du,size:hu,width:0,stroke:vu,fill:pu},bind:{mousedown:Hn,mouseup:Hn,click:Hn,dblclick:Hn,mousemove:Fs,mouseleave:Fs,mouseenter:Fs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},qa={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ni=mt({},qa,{filter:Pa}),Ka=mt({},ni,{size:10}),ja=mt({},qa,{show:!1}),si='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ja="bold "+si,Za=1.5,ra={show:!0,scale:"x",stroke:js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:2,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0},_u="Value",wu="Time",oa={show:!0,scale:"x",auto:!1,sorted:1,min:Ye,max:-Ye,idxs:[]};function xu(e,l,i,n,a){return l.map(c=>c==null?"":Xs(c))}function bu(e,l,i,n,a,c,u){let p=[],v=Rl.get(a)||0;i=u?i:qe(ts(i,a),v);for(let h=i;h<=n;h=qe(h+a,v))p.push(Object.is(h,-0)?0:h);return p}function Bs(e,l,i,n,a,c,u){const p=[],v=e.scales[e.axes[l].scale].log,h=v==10?kl:Ca,S=tl(h(i));a=an(v,S),v==10&&(a=Vl[vl(a,Vl)]);let m=i,_=a*v;v==10&&(_=Vl[vl(_,Vl)]);do p.push(m),m=m+a,v==10&&!Rl.has(m)&&(m=qe(m,Rl.get(a))),m>=_&&(a=m,_=a*v,v==10&&(_=Vl[vl(_,Vl)]));while(m<=n);return p}function yu(e,l,i,n,a,c,u){let v=e.scales[e.axes[l].scale].asinh,h=n>v?Bs(e,l,Yt(v,i),n,a):[v],S=n>=0&&i<=0?[0]:[];return(i<-v?Bs(e,l,Yt(v,-n),-i,a):[v]).reverse().map(_=>-_).concat(S,h)}const Qa=/./,Su=/[12357]/,ku=/[125]/,ua=/1/,Hs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Tu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],v=e.valToPos,h=c._space,S=v(10,u),m=v(9,u)-S>=h?Qa:v(7,u)-S>=h?Su:v(5,u)-S>=h?ku:ua;if(m==ua){let _=kt(v(1,u)-S);if(_<h)return Hs(l.slice().reverse(),p.distr,m,ol(h/_)).reverse()}return Hs(l,p.distr,m,1)}function Eu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,v=e.valToPos,h=kt(v(1,u)-v(2,u));return h<p?Hs(l.slice().reverse(),3,Qa,ol(p/h)).reverse():l}function Mu(e,l,i,n){return n==null?Js:l==null?"":Xs(l)}const ca={show:!0,scale:"y",stroke:js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ja,side:3,grid:ni,ticks:Ka,border:ja,font:si,lineGap:Za,rotate:0};function Au(e,l){let i=3+(e||1)*2;return qe(i*l,3)}function Cu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=kt(u-c),v=e.series[l],h=p/(v.points.space*Ne);return n[1]-n[0]<=h}const fa={scale:null,auto:!0,sorted:0,min:Ye,max:-Ye},$a=(e,l,i,n,a)=>a,da={show:!0,auto:!0,sorted:0,gaps:$a,alpha:1,facets:[mt({},fa,{scale:"x"}),mt({},fa,{scale:"y"})]},pa={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:$a,alpha:1,points:{show:Cu,filter:null},values:null,min:Ye,max:-Ye,idxs:[],path:null,clip:null};function Du(e,l,i,n,a){return i/10}const Xa={time:eo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Lu=mt({},Xa,{time:!1,ori:1}),va={};function er(e,l){let i=va[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,v,h){for(let S=0;S<i.plots.length;S++)i.plots[S]!=a&&i.plots[S].pub(n,a,c,u,p,v,h)}},e!=null&&(va[e]=i)),i}const un=1,Ws=2;function Ul(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let v=c[0],h=n==2?c[1]:c[l],S=n==2?u[a.facets[0].scale]:u[e.series[0].scale],m=n==2?u[a.facets[1].scale]:u[a.scale],_=p.left,O=p.top,k=p.width,Y=p.height,X=e.valToPosH,te=e.valToPosV;return S.ori==0?i(a,v,h,S,m,X,te,_,O,k,Y,ss,fn,as,lr,sr):i(a,v,h,S,m,te,X,O,_,Y,k,is,dn,ri,nr,ir)}function ii(e,l){let i=0,n=0,a=Fe(e.bands,ei);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Pu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,v=e.scales[p];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function Tl(e,l,i,n,a,c){return Ul(e,l,(u,p,v,h,S,m,_,O,k,Y,X)=>{let te=u.pxRound;const y=h.dir*(h.ori==0?1:-1),q=h.ori==0?fn:dn;let C,R;y==1?(C=i,R=n):(C=n,R=i);let D=te(m(p[C],h,Y,O)),ne=te(_(v[C],S,X,k)),Z=te(m(p[R],h,Y,O)),Q=te(_(c==1?S.max:S.min,S,X,k)),le=new Path2D(a);return q(le,Z,Q),q(le,D,Q),q(le,D,ne),le})}function ns(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?as:ri;let v=i;for(let m=0;m<e.length;m++){let _=e[m];if(_[1]>_[0]){let O=_[0]-v;O>0&&p(u,v,n,O,n+c),v=_[1]}}let h=i+a-v,S=10;h>0&&p(u,v,n-S/2,h,n+c+S)}return u}function Ru(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ai(e,l,i,n,a,c,u){let p=[],v=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,_=h;if(a==1)for(;++h<=n&&l[h]===null;)_=h;else for(;--h>=i&&l[h]===null;)_=h;let O=c(e[m]),k=_==m?O:c(e[_]),Y=m-a;O=u<=0&&Y>=0&&Y<v?c(e[Y]):O;let te=_+a;k=u>=0&&te>=0&&te<v?c(e[te]):k,k>=O&&p.push([O,k])}return p}function ha(e){return e==0?La:e==1?St:l=>zl(l,e)}function tr(e){let l=e==0?ss:is,i=e==0?(a,c,u,p,v,h)=>{a.arcTo(c,u,p,v,h)}:(a,c,u,p,v,h)=>{a.arcTo(u,c,v,p,h)},n=e==0?(a,c,u,p,v)=>{a.rect(c,u,p,v)}:(a,c,u,p,v)=>{a.rect(u,c,v,p)};return(a,c,u,p,v,h=0,S=0)=>{h==0&&S==0?n(a,c,u,p,v):(h=hl(h,p/2,v/2),S=hl(S,p/2,v/2),l(a,c+h,u),i(a,c+p,u,c+p,u+v,h),i(a,c+p,u+v,c,u+v,S),i(a,c,u+v,c,u,S),i(a,c,u,c+p,u,h),a.closePath())}}const ss=(e,l,i)=>{e.moveTo(l,i)},is=(e,l,i)=>{e.moveTo(i,l)},fn=(e,l,i)=>{e.lineTo(l,i)},dn=(e,l,i)=>{e.lineTo(i,l)},as=tr(0),ri=tr(1),lr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},nr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},ir=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ar(e){return(l,i,n,a,c)=>Ul(l,i,(u,p,v,h,S,m,_,O,k,Y,X)=>{let{pxRound:te,points:y}=u,q,C;h.ori==0?(q=ss,C=lr):(q=is,C=nr);const R=qe(y.width*Ne,3);let D=(y.size-y.width)/2*Ne,ne=qe(D*2,3),Z=new Path2D,Q=new Path2D,{left:le,top:w,width:z,height:N}=l.bbox;as(Q,le-ne,w-ne,z+ne*2,N+ne*2);const ee=M=>{if(v[M]!=null){let j=te(m(p[M],h,Y,O)),P=te(_(v[M],S,X,k));q(Z,j+D,P),C(Z,j,P,D,0,Un*2)}};if(c)c.forEach(ee);else for(let M=n;M<=a;M++)ee(M);return{stroke:R>0?Z:null,fill:Z,clip:Q,flags:un|Ws}})}function rr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Fu=rr(fn),Ou=rr(dn);function or(e){const l=Fe(e?.alignGaps,0);return(i,n,a,c)=>Ul(i,n,(u,p,v,h,S,m,_,O,k,Y,X)=>{[a,c]=Xn(v,a,c);let te=u.pxRound,y=N=>te(m(N,h,Y,O)),q=N=>te(_(N,S,X,k)),C,R;h.ori==0?(C=fn,R=Fu):(C=dn,R=Ou);const D=h.dir*(h.ori==0?1:-1),ne={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},Z=ne.stroke;let Q=!1;if(c-a>=Y*4){let N=K=>i.posToVal(K,h.key,!0),ee=null,M=null,j,P,Se,he=y(p[D==1?a:c]),ce=y(p[a]),ge=y(p[c]),se=N(D==1?ce+1:ge-1);for(let K=D==1?a:c;K>=a&&K<=c;K+=D){let Ce=p[K],be=(D==1?Ce<se:Ce>se)?he:y(Ce),_e=v[K];be==he?_e!=null?(P=_e,ee==null?(C(Z,be,q(P)),j=ee=M=P):P<ee?ee=P:P>M&&(M=P)):_e===null&&(Q=!0):(ee!=null&&R(Z,he,q(ee),q(M),q(j),q(P)),_e!=null?(P=_e,C(Z,be,q(P)),ee=M=j=P):(ee=M=null,_e===null&&(Q=!0)),he=be,se=N(he+D))}ee!=null&&ee!=M&&Se!=he&&R(Z,he,q(ee),q(M),q(j),q(P))}else for(let N=D==1?a:c;N>=a&&N<=c;N+=D){let ee=v[N];ee===null?Q=!0:ee!=null&&C(Z,y(p[N]),q(ee))}let[w,z]=ii(i,n);if(u.fill!=null||w!=0){let N=ne.fill=new Path2D(Z),ee=u.fillTo(i,n,u.min,u.max,w),M=q(ee),j=y(p[a]),P=y(p[c]);D==-1&&([P,j]=[j,P]),C(N,P,M),C(N,j,M)}if(!u.spanGaps){let N=[];Q&&N.push(...ai(p,v,a,c,D,y,l)),ne.gaps=N=u.gaps(i,n,a,c,N),ne.clip=ns(N,h.ori,O,k,Y,X)}return z!=0&&(ne.band=z==2?[Tl(i,n,a,c,Z,-1),Tl(i,n,a,c,Z,1)]:Tl(i,n,a,c,Z,z)),ne})}function Nu(e){const l=Fe(e.align,1),i=Fe(e.ascDesc,!1),n=Fe(e.alignGaps,0),a=Fe(e.extend,!1);return(c,u,p,v)=>Ul(c,u,(h,S,m,_,O,k,Y,X,te,y,q)=>{[p,v]=Xn(m,p,v);let C=h.pxRound,{left:R,width:D}=c.bbox,ne=ce=>C(k(ce,_,y,X)),Z=ce=>C(Y(ce,O,q,te)),Q=_.ori==0?fn:dn;const le={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:un},w=le.stroke,z=_.dir*(_.ori==0?1:-1);let N=Z(m[z==1?p:v]),ee=ne(S[z==1?p:v]),M=ee,j=ee;a&&l==-1&&(j=R,Q(w,j,N)),Q(w,ee,N);for(let ce=z==1?p:v;ce>=p&&ce<=v;ce+=z){let ge=m[ce];if(ge==null)continue;let se=ne(S[ce]),K=Z(ge);l==1?Q(w,se,N):Q(w,M,K),Q(w,se,K),N=K,M=se}let P=M;a&&l==1&&(P=R+D,Q(w,P,N));let[Se,he]=ii(c,u);if(h.fill!=null||Se!=0){let ce=le.fill=new Path2D(w),ge=h.fillTo(c,u,h.min,h.max,Se),se=Z(ge);Q(ce,P,se),Q(ce,j,se)}if(!h.spanGaps){let ce=[];ce.push(...ai(S,m,p,v,z,ne,n));let ge=h.width*Ne/2,se=i||l==1?ge:-ge,K=i||l==-1?-ge:ge;ce.forEach(Ce=>{Ce[0]+=se,Ce[1]+=K}),le.gaps=ce=h.gaps(c,u,p,v,ce),le.clip=ns(ce,_.ori,X,te,y,q)}return he!=0&&(le.band=he==2?[Tl(c,u,p,v,w,-1),Tl(c,u,p,v,w,1)]:Tl(c,u,p,v,w,he)),le})}function ga(e,l,i,n,a,c,u=Ye){if(e.length>1){let p=null;for(let v=0,h=1/0;v<e.length;v++)if(l[v]!==void 0){if(p!=null){let S=kt(e[v]-e[p]);S<h&&(h=S,u=kt(i(e[v],n,a,c)-i(e[p],n,a,c)))}p=v}}return u}function Gu(e){e=e||An;const l=Fe(e.size,[.6,Ye,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Me(a),u=1-l[0],p=Fe(l[1],Ye),v=Fe(l[2],1),h=Fe(e.disp,An),S=Fe(e.each,O=>{}),{fill:m,stroke:_}=h;return(O,k,Y,X)=>Ul(O,k,(te,y,q,C,R,D,ne,Z,Q,le,w)=>{let z=te.pxRound,N=i,ee=n*Ne,M=p*Ne,j=v*Ne,P,Se;C.ori==0?[P,Se]=c(O,k):[Se,P]=c(O,k);const he=C.dir*(C.ori==0?1:-1);let ce=C.ori==0?as:ri,ge=C.ori==0?S:(G,ke,We,Kt,jt,Ct,It)=>{S(G,ke,We,jt,Kt,It,Ct)},se=Fe(O.bands,ei).find(G=>G.series[0]==k),K=se!=null?se.dir:0,Ce=te.fillTo(O,k,te.min,te.max,K),Ke=z(ne(Ce,R,w,Q)),be,_e,st,Ve=le,Ee=z(te.width*Ne),it=!1,pt=null,je=null,tt=null,Mt=null;m!=null&&(Ee==0||_!=null)&&(it=!0,pt=m.values(O,k,Y,X),je=new Map,new Set(pt).forEach(G=>{G!=null&&je.set(G,new Path2D)}),Ee>0&&(tt=_.values(O,k,Y,X),Mt=new Map,new Set(tt).forEach(G=>{G!=null&&Mt.set(G,new Path2D)})));let{x0:xe,size:lt}=h;if(xe!=null&&lt!=null){N=1,y=xe.values(O,k,Y,X),xe.unit==2&&(y=y.map(We=>O.posToVal(Z+We*le,C.key,!0)));let G=lt.values(O,k,Y,X);lt.unit==2?_e=G[0]*le:_e=D(G[0],C,le,Z)-D(0,C,le,Z),Ve=ga(y,q,D,C,le,Z,Ve),st=Ve-_e+ee}else Ve=ga(y,q,D,C,le,Z,Ve),st=Ve*u+ee,_e=Ve-st;st<1&&(st=0),Ee>=_e/2&&(Ee=0),st<5&&(z=La);let at=st>0,_t=Ve-st-(at?Ee:0);_e=z(Is(_t,j,M)),be=(N==0?_e/2:N==he?0:_e)-N*he*((N==0?ee/2:0)+(at?Ee/2:0));const He={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},At=it?null:new Path2D;let Vt=null;if(se!=null)Vt=O.data[se.series[1]];else{let{y0:G,y1:ke}=h;G!=null&&ke!=null&&(q=ke.values(O,k,Y,X),Vt=G.values(O,k,Y,X))}let wt=P*_e,de=Se*_e;for(let G=he==1?Y:X;G>=Y&&G<=X;G+=he){let ke=q[G];if(ke==null)continue;if(Vt!=null){let F=Vt[G]??0;if(ke-F==0)continue;Ke=ne(F,R,w,Q)}let We=C.distr!=2||h!=null?y[G]:G,Kt=D(We,C,le,Z),jt=ne(Fe(ke,Ce),R,w,Q),Ct=z(Kt-be),It=z(Yt(jt,Ke)),rt=z(hl(jt,Ke)),xt=It-rt;if(ke!=null){let F=ke<0?de:wt,H=ke<0?wt:de;it?(Ee>0&&tt[G]!=null&&ce(Mt.get(tt[G]),Ct,rt+tl(Ee/2),_e,Yt(0,xt-Ee),F,H),pt[G]!=null&&ce(je.get(pt[G]),Ct,rt+tl(Ee/2),_e,Yt(0,xt-Ee),F,H)):ce(At,Ct,rt+tl(Ee/2),_e,Yt(0,xt-Ee),F,H),ge(O,k,G,Ct-Ee/2,rt,_e+Ee,xt)}}return Ee>0?He.stroke=it?Mt:At:it||(He._fill=te.width==0?te._fill:te._stroke??te._fill,He.width=0),He.fill=it?je:At,He})}function zu(e,l){const i=Fe(l?.alignGaps,0);return(n,a,c,u)=>Ul(n,a,(p,v,h,S,m,_,O,k,Y,X,te)=>{[c,u]=Xn(h,c,u);let y=p.pxRound,q=P=>y(_(P,S,X,k)),C=P=>y(O(P,m,te,Y)),R,D,ne;S.ori==0?(R=ss,ne=fn,D=sr):(R=is,ne=dn,D=ir);const Z=S.dir*(S.ori==0?1:-1);let Q=q(v[Z==1?c:u]),le=Q,w=[],z=[];for(let P=Z==1?c:u;P>=c&&P<=u;P+=Z)if(h[P]!=null){let he=v[P],ce=q(he);w.push(le=ce),z.push(C(h[P]))}const N={stroke:e(w,z,R,ne,D,y),fill:null,clip:null,band:null,gaps:null,flags:un},ee=N.stroke;let[M,j]=ii(n,a);if(p.fill!=null||M!=0){let P=N.fill=new Path2D(ee),Se=p.fillTo(n,a,p.min,p.max,M),he=C(Se);ne(P,le,he),ne(P,Q,he)}if(!p.spanGaps){let P=[];P.push(...ai(v,h,c,u,Z,q,i)),N.gaps=P=p.gaps(n,a,c,u,P),N.clip=ns(P,S.ori,k,Y,X,te)}return j!=0&&(N.band=j==2?[Tl(n,a,c,u,ee,-1),Tl(n,a,c,u,ee,1)]:Tl(n,a,c,u,ee,j)),N})}function Vu(e){return zu(Iu,e)}function Iu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let v=Array(u),h=Array(u-1),S=Array(u-1),m=Array(u-1);for(let _=0;_<u-1;_++)S[_]=l[_+1]-l[_],m[_]=e[_+1]-e[_],h[_]=S[_]/m[_];v[0]=h[0];for(let _=1;_<u-1;_++)h[_]===0||h[_-1]===0||h[_-1]>0!=h[_]>0?v[_]=0:(v[_]=3*(m[_-1]+m[_])/((2*m[_]+m[_-1])/h[_-1]+(m[_]+2*m[_-1])/h[_]),isFinite(v[_])||(v[_]=0));v[u-1]=h[u-2];for(let _=0;_<u-1;_++)a(p,e[_]+m[_]/3,l[_]+v[_]*m[_]/3,e[_+1]-m[_]/3,l[_+1]-v[_+1]*m[_]/3,e[_+1],l[_+1])}return p}const Us=new Set;function ma(){for(let e of Us)e.syncRect(!0)}cn&&(Hl(xo,sn,ma),Hl(bo,sn,ma,!0),Hl(Kn,sn,()=>{Tt.pxRatio=Ne}));const Bu=or(),Hu=ar();function _a(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ys(c,u,l,i))}function Wu(e,l){return e.map((i,n)=>n==0?{}:mt({},l,i))}function Ys(e,l,i,n){return mt({},l==0?i:n,e)}function ur(e,l,i){return l==null?rn:[l,i]}const Uu=ur;function Yu(e,l,i){return l==null?rn:jn(l,i,$s,!0)}function cr(e,l,i,n){return l==null?rn:es(l,i,e.scales[n].log,!1)}const qu=cr;function fr(e,l,i,n){return l==null?rn:Qs(l,i,e.scales[n].log,!1)}const Ku=fr;function ju(e,l,i,n,a){let c=Yt(Zi(e),Zi(l)),u=l-e,p=vl(a/n*u,i);do{let v=i[p],h=n*v/u;if(h>=a&&c+(v<5?Rl.get(v):0)<=17)return[v,h]}while(++p<i.length);return[0,0]}function wa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=St((i=+a)*Ne))+"px"),[e,l,i]}function Ju(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=qe(l[2]*Ne,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function Tt(e,l,i){const n={mode:Fe(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let v=!1;n.status=0;const h=n.root=rl(to);if(e.id!=null&&(h.id=e.id),el(h,e.class),e.title){let t=rl(so,h);t.textContent=e.title}const S=pl("canvas"),m=n.ctx=S.getContext("2d"),_=rl(io,h);Hl("click",_,t=>{t.target===k&&(Je!=Zl||et!=Ql)&&zt.click(n,t)},!0);const O=n.under=rl(ao,_);_.appendChild(S);const k=n.over=rl(ro,_);e=on(e);const Y=+Fe(e.pxAlign,1),X=ha(Y);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const te=e.ms||.001,y=n.series=a==1?_a(e.series||[],oa,pa,!1):Wu(e.series||[null],da),q=n.axes=_a(e.axes||[],ra,ca,!0),C=n.scales={},R=n.bands=e.bands||[];R.forEach(t=>{t.fill=Me(t.fill||null),t.dir=Fe(t.dir,-1)});const D=a==2?y[1].facets[0].scale:y[0].scale,ne={axes:wr,series:vr},Z=(e.drawOrder||["axes","series"]).map(t=>ne[t]);function Q(t){const s=t.distr==3?r=>kl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ls(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:g}=t,b=g-f;return(o-f)/b}}function le(t){let s=C[t];if(s==null){let r=(e.scales||An)[t]||An;if(r.from!=null){le(r.from);let o=mt({},C[r.from],r,{key:t});o.valToPct=Q(o),C[t]=o}else{s=C[t]=mt({},t==D?Xa:Lu,r),s.key=t;let o=s.time,f=s.range,g=Pl(f);if((t!=D||a==2&&!o)&&(g&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ki:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ki:{mode:1,hard:f[1],soft:f[1]}},g=!1),!g&&ls(f))){let b=f;f=(T,L,W)=>L==null?rn:jn(L,W,b)}s.range=Me(f||(o?Uu:t==D?s.distr==3?qu:s.distr==4?Ku:ur:s.distr==3?cr:s.distr==4?fr:Yu)),s.auto=Me(g?!1:s.auto),s.clamp=Me(s.clamp||Du),s._min=s._max=null,s.valToPct=Q(s)}}}le("x"),le("y"),a==1&&y.forEach(t=>{le(t.scale)}),q.forEach(t=>{le(t.scale)});for(let t in e.scales)le(t);const w=C[D],z=w.distr;let N,ee;w.ori==0?(el(h,lo),N=c,ee=u):(el(h,no),N=u,ee=c);const M={};for(let t in C){let s=C[t];(s.min!=null||s.max!=null)&&(M[t]={min:s.min,max:s.max},s.min=s.max=null)}const j=e.tzDate||(t=>new Date(St(t/te))),P=e.fmtDate||ti,Se=te==1?nu(j):au(j),he=sa(j,na(te==1?lu:iu,P)),ce=aa(j,ia(ou,P)),ge=[],se=n.legend=mt({},fu,e.legend),K=n.cursor=mt({},mu,{drag:{y:a==2}},e.cursor),Ce=se.show,Ke=K.show,be=se.markers;se.idxs=ge,be.width=Me(be.width),be.dash=Me(be.dash),be.stroke=Me(be.stroke),be.fill=Me(be.fill);let _e,st,Ve,Ee=[],it=[],pt,je=!1,tt={};if(se.live){const t=y[1]?y[1].values:null;je=t!=null,pt=je?t(n,1,0):{_:0};for(let s in pt)tt[s]=Js}if(Ce)if(_e=pl("table",vo,h),Ve=pl("tbody",null,_e),se.mount(n,_e),je){st=pl("thead",null,_e,Ve);let t=pl("tr",null,st);pl("th",null,t);for(var Mt in pt)pl("th",Fi,t).textContent=Mt}else el(_e,go),se.live&&el(_e,ho);const xe={show:!0},lt={show:!1};function at(t,s){if(s==0&&(je||!se.live||a==2))return rn;let r=[],o=pl("tr",mo,Ve,Ve.childNodes[s]);el(o,t.class),t.show||el(o,Il);let f=pl("th",null,o);if(be.show){let T=rl(_o,f);if(s>0){let L=be.width(n,s);L&&(T.style.border=L+"px "+be.dash(n,s)+" "+be.stroke(n,s)),T.style.background=be.fill(n,s)}}let g=rl(Fi,f);t.label instanceof HTMLElement?g.appendChild(t.label):g.textContent=t.label,s>0&&(be.show||(g.style.color=t.width>0?be.stroke(n,s):be.fill(n,s)),He("click",f,T=>{if(K._lock)return;yt(T);let L=y.indexOf(t);if((T.ctrlKey||T.metaKey)!=se.isolate){let W=y.some((U,$)=>$>0&&$!=L&&U.show);y.forEach((U,$)=>{$>0&&ml($,W?$==L?xe:lt:xe,!0,gt.setSeries)})}else ml(L,{show:!t.show},!0,gt.setSeries)},!1),Le&&He(zi,f,T=>{K._lock||(yt(T),ml(y.indexOf(t),Xl,!0,gt.setSeries))},!1));for(var b in pt){let T=pl("td",wo,o);T.textContent="--",r.push(T)}return[o,r]}const _t=new Map;function He(t,s,r,o=!0){const f=_t.get(s)||{},g=K.bind[t](n,s,r,o);g&&(Hl(t,s,f[t]=g),_t.set(s,f))}function At(t,s,r){const o=_t.get(s)||{};for(let f in o)(t==null||f==t)&&(Vs(f,s,o[f]),delete o[f]);t==null&&_t.delete(s)}let Vt=0,wt=0,de=0,G=0,ke=0,We=0,Kt=ke,jt=We,Ct=de,It=G,rt=0,xt=0,F=0,H=0;n.bbox={};let ie=!1,ue=!1,ae=!1,oe=!1,V=!1,x=!1;function I(t,s,r){(r||t!=n.width||s!=n.height)&&J(t,s),ql(!1),ae=!0,ue=!0,Kl()}function J(t,s){n.width=Vt=de=t,n.height=wt=G=s,ke=We=0,ht(),Dt();let r=n.bbox;rt=r.left=zl(ke*Ne,.5),xt=r.top=zl(We*Ne,.5),F=r.width=zl(de*Ne,.5),H=r.height=zl(G*Ne,.5)}const me=3;function De(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==me||r&&o,t||(J(n.width,n.height),ue=!0)}}function bt({width:t,height:s}){I(t,s)}n.setSize=bt;function ht(){let t=!1,s=!1,r=!1,o=!1;q.forEach((f,g)=>{if(f.show&&f._show){let{side:b,_size:T}=f,L=b%2,W=f.label!=null?f.labelSize:0,U=T+W;U>0&&(L?(de-=U,b==3?(ke+=U,o=!0):r=!0):(G-=U,b==0?(We+=U,t=!0):s=!0))}}),Bt[0]=t,Bt[1]=r,Bt[2]=s,Bt[3]=o,de-=ut[1]+ut[3],ke+=ut[3],G-=ut[2]+ut[0],We+=ut[0]}function Dt(){let t=ke+de,s=We+G,r=ke,o=We;function f(g,b){switch(g){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}q.forEach((g,b)=>{if(g.show&&g._show){let T=g.side;g._pos=f(T,g._size),g.label!=null&&(g._lpos=f(T,g.labelSize))}})}if(K.dataIdx==null){let t=K.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Me(t.prox),o=t.bias??=0;K.dataIdx=(f,g,b,T)=>{if(g==0)return b;let L=b,W=r(f,g,b,T)??Ye,U=W>=0&&W<Ye,$=w.ori==0?de:G,ve=K.left,Oe=l[0],Re=l[g];if(s.has(Re[b])){L=null;let Te=null,fe=null,re;if(o==0||o==-1)for(re=b;Te==null&&re-- >0;)s.has(Re[re])||(Te=re);if(o==0||o==1)for(re=b;fe==null&&re++<Re.length;)s.has(Re[re])||(fe=re);if(Te!=null||fe!=null)if(U){let Qe=Te==null?-1/0:N(Oe[Te],w,$,0),ct=fe==null?1/0:N(Oe[fe],w,$,0),Nt=ve-Qe,Be=ct-ve;Nt<=Be?Nt<=W&&(L=Te):Be<=W&&(L=fe)}else L=fe==null?Te:Te==null?fe:b-Te<=fe-b?Te:fe}else U&&kt(ve-N(Oe[b],w,$,0))>W&&(L=null);return L}}const yt=t=>{K.event=t};K.idxs=ge,K._lock=!1;let Xe=K.points;Xe.show=Me(Xe.show),Xe.size=Me(Xe.size),Xe.stroke=Me(Xe.stroke),Xe.width=Me(Xe.width),Xe.fill=Me(Xe.fill);const ot=n.focus=mt({},e.focus||{alpha:.3},K.focus),Le=ot.prox>=0,Ie=Le&&Xe.one;let Pe=[],Gt=[],nl=[];function El(t,s){let r=Xe.show(n,s);if(r instanceof HTMLElement)return el(r,po),el(r,t.class),bl(r,-10,-10,de,G),k.insertBefore(r,Pe[s]),r}function Jt(t,s){if(a==1||s>0){let r=a==1&&C[t.scale].time,o=t.value;t.value=r?Xi(o)?aa(j,ia(o,P)):o||ce:o||Mu,t.label=t.label||(r?wu:_u)}if(Ie||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Bu||Lo,t.fillTo=Me(t.fillTo||Pu),t.pxAlign=+Fe(t.pxAlign,Y),t.pxRound=ha(t.pxAlign),t.stroke=Me(t.stroke||null),t.fill=Me(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Au(Yt(1,t.width),1),o=t.points=mt({},{size:r,width:Yt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=Me(o.show),o.filter=Me(o.filter),o.fill=Me(o.fill),o.stroke=Me(o.stroke),o.paths=Me(o.paths),o.pxAlign=t.pxAlign}if(Ce){let r=at(t,s);Ee.splice(s,0,r[0]),it.splice(s,0,r[1]),se.values.push(null)}if(Ke){ge.splice(s,0,null);let r=null;Ie?s==0&&(r=El(t,s)):s>0&&(r=El(t,s)),Pe.splice(s,0,r),Gt.splice(s,0,0),nl.splice(s,0,0)}Ot("addSeries",s)}function sl(t,s){s=s??y.length,t=a==1?Ys(t,s,oa,pa):Ys(t,s,{},da),y.splice(s,0,t),Jt(y[s],s)}n.addSeries=sl;function Zt(t){if(y.splice(t,1),Ce){se.values.splice(t,1),it.splice(t,1);let s=Ee.splice(t,1)[0];At(null,s.firstChild),s.remove()}Ke&&(ge.splice(t,1),Pe.splice(t,1)[0].remove(),Gt.splice(t,1),nl.splice(t,1)),Ot("delSeries",t)}n.delSeries=Zt;const Bt=[!1,!1,!1,!1];function Fl(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=C[t.scale];o==null&&(t.scale=r?y[1].scale:D,o=C[t.scale]);let f=o.time;t.size=Me(t.size),t.space=Me(t.space),t.rotate=Me(t.rotate),Pl(t.incrs)&&t.incrs.forEach(b=>{!Rl.has(b)&&Rl.set(b,Fa(b))}),t.incrs=Me(t.incrs||(o.distr==2?Xo:f?te==1?tu:su:Vl)),t.splits=Me(t.splits||(f&&o.distr==1?Se:o.distr==3?Bs:o.distr==4?yu:bu)),t.stroke=Me(t.stroke),t.grid.stroke=Me(t.grid.stroke),t.ticks.stroke=Me(t.ticks.stroke),t.border.stroke=Me(t.border.stroke);let g=t.values;t.values=Pl(g)&&!Pl(g[0])?Me(g):f?Pl(g)?sa(j,na(g,P)):Xi(g)?ru(j,g):g||he:g||xu,t.filter=Me(t.filter||(o.distr>=3&&o.log==10?Tu:o.distr==3&&o.log==2?Eu:Pa)),t.font=wa(t.font),t.labelFont=wa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(Bt[s]=!0,t._el=rl(oo,_))}}function ul(t,s,r,o){let[f,g,b,T]=r,L=s%2,W=0;return L==0&&(T||g)&&(W=s==0&&!f||s==2&&!b?St(ra.size/3):0),L==1&&(f||b)&&(W=s==1&&!g||s==3&&!T?St(ca.size/2):0),W}const Ml=n.padding=(e.padding||[ul,ul,ul,ul]).map(t=>Me(Fe(t,ul))),ut=n._padding=Ml.map((t,s)=>t(n,s,Bt,0));let vt,Lt=null,Pt=null;const Rn=a==1?y[0].idxs:null;let cl=null,pn=!1;function oi(t,s){if(l=t??[],n.data=n._data=l,a==2){vt=0;for(let r=1;r<y.length;r++)vt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),cl=l[0],vt=cl.length;let r=l;if(z==2){r=l.slice();let o=r[0]=Array(vt);for(let f=0;f<vt;f++)o[f]=f}n._data=l=r}if(ql(!0),Ot("setData"),z==2&&(ae=!0),s!==!1){let r=w;r.auto(n,pn)?rs():Cl(D,r.min,r.max),oe=oe||K.left>=0,x=!0,Kl()}}n.setData=oi;function rs(){pn=!0;let t,s;a==1&&(vt>0?(Lt=Rn[0]=0,Pt=Rn[1]=vt-1,t=l[0][Lt],s=l[0][Pt],z==2?(t=Lt,s=Pt):t==s&&(z==3?[t,s]=es(t,t,w.log,!1):z==4?[t,s]=Qs(t,t,w.log,!1):w.time?s=t+St(86400/te):[t,s]=jn(t,s,$s,!0))):(Lt=Rn[0]=t=null,Pt=Rn[1]=s=null)),Cl(D,t,s)}let Fn,Yl,os,us,cs,fs,ds,ps,vs,qt;function ui(t,s,r,o,f,g){t??=Ni,r??=ei,o??="butt",f??=Ni,g??="round",t!=Fn&&(m.strokeStyle=Fn=t),f!=Yl&&(m.fillStyle=Yl=f),s!=os&&(m.lineWidth=os=s),g!=cs&&(m.lineJoin=cs=g),o!=fs&&(m.lineCap=fs=o),r!=us&&m.setLineDash(us=r)}function ci(t,s,r,o){s!=Yl&&(m.fillStyle=Yl=s),t!=ds&&(m.font=ds=t),r!=ps&&(m.textAlign=ps=r),o!=vs&&(m.textBaseline=vs=o)}function hs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,pn)&&(s==null||s.min==null)){let g=Fe(Lt,0),b=Fe(Pt,o.length-1),T=r.min==null?To(o,g,b,f,t.distr==3):[r.min,r.max];t.min=hl(t.min,r.min=T[0]),t.max=Yt(t.max,r.max=T[1])}}const fi={min:null,max:null};function dr(){for(let o in C){let f=C[o];M[o]==null&&(f.min==null||M[D]!=null&&f.auto(n,pn))&&(M[o]=fi)}for(let o in C){let f=C[o];M[o]==null&&f.from!=null&&M[f.from]!=null&&(M[o]=fi)}M[D]!=null&&ql(!0);let t={};for(let o in M){let f=M[o];if(f!=null){let g=t[o]=on(C[o],Fo);if(f.min!=null)mt(g,f);else if(o!=D||a==2)if(vt==0&&g.from==null){let b=g.range(n,null,null,o);g.min=b[0],g.max=b[1]}else g.min=Ye,g.max=-Ye}}if(vt>0){y.forEach((o,f)=>{if(a==1){let g=o.scale,b=M[g];if(b==null)return;let T=t[g];if(f==0){let L=T.range(n,T.min,T.max,g);T.min=L[0],T.max=L[1],Lt=vl(T.min,l[0]),Pt=vl(T.max,l[0]),Pt-Lt>1&&(l[0][Lt]<T.min&&Lt++,l[0][Pt]>T.max&&Pt--),o.min=cl[Lt],o.max=cl[Pt]}else o.show&&o.auto&&hs(T,b,o,l[f],o.sorted);o.idxs[0]=Lt,o.idxs[1]=Pt}else if(f>0&&o.show&&o.auto){let[g,b]=o.facets,T=g.scale,L=b.scale,[W,U]=l[f],$=t[T],ve=t[L];$!=null&&hs($,M[T],g,W,g.sorted),ve!=null&&hs(ve,M[L],b,U,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],g=M[o];if(f.from==null&&(g==null||g.min==null)){let b=f.range(n,f.min==Ye?null:f.min,f.max==-Ye?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let g=t[f.from];if(g.min==null)f.min=f.max=null;else{let b=f.range(n,g.min,g.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],g=C[o];if(g.min!=f.min||g.max!=f.max){g.min=f.min,g.max=f.max;let b=g.distr;g._min=b==3?kl(g.min):b==4?Ls(g.min,g.asinh):b==100?g.fwd(g.min):g.min,g._max=b==3?kl(g.max):b==4?Ls(g.max,g.asinh):b==100?g.fwd(g.max):g.max,s[o]=r=!0}}if(r){y.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)ae=!0,Ot("setScale",o);Ke&&K.left>=0&&(oe=x=!0)}for(let o in M)M[o]=null}function pr(t){let s=Is(Lt-1,0,vt-1),r=Is(Pt+1,0,vt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<vt-1;)r++;return[s,r]}function vr(){if(vt>0){let t=y.some(s=>s._focus)&&qt!=ot.alpha;t&&(m.globalAlpha=qt=ot.alpha),y.forEach((s,r)=>{if(r>0&&s.show&&(di(r,!1),di(r,!0),s._paths==null)){let o=qt;qt!=s.alpha&&(m.globalAlpha=qt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),qt!=o&&(m.globalAlpha=qt=o)}}),y.forEach((s,r)=>{if(r>0&&s.show){let o=qt;qt!=s.alpha&&(m.globalAlpha=qt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,g=s.points.show(n,r,Lt,Pt,f),b=s.points.filter(n,r,g,f);(g||b)&&(s.points._paths=s.points.paths(n,r,Lt,Pt,b),pi(r,!0))}qt!=o&&(m.globalAlpha=qt=o),Ot("drawSeries",r)}}),t&&(m.globalAlpha=qt=1)}}function di(t,s){let r=s?y[t].points:y[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?y[t].points:y[t],{stroke:o,fill:f,clip:g,flags:b,_stroke:T=r._stroke,_fill:L=r._fill,_width:W=r.width}=r._paths;W=qe(W*Ne,3);let U=null,$=W%2/2;s&&L==null&&(L=W>0?"#fff":T);let ve=r.pxAlign==1&&$>0;if(ve&&m.translate($,$),!s){let Oe=rt-W/2,Re=xt-W/2,Te=F+W,fe=H+W;U=new Path2D,U.rect(Oe,Re,Te,fe)}s?gs(T,W,r.dash,r.cap,L,o,f,b,g):hr(t,T,W,r.dash,r.cap,L,o,f,b,U,g),ve&&m.translate(-$,-$)}function hr(t,s,r,o,f,g,b,T,L,W,U){let $=!1;L!=0&&R.forEach((ve,Oe)=>{if(ve.series[0]==t){let Re=y[ve.series[1]],Te=l[ve.series[1]],fe=(Re._paths||An).band;Pl(fe)&&(fe=ve.dir==1?fe[0]:fe[1]);let re,Qe=null;Re.show&&fe&&Mo(Te,Lt,Pt)?(Qe=ve.fill(n,Oe)||g,re=Re._paths.clip):fe=null,gs(s,r,o,f,Qe,b,T,L,W,U,re,fe),$=!0}}),$||gs(s,r,o,f,g,b,T,L,W,U)}const vi=un|Ws;function gs(t,s,r,o,f,g,b,T,L,W,U,$){ui(t,s,r,o,f),(L||W||$)&&(m.save(),L&&m.clip(L),W&&m.clip(W)),$?(T&vi)==vi?(m.clip($),U&&m.clip(U),Nn(f,b),On(t,g,s)):T&Ws?(Nn(f,b),m.clip($),On(t,g,s)):T&un&&(m.save(),m.clip($),U&&m.clip(U),Nn(f,b),m.restore(),On(t,g,s)):(Nn(f,b),On(t,g,s)),(L||W||$)&&m.restore()}function On(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=Fn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function Nn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Yl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function gr(t,s,r,o){let f=q[t],g;if(o<=0)g=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);g=ju(s,r,T,o,b)}return f._found=g}function ms(t,s,r,o,f,g,b,T,L,W){let U=b%2/2;Y==1&&m.translate(U,U),ui(T,b,L,W,T),m.beginPath();let $,ve,Oe,Re,Te=f+(o==0||o==3?-g:g);r==0?(ve=f,Re=Te):($=f,Oe=Te);for(let fe=0;fe<t.length;fe++)s[fe]!=null&&(r==0?$=Oe=t[fe]:ve=Re=t[fe],m.moveTo($,ve),m.lineTo(Oe,Re));m.stroke(),Y==1&&m.translate(-U,-U)}function mr(t){let s=!0;return q.forEach((r,o)=>{if(!r.show)return;let f=C[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,ql(!1));return}else r._show||(s=!1,r._show=!0,ql(!1));let g=r.side,b=g%2,{min:T,max:L}=f,[W,U]=gr(o,T,L,b==0?de:G);if(U==0)return;let $=f.distr==2,ve=r._splits=r.splits(n,o,T,L,W,U,$),Oe=f.distr==2?ve.map(re=>cl[re]):ve,Re=f.distr==2?cl[ve[1]]-cl[ve[0]]:W,Te=r._values=r.values(n,r.filter(n,Oe,o,U,Re),o,U,Re);r._rotate=g==2?r.rotate(n,Te,o,U):0;let fe=r._size;r._size=ol(r.size(n,Te,o,t)),fe!=null&&r._size!=fe&&(s=!1)}),s}function _r(t){let s=!0;return Ml.forEach((r,o)=>{let f=r(n,o,Bt,t);f!=ut[o]&&(s=!1),ut[o]=f}),s}function wr(){for(let t=0;t<q.length;t++){let s=q[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,g,b=s.stroke(n,t),T=r==0||r==3?-1:1,[L,W]=s._found;if(s.label!=null){let Wt=s.labelGap*T,Xt=St((s._lpos+Wt)*Ne);ci(s.labelFont[0],b,"center",r==2?xn:Oi),m.save(),o==1?(f=g=0,m.translate(Xt,St(xt+H/2)),m.rotate((r==3?-Un:Un)/2)):(f=St(rt+F/2),g=Xt);let Gl=Da(s.label)?s.label(n,t,L,W):s.label;m.fillText(Gl,f,g),m.restore()}if(W==0)continue;let U=C[s.scale],$=o==0?F:H,ve=o==0?rt:xt,Oe=s._splits,Re=U.distr==2?Oe.map(Wt=>cl[Wt]):Oe,Te=U.distr==2?cl[Oe[1]]-cl[Oe[0]]:L,fe=s.ticks,re=s.border,Qe=fe.show?fe.size:0,ct=St(Qe*Ne),Nt=St((s.alignTo==2?s._size-Qe-s.gap:s.gap)*Ne),Be=s._rotate*-Un/180,ft=X(s._pos*Ne),Qt=(ct+Nt)*T,Ht=ft+Qt;g=o==0?Ht:0,f=o==1?Ht:0;let il=s.font[0],fl=s.align==1?tn:s.align==2?As:Be>0?tn:Be<0?As:o==0?"center":r==3?As:tn,wl=Be||o==1?"middle":r==2?xn:Oi;ci(il,b,fl,wl);let $t=s.font[1]*s.lineGap,al=Oe.map(Wt=>X(p(Wt,U,$,ve))),dl=s._values;for(let Wt=0;Wt<dl.length;Wt++){let Xt=dl[Wt];if(Xt!=null){o==0?f=al[Wt]:g=al[Wt],Xt=""+Xt;let Gl=Xt.indexOf(`
`)==-1?[Xt]:Xt.split(/\n/gm);for(let Ut=0;Ut<Gl.length;Ut++){let Ri=Gl[Ut];Be?(m.save(),m.translate(f,g+Ut*$t),m.rotate(Be),m.fillText(Ri,0,0),m.restore()):m.fillText(Ri,f,g+Ut*$t)}}}fe.show&&ms(al,fe.filter(n,Re,t,W,Te),o,r,ft,ct,qe(fe.width*Ne,3),fe.stroke(n,t),fe.dash,fe.cap);let xl=s.grid;xl.show&&ms(al,xl.filter(n,Re,t,W,Te),o,o==0?2:1,o==0?xt:rt,o==0?H:F,qe(xl.width*Ne,3),xl.stroke(n,t),xl.dash,xl.cap),re.show&&ms([ft],[1],o==0?1:0,o==0?1:2,o==1?xt:rt,o==1?H:F,qe(re.width*Ne,3),re.stroke(n,t),re.dash,re.cap)}Ot("drawAxes")}function ql(t){y.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Gn=!1,_s=!1,vn=[];function xr(){_s=!1;for(let t=0;t<vn.length;t++)Ot(...vn[t]);vn.length=0}function Kl(){Gn||(Bo(hi),Gn=!0)}function br(t,s=!1){Gn=!0,_s=s,t(n),hi(),s&&vn.length>0&&queueMicrotask(xr)}n.batch=br;function hi(){if(ie&&(dr(),ie=!1),ae&&(De(),ae=!1),ue){if($e(O,tn,ke),$e(O,xn,We),$e(O,yn,de),$e(O,Sn,G),$e(k,tn,ke),$e(k,xn,We),$e(k,yn,de),$e(k,Sn,G),$e(_,yn,Vt),$e(_,Sn,wt),S.width=St(Vt*Ne),S.height=St(wt*Ne),q.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let g=f===3||f===0?r:0,b=f%2==1;$e(t,b?"left":"top",o-g),$e(t,b?"width":"height",r),$e(t,b?"top":"left",b?We:ke),$e(t,b?"height":"width",b?G:de),zs(t,Il)}else el(t,Il)}),Fn=Yl=os=cs=fs=ds=ps=vs=us=null,qt=1,mn(!0),ke!=Kt||We!=jt||de!=Ct||G!=It){ql(!1);let t=de/Ct,s=G/It;if(Ke&&!oe&&K.left>=0){K.left*=t,K.top*=s,jl&&bl(jl,St(K.left),0,de,G),Jl&&bl(Jl,0,St(K.top),de,G);for(let r=0;r<Pe.length;r++){let o=Pe[r];o!=null&&(Gt[r]*=t,nl[r]*=s,bl(o,ol(Gt[r]),ol(nl[r]),de,G))}}if(Ze.show&&!V&&Ze.left>=0&&Ze.width>0){Ze.left*=t,Ze.width*=t,Ze.top*=s,Ze.height*=s;for(let r in ks)$e($l,r,Ze[r])}Kt=ke,jt=We,Ct=de,It=G}Ot("setSize"),ue=!1}Vt>0&&wt>0&&(m.clearRect(0,0,S.width,S.height),Ot("drawClear"),Z.forEach(t=>t()),Ot("draw")),Ze.show&&V&&(zn(Ze),V=!1),Ke&&oe&&(Nl(null,!0,!1),oe=!1),se.show&&se.live&&x&&(ys(),x=!1),v||(v=!0,n.status=1,Ot("ready")),pn=!1,Gn=!1}n.redraw=(t,s)=>{ae=s||!1,t!==!1?Cl(D,w.min,w.max):Kl()};function ws(t,s){let r=C[t];if(r.from==null){if(vt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(vt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==D&&r.distr==2&&vt>0&&(s.min=vl(s.min,l[0]),s.max=vl(s.max,l[0]),s.min==s.max&&s.max++),M[t]=s,ie=!0,Kl()}}n.setScale=ws;let xs,bs,jl,Jl,gi,mi,Zl,Ql,_i,wi,Je,et,Al=!1;const zt=K.drag;let Rt=zt.x,Ft=zt.y;Ke&&(K.x&&(xs=rl(co,k)),K.y&&(bs=rl(fo,k)),w.ori==0?(jl=xs,Jl=bs):(jl=bs,Jl=xs),Je=K.left,et=K.top);const Ze=n.select=mt({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),$l=Ze.show?rl(uo,Ze.over?k:O):null;function zn(t,s){if(Ze.show){for(let r in t)Ze[r]=t[r],r in ks&&$e($l,r,t[r]);s!==!1&&Ot("setSelect")}}n.setSelect=zn;function yr(t){if(y[t].show)Ce&&zs(Ee[t],Il);else if(Ce&&el(Ee[t],Il),Ke){let r=Ie?Pe[0]:Pe[t];r!=null&&bl(r,-10,-10,de,G)}}function Cl(t,s,r){ws(t,{min:s,max:r})}function ml(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&y.forEach((f,g)=>{g>0&&(t==g||t==null)&&(f.show=s.show,yr(g),a==2?(Cl(f.facets[0].scale,null,null),Cl(f.facets[1].scale,null,null)):Cl(f.scale,null,null),Kl())}),r!==!1&&Ot("setSeries",t,s),o&&_n("setSeries",n,t,s)}n.setSeries=ml;function Sr(t,s){mt(R[t],s)}function kr(t,s){t.fill=Me(t.fill||null),t.dir=Fe(t.dir,-1),s=s??R.length,R.splice(s,0,t)}function Tr(t){t==null?R.length=0:R.splice(t,1)}n.addBand=kr,n.setBand=Sr,n.delBand=Tr;function Er(t,s){y[t].alpha=s,Ke&&Pe[t]!=null&&(Pe[t].style.opacity=s),Ce&&Ee[t]&&(Ee[t].style.opacity=s)}let yl,Dl,Ol;const Xl={focus:!0};function Mr(t){if(t!=Ol){let s=t==null,r=ot.alpha!=1;y.forEach((o,f)=>{if(a==1||f>0){let g=s||f==0||f==t;o._focus=s?null:g,r&&Er(f,g?1:ot.alpha)}}),Ol=t,r&&Kl()}}Ce&&Le&&He(Vi,_e,t=>{K._lock||(yt(t),Ol!=null&&ml(null,Xl,!0,gt.setSeries))});function _l(t,s,r){let o=C[s];r&&(t=t/Ne-(o.ori==1?We:ke));let f=de;o.ori==1&&(f=G,t=f-t),o.dir==-1&&(t=f-t);let g=o._min,b=o._max,T=t/f,L=g+(b-g)*T,W=o.distr;return W==3?an(10,L):W==4?Co(L,o.asinh):W==100?o.bwd(L):L}function Ar(t,s){let r=_l(t,D,s);return vl(r,l[0],Lt,Pt)}n.valToIdx=t=>vl(t,l[0]),n.posToIdx=Ar,n.posToVal=_l,n.valToPos=(t,s,r)=>C[s].ori==0?c(t,C[s],r?F:de,r?rt:0):u(t,C[s],r?H:G,r?xt:0),n.setCursor=(t,s,r)=>{Je=t.left,et=t.top,Nl(null,s,r)};function xi(t,s){$e($l,tn,Ze.left=t),$e($l,yn,Ze.width=s)}function bi(t,s){$e($l,xn,Ze.top=t),$e($l,Sn,Ze.height=s)}let hn=w.ori==0?xi:bi,gn=w.ori==1?xi:bi;function Cr(){if(Ce&&se.live)for(let t=a==2?1:0;t<y.length;t++){if(t==0&&je)continue;let s=se.values[t],r=0;for(let o in s)it[t][r++].firstChild.nodeValue=s[o]}}function ys(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ge[o]=r}):Ro(t.idx)||ge.fill(t.idx),se.idx=ge[0]),Ce&&se.live){for(let r=0;r<y.length;r++)(r>0||a==1&&!je)&&Dr(r,ge[r]);Cr()}x=!1,s!==!1&&Ot("setLegend")}n.setLegend=ys;function Dr(t,s){let r=y[t],o=t==0&&z==2?cl:l[t],f;je?f=r.values(n,t,s)??tt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?tt:{_:f}),se.values[t]=f}function Nl(t,s,r){_i=Je,wi=et,[Je,et]=K.move(n,Je,et),K.left=Je,K.top=et,Ke&&(jl&&bl(jl,St(Je),0,de,G),Jl&&bl(Jl,0,St(et),de,G));let o,f=Lt>Pt;yl=Ye,Dl=null;let g=w.ori==0?de:G,b=w.ori==1?de:G;if(Je<0||vt==0||f){o=K.idx=null;for(let T=0;T<y.length;T++){let L=Pe[T];L!=null&&bl(L,-10,-10,de,G)}Le&&ml(null,Xl,!0,t==null&&gt.setSeries),se.live&&(ge.fill(o),x=!0)}else{let T,L,W;a==1&&(T=w.ori==0?Je:et,L=_l(T,D),o=K.idx=vl(L,l[0],Lt,Pt),W=N(l[0][o],w,g,0));let U=-10,$=-10,ve=0,Oe=0,Re=!0,Te="",fe="";for(let re=a==2?1:0;re<y.length;re++){let Qe=y[re],ct=ge[re],Nt=ct==null?null:a==1?l[re][ct]:l[re][1][ct],Be=K.dataIdx(n,re,o,L),ft=Be==null?null:a==1?l[re][Be]:l[re][1][Be];if(x=x||ft!=Nt||Be!=ct,ge[re]=Be,re>0&&Qe.show){let Qt=Be==null?-10:Be==o?W:N(a==1?l[0][Be]:l[re][0][Be],w,g,0),Ht=ft==null?-10:ee(ft,a==1?C[Qe.scale]:C[Qe.facets[1].scale],b,0);if(Le&&ft!=null){let il=w.ori==1?Je:et,fl=kt(ot.dist(n,re,Be,Ht,il));if(fl<yl){let wl=ot.bias;if(wl!=0){let $t=_l(il,Qe.scale),al=ft>=0?1:-1,dl=$t>=0?1:-1;dl==al&&(dl==1?wl==1?ft>=$t:ft<=$t:wl==1?ft<=$t:ft>=$t)&&(yl=fl,Dl=re)}else yl=fl,Dl=re}}if(x||Ie){let il,fl;w.ori==0?(il=Qt,fl=Ht):(il=Ht,fl=Qt);let wl,$t,al,dl,xl,Wt,Xt=!0,Gl=Xe.bbox;if(Gl!=null){Xt=!1;let Ut=Gl(n,re);al=Ut.left,dl=Ut.top,wl=Ut.width,$t=Ut.height}else al=il,dl=fl,wl=$t=Xe.size(n,re);if(Wt=Xe.fill(n,re),xl=Xe.stroke(n,re),Ie)re==Dl&&yl<=ot.prox&&(U=al,$=dl,ve=wl,Oe=$t,Re=Xt,Te=Wt,fe=xl);else{let Ut=Pe[re];Ut!=null&&(Gt[re]=al,nl[re]=dl,qi(Ut,wl,$t,Xt),Ui(Ut,Wt,xl),bl(Ut,ol(al),ol(dl),de,G))}}}}if(Ie){let re=ot.prox,Qe=Ol==null?yl<=re:yl>re||Dl!=Ol;if(x||Qe){let ct=Pe[0];ct!=null&&(Gt[0]=U,nl[0]=$,qi(ct,ve,Oe,Re),Ui(ct,Te,fe),bl(ct,ol(U),ol($),de,G))}}}if(Ze.show&&Al)if(t!=null){let[T,L]=gt.scales,[W,U]=gt.match,[$,ve]=t.cursor.sync.scales,Oe=t.cursor.drag;if(Rt=Oe._x,Ft=Oe._y,Rt||Ft){let{left:Re,top:Te,width:fe,height:re}=t.select,Qe=t.scales[$].ori,ct=t.posToVal,Nt,Be,ft,Qt,Ht,il=T!=null&&W(T,$),fl=L!=null&&U(L,ve);il&&Rt?(Qe==0?(Nt=Re,Be=fe):(Nt=Te,Be=re),ft=C[T],Qt=N(ct(Nt,$),ft,g,0),Ht=N(ct(Nt+Be,$),ft,g,0),hn(hl(Qt,Ht),kt(Ht-Qt))):hn(0,g),fl&&Ft?(Qe==1?(Nt=Re,Be=fe):(Nt=Te,Be=re),ft=C[L],Qt=ee(ct(Nt,ve),ft,b,0),Ht=ee(ct(Nt+Be,ve),ft,b,0),gn(hl(Qt,Ht),kt(Ht-Qt))):gn(0,b)}else Ts()}else{let T=kt(_i-gi),L=kt(wi-mi);if(w.ori==1){let ve=T;T=L,L=ve}Rt=zt.x&&T>=zt.dist,Ft=zt.y&&L>=zt.dist;let W=zt.uni;W!=null?Rt&&Ft&&(Rt=T>=W,Ft=L>=W,!Rt&&!Ft&&(L>T?Ft=!0:Rt=!0)):zt.x&&zt.y&&(Rt||Ft)&&(Rt=Ft=!0);let U,$;Rt&&(w.ori==0?(U=Zl,$=Je):(U=Ql,$=et),hn(hl(U,$),kt($-U)),Ft||gn(0,b)),Ft&&(w.ori==1?(U=Zl,$=Je):(U=Ql,$=et),gn(hl(U,$),kt($-U)),Rt||hn(0,g)),!Rt&&!Ft&&(hn(0,0),gn(0,0))}if(zt._x=Rt,zt._y=Ft,t==null){if(r){if(Pi!=null){let[T,L]=gt.scales;gt.values[0]=T!=null?_l(w.ori==0?Je:et,T):null,gt.values[1]=L!=null?_l(w.ori==1?Je:et,L):null}_n(Cs,n,Je,et,de,G,o)}if(Le){let T=r&&gt.setSeries,L=ot.prox;Ol==null?yl<=L&&ml(Dl,Xl,!0,T):yl>L?ml(null,Xl,!0,T):Dl!=Ol&&ml(Dl,Xl,!0,T)}}x&&(se.idx=o,ys()),s!==!1&&Ot("setCursor")}let Ll=null;Object.defineProperty(n,"rect",{get(){return Ll==null&&mn(!1),Ll}});function mn(t=!1){t?Ll=null:(Ll=k.getBoundingClientRect(),Ot("syncRect",Ll))}function yi(t,s,r,o,f,g,b){K._lock||Al&&t!=null&&t.movementX==0&&t.movementY==0||(Ss(t,s,r,o,f,g,b,!1,t!=null),t!=null?Nl(null,!0,!0):Nl(s,!0,!1))}function Ss(t,s,r,o,f,g,b,T,L){if(Ll==null&&mn(!1),yt(t),t!=null)r=t.clientX-Ll.left,o=t.clientY-Ll.top;else{if(r<0||o<0){Je=-10,et=-10;return}let[W,U]=gt.scales,$=s.cursor.sync,[ve,Oe]=$.values,[Re,Te]=$.scales,[fe,re]=gt.match,Qe=s.axes[0].side%2==1,ct=w.ori==0?de:G,Nt=w.ori==1?de:G,Be=Qe?g:f,ft=Qe?f:g,Qt=Qe?o:r,Ht=Qe?r:o;if(Re!=null?r=fe(W,Re)?p(ve,C[W],ct,0):-10:r=ct*(Qt/Be),Te!=null?o=re(U,Te)?p(Oe,C[U],Nt,0):-10:o=Nt*(Ht/ft),w.ori==1){let il=r;r=o,o=il}}L&&(s==null||s.cursor.event.type==Cs)&&((r<=1||r>=de-1)&&(r=zl(r,de)),(o<=1||o>=G-1)&&(o=zl(o,G))),T?(gi=r,mi=o,[Zl,Ql]=K.move(n,r,o)):(Je=r,et=o)}const ks={width:0,height:0,left:0,top:0};function Ts(){zn(ks,!1)}let Si,ki,Ti,Ei;function Mi(t,s,r,o,f,g,b){Al=!0,Rt=Ft=zt._x=zt._y=!1,Ss(t,s,r,o,f,g,b,!0,!1),t!=null&&(He(Ds,Ns,Ai,!1),_n(Gi,n,Zl,Ql,de,G,null));let{left:T,top:L,width:W,height:U}=Ze;Si=T,ki=L,Ti=W,Ei=U}function Ai(t,s,r,o,f,g,b){Al=zt._x=zt._y=!1,Ss(t,s,r,o,f,g,b,!1,!0);let{left:T,top:L,width:W,height:U}=Ze,$=W>0||U>0,ve=Si!=T||ki!=L||Ti!=W||Ei!=U;if($&&ve&&zn(Ze),zt.setScale&&$&&ve){let Oe=T,Re=W,Te=L,fe=U;if(w.ori==1&&(Oe=L,Re=U,Te=T,fe=W),Rt&&Cl(D,_l(Oe,D),_l(Oe+Re,D)),Ft)for(let re in C){let Qe=C[re];re!=D&&Qe.from==null&&Qe.min!=Ye&&Cl(re,_l(Te+fe,re),_l(Te,re))}Ts()}else K.lock&&(K._lock=!K._lock,Nl(s,!0,t!=null));t!=null&&(At(Ds,Ns),_n(Ds,n,Je,et,de,G,null))}function Lr(t,s,r,o,f,g,b){if(K._lock)return;yt(t);let T=Al;if(Al){let L=!0,W=!0,U=10,$,ve;w.ori==0?($=Rt,ve=Ft):($=Ft,ve=Rt),$&&ve&&(L=Je<=U||Je>=de-U,W=et<=U||et>=G-U),$&&L&&(Je=Je<Zl?0:de),ve&&W&&(et=et<Ql?0:G),Nl(null,!0,!0),Al=!1}Je=-10,et=-10,ge.fill(null),Nl(null,!0,!0),T&&(Al=T)}function Ci(t,s,r,o,f,g,b){K._lock||(yt(t),rs(),Ts(),t!=null&&_n(Ii,n,Je,et,de,G,null))}function Di(){q.forEach(Ju),I(n.width,n.height,!0)}Hl(Kn,sn,Di);const en={};en.mousedown=Mi,en.mousemove=yi,en.mouseup=Ai,en.dblclick=Ci,en.setSeries=(t,s,r,o)=>{let f=gt.match[2];r=f(n,s,r),r!=-1&&ml(r,o,!0,!1)},Ke&&(He(Gi,k,Mi),He(Cs,k,yi),He(zi,k,t=>{yt(t),mn(!1)}),He(Vi,k,Lr),He(Ii,k,Ci),Us.add(n),n.syncRect=mn);const Vn=n.hooks=e.hooks||{};function Ot(t,s,r){_s?vn.push([t,s,r]):t in Vn&&Vn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Vn[s]=(Vn[s]||[]).concat(t.hooks[s])});const Li=(t,s,r)=>r,gt=mt({key:null,setSeries:!1,filters:{pub:Qi,sub:Qi},scales:[D,y[1]?y[1].scale:null],match:[$i,$i,Li],values:[null,null]},K.sync);gt.match.length==2&&gt.match.push(Li),K.sync=gt;const Pi=gt.key,Es=er(Pi);function _n(t,s,r,o,f,g,b){gt.filters.pub(t,s,r,o,f,g,b)&&Es.pub(t,s,r,o,f,g,b)}Es.sub(n);function Pr(t,s,r,o,f,g,b){gt.filters.sub(t,s,r,o,f,g,b)&&en[t](null,s,r,o,f,g,b)}n.pub=Pr;function Rr(){Es.unsub(n),Us.delete(n),_t.clear(),Vs(Kn,sn,Di),h.remove(),_e?.remove(),Ot("destroy")}n.destroy=Rr;function Ms(){Ot("init",e,l),oi(l||e.data,!1),M[D]?ws(D,M[D]):rs(),V=Ze.show&&(Ze.width>0||Ze.height>0),oe=x=!0,I(e.width,e.height)}return y.forEach(Jt),q.forEach(Fl),i?i instanceof HTMLElement?(i.appendChild(h),Ms()):i(n,Ms):Ms(),n}Tt.assign=mt;Tt.fmtNum=Xs;Tt.rangeNum=jn;Tt.rangeLog=es;Tt.rangeAsinh=Qs;Tt.orient=Ul;Tt.pxRatio=Ne;Tt.join=Io;Tt.fmtDate=ti,Tt.tzDate=Qo;Tt.sync=er;{Tt.addGap=Ru,Tt.clipGaps=ns;let e=Tt.paths={points:ar};e.linear=or,e.stepped=Nu,e.bars=Gu,e.spline=Vu}var Zu=Ae('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Qu=Ae('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=Ae('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),Xu=Ae('<span class="estimated-badge svelte-3wi8ix">est</span>'),ec=Ae("<span> </span> <!>",1),tc=Ae('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),lc=Ae('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),nc=Ae('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function sc(e,l){Qn(l,!0);const i=.5,n=1.2,a=0,c=100;function u(w,z){const N=[...w].sort((P,Se)=>P-Se),ee=z/100*(N.length-1),M=Math.floor(ee),j=Math.ceil(ee);return M===j?N[M]:N[M]+(N[j]-N[M])*(ee-M)}let p=Ln(l,"trend",3,null),v=Ue(!1),h=Ue(""),S=Ue(null),m=ze(()=>Wn.config.temp_units==="C"),_=ze(Ta),O=ze(Ks),k=ze(()=>{if(l.readings.length===0)return null;const w=l.readings.filter(xe=>xe.status!=="invalid");if(w.length===0)return null;const z=[...w].sort((xe,lt)=>new Date(xe.timestamp).getTime()-new Date(lt.timestamp).getTime()),N=z[0],ee=z[z.length-1],M=z.map(xe=>xe.sg_calibrated??xe.sg_raw).filter(xe=>xe!==null&&xe>=i&&xe<=n),j=z.map(xe=>xe.temp_calibrated??xe.temp_raw).filter(xe=>xe!==null&&xe>=a&&xe<=c);if(M.length===0)return null;const P=M[M.length-1],Se=M[0],he=u(M,95),ce=u(M,5),ge=new Date(N.timestamp).getTime(),se=new Date(ee.timestamp).getTime(),Ce=(se-ge)/(1e3*60*60*24),Ke=Ce>0?(P-Se)/Ce:0;let be=null,_e=null,st=null,Ve=null;if(j.length>0){const xe=j[j.length-1],lt=j.reduce((He,At)=>He+At,0)/j.length,at=u(j,95),_t=u(j,5);be=d(m)?xe:xe*9/5+32,_e=d(m)?lt:lt*9/5+32,st=d(m)?at:at*9/5+32,Ve=d(m)?_t:_t*9/5+32}let Ee=0;const it=.001;for(let xe=M.length-2;xe>=0;xe--)if(Math.abs(M[xe]-P)>it){const lt=new Date(z[xe+1].timestamp).getTime();Ee=(se-lt)/(1e3*60*60*24);break}let pt=null,je=null;const tt=l.originalGravity??he,Mt=l.originalGravity===null;return tt>1&&tt>P&&(pt=(tt-P)/(tt-1)*100,je=(tt-P)*131.25),{currentSg:P,firstSg:Se,highSg:he,lowSg:ce,currentTemp:be,avgTemp:_e,highTemp:st,lowTemp:Ve,fermRate:Ke,durationDays:Ce,daysAtCurrentSg:Ee,apparentAttenuation:pt,abv:je,ogIsEstimated:Mt,effectiveOg:tt}});function Y(){pe(h,l.originalGravity?.toFixed(3)??"",!0),pe(v,!0),setTimeout(()=>d(S)?.focus(),0)}function X(){const w=d(h).trim();if(!w)l.onOgChange?.(null);else{const z=parseFloat(w);!isNaN(z)&&z>=.99&&z<=1.2&&l.onOgChange?.(z)}pe(v,!1)}function te(w){w.key==="Enter"?X():w.key==="Escape"&&pe(v,!1)}function y(w){return En(w)}function q(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function C(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function R(w){return w===null?"--":w.toFixed(1)}function D(w){return w===null?"--":`${w.toFixed(1)}%`}var ne=Cn(),Z=Sl(ne);{var Q=w=>{var z=lc(),N=A(z),ee=A(N),M=A(ee),j=A(M,!0);E(M);var P=B(M,2),Se=B(A(P),2),he=A(Se,!0);E(Se),E(P);var ce=B(P,2),ge=B(A(ce),2),se=A(ge,!0);E(ge),E(ce);var K=B(ce,2),Ce=B(A(K),2),Ke=A(Ce,!0);E(Ce),E(K);var be=B(K,2),_e=B(A(be),2),st=A(_e,!0);E(_e),E(be),E(ee);var Ve=B(ee,2),Ee=B(A(Ve),2),it=B(A(Ee),2),pt=A(it,!0),je=B(pt),tt=A(je,!0);E(je),E(it),E(Ee);var Mt=B(Ee,2),xe=B(A(Mt),2),lt=A(xe,!0),at=B(lt),_t=A(at,!0);E(at),E(xe),E(Mt);var He=B(Mt,2),At=B(A(He),2),Vt=A(At,!0),wt=B(Vt),de=A(wt,!0);E(wt),E(At),E(He);var G=B(He,2),ke=B(A(G),2),We=A(ke,!0),Kt=B(We),jt=A(Kt,!0);E(Kt),E(ke),E(G),E(Ve),E(N);var Ct=B(N,2),It=A(Ct),rt=B(A(It),2);let xt;var F=A(rt);E(rt),E(It);var H=B(It,2),ie=B(A(H),2),ue=A(ie,!0);E(ie),E(H);var ae=B(H,2),oe=B(A(ae),2),V=A(oe,!0);E(oe),E(ae);var x=B(ae,2),I=B(A(x),2);{var J=Ie=>{var Pe=Zu();Sa(Pe),Pe.__keydown=te,qs(Pe,Gt=>pe(S,Gt),()=>d(S)),xa("blur",Pe,X),ka(Pe,()=>d(h),Gt=>pe(h,Gt)),ye(Ie,Pe)},me=Ie=>{var Pe=Cn(),Gt=Sl(Pe);{var nl=Jt=>{var sl=$u();sl.__click=Y;var Zt=A(sl);let Bt;var Fl=A(Zt,!0);E(Zt);var ul=B(Zt,2);{var Ml=ut=>{var vt=Qu();ye(ut,vt)};nt(ul,ut=>{d(k).ogIsEstimated&&ut(Ml)})}Bl(2),E(sl),dt(ut=>{nn(sl,"title",d(k).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Bt=gl(Zt,1,"stat-value svelte-3wi8ix",null,Bt,{estimated:d(k).ogIsEstimated}),we(Fl,ut)},[()=>y(d(k).effectiveOg)]),ye(Jt,sl)},El=Jt=>{var sl=ec(),Zt=Sl(sl);let Bt;var Fl=A(Zt,!0);E(Zt);var ul=B(Zt,2);{var Ml=ut=>{var vt=Xu();ye(ut,vt)};nt(ul,ut=>{d(k).ogIsEstimated&&ut(Ml)})}dt(ut=>{Bt=gl(Zt,1,"stat-value svelte-3wi8ix",null,Bt,{estimated:d(k).ogIsEstimated}),we(Fl,ut)},[()=>y(d(k).effectiveOg)]),ye(Jt,sl)};nt(Gt,Jt=>{l.onOgChange?Jt(nl):Jt(El,!1)},!0)}ye(Ie,Pe)};nt(I,Ie=>{l.onOgChange&&d(v)?Ie(J):Ie(me,!1)})}E(x);var De=B(x,2),bt=B(A(De),2),ht=A(bt,!0);E(bt),E(De);var Dt=B(De,2),yt=B(A(Dt),2),Xe=A(yt,!0);E(yt),E(Dt);var ot=B(Dt,2);{var Le=Ie=>{var Pe=tc(),Gt=B(A(Pe),2),nl=A(Gt,!0);E(Gt),Bl(2),E(Pe),dt((El,Jt)=>{nn(Pe,"title",`Estimated time until target FG (R=${El??""})`),we(nl,Jt)},[()=>p().r2.toFixed(2),()=>C(p().daysToFg)]),ye(Ie,Pe)};nt(ot,Ie=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&Ie(Le)})}E(Ct),E(z),dt((Ie,Pe,Gt,nl,El,Jt,sl,Zt,Bt,Fl,ul,Ml,ut)=>{we(j,d(O)==="SG"?"Gravity":d(O)==="P"?"Plato":"Brix"),we(he,Ie),we(se,Pe),we(Ke,Gt),we(st,nl),we(pt,El),we(tt,d(_)),we(lt,Jt),we(_t,d(_)),we(Vt,sl),we(de,d(_)),we(We,Zt),we(jt,d(_)),xt=gl(rt,1,"stat-value rate svelte-3wi8ix",null,xt,{fermenting:d(k).fermRate<0}),we(F,`${Bt??""}/day`),we(ue,Fl),we(V,ul),we(ht,Ml),we(Xe,ut)},[()=>y(d(k).currentSg),()=>y(d(k).firstSg),()=>y(d(k).highSg),()=>y(d(k).lowSg),()=>R(d(k).currentTemp),()=>R(d(k).avgTemp),()=>R(d(k).highTemp),()=>R(d(k).lowTemp),()=>q(d(k).fermRate),()=>C(d(k).durationDays),()=>C(d(k).daysAtCurrentSg),()=>D(d(k).apparentAttenuation),()=>D(d(k).abv)]),ye(w,z)},le=w=>{var z=nc();ye(w,z)};nt(Z,w=>{d(k)?w(Q):w(le,!1)})}ye(e,ne),$n()}Zn(["keydown","click"]);var ic=Ae('<button type="button"> </button>'),ac=Ae("<option> </option>"),rc=Ae('<div class="loading-overlay svelte-12kwequ"><div class="loading-spinner svelte-12kwequ"></div></div>'),oc=Ae('<div class="chart-error svelte-12kwequ"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-12kwequ">Retry</button></div>'),uc=Ae('<div class="chart-empty svelte-12kwequ"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),cc=Ae('<div class="chart-wrapper svelte-12kwequ"><div class="chart-controls svelte-12kwequ"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-12kwequ"><div class="refresh-control svelte-12kwequ"><label for="refreshInterval" class="svelte-12kwequ">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-12kwequ"></select></div> <div class="chart-legend svelte-12kwequ"><span class="legend-item svelte-12kwequ"><span class="legend-dot svelte-12kwequ" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line svelte-12kwequ"></span> <span>Wort</span></span> <span class="legend-item svelte-12kwequ"><span class="legend-line legend-line-dotted svelte-12kwequ" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-12kwequ"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-12kwequ"><!> <!></div> <!></div>');function fc(e,l){Qn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=ze(()=>Wn.config.smoothing_enabled),c=ze(()=>Wn.config.smoothing_samples),u=Ue("UTC"),p=Ue(0),v=Ue(3),h=Ln(l,"deviceColor",3,"BLACK"),S=Ln(l,"originalGravity",3,null),m=ze(()=>Wn.config.temp_units==="C"),_=ze(Ks),O,k=null,Y=Ue(!0),X=Ue(null),te=Ue(24),y=Ue(Yn([])),q=Ue(Yn([])),C=Ue(null),R=Ue(null);const D={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},ne="#facc15",Z="rgba(250, 204, 21, 0.3)",Q="#71717a",le="#a1a1aa",w="rgba(255, 255, 255, 0.04)",z="#22d3ee",N="rgba(250, 204, 21, 0.5)",ee="brewsignal_chart_trend_enabled";let M=Ue(!0);function j(F,H,ie=1.01){const ue=[];for(let Le=0;Le<F.length;Le++)H[Le]!==null&&ue.push([F[Le],H[Le]]);if(ue.length<10)return null;const ae=ue.length;let oe=0,V=0,x=0,I=0;for(const[Le,Ie]of ue)oe+=Le,V+=Ie,x+=Le*Ie,I+=Le*Le;const J=ae*I-oe*oe;if(Math.abs(J)<1e-10)return null;const me=(ae*x-oe*V)/J,De=(V-me*oe)/ae,bt=V/ae;let ht=0,Dt=0;for(const[Le,Ie]of ue){const Pe=me*Le+De;ht+=(Ie-Pe)**2,Dt+=(Ie-bt)**2}const yt=Dt>0?1-ht/Dt:0;let Xe=null,ot=null;if(me<0&&yt>.3){const Le=F[F.length-1],Ie=(ie-De)/me;Ie>Le&&(ot=(Ie-Le)/(1440*60),ot>0&&ot<60?Xe=ie:ot=null)}return{slope:me,intercept:De,r2:yt,predictedFg:Xe,daysToFg:ot}}function P(F,H){return F.map(ie=>H.slope*ie+H.intercept)}function Se(F,H,ie){const ue=new Date(F*1e3);try{return ie?ue.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:H}):ue.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:H})}catch(ae){return console.warn("Invalid timezone:",H,ae),ie?ue.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):ue.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function he(F,H,ie){const ue=ne,ae=D[h()]||le;return{width:F,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!0,live:!0,markers:{show:!1}},hooks:{setCursor:[oe=>{const V=oe.cursor.idx;if(V==null)return;const x=oe.root.querySelector(".u-legend");x&&(x.style.cssText=`
							position: absolute;
							top: 12px;
							left: 12px;
							background: rgba(24, 24, 27, 0.95);
							border: 1px solid var(--border-default);
							border-radius: 0.5rem;
							padding: 0.75rem;
							font-family: 'JetBrains Mono', monospace;
							font-size: 0.6875rem;
							pointer-events: none;
							box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3);
							backdrop-filter: blur(8px);
						`)}]},scales:{x:{time:!0},sg:{auto:!0,range:(oe,V,x)=>{const I=(x-V)*.1||.005;return[V-I,x+I]}},temp:{auto:!0,range:(oe,V,x)=>{const I=x-V,J=10;if(I<J){const De=(x+V)/2;return[De-J/2,De+J/2]}const me=I*.1;return[V-me,x+me]}}},axes:[{stroke:Q,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(x=>Se(x,ie,d(te)<=24))},{scale:"sg",stroke:ue,grid:{stroke:w,width:1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(x=>En(x)),side:3},{scale:"temp",stroke:ae,grid:{show:!1},ticks:{stroke:w,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(oe,V)=>V.map(x=>x.toFixed(0)+""),side:1}],series:[{value:(oe,V)=>Se(V,ie,!1)+" "+Se(V,ie,!0)},{label:d(_)==="SG"?"Gravity":d(_)==="P"?"Plato":"Brix",scale:"sg",stroke:ue,width:2,value:(oe,V)=>V!==null?En(V):"--",fill:(oe,V)=>{const x=oe.ctx.createLinearGradient(0,oe.bbox.top,0,oe.bbox.top+oe.bbox.height);return x.addColorStop(0,Z),x.addColorStop(1,"transparent"),x},points:{show:!1},paths:Tt.paths.spline?.()},{label:"Wort",scale:"temp",stroke:ae,width:1.5,dash:[4,4],value:(oe,V)=>V!==null?V.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:z,width:1.5,dash:[2,4],value:(oe,V)=>V!==null?V.toFixed(1)+"":"--",points:{show:!1},paths:Tt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:N,width:2,dash:[8,4],value:(oe,V)=>V!==null?En(V):"--",points:{show:!1},show:d(M)}]}}function ce(F,H){if(H<=1)return F;const ie=[];for(let ue=0;ue<F.length;ue++){const ae=[],oe=Math.floor(H/2);for(let V=Math.max(0,ue-oe);V<=Math.min(F.length-1,ue+oe);V++){const x=F[V];x!==null&&ae.push(x)}ae.length>0?ie.push(ae.reduce((V,x)=>V+x,0)/ae.length):ie.push(null)}return ie}function ge(F,H,ie,ue,ae){if(F.length<=ae)return[F,H,ie,ue];const oe=Math.ceil(F.length/ae),V=[],x=[],I=[],J=[];for(let me=0;me<F.length;me+=oe){const De=Math.min(me+oe,F.length);let bt=0,ht=0,Dt=0,yt=0,Xe=0,ot=0;for(let Le=me;Le<De;Le++)H[Le]!==null&&(bt+=H[Le],ht++),ie[Le]!==null&&(Dt+=ie[Le],yt++),ue[Le]!==null&&(Xe+=ue[Le],ot++);V.push(F[Math.floor((me+De-1)/2)]),x.push(ht>0?bt/ht:null),I.push(yt>0?Dt/yt:null),J.push(ot>0?Xe/ot:null)}return[V,x,I,J]}function se(F){return!F.endsWith("Z")&&!F.match(/[+-]\d{2}:\d{2}$/)&&(F=F+"Z"),new Date(F).getTime()/1e3}function K(F,H,ie){if(F.length===0||H.length===0)return H.map(()=>null);const ue=[...F].sort((V,x)=>se(V.timestamp)-se(x.timestamp)),ae=ue.map(V=>se(V.timestamp)),oe=ue.map(V=>V.temperature===null?null:ie?V.temperature:V.temperature*9/5+32);return H.map(V=>{let x=null,I=null;for(let J=0;J<ae.length;J++)if(ae[J]<=V&&(x={time:ae[J],temp:oe[J]}),ae[J]>=V&&I===null){I={time:ae[J],temp:oe[J]};break}if(x&&I&&x.temp!==null&&I.temp!==null){if(x.time===I.time)return x.temp;const J=(V-x.time)/(I.time-x.time);return x.temp+J*(I.temp-x.temp)}return x!==null&&x.temp!==null?x.temp:I!==null&&I.temp!==null?I.temp:null})}function Ce(F,H,ie){const ue=[...F].reverse();let ae=[],oe=[],V=[];for(const De of ue){ae.push(se(De.timestamp)),oe.push(De.sg_calibrated??De.sg_raw);const bt=De.temp_calibrated??De.temp_raw;bt!==null?V.push(ie?bt:bt*9/5+32):V.push(null)}let x=K(H,ae,ie);d(a)&&d(c)>1&&(oe=ce(oe,d(c)),V=ce(V,d(c)),x=ce(x,d(c))),[ae,oe,V,x]=ge(ae,oe,V,x,500);const J=j(ae,oe);pe(C,J,!0);const me=J?P(ae,J):ae.map(()=>null);return[ae,oe,V,x,me]}const Ke=3e4;async function be(F=!1){const ie=Date.now()-d(p);if(!(!F&&d(p)>0&&ie<Ke)){pe(Y,!0),pe(X,null);try{if(!d(R)){const ue=await Yr(l.batchId);pe(R,ue.device_id??null,!0)}if(d(R)){const[ue,ae]=await Promise.all([qr(d(R),d(te)),Kr(d(te)).catch(()=>[])]);pe(y,ue,!0),pe(q,ae,!0),_e()}else pe(y,[],!0),pe(q,[],!0),pe(X,"No device assigned to this batch")}catch(ue){pe(X,ue instanceof Error?ue.message:"Failed to load data",!0)}finally{pe(p,Date.now(),!0),pe(Y,!1)}}}function _e(){if(!O||d(y).length===0)return;const F=Ce(d(y),d(q),d(m)),H=he(O.clientWidth,d(m),d(u));k&&k.destroy(),k=new Tt(H,F,O)}function st(){k&&O&&k.setSize({width:O.clientWidth,height:220})}let Ve=null;function Ee(){if(Ve&&(clearInterval(Ve),Ve=null),d(v)>0){const F=d(v)*60*1e3;Ve=setInterval(()=>{d(Y)||be(!1)},F)}}ba(async()=>{const F=localStorage.getItem(i);if(F!==null){const ie=parseInt(F,10);Number.isNaN(ie)||pe(v,ie,!0)}const H=localStorage.getItem(ee);H!==null&&pe(M,H==="true");try{const ie=await fetch("/api/system/timezone");if(ie.ok){const ue=await ie.json();pe(u,ue.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await be(!0),window.addEventListener("resize",st),Ee()}),zr(()=>{k?.destroy(),window.removeEventListener("resize",st),Ve&&clearInterval(Ve)}),Os(()=>{d(m)!==void 0&&d(y).length>0&&O&&_e()}),Os(()=>{d(a),d(c),d(y).length>0&&O&&_e()});function it(F){const H=Number(F.target.value);pe(v,H,!0),localStorage.setItem(i,String(H)),Ee(),be(!0)}function pt(){pe(M,!d(M)),localStorage.setItem(ee,String(d(M))),k&&k.setSeries(4,{show:d(M)})}var je=cc(),tt=A(je),Mt=A(tt);Dn(Mt,21,()=>Ur,qn,(F,H)=>{var ie=ic();let ue;ie.__click=()=>{d(te)!==d(H).hours&&(pe(te,d(H).hours,!0),be(!0))};var ae=A(ie,!0);E(ie),dt(()=>{ue=gl(ie,1,"range-btn svelte-12kwequ",null,ue,{active:d(te)===d(H).hours}),we(ae,d(H).label)}),ye(F,ie)}),E(Mt);var xe=B(Mt,2),lt=A(xe),at=B(A(lt),2);at.__change=it,Dn(at,21,()=>n,qn,(F,H)=>{var ie=ac(),ue=A(ie,!0);E(ie);var ae={};dt(()=>{we(ue,d(H).label),ae!==(ae=d(H).value)&&(ie.value=(ie.__value=d(H).value)??"")}),ye(F,ie)}),E(at);var _t;Qr(at),E(lt);var He=B(lt,2),At=B(A(He),2),Vt=A(At);Bl(2),E(At);var wt=B(At,4);let de;wt.__click=pt;var G=A(wt);Tn(G,"background: rgba(250, 204, 21, 0.5);"),Bl(2),E(wt),E(He),E(xe),E(tt);var ke=B(tt,2),We=A(ke);{var Kt=F=>{var H=rc();ye(F,H)};nt(We,F=>{d(Y)&&F(Kt)})}var jt=B(We,2);{var Ct=F=>{var H=oc(),ie=B(A(H),2);ie.__click=()=>be(!0),E(H),ye(F,H)},It=F=>{var H=Cn(),ie=Sl(H);{var ue=ae=>{var oe=uc();ye(ae,oe)};nt(ie,ae=>{d(y).length===0&&ae(ue)},!0)}ye(F,H)};nt(jt,F=>{d(X)?F(Ct):F(It,!1)})}E(ke),qs(ke,F=>O=F,()=>O);var rt=B(ke,2);{var xt=F=>{{let H=ze(()=>d(C)?{predictedFg:d(C).predictedFg,daysToFg:d(C).daysToFg,r2:d(C).r2}:null);sc(F,{get readings(){return d(y)},get originalGravity(){return S()},get trend(){return d(H)}})}};nt(rt,F=>{d(y).length>0&&F(xt)})}E(je),dt(()=>{_t!==(_t=d(v))&&(at.value=(at.__value=d(v))??"",$r(at,d(v))),Tn(Vt,`background: ${(D[h()]||"var(--text-secondary)")??""};`),de=gl(wt,1,"legend-item legend-toggle svelte-12kwequ",null,de,{"legend-disabled":!d(M)}),nn(wt,"title",d(M)?"Hide trend line":"Show trend line")}),ye(e,je),$n()}Zn(["click","change"]);var dc=Ae('<span class="error-message svelte-1k5rb4o"> </span>'),pc=Ae('<div class="flex flex-col gap-1"><input type="text" maxlength="100"/> <!></div>'),vc=Ae('<button type="button" class="beer-name-btn svelte-1k5rb4o" title="Click to edit batch name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-1k5rb4o" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),hc=Ae('<div class="w-1 rounded-sm transition-all"></div>'),gc=Ae('<div class="pairing-badge svelte-1k5rb4o" title="Device not paired - readings not being logged"><svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Unpaired</div>'),mc=Ae(' <span class="text-lg text-[var(--text-secondary)]"> </span>',1),_c=Ae('--<span class="text-lg text-[var(--text-secondary)]"> </span>',1),wc=Ae('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),xc=Ae("<div><!></div>"),bc=Ae('<button type="button" class="expand-btn svelte-1k5rb4o"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),yc=Ae('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-2"><div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div> <!></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-1k5rb4o" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium"> </p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-1k5rb4o"><!></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><a class="view-details-link svelte-1k5rb4o" aria-label="View batch details">View Details</a> <!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function Sc(e,l){Qn(l,!0);let i=Ln(l,"expanded",3,!1),n=Ln(l,"wide",3,!1),a=ze(()=>{if(!l.batch.device_id)return null;const x=l.batch.device_id.match(/^(?:tilt-)?(\w+)$/i);if(!x?.[1])return null;const I=x[1].toUpperCase();for(const J of ya.tilts.values())if(J.color.toUpperCase()===I)return J;return null}),c=ze(()=>l.batch.name||l.batch.recipe?.name||`Batch #${l.batch.batch_number}`),u=ze(()=>l.progress?.measured?.current_sg??l.batch.measured_og??1),p=ze(()=>l.progress?.temperature?.current??null),v=ze(()=>d(a)?.color??"BLACK"),h=ze(()=>d(a)?.rssi??null),S=ze(()=>d(a)?.paired??!0),m=ze(()=>d(a)?.last_seen??new Date().toISOString()),_=ze(()=>d(a)?.sg_raw??d(u)),O=ze(()=>d(a)?.temp_raw??d(p)),k=Ue(!1);Os(()=>{i()&&!d(k)&&pe(k,!0)});let Y=Ue(!1),X=Ue(""),te=Ue(null),y=Ue(!1),q=Ue(null);function C(){pe(X,d(c),!0),pe(Y,!0),pe(q,null),setTimeout(()=>d(te)?.focus(),0)}async function R(){if(d(y))return;const x=d(X).trim();if(!x||x===d(c)){pe(Y,!1),pe(q,null);return}pe(y,!0),pe(q,null);try{await jr(l.batch.id,{name:x}),pe(Y,!1),l.onBatchUpdated&&await l.onBatchUpdated()}catch(I){console.error("Failed to update batch name:",I),pe(q,I instanceof Error?I.message:"Failed to save batch name",!0)}finally{pe(y,!1)}}function D(x){x.key==="Enter"?R():x.key==="Escape"&&pe(Y,!1)}let ne=ze(Ta),Z=ze(Ks);const Q={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function le(x){return En(x)}function w(x){return Wr(x)}function z(x){return x>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:x>=-60?{bars:3,color:"var(--positive)",label:"Good"}:x>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function N(x){const I=Math.floor((Date.now()-new Date(x).getTime())/1e3);if(I<10)return"just now";if(I<60)return`${I}s ago`;const J=Math.floor(I/60);if(J<60)return`${J}m ago`;const me=Math.floor(J/60);return me<24?`${me}h ago`:`${Math.floor(me/24)}d ago`}let ee=ze(()=>Q[d(v)]||"var(--tilt-black)"),M=ze(()=>d(h)!==null?z(d(h)):{bars:0,color:"var(--text-muted)",label:"No Signal"}),j=ze(()=>N(d(m)));var P=yc();let Se;var he=A(P),ce=B(he,2),ge=A(ce),se=A(ge),K=A(se);{var Ce=x=>{var I=pc(),J=A(I);Sa(J),J.__keydown=D;let me;qs(J,ht=>pe(te,ht),()=>d(te));var De=B(J,2);{var bt=ht=>{var Dt=dc(),yt=A(Dt,!0);E(Dt),dt(()=>we(yt,d(q))),ye(ht,Dt)};nt(De,ht=>{d(q)&&ht(bt)})}E(I),dt(()=>{J.disabled=d(y),me=gl(J,1,"beer-name-input svelte-1k5rb4o",null,me,{error:d(q)})}),xa("blur",J,R),ka(J,()=>d(X),ht=>pe(X,ht)),ye(x,I)},Ke=x=>{var I=vc();I.__click=C;var J=A(I),me=A(J,!0);E(J),Bl(2),E(I),dt(()=>we(me,d(c))),ye(x,I)};nt(K,x=>{d(Y)?x(Ce):x(Ke,!1)})}var be=B(K,2),_e=A(be),st=B(_e,2),Ve=A(st,!0);E(st),E(be),E(se);var Ee=B(se,2),it=A(Ee),pt=A(it);Dn(pt,20,()=>Array(4),qn,(x,I,J)=>{var me=hc();dt(()=>Tn(me,`
									height: ${8+J*4}px;
									background: ${(J<d(M).bars?d(M).color:"var(--bg-hover)")??""};
									opacity: ${J<d(M).bars?1:.4};
								`)),ye(x,me)}),E(pt);var je=B(pt,2),tt=A(je);E(je),E(it);var Mt=B(it,2);{var xe=x=>{var I=gc();ye(x,I)};nt(Mt,x=>{d(S)||x(xe)})}E(Ee),E(ge);var lt=B(ge,2),at=A(lt),_t=A(at),He=A(_t,!0),At=B(He),Vt=A(At,!0);E(At),E(_t);var wt=B(_t,2),de=A(wt,!0);E(wt),E(at);var G=B(at,2),ke=A(G),We=A(ke);{var Kt=x=>{var I=mc(),J=Sl(I,!0),me=B(J),De=A(me,!0);E(me),dt(bt=>{we(J,bt),we(De,d(ne))},[()=>w(d(p))]),ye(x,I)},jt=x=>{var I=_c(),J=B(Sl(I)),me=A(J,!0);E(J),dt(()=>we(me,d(ne))),ye(x,I)};nt(We,x=>{d(p)!==null?x(Kt):x(jt,!1)})}E(ke),Bl(2),E(G),E(lt);var Ct=B(lt,2);{var It=x=>{var I=wc(),J=B(A(I),2),me=A(J,!0);E(J);var De=B(J,4),bt=A(De);E(De),E(I),dt((ht,Dt)=>{we(me,ht),we(bt,`${Dt??""}${d(ne)??""}`)},[()=>le(d(_)),()=>d(O)!==null?w(d(O)):"--"]),ye(x,I)};nt(Ct,x=>{(d(u)!==d(_)||d(p)!==d(O))&&d(a)&&x(It)})}var rt=B(Ct,2);{var xt=x=>{var I=xc();let J;var me=A(I);Xr(me,()=>l.batch.id,De=>{fc(De,{get batchId(){return l.batch.id},get deviceColor(){return d(v)},get originalGravity(){return l.batch.measured_og}})}),E(I),dt(()=>J=gl(I,1,"chart-section svelte-1k5rb4o",null,J,{hidden:!i()})),ye(x,I)};nt(rt,x=>{d(k)&&x(xt)})}var F=B(rt,2),H=A(F),ie=A(H);E(H);var ue=B(H,2),ae=A(ue),oe=B(ae,2);{var V=x=>{var I=bc();I.__click=function(...De){l.onToggleExpand?.apply(this,De)};var J=A(I);let me;E(I),dt(()=>{nn(I,"aria-label",i()?"Collapse chart":"Expand chart"),me=gl(J,0,"w-4 h-4 transition-transform",null,me,{"rotate-180":i()})}),ye(x,I)};nt(oe,x=>{l.onToggleExpand&&x(V)})}Bl(2),E(ue),E(F),E(ce),E(P),dt(x=>{Se=gl(P,1,"card rounded-lg overflow-hidden animate-fade-in svelte-1k5rb4o",null,Se,{expanded:i(),wide:n()}),Tn(he,`background: ${d(ee)??""};`),Tn(_e,`background: ${d(ee)??""};`),we(Ve,d(v)),nn(it,"title",`${d(M).label??""} signal (${d(h)??"N/A"??""} dBm)`),we(tt,`${d(h)??"N/A"??""} dBm`),we(He,x),we(Vt,d(Z)!=="SG"?d(Z):""),we(de,d(Z)==="SG"?"Gravity":d(Z)==="P"?"Plato":"Brix"),we(ie,`Updated ${d(j)??""}`),nn(ae,"href",`/batches/${l.batch.id??""}`)},[()=>le(d(u))]),ye(e,P),$n()}Zn(["keydown","click"]);var kc=Ae('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Tc=Ae('<div class="alerts-list svelte-1uha8ag"></div>'),Ec=Ae('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Mc=Ae('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Ac=Ae('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Loading Batches</h2> <p class="empty-description svelte-1uha8ag"><span class="connecting-dots svelte-1uha8ag">Fetching active fermentations</span></p></div>'),Cc=Ae('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">Error Loading Batches</h2> <p class="empty-description svelte-1uha8ag"> </p></div>'),Dc=Ae('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Active Fermentations</h2> <p class="empty-description svelte-1uha8ag">Start a batch and set status to "Fermenting" or "Conditioning" to track it here</p> <div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Go to Batches  Create a new batch or update an existing batch status</span></div></div>'),Lc=Ae("<div></div>"),Pc=Ae("<!> <!>",1);function Jc(e,l){Qn(l,!0);let i=Ue(!1),n=Ue(!1),a=Ue(Yn([])),c=Ue(Yn(new Map)),u=Ue(!0),p=Ue(null);ba(async()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),D=localStorage.getItem("brewsignal_alerts_dismissed_time");R==="true"&&D&&Date.now()-parseInt(D,10)<360*60*1e3&&pe(i,!0),await v()});async function v(){pe(u,!0),pe(p,null);try{const R=await Jr();pe(a,R.filter(Q=>Q.status==="fermenting"||Q.status==="conditioning"),!0);const D=d(a).map(async Q=>{try{const le=await Zr(Q.id);return[Q.id,le]}catch{return null}}),ne=await Promise.all(D),Z=new Map;for(const Q of ne)Q&&Z.set(Q[0],Q[1]);pe(c,Z,!0)}catch(R){pe(p,R instanceof Error?R.message:"Failed to load batches",!0)}finally{pe(u,!1)}}let h=ze(()=>new Map(d(a).filter(R=>R.device_id&&(R.status==="fermenting"||R.status==="conditioning")).map(R=>[R.device_id,R.id]))),S=ze(()=>{const R=new Map(d(c));for(const[D,ne]of d(h)){const Z=ya.tilts.get(D);if(Z){const Q=R.get(ne)||{batch_id:ne,status:"fermenting",measured:{},temperature:{status:"unknown"},progress:{},targets:{}};R.set(ne,{...Q,measured:{...Q.measured,current_sg:Z.sg},temperature:{...Q.temperature,current:Z.temp,status:Q.temperature.yeast_min!==void 0&&Q.temperature.yeast_max!==void 0?Z.temp<Q.temperature.yeast_min?"too_cold":Z.temp>Q.temperature.yeast_max?"too_hot":"in_range":Q.temperature.status}})}}return R}),m=Ue(null);function _(R){pe(m,d(m)===R?null:R,!0)}function O(){pe(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function k(){pe(n,!d(n))}var Y=Pc();Hr("1uha8ag",R=>{Vr(()=>{Ir.title="Dashboard | BrewSignal"})});var X=Sl(Y);{var te=R=>{var D=Mc(),ne=A(D),Z=A(ne),Q=B(A(Z),4),le=A(Q,!0);E(Q),E(Z);var w=B(Z,2);w.__click=O,E(ne);var z=B(ne,2);{var N=j=>{var P=Tc();Dn(P,21,()=>wn.alerts,qn,(Se,he)=>{var ce=kc();let ge;var se=A(ce),K=A(se);E(se);var Ce=B(se,2),Ke=A(Ce,!0);E(Ce),E(ce),dt(()=>{ge=gl(ce,1,"alert-item svelte-1uha8ag",null,ge,{warning:d(he).level==="warning",critical:d(he).level==="critical"}),we(K,`${d(he).day??""}:`),we(Ke,d(he).message)}),ye(Se,ce)}),E(P),ye(j,P)};nt(z,j=>{d(n)||j(N)})}var ee=B(z,2);{var M=j=>{var P=Ec();P.__click=k;var Se=A(P,!0);E(P),dt(()=>we(Se,d(n)?`Show ${wn.alerts.length} alerts`:"Show less")),ye(j,P)};nt(ee,j=>{wn.alerts.length>3&&j(M)})}E(D),dt(()=>we(le,wn.alerts.length)),ye(R,D)};nt(X,R=>{wn.alerts.length>0&&!d(i)&&R(te)})}var y=B(X,2);{var q=R=>{var D=Ac();ye(R,D)},C=R=>{var D=Cn(),ne=Sl(D);{var Z=le=>{var w=Cc(),z=B(A(w),4),N=A(z,!0);E(z),E(w),dt(()=>we(N,d(p))),ye(le,w)},Q=le=>{var w=Cn(),z=Sl(w);{var N=M=>{var j=Dc();ye(M,j)},ee=M=>{var j=Lc();let P;Dn(j,21,()=>d(a),Se=>Se.id,(Se,he)=>{{let ce=ze(()=>d(S).get(d(he).id)),ge=ze(()=>d(m)===d(he).id),se=ze(()=>d(a).length===1);Sc(Se,{get batch(){return d(he)},get progress(){return d(ce)},get expanded(){return d(ge)},get wide(){return d(se)},onToggleExpand:()=>_(d(he).id),onBatchUpdated:v})}}),E(j),dt(()=>P=gl(j,1,"tilt-grid svelte-1uha8ag",null,P,{"single-tilt":d(a).length===1})),ye(M,j)};nt(z,M=>{d(a).length===0?M(N):M(ee,!1)},!0)}ye(le,w)};nt(ne,le=>{d(p)?le(Z):le(Q,!1)},!0)}ye(R,D)};nt(y,R=>{d(u)?R(q):R(C,!1)})}ye(e,Y),$n()}Zn(["click"]);export{Jc as component};
