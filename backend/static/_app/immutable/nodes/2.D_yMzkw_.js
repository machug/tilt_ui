import{d as qn,c as ya,a as Le,f as Ge,s as we,e as ka,t as Gr}from"../chunks/shYhah8v.js";import{w as zr,H as Nr,b6 as Vr,C as Ir,aa as jn,at as Us,b as w,ao as At,ab as Kn,ad as D,af as E,ac as U,an as lt,aq as Mt,s as ye,ar as Dl,p as Oi,ap as Ys,ax as Hr,ai as Rs,e as Br,ae as Wr}from"../chunks/DtKnEsEX.js";import{e as Tn,i as Hn}from"../chunks/hU7ve28I.js";import{B as Ur,i as gt}from"../chunks/DprM_ape.js";import{f as _n,c as Vn,d as qs,e as js,g as Ta,r as Ea,s as En,i as Yr,h as qr}from"../chunks/BBJHTYQq.js";import{s as _l}from"../chunks/DIoJNaxu.js";import{u as jr,e as Kr,t as Ts}from"../chunks/CYNGKJbs.js";import{w as gn}from"../chunks/CXA_RaLg.js";import{s as $l}from"../chunks/DQk8hcpl.js";import{b as Ma}from"../chunks/CKCRqHsA.js";import{b as Ks}from"../chunks/Dx2VdhfU.js";import{p as Bn}from"../chunks/DFgBLCmB.js";import{g as Jr}from"../chunks/DnAoWFNQ.js";import{T as Zr,h as Qr,i as Xr,g as Gi}from"../chunks/CFb7vd2n.js";import{i as $r,s as eo}from"../chunks/BG8ESxBY.js";function to(e,l,i){zr&&Nr();var n=new Ur(e),a=!Vr();Ir(()=>{var u=l();a&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const lo=!0,wt="u-",no="uplot",so=wt+"hz",io=wt+"vt",ao=wt+"title",ro=wt+"wrap",oo=wt+"under",co=wt+"over",uo=wt+"axis",zl=wt+"off",fo=wt+"select",vo=wt+"cursor-x",po=wt+"cursor-y",ho=wt+"cursor-pt",go=wt+"legend",mo=wt+"live",wo=wt+"inline",_o=wt+"series",xo=wt+"marker",zi=wt+"label",bo=wt+"value",xn="width",bn="height",mn="top",Ni="bottom",Ql="left",Es="right",Js="#000",Vi=Js+"0",Ms="mousemove",Ii="mousedown",As="mouseup",Hi="mouseenter",Bi="mouseleave",Wi="dblclick",So="resize",yo="scroll",Ui="change",Wn="dppxchange",Zs="--",an=typeof window<"u",Fs=an?document:null,en=an?window:null,ko=an?navigator:null;let Re,Gn;function Os(){let e=devicePixelRatio;Re!=e&&(Re=e,Gn&&zs(Ui,Gn,Os),Gn=matchMedia(`(min-resolution: ${Re-.001}dppx) and (max-resolution: ${Re+.001}dppx)`),Nl(Ui,Gn,Os),en.dispatchEvent(new CustomEvent(Wn)))}function Yt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Gs(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function je(e,l,i){e.style[l]=i+"px"}function rl(e,l,i,n){let a=Fs.createElement(e);return l!=null&&Yt(a,l),i?.insertBefore(a,n),a}function Xt(e,l){return rl("div",e,l)}const Yi=new WeakMap;function gl(e,l,i,n,a){let u="translate("+l+"px,"+i+"px)",c=Yi.get(e);u!=c&&(e.style.transform=u,Yi.set(e,u),l<0||i<0||l>n||i>a?Yt(e,zl):Gs(e,zl))}const qi=new WeakMap;function ji(e,l,i){let n=l+i,a=qi.get(e);n!=a&&(qi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ki=new WeakMap;function Ji(e,l,i,n){let a=l+""+i,u=Ki.get(e);a!=u&&(Ki.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Qs={passive:!0},To={...Qs,capture:!0};function Nl(e,l,i,n){l.addEventListener(e,i,n?To:Qs)}function zs(e,l,i,n){l.removeEventListener(e,i,Qs)}an&&Os();function ol(e,l,i,n){let a;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)a=u?i+n>>1:qt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Aa(e){return(i,n,a)=>{let u=-1,c=-1;for(let d=n;d<=a;d++)if(e(i[d])){u=d;break}for(let d=a;d>=n;d--)if(e(i[d])){c=d;break}return[u,c]}}const Da=e=>e!=null,La=e=>e!=null&&e>0,Jn=Aa(Da),Eo=Aa(La);function Mo(e,l,i,n=0,a=!1){let u=a?Eo:Jn,c=a?La:Da;[l,i]=u(e,l,i);let d=e[l],v=e[l];if(l>-1)if(n==1)d=e[l],v=e[i];else if(n==-1)d=e[i],v=e[l];else for(let p=l;p<=i;p++){let y=e[p];c(y)&&(y<d?d=y:y>v&&(v=y))}return[d??Ve,v??-Ve]}function Zn(e,l,i,n){let a=Xi(e),u=Xi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?xl:Ca,d=a==1?qt:$t,v=u==1?$t:qt,p=d(c(ht(e))),y=v(c(ht(l))),g=tn(i,p),m=tn(i,y);return i==10&&(p<0&&(g=Ie(g,-p)),y<0&&(m=Ie(m,-y))),n||i==2?(e=g*a,l=m*u):(e=Oa(e,g),l=Qn(l,m)),[e,l]}function Xs(e,l,i,n){let a=Zn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const $s=.1,Zi={mode:3,pad:$s},yn={pad:0,soft:null,mode:0},Ao={min:yn,max:yn};function Un(e,l,i,n){return Xn(i)?Qi(e,l,i):(yn.pad=i,yn.soft=n?0:null,yn.mode=n?3:0,Qi(e,l,Ao))}function Ce(e,l){return e??l}function Do(e,l,i){for(l=Ce(l,0),i=Ce(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Qi(e,l,i){let n=i.min,a=i.max,u=Ce(n.pad,0),c=Ce(a.pad,0),d=Ce(n.hard,-Ve),v=Ce(a.hard,Ve),p=Ce(n.soft,Ve),y=Ce(a.soft,-Ve),g=Ce(n.mode,0),m=Ce(a.mode,0),G=l-e,M=xl(G),R=zt(ht(e),ht(l)),z=xl(R),H=ht(z-M);(G<1e-24||H>10)&&(G=0,(e==0||l==0)&&(G=1e-24,g==2&&p!=Ve&&(u=0),m==2&&y!=-Ve&&(c=0)));let S=G||R||1e3,B=xl(S),A=tn(10,qt(B)),se=S*(G==0?e==0?.1:1:u),O=Ie(Oa(e-se,A/10),24),ee=e>=p&&(g==1||g==3&&O<=p||g==2&&O>=p)?p:Ve,X=zt(d,O<ee&&e>=ee?ee:cl(ee,O)),re=S*(G==0?l==0?.1:1:c),te=Ie(Qn(l+re,A/10),24),x=l<=y&&(m==1||m==3&&te>=y||m==2&&te<=y)?y:-Ve,I=cl(v,te>x&&l<=x?x:zt(x,te));return X==I&&X==0&&(I=100),[X,I]}const Lo=new Intl.NumberFormat(an?ko.language:"en-US"),ei=e=>Lo.format(e),jt=Math,In=jt.PI,ht=jt.abs,qt=jt.floor,pt=jt.round,$t=jt.ceil,cl=jt.min,zt=jt.max,tn=jt.pow,Xi=jt.sign,xl=jt.log10,Ca=jt.log2,Co=(e,l=1)=>jt.sinh(e)*l,Ds=(e,l=1)=>jt.asinh(e/l),Ve=1/0;function $i(e){return(xl((e^e>>31)-(e>>31))|0)+1}function Ns(e,l,i){return cl(zt(e,l),i)}function Pa(e){return typeof e=="function"}function Se(e){return Pa(e)?e:()=>e}const Po=()=>{},Ra=e=>e,Fa=(e,l)=>l,Ro=e=>null,ea=e=>!0,ta=(e,l)=>e==l,Fo=/\.\d*?(?=9{6,}|0{6,})/gm,Vl=e=>{if(za(e)||Ll.has(e))return e;const l=`${e}`,i=l.match(Fo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,u]=l.split("e");return+`${Vl(a)}e${u}`}return Ie(e,n)};function Ol(e,l){return Vl(Ie(Vl(e/l))*l)}function Qn(e,l){return Vl($t(Vl(e/l))*l)}function Oa(e,l){return Vl(qt(Vl(e/l))*l)}function Ie(e,l=0){if(za(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return pt(n)/i}const Ll=new Map;function Ga(e){return((""+e).split(".")[1]||"").length}function Mn(e,l,i,n){let a=[],u=n.map(Ga);for(let c=l;c<i;c++){let d=ht(c),v=Ie(tn(e,c),d);for(let p=0;p<n.length;p++){let y=e==10?+`${n[p]}e${c}`:n[p]*v,g=(c>=0?0:d)+(c>=u[p]?0:u[p]),m=e==10?y:Ie(y,g);a.push(m),Ll.set(m,g)}}return a}const kn={},ti=[],ln=[null,null],Al=Array.isArray,za=Number.isInteger,Oo=e=>e===void 0;function la(e){return typeof e=="string"}function Xn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Go(e){return e!=null&&typeof e=="object"}const zo=Object.getPrototypeOf(Uint8Array),Na="__proto__";function nn(e,l=Xn){let i;if(Al(e)){let n=e.find(a=>a!=null);if(Al(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=nn(e[a],l)}else i=e.slice()}else if(e instanceof zo)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Na&&(i[n]=nn(e[n],l))}else i=e;return i}function ut(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Na&&(Xn(e[a])?ut(e[a],nn(n[a])):e[a]=nn(n[a]))}return e}const No=0,Vo=1,Io=2;function Ho(e,l,i){for(let n=0,a,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[u=a++]=null}}}function Bo(e,l){if(Yo(e)){let c=e[0].slice();for(let d=1;d<e.length;d++)c.push(...e[d].slice(1));return qo(c[0])||(c=Uo(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let v=e[c][0],p=v.length;for(let y=0;y<p;y++)i.add(v[y])}let n=[Array.from(i).sort((c,d)=>c-d)],a=n[0].length,u=new Map;for(let c=0;c<a;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let d=e[c],v=d[0];for(let p=1;p<d.length;p++){let y=d[p],g=Array(a).fill(void 0),m=l?l[c][p]:Vo,G=[];for(let M=0;M<y.length;M++){let R=y[M],z=u.get(v[M]);R===null?m!=No&&(g[z]=R,m==Io&&G.push(z)):g[z]=R}Ho(g,G,a),n.push(g)}}return n}const Wo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Uo(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let a=[];for(let u=0;u<e.length;u++){let c=e[u],d=Array(i);for(let v=0;v<i;v++)d[v]=c[n[v]];a.push(d)}return a}function Yo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let u=0;u<i;u++)if(a[u]!=l[u])return!1}}return!0}function qo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const u=zt(1,qt((a-n+1)/l));for(let c=e[n],d=n+u;d<=a;d+=u){const v=e[d];if(v!=null){if(v<=c)return!1;c=v}}return!0}const Va=["January","February","March","April","May","June","July","August","September","October","November","December"],Ia=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ha(e){return e.slice(0,3)}const jo=Ia.map(Ha),Ko=Va.map(Ha),Jo={MMMM:Va,MMM:Ko,WWWW:Ia,WWW:jo};function wn(e){return(e<10?"0":"")+e}function Zo(e){return(e<10?"00":e<100?"0":"")+e}const Qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>wn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>wn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>wn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>wn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>wn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Zo(e.getMilliseconds())};function li(e,l){l=l||Jo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?Qo[a[1]]:a[0]);return u=>{let c="";for(let d=0;d<i.length;d++)c+=typeof i[d]=="string"?i[d]:i[d](u,l);return c}}const Xo=new Intl.DateTimeFormat().resolvedOptions().timeZone;function $o(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Xo?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Ba=e=>e%1==0,Yn=[1,2,2.5,5],ec=Mn(10,-32,0,Yn),Wa=Mn(10,0,32,Yn),tc=Wa.filter(Ba),Gl=ec.concat(Wa),ni=`
`,Ua="{YYYY}",na=ni+Ua,Ya="{M}/{D}",Sn=ni+Ya,zn=Sn+"/{YY}",qa="{aa}",lc="{h}:{mm}",Xl=lc+qa,sa=ni+Xl,ia=":{ss}",Oe=null;function ja(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,u=a*30,c=a*365,v=(e==1?Mn(10,0,3,Yn).filter(Ba):Mn(10,-3,0,Yn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const p=[[c,Ua,Oe,Oe,Oe,Oe,Oe,Oe,1],[a*28,"{MMM}",na,Oe,Oe,Oe,Oe,Oe,1],[a,Ya,na,Oe,Oe,Oe,Oe,Oe,1],[n,"{h}"+qa,zn,Oe,Sn,Oe,Oe,Oe,1],[i,Xl,zn,Oe,Sn,Oe,Oe,Oe,1],[l,ia,zn+" "+Xl,Oe,Sn+" "+Xl,Oe,sa,Oe,1],[e,ia+".{fff}",zn+" "+Xl,Oe,Sn+" "+Xl,Oe,sa,Oe,1]];function y(g){return(m,G,M,R,z,H)=>{let S=[],B=z>=c,A=z>=u&&z<c,se=g(M),O=Ie(se*e,3),ee=Ls(se.getFullYear(),B?0:se.getMonth(),A||B?1:se.getDate()),X=Ie(ee*e,3);if(A||B){let re=A?z/u:0,te=B?z/c:0,x=O==X?O:Ie(Ls(ee.getFullYear()+te,ee.getMonth()+re,1)*e,3),I=new Date(pt(x/e)),C=I.getFullYear(),K=I.getMonth();for(let F=0;x<=R;F++){let ne=Ls(C+te*F,K+re*F,1),V=ne-g(Ie(ne*e,3));x=Ie((+ne+V)*e,3),x<=R&&S.push(x)}}else{let re=z>=a?a:z,te=qt(M)-qt(O),x=X+te+Qn(O-X,re);S.push(x);let I=g(x),C=I.getHours()+I.getMinutes()/i+I.getSeconds()/n,K=z/n,F=m.axes[G]._space,ne=H/F;for(;x=Ie(x+z,e==1?0:3),!(x>R);)if(K>1){let V=qt(Ie(C+K,6))%24,de=g(x).getHours()-V;de>1&&(de=-1),x-=de*n,C=(C+K)%24;let me=S[S.length-1];Ie((x-me)/z,3)*ne>=.7&&S.push(x)}else S.push(x)}return S}}return[v,p,y]}const[nc,sc,ic]=ja(1),[ac,rc,oc]=ja(.001);Mn(2,-53,53,[1]);function aa(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ra(e,l){return(i,n,a,u,c)=>{let d=l.find(M=>c>=M[0])||l[l.length-1],v,p,y,g,m,G;return n.map(M=>{let R=e(M),z=R.getFullYear(),H=R.getMonth(),S=R.getDate(),B=R.getHours(),A=R.getMinutes(),se=R.getSeconds(),O=z!=v&&d[2]||H!=p&&d[3]||S!=y&&d[4]||B!=g&&d[5]||A!=m&&d[6]||se!=G&&d[7]||d[1];return v=z,p=H,y=S,g=B,m=A,G=se,O(R)})}}function cc(e,l){let i=li(l);return(n,a,u,c,d)=>a.map(v=>i(e(v)))}function Ls(e,l,i){return new Date(e,l,i)}function oa(e,l){return l(e)}const uc="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ca(e,l){return(i,n,a,u)=>u==null?Zs:l(e(n))}function fc(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function dc(e,l){return e.series[l].fill(e,l)}const vc={show:!0,live:!0,isolate:!1,mount:Po,markers:{show:!0,width:2,stroke:fc,fill:dc,dash:"solid"},idx:null,idxs:null,values:[]};function pc(e,l){let i=e.cursor.points,n=Xt(),a=i.size(e,l);je(n,xn,a),je(n,bn,a);let u=a/-2;je(n,"marginLeft",u),je(n,"marginTop",u);let c=i.width(e,l,a);return c&&je(n,"borderWidth",c),n}function hc(e,l){let i=e.series[l].points;return i._fill||i._stroke}function gc(e,l){let i=e.series[l].points;return i._stroke||i._fill}function mc(e,l){return e.series[l].points.size}const Cs=[0,0];function wc(e,l,i){return Cs[0]=l,Cs[1]=i,Cs}function Nn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ps(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const _c={show:!0,x:!0,y:!0,lock:!1,move:wc,points:{one:!1,show:pc,size:mc,width:0,stroke:gc,fill:hc},bind:{mousedown:Nn,mouseup:Nn,click:Nn,dblclick:Nn,mousemove:Ps,mouseleave:Ps,mouseenter:Ps},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ka={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},si=ut({},Ka,{filter:Fa}),Ja=ut({},si,{size:10}),Za=ut({},Ka,{show:!1}),ii='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Qa="bold "+ii,Xa=1.5,ua={show:!0,scale:"x",stroke:Js,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:2,grid:si,ticks:Ja,border:Za,font:ii,lineGap:Xa,rotate:0},xc="Value",bc="Time",fa={show:!0,scale:"x",auto:!1,sorted:1,min:Ve,max:-Ve,idxs:[]};function Sc(e,l,i,n,a){return l.map(u=>u==null?"":ei(u))}function yc(e,l,i,n,a,u,c){let d=[],v=Ll.get(a)||0;i=c?i:Ie(Qn(i,a),v);for(let p=i;p<=n;p=Ie(p+a,v))d.push(Object.is(p,-0)?0:p);return d}function Vs(e,l,i,n,a,u,c){const d=[],v=e.scales[e.axes[l].scale].log,p=v==10?xl:Ca,y=qt(p(i));a=tn(v,y),v==10&&(a=Gl[ol(a,Gl)]);let g=i,m=a*v;v==10&&(m=Gl[ol(m,Gl)]);do d.push(g),g=g+a,v==10&&!Ll.has(g)&&(g=Ie(g,Ll.get(a))),g>=m&&(a=g,m=a*v,v==10&&(m=Gl[ol(m,Gl)]));while(g<=n);return d}function kc(e,l,i,n,a,u,c){let v=e.scales[e.axes[l].scale].asinh,p=n>v?Vs(e,l,zt(v,i),n,a):[v],y=n>=0&&i<=0?[0]:[];return(i<-v?Vs(e,l,zt(v,-n),-i,a):[v]).reverse().map(m=>-m).concat(y,p)}const $a=/./,Tc=/[12357]/,Ec=/[125]/,da=/1/,Is=(e,l,i,n)=>e.map((a,u)=>l==4&&a==0||u%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function Mc(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=e.scales[c],v=e.valToPos,p=u._space,y=v(10,c),g=v(9,c)-y>=p?$a:v(7,c)-y>=p?Tc:v(5,c)-y>=p?Ec:da;if(g==da){let m=ht(v(1,c)-y);if(m<p)return Is(l.slice().reverse(),d.distr,g,$t(p/m)).reverse()}return Is(l,d.distr,g,1)}function Ac(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=u._space,v=e.valToPos,p=ht(v(1,c)-v(2,c));return p<d?Is(l.slice().reverse(),3,$a,$t(d/p)).reverse():l}function Dc(e,l,i,n){return n==null?Zs:l==null?"":ei(l)}const va={show:!0,scale:"y",stroke:Js,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Qa,side:3,grid:si,ticks:Ja,border:Za,font:ii,lineGap:Xa,rotate:0};function Lc(e,l){let i=3+(e||1)*2;return Ie(i*l,3)}function Cc(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],u=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),d=ht(c-u),v=e.series[l],p=d/(v.points.space*Re);return n[1]-n[0]<=p}const pa={scale:null,auto:!0,sorted:0,min:Ve,max:-Ve},er=(e,l,i,n,a)=>a,ha={show:!0,auto:!0,sorted:0,gaps:er,alpha:1,facets:[ut({},pa,{scale:"x"}),ut({},pa,{scale:"y"})]},ga={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:er,alpha:1,points:{show:Cc,filter:null},values:null,min:Ve,max:-Ve,idxs:[],path:null,clip:null};function Pc(e,l,i,n,a){return i/10}const tr={time:lo,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Rc=ut({},tr,{time:!1,ori:1}),ma={};function lr(e,l){let i=ma[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,u,c,d,v,p){for(let y=0;y<i.plots.length;y++)i.plots[y]!=a&&i.plots[y].pub(n,a,u,c,d,v,p)}},e!=null&&(ma[e]=i)),i}const sn=1,Hs=2;function Il(e,l,i){const n=e.mode,a=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,d=e.bbox;let v=u[0],p=n==2?u[1]:u[l],y=n==2?c[a.facets[0].scale]:c[e.series[0].scale],g=n==2?c[a.facets[1].scale]:c[a.scale],m=d.left,G=d.top,M=d.width,R=d.height,z=e.valToPosH,H=e.valToPosV;return y.ori==0?i(a,v,p,y,g,z,H,m,G,M,R,es,rn,ls,sr,ar):i(a,v,p,y,g,H,z,G,m,R,M,ts,on,oi,ir,rr)}function ai(e,l){let i=0,n=0,a=Ce(e.bands,ti);for(let u=0;u<a.length;u++){let c=a[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Fc(e,l,i,n,a){let u=e.mode,c=e.series[l],d=u==2?c.facets[1].scale:c.scale,v=e.scales[d];return a==-1?v.min:a==1?v.max:v.distr==3?v.dir==1?v.min:v.max:0}function bl(e,l,i,n,a,u){return Il(e,l,(c,d,v,p,y,g,m,G,M,R,z)=>{let H=c.pxRound;const S=p.dir*(p.ori==0?1:-1),B=p.ori==0?rn:on;let A,se;S==1?(A=i,se=n):(A=n,se=i);let O=H(g(d[A],p,R,G)),ee=H(m(v[A],y,z,M)),X=H(g(d[se],p,R,G)),re=H(m(u==1?y.max:y.min,y,z,M)),te=new Path2D(a);return B(te,X,re),B(te,O,re),B(te,O,ee),te})}function $n(e,l,i,n,a,u){let c=null;if(e.length>0){c=new Path2D;const d=l==0?ls:oi;let v=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let G=m[0]-v;G>0&&d(c,v,n,G,n+u),v=m[1]}}let p=i+a-v,y=10;p>0&&d(c,v,n-y/2,p,n+u+y)}return c}function Oc(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ri(e,l,i,n,a,u,c){let d=[],v=e.length;for(let p=a==1?i:n;p>=i&&p<=n;p+=a)if(l[p]===null){let g=p,m=p;if(a==1)for(;++p<=n&&l[p]===null;)m=p;else for(;--p>=i&&l[p]===null;)m=p;let G=u(e[g]),M=m==g?G:u(e[m]),R=g-a;G=c<=0&&R>=0&&R<v?u(e[R]):G;let H=m+a;M=c>=0&&H>=0&&H<v?u(e[H]):M,M>=G&&d.push([G,M])}return d}function wa(e){return e==0?Ra:e==1?pt:l=>Ol(l,e)}function nr(e){let l=e==0?es:ts,i=e==0?(a,u,c,d,v,p)=>{a.arcTo(u,c,d,v,p)}:(a,u,c,d,v,p)=>{a.arcTo(c,u,v,d,p)},n=e==0?(a,u,c,d,v)=>{a.rect(u,c,d,v)}:(a,u,c,d,v)=>{a.rect(c,u,v,d)};return(a,u,c,d,v,p=0,y=0)=>{p==0&&y==0?n(a,u,c,d,v):(p=cl(p,d/2,v/2),y=cl(y,d/2,v/2),l(a,u+p,c),i(a,u+d,c,u+d,c+v,p),i(a,u+d,c+v,u,c+v,y),i(a,u,c+v,u,c,y),i(a,u,c,u+d,c,p),a.closePath())}}const es=(e,l,i)=>{e.moveTo(l,i)},ts=(e,l,i)=>{e.moveTo(i,l)},rn=(e,l,i)=>{e.lineTo(l,i)},on=(e,l,i)=>{e.lineTo(i,l)},ls=nr(0),oi=nr(1),sr=(e,l,i,n,a,u)=>{e.arc(l,i,n,a,u)},ir=(e,l,i,n,a,u)=>{e.arc(i,l,n,a,u)},ar=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(l,i,n,a,u,c)},rr=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(i,l,a,n,c,u)};function or(e){return(l,i,n,a,u)=>Il(l,i,(c,d,v,p,y,g,m,G,M,R,z)=>{let{pxRound:H,points:S}=c,B,A;p.ori==0?(B=es,A=sr):(B=ts,A=ir);const se=Ie(S.width*Re,3);let O=(S.size-S.width)/2*Re,ee=Ie(O*2,3),X=new Path2D,re=new Path2D,{left:te,top:x,width:I,height:C}=l.bbox;ls(re,te-ee,x-ee,I+ee*2,C+ee*2);const K=F=>{if(v[F]!=null){let ne=H(g(d[F],p,R,G)),V=H(m(v[F],y,z,M));B(X,ne+O,V),A(X,ne,V,O,0,In*2)}};if(u)u.forEach(K);else for(let F=n;F<=a;F++)K(F);return{stroke:se>0?X:null,fill:X,clip:re,flags:sn|Hs}})}function cr(e){return(l,i,n,a,u,c)=>{n!=a&&(u!=n&&c!=n&&e(l,i,n),u!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Gc=cr(rn),zc=cr(on);function ur(e){const l=Ce(e?.alignGaps,0);return(i,n,a,u)=>Il(i,n,(c,d,v,p,y,g,m,G,M,R,z)=>{[a,u]=Jn(v,a,u);let H=c.pxRound,S=C=>H(g(C,p,R,G)),B=C=>H(m(C,y,z,M)),A,se;p.ori==0?(A=rn,se=Gc):(A=on,se=zc);const O=p.dir*(p.ori==0?1:-1),ee={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},X=ee.stroke;let re=!1;if(u-a>=R*4){let C=q=>i.posToVal(q,p.key,!0),K=null,F=null,ne,V,Me,be=S(d[O==1?a:u]),de=S(d[a]),me=S(d[u]),oe=C(O==1?de+1:me-1);for(let q=O==1?a:u;q>=a&&q<=u;q+=O){let ke=d[q],_e=(O==1?ke<oe:ke>oe)?be:S(ke),ue=v[q];_e==be?ue!=null?(V=ue,K==null?(A(X,_e,B(V)),ne=K=F=V):V<K?K=V:V>F&&(F=V)):ue===null&&(re=!0):(K!=null&&se(X,be,B(K),B(F),B(ne),B(V)),ue!=null?(V=ue,A(X,_e,B(V)),K=F=ne=V):(K=F=null,ue===null&&(re=!0)),be=_e,oe=C(be+O))}K!=null&&K!=F&&Me!=be&&se(X,be,B(K),B(F),B(ne),B(V))}else for(let C=O==1?a:u;C>=a&&C<=u;C+=O){let K=v[C];K===null?re=!0:K!=null&&A(X,S(d[C]),B(K))}let[x,I]=ai(i,n);if(c.fill!=null||x!=0){let C=ee.fill=new Path2D(X),K=c.fillTo(i,n,c.min,c.max,x),F=B(K),ne=S(d[a]),V=S(d[u]);O==-1&&([V,ne]=[ne,V]),A(C,V,F),A(C,ne,F)}if(!c.spanGaps){let C=[];re&&C.push(...ri(d,v,a,u,O,S,l)),ee.gaps=C=c.gaps(i,n,a,u,C),ee.clip=$n(C,p.ori,G,M,R,z)}return I!=0&&(ee.band=I==2?[bl(i,n,a,u,X,-1),bl(i,n,a,u,X,1)]:bl(i,n,a,u,X,I)),ee})}function Nc(e){const l=Ce(e.align,1),i=Ce(e.ascDesc,!1),n=Ce(e.alignGaps,0),a=Ce(e.extend,!1);return(u,c,d,v)=>Il(u,c,(p,y,g,m,G,M,R,z,H,S,B)=>{[d,v]=Jn(g,d,v);let A=p.pxRound,{left:se,width:O}=u.bbox,ee=de=>A(M(de,m,S,z)),X=de=>A(R(de,G,B,H)),re=m.ori==0?rn:on;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:sn},x=te.stroke,I=m.dir*(m.ori==0?1:-1);let C=X(g[I==1?d:v]),K=ee(y[I==1?d:v]),F=K,ne=K;a&&l==-1&&(ne=se,re(x,ne,C)),re(x,K,C);for(let de=I==1?d:v;de>=d&&de<=v;de+=I){let me=g[de];if(me==null)continue;let oe=ee(y[de]),q=X(me);l==1?re(x,oe,C):re(x,F,q),re(x,oe,q),C=q,F=oe}let V=F;a&&l==1&&(V=se+O,re(x,V,C));let[Me,be]=ai(u,c);if(p.fill!=null||Me!=0){let de=te.fill=new Path2D(x),me=p.fillTo(u,c,p.min,p.max,Me),oe=X(me);re(de,V,oe),re(de,ne,oe)}if(!p.spanGaps){let de=[];de.push(...ri(y,g,d,v,I,ee,n));let me=p.width*Re/2,oe=i||l==1?me:-me,q=i||l==-1?-me:me;de.forEach(ke=>{ke[0]+=oe,ke[1]+=q}),te.gaps=de=p.gaps(u,c,d,v,de),te.clip=$n(de,m.ori,z,H,S,B)}return be!=0&&(te.band=be==2?[bl(u,c,d,v,x,-1),bl(u,c,d,v,x,1)]:bl(u,c,d,v,x,be)),te})}function _a(e,l,i,n,a,u,c=Ve){if(e.length>1){let d=null;for(let v=0,p=1/0;v<e.length;v++)if(l[v]!==void 0){if(d!=null){let y=ht(e[v]-e[d]);y<p&&(p=y,c=ht(i(e[v],n,a,u)-i(e[d],n,a,u)))}d=v}}return c}function Vc(e){e=e||kn;const l=Ce(e.size,[.6,Ve,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const u=Se(a),c=1-l[0],d=Ce(l[1],Ve),v=Ce(l[2],1),p=Ce(e.disp,kn),y=Ce(e.each,G=>{}),{fill:g,stroke:m}=p;return(G,M,R,z)=>Il(G,M,(H,S,B,A,se,O,ee,X,re,te,x)=>{let I=H.pxRound,C=i,K=n*Re,F=d*Re,ne=v*Re,V,Me;A.ori==0?[V,Me]=u(G,M):[Me,V]=u(G,M);const be=A.dir*(A.ori==0?1:-1);let de=A.ori==0?ls:oi,me=A.ori==0?y:(N,Ee,Be,Nt,It,Dt,Z)=>{y(N,Ee,Be,It,Nt,Z,Dt)},oe=Ce(G.bands,ti).find(N=>N.series[0]==M),q=oe!=null?oe.dir:0,ke=H.fillTo(G,M,H.min,H.max,q),Ne=I(ee(ke,se,x,re)),_e,ue,Qe,Ke=te,Te=I(H.width*Re),Xe=!1,nt=null,We=null,Ze=null,ft=null;g!=null&&(Te==0||m!=null)&&(Xe=!0,nt=g.values(G,M,R,z),We=new Map,new Set(nt).forEach(N=>{N!=null&&We.set(N,new Path2D)}),Te>0&&(Ze=m.values(G,M,R,z),ft=new Map,new Set(Ze).forEach(N=>{N!=null&&ft.set(N,new Path2D)})));let{x0:fe,size:it}=p;if(fe!=null&&it!=null){C=1,S=fe.values(G,M,R,z),fe.unit==2&&(S=S.map(Be=>G.posToVal(X+Be*te,A.key,!0)));let N=it.values(G,M,R,z);it.unit==2?ue=N[0]*te:ue=O(N[0],A,te,X)-O(0,A,te,X),Ke=_a(S,B,O,A,te,X,Ke),Qe=Ke-ue+K}else Ke=_a(S,B,O,A,te,X,Ke),Qe=Ke*c+K,ue=Ke-Qe;Qe<1&&(Qe=0),Te>=ue/2&&(Te=0),Qe<5&&(I=Ra);let Pt=Qe>0,_t=Ke-Qe-(Pt?Te:0);ue=I(Ns(_t,ne,F)),_e=(C==0?ue/2:C==be?0:ue)-C*be*((C==0?K/2:0)+(Pt?Te/2:0));const He={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},dt=Xe?null:new Path2D;let xt=null;if(oe!=null)xt=G.data[oe.series[1]];else{let{y0:N,y1:Ee}=p;N!=null&&Ee!=null&&(B=Ee.values(G,M,R,z),xt=N.values(G,M,R,z))}let Rt=V*ue,ie=Me*ue;for(let N=be==1?R:z;N>=R&&N<=z;N+=be){let Ee=B[N];if(Ee==null)continue;if(xt!=null){let P=xt[N]??0;if(Ee-P==0)continue;Ne=ee(P,se,x,re)}let Be=A.distr!=2||p!=null?S[N]:N,Nt=O(Be,A,te,X),It=ee(Ce(Ee,ke),se,x,re),Dt=I(Nt-_e),Z=I(zt(It,Ne)),_=I(cl(It,Ne)),k=Z-_;if(Ee!=null){let P=Ee<0?ie:Rt,J=Ee<0?Rt:ie;Xe?(Te>0&&Ze[N]!=null&&de(ft.get(Ze[N]),Dt,_+qt(Te/2),ue,zt(0,k-Te),P,J),nt[N]!=null&&de(We.get(nt[N]),Dt,_+qt(Te/2),ue,zt(0,k-Te),P,J)):de(dt,Dt,_+qt(Te/2),ue,zt(0,k-Te),P,J),me(G,M,N,Dt-Te/2,_,ue+Te,k)}}return Te>0?He.stroke=Xe?ft:dt:Xe||(He._fill=H.width==0?H._fill:H._stroke??H._fill,He.width=0),He.fill=Xe?We:dt,He})}function Ic(e,l){const i=Ce(l?.alignGaps,0);return(n,a,u,c)=>Il(n,a,(d,v,p,y,g,m,G,M,R,z,H)=>{[u,c]=Jn(p,u,c);let S=d.pxRound,B=V=>S(m(V,y,z,M)),A=V=>S(G(V,g,H,R)),se,O,ee;y.ori==0?(se=es,ee=rn,O=ar):(se=ts,ee=on,O=rr);const X=y.dir*(y.ori==0?1:-1);let re=B(v[X==1?u:c]),te=re,x=[],I=[];for(let V=X==1?u:c;V>=u&&V<=c;V+=X)if(p[V]!=null){let be=v[V],de=B(be);x.push(te=de),I.push(A(p[V]))}const C={stroke:e(x,I,se,ee,O,S),fill:null,clip:null,band:null,gaps:null,flags:sn},K=C.stroke;let[F,ne]=ai(n,a);if(d.fill!=null||F!=0){let V=C.fill=new Path2D(K),Me=d.fillTo(n,a,d.min,d.max,F),be=A(Me);ee(V,te,be),ee(V,re,be)}if(!d.spanGaps){let V=[];V.push(...ri(v,p,u,c,X,B,i)),C.gaps=V=d.gaps(n,a,u,c,V),C.clip=$n(V,y.ori,M,R,z,H)}return ne!=0&&(C.band=ne==2?[bl(n,a,u,c,K,-1),bl(n,a,u,c,K,1)]:bl(n,a,u,c,K,ne)),C})}function Hc(e){return Ic(Bc,e)}function Bc(e,l,i,n,a,u){const c=e.length;if(c<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),c==2)n(d,e[1],l[1]);else{let v=Array(c),p=Array(c-1),y=Array(c-1),g=Array(c-1);for(let m=0;m<c-1;m++)y[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],p[m]=y[m]/g[m];v[0]=p[0];for(let m=1;m<c-1;m++)p[m]===0||p[m-1]===0||p[m-1]>0!=p[m]>0?v[m]=0:(v[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/p[m-1]+(g[m]+2*g[m-1])/p[m]),isFinite(v[m])||(v[m]=0));v[c-1]=p[c-2];for(let m=0;m<c-1;m++)a(d,e[m]+g[m]/3,l[m]+v[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-v[m+1]*g[m]/3,e[m+1],l[m+1])}return d}const Bs=new Set;function xa(){for(let e of Bs)e.syncRect(!0)}an&&(Nl(So,en,xa),Nl(yo,en,xa,!0),Nl(Wn,en,()=>{mt.pxRatio=Re}));const Wc=ur(),Uc=or();function ba(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Ws(u,c,l,i))}function Yc(e,l){return e.map((i,n)=>n==0?{}:ut({},l,i))}function Ws(e,l,i,n){return ut({},l==0?i:n,e)}function fr(e,l,i){return l==null?ln:[l,i]}const qc=fr;function jc(e,l,i){return l==null?ln:Un(l,i,$s,!0)}function dr(e,l,i,n){return l==null?ln:Zn(l,i,e.scales[n].log,!1)}const Kc=dr;function vr(e,l,i,n){return l==null?ln:Xs(l,i,e.scales[n].log,!1)}const Jc=vr;function Zc(e,l,i,n,a){let u=zt($i(e),$i(l)),c=l-e,d=ol(a/n*c,i);do{let v=i[d],p=n*v/c;if(p>=a&&u+(v<5?Ll.get(v):0)<=17)return[v,p]}while(++d<i.length);return[0,0]}function Sa(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=pt((i=+a)*Re))+"px"),[e,l,i]}function Qc(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ie(l[2]*Re,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function mt(e,l,i){const n={mode:Ce(e.mode,1)},a=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let v=!1;n.status=0;const p=n.root=Xt(no);if(e.id!=null&&(p.id=e.id),Yt(p,e.class),e.title){let t=Xt(ao,p);t.textContent=e.title}const y=rl("canvas"),g=n.ctx=y.getContext("2d"),m=Xt(ro,p);Nl("click",m,t=>{t.target===M&&(Ue!=ql||Je!=jl)&&Ct.click(n,t)},!0);const G=n.under=Xt(oo,m);m.appendChild(y);const M=n.over=Xt(co,m);e=nn(e);const R=+Ce(e.pxAlign,1),z=wa(R);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const H=e.ms||.001,S=n.series=a==1?ba(e.series||[],fa,ga,!1):Yc(e.series||[null],ha),B=n.axes=ba(e.axes||[],ua,va,!0),A=n.scales={},se=n.bands=e.bands||[];se.forEach(t=>{t.fill=Se(t.fill||null),t.dir=Ce(t.dir,-1)});const O=a==2?S[1].facets[0].scale:S[0].scale,ee={axes:br,series:gr},X=(e.drawOrder||["axes","series"]).map(t=>ee[t]);function re(t){const s=t.distr==3?r=>xl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ds(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,b=h-f;return(o-f)/b}}function te(t){let s=A[t];if(s==null){let r=(e.scales||kn)[t]||kn;if(r.from!=null){te(r.from);let o=ut({},A[r.from],r,{key:t});o.valToPct=re(o),A[t]=o}else{s=A[t]=ut({},t==O?tr:Rc,r),s.key=t;let o=s.time,f=s.range,h=Al(f);if((t!=O||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Zi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Zi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Xn(f))){let b=f;f=(T,L,W)=>L==null?ln:Un(L,W,b)}s.range=Se(f||(o?qc:t==O?s.distr==3?Kc:s.distr==4?Jc:fr:s.distr==3?dr:s.distr==4?vr:jc)),s.auto=Se(h?!1:s.auto),s.clamp=Se(s.clamp||Pc),s._min=s._max=null,s.valToPct=re(s)}}}te("x"),te("y"),a==1&&S.forEach(t=>{te(t.scale)}),B.forEach(t=>{te(t.scale)});for(let t in e.scales)te(t);const x=A[O],I=x.distr;let C,K;x.ori==0?(Yt(p,so),C=u,K=c):(Yt(p,io),C=c,K=u);const F={};for(let t in A){let s=A[t];(s.min!=null||s.max!=null)&&(F[t]={min:s.min,max:s.max},s.min=s.max=null)}const ne=e.tzDate||(t=>new Date(pt(t/H))),V=e.fmtDate||li,Me=H==1?ic(ne):oc(ne),be=ra(ne,aa(H==1?sc:rc,V)),de=ca(ne,oa(uc,V)),me=[],oe=n.legend=ut({},vc,e.legend),q=n.cursor=ut({},_c,{drag:{y:a==2}},e.cursor),ke=oe.show,Ne=q.show,_e=oe.markers;oe.idxs=me,_e.width=Se(_e.width),_e.dash=Se(_e.dash),_e.stroke=Se(_e.stroke),_e.fill=Se(_e.fill);let ue,Qe,Ke,Te=[],Xe=[],nt,We=!1,Ze={};if(oe.live){const t=S[1]?S[1].values:null;We=t!=null,nt=We?t(n,1,0):{_:0};for(let s in nt)Ze[s]=Zs}if(ke)if(ue=rl("table",go,p),Ke=rl("tbody",null,ue),oe.mount(n,ue),We){Qe=rl("thead",null,ue,Ke);let t=rl("tr",null,Qe);rl("th",null,t);for(var ft in nt)rl("th",zi,t).textContent=ft}else Yt(ue,wo),oe.live&&Yt(ue,mo);const fe={show:!0},it={show:!1};function Pt(t,s){if(s==0&&(We||!oe.live||a==2))return ln;let r=[],o=rl("tr",_o,Ke,Ke.childNodes[s]);Yt(o,t.class),t.show||Yt(o,zl);let f=rl("th",null,o);if(_e.show){let T=Xt(xo,f);if(s>0){let L=_e.width(n,s);L&&(T.style.border=L+"px "+_e.dash(n,s)+" "+_e.stroke(n,s)),T.style.background=_e.fill(n,s)}}let h=Xt(zi,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(_e.show||(h.style.color=t.width>0?_e.stroke(n,s):_e.fill(n,s)),He("click",f,T=>{if(q._lock)return;rt(T);let L=S.indexOf(t);if((T.ctrlKey||T.metaKey)!=oe.isolate){let W=S.some((Y,j)=>j>0&&j!=L&&Y.show);S.forEach((Y,j)=>{j>0&&dl(j,W?j==L?fe:it:fe,!0,ct.setSeries)})}else dl(L,{show:!t.show},!0,ct.setSeries)},!1),ll&&He(Hi,f,T=>{q._lock||(rt(T),dl(S.indexOf(t),Jl,!0,ct.setSeries))},!1));for(var b in nt){let T=rl("td",bo,o);T.textContent="--",r.push(T)}return[o,r]}const _t=new Map;function He(t,s,r,o=!0){const f=_t.get(s)||{},h=q.bind[t](n,s,r,o);h&&(Nl(t,s,f[t]=h),_t.set(s,f))}function dt(t,s,r){const o=_t.get(s)||{};for(let f in o)(t==null||f==t)&&(zs(f,s,o[f]),delete o[f]);t==null&&_t.delete(s)}let xt=0,Rt=0,ie=0,N=0,Ee=0,Be=0,Nt=Ee,It=Be,Dt=ie,Z=N,_=0,k=0,P=0,J=0;n.bbox={};let ae=!1,pe=!1,Q=!1,$=!1,Fe=!1,ge=!1;function $e(t,s,r){(r||t!=n.width||s!=n.height)&&at(t,s),Bl(!1),Q=!0,pe=!0,Wl()}function at(t,s){n.width=xt=ie=t,n.height=Rt=N=s,Ee=Be=0,ul(),tl();let r=n.bbox;_=r.left=Ol(Ee*Re,.5),k=r.top=Ol(Be*Re,.5),P=r.width=Ol(ie*Re,.5),J=r.height=Ol(N*Re,.5)}const Kt=3;function Jt(){let t=!1,s=0;for(;!t;){s++;let r=_r(s),o=xr(s);t=s==Kt||r&&o,t||(at(n.width,n.height),pe=!0)}}function el({width:t,height:s}){$e(t,s)}n.setSize=el;function ul(){let t=!1,s=!1,r=!1,o=!1;B.forEach((f,h)=>{if(f.show&&f._show){let{side:b,_size:T}=f,L=b%2,W=f.label!=null?f.labelSize:0,Y=T+W;Y>0&&(L?(ie-=Y,b==3?(Ee+=Y,o=!0):r=!0):(N-=Y,b==0?(Be+=Y,t=!0):s=!0))}}),nl[0]=t,nl[1]=r,nl[2]=s,nl[3]=o,ie-=fl[1]+fl[3],Ee+=fl[3],N-=fl[2]+fl[0],Be+=fl[0]}function tl(){let t=Ee+ie,s=Be+N,r=Ee,o=Be;function f(h,b){switch(h){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}B.forEach((h,b)=>{if(h.show&&h._show){let T=h.side;h._pos=f(T,h._size),h.label!=null&&(h._lpos=f(T,h.labelSize))}})}if(q.dataIdx==null){let t=q.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Se(t.prox),o=t.bias??=0;q.dataIdx=(f,h,b,T)=>{if(h==0)return b;let L=b,W=r(f,h,b,T)??Ve,Y=W>=0&&W<Ve,j=x.ori==0?ie:N,ve=q.left,Pe=l[0],De=l[h];if(s.has(De[b])){L=null;let xe=null,ce=null,le;if(o==0||o==-1)for(le=b;xe==null&&le-- >0;)s.has(De[le])||(xe=le);if(o==0||o==1)for(le=b;ce==null&&le++<De.length;)s.has(De[le])||(ce=le);if(xe!=null||ce!=null)if(Y){let qe=xe==null?-1/0:C(Pe[xe],x,j,0),et=ce==null?1/0:C(Pe[ce],x,j,0),Et=ve-qe,ze=et-ve;Et<=ze?Et<=W&&(L=xe):ze<=W&&(L=ce)}else L=ce==null?xe:xe==null?ce:b-xe<=ce-b?xe:ce}else Y&&ht(ve-C(Pe[b],x,j,0))>W&&(L=null);return L}}const rt=t=>{q.event=t};q.idxs=me,q._lock=!1;let he=q.points;he.show=Se(he.show),he.size=Se(he.size),he.stroke=Se(he.stroke),he.width=Se(he.width),he.fill=Se(he.fill);const st=n.focus=ut({},e.focus||{alpha:.3},q.focus),ll=st.prox>=0,vt=ll&&he.one;let Ae=[],ot=[],Ht=[];function Sl(t,s){let r=he.show(n,s);if(r instanceof HTMLElement)return Yt(r,ho),Yt(r,t.class),gl(r,-10,-10,ie,N),M.insertBefore(r,Ae[s]),r}function yl(t,s){if(a==1||s>0){let r=a==1&&A[t.scale].time,o=t.value;t.value=r?la(o)?ca(ne,oa(o,V)):o||de:o||Dc,t.label=t.label||(r?bc:xc)}if(vt||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Wc||Ro,t.fillTo=Se(t.fillTo||Fc),t.pxAlign=+Ce(t.pxAlign,R),t.pxRound=wa(t.pxAlign),t.stroke=Se(t.stroke||null),t.fill=Se(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Lc(zt(1,t.width),1),o=t.points=ut({},{size:r,width:zt(1,r*.2),stroke:t.stroke,space:r*2,paths:Uc,_stroke:null,_fill:null},t.points);o.show=Se(o.show),o.filter=Se(o.filter),o.fill=Se(o.fill),o.stroke=Se(o.stroke),o.paths=Se(o.paths),o.pxAlign=t.pxAlign}if(ke){let r=Pt(t,s);Te.splice(s,0,r[0]),Xe.splice(s,0,r[1]),oe.values.push(null)}if(Ne){me.splice(s,0,null);let r=null;vt?s==0&&(r=Sl(t,s)):s>0&&(r=Sl(t,s)),Ae.splice(s,0,r),ot.splice(s,0,0),Ht.splice(s,0,0)}Tt("addSeries",s)}function cn(t,s){s=s??S.length,t=a==1?Ws(t,s,fa,ga):Ws(t,s,{},ha),S.splice(s,0,t),yl(S[s],s)}n.addSeries=cn;function ml(t){if(S.splice(t,1),ke){oe.values.splice(t,1),Xe.splice(t,1);let s=Te.splice(t,1)[0];dt(null,s.firstChild),s.remove()}Ne&&(me.splice(t,1),Ae.splice(t,1)[0].remove(),ot.splice(t,1),Ht.splice(t,1)),Tt("delSeries",t)}n.delSeries=ml;const nl=[!1,!1,!1,!1];function ns(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=A[t.scale];o==null&&(t.scale=r?S[1].scale:O,o=A[t.scale]);let f=o.time;t.size=Se(t.size),t.space=Se(t.space),t.rotate=Se(t.rotate),Al(t.incrs)&&t.incrs.forEach(b=>{!Ll.has(b)&&Ll.set(b,Ga(b))}),t.incrs=Se(t.incrs||(o.distr==2?tc:f?H==1?nc:ac:Gl)),t.splits=Se(t.splits||(f&&o.distr==1?Me:o.distr==3?Vs:o.distr==4?kc:yc)),t.stroke=Se(t.stroke),t.grid.stroke=Se(t.grid.stroke),t.ticks.stroke=Se(t.ticks.stroke),t.border.stroke=Se(t.border.stroke);let h=t.values;t.values=Al(h)&&!Al(h[0])?Se(h):f?Al(h)?ra(ne,aa(h,V)):la(h)?cc(ne,h):h||be:h||Sc,t.filter=Se(t.filter||(o.distr>=3&&o.log==10?Mc:o.distr==3&&o.log==2?Ac:Fa)),t.font=Sa(t.font),t.labelFont=Sa(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(nl[s]=!0,t._el=Xt(uo,m))}}function Cl(t,s,r,o){let[f,h,b,T]=r,L=s%2,W=0;return L==0&&(T||h)&&(W=s==0&&!f||s==2&&!b?pt(ua.size/3):0),L==1&&(f||b)&&(W=s==1&&!h||s==3&&!T?pt(va.size/2):0),W}const An=n.padding=(e.padding||[Cl,Cl,Cl,Cl]).map(t=>Se(Ce(t,Cl))),fl=n._padding=An.map((t,s)=>t(n,s,nl,0));let Lt,bt=null,St=null;const Dn=a==1?S[0].idxs:null;let sl=null,un=!1;function ci(t,s){if(l=t??[],n.data=n._data=l,a==2){Lt=0;for(let r=1;r<S.length;r++)Lt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),sl=l[0],Lt=sl.length;let r=l;if(I==2){r=l.slice();let o=r[0]=Array(Lt);for(let f=0;f<Lt;f++)o[f]=f}n._data=l=r}if(Bl(!0),Tt("setData"),I==2&&(Q=!0),s!==!1){let r=x;r.auto(n,un)?ss():Tl(O,r.min,r.max),$=$||q.left>=0,ge=!0,Wl()}}n.setData=ci;function ss(){un=!0;let t,s;a==1&&(Lt>0?(bt=Dn[0]=0,St=Dn[1]=Lt-1,t=l[0][bt],s=l[0][St],I==2?(t=bt,s=St):t==s&&(I==3?[t,s]=Zn(t,t,x.log,!1):I==4?[t,s]=Xs(t,t,x.log,!1):x.time?s=t+pt(86400/H):[t,s]=Un(t,s,$s,!0))):(bt=Dn[0]=t=null,St=Dn[1]=s=null)),Tl(O,t,s)}let Ln,Hl,is,as,rs,os,cs,us,fs,Vt;function ui(t,s,r,o,f,h){t??=Vi,r??=ti,o??="butt",f??=Vi,h??="round",t!=Ln&&(g.strokeStyle=Ln=t),f!=Hl&&(g.fillStyle=Hl=f),s!=is&&(g.lineWidth=is=s),h!=rs&&(g.lineJoin=rs=h),o!=os&&(g.lineCap=os=o),r!=as&&g.setLineDash(as=r)}function fi(t,s,r,o){s!=Hl&&(g.fillStyle=Hl=s),t!=cs&&(g.font=cs=t),r!=us&&(g.textAlign=us=r),o!=fs&&(g.textBaseline=fs=o)}function ds(t,s,r,o,f=0){if(o.length>0&&t.auto(n,un)&&(s==null||s.min==null)){let h=Ce(bt,0),b=Ce(St,o.length-1),T=r.min==null?Mo(o,h,b,f,t.distr==3):[r.min,r.max];t.min=cl(t.min,r.min=T[0]),t.max=zt(t.max,r.max=T[1])}}const di={min:null,max:null};function pr(){for(let o in A){let f=A[o];F[o]==null&&(f.min==null||F[O]!=null&&f.auto(n,un))&&(F[o]=di)}for(let o in A){let f=A[o];F[o]==null&&f.from!=null&&F[f.from]!=null&&(F[o]=di)}F[O]!=null&&Bl(!0);let t={};for(let o in F){let f=F[o];if(f!=null){let h=t[o]=nn(A[o],Go);if(f.min!=null)ut(h,f);else if(o!=O||a==2)if(Lt==0&&h.from==null){let b=h.range(n,null,null,o);h.min=b[0],h.max=b[1]}else h.min=Ve,h.max=-Ve}}if(Lt>0){S.forEach((o,f)=>{if(a==1){let h=o.scale,b=F[h];if(b==null)return;let T=t[h];if(f==0){let L=T.range(n,T.min,T.max,h);T.min=L[0],T.max=L[1],bt=ol(T.min,l[0]),St=ol(T.max,l[0]),St-bt>1&&(l[0][bt]<T.min&&bt++,l[0][St]>T.max&&St--),o.min=sl[bt],o.max=sl[St]}else o.show&&o.auto&&ds(T,b,o,l[f],o.sorted);o.idxs[0]=bt,o.idxs[1]=St}else if(f>0&&o.show&&o.auto){let[h,b]=o.facets,T=h.scale,L=b.scale,[W,Y]=l[f],j=t[T],ve=t[L];j!=null&&ds(j,F[T],h,W,h.sorted),ve!=null&&ds(ve,F[L],b,Y,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],h=F[o];if(f.from==null&&(h==null||h.min==null)){let b=f.range(n,f.min==Ve?null:f.min,f.max==-Ve?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let b=f.range(n,h.min,h.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=A[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let b=h.distr;h._min=b==3?xl(h.min):b==4?Ds(h.min,h.asinh):b==100?h.fwd(h.min):h.min,h._max=b==3?xl(h.max):b==4?Ds(h.max,h.asinh):b==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){S.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Q=!0,Tt("setScale",o);Ne&&q.left>=0&&($=ge=!0)}for(let o in F)F[o]=null}function hr(t){let s=Ns(bt-1,0,Lt-1),r=Ns(St+1,0,Lt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Lt-1;)r++;return[s,r]}function gr(){if(Lt>0){let t=S.some(s=>s._focus)&&Vt!=st.alpha;t&&(g.globalAlpha=Vt=st.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(vi(r,!1),vi(r,!0),s._paths==null)){let o=Vt;Vt!=s.alpha&&(g.globalAlpha=Vt=s.alpha);let f=a==2?[0,l[r][0].length-1]:hr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Vt!=o&&(g.globalAlpha=Vt=o)}}),S.forEach((s,r)=>{if(r>0&&s.show){let o=Vt;Vt!=s.alpha&&(g.globalAlpha=Vt=s.alpha),s._paths!=null&&pi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,bt,St,f),b=s.points.filter(n,r,h,f);(h||b)&&(s.points._paths=s.points.paths(n,r,bt,St,b),pi(r,!0))}Vt!=o&&(g.globalAlpha=Vt=o),Tt("drawSeries",r)}}),t&&(g.globalAlpha=Vt=1)}}function vi(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function pi(t,s){let r=s?S[t].points:S[t],{stroke:o,fill:f,clip:h,flags:b,_stroke:T=r._stroke,_fill:L=r._fill,_width:W=r.width}=r._paths;W=Ie(W*Re,3);let Y=null,j=W%2/2;s&&L==null&&(L=W>0?"#fff":T);let ve=r.pxAlign==1&&j>0;if(ve&&g.translate(j,j),!s){let Pe=_-W/2,De=k-W/2,xe=P+W,ce=J+W;Y=new Path2D,Y.rect(Pe,De,xe,ce)}s?vs(T,W,r.dash,r.cap,L,o,f,b,h):mr(t,T,W,r.dash,r.cap,L,o,f,b,Y,h),ve&&g.translate(-j,-j)}function mr(t,s,r,o,f,h,b,T,L,W,Y){let j=!1;L!=0&&se.forEach((ve,Pe)=>{if(ve.series[0]==t){let De=S[ve.series[1]],xe=l[ve.series[1]],ce=(De._paths||kn).band;Al(ce)&&(ce=ve.dir==1?ce[0]:ce[1]);let le,qe=null;De.show&&ce&&Do(xe,bt,St)?(qe=ve.fill(n,Pe)||h,le=De._paths.clip):ce=null,vs(s,r,o,f,qe,b,T,L,W,Y,le,ce),j=!0}}),j||vs(s,r,o,f,h,b,T,L,W,Y)}const hi=sn|Hs;function vs(t,s,r,o,f,h,b,T,L,W,Y,j){ui(t,s,r,o,f),(L||W||j)&&(g.save(),L&&g.clip(L),W&&g.clip(W)),j?(T&hi)==hi?(g.clip(j),Y&&g.clip(Y),Pn(f,b),Cn(t,h,s)):T&Hs?(Pn(f,b),g.clip(j),Cn(t,h,s)):T&sn&&(g.save(),g.clip(j),Y&&g.clip(Y),Pn(f,b),g.restore(),Cn(t,h,s)):(Pn(f,b),Cn(t,h,s)),(L||W||j)&&g.restore()}function Cn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Ln=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Pn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Hl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function wr(t,s,r,o){let f=B[t],h;if(o<=0)h=[0,0];else{let b=f._space=f.space(n,t,s,r,o),T=f._incrs=f.incrs(n,t,s,r,o,b);h=Zc(s,r,T,o,b)}return f._found=h}function ps(t,s,r,o,f,h,b,T,L,W){let Y=b%2/2;R==1&&g.translate(Y,Y),ui(T,b,L,W,T),g.beginPath();let j,ve,Pe,De,xe=f+(o==0||o==3?-h:h);r==0?(ve=f,De=xe):(j=f,Pe=xe);for(let ce=0;ce<t.length;ce++)s[ce]!=null&&(r==0?j=Pe=t[ce]:ve=De=t[ce],g.moveTo(j,ve),g.lineTo(Pe,De));g.stroke(),R==1&&g.translate(-Y,-Y)}function _r(t){let s=!0;return B.forEach((r,o)=>{if(!r.show)return;let f=A[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Bl(!1));return}else r._show||(s=!1,r._show=!0,Bl(!1));let h=r.side,b=h%2,{min:T,max:L}=f,[W,Y]=wr(o,T,L,b==0?ie:N);if(Y==0)return;let j=f.distr==2,ve=r._splits=r.splits(n,o,T,L,W,Y,j),Pe=f.distr==2?ve.map(le=>sl[le]):ve,De=f.distr==2?sl[ve[1]]-sl[ve[0]]:W,xe=r._values=r.values(n,r.filter(n,Pe,o,Y,De),o,Y,De);r._rotate=h==2?r.rotate(n,xe,o,Y):0;let ce=r._size;r._size=$t(r.size(n,xe,o,t)),ce!=null&&r._size!=ce&&(s=!1)}),s}function xr(t){let s=!0;return An.forEach((r,o)=>{let f=r(n,o,nl,t);f!=fl[o]&&(s=!1),fl[o]=f}),s}function br(){for(let t=0;t<B.length;t++){let s=B[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,b=s.stroke(n,t),T=r==0||r==3?-1:1,[L,W]=s._found;if(s.label!=null){let Ot=s.labelGap*T,Ut=pt((s._lpos+Ot)*Re);fi(s.labelFont[0],b,"center",r==2?mn:Ni),g.save(),o==1?(f=h=0,g.translate(Ut,pt(k+J/2)),g.rotate((r==3?-In:In)/2)):(f=pt(_+P/2),h=Ut);let Fl=Pa(s.label)?s.label(n,t,L,W):s.label;g.fillText(Fl,f,h),g.restore()}if(W==0)continue;let Y=A[s.scale],j=o==0?P:J,ve=o==0?_:k,Pe=s._splits,De=Y.distr==2?Pe.map(Ot=>sl[Ot]):Pe,xe=Y.distr==2?sl[Pe[1]]-sl[Pe[0]]:L,ce=s.ticks,le=s.border,qe=ce.show?ce.size:0,et=pt(qe*Re),Et=pt((s.alignTo==2?s._size-qe-s.gap:s.gap)*Re),ze=s._rotate*-In/180,tt=z(s._pos*Re),Bt=(et+Et)*T,Ft=tt+Bt;h=o==0?Ft:0,f=o==1?Ft:0;let Zt=s.font[0],il=s.align==1?Ql:s.align==2?Es:ze>0?Ql:ze<0?Es:o==0?"center":r==3?Es:Ql,pl=ze||o==1?"middle":r==2?mn:Ni;fi(Zt,b,il,pl);let Wt=s.font[1]*s.lineGap,Qt=Pe.map(Ot=>z(d(Ot,Y,j,ve))),al=s._values;for(let Ot=0;Ot<al.length;Ot++){let Ut=al[Ot];if(Ut!=null){o==0?f=Qt[Ot]:h=Qt[Ot],Ut=""+Ut;let Fl=Ut.indexOf(`
`)==-1?[Ut]:Ut.split(/\n/gm);for(let Gt=0;Gt<Fl.length;Gt++){let Fi=Fl[Gt];ze?(g.save(),g.translate(f,h+Gt*Wt),g.rotate(ze),g.fillText(Fi,0,0),g.restore()):g.fillText(Fi,f,h+Gt*Wt)}}}ce.show&&ps(Qt,ce.filter(n,De,t,W,xe),o,r,tt,et,Ie(ce.width*Re,3),ce.stroke(n,t),ce.dash,ce.cap);let hl=s.grid;hl.show&&ps(Qt,hl.filter(n,De,t,W,xe),o,o==0?2:1,o==0?k:_,o==0?J:P,Ie(hl.width*Re,3),hl.stroke(n,t),hl.dash,hl.cap),le.show&&ps([tt],[1],o==0?1:0,o==0?1:2,o==1?k:_,o==1?J:P,Ie(le.width*Re,3),le.stroke(n,t),le.dash,le.cap)}Tt("drawAxes")}function Bl(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Rn=!1,hs=!1,fn=[];function Sr(){hs=!1;for(let t=0;t<fn.length;t++)Tt(...fn[t]);fn.length=0}function Wl(){Rn||(Wo(gi),Rn=!0)}function yr(t,s=!1){Rn=!0,hs=s,t(n),gi(),s&&fn.length>0&&queueMicrotask(Sr)}n.batch=yr;function gi(){if(ae&&(pr(),ae=!1),Q&&(Jt(),Q=!1),pe){if(je(G,Ql,Ee),je(G,mn,Be),je(G,xn,ie),je(G,bn,N),je(M,Ql,Ee),je(M,mn,Be),je(M,xn,ie),je(M,bn,N),je(m,xn,xt),je(m,bn,Rt),y.width=pt(xt*Re),y.height=pt(Rt*Re),B.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,b=f%2==1;je(t,b?"left":"top",o-h),je(t,b?"width":"height",r),je(t,b?"top":"left",b?Be:Ee),je(t,b?"height":"width",b?N:ie),Gs(t,zl)}else Yt(t,zl)}),Ln=Hl=is=rs=os=cs=us=fs=as=null,Vt=1,pn(!0),Ee!=Nt||Be!=It||ie!=Dt||N!=Z){Bl(!1);let t=ie/Dt,s=N/Z;if(Ne&&!$&&q.left>=0){q.left*=t,q.top*=s,Ul&&gl(Ul,pt(q.left),0,ie,N),Yl&&gl(Yl,0,pt(q.top),ie,N);for(let r=0;r<Ae.length;r++){let o=Ae[r];o!=null&&(ot[r]*=t,Ht[r]*=s,gl(o,$t(ot[r]),$t(Ht[r]),ie,N))}}if(Ye.show&&!Fe&&Ye.left>=0&&Ye.width>0){Ye.left*=t,Ye.width*=t,Ye.top*=s,Ye.height*=s;for(let r in bs)je(Kl,r,Ye[r])}Nt=Ee,It=Be,Dt=ie,Z=N}Tt("setSize"),pe=!1}xt>0&&Rt>0&&(g.clearRect(0,0,y.width,y.height),Tt("drawClear"),X.forEach(t=>t()),Tt("draw")),Ye.show&&Fe&&(Fn(Ye),Fe=!1),Ne&&$&&(Rl(null,!0,!1),$=!1),oe.show&&oe.live&&ge&&(_s(),ge=!1),v||(v=!0,n.status=1,Tt("ready")),un=!1,Rn=!1}n.redraw=(t,s)=>{Q=s||!1,t!==!1?Tl(O,x.min,x.max):Wl()};function gs(t,s){let r=A[t];if(r.from==null){if(Lt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Lt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==O&&r.distr==2&&Lt>0&&(s.min=ol(s.min,l[0]),s.max=ol(s.max,l[0]),s.min==s.max&&s.max++),F[t]=s,ae=!0,Wl()}}n.setScale=gs;let ms,ws,Ul,Yl,mi,wi,ql,jl,_i,xi,Ue,Je,kl=!1;const Ct=q.drag;let yt=Ct.x,kt=Ct.y;Ne&&(q.x&&(ms=Xt(vo,M)),q.y&&(ws=Xt(po,M)),x.ori==0?(Ul=ms,Yl=ws):(Ul=ws,Yl=ms),Ue=q.left,Je=q.top);const Ye=n.select=ut({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Kl=Ye.show?Xt(fo,Ye.over?M:G):null;function Fn(t,s){if(Ye.show){for(let r in t)Ye[r]=t[r],r in bs&&je(Kl,r,t[r]);s!==!1&&Tt("setSelect")}}n.setSelect=Fn;function kr(t){if(S[t].show)ke&&Gs(Te[t],zl);else if(ke&&Yt(Te[t],zl),Ne){let r=vt?Ae[0]:Ae[t];r!=null&&gl(r,-10,-10,ie,N)}}function Tl(t,s,r){gs(t,{min:s,max:r})}function dl(t,s,r,o){s.focus!=null&&Dr(t),s.show!=null&&S.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,kr(h),a==2?(Tl(f.facets[0].scale,null,null),Tl(f.facets[1].scale,null,null)):Tl(f.scale,null,null),Wl())}),r!==!1&&Tt("setSeries",t,s),o&&hn("setSeries",n,t,s)}n.setSeries=dl;function Tr(t,s){ut(se[t],s)}function Er(t,s){t.fill=Se(t.fill||null),t.dir=Ce(t.dir,-1),s=s??se.length,se.splice(s,0,t)}function Mr(t){t==null?se.length=0:se.splice(t,1)}n.addBand=Er,n.setBand=Tr,n.delBand=Mr;function Ar(t,s){S[t].alpha=s,Ne&&Ae[t]!=null&&(Ae[t].style.opacity=s),ke&&Te[t]&&(Te[t].style.opacity=s)}let wl,El,Pl;const Jl={focus:!0};function Dr(t){if(t!=Pl){let s=t==null,r=st.alpha!=1;S.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Ar(f,h?1:st.alpha)}}),Pl=t,r&&Wl()}}ke&&ll&&He(Bi,ue,t=>{q._lock||(rt(t),Pl!=null&&dl(null,Jl,!0,ct.setSeries))});function vl(t,s,r){let o=A[s];r&&(t=t/Re-(o.ori==1?Be:Ee));let f=ie;o.ori==1&&(f=N,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,b=o._max,T=t/f,L=h+(b-h)*T,W=o.distr;return W==3?tn(10,L):W==4?Co(L,o.asinh):W==100?o.bwd(L):L}function Lr(t,s){let r=vl(t,O,s);return ol(r,l[0],bt,St)}n.valToIdx=t=>ol(t,l[0]),n.posToIdx=Lr,n.posToVal=vl,n.valToPos=(t,s,r)=>A[s].ori==0?u(t,A[s],r?P:ie,r?_:0):c(t,A[s],r?J:N,r?k:0),n.setCursor=(t,s,r)=>{Ue=t.left,Je=t.top,Rl(null,s,r)};function bi(t,s){je(Kl,Ql,Ye.left=t),je(Kl,xn,Ye.width=s)}function Si(t,s){je(Kl,mn,Ye.top=t),je(Kl,bn,Ye.height=s)}let dn=x.ori==0?bi:Si,vn=x.ori==1?bi:Si;function Cr(){if(ke&&oe.live)for(let t=a==2?1:0;t<S.length;t++){if(t==0&&We)continue;let s=oe.values[t],r=0;for(let o in s)Xe[t][r++].firstChild.nodeValue=s[o]}}function _s(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{me[o]=r}):Oo(t.idx)||me.fill(t.idx),oe.idx=me[0]),ke&&oe.live){for(let r=0;r<S.length;r++)(r>0||a==1&&!We)&&Pr(r,me[r]);Cr()}ge=!1,s!==!1&&Tt("setLegend")}n.setLegend=_s;function Pr(t,s){let r=S[t],o=t==0&&I==2?sl:l[t],f;We?f=r.values(n,t,s)??Ze:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?Ze:{_:f}),oe.values[t]=f}function Rl(t,s,r){_i=Ue,xi=Je,[Ue,Je]=q.move(n,Ue,Je),q.left=Ue,q.top=Je,Ne&&(Ul&&gl(Ul,pt(Ue),0,ie,N),Yl&&gl(Yl,0,pt(Je),ie,N));let o,f=bt>St;wl=Ve,El=null;let h=x.ori==0?ie:N,b=x.ori==1?ie:N;if(Ue<0||Lt==0||f){o=q.idx=null;for(let T=0;T<S.length;T++){let L=Ae[T];L!=null&&gl(L,-10,-10,ie,N)}ll&&dl(null,Jl,!0,t==null&&ct.setSeries),oe.live&&(me.fill(o),ge=!0)}else{let T,L,W;a==1&&(T=x.ori==0?Ue:Je,L=vl(T,O),o=q.idx=ol(L,l[0],bt,St),W=C(l[0][o],x,h,0));let Y=-10,j=-10,ve=0,Pe=0,De=!0,xe="",ce="";for(let le=a==2?1:0;le<S.length;le++){let qe=S[le],et=me[le],Et=et==null?null:a==1?l[le][et]:l[le][1][et],ze=q.dataIdx(n,le,o,L),tt=ze==null?null:a==1?l[le][ze]:l[le][1][ze];if(ge=ge||tt!=Et||ze!=et,me[le]=ze,le>0&&qe.show){let Bt=ze==null?-10:ze==o?W:C(a==1?l[0][ze]:l[le][0][ze],x,h,0),Ft=tt==null?-10:K(tt,a==1?A[qe.scale]:A[qe.facets[1].scale],b,0);if(ll&&tt!=null){let Zt=x.ori==1?Ue:Je,il=ht(st.dist(n,le,ze,Ft,Zt));if(il<wl){let pl=st.bias;if(pl!=0){let Wt=vl(Zt,qe.scale),Qt=tt>=0?1:-1,al=Wt>=0?1:-1;al==Qt&&(al==1?pl==1?tt>=Wt:tt<=Wt:pl==1?tt<=Wt:tt>=Wt)&&(wl=il,El=le)}else wl=il,El=le}}if(ge||vt){let Zt,il;x.ori==0?(Zt=Bt,il=Ft):(Zt=Ft,il=Bt);let pl,Wt,Qt,al,hl,Ot,Ut=!0,Fl=he.bbox;if(Fl!=null){Ut=!1;let Gt=Fl(n,le);Qt=Gt.left,al=Gt.top,pl=Gt.width,Wt=Gt.height}else Qt=Zt,al=il,pl=Wt=he.size(n,le);if(Ot=he.fill(n,le),hl=he.stroke(n,le),vt)le==El&&wl<=st.prox&&(Y=Qt,j=al,ve=pl,Pe=Wt,De=Ut,xe=Ot,ce=hl);else{let Gt=Ae[le];Gt!=null&&(ot[le]=Qt,Ht[le]=al,Ji(Gt,pl,Wt,Ut),ji(Gt,Ot,hl),gl(Gt,$t(Qt),$t(al),ie,N))}}}}if(vt){let le=st.prox,qe=Pl==null?wl<=le:wl>le||El!=Pl;if(ge||qe){let et=Ae[0];et!=null&&(ot[0]=Y,Ht[0]=j,Ji(et,ve,Pe,De),ji(et,xe,ce),gl(et,$t(Y),$t(j),ie,N))}}}if(Ye.show&&kl)if(t!=null){let[T,L]=ct.scales,[W,Y]=ct.match,[j,ve]=t.cursor.sync.scales,Pe=t.cursor.drag;if(yt=Pe._x,kt=Pe._y,yt||kt){let{left:De,top:xe,width:ce,height:le}=t.select,qe=t.scales[j].ori,et=t.posToVal,Et,ze,tt,Bt,Ft,Zt=T!=null&&W(T,j),il=L!=null&&Y(L,ve);Zt&&yt?(qe==0?(Et=De,ze=ce):(Et=xe,ze=le),tt=A[T],Bt=C(et(Et,j),tt,h,0),Ft=C(et(Et+ze,j),tt,h,0),dn(cl(Bt,Ft),ht(Ft-Bt))):dn(0,h),il&&kt?(qe==1?(Et=De,ze=ce):(Et=xe,ze=le),tt=A[L],Bt=K(et(Et,ve),tt,b,0),Ft=K(et(Et+ze,ve),tt,b,0),vn(cl(Bt,Ft),ht(Ft-Bt))):vn(0,b)}else Ss()}else{let T=ht(_i-mi),L=ht(xi-wi);if(x.ori==1){let ve=T;T=L,L=ve}yt=Ct.x&&T>=Ct.dist,kt=Ct.y&&L>=Ct.dist;let W=Ct.uni;W!=null?yt&&kt&&(yt=T>=W,kt=L>=W,!yt&&!kt&&(L>T?kt=!0:yt=!0)):Ct.x&&Ct.y&&(yt||kt)&&(yt=kt=!0);let Y,j;yt&&(x.ori==0?(Y=ql,j=Ue):(Y=jl,j=Je),dn(cl(Y,j),ht(j-Y)),kt||vn(0,b)),kt&&(x.ori==1?(Y=ql,j=Ue):(Y=jl,j=Je),vn(cl(Y,j),ht(j-Y)),yt||dn(0,h)),!yt&&!kt&&(dn(0,0),vn(0,0))}if(Ct._x=yt,Ct._y=kt,t==null){if(r){if(Ri!=null){let[T,L]=ct.scales;ct.values[0]=T!=null?vl(x.ori==0?Ue:Je,T):null,ct.values[1]=L!=null?vl(x.ori==1?Ue:Je,L):null}hn(Ms,n,Ue,Je,ie,N,o)}if(ll){let T=r&&ct.setSeries,L=st.prox;Pl==null?wl<=L&&dl(El,Jl,!0,T):wl>L?dl(null,Jl,!0,T):El!=Pl&&dl(El,Jl,!0,T)}}ge&&(oe.idx=o,_s()),s!==!1&&Tt("setCursor")}let Ml=null;Object.defineProperty(n,"rect",{get(){return Ml==null&&pn(!1),Ml}});function pn(t=!1){t?Ml=null:(Ml=M.getBoundingClientRect(),Tt("syncRect",Ml))}function yi(t,s,r,o,f,h,b){q._lock||kl&&t!=null&&t.movementX==0&&t.movementY==0||(xs(t,s,r,o,f,h,b,!1,t!=null),t!=null?Rl(null,!0,!0):Rl(s,!0,!1))}function xs(t,s,r,o,f,h,b,T,L){if(Ml==null&&pn(!1),rt(t),t!=null)r=t.clientX-Ml.left,o=t.clientY-Ml.top;else{if(r<0||o<0){Ue=-10,Je=-10;return}let[W,Y]=ct.scales,j=s.cursor.sync,[ve,Pe]=j.values,[De,xe]=j.scales,[ce,le]=ct.match,qe=s.axes[0].side%2==1,et=x.ori==0?ie:N,Et=x.ori==1?ie:N,ze=qe?h:f,tt=qe?f:h,Bt=qe?o:r,Ft=qe?r:o;if(De!=null?r=ce(W,De)?d(ve,A[W],et,0):-10:r=et*(Bt/ze),xe!=null?o=le(Y,xe)?d(Pe,A[Y],Et,0):-10:o=Et*(Ft/tt),x.ori==1){let Zt=r;r=o,o=Zt}}L&&(s==null||s.cursor.event.type==Ms)&&((r<=1||r>=ie-1)&&(r=Ol(r,ie)),(o<=1||o>=N-1)&&(o=Ol(o,N))),T?(mi=r,wi=o,[ql,jl]=q.move(n,r,o)):(Ue=r,Je=o)}const bs={width:0,height:0,left:0,top:0};function Ss(){Fn(bs,!1)}let ki,Ti,Ei,Mi;function Ai(t,s,r,o,f,h,b){kl=!0,yt=kt=Ct._x=Ct._y=!1,xs(t,s,r,o,f,h,b,!0,!1),t!=null&&(He(As,Fs,Di,!1),hn(Ii,n,ql,jl,ie,N,null));let{left:T,top:L,width:W,height:Y}=Ye;ki=T,Ti=L,Ei=W,Mi=Y}function Di(t,s,r,o,f,h,b){kl=Ct._x=Ct._y=!1,xs(t,s,r,o,f,h,b,!1,!0);let{left:T,top:L,width:W,height:Y}=Ye,j=W>0||Y>0,ve=ki!=T||Ti!=L||Ei!=W||Mi!=Y;if(j&&ve&&Fn(Ye),Ct.setScale&&j&&ve){let Pe=T,De=W,xe=L,ce=Y;if(x.ori==1&&(Pe=L,De=Y,xe=T,ce=W),yt&&Tl(O,vl(Pe,O),vl(Pe+De,O)),kt)for(let le in A){let qe=A[le];le!=O&&qe.from==null&&qe.min!=Ve&&Tl(le,vl(xe+ce,le),vl(xe,le))}Ss()}else q.lock&&(q._lock=!q._lock,Rl(s,!0,t!=null));t!=null&&(dt(As,Fs),hn(As,n,Ue,Je,ie,N,null))}function Rr(t,s,r,o,f,h,b){if(q._lock)return;rt(t);let T=kl;if(kl){let L=!0,W=!0,Y=10,j,ve;x.ori==0?(j=yt,ve=kt):(j=kt,ve=yt),j&&ve&&(L=Ue<=Y||Ue>=ie-Y,W=Je<=Y||Je>=N-Y),j&&L&&(Ue=Ue<ql?0:ie),ve&&W&&(Je=Je<jl?0:N),Rl(null,!0,!0),kl=!1}Ue=-10,Je=-10,me.fill(null),Rl(null,!0,!0),T&&(kl=T)}function Li(t,s,r,o,f,h,b){q._lock||(rt(t),ss(),Ss(),t!=null&&hn(Wi,n,Ue,Je,ie,N,null))}function Ci(){B.forEach(Qc),$e(n.width,n.height,!0)}Nl(Wn,en,Ci);const Zl={};Zl.mousedown=Ai,Zl.mousemove=yi,Zl.mouseup=Di,Zl.dblclick=Li,Zl.setSeries=(t,s,r,o)=>{let f=ct.match[2];r=f(n,s,r),r!=-1&&dl(r,o,!0,!1)},Ne&&(He(Ii,M,Ai),He(Ms,M,yi),He(Hi,M,t=>{rt(t),pn(!1)}),He(Bi,M,Rr),He(Wi,M,Li),Bs.add(n),n.syncRect=pn);const On=n.hooks=e.hooks||{};function Tt(t,s,r){hs?fn.push([t,s,r]):t in On&&On[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)On[s]=(On[s]||[]).concat(t.hooks[s])});const Pi=(t,s,r)=>r,ct=ut({key:null,setSeries:!1,filters:{pub:ea,sub:ea},scales:[O,S[1]?S[1].scale:null],match:[ta,ta,Pi],values:[null,null]},q.sync);ct.match.length==2&&ct.match.push(Pi),q.sync=ct;const Ri=ct.key,ys=lr(Ri);function hn(t,s,r,o,f,h,b){ct.filters.pub(t,s,r,o,f,h,b)&&ys.pub(t,s,r,o,f,h,b)}ys.sub(n);function Fr(t,s,r,o,f,h,b){ct.filters.sub(t,s,r,o,f,h,b)&&Zl[t](null,s,r,o,f,h,b)}n.pub=Fr;function Or(){ys.unsub(n),Bs.delete(n),_t.clear(),zs(Wn,en,Ci),p.remove(),ue?.remove(),Tt("destroy")}n.destroy=Or;function ks(){Tt("init",e,l),ci(l||e.data,!1),F[O]?gs(O,F[O]):ss(),Fe=Ye.show&&(Ye.width>0||Ye.height>0),$=ge=!0,$e(e.width,e.height)}return S.forEach(yl),B.forEach(ns),i?i instanceof HTMLElement?(i.appendChild(p),ks()):i(n,ks):ks(),n}mt.assign=ut;mt.fmtNum=ei;mt.rangeNum=Un;mt.rangeLog=Zn;mt.rangeAsinh=Xs;mt.orient=Il;mt.pxRatio=Re;mt.join=Bo;mt.fmtDate=li,mt.tzDate=$o;mt.sync=lr;{mt.addGap=Oc,mt.clipGaps=$n;let e=mt.paths={points:or};e.linear=ur,e.stepped=Nc,e.bars=Vc,e.spline=Hc}var Xc=Ge('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),$c=Ge('<span class="estimated-badge svelte-3wi8ix">est</span>'),eu=Ge('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),tu=Ge('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),lu=Ge('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix"> </h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),nu=Ge('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function su(e,l){jn(l,!0);const i=.5,n=1.2,a=32,u=212;function c(x,I){const C=[...x].sort((V,Me)=>V-Me),K=I/100*(C.length-1),F=Math.floor(K),ne=Math.ceil(K);return F===ne?C[F]:C[F]+(C[ne]-C[F])*(K-F)}let d=Bn(l,"trend",3,null),v=lt(!1),p=lt(""),y=lt(null),g=At(()=>Vn.config.temp_units==="C"),m=At(Ta),G=At(js),M=At(()=>{if(l.readings.length===0)return null;const x=l.readings.filter(fe=>fe.status!=="invalid");if(x.length===0)return null;const I=[...x].sort((fe,it)=>new Date(fe.timestamp).getTime()-new Date(it.timestamp).getTime()),C=I[0],K=I[I.length-1],F=I.map(fe=>fe.sg_calibrated??fe.sg_raw).filter(fe=>fe!==null&&fe>=i&&fe<=n),ne=I.map(fe=>fe.temp_calibrated??fe.temp_raw).filter(fe=>fe!==null&&fe>=a&&fe<=u);if(F.length===0)return null;const V=F[F.length-1],Me=F[0],be=c(F,95),de=c(F,5),me=new Date(C.timestamp).getTime(),oe=new Date(K.timestamp).getTime(),ke=(oe-me)/(1e3*60*60*24),Ne=ke>0?(V-Me)/ke:0;let _e=null,ue=null,Qe=null,Ke=null;if(ne.length>0){const fe=ne[ne.length-1],it=ne.reduce((He,dt)=>He+dt,0)/ne.length,Pt=c(ne,95),_t=c(ne,5);_e=w(g)?_n(fe):fe,ue=w(g)?_n(it):it,Qe=w(g)?_n(Pt):Pt,Ke=w(g)?_n(_t):_t}let Te=0;const Xe=.001;for(let fe=F.length-2;fe>=0;fe--)if(Math.abs(F[fe]-V)>Xe){const it=new Date(I[fe+1].timestamp).getTime();Te=(oe-it)/(1e3*60*60*24);break}let nt=null,We=null;const Ze=l.originalGravity??be,ft=l.originalGravity===null;return Ze>1&&Ze>V&&(nt=(Ze-V)/(Ze-1)*100,We=(Ze-V)*131.25),{currentSg:V,firstSg:Me,highSg:be,lowSg:de,currentTemp:_e,avgTemp:ue,highTemp:Qe,lowTemp:Ke,fermRate:Ne,durationDays:ke,daysAtCurrentSg:Te,apparentAttenuation:nt,abv:We,ogIsEstimated:ft,effectiveOg:Ze}});function R(){ye(p,l.originalGravity?.toFixed(3)??"",!0),ye(v,!0),setTimeout(()=>w(y)?.focus(),0)}function z(){const x=w(p).trim();if(!x)l.onOgChange(null);else{const I=parseFloat(x);!isNaN(I)&&I>=.99&&I<=1.2&&l.onOgChange(I)}ye(v,!1)}function H(x){x.key==="Enter"?z():x.key==="Escape"&&ye(v,!1)}function S(x){return qs(x)}function B(x){return`${x>=0?"+":""}${x.toFixed(4)}`}function A(x){return x<1?`${(x*24).toFixed(1)}h`:`${x.toFixed(1)}d`}function se(x){return x===null?"--":x.toFixed(1)}function O(x){return x===null?"--":`${x.toFixed(1)}%`}var ee=ya(),X=Us(ee);{var re=x=>{var I=lu(),C=D(I),K=D(C),F=D(K),ne=D(F,!0);E(F);var V=U(F,2),Me=U(D(V),2),be=D(Me,!0);E(Me),E(V);var de=U(V,2),me=U(D(de),2),oe=D(me,!0);E(me),E(de);var q=U(de,2),ke=U(D(q),2),Ne=D(ke,!0);E(ke),E(q);var _e=U(q,2),ue=U(D(_e),2),Qe=D(ue,!0);E(ue),E(_e),E(K);var Ke=U(K,2),Te=U(D(Ke),2),Xe=U(D(Te),2),nt=D(Xe,!0),We=U(nt),Ze=D(We,!0);E(We),E(Xe),E(Te);var ft=U(Te,2),fe=U(D(ft),2),it=D(fe,!0),Pt=U(it),_t=D(Pt,!0);E(Pt),E(fe),E(ft);var He=U(ft,2),dt=U(D(He),2),xt=D(dt,!0),Rt=U(xt),ie=D(Rt,!0);E(Rt),E(dt),E(He);var N=U(He,2),Ee=U(D(N),2),Be=D(Ee,!0),Nt=U(Be),It=D(Nt,!0);E(Nt),E(Ee),E(N),E(Ke),E(C);var Dt=U(C,2),Z=D(Dt),_=U(D(Z),2);let k;var P=D(_);E(_),E(Z);var J=U(Z,2),ae=U(D(J),2),pe=D(ae,!0);E(ae),E(J);var Q=U(J,2),$=U(D(Q),2),Fe=D($,!0);E($),E(Q);var ge=U(Q,2),$e=U(D(ge),2);{var at=vt=>{var Ae=Xc();Ea(Ae),Ae.__keydown=H,Ks(Ae,ot=>ye(y,ot),()=>w(y)),ka("blur",Ae,z),Ma(Ae,()=>w(p),ot=>ye(p,ot)),Le(vt,Ae)},Kt=vt=>{var Ae=eu();Ae.__click=R;var ot=D(Ae);let Ht;var Sl=D(ot,!0);E(ot);var yl=U(ot,2);{var cn=ml=>{var nl=$c();Le(ml,nl)};gt(yl,ml=>{w(M).ogIsEstimated&&ml(cn)})}Dl(2),E(Ae),Mt(ml=>{En(Ae,"title",w(M).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),Ht=_l(ot,1,"stat-value svelte-3wi8ix",null,Ht,{estimated:w(M).ogIsEstimated}),we(Sl,ml)},[()=>S(w(M).effectiveOg)]),Le(vt,Ae)};gt($e,vt=>{w(v)?vt(at):vt(Kt,!1)})}E(ge);var Jt=U(ge,2),el=U(D(Jt),2),ul=D(el,!0);E(el),E(Jt);var tl=U(Jt,2),rt=U(D(tl),2),he=D(rt,!0);E(rt),E(tl);var st=U(tl,2);{var ll=vt=>{var Ae=tu(),ot=U(D(Ae),2),Ht=D(ot,!0);E(ot),Dl(2),E(Ae),Mt((Sl,yl)=>{En(Ae,"title",`Estimated time until target FG (R=${Sl??""})`),we(Ht,yl)},[()=>d().r2.toFixed(2),()=>A(d().daysToFg)]),Le(vt,Ae)};gt(st,vt=>{d()?.daysToFg!==null&&d()?.daysToFg!==void 0&&vt(ll)})}E(Dt),E(I),Mt((vt,Ae,ot,Ht,Sl,yl,cn,ml,nl,ns,Cl,An,fl)=>{we(ne,w(G)==="SG"?"Gravity":w(G)==="P"?"Plato":"Brix"),we(be,vt),we(oe,Ae),we(Ne,ot),we(Qe,Ht),we(nt,Sl),we(Ze,w(m)),we(it,yl),we(_t,w(m)),we(xt,cn),we(ie,w(m)),we(Be,ml),we(It,w(m)),k=_l(_,1,"stat-value rate svelte-3wi8ix",null,k,{fermenting:w(M).fermRate<0}),we(P,`${nl??""}/day`),we(pe,ns),we(Fe,Cl),we(ul,An),we(he,fl)},[()=>S(w(M).currentSg),()=>S(w(M).firstSg),()=>S(w(M).highSg),()=>S(w(M).lowSg),()=>se(w(M).currentTemp),()=>se(w(M).avgTemp),()=>se(w(M).highTemp),()=>se(w(M).lowTemp),()=>B(w(M).fermRate),()=>A(w(M).durationDays),()=>A(w(M).daysAtCurrentSg),()=>O(w(M).apparentAttenuation),()=>O(w(M).abv)]),Le(x,I)},te=x=>{var I=nu();Le(x,I)};gt(X,x=>{w(M)?x(re):x(te,!1)})}Le(e,ee),Kn()}qn(["keydown","click"]);var iu=Ge('<button type="button"> </button>'),au=Ge("<option> </option>"),ru=Ge('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ou=Ge('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),cu=Ge('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uu=Ge('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-1e832qd"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function fu(e,l){jn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=At(()=>Vn.config.smoothing_enabled),u=At(()=>Vn.config.smoothing_samples),c=lt("UTC"),d=lt(0),v=lt(3),p=Bn(l,"originalGravity",3,null),y=At(()=>Vn.config.temp_units==="C"),g=At(js),m,G=null,M=lt(!0),R=lt(null),z=lt(24),H=lt(Oi([])),S=lt(Oi([])),B=lt(null);const A={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},se="#facc15",O="rgba(250, 204, 21, 0.3)",ee="#71717a",X="#a1a1aa",re="rgba(255, 255, 255, 0.04)",te="#22d3ee",x="rgba(250, 204, 21, 0.5)",I="brewsignal_chart_trend_enabled";let C=lt(!0);function K(_,k,P=1.01){const J=[];for(let he=0;he<_.length;he++)k[he]!==null&&J.push([_[he],k[he]]);if(J.length<10)return null;const ae=J.length;let pe=0,Q=0,$=0,Fe=0;for(const[he,st]of J)pe+=he,Q+=st,$+=he*st,Fe+=he*he;const ge=ae*Fe-pe*pe;if(Math.abs(ge)<1e-10)return null;const $e=(ae*$-pe*Q)/ge,at=(Q-$e*pe)/ae,Kt=Q/ae;let Jt=0,el=0;for(const[he,st]of J){const ll=$e*he+at;Jt+=(st-ll)**2,el+=(st-Kt)**2}const ul=el>0?1-Jt/el:0;let tl=null,rt=null;if($e<0&&ul>.3){const he=_[_.length-1],st=(P-at)/$e;st>he&&(rt=(st-he)/(1440*60),rt>0&&rt<60?tl=P:rt=null)}return{slope:$e,intercept:at,r2:ul,predictedFg:tl,daysToFg:rt}}function F(_,k){return _.map(P=>k.slope*P+k.intercept)}function ne(_,k,P){const J=new Date(_*1e3);try{return P?J.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:k}):J.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:k})}catch(ae){return console.warn("Invalid timezone:",k,ae),P?J.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):J.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function V(_,k,P){const J=se,ae=A[l.tiltColor]||X;return{width:_,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(pe,Q,$)=>{const Fe=($-Q)*.1||.005;return[Q-Fe,$+Fe]}},temp:{auto:!0,range:(pe,Q,$)=>{const Fe=$-Q,ge=10;if(Fe<ge){const at=($+Q)/2;return[at-ge/2,at+ge/2]}const $e=Fe*.1;return[Q-$e,$+$e]}}},axes:[{stroke:ee,grid:{stroke:re,width:1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(pe,Q)=>Q.map($=>ne($,P,w(z)<=24))},{scale:"sg",stroke:J,grid:{stroke:re,width:1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(pe,Q)=>Q.map($=>qs($)),side:3},{scale:"temp",stroke:ae,grid:{show:!1},ticks:{stroke:re,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(pe,Q)=>Q.map($=>$.toFixed(0)+""),side:1}],series:[{},{label:w(g)==="SG"?"Gravity":w(g)==="P"?"Plato":"Brix",scale:"sg",stroke:J,width:2,fill:(pe,Q)=>{const $=pe.ctx.createLinearGradient(0,pe.bbox.top,0,pe.bbox.top+pe.bbox.height);return $.addColorStop(0,O),$.addColorStop(1,"transparent"),$},points:{show:!1},paths:mt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:ae,width:1.5,dash:[4,4],points:{show:!1},paths:mt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:te,width:1.5,dash:[2,4],points:{show:!1},paths:mt.paths.spline?.()},{label:"Trend",scale:"sg",stroke:x,width:2,dash:[8,4],points:{show:!1},show:w(C)}]}}function Me(_,k){if(k<=1)return _;const P=[];for(let J=0;J<_.length;J++){const ae=[],pe=Math.floor(k/2);for(let Q=Math.max(0,J-pe);Q<=Math.min(_.length-1,J+pe);Q++){const $=_[Q];$!==null&&ae.push($)}ae.length>0?P.push(ae.reduce((Q,$)=>Q+$,0)/ae.length):P.push(null)}return P}function be(_,k,P,J,ae){if(_.length<=ae)return[_,k,P,J];const pe=Math.ceil(_.length/ae),Q=[],$=[],Fe=[],ge=[];for(let $e=0;$e<_.length;$e+=pe){const at=Math.min($e+pe,_.length);let Kt=0,Jt=0,el=0,ul=0,tl=0,rt=0;for(let he=$e;he<at;he++)k[he]!==null&&(Kt+=k[he],Jt++),P[he]!==null&&(el+=P[he],ul++),J[he]!==null&&(tl+=J[he],rt++);Q.push(_[Math.floor(($e+at-1)/2)]),$.push(Jt>0?Kt/Jt:null),Fe.push(ul>0?el/ul:null),ge.push(rt>0?tl/rt:null)}return[Q,$,Fe,ge]}function de(_){return!_.endsWith("Z")&&!_.match(/[+-]\d{2}:\d{2}$/)&&(_=_+"Z"),new Date(_).getTime()/1e3}function me(_,k,P){if(_.length===0||k.length===0)return k.map(()=>null);const J=[..._].sort((Q,$)=>de(Q.timestamp)-de($.timestamp)),ae=J.map(Q=>de(Q.timestamp)),pe=J.map(Q=>Q.temperature===null?null:P?Q.temperature:Q.temperature*9/5+32);return k.map(Q=>{let $=null,Fe=null;for(let ge=0;ge<ae.length;ge++)if(ae[ge]<=Q&&($={time:ae[ge],temp:pe[ge]}),ae[ge]>=Q&&Fe===null){Fe={time:ae[ge],temp:pe[ge]};break}if($&&Fe&&$.temp!==null&&Fe.temp!==null){if($.time===Fe.time)return $.temp;const ge=(Q-$.time)/(Fe.time-$.time);return $.temp+ge*(Fe.temp-$.temp)}return $!==null&&$.temp!==null?$.temp:Fe!==null&&Fe.temp!==null?Fe.temp:null})}function oe(_,k,P){const J=[..._].reverse();let ae=[],pe=[],Q=[];for(const at of J){ae.push(de(at.timestamp)),pe.push(at.sg_calibrated??at.sg_raw);const Kt=at.temp_calibrated??at.temp_raw;Kt!==null?Q.push(P?_n(Kt):Kt):Q.push(null)}let $=me(k,ae,P);w(a)&&w(u)>1&&(pe=Me(pe,w(u)),Q=Me(Q,w(u)),$=Me($,w(u))),[ae,pe,Q,$]=be(ae,pe,Q,$,500);const ge=K(ae,pe);ye(B,ge,!0);const $e=ge?F(ae,ge):ae.map(()=>null);return[ae,pe,Q,$,$e]}const q=3e4;async function ke(_=!1){const P=Date.now()-w(d);if(!(!_&&w(d)>0&&P<q)){ye(M,!0),ye(R,null);try{const[J,ae]=await Promise.all([Qr(l.tiltId,w(z)),Xr(w(z)).catch(()=>[])]);ye(H,J,!0),ye(S,ae,!0),Ne()}catch(J){ye(R,J instanceof Error?J.message:"Failed to load data",!0)}finally{ye(d,Date.now(),!0),ye(M,!1)}}}function Ne(){if(!m||w(H).length===0)return;const _=oe(w(H),w(S),w(y)),k=V(m.clientWidth,w(y),w(c));G&&G.destroy(),G=new mt(k,_,m)}function _e(){G&&m&&G.setSize({width:m.clientWidth,height:220})}let ue=null;function Qe(){if(ue&&(clearInterval(ue),ue=null),w(v)>0){const _=w(v)*60*1e3;ue=setInterval(()=>{w(M)||ke(!1)},_)}}Ys(async()=>{const _=localStorage.getItem(i);if(_!==null){const P=parseInt(_,10);Number.isNaN(P)||ye(v,P,!0)}const k=localStorage.getItem(I);k!==null&&ye(C,k==="true");try{const P=await fetch("/api/system/timezone");if(P.ok){const J=await P.json();ye(c,J.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ke(!0),window.addEventListener("resize",_e),Qe()}),Hr(()=>{G?.destroy(),window.removeEventListener("resize",_e),ue&&clearInterval(ue)}),Rs(()=>{w(y)!==void 0&&w(H).length>0&&m&&Ne()}),Rs(()=>{w(a),w(u),w(H).length>0&&m&&Ne()});function Ke(_){const k=Number(_.target.value);ye(v,k,!0),localStorage.setItem(i,String(k)),Qe(),ke(!0)}function Te(){ye(C,!w(C)),localStorage.setItem(I,String(w(C))),G&&G.setSeries(4,{show:w(C)})}var Xe=uu(),nt=D(Xe),We=D(nt);Tn(We,21,()=>Zr,Hn,(_,k)=>{var P=iu();let J;P.__click=()=>{w(z)!==w(k).hours&&(ye(z,w(k).hours,!0),ke(!0))};var ae=D(P,!0);E(P),Mt(()=>{J=_l(P,1,"range-btn svelte-1e832qd",null,J,{active:w(z)===w(k).hours}),we(ae,w(k).label)}),Le(_,P)}),E(We);var Ze=U(We,2),ft=D(Ze),fe=U(D(ft),2);fe.__change=Ke,Tn(fe,21,()=>n,Hn,(_,k)=>{var P=au(),J=D(P,!0);E(P);var ae={};Mt(()=>{we(J,w(k).label),ae!==(ae=w(k).value)&&(P.value=(P.__value=w(k).value)??"")}),Le(_,P)}),E(fe);var it;$r(fe),E(ft);var Pt=U(ft,2),_t=U(D(Pt),2),He=D(_t);Dl(2),E(_t);var dt=U(_t,4);let xt;dt.__click=Te;var Rt=D(dt);$l(Rt,"background: rgba(250, 204, 21, 0.5);"),Dl(2),E(dt),E(Pt),E(Ze),E(nt);var ie=U(nt,2),N=D(ie);{var Ee=_=>{var k=ru();Le(_,k)};gt(N,_=>{w(M)&&_(Ee)})}var Be=U(N,2);{var Nt=_=>{var k=ou(),P=U(D(k),2);P.__click=()=>ke(!0),E(k),Le(_,k)},It=_=>{var k=ya(),P=Us(k);{var J=ae=>{var pe=cu();Le(ae,pe)};gt(P,ae=>{w(H).length===0&&ae(J)},!0)}Le(_,k)};gt(Be,_=>{w(R)?_(Nt):_(It,!1)})}E(ie),Ks(ie,_=>m=_,()=>m);var Dt=U(ie,2);{var Z=_=>{{let k=At(()=>l.onOgChange??(()=>{})),P=At(()=>w(B)?{predictedFg:w(B).predictedFg,daysToFg:w(B).daysToFg,r2:w(B).r2}:null);su(_,{get readings(){return w(H)},get originalGravity(){return p()},get onOgChange(){return w(k)},get trend(){return w(P)}})}};gt(Dt,_=>{w(H).length>0&&_(Z)})}E(Xe),Mt(()=>{it!==(it=w(v))&&(fe.value=(fe.__value=w(v))??"",eo(fe,w(v))),$l(He,`background: ${(A[l.tiltColor]||"var(--text-secondary)")??""};`),xt=_l(dt,1,"legend-item legend-toggle svelte-1e832qd",null,xt,{"legend-disabled":!w(C)}),En(dt,"title",w(C)?"Hide trend line":"Show trend line")}),Le(e,Xe),Kn()}qn(["click","change"]);var du=Ge('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),vu=Ge('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate svelte-3twv7v"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" class="svelte-3twv7v"></path></svg></button>'),pu=Ge('<div class="w-1 rounded-sm transition-all svelte-3twv7v"></div>'),hu=Ge('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1 svelte-3twv7v"><span class="opacity-60 svelte-3twv7v">Raw:</span> <span class="ml-1 svelte-3twv7v"> </span> <span class="mx-1 opacity-40 svelte-3twv7v"></span> <span class="svelte-3twv7v"> </span></div>'),gu=Ge("<div><!></div>"),mu=Ge('<button type="button" class="batch-link svelte-3twv7v"><span class="batch-status-dot svelte-3twv7v"></span> <svg class="batch-link-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" class="svelte-3twv7v"></path></svg></button>'),wu=Ge('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" class="svelte-3twv7v"></path></svg></button>'),_u=Ge('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5 svelte-3twv7v"></div> <div class="p-5 svelte-3twv7v"><div class="flex justify-between items-start mb-5 svelte-3twv7v"><div class="flex-1 min-w-0 mr-3 svelte-3twv7v"><!> <div class="flex items-center gap-2 mt-1 svelte-3twv7v"><span class="w-2 h-2 rounded-full svelte-3twv7v"></span> <span class="text-sm text-[var(--text-muted)] font-medium svelte-3twv7v"> </span></div></div> <div class="flex flex-col items-end gap-1 svelte-3twv7v"><div class="flex items-end gap-0.5 svelte-3twv7v"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono svelte-3twv7v"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4 svelte-3twv7v"><div class="rounded-md p-4 text-center svelte-3twv7v" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> <span class="text-lg text-[var(--text-secondary)] svelte-3twv7v"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium svelte-3twv7v"> </p></div> <div class="rounded-md p-4 text-center svelte-3twv7v" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)] svelte-3twv7v"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium svelte-3twv7v">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)] svelte-3twv7v"><div class="flex items-center gap-3 svelte-3twv7v"><span class="text-[11px] text-[var(--text-muted)] svelte-3twv7v"> </span> <!></div> <div class="flex items-center gap-2 svelte-3twv7v"><!> <div class="w-1.5 h-1.5 rounded-full svelte-3twv7v" style="background: var(--positive);"></div></div></div></div></div>');function xu(e,l){jn(l,!0);let i=Bn(l,"expanded",3,!1),n=Bn(l,"wide",3,!1),a=lt(null);Ys(async()=>{try{const Z=l.tilt.color.toUpperCase();let _=await Gi(void 0,Z,1);_.length===0&&(_=await Gi(void 0,`tilt-${l.tilt.color.toLowerCase()}`,1)),_.length>0&&ye(a,_.find(k=>k.status==="fermenting"||k.status==="conditioning")||_[0],!0)}catch(Z){console.error("Failed to fetch linked batch:",Z)}});let u=lt(!1);Rs(()=>{i()&&!w(u)&&ye(u,!0)});let c=lt(!1),d=lt(""),v=lt(null),p=lt(!1);function y(){ye(d,l.tilt.beer_name,!0),ye(c,!0),setTimeout(()=>w(v)?.focus(),0)}async function g(){if(w(p))return;const Z=w(d).trim();if(!Z||Z===l.tilt.beer_name){ye(c,!1);return}ye(p,!0);const _=await jr(l.tilt.id,Z);ye(p,!1),_&&ye(c,!1)}function m(Z){Z.key==="Enter"?g():Z.key==="Escape"&&ye(c,!1)}async function G(Z){await Kr(l.tilt.id,Z)}let M=At(Ta),R=At(js);const z={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function H(Z){return qs(Z)}function S(Z){return Yr(Z)}function B(Z){return Z>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:Z>=-60?{bars:3,color:"var(--positive)",label:"Good"}:Z>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function A(Z){const _=Math.floor((Date.now()-new Date(Z).getTime())/1e3);if(_<10)return"just now";if(_<60)return`${_}s ago`;const k=Math.floor(_/60);if(k<60)return`${k}m ago`;const P=Math.floor(k/60);return P<24?`${P}h ago`:`${Math.floor(P/24)}d ago`}let se=At(()=>z[l.tilt.color]||"var(--tilt-black)"),O=At(()=>B(l.tilt.rssi)),ee=At(()=>A(l.tilt.last_seen));var X=_u();let re;var te=D(X),x=U(te,2),I=D(x),C=D(I),K=D(C);{var F=Z=>{var _=du();Ea(_),_.__keydown=m,Ks(_,k=>ye(v,k),()=>w(v)),Mt(()=>_.disabled=w(p)),ka("blur",_,g),Ma(_,()=>w(d),k=>ye(d,k)),Le(Z,_)},ne=Z=>{var _=vu();_.__click=y;var k=D(_),P=D(k,!0);E(k),Dl(2),E(_),Mt(()=>we(P,l.tilt.beer_name)),Le(Z,_)};gt(K,Z=>{w(c)?Z(F):Z(ne,!1)})}var V=U(K,2),Me=D(V),be=U(Me,2),de=D(be,!0);E(be),E(V),E(C);var me=U(C,2),oe=D(me);Tn(oe,20,()=>Array(4),Hn,(Z,_,k)=>{var P=pu();Mt(()=>$l(P,`
								height: ${8+k*4}px;
								background: ${(k<w(O).bars?w(O).color:"var(--bg-hover)")??""};
								opacity: ${k<w(O).bars?1:.4};
							`)),Le(Z,P)}),E(oe);var q=U(oe,2),ke=D(q);E(q),E(me),E(I);var Ne=U(I,2),_e=D(Ne),ue=D(_e),Qe=D(ue,!0),Ke=U(Qe),Te=D(Ke,!0);E(Ke),E(ue);var Xe=U(ue,2),nt=D(Xe,!0);E(Xe),E(_e);var We=U(_e,2),Ze=D(We),ft=D(Ze,!0),fe=U(ft),it=D(fe,!0);E(fe),E(Ze),Dl(2),E(We),E(Ne);var Pt=U(Ne,2);{var _t=Z=>{var _=hu(),k=U(D(_),2),P=D(k,!0);E(k);var J=U(k,4),ae=D(J);E(J),E(_),Mt((pe,Q)=>{we(P,pe),we(ae,`${Q??""}${w(M)??""}`)},[()=>H(l.tilt.sg_raw),()=>S(l.tilt.temp_raw)]),Le(Z,_)};gt(Pt,Z=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&Z(_t)})}var He=U(Pt,2);{var dt=Z=>{var _=gu();let k;var P=D(_);to(P,()=>l.tilt.id,J=>{fu(J,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:G})}),E(_),Mt(()=>k=_l(_,1,"chart-section svelte-3twv7v",null,k,{hidden:!i()})),Le(Z,_)};gt(He,Z=>{w(u)&&Z(dt)})}var xt=U(He,2),Rt=D(xt),ie=D(Rt),N=D(ie);E(ie);var Ee=U(ie,2);{var Be=Z=>{var _=mu();_.__click=()=>Jr(`/batches/${w(a).id}`);var k=D(_),P=U(k);Dl(),E(_),Mt(()=>{$l(k,`background: ${w(a).status==="fermenting"?"#f59e0b":w(a).status==="conditioning"?"#8b5cf6":"var(--text-muted)"}`),we(P,` Batch #${w(a).batch_number??""} `)}),Le(Z,_)};gt(Ee,Z=>{w(a)&&Z(Be)})}E(Rt);var Nt=U(Rt,2),It=D(Nt);{var Dt=Z=>{var _=wu();_.__click=function(...J){l.onToggleExpand?.apply(this,J)};var k=D(_);let P;E(_),Mt(()=>{En(_,"aria-label",i()?"Collapse chart":"Expand chart"),P=_l(k,0,"w-4 h-4 transition-transform svelte-3twv7v",null,P,{"rotate-180":i()})}),Le(Z,_)};gt(It,Z=>{l.onToggleExpand&&Z(Dt)})}Dl(2),E(Nt),E(xt),E(x),E(X),Mt((Z,_)=>{re=_l(X,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,re,{expanded:i(),wide:n()}),$l(te,`background: ${w(se)??""};`),$l(Me,`background: ${w(se)??""};`),we(de,l.tilt.color),En(me,"title",`${w(O).label??""} signal (${l.tilt.rssi??""} dBm)`),we(ke,`${l.tilt.rssi??""} dBm`),we(Qe,Z),we(Te,w(R)!=="SG"?w(R):""),we(nt,w(R)==="SG"?"Gravity":w(R)==="P"?"Plato":"Brix"),we(ft,_),we(it,w(M)),we(N,`Updated ${w(ee)??""}`)},[()=>H(l.tilt.sg),()=>S(l.tilt.temp)]),Le(e,X),Kn()}qn(["keydown","click"]);var bu=Ge('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),Su=Ge('<div class="alerts-list svelte-1uha8ag"></div>'),yu=Ge('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),ku=Ge('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),Tu=Ge('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Eu=Ge('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),Mu=Ge('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Au=Ge("<div></div>"),Du=Ge("<!> <!>",1);function Yu(e,l){jn(l,!0);let i=lt(!1),n=lt(!1);Ys(async()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),z=localStorage.getItem("brewsignal_alerts_dismissed_time");R==="true"&&z&&Date.now()-parseInt(z,10)<360*60*1e3&&ye(i,!0)});let a=At(()=>Array.from(Ts.tilts.values())),u=lt(null);function c(R){ye(u,w(u)===R?null:R,!0)}function d(){ye(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function v(){ye(n,!w(n))}var p=Du();qr("1uha8ag",R=>{Br(()=>{Wr.title="Dashboard | BrewSignal"})});var y=Us(p);{var g=R=>{var z=ku(),H=D(z),S=D(H),B=U(D(S),4),A=D(B,!0);E(B),E(S);var se=U(S,2);se.__click=d,E(H);var O=U(H,2);{var ee=te=>{var x=Su();Tn(x,21,()=>gn.alerts,Hn,(I,C)=>{var K=bu();let F;var ne=D(K),V=D(ne);E(ne);var Me=U(ne,2),be=D(Me,!0);E(Me),E(K),Mt(()=>{F=_l(K,1,"alert-item svelte-1uha8ag",null,F,{warning:w(C).level==="warning",critical:w(C).level==="critical"}),we(V,`${w(C).day??""}:`),we(be,w(C).message)}),Le(I,K)}),E(x),Le(te,x)};gt(O,te=>{w(n)||te(ee)})}var X=U(O,2);{var re=te=>{var x=yu();x.__click=v;var I=D(x,!0);E(x),Mt(()=>we(I,w(n)?`Show ${gn.alerts.length} alerts`:"Show less")),Le(te,x)};gt(X,te=>{gn.alerts.length>3&&te(re)})}E(z),Mt(()=>we(A,gn.alerts.length)),Le(R,z)};gt(y,R=>{gn.alerts.length>0&&!w(i)&&R(g)})}var m=U(y,2);{var G=R=>{var z=Mu(),H=U(D(z),4),S=D(H);{var B=ee=>{var X=Gr("Waiting for Tilt hydrometers to broadcast...");Le(ee,X)},A=ee=>{var X=Tu();Le(ee,X)};gt(S,ee=>{Ts.connected?ee(B):ee(A,!1)})}E(H);var se=U(H,2);{var O=ee=>{var X=Eu();Le(ee,X)};gt(se,ee=>{Ts.connected&&ee(O)})}E(z),Le(R,z)},M=R=>{var z=Au();let H;Tn(z,21,()=>w(a),S=>S.id,(S,B)=>{{let A=At(()=>w(u)===w(B).id),se=At(()=>w(a).length===1);xu(S,{get tilt(){return w(B)},get expanded(){return w(A)},get wide(){return w(se)},onToggleExpand:()=>c(w(B).id)})}}),E(z),Mt(()=>H=_l(z,1,"tilt-grid svelte-1uha8ag",null,H,{"single-tilt":w(a).length===1})),Le(R,z)};gt(m,R=>{w(a).length===0?R(G):R(M,!1)})}Le(e,p),Kn()}qn(["click"]);export{Yu as component};
