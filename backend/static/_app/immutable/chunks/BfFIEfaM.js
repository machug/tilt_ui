import{B as m,C as p,az as y,w as o,G as v,O as T,a3 as _,M as l,F as u,N as C,aA as w,aB as A,q as b,aC as F,aD as x,aE as E,p as N}from"./DtKnEsEX.js";function I(e,t){let s=null,r=o;var a;if(o){s=C;for(var n=v(document.head);n!==null&&(n.nodeType!==T||n.data!==e);)n=_(n);if(n===null)l(!1);else{var c=_(n);n.remove(),u(c)}}o||(a=document.head.appendChild(m()));try{p(()=>t(a),y)}finally{r&&(l(!0),u(s))}}const k=Symbol("is custom element"),M=Symbol("is html");function j(e){if(o){var t=!1,s=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;d(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var a=e.checked;d(e,"checked",null),e.checked=a}}};e.__on_r=s,b(s),F()}}function d(e,t,s,r){var a=S(e);o&&(a[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||a[t]!==(a[t]=s)&&(t==="loading"&&(e[x]=s),s==null?e.removeAttribute(t):typeof s!="string"&&O(e).includes(t)?e[t]=s:e.setAttribute(t,s))}function S(e){return e.__attributes??={[k]:e.nodeName.includes("-"),[M]:e.namespaceURI===w}}var g=new Map;function O(e){var t=e.getAttribute("is")||e.nodeName,s=g.get(t);if(s)return s;g.set(t,s=[]);for(var r,a=e,n=Element.prototype;n!==a;){r=E(a);for(var c in r)r[c].set&&s.push(c);a=A(a)}return s}const f={temp_units:"C",sg_units:"sg",local_logging_enabled:!0,local_interval_minutes:15,min_rssi:-100,smoothing_enabled:!1,smoothing_samples:5,id_by_mac:!1,ha_enabled:!1,ha_url:"",ha_token:"",ha_ambient_temp_entity_id:"",ha_ambient_humidity_entity_id:"",temp_control_enabled:!1,temp_target:68,temp_hysteresis:1,ha_heater_entity_id:"",ha_weather_entity_id:"",weather_alerts_enabled:!1,alert_temp_threshold:3},i=N({config:f,loaded:!1});async function B(){try{const e=await fetch("/api/config");if(e.ok){const t=await e.json();i.config={...f,...t}}}catch(e){console.error("Failed to load config:",e)}finally{i.loaded=!0}}async function U(e){try{const t=await fetch("/api/config",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok){const r=await t.json();return i.config={...f,...r},{success:!0}}const s=await t.json();return s.detail&&Array.isArray(s.detail)?{success:!1,error:s.detail.map(a=>a.msg).join(", ")}:{success:!1,error:"Failed to save settings"}}catch(t){return console.error("Failed to update config:",t),{success:!1,error:"Network error saving settings"}}}function L(e){return(e-32)*(5/9)}function H(e){return e*(9/5)+32}function P(e,t=i.config.temp_units){return t==="C"?L(e).toFixed(1):e.toFixed(1)}function q(){return i.config.temp_units==="C"?"째C":"째F"}function h(e){return-616.868+1111.14*e-630.272*e**2+135.997*e**3}function D(e){return h(e)}function R(e,t=i.config.sg_units){switch(t){case"plato":return h(e).toFixed(1);case"brix":return D(e).toFixed(1);default:return e.toFixed(3)}}function z(){switch(i.config.sg_units){case"plato":return"째P";case"brix":return"째Bx";default:return"SG"}}export{H as a,R as b,i as c,z as d,P as e,L as f,q as g,I as h,B as l,j as r,d as s,U as u};
