import{d as U,f as u,e as m,a as d,s as A}from"../chunks/DFbRLFGc.js";import{ah as $,ak as o,as as h,aj as q,e as K,al as c,am as O,c as n,ao as g,an as p,s as a,at as P,ar as T}from"../chunks/-s7GvDYA.js";import{i as b}from"../chunks/DiA6E_7b.js";import{h as W}from"../chunks/BsCIOrMO.js";import{s as Z}from"../chunks/DC-wEq0z.js";import{g as w}from"../chunks/C24knH0e.js";import{i as G}from"../chunks/D1y0tE_J.js";var H=u('<div class="spinner svelte-559ncu"></div> <p class="drop-text svelte-559ncu">Importing recipe...</p>',1),J=u('<div class="upload-icon svelte-559ncu">ðŸ“„</div> <p class="drop-text svelte-559ncu">Drop BeerXML file here</p> <p class="drop-subtext svelte-559ncu">or click to browse</p> <input type="file" accept=".xml" class="file-input svelte-559ncu"/>',1),N=u('<div class="error-box svelte-559ncu"><svg class="error-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="error-text svelte-559ncu"> </p></div>'),Q=u(`<div class="page-container svelte-559ncu"><div class="back-link svelte-559ncu"><a href="/recipes" class="back-btn svelte-559ncu"><svg class="back-icon svelte-559ncu" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg> Back to Recipes</a></div> <div class="import-container svelte-559ncu"><h1 class="page-title svelte-559ncu">Import Recipe</h1> <p class="page-description svelte-559ncu">Upload BeerXML files from Brewfather, BeerSmith, Brewer's Friend, or any brewing software</p> <div role="button" tabindex="0" aria-label="Upload BeerXML file by dropping or clicking"><!></div> <div class="file-info svelte-559ncu"><p class="info-text svelte-559ncu">Supported: .xml files (max 1MB)</p></div> <!></div></div>`);function ie(B,y){$(y,!0);const M=1e6;let l=g(!1),i=g(null),v=g(!1);async function _(e){if(a(i,null),!e.name.toLowerCase().endsWith(".xml")){a(i,"Please upload a .xml BeerXML file");return}if(e.size>M){a(i,"File must be smaller than 1MB");return}a(l,!0);try{const t=await G(e);t.length===1?w(`/recipes/${t[0].id}`):w("/recipes")}catch(t){a(i,t instanceof Error?t.message:"Failed to import recipe",!0)}finally{a(l,!1)}}function D(e){e.preventDefault(),a(v,!1);const t=e.dataTransfer?.files[0];t&&_(t)}function L(e){e.preventDefault(),a(v,!0)}function I(){a(v,!1)}function F(e){const s=e.target.files?.[0];s&&_(s)}function X(e){if(e.key==="Enter"||e.key===" "){e.preventDefault();const t=document.querySelector(".file-input");t&&t.click()}}var f=Q();W("559ncu",e=>{K(()=>{O.title="Import Recipe | BrewSignal"})});var k=o(c(f),2),r=o(c(k),4);let x;r.__keydown=X;var S=c(r);{var E=e=>{var t=H();P(2),d(e,t)},j=e=>{var t=J(),s=o(T(t),6);s.__change=F,h(()=>s.disabled=n(l)),d(e,t)};b(S,e=>{n(l)?e(E):e(j,!1)})}p(r);var z=o(r,4);{var C=e=>{var t=N(),s=o(c(t),2),R=c(s,!0);p(s),p(t),h(()=>A(R,n(i))),d(e,t)};b(z,e=>{n(i)&&e(C)})}p(k),p(f),h(()=>x=Z(r,1,"drop-zone svelte-559ncu",null,x,{active:n(v),uploading:n(l)})),m("drop",r,D),m("dragover",r,L),m("dragleave",r,I),d(B,f),q()}U(["keydown","change"]);export{ie as component};
