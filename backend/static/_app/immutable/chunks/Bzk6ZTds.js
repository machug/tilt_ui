const s="/api",h=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function f(e,t=24){const a=await fetch(`${s}/tilts/${e}/readings?hours=${t}&limit=5000`);if(!a.ok)throw new Error(`Failed to fetch readings: ${a.statusText}`);return a.json()}async function d(e=24){const t=await fetch(`${s}/ambient/history?hours=${e}`);if(!t.ok)throw new Error("Failed to fetch ambient history");return t.json()}async function p(){const e=await fetch(`${s}/control/heater-entities`);if(!e.ok)throw new Error(`Failed to fetch heater entities: ${e.statusText}`);return e.json()}async function u(e){const t=await fetch(`${s}/control/batch/${e}/status`);if(!t.ok)throw new Error(`Failed to fetch batch control status: ${t.statusText}`);return t.json()}async function l(e,t,a=60){return(await fetch(`${s}/control/override`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({state:t,duration_minutes:a,batch_id:e})})).json()}async function i(e,t,a=50,n=0,c=!1){const o=new URLSearchParams;c&&o.append("deleted_only","true"),o.append("limit",String(a)),o.append("offset",String(n));const r=await fetch(`${s}/batches?${o}`);if(!r.ok)throw new Error(`Failed to fetch batches: ${r.statusText}`);return r.json()}async function w(e=50,t=0){const a=new URLSearchParams;a.append("limit",String(e)),a.append("offset",String(t));const n=await fetch(`${s}/batches/active?${a}`);if(!n.ok)throw new Error(`Failed to fetch active batches: ${n.statusText}`);return n.json()}async function $(e=50,t=0){const a=new URLSearchParams;a.append("limit",String(e)),a.append("offset",String(t));const n=await fetch(`${s}/batches/completed?${a}`);if(!n.ok)throw new Error(`Failed to fetch completed batches: ${n.statusText}`);return n.json()}async function y(e=50,t=0){return i(void 0,void 0,e,t,!0)}async function b(e){const t=await fetch(`${s}/batches/${e}`);if(!t.ok)throw new Error(`Failed to fetch batch: ${t.statusText}`);return t.json()}async function m(e){const t=await fetch(`${s}/batches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`Failed to create batch: ${t.statusText}`);return t.json()}async function T(e,t){const a=await fetch(`${s}/batches/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error(`Failed to update batch: ${a.statusText}`);return a.json()}async function j(e){const t=await fetch(`${s}/batches/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete batch: ${t.statusText}`)}async function E(e){const t=await fetch(`${s}/batches/${e}/restore`,{method:"POST"});if(!t.ok)throw new Error(`Failed to restore batch: ${t.statusText}`);return t.json()}async function S(e){const t=await fetch(`${s}/batches/${e}/progress`);if(!t.ok)throw new Error(`Failed to fetch batch progress: ${t.statusText}`);return t.json()}async function x(e=50,t=0){const a=await fetch(`${s}/recipes?limit=${e}&offset=${t}`);if(!a.ok){const n=await a.json().catch(()=>({detail:a.statusText}));throw new Error(n.detail||"Failed to fetch recipes")}return a.json()}async function k(e){const t=await fetch(`${s}/recipes/${e}`);if(!t.ok){const a=await t.json().catch(()=>({detail:t.statusText}));throw new Error(a.detail||"Failed to fetch recipe")}return t.json()}async function F(e){const t=new FormData;t.append("file",e);const a=await fetch(`${s}/recipes/import`,{method:"POST",body:t});if(!a.ok){const n=await a.json().catch(()=>({detail:a.statusText}));throw new Error(n.detail||"Failed to import recipe")}return a.json()}async function g(e){const t=await fetch(`${s}/recipes/${e}`,{method:"DELETE"});if(!t.ok){const a=await t.json().catch(()=>({detail:t.statusText}));throw new Error(a.detail||"Failed to delete recipe")}}async function B(){const e=await fetch(`${s}/maintenance/orphaned-data`);if(!e.ok)throw new Error(`Failed to fetch orphaned data: ${e.statusText}`);return e.json()}async function O(e){const t=await fetch(`${s}/maintenance/cleanup-readings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleted_batch_ids:e,dry_run:!0})});if(!t.ok){const a=await t.json().catch(()=>({detail:t.statusText}));throw new Error(a.detail||"Failed to preview cleanup")}return t.json()}async function v(e){const t=await fetch(`${s}/maintenance/cleanup-readings`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({deleted_batch_ids:e,dry_run:!1})});if(!t.ok){const a=await t.json().catch(()=>({detail:t.statusText}));throw new Error(a.detail||"Failed to execute cleanup")}return t.json()}export{h as T,y as a,$ as b,m as c,w as d,v as e,B as f,S as g,j as h,F as i,x as j,p as k,k as l,g as m,b as n,f as o,O as p,d as q,E as r,i as s,u as t,T as u,l as v};
