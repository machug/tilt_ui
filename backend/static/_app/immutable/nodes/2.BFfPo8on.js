import{d as Hn,c as ma,a as Ae,f as ze,s as xe,g as wa,t as Fr}from"../chunks/lZYuFeLm.js";import{h as zr,k as Or,b4 as Nr,f as Vr,ab as In,ak as Hs,g as b,am as Pt,af as Wn,ah as F,ag as X,aj as L,ac as tt,al as xt,s as Me,an as Ml,p as Di,ad as _a,b3 as Gr,ae as As,V as Hr,ai as Ir}from"../chunks/KfNDMb7P.js";import{e as gn,i as On}from"../chunks/BrMo0dxU.js";import{B as Wr,i as bt}from"../chunks/DN3Nn4_2.js";import{f as cn,c as Rn,g as xa,r as ba,s as Li,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as El}from"../chunks/CMo0SdGN.js";import{u as Yr,c as jr,d as qr,e as Kr,a as xs}from"../chunks/CNF3ZaXk.js";import{w as rn}from"../chunks/Dp8S1B6d.js";import{s as Fn}from"../chunks/QJqSGRkr.js";import{b as Sa}from"../chunks/DvdFc3xZ.js";import{b as Is,p as Ds}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){zr&&Or();var n=new Wr(e),a=!Nr();Vr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const Xr=!0,st="u-",$r="uplot",eo=st+"hz",to=st+"vt",lo=st+"title",no=st+"wrap",so=st+"under",io=st+"over",ao=st+"axis",Tl=st+"off",ro=st+"select",oo=st+"cursor-x",uo=st+"cursor-y",co=st+"cursor-pt",fo=st+"legend",po=st+"live",ho=st+"inline",vo=st+"series",go=st+"marker",Ci=st+"label",mo=st+"value",fn="width",dn="height",on="top",Pi="bottom",Bl="left",bs="right",Ws="#000",Ri=Ws+"0",Ss="mousemove",Fi="mousedown",ys="mouseup",zi="mouseenter",Oi="mouseleave",Ni="dblclick",wo="resize",_o="scroll",Vi="change",Nn="dppxchange",Bs="--",Zl=typeof window<"u",Ls=Zl?document:null,Yl=Zl?window:null,xo=Zl?navigator:null;let Te,Ln;function Cs(){let e=devicePixelRatio;Te!=e&&(Te=e,Ln&&Rs(Vi,Ln,Cs),Ln=matchMedia(`(min-resolution: ${Te-.001}dppx) and (max-resolution: ${Te+.001}dppx)`),Al(Vi,Ln,Cs),Yl.dispatchEvent(new CustomEvent(Nn)))}function Nt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Ps(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ge(e,l,i){e.style[l]=i+"px"}function Jt(e,l,i,n){let a=Ls.createElement(e);return l!=null&&Nt(a,l),i?.insertBefore(a,n),a}function Bt(e,l){return Jt("div",e,l)}const Gi=new WeakMap;function nl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Gi.get(e);c!=u&&(e.style.transform=c,Gi.set(e,c),l<0||i<0||l>n||i>a?Nt(e,Tl):Ps(e,Tl))}const Hi=new WeakMap;function Ii(e,l,i){let n=l+i,a=Hi.get(e);n!=a&&(Hi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Wi=new WeakMap;function Bi(e,l,i,n){let a=l+""+i,c=Wi.get(e);a!=c&&(Wi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Us={passive:!0},bo={...Us,capture:!0};function Al(e,l,i,n){l.addEventListener(e,i,n?bo:Us)}function Rs(e,l,i,n){l.removeEventListener(e,i,Us)}Zl&&Cs();function Zt(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:Vt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function ya(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const ka=e=>e!=null,Ta=e=>e!=null&&e>0,Bn=ya(ka),So=ya(Ta);function yo(e,l,i,n=0,a=!1){let c=a?So:Bn,u=a?Ta:ka;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let v=l;v<=i;v++){let x=e[v];u(x)&&(x<p?p=x:x>d&&(d=x))}return[p??Re,d??-Re]}function Un(e,l,i,n){let a=ji(e),c=ji(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?al:Ma,p=a==1?Vt:Ut,d=c==1?Ut:Vt,v=p(u(lt(e))),x=d(u(lt(l))),g=jl(i,v),m=jl(i,x);return i==10&&(v<0&&(g=Fe(g,-v)),x<0&&(m=Fe(m,-x))),n||i==2?(e=g*a,l=m*c):(e=La(e,g),l=Yn(l,m)),[e,l]}function Ys(e,l,i,n){let a=Un(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const js=.1,Ui={mode:3,pad:js},hn={pad:0,soft:null,mode:0},ko={min:hn,max:hn};function Vn(e,l,i,n){return jn(i)?Yi(e,l,i):(hn.pad=i,hn.soft=n?0:null,hn.mode=n?3:0,Yi(e,l,ko))}function ye(e,l){return e??l}function To(e,l,i){for(l=ye(l,0),i=ye(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Yi(e,l,i){let n=i.min,a=i.max,c=ye(n.pad,0),u=ye(a.pad,0),p=ye(n.hard,-Re),d=ye(a.hard,Re),v=ye(n.soft,Re),x=ye(a.soft,-Re),g=ye(n.mode,0),m=ye(a.mode,0),G=l-e,V=al(G),R=At(lt(e),lt(l)),P=al(R),Z=lt(P-V);(G<1e-24||Z>10)&&(G=0,(e==0||l==0)&&(G=1e-24,g==2&&v!=Re&&(c=0),m==2&&x!=-Re&&(u=0)));let k=G||R||1e3,H=al(k),E=jl(10,Vt(H)),ie=k*(G==0?e==0?.1:1:c),O=Fe(La(e-ie,E/10),24),$=e>=v&&(g==1||g==3&&O<=v||g==2&&O>=v)?v:Re,le=At(p,O<$&&e>=$?$:Qt($,O)),N=k*(G==0?l==0?.1:1:u),z=Fe(Yn(l+N,E/10),24),S=l<=x&&(m==1||m==3&&z>=x||m==2&&z<=x)?x:-Re,ee=Qt(d,z>S&&l<=S?S:At(S,z));return le==ee&&le==0&&(ee=100),[le,ee]}const Mo=new Intl.NumberFormat(Zl?xo.language:"en-US"),qs=e=>Mo.format(e),Gt=Math,zn=Gt.PI,lt=Gt.abs,Vt=Gt.floor,et=Gt.round,Ut=Gt.ceil,Qt=Gt.min,At=Gt.max,jl=Gt.pow,ji=Gt.sign,al=Gt.log10,Ma=Gt.log2,Eo=(e,l=1)=>Gt.sinh(e)*l,ks=(e,l=1)=>Gt.asinh(e/l),Re=1/0;function qi(e){return(al((e^e>>31)-(e>>31))|0)+1}function Fs(e,l,i){return Qt(At(e,l),i)}function Ea(e){return typeof e=="function"}function me(e){return Ea(e)?e:()=>e}const Ao=()=>{},Aa=e=>e,Da=(e,l)=>l,Do=e=>null,Ki=e=>!0,Ji=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Dl=e=>{if(Pa(e)||wl.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${Dl(a)}e${c}`}return Fe(e,n)};function yl(e,l){return Dl(Fe(Dl(e/l))*l)}function Yn(e,l){return Dl(Ut(Dl(e/l))*l)}function La(e,l){return Dl(Vt(Dl(e/l))*l)}function Fe(e,l=0){if(Pa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return et(n)/i}const wl=new Map;function Ca(e){return((""+e).split(".")[1]||"").length}function mn(e,l,i,n){let a=[],c=n.map(Ca);for(let u=l;u<i;u++){let p=lt(u),d=Fe(jl(e,u),p);for(let v=0;v<n.length;v++){let x=e==10?+`${n[v]}e${u}`:n[v]*d,g=(u>=0?0:p)+(u>=c[v]?0:c[v]),m=e==10?x:Fe(x,g);a.push(m),wl.set(m,g)}}return a}const vn={},Ks=[],ql=[null,null],ml=Array.isArray,Pa=Number.isInteger,Co=e=>e===void 0;function Zi(e){return typeof e=="string"}function jn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),Ra="__proto__";function Kl(e,l=jn){let i;if(ml(e)){let n=e.find(a=>a!=null);if(ml(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Kl(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Ra&&(i[n]=Kl(e[n],l))}else i=e;return i}function $e(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Ra&&(jn(e[a])?$e(e[a],Kl(n[a])):e[a]=Kl(n[a]))}return e}const Fo=0,zo=1,Oo=2;function No(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Vo(e,l){if(Io(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Wo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],v=d.length;for(let x=0;x<v;x++)i.add(d[x])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let v=1;v<p.length;v++){let x=p[v],g=Array(a).fill(void 0),m=l?l[u][v]:zo,G=[];for(let V=0;V<x.length;V++){let R=x[V],P=c.get(d[V]);R===null?m!=Fo&&(g[P]=R,m==Oo&&G.push(P)):g[P]=R}No(g,G,a),n.push(g)}}return n}const Go=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];a.push(p)}return a}function Io(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Wo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=At(1,Vt((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const Fa=["January","February","March","April","May","June","July","August","September","October","November","December"],za=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Oa(e){return e.slice(0,3)}const Bo=za.map(Oa),Uo=Fa.map(Oa),Yo={MMMM:Fa,MMM:Uo,WWWW:za,WWW:Bo};function un(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>un(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>un(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>un(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>un(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>un(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function Js(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?qo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Na=e=>e%1==0,Gn=[1,2,2.5,5],Zo=mn(10,-32,0,Gn),Va=mn(10,0,32,Gn),Qo=Va.filter(Na),kl=Zo.concat(Va),Zs=`
`,Ga="{YYYY}",Qi=Zs+Ga,Ha="{M}/{D}",pn=Zs+Ha,Cn=pn+"/{YY}",Ia="{aa}",Xo="{h}:{mm}",Ul=Xo+Ia,Xi=Zs+Ul,$i=":{ss}",Ee=null;function Wa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,d=(e==1?mn(10,0,3,Gn).filter(Na):mn(10,-3,0,Gn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Ga,Ee,Ee,Ee,Ee,Ee,Ee,1],[a*28,"{MMM}",Qi,Ee,Ee,Ee,Ee,Ee,1],[a,Ha,Qi,Ee,Ee,Ee,Ee,Ee,1],[n,"{h}"+Ia,Cn,Ee,pn,Ee,Ee,Ee,1],[i,Ul,Cn,Ee,pn,Ee,Ee,Ee,1],[l,$i,Cn+" "+Ul,Ee,pn+" "+Ul,Ee,Xi,Ee,1],[e,$i+".{fff}",Cn+" "+Ul,Ee,pn+" "+Ul,Ee,Xi,Ee,1]];function x(g){return(m,G,V,R,P,Z)=>{let k=[],H=P>=u,E=P>=c&&P<u,ie=g(V),O=Fe(ie*e,3),$=Ts(ie.getFullYear(),H?0:ie.getMonth(),E||H?1:ie.getDate()),le=Fe($*e,3);if(E||H){let N=E?P/c:0,z=H?P/u:0,S=O==le?O:Fe(Ts($.getFullYear()+z,$.getMonth()+N,1)*e,3),ee=new Date(et(S/e)),A=ee.getFullYear(),q=ee.getMonth();for(let I=0;S<=R;I++){let se=Ts(A+z*I,q+N*I,1),B=se-g(Fe(se*e,3));S=Fe((+se+B)*e,3),S<=R&&k.push(S)}}else{let N=P>=a?a:P,z=Vt(V)-Vt(O),S=le+z+Yn(O-le,N);k.push(S);let ee=g(S),A=ee.getHours()+ee.getMinutes()/i+ee.getSeconds()/n,q=P/n,I=m.axes[G]._space,se=Z/I;for(;S=Fe(S+P,e==1?0:3),!(S>R);)if(q>1){let B=Vt(Fe(A+q,6))%24,ae=g(S).getHours()-B;ae>1&&(ae=-1),S-=ae*n,A=(A+q)%24;let pe=k[k.length-1];Fe((S-pe)/P,3)*se>=.7&&k.push(S)}else k.push(S)}return k}}return[d,v,x]}const[$o,eu,tu]=Wa(1),[lu,nu,su]=Wa(.001);mn(2,-53,53,[1]);function ea(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ta(e,l){return(i,n,a,c,u)=>{let p=l.find(V=>u>=V[0])||l[l.length-1],d,v,x,g,m,G;return n.map(V=>{let R=e(V),P=R.getFullYear(),Z=R.getMonth(),k=R.getDate(),H=R.getHours(),E=R.getMinutes(),ie=R.getSeconds(),O=P!=d&&p[2]||Z!=v&&p[3]||k!=x&&p[4]||H!=g&&p[5]||E!=m&&p[6]||ie!=G&&p[7]||p[1];return d=P,v=Z,x=k,g=H,m=E,G=ie,O(R)})}}function iu(e,l){let i=Js(l);return(n,a,c,u,p)=>a.map(d=>i(e(d)))}function Ts(e,l,i){return new Date(e,l,i)}function la(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function na(e,l){return(i,n,a,c)=>c==null?Bs:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=Bt(),a=i.size(e,l);Ge(n,fn,a),Ge(n,dn,a);let c=a/-2;Ge(n,"marginLeft",c),Ge(n,"marginTop",c);let u=i.width(e,l,a);return u&&Ge(n,"borderWidth",u),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const Ms=[0,0];function hu(e,l,i){return Ms[0]=l,Ms[1]=i,Ms}function Pn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Es(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Pn,mouseup:Pn,click:Pn,dblclick:Pn,mousemove:Es,mouseleave:Es,mouseenter:Es},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ba={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Qs=$e({},Ba,{filter:Da}),Ua=$e({},Qs,{size:10}),Ya=$e({},Ba,{show:!1}),Xs='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',ja="bold "+Xs,qa=1.5,sa={show:!0,scale:"x",stroke:Ws,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ja,side:2,grid:Qs,ticks:Ua,border:Ya,font:Xs,lineGap:qa,rotate:0},gu="Value",mu="Time",ia={show:!0,scale:"x",auto:!1,sorted:1,min:Re,max:-Re,idxs:[]};function wu(e,l,i,n,a){return l.map(c=>c==null?"":qs(c))}function _u(e,l,i,n,a,c,u){let p=[],d=wl.get(a)||0;i=u?i:Fe(Yn(i,a),d);for(let v=i;v<=n;v=Fe(v+a,d))p.push(Object.is(v,-0)?0:v);return p}function zs(e,l,i,n,a,c,u){const p=[],d=e.scales[e.axes[l].scale].log,v=d==10?al:Ma,x=Vt(v(i));a=jl(d,x),d==10&&(a=kl[Zt(a,kl)]);let g=i,m=a*d;d==10&&(m=kl[Zt(m,kl)]);do p.push(g),g=g+a,d==10&&!wl.has(g)&&(g=Fe(g,wl.get(a))),g>=m&&(a=g,m=a*d,d==10&&(m=kl[Zt(m,kl)]));while(g<=n);return p}function xu(e,l,i,n,a,c,u){let d=e.scales[e.axes[l].scale].asinh,v=n>d?zs(e,l,At(d,i),n,a):[d],x=n>=0&&i<=0?[0]:[];return(i<-d?zs(e,l,At(d,-n),-i,a):[d]).reverse().map(m=>-m).concat(x,v)}const Ka=/./,bu=/[12357]/,Su=/[125]/,aa=/1/,Os=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,v=c._space,x=d(10,u),g=d(9,u)-x>=v?Ka:d(7,u)-x>=v?bu:d(5,u)-x>=v?Su:aa;if(g==aa){let m=lt(d(1,u)-x);if(m<v)return Os(l.slice().reverse(),p.distr,g,Ut(v/m)).reverse()}return Os(l,p.distr,g,1)}function ku(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,v=lt(d(1,u)-d(2,u));return v<p?Os(l.slice().reverse(),3,Ka,Ut(p/v)).reverse():l}function Tu(e,l,i,n){return n==null?Bs:l==null?"":qs(l)}const ra={show:!0,scale:"y",stroke:Ws,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:ja,side:3,grid:Qs,ticks:Ua,border:Ya,font:Xs,lineGap:qa,rotate:0};function Mu(e,l){let i=3+(e||1)*2;return Fe(i*l,3)}function Eu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=lt(u-c),d=e.series[l],v=p/(d.points.space*Te);return n[1]-n[0]<=v}const oa={scale:null,auto:!0,sorted:0,min:Re,max:-Re},Ja=(e,l,i,n,a)=>a,ua={show:!0,auto:!0,sorted:0,gaps:Ja,alpha:1,facets:[$e({},oa,{scale:"x"}),$e({},oa,{scale:"y"})]},ca={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Ja,alpha:1,points:{show:Eu,filter:null},values:null,min:Re,max:-Re,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Za={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=$e({},Za,{time:!1,ori:1}),fa={};function Qa(e,l){let i=fa[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,d,v){for(let x=0;x<i.plots.length;x++)i.plots[x]!=a&&i.plots[x].pub(n,a,c,u,p,d,v)}},e!=null&&(fa[e]=i)),i}const Jl=1,Ns=2;function Ll(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],v=n==2?c[1]:c[l],x=n==2?u[a.facets[0].scale]:u[e.series[0].scale],g=n==2?u[a.facets[1].scale]:u[a.scale],m=p.left,G=p.top,V=p.width,R=p.height,P=e.valToPosH,Z=e.valToPosV;return x.ori==0?i(a,d,v,x,g,P,Z,m,G,V,R,Kn,Ql,Zn,$a,tr):i(a,d,v,x,g,Z,P,G,m,R,V,Jn,Xl,ti,er,lr)}function $s(e,l){let i=0,n=0,a=ye(e.bands,Ks);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return a==-1?d.min:a==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function rl(e,l,i,n,a,c){return Ll(e,l,(u,p,d,v,x,g,m,G,V,R,P)=>{let Z=u.pxRound;const k=v.dir*(v.ori==0?1:-1),H=v.ori==0?Ql:Xl;let E,ie;k==1?(E=i,ie=n):(E=n,ie=i);let O=Z(g(p[E],v,R,G)),$=Z(m(d[E],x,P,V)),le=Z(g(p[ie],v,R,G)),N=Z(m(c==1?x.max:x.min,x,P,V)),z=new Path2D(a);return H(z,le,N),H(z,O,N),H(z,O,$),z})}function qn(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?Zn:ti;let d=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let G=m[0]-d;G>0&&p(u,d,n,G,n+c),d=m[1]}}let v=i+a-d,x=10;v>0&&p(u,d,n-x/2,v,n+c+x)}return u}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ei(e,l,i,n,a,c,u){let p=[],d=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let g=v,m=v;if(a==1)for(;++v<=n&&l[v]===null;)m=v;else for(;--v>=i&&l[v]===null;)m=v;let G=c(e[g]),V=m==g?G:c(e[m]),R=g-a;G=u<=0&&R>=0&&R<d?c(e[R]):G;let Z=m+a;V=u>=0&&Z>=0&&Z<d?c(e[Z]):V,V>=G&&p.push([G,V])}return p}function da(e){return e==0?Aa:e==1?et:l=>yl(l,e)}function Xa(e){let l=e==0?Kn:Jn,i=e==0?(a,c,u,p,d,v)=>{a.arcTo(c,u,p,d,v)}:(a,c,u,p,d,v)=>{a.arcTo(u,c,d,p,v)},n=e==0?(a,c,u,p,d)=>{a.rect(c,u,p,d)}:(a,c,u,p,d)=>{a.rect(u,c,d,p)};return(a,c,u,p,d,v=0,x=0)=>{v==0&&x==0?n(a,c,u,p,d):(v=Qt(v,p/2,d/2),x=Qt(x,p/2,d/2),l(a,c+v,u),i(a,c+p,u,c+p,u+d,v),i(a,c+p,u+d,c,u+d,x),i(a,c,u+d,c,u,x),i(a,c,u,c+p,u,v),a.closePath())}}const Kn=(e,l,i)=>{e.moveTo(l,i)},Jn=(e,l,i)=>{e.moveTo(i,l)},Ql=(e,l,i)=>{e.lineTo(l,i)},Xl=(e,l,i)=>{e.lineTo(i,l)},Zn=Xa(0),ti=Xa(1),$a=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},er=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},tr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},lr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function nr(e){return(l,i,n,a,c)=>Ll(l,i,(u,p,d,v,x,g,m,G,V,R,P)=>{let{pxRound:Z,points:k}=u,H,E;v.ori==0?(H=Kn,E=$a):(H=Jn,E=er);const ie=Fe(k.width*Te,3);let O=(k.size-k.width)/2*Te,$=Fe(O*2,3),le=new Path2D,N=new Path2D,{left:z,top:S,width:ee,height:A}=l.bbox;Zn(N,z-$,S-$,ee+$*2,A+$*2);const q=I=>{if(d[I]!=null){let se=Z(g(p[I],v,R,G)),B=Z(m(d[I],x,P,V));H(le,se+O,B),E(le,se,B,O,0,zn*2)}};if(c)c.forEach(q);else for(let I=n;I<=a;I++)q(I);return{stroke:ie>0?le:null,fill:le,clip:N,flags:Jl|Ns}})}function sr(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Pu=sr(Ql),Ru=sr(Xl);function ir(e){const l=ye(e?.alignGaps,0);return(i,n,a,c)=>Ll(i,n,(u,p,d,v,x,g,m,G,V,R,P)=>{[a,c]=Bn(d,a,c);let Z=u.pxRound,k=A=>Z(g(A,v,R,G)),H=A=>Z(m(A,x,P,V)),E,ie;v.ori==0?(E=Ql,ie=Pu):(E=Xl,ie=Ru);const O=v.dir*(v.ori==0?1:-1),$={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},le=$.stroke;let N=!1;if(c-a>=R*4){let A=U=>i.posToVal(U,v.key,!0),q=null,I=null,se,B,Pe,de=k(p[O==1?a:c]),ae=k(p[a]),pe=k(p[c]),re=A(O==1?ae+1:pe-1);for(let U=O==1?a:c;U>=a&&U<=c;U+=O){let be=p[U],ve=(O==1?be<re:be>re)?de:k(be),fe=d[U];ve==de?fe!=null?(B=fe,q==null?(E(le,ve,H(B)),se=q=I=B):B<q?q=B:B>I&&(I=B)):fe===null&&(N=!0):(q!=null&&ie(le,de,H(q),H(I),H(se),H(B)),fe!=null?(B=fe,E(le,ve,H(B)),q=I=se=B):(q=I=null,fe===null&&(N=!0)),de=ve,re=A(de+O))}q!=null&&q!=I&&Pe!=de&&ie(le,de,H(q),H(I),H(se),H(B))}else for(let A=O==1?a:c;A>=a&&A<=c;A+=O){let q=d[A];q===null?N=!0:q!=null&&E(le,k(p[A]),H(q))}let[S,ee]=$s(i,n);if(u.fill!=null||S!=0){let A=$.fill=new Path2D(le),q=u.fillTo(i,n,u.min,u.max,S),I=H(q),se=k(p[a]),B=k(p[c]);O==-1&&([B,se]=[se,B]),E(A,B,I),E(A,se,I)}if(!u.spanGaps){let A=[];N&&A.push(...ei(p,d,a,c,O,k,l)),$.gaps=A=u.gaps(i,n,a,c,A),$.clip=qn(A,v.ori,G,V,R,P)}return ee!=0&&($.band=ee==2?[rl(i,n,a,c,le,-1),rl(i,n,a,c,le,1)]:rl(i,n,a,c,le,ee)),$})}function Fu(e){const l=ye(e.align,1),i=ye(e.ascDesc,!1),n=ye(e.alignGaps,0),a=ye(e.extend,!1);return(c,u,p,d)=>Ll(c,u,(v,x,g,m,G,V,R,P,Z,k,H)=>{[p,d]=Bn(g,p,d);let E=v.pxRound,{left:ie,width:O}=c.bbox,$=ae=>E(V(ae,m,k,P)),le=ae=>E(R(ae,G,H,Z)),N=m.ori==0?Ql:Xl;const z={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},S=z.stroke,ee=m.dir*(m.ori==0?1:-1);let A=le(g[ee==1?p:d]),q=$(x[ee==1?p:d]),I=q,se=q;a&&l==-1&&(se=ie,N(S,se,A)),N(S,q,A);for(let ae=ee==1?p:d;ae>=p&&ae<=d;ae+=ee){let pe=g[ae];if(pe==null)continue;let re=$(x[ae]),U=le(pe);l==1?N(S,re,A):N(S,I,U),N(S,re,U),A=U,I=re}let B=I;a&&l==1&&(B=ie+O,N(S,B,A));let[Pe,de]=$s(c,u);if(v.fill!=null||Pe!=0){let ae=z.fill=new Path2D(S),pe=v.fillTo(c,u,v.min,v.max,Pe),re=le(pe);N(ae,B,re),N(ae,se,re)}if(!v.spanGaps){let ae=[];ae.push(...ei(x,g,p,d,ee,$,n));let pe=v.width*Te/2,re=i||l==1?pe:-pe,U=i||l==-1?-pe:pe;ae.forEach(be=>{be[0]+=re,be[1]+=U}),z.gaps=ae=v.gaps(c,u,p,d,ae),z.clip=qn(ae,m.ori,P,Z,k,H)}return de!=0&&(z.band=de==2?[rl(c,u,p,d,S,-1),rl(c,u,p,d,S,1)]:rl(c,u,p,d,S,de)),z})}function pa(e,l,i,n,a,c,u=Re){if(e.length>1){let p=null;for(let d=0,v=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let x=lt(e[d]-e[p]);x<v&&(v=x,u=lt(i(e[d],n,a,c)-i(e[p],n,a,c)))}p=d}}return u}function zu(e){e=e||vn;const l=ye(e.size,[.6,Re,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=me(a),u=1-l[0],p=ye(l[1],Re),d=ye(l[2],1),v=ye(e.disp,vn),x=ye(e.each,G=>{}),{fill:g,stroke:m}=v;return(G,V,R,P)=>Ll(G,V,(Z,k,H,E,ie,O,$,le,N,z,S)=>{let ee=Z.pxRound,A=i,q=n*Te,I=p*Te,se=d*Te,B,Pe;E.ori==0?[B,Pe]=c(G,V):[Pe,B]=c(G,V);const de=E.dir*(E.ori==0?1:-1);let ae=E.ori==0?Zn:ti,pe=E.ori==0?x:(w,Q,K,te,_e,ge,We)=>{x(w,Q,K,_e,te,We,ge)},re=ye(G.bands,Ks).find(w=>w.series[0]==V),U=re!=null?re.dir:0,be=Z.fillTo(G,V,Z.min,Z.max,U),De=ee($(be,ie,S,N)),ve,fe,Le,He=z,we=ee(Z.width*Te),Ye=!1,Ue=null,ue=null,Ie=null,St=null;g!=null&&(we==0||m!=null)&&(Ye=!0,Ue=g.values(G,V,R,P),ue=new Map,new Set(Ue).forEach(w=>{w!=null&&ue.set(w,new Path2D)}),we>0&&(Ie=m.values(G,V,R,P),St=new Map,new Set(Ie).forEach(w=>{w!=null&&St.set(w,new Path2D)})));let{x0:it,size:mt}=v;if(it!=null&&mt!=null){A=1,k=it.values(G,V,R,P),it.unit==2&&(k=k.map(K=>G.posToVal(le+K*z,E.key,!0)));let w=mt.values(G,V,R,P);mt.unit==2?fe=w[0]*z:fe=O(w[0],E,z,le)-O(0,E,z,le),He=pa(k,H,O,E,z,le,He),Le=He-fe+q}else He=pa(k,H,O,E,z,le,He),Le=He*u+q,fe=He-Le;Le<1&&(Le=0),we>=fe/2&&(we=0),Le<5&&(ee=Aa);let Rt=Le>0,yt=He-Le-(Rt?we:0);fe=ee(Fs(yt,se,I)),ve=(A==0?fe/2:A==de?0:fe)-A*de*((A==0?q/2:0)+(Rt?we/2:0));const Ze={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Y=Ye?null:new Path2D;let y=null;if(re!=null)y=G.data[re.series[1]];else{let{y0:w,y1:Q}=v;w!=null&&Q!=null&&(H=Q.values(G,V,R,P),y=w.values(G,V,R,P))}let C=B*fe,T=Pe*fe;for(let w=de==1?R:P;w>=R&&w<=P;w+=de){let Q=H[w];if(Q==null)continue;if(y!=null){let qe=y[w]??0;if(Q-qe==0)continue;De=$(qe,ie,S,N)}let K=E.distr!=2||v!=null?k[w]:w,te=O(K,E,z,le),_e=$(ye(Q,be),ie,S,N),ge=ee(te-ve),We=ee(At(_e,De)),je=ee(Qt(_e,De)),pt=We-je;if(Q!=null){let qe=Q<0?T:C,ht=Q<0?C:T;Ye?(we>0&&Ie[w]!=null&&ae(St.get(Ie[w]),ge,je+Vt(we/2),fe,At(0,pt-we),qe,ht),Ue[w]!=null&&ae(ue.get(Ue[w]),ge,je+Vt(we/2),fe,At(0,pt-we),qe,ht)):ae(Y,ge,je+Vt(we/2),fe,At(0,pt-we),qe,ht),pe(G,V,w,ge-we/2,je,fe+we,pt)}}return we>0?Ze.stroke=Ye?St:Y:Ye||(Ze._fill=Z.width==0?Z._fill:Z._stroke??Z._fill,Ze.width=0),Ze.fill=Ye?ue:Y,Ze})}function Ou(e,l){const i=ye(l?.alignGaps,0);return(n,a,c,u)=>Ll(n,a,(p,d,v,x,g,m,G,V,R,P,Z)=>{[c,u]=Bn(v,c,u);let k=p.pxRound,H=B=>k(m(B,x,P,V)),E=B=>k(G(B,g,Z,R)),ie,O,$;x.ori==0?(ie=Kn,$=Ql,O=tr):(ie=Jn,$=Xl,O=lr);const le=x.dir*(x.ori==0?1:-1);let N=H(d[le==1?c:u]),z=N,S=[],ee=[];for(let B=le==1?c:u;B>=c&&B<=u;B+=le)if(v[B]!=null){let de=d[B],ae=H(de);S.push(z=ae),ee.push(E(v[B]))}const A={stroke:e(S,ee,ie,$,O,k),fill:null,clip:null,band:null,gaps:null,flags:Jl},q=A.stroke;let[I,se]=$s(n,a);if(p.fill!=null||I!=0){let B=A.fill=new Path2D(q),Pe=p.fillTo(n,a,p.min,p.max,I),de=E(Pe);$(B,z,de),$(B,N,de)}if(!p.spanGaps){let B=[];B.push(...ei(d,v,c,u,le,H,i)),A.gaps=B=p.gaps(n,a,c,u,B),A.clip=qn(B,x.ori,V,R,P,Z)}return se!=0&&(A.band=se==2?[rl(n,a,c,u,q,-1),rl(n,a,c,u,q,1)]:rl(n,a,c,u,q,se)),A})}function Nu(e){return Ou(Vu,e)}function Vu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),v=Array(u-1),x=Array(u-1),g=Array(u-1);for(let m=0;m<u-1;m++)x[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],v[m]=x[m]/g[m];d[0]=v[0];for(let m=1;m<u-1;m++)v[m]===0||v[m-1]===0||v[m-1]>0!=v[m]>0?d[m]=0:(d[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/v[m-1]+(g[m]+2*g[m-1])/v[m]),isFinite(d[m])||(d[m]=0));d[u-1]=v[u-2];for(let m=0;m<u-1;m++)a(p,e[m]+g[m]/3,l[m]+d[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-d[m+1]*g[m]/3,e[m+1],l[m+1])}return p}const Vs=new Set;function ha(){for(let e of Vs)e.syncRect(!0)}Zl&&(Al(wo,Yl,ha),Al(_o,Yl,ha,!0),Al(Nn,Yl,()=>{nt.pxRatio=Te}));const Gu=ir(),Hu=nr();function va(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Gs(c,u,l,i))}function Iu(e,l){return e.map((i,n)=>n==0?{}:$e({},l,i))}function Gs(e,l,i,n){return $e({},l==0?i:n,e)}function ar(e,l,i){return l==null?ql:[l,i]}const Wu=ar;function Bu(e,l,i){return l==null?ql:Vn(l,i,js,!0)}function rr(e,l,i,n){return l==null?ql:Un(l,i,e.scales[n].log,!1)}const Uu=rr;function or(e,l,i,n){return l==null?ql:Ys(l,i,e.scales[n].log,!1)}const Yu=or;function ju(e,l,i,n,a){let c=At(qi(e),qi(l)),u=l-e,p=Zt(a/n*u,i);do{let d=i[p],v=n*d/u;if(v>=a&&c+(d<5?wl.get(d):0)<=17)return[d,v]}while(++p<i.length);return[0,0]}function ga(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=et((i=+a)*Te))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Fe(l[2]*Te,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function nt(e,l,i){const n={mode:ye(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const v=n.root=Bt($r);if(e.id!=null&&(v.id=e.id),Nt(v,e.class),e.title){let t=Bt(lo,v);t.textContent=e.title}const x=Jt("canvas"),g=n.ctx=x.getContext("2d"),m=Bt(no,v);Al("click",m,t=>{t.target===V&&(Oe!=Vl||Be!=Gl)&&gt.click(n,t)},!0);const G=n.under=Bt(so,m);m.appendChild(x);const V=n.over=Bt(io,m);e=Kl(e);const R=+ye(e.pxAlign,1),P=da(R);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const Z=e.ms||.001,k=n.series=a==1?va(e.series||[],ia,ca,!1):Iu(e.series||[null],ua),H=n.axes=va(e.axes||[],sa,ra,!0),E=n.scales={},ie=n.bands=e.bands||[];ie.forEach(t=>{t.fill=me(t.fill||null),t.dir=ye(t.dir,-1)});const O=a==2?k[1].facets[0].scale:k[0].scale,$={axes:_r,series:hr},le=(e.drawOrder||["axes","series"]).map(t=>$[t]);function N(t){const s=t.distr==3?r=>al(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>ks(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,_=h-f;return(o-f)/_}}function z(t){let s=E[t];if(s==null){let r=(e.scales||vn)[t]||vn;if(r.from!=null){z(r.from);let o=$e({},E[r.from],r,{key:t});o.valToPct=N(o),E[t]=o}else{s=E[t]=$e({},t==O?Za:Du,r),s.key=t;let o=s.time,f=s.range,h=ml(f);if((t!=O||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Ui:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Ui:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&jn(f))){let _=f;f=(M,D,W)=>D==null?ql:Vn(D,W,_)}s.range=me(f||(o?Wu:t==O?s.distr==3?Uu:s.distr==4?Yu:ar:s.distr==3?rr:s.distr==4?or:Bu)),s.auto=me(h?!1:s.auto),s.clamp=me(s.clamp||Au),s._min=s._max=null,s.valToPct=N(s)}}}z("x"),z("y"),a==1&&k.forEach(t=>{z(t.scale)}),H.forEach(t=>{z(t.scale)});for(let t in e.scales)z(t);const S=E[O],ee=S.distr;let A,q;S.ori==0?(Nt(v,eo),A=c,q=u):(Nt(v,to),A=u,q=c);const I={};for(let t in E){let s=E[t];(s.min!=null||s.max!=null)&&(I[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(et(t/Z))),B=e.fmtDate||Js,Pe=Z==1?tu(se):su(se),de=ta(se,ea(Z==1?eu:nu,B)),ae=na(se,la(au,B)),pe=[],re=n.legend=$e({},uu,e.legend),U=n.cursor=$e({},vu,{drag:{y:a==2}},e.cursor),be=re.show,De=U.show,ve=re.markers;re.idxs=pe,ve.width=me(ve.width),ve.dash=me(ve.dash),ve.stroke=me(ve.stroke),ve.fill=me(ve.fill);let fe,Le,He,we=[],Ye=[],Ue,ue=!1,Ie={};if(re.live){const t=k[1]?k[1].values:null;ue=t!=null,Ue=ue?t(n,1,0):{_:0};for(let s in Ue)Ie[s]=Bs}if(be)if(fe=Jt("table",fo,v),He=Jt("tbody",null,fe),re.mount(n,fe),ue){Le=Jt("thead",null,fe,He);let t=Jt("tr",null,Le);Jt("th",null,t);for(var St in Ue)Jt("th",Ci,t).textContent=St}else Nt(fe,ho),re.live&&Nt(fe,po);const it={show:!0},mt={show:!1};function Rt(t,s){if(s==0&&(ue||!re.live||a==2))return ql;let r=[],o=Jt("tr",vo,He,He.childNodes[s]);Nt(o,t.class),t.show||Nt(o,Tl);let f=Jt("th",null,o);if(ve.show){let M=Bt(go,f);if(s>0){let D=ve.width(n,s);D&&(M.style.border=D+"px "+ve.dash(n,s)+" "+ve.stroke(n,s)),M.style.background=ve.fill(n,s)}}let h=Bt(Ci,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(ve.show||(h.style.color=t.width>0?ve.stroke(n,s):ve.fill(n,s)),Ze("click",f,M=>{if(U._lock)return;_t(M);let D=k.indexOf(t);if((M.ctrlKey||M.metaKey)!=re.isolate){let W=k.some((j,J)=>J>0&&J!=D&&j.show);k.forEach((j,J)=>{J>0&&$t(J,W?J==D?it:mt:it,!0,Xe.setSeries)})}else $t(D,{show:!t.show},!0,Xe.setSeries)},!1),ol&&Ze(zi,f,M=>{U._lock||(_t(M),$t(k.indexOf(t),Il,!0,Xe.setSeries))},!1));for(var _ in Ue){let M=Jt("td",mo,o);M.textContent="--",r.push(M)}return[o,r]}const yt=new Map;function Ze(t,s,r,o=!0){const f=yt.get(s)||{},h=U.bind[t](n,s,r,o);h&&(Al(t,s,f[t]=h),yt.set(s,f))}function Y(t,s,r){const o=yt.get(s)||{};for(let f in o)(t==null||f==t)&&(Rs(f,s,o[f]),delete o[f]);t==null&&yt.delete(s)}let y=0,C=0,T=0,w=0,Q=0,K=0,te=Q,_e=K,ge=T,We=w,je=0,pt=0,qe=0,ht=0;n.bbox={};let sl=!1,Yt=!1,Ht=!1,at=!1,Cl=!1,wt=!1;function Pl(t,s,r){(r||t!=n.width||s!=n.height)&&wn(t,s),Fl(!1),Ht=!0,Yt=!0,zl()}function wn(t,s){n.width=y=T=t,n.height=C=w=s,Q=K=0,Xt(),kt();let r=n.bbox;je=r.left=yl(Q*Te,.5),pt=r.top=yl(K*Te,.5),qe=r.width=yl(T*Te,.5),ht=r.height=yl(w*Te,.5)}const _n=3;function xn(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=wr(s);t=s==_n||r&&o,t||(wn(n.width,n.height),Yt=!0)}}function Qn({width:t,height:s}){Pl(t,s)}n.setSize=Qn;function Xt(){let t=!1,s=!1,r=!1,o=!1;H.forEach((f,h)=>{if(f.show&&f._show){let{side:_,_size:M}=f,D=_%2,W=f.label!=null?f.labelSize:0,j=M+W;j>0&&(D?(T-=j,_==3?(Q+=j,o=!0):r=!0):(w-=j,_==0?(K+=j,t=!0):s=!0))}}),_l[0]=t,_l[1]=r,_l[2]=s,_l[3]=o,T-=dl[1]+dl[3],Q+=dl[3],w-=dl[2]+dl[0],K+=dl[0]}function kt(){let t=Q+T,s=K+w,r=Q,o=K;function f(h,_){switch(h){case 1:return t+=_,t-_;case 2:return s+=_,s-_;case 3:return r-=_,r+_;case 0:return o-=_,o+_}}H.forEach((h,_)=>{if(h.show&&h._show){let M=h.side;h._pos=f(M,h._size),h.label!=null&&(h._lpos=f(M,h.labelSize))}})}if(U.dataIdx==null){let t=U.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=me(t.prox),o=t.bias??=0;U.dataIdx=(f,h,_,M)=>{if(h==0)return _;let D=_,W=r(f,h,_,M)??Re,j=W>=0&&W<Re,J=S.ori==0?T:w,ce=U.left,ke=l[0],Se=l[h];if(s.has(Se[_])){D=null;let he=null,oe=null,ne;if(o==0||o==-1)for(ne=_;he==null&&ne-- >0;)s.has(Se[ne])||(he=ne);if(o==0||o==1)for(ne=_;oe==null&&ne++<Se.length;)s.has(Se[ne])||(oe=ne);if(he!=null||oe!=null)if(j){let Ve=he==null?-1/0:A(ke[he],S,J,0),Ke=oe==null?1/0:A(ke[oe],S,J,0),dt=ce-Ve,Ce=Ke-ce;dt<=Ce?dt<=W&&(D=he):Ce<=W&&(D=oe)}else D=oe==null?he:he==null?oe:_-he<=oe-_?he:oe}else j&&lt(ce-A(ke[_],S,J,0))>W&&(D=null);return D}}const _t=t=>{U.event=t};U.idxs=pe,U._lock=!1;let Qe=U.points;Qe.show=me(Qe.show),Qe.size=me(Qe.size),Qe.stroke=me(Qe.stroke),Qe.width=me(Qe.width),Qe.fill=me(Qe.fill);const Dt=n.focus=$e({},e.focus||{alpha:.3},U.focus),ol=Dt.prox>=0,ul=ol&&Qe.one;let Lt=[],cl=[],fl=[];function bn(t,s){let r=Qe.show(n,s);if(r instanceof HTMLElement)return Nt(r,co),Nt(r,t.class),nl(r,-10,-10,T,w),V.insertBefore(r,Lt[s]),r}function Sn(t,s){if(a==1||s>0){let r=a==1&&E[t.scale].time,o=t.value;t.value=r?Zi(o)?na(se,la(o,B)):o||ae:o||Tu,t.label=t.label||(r?mu:gu)}if(ul||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Gu||Do,t.fillTo=me(t.fillTo||Lu),t.pxAlign=+ye(t.pxAlign,R),t.pxRound=da(t.pxAlign),t.stroke=me(t.stroke||null),t.fill=me(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Mu(At(1,t.width),1),o=t.points=$e({},{size:r,width:At(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=me(o.show),o.filter=me(o.filter),o.fill=me(o.fill),o.stroke=me(o.stroke),o.paths=me(o.paths),o.pxAlign=t.pxAlign}if(be){let r=Rt(t,s);we.splice(s,0,r[0]),Ye.splice(s,0,r[1]),re.values.push(null)}if(De){pe.splice(s,0,null);let r=null;ul?s==0&&(r=bn(t,s)):s>0&&(r=bn(t,s)),Lt.splice(s,0,r),cl.splice(s,0,0),fl.splice(s,0,0)}ft("addSeries",s)}function Xn(t,s){s=s??k.length,t=a==1?Gs(t,s,ia,ca):Gs(t,s,{},ua),k.splice(s,0,t),Sn(k[s],s)}n.addSeries=Xn;function cr(t){if(k.splice(t,1),be){re.values.splice(t,1),Ye.splice(t,1);let s=we.splice(t,1)[0];Y(null,s.firstChild),s.remove()}De&&(pe.splice(t,1),Lt.splice(t,1)[0].remove(),cl.splice(t,1),fl.splice(t,1)),ft("delSeries",t)}n.delSeries=cr;const _l=[!1,!1,!1,!1];function fr(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=E[t.scale];o==null&&(t.scale=r?k[1].scale:O,o=E[t.scale]);let f=o.time;t.size=me(t.size),t.space=me(t.space),t.rotate=me(t.rotate),ml(t.incrs)&&t.incrs.forEach(_=>{!wl.has(_)&&wl.set(_,Ca(_))}),t.incrs=me(t.incrs||(o.distr==2?Qo:f?Z==1?$o:lu:kl)),t.splits=me(t.splits||(f&&o.distr==1?Pe:o.distr==3?zs:o.distr==4?xu:_u)),t.stroke=me(t.stroke),t.grid.stroke=me(t.grid.stroke),t.ticks.stroke=me(t.ticks.stroke),t.border.stroke=me(t.border.stroke);let h=t.values;t.values=ml(h)&&!ml(h[0])?me(h):f?ml(h)?ta(se,ea(h,B)):Zi(h)?iu(se,h):h||de:h||wu,t.filter=me(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Da)),t.font=ga(t.font),t.labelFont=ga(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(_l[s]=!0,t._el=Bt(ao,m))}}function $l(t,s,r,o){let[f,h,_,M]=r,D=s%2,W=0;return D==0&&(M||h)&&(W=s==0&&!f||s==2&&!_?et(sa.size/3):0),D==1&&(f||_)&&(W=s==1&&!h||s==3&&!M?et(ra.size/2):0),W}const li=n.padding=(e.padding||[$l,$l,$l,$l]).map(t=>me(ye(t,$l))),dl=n._padding=li.map((t,s)=>t(n,s,_l,0));let vt,rt=null,ot=null;const yn=a==1?k[0].idxs:null;let jt=null,en=!1;function ni(t,s){if(l=t??[],n.data=n._data=l,a==2){vt=0;for(let r=1;r<k.length;r++)vt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),jt=l[0],vt=jt.length;let r=l;if(ee==2){r=l.slice();let o=r[0]=Array(vt);for(let f=0;f<vt;f++)o[f]=f}n._data=l=r}if(Fl(!0),ft("setData"),ee==2&&(Ht=!0),s!==!1){let r=S;r.auto(n,en)?$n():hl(O,r.min,r.max),at=at||U.left>=0,wt=!0,zl()}}n.setData=ni;function $n(){en=!0;let t,s;a==1&&(vt>0?(rt=yn[0]=0,ot=yn[1]=vt-1,t=l[0][rt],s=l[0][ot],ee==2?(t=rt,s=ot):t==s&&(ee==3?[t,s]=Un(t,t,S.log,!1):ee==4?[t,s]=Ys(t,t,S.log,!1):S.time?s=t+et(86400/Z):[t,s]=Vn(t,s,js,!0))):(rt=yn[0]=t=null,ot=yn[1]=s=null)),hl(O,t,s)}let kn,Rl,es,ts,ls,ns,ss,is,as,Ct;function si(t,s,r,o,f,h){t??=Ri,r??=Ks,o??="butt",f??=Ri,h??="round",t!=kn&&(g.strokeStyle=kn=t),f!=Rl&&(g.fillStyle=Rl=f),s!=es&&(g.lineWidth=es=s),h!=ls&&(g.lineJoin=ls=h),o!=ns&&(g.lineCap=ns=o),r!=ts&&g.setLineDash(ts=r)}function ii(t,s,r,o){s!=Rl&&(g.fillStyle=Rl=s),t!=ss&&(g.font=ss=t),r!=is&&(g.textAlign=is=r),o!=as&&(g.textBaseline=as=o)}function rs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,en)&&(s==null||s.min==null)){let h=ye(rt,0),_=ye(ot,o.length-1),M=r.min==null?yo(o,h,_,f,t.distr==3):[r.min,r.max];t.min=Qt(t.min,r.min=M[0]),t.max=At(t.max,r.max=M[1])}}const ai={min:null,max:null};function dr(){for(let o in E){let f=E[o];I[o]==null&&(f.min==null||I[O]!=null&&f.auto(n,en))&&(I[o]=ai)}for(let o in E){let f=E[o];I[o]==null&&f.from!=null&&I[f.from]!=null&&(I[o]=ai)}I[O]!=null&&Fl(!0);let t={};for(let o in I){let f=I[o];if(f!=null){let h=t[o]=Kl(E[o],Po);if(f.min!=null)$e(h,f);else if(o!=O||a==2)if(vt==0&&h.from==null){let _=h.range(n,null,null,o);h.min=_[0],h.max=_[1]}else h.min=Re,h.max=-Re}}if(vt>0){k.forEach((o,f)=>{if(a==1){let h=o.scale,_=I[h];if(_==null)return;let M=t[h];if(f==0){let D=M.range(n,M.min,M.max,h);M.min=D[0],M.max=D[1],rt=Zt(M.min,l[0]),ot=Zt(M.max,l[0]),ot-rt>1&&(l[0][rt]<M.min&&rt++,l[0][ot]>M.max&&ot--),o.min=jt[rt],o.max=jt[ot]}else o.show&&o.auto&&rs(M,_,o,l[f],o.sorted);o.idxs[0]=rt,o.idxs[1]=ot}else if(f>0&&o.show&&o.auto){let[h,_]=o.facets,M=h.scale,D=_.scale,[W,j]=l[f],J=t[M],ce=t[D];J!=null&&rs(J,I[M],h,W,h.sorted),ce!=null&&rs(ce,I[D],_,j,_.sorted),o.min=_.min,o.max=_.max}});for(let o in t){let f=t[o],h=I[o];if(f.from==null&&(h==null||h.min==null)){let _=f.range(n,f.min==Re?null:f.min,f.max==-Re?null:f.max,o);f.min=_[0],f.max=_[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let _=f.range(n,h.min,h.max,o);f.min=_[0],f.max=_[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=E[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let _=h.distr;h._min=_==3?al(h.min):_==4?ks(h.min,h.asinh):_==100?h.fwd(h.min):h.min,h._max=_==3?al(h.max):_==4?ks(h.max,h.asinh):_==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){k.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Ht=!0,ft("setScale",o);De&&U.left>=0&&(at=wt=!0)}for(let o in I)I[o]=null}function pr(t){let s=Fs(rt-1,0,vt-1),r=Fs(ot+1,0,vt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<vt-1;)r++;return[s,r]}function hr(){if(vt>0){let t=k.some(s=>s._focus)&&Ct!=Dt.alpha;t&&(g.globalAlpha=Ct=Dt.alpha),k.forEach((s,r)=>{if(r>0&&s.show&&(ri(r,!1),ri(r,!0),s._paths==null)){let o=Ct;Ct!=s.alpha&&(g.globalAlpha=Ct=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Ct!=o&&(g.globalAlpha=Ct=o)}}),k.forEach((s,r)=>{if(r>0&&s.show){let o=Ct;Ct!=s.alpha&&(g.globalAlpha=Ct=s.alpha),s._paths!=null&&oi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,rt,ot,f),_=s.points.filter(n,r,h,f);(h||_)&&(s.points._paths=s.points.paths(n,r,rt,ot,_),oi(r,!0))}Ct!=o&&(g.globalAlpha=Ct=o),ft("drawSeries",r)}}),t&&(g.globalAlpha=Ct=1)}}function ri(t,s){let r=s?k[t].points:k[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function oi(t,s){let r=s?k[t].points:k[t],{stroke:o,fill:f,clip:h,flags:_,_stroke:M=r._stroke,_fill:D=r._fill,_width:W=r.width}=r._paths;W=Fe(W*Te,3);let j=null,J=W%2/2;s&&D==null&&(D=W>0?"#fff":M);let ce=r.pxAlign==1&&J>0;if(ce&&g.translate(J,J),!s){let ke=je-W/2,Se=pt-W/2,he=qe+W,oe=ht+W;j=new Path2D,j.rect(ke,Se,he,oe)}s?os(M,W,r.dash,r.cap,D,o,f,_,h):vr(t,M,W,r.dash,r.cap,D,o,f,_,j,h),ce&&g.translate(-J,-J)}function vr(t,s,r,o,f,h,_,M,D,W,j){let J=!1;D!=0&&ie.forEach((ce,ke)=>{if(ce.series[0]==t){let Se=k[ce.series[1]],he=l[ce.series[1]],oe=(Se._paths||vn).band;ml(oe)&&(oe=ce.dir==1?oe[0]:oe[1]);let ne,Ve=null;Se.show&&oe&&To(he,rt,ot)?(Ve=ce.fill(n,ke)||h,ne=Se._paths.clip):oe=null,os(s,r,o,f,Ve,_,M,D,W,j,ne,oe),J=!0}}),J||os(s,r,o,f,h,_,M,D,W,j)}const ui=Jl|Ns;function os(t,s,r,o,f,h,_,M,D,W,j,J){si(t,s,r,o,f),(D||W||J)&&(g.save(),D&&g.clip(D),W&&g.clip(W)),J?(M&ui)==ui?(g.clip(J),j&&g.clip(j),Mn(f,_),Tn(t,h,s)):M&Ns?(Mn(f,_),g.clip(J),Tn(t,h,s)):M&Jl&&(g.save(),g.clip(J),j&&g.clip(j),Mn(f,_),g.restore(),Tn(t,h,s)):(Mn(f,_),Tn(t,h,s)),(D||W||J)&&g.restore()}function Tn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=kn=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Mn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Rl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let f=H[t],h;if(o<=0)h=[0,0];else{let _=f._space=f.space(n,t,s,r,o),M=f._incrs=f.incrs(n,t,s,r,o,_);h=ju(s,r,M,o,_)}return f._found=h}function us(t,s,r,o,f,h,_,M,D,W){let j=_%2/2;R==1&&g.translate(j,j),si(M,_,D,W,M),g.beginPath();let J,ce,ke,Se,he=f+(o==0||o==3?-h:h);r==0?(ce=f,Se=he):(J=f,ke=he);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?J=ke=t[oe]:ce=Se=t[oe],g.moveTo(J,ce),g.lineTo(ke,Se));g.stroke(),R==1&&g.translate(-j,-j)}function mr(t){let s=!0;return H.forEach((r,o)=>{if(!r.show)return;let f=E[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Fl(!1));return}else r._show||(s=!1,r._show=!0,Fl(!1));let h=r.side,_=h%2,{min:M,max:D}=f,[W,j]=gr(o,M,D,_==0?T:w);if(j==0)return;let J=f.distr==2,ce=r._splits=r.splits(n,o,M,D,W,j,J),ke=f.distr==2?ce.map(ne=>jt[ne]):ce,Se=f.distr==2?jt[ce[1]]-jt[ce[0]]:W,he=r._values=r.values(n,r.filter(n,ke,o,j,Se),o,j,Se);r._rotate=h==2?r.rotate(n,he,o,j):0;let oe=r._size;r._size=Ut(r.size(n,he,o,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function wr(t){let s=!0;return li.forEach((r,o)=>{let f=r(n,o,_l,t);f!=dl[o]&&(s=!1),dl[o]=f}),s}function _r(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,_=s.stroke(n,t),M=r==0||r==3?-1:1,[D,W]=s._found;if(s.label!=null){let Mt=s.labelGap*M,Ot=et((s._lpos+Mt)*Te);ii(s.labelFont[0],_,"center",r==2?on:Pi),g.save(),o==1?(f=h=0,g.translate(Ot,et(pt+ht/2)),g.rotate((r==3?-zn:zn)/2)):(f=et(je+qe/2),h=Ot);let Sl=Ea(s.label)?s.label(n,t,D,W):s.label;g.fillText(Sl,f,h),g.restore()}if(W==0)continue;let j=E[s.scale],J=o==0?qe:ht,ce=o==0?je:pt,ke=s._splits,Se=j.distr==2?ke.map(Mt=>jt[Mt]):ke,he=j.distr==2?jt[ke[1]]-jt[ke[0]]:D,oe=s.ticks,ne=s.border,Ve=oe.show?oe.size:0,Ke=et(Ve*Te),dt=et((s.alignTo==2?s._size-Ve-s.gap:s.gap)*Te),Ce=s._rotate*-zn/180,Je=P(s._pos*Te),Ft=(Ke+dt)*M,Tt=Je+Ft;h=o==0?Tt:0,f=o==1?Tt:0;let It=s.font[0],qt=s.align==1?Bl:s.align==2?bs:Ce>0?Bl:Ce<0?bs:o==0?"center":r==3?bs:Bl,tl=Ce||o==1?"middle":r==2?on:Pi;ii(It,_,qt,tl);let zt=s.font[1]*s.lineGap,Wt=ke.map(Mt=>P(p(Mt,j,J,ce))),Kt=s._values;for(let Mt=0;Mt<Kt.length;Mt++){let Ot=Kt[Mt];if(Ot!=null){o==0?f=Wt[Mt]:h=Wt[Mt],Ot=""+Ot;let Sl=Ot.indexOf(`
`)==-1?[Ot]:Ot.split(/\n/gm);for(let Et=0;Et<Sl.length;Et++){let Ai=Sl[Et];Ce?(g.save(),g.translate(f,h+Et*zt),g.rotate(Ce),g.fillText(Ai,0,0),g.restore()):g.fillText(Ai,f,h+Et*zt)}}}oe.show&&us(Wt,oe.filter(n,Se,t,W,he),o,r,Je,Ke,Fe(oe.width*Te,3),oe.stroke(n,t),oe.dash,oe.cap);let ll=s.grid;ll.show&&us(Wt,ll.filter(n,Se,t,W,he),o,o==0?2:1,o==0?pt:je,o==0?ht:qe,Fe(ll.width*Te,3),ll.stroke(n,t),ll.dash,ll.cap),ne.show&&us([Je],[1],o==0?1:0,o==0?1:2,o==1?pt:je,o==1?ht:qe,Fe(ne.width*Te,3),ne.stroke(n,t),ne.dash,ne.cap)}ft("drawAxes")}function Fl(t){k.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let En=!1,cs=!1,tn=[];function xr(){cs=!1;for(let t=0;t<tn.length;t++)ft(...tn[t]);tn.length=0}function zl(){En||(Go(ci),En=!0)}function br(t,s=!1){En=!0,cs=s,t(n),ci(),s&&tn.length>0&&queueMicrotask(xr)}n.batch=br;function ci(){if(sl&&(dr(),sl=!1),Ht&&(xn(),Ht=!1),Yt){if(Ge(G,Bl,Q),Ge(G,on,K),Ge(G,fn,T),Ge(G,dn,w),Ge(V,Bl,Q),Ge(V,on,K),Ge(V,fn,T),Ge(V,dn,w),Ge(m,fn,y),Ge(m,dn,C),x.width=et(y*Te),x.height=et(C*Te),H.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,_=f%2==1;Ge(t,_?"left":"top",o-h),Ge(t,_?"width":"height",r),Ge(t,_?"top":"left",_?K:Q),Ge(t,_?"height":"width",_?w:T),Ps(t,Tl)}else Nt(t,Tl)}),kn=Rl=es=ls=ns=ss=is=as=ts=null,Ct=1,sn(!0),Q!=te||K!=_e||T!=ge||w!=We){Fl(!1);let t=T/ge,s=w/We;if(De&&!at&&U.left>=0){U.left*=t,U.top*=s,Ol&&nl(Ol,et(U.left),0,T,w),Nl&&nl(Nl,0,et(U.top),T,w);for(let r=0;r<Lt.length;r++){let o=Lt[r];o!=null&&(cl[r]*=t,fl[r]*=s,nl(o,Ut(cl[r]),Ut(fl[r]),T,w))}}if(Ne.show&&!Cl&&Ne.left>=0&&Ne.width>0){Ne.left*=t,Ne.width*=t,Ne.top*=s,Ne.height*=s;for(let r in gs)Ge(Hl,r,Ne[r])}te=Q,_e=K,ge=T,We=w}ft("setSize"),Yt=!1}y>0&&C>0&&(g.clearRect(0,0,x.width,x.height),ft("drawClear"),le.forEach(t=>t()),ft("draw")),Ne.show&&Cl&&(An(Ne),Cl=!1),De&&at&&(bl(null,!0,!1),at=!1),re.show&&re.live&&wt&&(hs(),wt=!1),d||(d=!0,n.status=1,ft("ready")),en=!1,En=!1}n.redraw=(t,s)=>{Ht=s||!1,t!==!1?hl(O,S.min,S.max):zl()};function fs(t,s){let r=E[t];if(r.from==null){if(vt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(vt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==O&&r.distr==2&&vt>0&&(s.min=Zt(s.min,l[0]),s.max=Zt(s.max,l[0]),s.min==s.max&&s.max++),I[t]=s,sl=!0,zl()}}n.setScale=fs;let ds,ps,Ol,Nl,fi,di,Vl,Gl,pi,hi,Oe,Be,pl=!1;const gt=U.drag;let ut=gt.x,ct=gt.y;De&&(U.x&&(ds=Bt(oo,V)),U.y&&(ps=Bt(uo,V)),S.ori==0?(Ol=ds,Nl=ps):(Ol=ps,Nl=ds),Oe=U.left,Be=U.top);const Ne=n.select=$e({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Hl=Ne.show?Bt(ro,Ne.over?V:G):null;function An(t,s){if(Ne.show){for(let r in t)Ne[r]=t[r],r in gs&&Ge(Hl,r,t[r]);s!==!1&&ft("setSelect")}}n.setSelect=An;function Sr(t){if(k[t].show)be&&Ps(we[t],Tl);else if(be&&Nt(we[t],Tl),De){let r=ul?Lt[0]:Lt[t];r!=null&&nl(r,-10,-10,T,w)}}function hl(t,s,r){fs(t,{min:s,max:r})}function $t(t,s,r,o){s.focus!=null&&Er(t),s.show!=null&&k.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,Sr(h),a==2?(hl(f.facets[0].scale,null,null),hl(f.facets[1].scale,null,null)):hl(f.scale,null,null),zl())}),r!==!1&&ft("setSeries",t,s),o&&an("setSeries",n,t,s)}n.setSeries=$t;function yr(t,s){$e(ie[t],s)}function kr(t,s){t.fill=me(t.fill||null),t.dir=ye(t.dir,-1),s=s??ie.length,ie.splice(s,0,t)}function Tr(t){t==null?ie.length=0:ie.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Mr(t,s){k[t].alpha=s,De&&Lt[t]!=null&&(Lt[t].style.opacity=s),be&&we[t]&&(we[t].style.opacity=s)}let il,vl,xl;const Il={focus:!0};function Er(t){if(t!=xl){let s=t==null,r=Dt.alpha!=1;k.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Mr(f,h?1:Dt.alpha)}}),xl=t,r&&zl()}}be&&ol&&Ze(Oi,fe,t=>{U._lock||(_t(t),xl!=null&&$t(null,Il,!0,Xe.setSeries))});function el(t,s,r){let o=E[s];r&&(t=t/Te-(o.ori==1?K:Q));let f=T;o.ori==1&&(f=w,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,_=o._max,M=t/f,D=h+(_-h)*M,W=o.distr;return W==3?jl(10,D):W==4?Eo(D,o.asinh):W==100?o.bwd(D):D}function Ar(t,s){let r=el(t,O,s);return Zt(r,l[0],rt,ot)}n.valToIdx=t=>Zt(t,l[0]),n.posToIdx=Ar,n.posToVal=el,n.valToPos=(t,s,r)=>E[s].ori==0?c(t,E[s],r?qe:T,r?je:0):u(t,E[s],r?ht:w,r?pt:0),n.setCursor=(t,s,r)=>{Oe=t.left,Be=t.top,bl(null,s,r)};function vi(t,s){Ge(Hl,Bl,Ne.left=t),Ge(Hl,fn,Ne.width=s)}function gi(t,s){Ge(Hl,on,Ne.top=t),Ge(Hl,dn,Ne.height=s)}let ln=S.ori==0?vi:gi,nn=S.ori==1?vi:gi;function Dr(){if(be&&re.live)for(let t=a==2?1:0;t<k.length;t++){if(t==0&&ue)continue;let s=re.values[t],r=0;for(let o in s)Ye[t][r++].firstChild.nodeValue=s[o]}}function hs(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{pe[o]=r}):Co(t.idx)||pe.fill(t.idx),re.idx=pe[0]),be&&re.live){for(let r=0;r<k.length;r++)(r>0||a==1&&!ue)&&Lr(r,pe[r]);Dr()}wt=!1,s!==!1&&ft("setLegend")}n.setLegend=hs;function Lr(t,s){let r=k[t],o=t==0&&ee==2?jt:l[t],f;ue?f=r.values(n,t,s)??Ie:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?Ie:{_:f}),re.values[t]=f}function bl(t,s,r){pi=Oe,hi=Be,[Oe,Be]=U.move(n,Oe,Be),U.left=Oe,U.top=Be,De&&(Ol&&nl(Ol,et(Oe),0,T,w),Nl&&nl(Nl,0,et(Be),T,w));let o,f=rt>ot;il=Re,vl=null;let h=S.ori==0?T:w,_=S.ori==1?T:w;if(Oe<0||vt==0||f){o=U.idx=null;for(let M=0;M<k.length;M++){let D=Lt[M];D!=null&&nl(D,-10,-10,T,w)}ol&&$t(null,Il,!0,t==null&&Xe.setSeries),re.live&&(pe.fill(o),wt=!0)}else{let M,D,W;a==1&&(M=S.ori==0?Oe:Be,D=el(M,O),o=U.idx=Zt(D,l[0],rt,ot),W=A(l[0][o],S,h,0));let j=-10,J=-10,ce=0,ke=0,Se=!0,he="",oe="";for(let ne=a==2?1:0;ne<k.length;ne++){let Ve=k[ne],Ke=pe[ne],dt=Ke==null?null:a==1?l[ne][Ke]:l[ne][1][Ke],Ce=U.dataIdx(n,ne,o,D),Je=Ce==null?null:a==1?l[ne][Ce]:l[ne][1][Ce];if(wt=wt||Je!=dt||Ce!=Ke,pe[ne]=Ce,ne>0&&Ve.show){let Ft=Ce==null?-10:Ce==o?W:A(a==1?l[0][Ce]:l[ne][0][Ce],S,h,0),Tt=Je==null?-10:q(Je,a==1?E[Ve.scale]:E[Ve.facets[1].scale],_,0);if(ol&&Je!=null){let It=S.ori==1?Oe:Be,qt=lt(Dt.dist(n,ne,Ce,Tt,It));if(qt<il){let tl=Dt.bias;if(tl!=0){let zt=el(It,Ve.scale),Wt=Je>=0?1:-1,Kt=zt>=0?1:-1;Kt==Wt&&(Kt==1?tl==1?Je>=zt:Je<=zt:tl==1?Je<=zt:Je>=zt)&&(il=qt,vl=ne)}else il=qt,vl=ne}}if(wt||ul){let It,qt;S.ori==0?(It=Ft,qt=Tt):(It=Tt,qt=Ft);let tl,zt,Wt,Kt,ll,Mt,Ot=!0,Sl=Qe.bbox;if(Sl!=null){Ot=!1;let Et=Sl(n,ne);Wt=Et.left,Kt=Et.top,tl=Et.width,zt=Et.height}else Wt=It,Kt=qt,tl=zt=Qe.size(n,ne);if(Mt=Qe.fill(n,ne),ll=Qe.stroke(n,ne),ul)ne==vl&&il<=Dt.prox&&(j=Wt,J=Kt,ce=tl,ke=zt,Se=Ot,he=Mt,oe=ll);else{let Et=Lt[ne];Et!=null&&(cl[ne]=Wt,fl[ne]=Kt,Bi(Et,tl,zt,Ot),Ii(Et,Mt,ll),nl(Et,Ut(Wt),Ut(Kt),T,w))}}}}if(ul){let ne=Dt.prox,Ve=xl==null?il<=ne:il>ne||vl!=xl;if(wt||Ve){let Ke=Lt[0];Ke!=null&&(cl[0]=j,fl[0]=J,Bi(Ke,ce,ke,Se),Ii(Ke,he,oe),nl(Ke,Ut(j),Ut(J),T,w))}}}if(Ne.show&&pl)if(t!=null){let[M,D]=Xe.scales,[W,j]=Xe.match,[J,ce]=t.cursor.sync.scales,ke=t.cursor.drag;if(ut=ke._x,ct=ke._y,ut||ct){let{left:Se,top:he,width:oe,height:ne}=t.select,Ve=t.scales[J].ori,Ke=t.posToVal,dt,Ce,Je,Ft,Tt,It=M!=null&&W(M,J),qt=D!=null&&j(D,ce);It&&ut?(Ve==0?(dt=Se,Ce=oe):(dt=he,Ce=ne),Je=E[M],Ft=A(Ke(dt,J),Je,h,0),Tt=A(Ke(dt+Ce,J),Je,h,0),ln(Qt(Ft,Tt),lt(Tt-Ft))):ln(0,h),qt&&ct?(Ve==1?(dt=Se,Ce=oe):(dt=he,Ce=ne),Je=E[D],Ft=q(Ke(dt,ce),Je,_,0),Tt=q(Ke(dt+Ce,ce),Je,_,0),nn(Qt(Ft,Tt),lt(Tt-Ft))):nn(0,_)}else ms()}else{let M=lt(pi-fi),D=lt(hi-di);if(S.ori==1){let ce=M;M=D,D=ce}ut=gt.x&&M>=gt.dist,ct=gt.y&&D>=gt.dist;let W=gt.uni;W!=null?ut&&ct&&(ut=M>=W,ct=D>=W,!ut&&!ct&&(D>M?ct=!0:ut=!0)):gt.x&&gt.y&&(ut||ct)&&(ut=ct=!0);let j,J;ut&&(S.ori==0?(j=Vl,J=Oe):(j=Gl,J=Be),ln(Qt(j,J),lt(J-j)),ct||nn(0,_)),ct&&(S.ori==1?(j=Vl,J=Oe):(j=Gl,J=Be),nn(Qt(j,J),lt(J-j)),ut||ln(0,h)),!ut&&!ct&&(ln(0,0),nn(0,0))}if(gt._x=ut,gt._y=ct,t==null){if(r){if(Ei!=null){let[M,D]=Xe.scales;Xe.values[0]=M!=null?el(S.ori==0?Oe:Be,M):null,Xe.values[1]=D!=null?el(S.ori==1?Oe:Be,D):null}an(Ss,n,Oe,Be,T,w,o)}if(ol){let M=r&&Xe.setSeries,D=Dt.prox;xl==null?il<=D&&$t(vl,Il,!0,M):il>D?$t(null,Il,!0,M):vl!=xl&&$t(vl,Il,!0,M)}}wt&&(re.idx=o,hs()),s!==!1&&ft("setCursor")}let gl=null;Object.defineProperty(n,"rect",{get(){return gl==null&&sn(!1),gl}});function sn(t=!1){t?gl=null:(gl=V.getBoundingClientRect(),ft("syncRect",gl))}function mi(t,s,r,o,f,h,_){U._lock||pl&&t!=null&&t.movementX==0&&t.movementY==0||(vs(t,s,r,o,f,h,_,!1,t!=null),t!=null?bl(null,!0,!0):bl(s,!0,!1))}function vs(t,s,r,o,f,h,_,M,D){if(gl==null&&sn(!1),_t(t),t!=null)r=t.clientX-gl.left,o=t.clientY-gl.top;else{if(r<0||o<0){Oe=-10,Be=-10;return}let[W,j]=Xe.scales,J=s.cursor.sync,[ce,ke]=J.values,[Se,he]=J.scales,[oe,ne]=Xe.match,Ve=s.axes[0].side%2==1,Ke=S.ori==0?T:w,dt=S.ori==1?T:w,Ce=Ve?h:f,Je=Ve?f:h,Ft=Ve?o:r,Tt=Ve?r:o;if(Se!=null?r=oe(W,Se)?p(ce,E[W],Ke,0):-10:r=Ke*(Ft/Ce),he!=null?o=ne(j,he)?p(ke,E[j],dt,0):-10:o=dt*(Tt/Je),S.ori==1){let It=r;r=o,o=It}}D&&(s==null||s.cursor.event.type==Ss)&&((r<=1||r>=T-1)&&(r=yl(r,T)),(o<=1||o>=w-1)&&(o=yl(o,w))),M?(fi=r,di=o,[Vl,Gl]=U.move(n,r,o)):(Oe=r,Be=o)}const gs={width:0,height:0,left:0,top:0};function ms(){An(gs,!1)}let wi,_i,xi,bi;function Si(t,s,r,o,f,h,_){pl=!0,ut=ct=gt._x=gt._y=!1,vs(t,s,r,o,f,h,_,!0,!1),t!=null&&(Ze(ys,Ls,yi,!1),an(Fi,n,Vl,Gl,T,w,null));let{left:M,top:D,width:W,height:j}=Ne;wi=M,_i=D,xi=W,bi=j}function yi(t,s,r,o,f,h,_){pl=gt._x=gt._y=!1,vs(t,s,r,o,f,h,_,!1,!0);let{left:M,top:D,width:W,height:j}=Ne,J=W>0||j>0,ce=wi!=M||_i!=D||xi!=W||bi!=j;if(J&&ce&&An(Ne),gt.setScale&&J&&ce){let ke=M,Se=W,he=D,oe=j;if(S.ori==1&&(ke=D,Se=j,he=M,oe=W),ut&&hl(O,el(ke,O),el(ke+Se,O)),ct)for(let ne in E){let Ve=E[ne];ne!=O&&Ve.from==null&&Ve.min!=Re&&hl(ne,el(he+oe,ne),el(he,ne))}ms()}else U.lock&&(U._lock=!U._lock,bl(s,!0,t!=null));t!=null&&(Y(ys,Ls),an(ys,n,Oe,Be,T,w,null))}function Cr(t,s,r,o,f,h,_){if(U._lock)return;_t(t);let M=pl;if(pl){let D=!0,W=!0,j=10,J,ce;S.ori==0?(J=ut,ce=ct):(J=ct,ce=ut),J&&ce&&(D=Oe<=j||Oe>=T-j,W=Be<=j||Be>=w-j),J&&D&&(Oe=Oe<Vl?0:T),ce&&W&&(Be=Be<Gl?0:w),bl(null,!0,!0),pl=!1}Oe=-10,Be=-10,pe.fill(null),bl(null,!0,!0),M&&(pl=M)}function ki(t,s,r,o,f,h,_){U._lock||(_t(t),$n(),ms(),t!=null&&an(Ni,n,Oe,Be,T,w,null))}function Ti(){H.forEach(qu),Pl(n.width,n.height,!0)}Al(Nn,Yl,Ti);const Wl={};Wl.mousedown=Si,Wl.mousemove=mi,Wl.mouseup=yi,Wl.dblclick=ki,Wl.setSeries=(t,s,r,o)=>{let f=Xe.match[2];r=f(n,s,r),r!=-1&&$t(r,o,!0,!1)},De&&(Ze(Fi,V,Si),Ze(Ss,V,mi),Ze(zi,V,t=>{_t(t),sn(!1)}),Ze(Oi,V,Cr),Ze(Ni,V,ki),Vs.add(n),n.syncRect=sn);const Dn=n.hooks=e.hooks||{};function ft(t,s,r){cs?tn.push([t,s,r]):t in Dn&&Dn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Dn[s]=(Dn[s]||[]).concat(t.hooks[s])});const Mi=(t,s,r)=>r,Xe=$e({key:null,setSeries:!1,filters:{pub:Ki,sub:Ki},scales:[O,k[1]?k[1].scale:null],match:[Ji,Ji,Mi],values:[null,null]},U.sync);Xe.match.length==2&&Xe.match.push(Mi),U.sync=Xe;const Ei=Xe.key,ws=Qa(Ei);function an(t,s,r,o,f,h,_){Xe.filters.pub(t,s,r,o,f,h,_)&&ws.pub(t,s,r,o,f,h,_)}ws.sub(n);function Pr(t,s,r,o,f,h,_){Xe.filters.sub(t,s,r,o,f,h,_)&&Wl[t](null,s,r,o,f,h,_)}n.pub=Pr;function Rr(){ws.unsub(n),Vs.delete(n),yt.clear(),Rs(Nn,Yl,Ti),v.remove(),fe?.remove(),ft("destroy")}n.destroy=Rr;function _s(){ft("init",e,l),ni(l||e.data,!1),I[O]?fs(O,I[O]):$n(),Cl=Ne.show&&(Ne.width>0||Ne.height>0),at=wt=!0,Pl(e.width,e.height)}return k.forEach(Sn),H.forEach(fr),i?i instanceof HTMLElement?(i.appendChild(v),_s()):i(n,_s):_s(),n}nt.assign=$e;nt.fmtNum=qs;nt.rangeNum=Vn;nt.rangeLog=Un;nt.rangeAsinh=Ys;nt.orient=Ll;nt.pxRatio=Te;nt.join=Vo;nt.fmtDate=Js,nt.tzDate=Jo;nt.sync=Qa;{nt.addGap=Cu,nt.clipGaps=qn;let e=nt.paths={points:nr};e.linear=ir,e.stepped=Fu,e.bars=zu,e.spline=Nu}const ur="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${ur}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${ur}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=ze('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=ze('<button type="button" class="og-btn svelte-3wi8ix" title="Click to set Original Gravity"><span class="stat-value svelte-3wi8ix"> </span> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),$u=ze('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div></div></div>'),ec=ze('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function tc(e,l){In(l,!0);const i=.5,n=1.2,a=32,c=212;function u(N,z){const S=[...N].sort((I,se)=>I-se),ee=z/100*(S.length-1),A=Math.floor(ee),q=Math.ceil(ee);return A===q?S[A]:S[A]+(S[q]-S[A])*(ee-A)}let p=tt(!1),d=tt(""),v=tt(null),x=Pt(()=>Rn.config.temp_units==="C"),g=Pt(xa),m=Pt(()=>{if(l.readings.length===0)return null;const N=l.readings.filter(ue=>ue.status!=="invalid");if(N.length===0)return null;const z=[...N].sort((ue,Ie)=>new Date(ue.timestamp).getTime()-new Date(Ie.timestamp).getTime()),S=z[0],ee=z[z.length-1],A=z.map(ue=>ue.sg_calibrated??ue.sg_raw).filter(ue=>ue!==null&&ue>=i&&ue<=n),q=z.map(ue=>ue.temp_calibrated??ue.temp_raw).filter(ue=>ue!==null&&ue>=a&&ue<=c);if(A.length===0)return null;const I=A[A.length-1],se=A[0],B=u(A,95),Pe=u(A,5),de=new Date(S.timestamp).getTime(),ae=new Date(ee.timestamp).getTime(),re=(ae-de)/(1e3*60*60*24),U=re>0?(I-se)/re:0;let be=null,De=null,ve=null,fe=null;if(q.length>0){const ue=q[q.length-1],Ie=q.reduce((mt,Rt)=>mt+Rt,0)/q.length,St=u(q,95),it=u(q,5);be=b(x)?cn(ue):ue,De=b(x)?cn(Ie):Ie,ve=b(x)?cn(St):St,fe=b(x)?cn(it):it}let Le=0;const He=.001;for(let ue=A.length-2;ue>=0;ue--)if(Math.abs(A[ue]-I)>He){const Ie=new Date(z[ue+1].timestamp).getTime();Le=(ae-Ie)/(1e3*60*60*24);break}let we=null,Ye=null;const Ue=l.originalGravity;return Ue!==null&&Ue>1&&(we=(Ue-I)/(Ue-1)*100,Ye=(Ue-I)*131.25),{currentSg:I,firstSg:se,highSg:B,lowSg:Pe,currentTemp:be,avgTemp:De,highTemp:ve,lowTemp:fe,fermRate:U,durationDays:re,daysAtCurrentSg:Le,apparentAttenuation:we,abv:Ye}});function G(){Me(d,l.originalGravity?.toFixed(3)??"",!0),Me(p,!0),setTimeout(()=>b(v)?.focus(),0)}function V(){const N=b(d).trim();if(!N)l.onOgChange(null);else{const z=parseFloat(N);!isNaN(z)&&z>=.99&&z<=1.2&&l.onOgChange(z)}Me(p,!1)}function R(N){N.key==="Enter"?V():N.key==="Escape"&&Me(p,!1)}function P(N){return N.toFixed(3)}function Z(N){return`${N>=0?"+":""}${N.toFixed(4)}`}function k(N){return N<1?`${(N*24).toFixed(1)}h`:`${N.toFixed(1)}d`}function H(N){return N===null?"--":N.toFixed(1)}function E(N){return N===null?"--":`${N.toFixed(1)}%`}var ie=ma(),O=Hs(ie);{var $=N=>{var z=$u(),S=F(z),ee=F(S),A=X(F(ee),2),q=X(F(A),2),I=F(q,!0);L(q),L(A);var se=X(A,2),B=X(F(se),2),Pe=F(B,!0);L(B),L(se);var de=X(se,2),ae=X(F(de),2),pe=F(ae,!0);L(ae),L(de);var re=X(de,2),U=X(F(re),2),be=F(U,!0);L(U),L(re),L(ee);var De=X(ee,2),ve=X(F(De),2),fe=X(F(ve),2),Le=F(fe,!0),He=X(Le),we=F(He,!0);L(He),L(fe),L(ve);var Ye=X(ve,2),Ue=X(F(Ye),2),ue=F(Ue,!0),Ie=X(ue),St=F(Ie,!0);L(Ie),L(Ue),L(Ye);var it=X(Ye,2),mt=X(F(it),2),Rt=F(mt,!0),yt=X(Rt),Ze=F(yt,!0);L(yt),L(mt),L(it);var Y=X(it,2),y=X(F(Y),2),C=F(y,!0),T=X(C),w=F(T,!0);L(T),L(y),L(Y),L(De),L(S);var Q=X(S,2),K=F(Q),te=X(F(K),2);let _e;var ge=F(te);L(te),L(K);var We=X(K,2),je=X(F(We),2),pt=F(je,!0);L(je),L(We);var qe=X(We,2),ht=X(F(qe),2),sl=F(ht,!0);L(ht),L(qe);var Yt=X(qe,2),Ht=X(F(Yt),2);{var at=Xt=>{var kt=Qu();ba(kt),kt.__keydown=R,Is(kt,_t=>Me(v,_t),()=>b(v)),wa("blur",kt,V),Sa(kt,()=>b(d),_t=>Me(d,_t)),Ae(Xt,kt)},Cl=Xt=>{var kt=Xu();kt.__click=G;var _t=F(kt),Qe=F(_t,!0);L(_t),Ml(2),L(kt),xt(Dt=>xe(Qe,Dt),[()=>l.originalGravity?P(l.originalGravity):"--"]),Ae(Xt,kt)};bt(Ht,Xt=>{b(p)?Xt(at):Xt(Cl,!1)})}L(Yt);var wt=X(Yt,2),Pl=X(F(wt),2),wn=F(Pl,!0);L(Pl),L(wt);var _n=X(wt,2),xn=X(F(_n),2),Qn=F(xn,!0);L(xn),L(_n),L(Q),L(z),xt((Xt,kt,_t,Qe,Dt,ol,ul,Lt,cl,fl,bn,Sn,Xn)=>{xe(I,Xt),xe(Pe,kt),xe(pe,_t),xe(be,Qe),xe(Le,Dt),xe(we,b(g)),xe(ue,ol),xe(St,b(g)),xe(Rt,ul),xe(Ze,b(g)),xe(C,Lt),xe(w,b(g)),_e=El(te,1,"stat-value rate svelte-3wi8ix",null,_e,{fermenting:b(m).fermRate<0}),xe(ge,`${cl??""}/day`),xe(pt,fl),xe(sl,bn),xe(wn,Sn),xe(Qn,Xn)},[()=>P(b(m).currentSg),()=>P(b(m).firstSg),()=>P(b(m).highSg),()=>P(b(m).lowSg),()=>H(b(m).currentTemp),()=>H(b(m).avgTemp),()=>H(b(m).highTemp),()=>H(b(m).lowTemp),()=>Z(b(m).fermRate),()=>k(b(m).durationDays),()=>k(b(m).daysAtCurrentSg),()=>E(b(m).apparentAttenuation),()=>E(b(m).abv)]),Ae(N,z)},le=N=>{var z=ec();Ae(N,z)};bt(O,N=>{b(m)?N($):N(le,!1)})}Ae(e,ie),Wn()}Hn(["keydown","click"]);var lc=ze('<button type="button"> </button>'),nc=ze("<option> </option>"),sc=ze('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ic=ze('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),ac=ze('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),rc=ze('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function oc(e,l){In(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Pt(()=>Rn.config.smoothing_enabled),c=Pt(()=>Rn.config.smoothing_samples),u=tt("UTC"),p=tt(0),d=tt(3),v=Ds(l,"originalGravity",3,null),x=Pt(()=>Rn.config.temp_units==="C"),g,m=null,G=tt(!0),V=tt(null),R=tt(24),P=tt(Di([])),Z=tt(Di([]));const k={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},H="#facc15",E="rgba(250, 204, 21, 0.3)",ie="#71717a",O="#a1a1aa",$="rgba(255, 255, 255, 0.04)",le="#22d3ee";function N(Y,y,C){const T=new Date(Y*1e3);try{return C?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:y}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:y})}catch(w){return console.warn("Invalid timezone:",y,w),C?T.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):T.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function z(Y,y,C){const T=H,w=k[l.tiltColor]||O;return{width:Y,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(Q,K,te)=>{const _e=(te-K)*.1||.005;return[K-_e,te+_e]}},temp:{auto:!0,range:(Q,K,te)=>{const _e=te-K,ge=10;if(_e<ge){const je=(te+K)/2;return[je-ge/2,je+ge/2]}const We=_e*.1;return[K-We,te+We]}}},axes:[{stroke:ie,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>N(te,C,b(R)<=24))},{scale:"sg",stroke:T,grid:{stroke:$,width:1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>te.toFixed(3)),side:3},{scale:"temp",stroke:w,grid:{show:!1},ticks:{stroke:$,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(Q,K)=>K.map(te=>te.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:T,width:2,fill:(Q,K)=>{const te=Q.ctx.createLinearGradient(0,Q.bbox.top,0,Q.bbox.top+Q.bbox.height);return te.addColorStop(0,E),te.addColorStop(1,"transparent"),te},points:{show:!1},paths:nt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:w,width:1.5,dash:[4,4],points:{show:!1},paths:nt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:le,width:1.5,dash:[2,4],points:{show:!1},paths:nt.paths.spline?.()}]}}function S(Y,y){if(y<=1)return Y;const C=[];for(let T=0;T<Y.length;T++){const w=[],Q=Math.floor(y/2);for(let K=Math.max(0,T-Q);K<=Math.min(Y.length-1,T+Q);K++){const te=Y[K];te!==null&&w.push(te)}w.length>0?C.push(w.reduce((K,te)=>K+te,0)/w.length):C.push(null)}return C}function ee(Y,y,C,T,w){if(Y.length<=w)return[Y,y,C,T];const Q=Math.ceil(Y.length/w),K=[],te=[],_e=[],ge=[];for(let We=0;We<Y.length;We+=Q){const je=Math.min(We+Q,Y.length);let pt=0,qe=0,ht=0,sl=0,Yt=0,Ht=0;for(let at=We;at<je;at++)y[at]!==null&&(pt+=y[at],qe++),C[at]!==null&&(ht+=C[at],sl++),T[at]!==null&&(Yt+=T[at],Ht++);K.push(Y[Math.floor((We+je-1)/2)]),te.push(qe>0?pt/qe:null),_e.push(sl>0?ht/sl:null),ge.push(Ht>0?Yt/Ht:null)}return[K,te,_e,ge]}function A(Y){return!Y.endsWith("Z")&&!Y.match(/[+-]\d{2}:\d{2}$/)&&(Y=Y+"Z"),new Date(Y).getTime()/1e3}function q(Y,y,C){if(Y.length===0||y.length===0)return y.map(()=>null);const T=[...Y].sort((K,te)=>A(K.timestamp)-A(te.timestamp)),w=T.map(K=>A(K.timestamp)),Q=T.map(K=>K.temperature===null?null:C?K.temperature:K.temperature*9/5+32);return y.map(K=>{let te=null,_e=null;for(let ge=0;ge<w.length;ge++)if(w[ge]<=K&&(te={time:w[ge],temp:Q[ge]}),w[ge]>=K&&_e===null){_e={time:w[ge],temp:Q[ge]};break}if(te&&_e&&te.temp!==null&&_e.temp!==null){if(te.time===_e.time)return te.temp;const ge=(K-te.time)/(_e.time-te.time);return te.temp+ge*(_e.temp-te.temp)}return te!==null&&te.temp!==null?te.temp:_e!==null&&_e.temp!==null?_e.temp:null})}function I(Y,y,C){const T=[...Y].reverse();let w=[],Q=[],K=[];for(const ge of T){w.push(A(ge.timestamp)),Q.push(ge.sg_calibrated??ge.sg_raw);const We=ge.temp_calibrated??ge.temp_raw;We!==null?K.push(C?cn(We):We):K.push(null)}let te=q(y,w,C);return b(a)&&b(c)>1&&(Q=S(Q,b(c)),K=S(K,b(c)),te=S(te,b(c))),[w,Q,K,te]=ee(w,Q,K,te,500),[w,Q,K,te]}const se=3e4;async function B(Y=!1){const C=Date.now()-b(p);if(!(!Y&&b(p)>0&&C<se)){Me(G,!0),Me(V,null);try{const[T,w]=await Promise.all([Ju(l.tiltId,b(R)),Zu(b(R)).catch(()=>[])]);Me(P,T,!0),Me(Z,w,!0),Pe()}catch(T){Me(V,T instanceof Error?T.message:"Failed to load data",!0)}finally{Me(p,Date.now(),!0),Me(G,!1)}}}function Pe(){if(!g||b(P).length===0)return;const Y=I(b(P),b(Z),b(x)),y=z(g.clientWidth,b(x),b(u));m&&m.destroy(),m=new nt(y,Y,g)}function de(){m&&g&&m.setSize({width:g.clientWidth,height:220})}let ae=null;function pe(){if(ae&&(clearInterval(ae),ae=null),b(d)>0){const Y=b(d)*60*1e3;ae=setInterval(()=>{b(G)||B(!1)},Y)}}_a(async()=>{const Y=localStorage.getItem(i);if(Y!==null){const y=parseInt(Y,10);Number.isNaN(y)||Me(d,y,!0)}try{const y=await fetch("/api/system/timezone");if(y.ok){const C=await y.json();Me(u,C.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await B(!0),window.addEventListener("resize",de),pe()}),Gr(()=>{m?.destroy(),window.removeEventListener("resize",de),ae&&clearInterval(ae)}),As(()=>{b(x)!==void 0&&b(P).length>0&&g&&Pe()}),As(()=>{b(a),b(c),b(P).length>0&&g&&Pe()});function re(Y){const y=Number(Y.target.value);Me(d,y,!0),localStorage.setItem(i,String(y)),pe(),B(!0)}var U=rc(),be=F(U),De=F(be);gn(De,21,()=>Ku,On,(Y,y)=>{var C=lc();let T;C.__click=()=>{b(R)!==b(y).hours&&(Me(R,b(y).hours,!0),B(!0))};var w=F(C,!0);L(C),xt(()=>{T=El(C,1,"range-btn svelte-1e832qd",null,T,{active:b(R)===b(y).hours}),xe(w,b(y).label)}),Ae(Y,C)}),L(De);var ve=X(De,2),fe=F(ve),Le=X(F(fe),2);Le.__change=re,gn(Le,21,()=>n,On,(Y,y)=>{var C=nc(),T=F(C,!0);L(C);var w={};xt(()=>{xe(T,b(y).label),w!==(w=b(y).value)&&(C.value=(C.__value=b(y).value)??"")}),Ae(Y,C)}),L(Le);var He;Jr(Le),L(fe);var we=X(fe,2),Ye=X(F(we),2),Ue=F(Ye);Ml(2),L(Ye),Ml(2),L(we),L(ve),L(be);var ue=X(be,2),Ie=F(ue);{var St=Y=>{var y=sc();Ae(Y,y)};bt(Ie,Y=>{b(G)&&Y(St)})}var it=X(Ie,2);{var mt=Y=>{var y=ic(),C=X(F(y),2);C.__click=()=>B(!0),L(y),Ae(Y,y)},Rt=Y=>{var y=ma(),C=Hs(y);{var T=w=>{var Q=ac();Ae(w,Q)};bt(C,w=>{b(P).length===0&&w(T)},!0)}Ae(Y,y)};bt(it,Y=>{b(V)?Y(mt):Y(Rt,!1)})}L(ue),Is(ue,Y=>g=Y,()=>g);var yt=X(ue,2);{var Ze=Y=>{{let y=Pt(()=>l.onOgChange??(()=>{}));tc(Y,{get readings(){return b(P)},get originalGravity(){return v()},get onOgChange(){return b(y)}})}};bt(yt,Y=>{b(P).length>0&&Y(Ze)})}L(U),xt(()=>{He!==(He=b(d))&&(Le.value=(Le.__value=b(d))??"",Zr(Le,b(d))),Fn(Ue,`background: ${(k[l.tiltColor]||"var(--text-secondary)")??""};`)}),Ae(e,U),Wn()}Hn(["click","change"]);var uc=ze('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),cc=ze('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),fc=ze('<div class="w-1 rounded-sm transition-all"></div>'),dc=ze('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),pc=ze("<div><!></div>"),hc=ze('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),vc=ze('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function gc(e,l){In(l,!0);let i=Ds(l,"expanded",3,!1),n=Ds(l,"wide",3,!1),a=tt(!1);As(()=>{i()&&!b(a)&&Me(a,!0)});let c=tt(!1),u=tt(""),p=tt(null),d=tt(!1);function v(){Me(u,l.tilt.beer_name,!0),Me(c,!0),setTimeout(()=>b(p)?.focus(),0)}async function x(){if(b(d))return;const y=b(u).trim();if(!y||y===l.tilt.beer_name){Me(c,!1);return}Me(d,!0);const C=await Yr(l.tilt.id,y);Me(d,!1),C&&Me(c,!1)}function g(y){y.key==="Enter"?x():y.key==="Escape"&&Me(c,!1)}async function m(y){await jr(l.tilt.id,y)}let G=Pt(xa);const V={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function R(y){return y.toFixed(3)}function P(y){return Br(y)}function Z(y){return y>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:y>=-60?{bars:3,color:"var(--positive)",label:"Good"}:y>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function k(y){const C=Math.floor((Date.now()-new Date(y).getTime())/1e3);if(C<10)return"just now";if(C<60)return`${C}s ago`;const T=Math.floor(C/60);if(T<60)return`${T}m ago`;const w=Math.floor(T/60);return w<24?`${w}h ago`:`${Math.floor(w/24)}d ago`}let H=Pt(()=>V[l.tilt.color]||"var(--tilt-black)"),E=Pt(()=>Z(l.tilt.rssi)),ie=Pt(()=>k(l.tilt.last_seen));var O=vc();let $;var le=F(O),N=X(le,2),z=F(N),S=F(z),ee=F(S);{var A=y=>{var C=uc();ba(C),C.__keydown=g,Is(C,T=>Me(p,T),()=>b(p)),xt(()=>C.disabled=b(d)),wa("blur",C,x),Sa(C,()=>b(u),T=>Me(u,T)),Ae(y,C)},q=y=>{var C=cc();C.__click=v;var T=F(C),w=F(T,!0);L(T),Ml(2),L(C),xt(()=>xe(w,l.tilt.beer_name)),Ae(y,C)};bt(ee,y=>{b(c)?y(A):y(q,!1)})}var I=X(ee,2),se=F(I),B=X(se,2),Pe=F(B,!0);L(B),L(I),L(S);var de=X(S,2),ae=F(de);gn(ae,20,()=>Array(4),On,(y,C,T)=>{var w=fc();xt(()=>Fn(w,`
								height: ${8+T*4}px;
								background: ${(T<b(E).bars?b(E).color:"var(--bg-hover)")??""};
								opacity: ${T<b(E).bars?1:.4};
							`)),Ae(y,w)}),L(ae);var pe=X(ae,2),re=F(pe);L(pe),L(de),L(z);var U=X(z,2),be=F(U),De=F(be),ve=F(De,!0);L(De),Ml(2),L(be);var fe=X(be,2),Le=F(fe),He=F(Le,!0),we=X(He),Ye=F(we,!0);L(we),L(Le),Ml(2),L(fe),L(U);var Ue=X(U,2);{var ue=y=>{var C=dc(),T=X(F(C),2),w=F(T,!0);L(T);var Q=X(T,4),K=F(Q);L(Q),L(C),xt((te,_e)=>{xe(w,te),xe(K,`${_e??""}${b(G)??""}`)},[()=>R(l.tilt.sg_raw),()=>P(l.tilt.temp_raw)]),Ae(y,C)};bt(Ue,y=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&y(ue)})}var Ie=X(Ue,2);{var St=y=>{var C=pc();let T;var w=F(C);Qr(w,()=>l.tilt.id,Q=>{oc(Q,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:m})}),L(C),xt(()=>T=El(C,1,"chart-section svelte-3twv7v",null,T,{hidden:!i()})),Ae(y,C)};bt(Ie,y=>{b(a)&&y(St)})}var it=X(Ie,2),mt=F(it),Rt=F(mt);L(mt);var yt=X(mt,2),Ze=F(yt);{var Y=y=>{var C=hc();C.__click=function(...Q){l.onToggleExpand?.apply(this,Q)};var T=F(C);let w;L(C),xt(()=>{Li(C,"aria-label",i()?"Collapse chart":"Expand chart"),w=El(T,0,"w-4 h-4 transition-transform",null,w,{"rotate-180":i()})}),Ae(y,C)};bt(Ze,y=>{l.onToggleExpand&&y(Y)})}Ml(2),L(yt),L(it),L(N),L(O),xt((y,C)=>{$=El(O,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,$,{expanded:i(),wide:n()}),Fn(le,`background: ${b(H)??""};`),Fn(se,`background: ${b(H)??""};`),xe(Pe,l.tilt.color),Li(de,"title",`${b(E).label??""} signal (${l.tilt.rssi??""} dBm)`),xe(re,`${l.tilt.rssi??""} dBm`),xe(ve,y),xe(He,C),xe(Ye,b(G)),xe(Rt,`Updated ${b(ie)??""}`)},[()=>R(l.tilt.sg),()=>P(l.tilt.temp)]),Ae(e,O),Wn()}Hn(["keydown","click"]);var mc=ze('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),wc=ze('<div class="alerts-list svelte-1uha8ag"></div>'),_c=ze('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),xc=ze('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),bc=ze('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Sc=ze('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),yc=ze('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),kc=ze("<div></div>"),Tc=ze("<!> <!>",1);function Vc(e,l){In(l,!0);let i=tt(!1),n=tt(!1);_a(()=>{const R=localStorage.getItem("brewsignal_alerts_dismissed"),P=localStorage.getItem("brewsignal_alerts_dismissed_time");return R==="true"&&P&&Date.now()-parseInt(P,10)<360*60*1e3&&Me(i,!0),qr(),()=>{Kr()}});let a=Pt(()=>Array.from(xs.tilts.values())),c=tt(null);function u(R){Me(c,b(c)===R?null:R,!0)}function p(){Me(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function d(){Me(n,!b(n))}var v=Tc();Ur("1uha8ag",R=>{Hr(()=>{Ir.title="Dashboard | BrewSignal"})});var x=Hs(v);{var g=R=>{var P=xc(),Z=F(P),k=F(Z),H=X(F(k),4),E=F(H,!0);L(H),L(k);var ie=X(k,2);ie.__click=p,L(Z);var O=X(Z,2);{var $=z=>{var S=wc();gn(S,21,()=>rn.alerts,On,(ee,A)=>{var q=mc();let I;var se=F(q),B=F(se);L(se);var Pe=X(se,2),de=F(Pe,!0);L(Pe),L(q),xt(()=>{I=El(q,1,"alert-item svelte-1uha8ag",null,I,{warning:b(A).level==="warning",critical:b(A).level==="critical"}),xe(B,`${b(A).day??""}:`),xe(de,b(A).message)}),Ae(ee,q)}),L(S),Ae(z,S)};bt(O,z=>{b(n)||z($)})}var le=X(O,2);{var N=z=>{var S=_c();S.__click=d;var ee=F(S,!0);L(S),xt(()=>xe(ee,b(n)?`Show ${rn.alerts.length} alerts`:"Show less")),Ae(z,S)};bt(le,z=>{rn.alerts.length>3&&z(N)})}L(P),xt(()=>xe(E,rn.alerts.length)),Ae(R,P)};bt(x,R=>{rn.alerts.length>0&&!b(i)&&R(g)})}var m=X(x,2);{var G=R=>{var P=yc(),Z=X(F(P),4),k=F(Z);{var H=$=>{var le=Fr("Waiting for Tilt hydrometers to broadcast...");Ae($,le)},E=$=>{var le=bc();Ae($,le)};bt(k,$=>{xs.connected?$(H):$(E,!1)})}L(Z);var ie=X(Z,2);{var O=$=>{var le=Sc();Ae($,le)};bt(ie,$=>{xs.connected&&$(O)})}L(P),Ae(R,P)},V=R=>{var P=kc();let Z;gn(P,21,()=>b(a),k=>k.id,(k,H)=>{{let E=Pt(()=>b(c)===b(H).id),ie=Pt(()=>b(a).length===1);gc(k,{get tilt(){return b(H)},get expanded(){return b(E)},get wide(){return b(ie)},onToggleExpand:()=>u(b(H).id)})}}),L(P),xt(()=>Z=El(P,1,"tilt-grid svelte-1uha8ag",null,Z,{"single-tilt":b(a).length===1})),Ae(R,P)};bt(m,R=>{b(a).length===0?R(G):R(V,!1)})}Ae(e,v),Wn()}Hn(["click"]);export{Vc as component};
