import{d as Nn,c as ma,a as De,f as Ve,s as _e,g as ga,t as Fr}from"../chunks/lZYuFeLm.js";import{h as zr,k as Or,b4 as Vr,f as Nr,ab as Gn,ak as Vs,g as y,am as At,af as Hn,ah as C,ag as Z,aj as D,ac as Je,al as mt,s as xe,an as Ml,p as Ai,ad as wa,b3 as Gr,ae as Ln,V as Hr,ai as Wr}from"../chunks/KfNDMb7P.js";import{e as wn,i as Fn}from"../chunks/BrMo0dxU.js";import{B as Ir,i as gt}from"../chunks/DN3Nn4_2.js";import{f as dn,c as Cn,g as _a,r as xa,s as Di,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as El}from"../chunks/CMo0SdGN.js";import{u as Yr,c as jr,d as qr,e as Kr,a as ws}from"../chunks/CNF3ZaXk.js";import{w as un}from"../chunks/Dp8S1B6d.js";import{s as Pn}from"../chunks/QJqSGRkr.js";import{b as ba}from"../chunks/DvdFc3xZ.js";import{b as Ns,p as Ms}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){zr&&Or();var n=new Ir(e),a=!Vr();Nr(()=>{var u=l();a&&u!==null&&typeof u=="object"&&(u={}),n.ensure(u,i)})}const Xr=!0,nt="u-",$r="uplot",eo=nt+"hz",to=nt+"vt",lo=nt+"title",no=nt+"wrap",so=nt+"under",io=nt+"over",ao=nt+"axis",Tl=nt+"off",ro=nt+"select",oo=nt+"cursor-x",uo=nt+"cursor-y",co=nt+"cursor-pt",fo=nt+"legend",po=nt+"live",ho=nt+"inline",vo=nt+"series",mo=nt+"marker",Li=nt+"label",go=nt+"value",pn="width",hn="height",cn="top",Ci="bottom",Bl="left",_s="right",Gs="#000",Pi=Gs+"0",xs="mousemove",Ri="mousedown",bs="mouseup",Fi="mouseenter",zi="mouseleave",Oi="dblclick",wo="resize",_o="scroll",Vi="change",zn="dppxchange",Hs="--",Zl=typeof window<"u",Es=Zl?document:null,Yl=Zl?window:null,xo=Zl?navigator:null;let Me,En;function As(){let e=devicePixelRatio;Me!=e&&(Me=e,En&&Ls(Vi,En,As),En=matchMedia(`(min-resolution: ${Me-.001}dppx) and (max-resolution: ${Me+.001}dppx)`),Al(Vi,En,As),Yl.dispatchEvent(new CustomEvent(zn)))}function Ft(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Ds(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function We(e,l,i){e.style[l]=i+"px"}function Zt(e,l,i,n){let a=Es.createElement(e);return l!=null&&Ft(a,l),i?.insertBefore(a,n),a}function It(e,l){return Zt("div",e,l)}const Ni=new WeakMap;function il(e,l,i,n,a){let u="translate("+l+"px,"+i+"px)",c=Ni.get(e);u!=c&&(e.style.transform=u,Ni.set(e,u),l<0||i<0||l>n||i>a?Ft(e,Tl):Ds(e,Tl))}const Gi=new WeakMap;function Hi(e,l,i){let n=l+i,a=Gi.get(e);n!=a&&(Gi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Wi=new WeakMap;function Ii(e,l,i,n){let a=l+""+i,u=Wi.get(e);a!=u&&(Wi.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const Ws={passive:!0},bo={...Ws,capture:!0};function Al(e,l,i,n){l.addEventListener(e,i,n?bo:Ws)}function Ls(e,l,i,n){l.removeEventListener(e,i,Ws)}Zl&&As();function Qt(e,l,i,n){let a;i=i||0,n=n||l.length-1;let u=n<=2147483647;for(;n-i>1;)a=u?i+n>>1:zt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Sa(e){return(i,n,a)=>{let u=-1,c=-1;for(let d=n;d<=a;d++)if(e(i[d])){u=d;break}for(let d=a;d>=n;d--)if(e(i[d])){c=d;break}return[u,c]}}const ya=e=>e!=null,ka=e=>e!=null&&e>0,Wn=Sa(ya),So=Sa(ka);function yo(e,l,i,n=0,a=!1){let u=a?So:Wn,c=a?ka:ya;[l,i]=u(e,l,i);let d=e[l],p=e[l];if(l>-1)if(n==1)d=e[l],p=e[i];else if(n==-1)d=e[i],p=e[l];else for(let h=l;h<=i;h++){let k=e[h];c(k)&&(k<d?d=k:k>p&&(p=k))}return[d??Fe,p??-Fe]}function In(e,l,i,n){let a=Yi(e),u=Yi(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let c=i==10?ol:Ta,d=a==1?zt:Bt,p=u==1?Bt:zt,h=d(c(tt(e))),k=p(c(tt(l))),m=jl(i,h),g=jl(i,k);return i==10&&(h<0&&(m=ze(m,-h)),k<0&&(g=ze(g,-k))),n||i==2?(e=m*a,l=g*u):(e=Da(e,m),l=Bn(l,g)),[e,l]}function Is(e,l,i,n){let a=In(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Bs=.1,Bi={mode:3,pad:Bs},mn={pad:0,soft:null,mode:0},ko={min:mn,max:mn};function On(e,l,i,n){return Un(i)?Ui(e,l,i):(mn.pad=i,mn.soft=n?0:null,mn.mode=n?3:0,Ui(e,l,ko))}function Se(e,l){return e??l}function To(e,l,i){for(l=Se(l,0),i=Se(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function Ui(e,l,i){let n=i.min,a=i.max,u=Se(n.pad,0),c=Se(a.pad,0),d=Se(n.hard,-Fe),p=Se(a.hard,Fe),h=Se(n.soft,Fe),k=Se(a.soft,-Fe),m=Se(n.mode,0),g=Se(a.mode,0),z=l-e,F=ol(z),P=kt(tt(e),tt(l)),R=ol(P),N=tt(R-F);(z<1e-24||N>10)&&(z=0,(e==0||l==0)&&(z=1e-24,m==2&&h!=Fe&&(u=0),g==2&&k!=-Fe&&(c=0)));let T=z||P||1e3,H=ol(T),w=jl(10,zt(H)),K=T*(z==0?e==0?.1:1:u),L=ze(Da(e-K,w/10),24),U=e>=h&&(m==1||m==3&&L<=h||m==2&&L>=h)?h:Fe,G=kt(d,L<U&&e>=U?U:Xt(U,L)),ie=T*(z==0?l==0?.1:1:c),Q=ze(Bn(l+ie,w/10),24),M=l<=k&&(g==1||g==3&&Q>=k||g==2&&Q<=k)?k:-Fe,ne=Xt(p,Q>M&&l<=M?M:kt(M,Q));return G==ne&&G==0&&(ne=100),[G,ne]}const Mo=new Intl.NumberFormat(Zl?xo.language:"en-US"),Us=e=>Mo.format(e),Ot=Math,Rn=Ot.PI,tt=Ot.abs,zt=Ot.floor,et=Ot.round,Bt=Ot.ceil,Xt=Ot.min,kt=Ot.max,jl=Ot.pow,Yi=Ot.sign,ol=Ot.log10,Ta=Ot.log2,Eo=(e,l=1)=>Ot.sinh(e)*l,Ss=(e,l=1)=>Ot.asinh(e/l),Fe=1/0;function ji(e){return(ol((e^e>>31)-(e>>31))|0)+1}function Cs(e,l,i){return Xt(kt(e,l),i)}function Ma(e){return typeof e=="function"}function we(e){return Ma(e)?e:()=>e}const Ao=()=>{},Ea=e=>e,Aa=(e,l)=>l,Do=e=>null,qi=e=>!0,Ki=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,Dl=e=>{if(Ca(e)||wl.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,u]=l.split("e");return+`${Dl(a)}e${u}`}return ze(e,n)};function yl(e,l){return Dl(ze(Dl(e/l))*l)}function Bn(e,l){return Dl(Bt(Dl(e/l))*l)}function Da(e,l){return Dl(zt(Dl(e/l))*l)}function ze(e,l=0){if(Ca(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return et(n)/i}const wl=new Map;function La(e){return((""+e).split(".")[1]||"").length}function _n(e,l,i,n){let a=[],u=n.map(La);for(let c=l;c<i;c++){let d=tt(c),p=ze(jl(e,c),d);for(let h=0;h<n.length;h++){let k=e==10?+`${n[h]}e${c}`:n[h]*p,m=(c>=0?0:d)+(c>=u[h]?0:u[h]),g=e==10?k:ze(k,m);a.push(g),wl.set(g,m)}}return a}const gn={},Ys=[],ql=[null,null],gl=Array.isArray,Ca=Number.isInteger,Co=e=>e===void 0;function Ji(e){return typeof e=="string"}function Un(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Po(e){return e!=null&&typeof e=="object"}const Ro=Object.getPrototypeOf(Uint8Array),Pa="__proto__";function Kl(e,l=Un){let i;if(gl(e)){let n=e.find(a=>a!=null);if(gl(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=Kl(e[a],l)}else i=e.slice()}else if(e instanceof Ro)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Pa&&(i[n]=Kl(e[n],l))}else i=e;return i}function $e(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Pa&&(Un(e[a])?$e(e[a],Kl(n[a])):e[a]=Kl(n[a]))}return e}const Fo=0,zo=1,Oo=2;function Vo(e,l,i){for(let n=0,a,u=-1;n<l.length;n++){let c=l[n];if(c>u){for(a=c-1;a>=0&&e[a]==null;)e[a--]=null;for(a=c+1;a<i&&e[a]==null;)e[u=a++]=null}}}function No(e,l){if(Wo(e)){let c=e[0].slice();for(let d=1;d<e.length;d++)c.push(...e[d].slice(1));return Io(c[0])||(c=Ho(c)),c}let i=new Set;for(let c=0;c<e.length;c++){let p=e[c][0],h=p.length;for(let k=0;k<h;k++)i.add(p[k])}let n=[Array.from(i).sort((c,d)=>c-d)],a=n[0].length,u=new Map;for(let c=0;c<a;c++)u.set(n[0][c],c);for(let c=0;c<e.length;c++){let d=e[c],p=d[0];for(let h=1;h<d.length;h++){let k=d[h],m=Array(a).fill(void 0),g=l?l[c][h]:zo,z=[];for(let F=0;F<k.length;F++){let P=k[F],R=u.get(p[F]);P===null?g!=Fo&&(m[R]=P,g==Oo&&z.push(R)):m[R]=P}Vo(m,z,a),n.push(m)}}return n}const Go=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let u=0;u<n.length;u++)n[u]=u;n.sort((u,c)=>l[u]-l[c]);let a=[];for(let u=0;u<e.length;u++){let c=e[u],d=Array(i);for(let p=0;p<i;p++)d[p]=c[n[p]];a.push(d)}return a}function Wo(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let u=0;u<i;u++)if(a[u]!=l[u])return!1}}return!0}function Io(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const u=kt(1,zt((a-n+1)/l));for(let c=e[n],d=n+u;d<=a;d+=u){const p=e[d];if(p!=null){if(p<=c)return!1;c=p}}return!0}const Ra=["January","February","March","April","May","June","July","August","September","October","November","December"],Fa=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function za(e){return e.slice(0,3)}const Bo=Fa.map(za),Uo=Ra.map(za),Yo={MMMM:Ra,MMM:Uo,WWWW:Fa,WWW:Bo};function fn(e){return(e<10?"0":"")+e}function jo(e){return(e<10?"00":e<100?"0":"")+e}const qo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>fn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>fn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>fn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>fn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>fn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>jo(e.getMilliseconds())};function js(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?qo[a[1]]:a[0]);return u=>{let c="";for(let d=0;d<i.length;d++)c+=typeof i[d]=="string"?i[d]:i[d](u,l);return c}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Oa=e=>e%1==0,Vn=[1,2,2.5,5],Zo=_n(10,-32,0,Vn),Va=_n(10,0,32,Vn),Qo=Va.filter(Oa),kl=Zo.concat(Va),qs=`
`,Na="{YYYY}",Zi=qs+Na,Ga="{M}/{D}",vn=qs+Ga,An=vn+"/{YY}",Ha="{aa}",Xo="{h}:{mm}",Ul=Xo+Ha,Qi=qs+Ul,Xi=":{ss}",Ae=null;function Wa(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,u=a*30,c=a*365,p=(e==1?_n(10,0,3,Vn).filter(Oa):_n(10,-3,0,Vn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,u,u*2,u*3,u*4,u*6,c,c*2,c*5,c*10,c*25,c*50,c*100]);const h=[[c,Na,Ae,Ae,Ae,Ae,Ae,Ae,1],[a*28,"{MMM}",Zi,Ae,Ae,Ae,Ae,Ae,1],[a,Ga,Zi,Ae,Ae,Ae,Ae,Ae,1],[n,"{h}"+Ha,An,Ae,vn,Ae,Ae,Ae,1],[i,Ul,An,Ae,vn,Ae,Ae,Ae,1],[l,Xi,An+" "+Ul,Ae,vn+" "+Ul,Ae,Qi,Ae,1],[e,Xi+".{fff}",An+" "+Ul,Ae,vn+" "+Ul,Ae,Qi,Ae,1]];function k(m){return(g,z,F,P,R,N)=>{let T=[],H=R>=c,w=R>=u&&R<c,K=m(F),L=ze(K*e,3),U=ys(K.getFullYear(),H?0:K.getMonth(),w||H?1:K.getDate()),G=ze(U*e,3);if(w||H){let ie=w?R/u:0,Q=H?R/c:0,M=L==G?L:ze(ys(U.getFullYear()+Q,U.getMonth()+ie,1)*e,3),ne=new Date(et(M/e)),W=ne.getFullYear(),J=ne.getMonth();for(let j=0;M<=P;j++){let ae=ys(W+Q*j,J+ie*j,1),Y=ae-m(ze(ae*e,3));M=ze((+ae+Y)*e,3),M<=P&&T.push(M)}}else{let ie=R>=a?a:R,Q=zt(F)-zt(L),M=G+Q+Bn(L-G,ie);T.push(M);let ne=m(M),W=ne.getHours()+ne.getMinutes()/i+ne.getSeconds()/n,J=R/n,j=g.axes[z]._space,ae=N/j;for(;M=ze(M+R,e==1?0:3),!(M>P);)if(J>1){let Y=zt(ze(W+J,6))%24,ue=m(M).getHours()-Y;ue>1&&(ue=-1),M-=ue*n,W=(W+J)%24;let ce=T[T.length-1];ze((M-ce)/R,3)*ae>=.7&&T.push(M)}else T.push(M)}return T}}return[p,h,k]}const[$o,eu,tu]=Wa(1),[lu,nu,su]=Wa(.001);_n(2,-53,53,[1]);function $i(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function ea(e,l){return(i,n,a,u,c)=>{let d=l.find(F=>c>=F[0])||l[l.length-1],p,h,k,m,g,z;return n.map(F=>{let P=e(F),R=P.getFullYear(),N=P.getMonth(),T=P.getDate(),H=P.getHours(),w=P.getMinutes(),K=P.getSeconds(),L=R!=p&&d[2]||N!=h&&d[3]||T!=k&&d[4]||H!=m&&d[5]||w!=g&&d[6]||K!=z&&d[7]||d[1];return p=R,h=N,k=T,m=H,g=w,z=K,L(P)})}}function iu(e,l){let i=js(l);return(n,a,u,c,d)=>a.map(p=>i(e(p)))}function ys(e,l,i){return new Date(e,l,i)}function ta(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function la(e,l){return(i,n,a,u)=>u==null?Hs:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=It(),a=i.size(e,l);We(n,pn,a),We(n,hn,a);let u=a/-2;We(n,"marginLeft",u),We(n,"marginTop",u);let c=i.width(e,l,a);return c&&We(n,"borderWidth",c),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const ks=[0,0];function hu(e,l,i){return ks[0]=l,ks[1]=i,ks}function Dn(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Ts(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:Dn,mouseup:Dn,click:Dn,dblclick:Dn,mousemove:Ts,mouseleave:Ts,mouseenter:Ts},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ia={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},Ks=$e({},Ia,{filter:Aa}),Ba=$e({},Ks,{size:10}),Ua=$e({},Ia,{show:!1}),Js='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ya="bold "+Js,ja=1.5,na={show:!0,scale:"x",stroke:Gs,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:2,grid:Ks,ticks:Ba,border:Ua,font:Js,lineGap:ja,rotate:0},mu="Value",gu="Time",sa={show:!0,scale:"x",auto:!1,sorted:1,min:Fe,max:-Fe,idxs:[]};function wu(e,l,i,n,a){return l.map(u=>u==null?"":Us(u))}function _u(e,l,i,n,a,u,c){let d=[],p=wl.get(a)||0;i=c?i:ze(Bn(i,a),p);for(let h=i;h<=n;h=ze(h+a,p))d.push(Object.is(h,-0)?0:h);return d}function Ps(e,l,i,n,a,u,c){const d=[],p=e.scales[e.axes[l].scale].log,h=p==10?ol:Ta,k=zt(h(i));a=jl(p,k),p==10&&(a=kl[Qt(a,kl)]);let m=i,g=a*p;p==10&&(g=kl[Qt(g,kl)]);do d.push(m),m=m+a,p==10&&!wl.has(m)&&(m=ze(m,wl.get(a))),m>=g&&(a=m,g=a*p,p==10&&(g=kl[Qt(g,kl)]));while(m<=n);return d}function xu(e,l,i,n,a,u,c){let p=e.scales[e.axes[l].scale].asinh,h=n>p?Ps(e,l,kt(p,i),n,a):[p],k=n>=0&&i<=0?[0]:[];return(i<-p?Ps(e,l,kt(p,-n),-i,a):[p]).reverse().map(g=>-g).concat(k,h)}const qa=/./,bu=/[12357]/,Su=/[125]/,ia=/1/,Rs=(e,l,i,n)=>e.map((a,u)=>l==4&&a==0||u%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=e.scales[c],p=e.valToPos,h=u._space,k=p(10,c),m=p(9,c)-k>=h?qa:p(7,c)-k>=h?bu:p(5,c)-k>=h?Su:ia;if(m==ia){let g=tt(p(1,c)-k);if(g<h)return Rs(l.slice().reverse(),d.distr,m,Bt(h/g)).reverse()}return Rs(l,d.distr,m,1)}function ku(e,l,i,n,a){let u=e.axes[i],c=u.scale,d=u._space,p=e.valToPos,h=tt(p(1,c)-p(2,c));return h<d?Rs(l.slice().reverse(),3,qa,Bt(d/h)).reverse():l}function Tu(e,l,i,n){return n==null?Hs:l==null?"":Us(l)}const aa={show:!0,scale:"y",stroke:Gs,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ya,side:3,grid:Ks,ticks:Ba,border:Ua,font:Js,lineGap:ja,rotate:0};function Mu(e,l){let i=3+(e||1)*2;return ze(i*l,3)}function Eu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],u=e.valToPos(a[n[0]],i,!0),c=e.valToPos(a[n[1]],i,!0),d=tt(c-u),p=e.series[l],h=d/(p.points.space*Me);return n[1]-n[0]<=h}const ra={scale:null,auto:!0,sorted:0,min:Fe,max:-Fe},Ka=(e,l,i,n,a)=>a,oa={show:!0,auto:!0,sorted:0,gaps:Ka,alpha:1,facets:[$e({},ra,{scale:"x"}),$e({},ra,{scale:"y"})]},ua={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Ka,alpha:1,points:{show:Eu,filter:null},values:null,min:Fe,max:-Fe,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Ja={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=$e({},Ja,{time:!1,ori:1}),ca={};function Za(e,l){let i=ca[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,u,c,d,p,h){for(let k=0;k<i.plots.length;k++)i.plots[k]!=a&&i.plots[k].pub(n,a,u,c,d,p,h)}},e!=null&&(ca[e]=i)),i}const Jl=1,Fs=2;function Ll(e,l,i){const n=e.mode,a=e.series[l],u=n==2?e._data[l]:e._data,c=e.scales,d=e.bbox;let p=u[0],h=n==2?u[1]:u[l],k=n==2?c[a.facets[0].scale]:c[e.series[0].scale],m=n==2?c[a.facets[1].scale]:c[a.scale],g=d.left,z=d.top,F=d.width,P=d.height,R=e.valToPosH,N=e.valToPosV;return k.ori==0?i(a,p,h,k,m,R,N,g,z,F,P,jn,Ql,Kn,Xa,er):i(a,p,h,k,m,N,R,z,g,P,F,qn,Xl,Xs,$a,tr)}function Zs(e,l){let i=0,n=0,a=Se(e.bands,Ys);for(let u=0;u<a.length;u++){let c=a[u];c.series[0]==l?i=c.dir:c.series[1]==l&&(c.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let u=e.mode,c=e.series[l],d=u==2?c.facets[1].scale:c.scale,p=e.scales[d];return a==-1?p.min:a==1?p.max:p.distr==3?p.dir==1?p.min:p.max:0}function ul(e,l,i,n,a,u){return Ll(e,l,(c,d,p,h,k,m,g,z,F,P,R)=>{let N=c.pxRound;const T=h.dir*(h.ori==0?1:-1),H=h.ori==0?Ql:Xl;let w,K;T==1?(w=i,K=n):(w=n,K=i);let L=N(m(d[w],h,P,z)),U=N(g(p[w],k,R,F)),G=N(m(d[K],h,P,z)),ie=N(g(u==1?k.max:k.min,k,R,F)),Q=new Path2D(a);return H(Q,G,ie),H(Q,L,ie),H(Q,L,U),Q})}function Yn(e,l,i,n,a,u){let c=null;if(e.length>0){c=new Path2D;const d=l==0?Kn:Xs;let p=i;for(let m=0;m<e.length;m++){let g=e[m];if(g[1]>g[0]){let z=g[0]-p;z>0&&d(c,p,n,z,n+u),p=g[1]}}let h=i+a-p,k=10;h>0&&d(c,p,n-k/2,h,n+u+k)}return c}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function Qs(e,l,i,n,a,u,c){let d=[],p=e.length;for(let h=a==1?i:n;h>=i&&h<=n;h+=a)if(l[h]===null){let m=h,g=h;if(a==1)for(;++h<=n&&l[h]===null;)g=h;else for(;--h>=i&&l[h]===null;)g=h;let z=u(e[m]),F=g==m?z:u(e[g]),P=m-a;z=c<=0&&P>=0&&P<p?u(e[P]):z;let N=g+a;F=c>=0&&N>=0&&N<p?u(e[N]):F,F>=z&&d.push([z,F])}return d}function fa(e){return e==0?Ea:e==1?et:l=>yl(l,e)}function Qa(e){let l=e==0?jn:qn,i=e==0?(a,u,c,d,p,h)=>{a.arcTo(u,c,d,p,h)}:(a,u,c,d,p,h)=>{a.arcTo(c,u,p,d,h)},n=e==0?(a,u,c,d,p)=>{a.rect(u,c,d,p)}:(a,u,c,d,p)=>{a.rect(c,u,p,d)};return(a,u,c,d,p,h=0,k=0)=>{h==0&&k==0?n(a,u,c,d,p):(h=Xt(h,d/2,p/2),k=Xt(k,d/2,p/2),l(a,u+h,c),i(a,u+d,c,u+d,c+p,h),i(a,u+d,c+p,u,c+p,k),i(a,u,c+p,u,c,k),i(a,u,c,u+d,c,h),a.closePath())}}const jn=(e,l,i)=>{e.moveTo(l,i)},qn=(e,l,i)=>{e.moveTo(i,l)},Ql=(e,l,i)=>{e.lineTo(l,i)},Xl=(e,l,i)=>{e.lineTo(i,l)},Kn=Qa(0),Xs=Qa(1),Xa=(e,l,i,n,a,u)=>{e.arc(l,i,n,a,u)},$a=(e,l,i,n,a,u)=>{e.arc(i,l,n,a,u)},er=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(l,i,n,a,u,c)},tr=(e,l,i,n,a,u,c)=>{e.bezierCurveTo(i,l,a,n,c,u)};function lr(e){return(l,i,n,a,u)=>Ll(l,i,(c,d,p,h,k,m,g,z,F,P,R)=>{let{pxRound:N,points:T}=c,H,w;h.ori==0?(H=jn,w=Xa):(H=qn,w=$a);const K=ze(T.width*Me,3);let L=(T.size-T.width)/2*Me,U=ze(L*2,3),G=new Path2D,ie=new Path2D,{left:Q,top:M,width:ne,height:W}=l.bbox;Kn(ie,Q-U,M-U,ne+U*2,W+U*2);const J=j=>{if(p[j]!=null){let ae=N(m(d[j],h,P,z)),Y=N(g(p[j],k,R,F));H(G,ae+L,Y),w(G,ae,Y,L,0,Rn*2)}};if(u)u.forEach(J);else for(let j=n;j<=a;j++)J(j);return{stroke:K>0?G:null,fill:G,clip:ie,flags:Jl|Fs}})}function nr(e){return(l,i,n,a,u,c)=>{n!=a&&(u!=n&&c!=n&&e(l,i,n),u!=a&&c!=a&&e(l,i,a),e(l,i,c))}}const Pu=nr(Ql),Ru=nr(Xl);function sr(e){const l=Se(e?.alignGaps,0);return(i,n,a,u)=>Ll(i,n,(c,d,p,h,k,m,g,z,F,P,R)=>{[a,u]=Wn(p,a,u);let N=c.pxRound,T=W=>N(m(W,h,P,z)),H=W=>N(g(W,k,R,F)),w,K;h.ori==0?(w=Ql,K=Pu):(w=Xl,K=Ru);const L=h.dir*(h.ori==0?1:-1),U={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},G=U.stroke;let ie=!1;if(u-a>=P*4){let W=I=>i.posToVal(I,h.key,!0),J=null,j=null,ae,Y,ye,he=T(d[L==1?a:u]),ue=T(d[a]),ce=T(d[u]),re=W(L==1?ue+1:ce-1);for(let I=L==1?a:u;I>=a&&I<=u;I+=L){let ke=d[I],pe=(L==1?ke<re:ke>re)?he:T(ke),X=p[I];pe==he?X!=null?(Y=X,J==null?(w(G,pe,H(Y)),ae=J=j=Y):Y<J?J=Y:Y>j&&(j=Y)):X===null&&(ie=!0):(J!=null&&K(G,he,H(J),H(j),H(ae),H(Y)),X!=null?(Y=X,w(G,pe,H(Y)),J=j=ae=Y):(J=j=null,X===null&&(ie=!0)),he=pe,re=W(he+L))}J!=null&&J!=j&&ye!=he&&K(G,he,H(J),H(j),H(ae),H(Y))}else for(let W=L==1?a:u;W>=a&&W<=u;W+=L){let J=p[W];J===null?ie=!0:J!=null&&w(G,T(d[W]),H(J))}let[M,ne]=Zs(i,n);if(c.fill!=null||M!=0){let W=U.fill=new Path2D(G),J=c.fillTo(i,n,c.min,c.max,M),j=H(J),ae=T(d[a]),Y=T(d[u]);L==-1&&([Y,ae]=[ae,Y]),w(W,Y,j),w(W,ae,j)}if(!c.spanGaps){let W=[];ie&&W.push(...Qs(d,p,a,u,L,T,l)),U.gaps=W=c.gaps(i,n,a,u,W),U.clip=Yn(W,h.ori,z,F,P,R)}return ne!=0&&(U.band=ne==2?[ul(i,n,a,u,G,-1),ul(i,n,a,u,G,1)]:ul(i,n,a,u,G,ne)),U})}function Fu(e){const l=Se(e.align,1),i=Se(e.ascDesc,!1),n=Se(e.alignGaps,0),a=Se(e.extend,!1);return(u,c,d,p)=>Ll(u,c,(h,k,m,g,z,F,P,R,N,T,H)=>{[d,p]=Wn(m,d,p);let w=h.pxRound,{left:K,width:L}=u.bbox,U=ue=>w(F(ue,g,T,R)),G=ue=>w(P(ue,z,H,N)),ie=g.ori==0?Ql:Xl;const Q={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Jl},M=Q.stroke,ne=g.dir*(g.ori==0?1:-1);let W=G(m[ne==1?d:p]),J=U(k[ne==1?d:p]),j=J,ae=J;a&&l==-1&&(ae=K,ie(M,ae,W)),ie(M,J,W);for(let ue=ne==1?d:p;ue>=d&&ue<=p;ue+=ne){let ce=m[ue];if(ce==null)continue;let re=U(k[ue]),I=G(ce);l==1?ie(M,re,W):ie(M,j,I),ie(M,re,I),W=I,j=re}let Y=j;a&&l==1&&(Y=K+L,ie(M,Y,W));let[ye,he]=Zs(u,c);if(h.fill!=null||ye!=0){let ue=Q.fill=new Path2D(M),ce=h.fillTo(u,c,h.min,h.max,ye),re=G(ce);ie(ue,Y,re),ie(ue,ae,re)}if(!h.spanGaps){let ue=[];ue.push(...Qs(k,m,d,p,ne,U,n));let ce=h.width*Me/2,re=i||l==1?ce:-ce,I=i||l==-1?-ce:ce;ue.forEach(ke=>{ke[0]+=re,ke[1]+=I}),Q.gaps=ue=h.gaps(u,c,d,p,ue),Q.clip=Yn(ue,g.ori,R,N,T,H)}return he!=0&&(Q.band=he==2?[ul(u,c,d,p,M,-1),ul(u,c,d,p,M,1)]:ul(u,c,d,p,M,he)),Q})}function da(e,l,i,n,a,u,c=Fe){if(e.length>1){let d=null;for(let p=0,h=1/0;p<e.length;p++)if(l[p]!==void 0){if(d!=null){let k=tt(e[p]-e[d]);k<h&&(h=k,c=tt(i(e[p],n,a,u)-i(e[d],n,a,u)))}d=p}}return c}function zu(e){e=e||gn;const l=Se(e.size,[.6,Fe,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const u=we(a),c=1-l[0],d=Se(l[1],Fe),p=Se(l[2],1),h=Se(e.disp,gn),k=Se(e.each,z=>{}),{fill:m,stroke:g}=h;return(z,F,P,R)=>Ll(z,F,(N,T,H,w,K,L,U,G,ie,Q,M)=>{let ne=N.pxRound,W=i,J=n*Me,j=d*Me,ae=p*Me,Y,ye;w.ori==0?[Y,ye]=u(z,F):[ye,Y]=u(z,F);const he=w.dir*(w.ori==0?1:-1);let ue=w.ori==0?Kn:Xs,ce=w.ori==0?k:(_,O,$,me,se,ee,Ee)=>{k(_,O,$,se,me,Ee,ee)},re=Se(z.bands,Ys).find(_=>_.series[0]==F),I=re!=null?re.dir:0,ke=N.fillTo(z,F,N.min,N.max,I),Ce=ne(U(ke,K,M,ie)),pe,X,Pe,Oe=Q,ve=ne(N.width*Me),qe=!1,Ze=null,Qe=null,pt=null,wt=null;m!=null&&(ve==0||g!=null)&&(qe=!0,Ze=m.values(z,F,P,R),Qe=new Map,new Set(Ze).forEach(_=>{_!=null&&Qe.set(_,new Path2D)}),ve>0&&(pt=g.values(z,F,P,R),wt=new Map,new Set(pt).forEach(_=>{_!=null&&wt.set(_,new Path2D)})));let{x0:_t,size:Tt}=h;if(_t!=null&&Tt!=null){W=1,T=_t.values(z,F,P,R),_t.unit==2&&(T=T.map($=>z.posToVal(G+$*Q,w.key,!0)));let _=Tt.values(z,F,P,R);Tt.unit==2?X=_[0]*Q:X=L(_[0],w,Q,G)-L(0,w,Q,G),Oe=da(T,H,L,w,Q,G,Oe),Pe=Oe-X+J}else Oe=da(T,H,L,w,Q,G,Oe),Pe=Oe*c+J,X=Oe-Pe;Pe<1&&(Pe=0),ve>=X/2&&(ve=0),Pe<5&&(ne=Ea);let Ut=Pe>0,xt=Oe-Pe-(Ut?ve:0);X=ne(Cs(xt,ae,j)),pe=(W==0?X/2:W==he?0:X)-W*he*((W==0?J/2:0)+(Ut?ve/2:0));const Ke={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Dt=qe?null:new Path2D;let te=null;if(re!=null)te=z.data[re.series[1]];else{let{y0:_,y1:O}=h;_!=null&&O!=null&&(H=O.values(z,F,P,R),te=_.values(z,F,P,R))}let S=Y*X,x=ye*X;for(let _=he==1?P:R;_>=P&&_<=R;_+=he){let O=H[_];if(O==null)continue;if(te!=null){let Ue=te[_]??0;if(O-Ue==0)continue;Ce=U(Ue,K,M,ie)}let $=w.distr!=2||h!=null?T[_]:_,me=L($,w,Q,G),se=U(Se(O,ke),K,M,ie),ee=ne(me-pe),Ee=ne(kt(se,Ce)),de=ne(Xt(se,Ce)),Re=Ee-de;if(O!=null){let Ue=O<0?x:S,ht=O<0?S:x;qe?(ve>0&&pt[_]!=null&&ue(wt.get(pt[_]),ee,de+zt(ve/2),X,kt(0,Re-ve),Ue,ht),Ze[_]!=null&&ue(Qe.get(Ze[_]),ee,de+zt(ve/2),X,kt(0,Re-ve),Ue,ht)):ue(Dt,ee,de+zt(ve/2),X,kt(0,Re-ve),Ue,ht),ce(z,F,_,ee-ve/2,de,X+ve,Re)}}return ve>0?Ke.stroke=qe?wt:Dt:qe||(Ke._fill=N.width==0?N._fill:N._stroke??N._fill,Ke.width=0),Ke.fill=qe?Qe:Dt,Ke})}function Ou(e,l){const i=Se(l?.alignGaps,0);return(n,a,u,c)=>Ll(n,a,(d,p,h,k,m,g,z,F,P,R,N)=>{[u,c]=Wn(h,u,c);let T=d.pxRound,H=Y=>T(g(Y,k,R,F)),w=Y=>T(z(Y,m,N,P)),K,L,U;k.ori==0?(K=jn,U=Ql,L=er):(K=qn,U=Xl,L=tr);const G=k.dir*(k.ori==0?1:-1);let ie=H(p[G==1?u:c]),Q=ie,M=[],ne=[];for(let Y=G==1?u:c;Y>=u&&Y<=c;Y+=G)if(h[Y]!=null){let he=p[Y],ue=H(he);M.push(Q=ue),ne.push(w(h[Y]))}const W={stroke:e(M,ne,K,U,L,T),fill:null,clip:null,band:null,gaps:null,flags:Jl},J=W.stroke;let[j,ae]=Zs(n,a);if(d.fill!=null||j!=0){let Y=W.fill=new Path2D(J),ye=d.fillTo(n,a,d.min,d.max,j),he=w(ye);U(Y,Q,he),U(Y,ie,he)}if(!d.spanGaps){let Y=[];Y.push(...Qs(p,h,u,c,G,H,i)),W.gaps=Y=d.gaps(n,a,u,c,Y),W.clip=Yn(Y,k.ori,F,P,R,N)}return ae!=0&&(W.band=ae==2?[ul(n,a,u,c,J,-1),ul(n,a,u,c,J,1)]:ul(n,a,u,c,J,ae)),W})}function Vu(e){return Ou(Nu,e)}function Nu(e,l,i,n,a,u){const c=e.length;if(c<2)return null;const d=new Path2D;if(i(d,e[0],l[0]),c==2)n(d,e[1],l[1]);else{let p=Array(c),h=Array(c-1),k=Array(c-1),m=Array(c-1);for(let g=0;g<c-1;g++)k[g]=l[g+1]-l[g],m[g]=e[g+1]-e[g],h[g]=k[g]/m[g];p[0]=h[0];for(let g=1;g<c-1;g++)h[g]===0||h[g-1]===0||h[g-1]>0!=h[g]>0?p[g]=0:(p[g]=3*(m[g-1]+m[g])/((2*m[g]+m[g-1])/h[g-1]+(m[g]+2*m[g-1])/h[g]),isFinite(p[g])||(p[g]=0));p[c-1]=h[c-2];for(let g=0;g<c-1;g++)a(d,e[g]+m[g]/3,l[g]+p[g]*m[g]/3,e[g+1]-m[g]/3,l[g+1]-p[g+1]*m[g]/3,e[g+1],l[g+1])}return d}const zs=new Set;function pa(){for(let e of zs)e.syncRect(!0)}Zl&&(Al(wo,Yl,pa),Al(_o,Yl,pa,!0),Al(zn,Yl,()=>{lt.pxRatio=Me}));const Gu=sr(),Hu=lr();function ha(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((u,c)=>Os(u,c,l,i))}function Wu(e,l){return e.map((i,n)=>n==0?{}:$e({},l,i))}function Os(e,l,i,n){return $e({},l==0?i:n,e)}function ir(e,l,i){return l==null?ql:[l,i]}const Iu=ir;function Bu(e,l,i){return l==null?ql:On(l,i,Bs,!0)}function ar(e,l,i,n){return l==null?ql:In(l,i,e.scales[n].log,!1)}const Uu=ar;function rr(e,l,i,n){return l==null?ql:Is(l,i,e.scales[n].log,!1)}const Yu=rr;function ju(e,l,i,n,a){let u=kt(ji(e),ji(l)),c=l-e,d=Qt(a/n*c,i);do{let p=i[d],h=n*p/c;if(h>=a&&u+(p<5?wl.get(p):0)<=17)return[p,h]}while(++d<i.length);return[0,0]}function va(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=et((i=+a)*Me))+"px"),[e,l,i]}function qu(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=ze(l[2]*Me,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function lt(e,l,i){const n={mode:Se(e.mode,1)},a=n.mode;function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function d(t,s,r,o){return s.ori==0?u(t,s,r,o):c(t,s,r,o)}n.valToPosH=u,n.valToPosV=c;let p=!1;n.status=0;const h=n.root=It($r);if(e.id!=null&&(h.id=e.id),Ft(h,e.class),e.title){let t=It(lo,h);t.textContent=e.title}const k=Zt("canvas"),m=n.ctx=k.getContext("2d"),g=It(no,h);Al("click",g,t=>{t.target===F&&(Ne!=Nl||Ie!=Gl)&&dt.click(n,t)},!0);const z=n.under=It(so,g);g.appendChild(k);const F=n.over=It(io,g);e=Kl(e);const P=+Se(e.pxAlign,1),R=fa(P);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const N=e.ms||.001,T=n.series=a==1?ha(e.series||[],sa,ua,!1):Wu(e.series||[null],oa),H=n.axes=ha(e.axes||[],na,aa,!0),w=n.scales={},K=n.bands=e.bands||[];K.forEach(t=>{t.fill=we(t.fill||null),t.dir=Se(t.dir,-1)});const L=a==2?T[1].facets[0].scale:T[0].scale,U={axes:_r,series:hr},G=(e.drawOrder||["axes","series"]).map(t=>U[t]);function ie(t){const s=t.distr==3?r=>ol(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>Ss(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:v}=t,b=v-f;return(o-f)/b}}function Q(t){let s=w[t];if(s==null){let r=(e.scales||gn)[t]||gn;if(r.from!=null){Q(r.from);let o=$e({},w[r.from],r,{key:t});o.valToPct=ie(o),w[t]=o}else{s=w[t]=$e({},t==L?Ja:Du,r),s.key=t;let o=s.time,f=s.range,v=gl(f);if((t!=L||a==2&&!o)&&(v&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?Bi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?Bi:{mode:1,hard:f[1],soft:f[1]}},v=!1),!v&&Un(f))){let b=f;f=(E,A,V)=>A==null?ql:On(A,V,b)}s.range=we(f||(o?Iu:t==L?s.distr==3?Uu:s.distr==4?Yu:ir:s.distr==3?ar:s.distr==4?rr:Bu)),s.auto=we(v?!1:s.auto),s.clamp=we(s.clamp||Au),s._min=s._max=null,s.valToPct=ie(s)}}}Q("x"),Q("y"),a==1&&T.forEach(t=>{Q(t.scale)}),H.forEach(t=>{Q(t.scale)});for(let t in e.scales)Q(t);const M=w[L],ne=M.distr;let W,J;M.ori==0?(Ft(h,eo),W=u,J=c):(Ft(h,to),W=c,J=u);const j={};for(let t in w){let s=w[t];(s.min!=null||s.max!=null)&&(j[t]={min:s.min,max:s.max},s.min=s.max=null)}const ae=e.tzDate||(t=>new Date(et(t/N))),Y=e.fmtDate||js,ye=N==1?tu(ae):su(ae),he=ea(ae,$i(N==1?eu:nu,Y)),ue=la(ae,ta(au,Y)),ce=[],re=n.legend=$e({},uu,e.legend),I=n.cursor=$e({},vu,{drag:{y:a==2}},e.cursor),ke=re.show,Ce=I.show,pe=re.markers;re.idxs=ce,pe.width=we(pe.width),pe.dash=we(pe.dash),pe.stroke=we(pe.stroke),pe.fill=we(pe.fill);let X,Pe,Oe,ve=[],qe=[],Ze,Qe=!1,pt={};if(re.live){const t=T[1]?T[1].values:null;Qe=t!=null,Ze=Qe?t(n,1,0):{_:0};for(let s in Ze)pt[s]=Hs}if(ke)if(X=Zt("table",fo,h),Oe=Zt("tbody",null,X),re.mount(n,X),Qe){Pe=Zt("thead",null,X,Oe);let t=Zt("tr",null,Pe);Zt("th",null,t);for(var wt in Ze)Zt("th",Li,t).textContent=wt}else Ft(X,ho),re.live&&Ft(X,po);const _t={show:!0},Tt={show:!1};function Ut(t,s){if(s==0&&(Qe||!re.live||a==2))return ql;let r=[],o=Zt("tr",vo,Oe,Oe.childNodes[s]);Ft(o,t.class),t.show||Ft(o,Tl);let f=Zt("th",null,o);if(pe.show){let E=It(mo,f);if(s>0){let A=pe.width(n,s);A&&(E.style.border=A+"px "+pe.dash(n,s)+" "+pe.stroke(n,s)),E.style.background=pe.fill(n,s)}}let v=It(Li,f);t.label instanceof HTMLElement?v.appendChild(t.label):v.textContent=t.label,s>0&&(pe.show||(v.style.color=t.width>0?pe.stroke(n,s):pe.fill(n,s)),Ke("click",f,E=>{if(I._lock)return;al(E);let A=T.indexOf(t);if((E.ctrlKey||E.metaKey)!=re.isolate){let V=T.some((B,q)=>q>0&&q!=A&&B.show);T.forEach((B,q)=>{q>0&&tl(q,V?q==A?_t:Tt:_t,!0,Xe.setSeries)})}else tl(A,{show:!t.show},!0,Xe.setSeries)},!1),cl&&Ke(Fi,f,E=>{I._lock||(al(E),tl(T.indexOf(t),Wl,!0,Xe.setSeries))},!1));for(var b in Ze){let E=Zt("td",go,o);E.textContent="--",r.push(E)}return[o,r]}const xt=new Map;function Ke(t,s,r,o=!0){const f=xt.get(s)||{},v=I.bind[t](n,s,r,o);v&&(Al(t,s,f[t]=v),xt.set(s,f))}function Dt(t,s,r){const o=xt.get(s)||{};for(let f in o)(t==null||f==t)&&(Ls(f,s,o[f]),delete o[f]);t==null&&xt.delete(s)}let te=0,S=0,x=0,_=0,O=0,$=0,me=O,se=$,ee=x,Ee=_,de=0,Re=0,Ue=0,ht=0;n.bbox={};let Yt=!1,$t=!1,Vt=!1,Lt=!1,jt=!1,Be=!1;function Nt(t,s,r){(r||t!=n.width||s!=n.height)&&vt(t,s),Fl(!1),Vt=!0,$t=!0,zl()}function vt(t,s){n.width=te=x=t,n.height=S=_=s,O=$=0,Jn(),Zn();let r=n.bbox;de=r.left=yl(O*Me,.5),Re=r.top=yl($*Me,.5),Ue=r.width=yl(x*Me,.5),ht=r.height=yl(_*Me,.5)}const el=3;function $l(){let t=!1,s=0;for(;!t;){s++;let r=gr(s),o=wr(s);t=s==el||r&&o,t||(vt(n.width,n.height),$t=!0)}}function en({width:t,height:s}){Nt(t,s)}n.setSize=en;function Jn(){let t=!1,s=!1,r=!1,o=!1;H.forEach((f,v)=>{if(f.show&&f._show){let{side:b,_size:E}=f,A=b%2,V=f.label!=null?f.labelSize:0,B=E+V;B>0&&(A?(x-=B,b==3?(O+=B,o=!0):r=!0):(_-=B,b==0?($+=B,t=!0):s=!0))}}),_l[0]=t,_l[1]=r,_l[2]=s,_l[3]=o,x-=dl[1]+dl[3],O+=dl[3],_-=dl[2]+dl[0],$+=dl[0]}function Zn(){let t=O+x,s=$+_,r=O,o=$;function f(v,b){switch(v){case 1:return t+=b,t-b;case 2:return s+=b,s-b;case 3:return r-=b,r+b;case 0:return o-=b,o+b}}H.forEach((v,b)=>{if(v.show&&v._show){let E=v.side;v._pos=f(E,v._size),v.label!=null&&(v._lpos=f(E,v.labelSize))}})}if(I.dataIdx==null){let t=I.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=we(t.prox),o=t.bias??=0;I.dataIdx=(f,v,b,E)=>{if(v==0)return b;let A=b,V=r(f,v,b,E)??Fe,B=V>=0&&V<Fe,q=M.ori==0?x:_,fe=I.left,Te=l[0],be=l[v];if(s.has(be[b])){A=null;let ge=null,oe=null,le;if(o==0||o==-1)for(le=b;ge==null&&le-- >0;)s.has(be[le])||(ge=le);if(o==0||o==1)for(le=b;oe==null&&le++<be.length;)s.has(be[le])||(oe=le);if(ge!=null||oe!=null)if(B){let He=ge==null?-1/0:W(Te[ge],M,q,0),Ye=oe==null?1/0:W(Te[oe],M,q,0),ct=fe-He,Le=Ye-fe;ct<=Le?ct<=V&&(A=ge):Le<=V&&(A=oe)}else A=oe==null?ge:ge==null?oe:b-ge<=oe-b?ge:oe}else B&&tt(fe-W(Te[b],M,q,0))>V&&(A=null);return A}}const al=t=>{I.event=t};I.idxs=ce,I._lock=!1;let st=I.points;st.show=we(st.show),st.size=we(st.size),st.stroke=we(st.stroke),st.width=we(st.width),st.fill=we(st.fill);const Gt=n.focus=$e({},e.focus||{alpha:.3},I.focus),cl=Gt.prox>=0,fl=cl&&st.one;let Mt=[],Cl=[],Pl=[];function $s(t,s){let r=st.show(n,s);if(r instanceof HTMLElement)return Ft(r,co),Ft(r,t.class),il(r,-10,-10,x,_),F.insertBefore(r,Mt[s]),r}function ei(t,s){if(a==1||s>0){let r=a==1&&w[t.scale].time,o=t.value;t.value=r?Ji(o)?la(ae,ta(o,Y)):o||ue:o||Tu,t.label=t.label||(r?gu:mu)}if(fl||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Gu||Do,t.fillTo=we(t.fillTo||Lu),t.pxAlign=+Se(t.pxAlign,P),t.pxRound=fa(t.pxAlign),t.stroke=we(t.stroke||null),t.fill=we(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Mu(kt(1,t.width),1),o=t.points=$e({},{size:r,width:kt(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=we(o.show),o.filter=we(o.filter),o.fill=we(o.fill),o.stroke=we(o.stroke),o.paths=we(o.paths),o.pxAlign=t.pxAlign}if(ke){let r=Ut(t,s);ve.splice(s,0,r[0]),qe.splice(s,0,r[1]),re.values.push(null)}if(Ce){ce.splice(s,0,null);let r=null;fl?s==0&&(r=$s(t,s)):s>0&&(r=$s(t,s)),Mt.splice(s,0,r),Cl.splice(s,0,0),Pl.splice(s,0,0)}ut("addSeries",s)}function ur(t,s){s=s??T.length,t=a==1?Os(t,s,sa,ua):Os(t,s,{},oa),T.splice(s,0,t),ei(T[s],s)}n.addSeries=ur;function cr(t){if(T.splice(t,1),ke){re.values.splice(t,1),qe.splice(t,1);let s=ve.splice(t,1)[0];Dt(null,s.firstChild),s.remove()}Ce&&(ce.splice(t,1),Mt.splice(t,1)[0].remove(),Cl.splice(t,1),Pl.splice(t,1)),ut("delSeries",t)}n.delSeries=cr;const _l=[!1,!1,!1,!1];function fr(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=w[t.scale];o==null&&(t.scale=r?T[1].scale:L,o=w[t.scale]);let f=o.time;t.size=we(t.size),t.space=we(t.space),t.rotate=we(t.rotate),gl(t.incrs)&&t.incrs.forEach(b=>{!wl.has(b)&&wl.set(b,La(b))}),t.incrs=we(t.incrs||(o.distr==2?Qo:f?N==1?$o:lu:kl)),t.splits=we(t.splits||(f&&o.distr==1?ye:o.distr==3?Ps:o.distr==4?xu:_u)),t.stroke=we(t.stroke),t.grid.stroke=we(t.grid.stroke),t.ticks.stroke=we(t.ticks.stroke),t.border.stroke=we(t.border.stroke);let v=t.values;t.values=gl(v)&&!gl(v[0])?we(v):f?gl(v)?ea(ae,$i(v,Y)):Ji(v)?iu(ae,v):v||he:v||wu,t.filter=we(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Aa)),t.font=va(t.font),t.labelFont=va(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(_l[s]=!0,t._el=It(ao,g))}}function tn(t,s,r,o){let[f,v,b,E]=r,A=s%2,V=0;return A==0&&(E||v)&&(V=s==0&&!f||s==2&&!b?et(na.size/3):0),A==1&&(f||b)&&(V=s==1&&!v||s==3&&!E?et(aa.size/2):0),V}const ti=n.padding=(e.padding||[tn,tn,tn,tn]).map(t=>we(Se(t,tn))),dl=n._padding=ti.map((t,s)=>t(n,s,_l,0));let ft,it=null,at=null;const xn=a==1?T[0].idxs:null;let qt=null,ln=!1;function li(t,s){if(l=t??[],n.data=n._data=l,a==2){ft=0;for(let r=1;r<T.length;r++)ft+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),qt=l[0],ft=qt.length;let r=l;if(ne==2){r=l.slice();let o=r[0]=Array(ft);for(let f=0;f<ft;f++)o[f]=f}n._data=l=r}if(Fl(!0),ut("setData"),ne==2&&(Vt=!0),s!==!1){let r=M;r.auto(n,ln)?Qn():hl(L,r.min,r.max),Lt=Lt||I.left>=0,Be=!0,zl()}}n.setData=li;function Qn(){ln=!0;let t,s;a==1&&(ft>0?(it=xn[0]=0,at=xn[1]=ft-1,t=l[0][it],s=l[0][at],ne==2?(t=it,s=at):t==s&&(ne==3?[t,s]=In(t,t,M.log,!1):ne==4?[t,s]=Is(t,t,M.log,!1):M.time?s=t+et(86400/N):[t,s]=On(t,s,Bs,!0))):(it=xn[0]=t=null,at=xn[1]=s=null)),hl(L,t,s)}let bn,Rl,Xn,$n,es,ts,ls,ns,ss,Et;function ni(t,s,r,o,f,v){t??=Pi,r??=Ys,o??="butt",f??=Pi,v??="round",t!=bn&&(m.strokeStyle=bn=t),f!=Rl&&(m.fillStyle=Rl=f),s!=Xn&&(m.lineWidth=Xn=s),v!=es&&(m.lineJoin=es=v),o!=ts&&(m.lineCap=ts=o),r!=$n&&m.setLineDash($n=r)}function si(t,s,r,o){s!=Rl&&(m.fillStyle=Rl=s),t!=ls&&(m.font=ls=t),r!=ns&&(m.textAlign=ns=r),o!=ss&&(m.textBaseline=ss=o)}function is(t,s,r,o,f=0){if(o.length>0&&t.auto(n,ln)&&(s==null||s.min==null)){let v=Se(it,0),b=Se(at,o.length-1),E=r.min==null?yo(o,v,b,f,t.distr==3):[r.min,r.max];t.min=Xt(t.min,r.min=E[0]),t.max=kt(t.max,r.max=E[1])}}const ii={min:null,max:null};function dr(){for(let o in w){let f=w[o];j[o]==null&&(f.min==null||j[L]!=null&&f.auto(n,ln))&&(j[o]=ii)}for(let o in w){let f=w[o];j[o]==null&&f.from!=null&&j[f.from]!=null&&(j[o]=ii)}j[L]!=null&&Fl(!0);let t={};for(let o in j){let f=j[o];if(f!=null){let v=t[o]=Kl(w[o],Po);if(f.min!=null)$e(v,f);else if(o!=L||a==2)if(ft==0&&v.from==null){let b=v.range(n,null,null,o);v.min=b[0],v.max=b[1]}else v.min=Fe,v.max=-Fe}}if(ft>0){T.forEach((o,f)=>{if(a==1){let v=o.scale,b=j[v];if(b==null)return;let E=t[v];if(f==0){let A=E.range(n,E.min,E.max,v);E.min=A[0],E.max=A[1],it=Qt(E.min,l[0]),at=Qt(E.max,l[0]),at-it>1&&(l[0][it]<E.min&&it++,l[0][at]>E.max&&at--),o.min=qt[it],o.max=qt[at]}else o.show&&o.auto&&is(E,b,o,l[f],o.sorted);o.idxs[0]=it,o.idxs[1]=at}else if(f>0&&o.show&&o.auto){let[v,b]=o.facets,E=v.scale,A=b.scale,[V,B]=l[f],q=t[E],fe=t[A];q!=null&&is(q,j[E],v,V,v.sorted),fe!=null&&is(fe,j[A],b,B,b.sorted),o.min=b.min,o.max=b.max}});for(let o in t){let f=t[o],v=j[o];if(f.from==null&&(v==null||v.min==null)){let b=f.range(n,f.min==Fe?null:f.min,f.max==-Fe?null:f.max,o);f.min=b[0],f.max=b[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let v=t[f.from];if(v.min==null)f.min=f.max=null;else{let b=f.range(n,v.min,v.max,o);f.min=b[0],f.max=b[1]}}}let s={},r=!1;for(let o in t){let f=t[o],v=w[o];if(v.min!=f.min||v.max!=f.max){v.min=f.min,v.max=f.max;let b=v.distr;v._min=b==3?ol(v.min):b==4?Ss(v.min,v.asinh):b==100?v.fwd(v.min):v.min,v._max=b==3?ol(v.max):b==4?Ss(v.max,v.asinh):b==100?v.fwd(v.max):v.max,s[o]=r=!0}}if(r){T.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)Vt=!0,ut("setScale",o);Ce&&I.left>=0&&(Lt=Be=!0)}for(let o in j)j[o]=null}function pr(t){let s=Cs(it-1,0,ft-1),r=Cs(at+1,0,ft-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<ft-1;)r++;return[s,r]}function hr(){if(ft>0){let t=T.some(s=>s._focus)&&Et!=Gt.alpha;t&&(m.globalAlpha=Et=Gt.alpha),T.forEach((s,r)=>{if(r>0&&s.show&&(ai(r,!1),ai(r,!0),s._paths==null)){let o=Et;Et!=s.alpha&&(m.globalAlpha=Et=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Et!=o&&(m.globalAlpha=Et=o)}}),T.forEach((s,r)=>{if(r>0&&s.show){let o=Et;Et!=s.alpha&&(m.globalAlpha=Et=s.alpha),s._paths!=null&&ri(r,!1);{let f=s._paths!=null?s._paths.gaps:null,v=s.points.show(n,r,it,at,f),b=s.points.filter(n,r,v,f);(v||b)&&(s.points._paths=s.points.paths(n,r,it,at,b),ri(r,!0))}Et!=o&&(m.globalAlpha=Et=o),ut("drawSeries",r)}}),t&&(m.globalAlpha=Et=1)}}function ai(t,s){let r=s?T[t].points:T[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function ri(t,s){let r=s?T[t].points:T[t],{stroke:o,fill:f,clip:v,flags:b,_stroke:E=r._stroke,_fill:A=r._fill,_width:V=r.width}=r._paths;V=ze(V*Me,3);let B=null,q=V%2/2;s&&A==null&&(A=V>0?"#fff":E);let fe=r.pxAlign==1&&q>0;if(fe&&m.translate(q,q),!s){let Te=de-V/2,be=Re-V/2,ge=Ue+V,oe=ht+V;B=new Path2D,B.rect(Te,be,ge,oe)}s?as(E,V,r.dash,r.cap,A,o,f,b,v):vr(t,E,V,r.dash,r.cap,A,o,f,b,B,v),fe&&m.translate(-q,-q)}function vr(t,s,r,o,f,v,b,E,A,V,B){let q=!1;A!=0&&K.forEach((fe,Te)=>{if(fe.series[0]==t){let be=T[fe.series[1]],ge=l[fe.series[1]],oe=(be._paths||gn).band;gl(oe)&&(oe=fe.dir==1?oe[0]:oe[1]);let le,He=null;be.show&&oe&&To(ge,it,at)?(He=fe.fill(n,Te)||v,le=be._paths.clip):oe=null,as(s,r,o,f,He,b,E,A,V,B,le,oe),q=!0}}),q||as(s,r,o,f,v,b,E,A,V,B)}const oi=Jl|Fs;function as(t,s,r,o,f,v,b,E,A,V,B,q){ni(t,s,r,o,f),(A||V||q)&&(m.save(),A&&m.clip(A),V&&m.clip(V)),q?(E&oi)==oi?(m.clip(q),B&&m.clip(B),yn(f,b),Sn(t,v,s)):E&Fs?(yn(f,b),m.clip(q),Sn(t,v,s)):E&Jl&&(m.save(),m.clip(q),B&&m.clip(B),yn(f,b),m.restore(),Sn(t,v,s)):(yn(f,b),Sn(t,v,s)),(A||V||q)&&m.restore()}function Sn(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{m.strokeStyle=bn=f,m.stroke(o)}):s!=null&&t&&m.stroke(s))}function yn(t,s){s instanceof Map?s.forEach((r,o)=>{m.fillStyle=Rl=o,m.fill(r)}):s!=null&&t&&m.fill(s)}function mr(t,s,r,o){let f=H[t],v;if(o<=0)v=[0,0];else{let b=f._space=f.space(n,t,s,r,o),E=f._incrs=f.incrs(n,t,s,r,o,b);v=ju(s,r,E,o,b)}return f._found=v}function rs(t,s,r,o,f,v,b,E,A,V){let B=b%2/2;P==1&&m.translate(B,B),ni(E,b,A,V,E),m.beginPath();let q,fe,Te,be,ge=f+(o==0||o==3?-v:v);r==0?(fe=f,be=ge):(q=f,Te=ge);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?q=Te=t[oe]:fe=be=t[oe],m.moveTo(q,fe),m.lineTo(Te,be));m.stroke(),P==1&&m.translate(-B,-B)}function gr(t){let s=!0;return H.forEach((r,o)=>{if(!r.show)return;let f=w[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Fl(!1));return}else r._show||(s=!1,r._show=!0,Fl(!1));let v=r.side,b=v%2,{min:E,max:A}=f,[V,B]=mr(o,E,A,b==0?x:_);if(B==0)return;let q=f.distr==2,fe=r._splits=r.splits(n,o,E,A,V,B,q),Te=f.distr==2?fe.map(le=>qt[le]):fe,be=f.distr==2?qt[fe[1]]-qt[fe[0]]:V,ge=r._values=r.values(n,r.filter(n,Te,o,B,be),o,B,be);r._rotate=v==2?r.rotate(n,ge,o,B):0;let oe=r._size;r._size=Bt(r.size(n,ge,o,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function wr(t){let s=!0;return ti.forEach((r,o)=>{let f=r(n,o,_l,t);f!=dl[o]&&(s=!1),dl[o]=f}),s}function _r(){for(let t=0;t<H.length;t++){let s=H[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,v,b=s.stroke(n,t),E=r==0||r==3?-1:1,[A,V]=s._found;if(s.label!=null){let St=s.labelGap*E,Rt=et((s._lpos+St)*Me);si(s.labelFont[0],b,"center",r==2?cn:Ci),m.save(),o==1?(f=v=0,m.translate(Rt,et(Re+ht/2)),m.rotate((r==3?-Rn:Rn)/2)):(f=et(de+Ue/2),v=Rt);let Sl=Ma(s.label)?s.label(n,t,A,V):s.label;m.fillText(Sl,f,v),m.restore()}if(V==0)continue;let B=w[s.scale],q=o==0?Ue:ht,fe=o==0?de:Re,Te=s._splits,be=B.distr==2?Te.map(St=>qt[St]):Te,ge=B.distr==2?qt[Te[1]]-qt[Te[0]]:A,oe=s.ticks,le=s.border,He=oe.show?oe.size:0,Ye=et(He*Me),ct=et((s.alignTo==2?s._size-He-s.gap:s.gap)*Me),Le=s._rotate*-Rn/180,je=R(s._pos*Me),Ct=(Ye+ct)*E,bt=je+Ct;v=o==0?bt:0,f=o==1?bt:0;let Ht=s.font[0],Kt=s.align==1?Bl:s.align==2?_s:Le>0?Bl:Le<0?_s:o==0?"center":r==3?_s:Bl,nl=Le||o==1?"middle":r==2?cn:Ci;si(Ht,b,Kt,nl);let Pt=s.font[1]*s.lineGap,Wt=Te.map(St=>R(d(St,B,q,fe))),Jt=s._values;for(let St=0;St<Jt.length;St++){let Rt=Jt[St];if(Rt!=null){o==0?f=Wt[St]:v=Wt[St],Rt=""+Rt;let Sl=Rt.indexOf(`
`)==-1?[Rt]:Rt.split(/\n/gm);for(let yt=0;yt<Sl.length;yt++){let Ei=Sl[yt];Le?(m.save(),m.translate(f,v+yt*Pt),m.rotate(Le),m.fillText(Ei,0,0),m.restore()):m.fillText(Ei,f,v+yt*Pt)}}}oe.show&&rs(Wt,oe.filter(n,be,t,V,ge),o,r,je,Ye,ze(oe.width*Me,3),oe.stroke(n,t),oe.dash,oe.cap);let sl=s.grid;sl.show&&rs(Wt,sl.filter(n,be,t,V,ge),o,o==0?2:1,o==0?Re:de,o==0?ht:Ue,ze(sl.width*Me,3),sl.stroke(n,t),sl.dash,sl.cap),le.show&&rs([je],[1],o==0?1:0,o==0?1:2,o==1?Re:de,o==1?ht:Ue,ze(le.width*Me,3),le.stroke(n,t),le.dash,le.cap)}ut("drawAxes")}function Fl(t){T.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let kn=!1,os=!1,nn=[];function xr(){os=!1;for(let t=0;t<nn.length;t++)ut(...nn[t]);nn.length=0}function zl(){kn||(Go(ui),kn=!0)}function br(t,s=!1){kn=!0,os=s,t(n),ui(),s&&nn.length>0&&queueMicrotask(xr)}n.batch=br;function ui(){if(Yt&&(dr(),Yt=!1),Vt&&($l(),Vt=!1),$t){if(We(z,Bl,O),We(z,cn,$),We(z,pn,x),We(z,hn,_),We(F,Bl,O),We(F,cn,$),We(F,pn,x),We(F,hn,_),We(g,pn,te),We(g,hn,S),k.width=et(te*Me),k.height=et(S*Me),H.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let v=f===3||f===0?r:0,b=f%2==1;We(t,b?"left":"top",o-v),We(t,b?"width":"height",r),We(t,b?"top":"left",b?$:O),We(t,b?"height":"width",b?_:x),Ds(t,Tl)}else Ft(t,Tl)}),bn=Rl=Xn=es=ts=ls=ns=ss=$n=null,Et=1,rn(!0),O!=me||$!=se||x!=ee||_!=Ee){Fl(!1);let t=x/ee,s=_/Ee;if(Ce&&!Lt&&I.left>=0){I.left*=t,I.top*=s,Ol&&il(Ol,et(I.left),0,x,_),Vl&&il(Vl,0,et(I.top),x,_);for(let r=0;r<Mt.length;r++){let o=Mt[r];o!=null&&(Cl[r]*=t,Pl[r]*=s,il(o,Bt(Cl[r]),Bt(Pl[r]),x,_))}}if(Ge.show&&!jt&&Ge.left>=0&&Ge.width>0){Ge.left*=t,Ge.width*=t,Ge.top*=s,Ge.height*=s;for(let r in hs)We(Hl,r,Ge[r])}me=O,se=$,ee=x,Ee=_}ut("setSize"),$t=!1}te>0&&S>0&&(m.clearRect(0,0,k.width,k.height),ut("drawClear"),G.forEach(t=>t()),ut("draw")),Ge.show&&jt&&(Tn(Ge),jt=!1),Ce&&Lt&&(bl(null,!0,!1),Lt=!1),re.show&&re.live&&Be&&(ds(),Be=!1),p||(p=!0,n.status=1,ut("ready")),ln=!1,kn=!1}n.redraw=(t,s)=>{Vt=s||!1,t!==!1?hl(L,M.min,M.max):zl()};function us(t,s){let r=w[t];if(r.from==null){if(ft==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(ft>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==L&&r.distr==2&&ft>0&&(s.min=Qt(s.min,l[0]),s.max=Qt(s.max,l[0]),s.min==s.max&&s.max++),j[t]=s,Yt=!0,zl()}}n.setScale=us;let cs,fs,Ol,Vl,ci,fi,Nl,Gl,di,pi,Ne,Ie,pl=!1;const dt=I.drag;let rt=dt.x,ot=dt.y;Ce&&(I.x&&(cs=It(oo,F)),I.y&&(fs=It(uo,F)),M.ori==0?(Ol=cs,Vl=fs):(Ol=fs,Vl=cs),Ne=I.left,Ie=I.top);const Ge=n.select=$e({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Hl=Ge.show?It(ro,Ge.over?F:z):null;function Tn(t,s){if(Ge.show){for(let r in t)Ge[r]=t[r],r in hs&&We(Hl,r,t[r]);s!==!1&&ut("setSelect")}}n.setSelect=Tn;function Sr(t){if(T[t].show)ke&&Ds(ve[t],Tl);else if(ke&&Ft(ve[t],Tl),Ce){let r=fl?Mt[0]:Mt[t];r!=null&&il(r,-10,-10,x,_)}}function hl(t,s,r){us(t,{min:s,max:r})}function tl(t,s,r,o){s.focus!=null&&Er(t),s.show!=null&&T.forEach((f,v)=>{v>0&&(t==v||t==null)&&(f.show=s.show,Sr(v),a==2?(hl(f.facets[0].scale,null,null),hl(f.facets[1].scale,null,null)):hl(f.scale,null,null),zl())}),r!==!1&&ut("setSeries",t,s),o&&on("setSeries",n,t,s)}n.setSeries=tl;function yr(t,s){$e(K[t],s)}function kr(t,s){t.fill=we(t.fill||null),t.dir=Se(t.dir,-1),s=s??K.length,K.splice(s,0,t)}function Tr(t){t==null?K.length=0:K.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Mr(t,s){T[t].alpha=s,Ce&&Mt[t]!=null&&(Mt[t].style.opacity=s),ke&&ve[t]&&(ve[t].style.opacity=s)}let rl,vl,xl;const Wl={focus:!0};function Er(t){if(t!=xl){let s=t==null,r=Gt.alpha!=1;T.forEach((o,f)=>{if(a==1||f>0){let v=s||f==0||f==t;o._focus=s?null:v,r&&Mr(f,v?1:Gt.alpha)}}),xl=t,r&&zl()}}ke&&cl&&Ke(zi,X,t=>{I._lock||(al(t),xl!=null&&tl(null,Wl,!0,Xe.setSeries))});function ll(t,s,r){let o=w[s];r&&(t=t/Me-(o.ori==1?$:O));let f=x;o.ori==1&&(f=_,t=f-t),o.dir==-1&&(t=f-t);let v=o._min,b=o._max,E=t/f,A=v+(b-v)*E,V=o.distr;return V==3?jl(10,A):V==4?Eo(A,o.asinh):V==100?o.bwd(A):A}function Ar(t,s){let r=ll(t,L,s);return Qt(r,l[0],it,at)}n.valToIdx=t=>Qt(t,l[0]),n.posToIdx=Ar,n.posToVal=ll,n.valToPos=(t,s,r)=>w[s].ori==0?u(t,w[s],r?Ue:x,r?de:0):c(t,w[s],r?ht:_,r?Re:0),n.setCursor=(t,s,r)=>{Ne=t.left,Ie=t.top,bl(null,s,r)};function hi(t,s){We(Hl,Bl,Ge.left=t),We(Hl,pn,Ge.width=s)}function vi(t,s){We(Hl,cn,Ge.top=t),We(Hl,hn,Ge.height=s)}let sn=M.ori==0?hi:vi,an=M.ori==1?hi:vi;function Dr(){if(ke&&re.live)for(let t=a==2?1:0;t<T.length;t++){if(t==0&&Qe)continue;let s=re.values[t],r=0;for(let o in s)qe[t][r++].firstChild.nodeValue=s[o]}}function ds(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{ce[o]=r}):Co(t.idx)||ce.fill(t.idx),re.idx=ce[0]),ke&&re.live){for(let r=0;r<T.length;r++)(r>0||a==1&&!Qe)&&Lr(r,ce[r]);Dr()}Be=!1,s!==!1&&ut("setLegend")}n.setLegend=ds;function Lr(t,s){let r=T[t],o=t==0&&ne==2?qt:l[t],f;Qe?f=r.values(n,t,s)??pt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?pt:{_:f}),re.values[t]=f}function bl(t,s,r){di=Ne,pi=Ie,[Ne,Ie]=I.move(n,Ne,Ie),I.left=Ne,I.top=Ie,Ce&&(Ol&&il(Ol,et(Ne),0,x,_),Vl&&il(Vl,0,et(Ie),x,_));let o,f=it>at;rl=Fe,vl=null;let v=M.ori==0?x:_,b=M.ori==1?x:_;if(Ne<0||ft==0||f){o=I.idx=null;for(let E=0;E<T.length;E++){let A=Mt[E];A!=null&&il(A,-10,-10,x,_)}cl&&tl(null,Wl,!0,t==null&&Xe.setSeries),re.live&&(ce.fill(o),Be=!0)}else{let E,A,V;a==1&&(E=M.ori==0?Ne:Ie,A=ll(E,L),o=I.idx=Qt(A,l[0],it,at),V=W(l[0][o],M,v,0));let B=-10,q=-10,fe=0,Te=0,be=!0,ge="",oe="";for(let le=a==2?1:0;le<T.length;le++){let He=T[le],Ye=ce[le],ct=Ye==null?null:a==1?l[le][Ye]:l[le][1][Ye],Le=I.dataIdx(n,le,o,A),je=Le==null?null:a==1?l[le][Le]:l[le][1][Le];if(Be=Be||je!=ct||Le!=Ye,ce[le]=Le,le>0&&He.show){let Ct=Le==null?-10:Le==o?V:W(a==1?l[0][Le]:l[le][0][Le],M,v,0),bt=je==null?-10:J(je,a==1?w[He.scale]:w[He.facets[1].scale],b,0);if(cl&&je!=null){let Ht=M.ori==1?Ne:Ie,Kt=tt(Gt.dist(n,le,Le,bt,Ht));if(Kt<rl){let nl=Gt.bias;if(nl!=0){let Pt=ll(Ht,He.scale),Wt=je>=0?1:-1,Jt=Pt>=0?1:-1;Jt==Wt&&(Jt==1?nl==1?je>=Pt:je<=Pt:nl==1?je<=Pt:je>=Pt)&&(rl=Kt,vl=le)}else rl=Kt,vl=le}}if(Be||fl){let Ht,Kt;M.ori==0?(Ht=Ct,Kt=bt):(Ht=bt,Kt=Ct);let nl,Pt,Wt,Jt,sl,St,Rt=!0,Sl=st.bbox;if(Sl!=null){Rt=!1;let yt=Sl(n,le);Wt=yt.left,Jt=yt.top,nl=yt.width,Pt=yt.height}else Wt=Ht,Jt=Kt,nl=Pt=st.size(n,le);if(St=st.fill(n,le),sl=st.stroke(n,le),fl)le==vl&&rl<=Gt.prox&&(B=Wt,q=Jt,fe=nl,Te=Pt,be=Rt,ge=St,oe=sl);else{let yt=Mt[le];yt!=null&&(Cl[le]=Wt,Pl[le]=Jt,Ii(yt,nl,Pt,Rt),Hi(yt,St,sl),il(yt,Bt(Wt),Bt(Jt),x,_))}}}}if(fl){let le=Gt.prox,He=xl==null?rl<=le:rl>le||vl!=xl;if(Be||He){let Ye=Mt[0];Ye!=null&&(Cl[0]=B,Pl[0]=q,Ii(Ye,fe,Te,be),Hi(Ye,ge,oe),il(Ye,Bt(B),Bt(q),x,_))}}}if(Ge.show&&pl)if(t!=null){let[E,A]=Xe.scales,[V,B]=Xe.match,[q,fe]=t.cursor.sync.scales,Te=t.cursor.drag;if(rt=Te._x,ot=Te._y,rt||ot){let{left:be,top:ge,width:oe,height:le}=t.select,He=t.scales[q].ori,Ye=t.posToVal,ct,Le,je,Ct,bt,Ht=E!=null&&V(E,q),Kt=A!=null&&B(A,fe);Ht&&rt?(He==0?(ct=be,Le=oe):(ct=ge,Le=le),je=w[E],Ct=W(Ye(ct,q),je,v,0),bt=W(Ye(ct+Le,q),je,v,0),sn(Xt(Ct,bt),tt(bt-Ct))):sn(0,v),Kt&&ot?(He==1?(ct=be,Le=oe):(ct=ge,Le=le),je=w[A],Ct=J(Ye(ct,fe),je,b,0),bt=J(Ye(ct+Le,fe),je,b,0),an(Xt(Ct,bt),tt(bt-Ct))):an(0,b)}else vs()}else{let E=tt(di-ci),A=tt(pi-fi);if(M.ori==1){let fe=E;E=A,A=fe}rt=dt.x&&E>=dt.dist,ot=dt.y&&A>=dt.dist;let V=dt.uni;V!=null?rt&&ot&&(rt=E>=V,ot=A>=V,!rt&&!ot&&(A>E?ot=!0:rt=!0)):dt.x&&dt.y&&(rt||ot)&&(rt=ot=!0);let B,q;rt&&(M.ori==0?(B=Nl,q=Ne):(B=Gl,q=Ie),sn(Xt(B,q),tt(q-B)),ot||an(0,b)),ot&&(M.ori==1?(B=Nl,q=Ne):(B=Gl,q=Ie),an(Xt(B,q),tt(q-B)),rt||sn(0,v)),!rt&&!ot&&(sn(0,0),an(0,0))}if(dt._x=rt,dt._y=ot,t==null){if(r){if(Mi!=null){let[E,A]=Xe.scales;Xe.values[0]=E!=null?ll(M.ori==0?Ne:Ie,E):null,Xe.values[1]=A!=null?ll(M.ori==1?Ne:Ie,A):null}on(xs,n,Ne,Ie,x,_,o)}if(cl){let E=r&&Xe.setSeries,A=Gt.prox;xl==null?rl<=A&&tl(vl,Wl,!0,E):rl>A?tl(null,Wl,!0,E):vl!=xl&&tl(vl,Wl,!0,E)}}Be&&(re.idx=o,ds()),s!==!1&&ut("setCursor")}let ml=null;Object.defineProperty(n,"rect",{get(){return ml==null&&rn(!1),ml}});function rn(t=!1){t?ml=null:(ml=F.getBoundingClientRect(),ut("syncRect",ml))}function mi(t,s,r,o,f,v,b){I._lock||pl&&t!=null&&t.movementX==0&&t.movementY==0||(ps(t,s,r,o,f,v,b,!1,t!=null),t!=null?bl(null,!0,!0):bl(s,!0,!1))}function ps(t,s,r,o,f,v,b,E,A){if(ml==null&&rn(!1),al(t),t!=null)r=t.clientX-ml.left,o=t.clientY-ml.top;else{if(r<0||o<0){Ne=-10,Ie=-10;return}let[V,B]=Xe.scales,q=s.cursor.sync,[fe,Te]=q.values,[be,ge]=q.scales,[oe,le]=Xe.match,He=s.axes[0].side%2==1,Ye=M.ori==0?x:_,ct=M.ori==1?x:_,Le=He?v:f,je=He?f:v,Ct=He?o:r,bt=He?r:o;if(be!=null?r=oe(V,be)?d(fe,w[V],Ye,0):-10:r=Ye*(Ct/Le),ge!=null?o=le(B,ge)?d(Te,w[B],ct,0):-10:o=ct*(bt/je),M.ori==1){let Ht=r;r=o,o=Ht}}A&&(s==null||s.cursor.event.type==xs)&&((r<=1||r>=x-1)&&(r=yl(r,x)),(o<=1||o>=_-1)&&(o=yl(o,_))),E?(ci=r,fi=o,[Nl,Gl]=I.move(n,r,o)):(Ne=r,Ie=o)}const hs={width:0,height:0,left:0,top:0};function vs(){Tn(hs,!1)}let gi,wi,_i,xi;function bi(t,s,r,o,f,v,b){pl=!0,rt=ot=dt._x=dt._y=!1,ps(t,s,r,o,f,v,b,!0,!1),t!=null&&(Ke(bs,Es,Si,!1),on(Ri,n,Nl,Gl,x,_,null));let{left:E,top:A,width:V,height:B}=Ge;gi=E,wi=A,_i=V,xi=B}function Si(t,s,r,o,f,v,b){pl=dt._x=dt._y=!1,ps(t,s,r,o,f,v,b,!1,!0);let{left:E,top:A,width:V,height:B}=Ge,q=V>0||B>0,fe=gi!=E||wi!=A||_i!=V||xi!=B;if(q&&fe&&Tn(Ge),dt.setScale&&q&&fe){let Te=E,be=V,ge=A,oe=B;if(M.ori==1&&(Te=A,be=B,ge=E,oe=V),rt&&hl(L,ll(Te,L),ll(Te+be,L)),ot)for(let le in w){let He=w[le];le!=L&&He.from==null&&He.min!=Fe&&hl(le,ll(ge+oe,le),ll(ge,le))}vs()}else I.lock&&(I._lock=!I._lock,bl(s,!0,t!=null));t!=null&&(Dt(bs,Es),on(bs,n,Ne,Ie,x,_,null))}function Cr(t,s,r,o,f,v,b){if(I._lock)return;al(t);let E=pl;if(pl){let A=!0,V=!0,B=10,q,fe;M.ori==0?(q=rt,fe=ot):(q=ot,fe=rt),q&&fe&&(A=Ne<=B||Ne>=x-B,V=Ie<=B||Ie>=_-B),q&&A&&(Ne=Ne<Nl?0:x),fe&&V&&(Ie=Ie<Gl?0:_),bl(null,!0,!0),pl=!1}Ne=-10,Ie=-10,ce.fill(null),bl(null,!0,!0),E&&(pl=E)}function yi(t,s,r,o,f,v,b){I._lock||(al(t),Qn(),vs(),t!=null&&on(Oi,n,Ne,Ie,x,_,null))}function ki(){H.forEach(qu),Nt(n.width,n.height,!0)}Al(zn,Yl,ki);const Il={};Il.mousedown=bi,Il.mousemove=mi,Il.mouseup=Si,Il.dblclick=yi,Il.setSeries=(t,s,r,o)=>{let f=Xe.match[2];r=f(n,s,r),r!=-1&&tl(r,o,!0,!1)},Ce&&(Ke(Ri,F,bi),Ke(xs,F,mi),Ke(Fi,F,t=>{al(t),rn(!1)}),Ke(zi,F,Cr),Ke(Oi,F,yi),zs.add(n),n.syncRect=rn);const Mn=n.hooks=e.hooks||{};function ut(t,s,r){os?nn.push([t,s,r]):t in Mn&&Mn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Mn[s]=(Mn[s]||[]).concat(t.hooks[s])});const Ti=(t,s,r)=>r,Xe=$e({key:null,setSeries:!1,filters:{pub:qi,sub:qi},scales:[L,T[1]?T[1].scale:null],match:[Ki,Ki,Ti],values:[null,null]},I.sync);Xe.match.length==2&&Xe.match.push(Ti),I.sync=Xe;const Mi=Xe.key,ms=Za(Mi);function on(t,s,r,o,f,v,b){Xe.filters.pub(t,s,r,o,f,v,b)&&ms.pub(t,s,r,o,f,v,b)}ms.sub(n);function Pr(t,s,r,o,f,v,b){Xe.filters.sub(t,s,r,o,f,v,b)&&Il[t](null,s,r,o,f,v,b)}n.pub=Pr;function Rr(){ms.unsub(n),zs.delete(n),xt.clear(),Ls(zn,Yl,ki),h.remove(),X?.remove(),ut("destroy")}n.destroy=Rr;function gs(){ut("init",e,l),li(l||e.data,!1),j[L]?us(L,j[L]):Qn(),jt=Ge.show&&(Ge.width>0||Ge.height>0),Lt=Be=!0,Nt(e.width,e.height)}return T.forEach(ei),H.forEach(fr),i?i instanceof HTMLElement?(i.appendChild(h),gs()):i(n,gs):gs(),n}lt.assign=$e;lt.fmtNum=Us;lt.rangeNum=On;lt.rangeLog=In;lt.rangeAsinh=Is;lt.orient=Ll;lt.pxRatio=Me;lt.join=No;lt.fmtDate=js,lt.tzDate=Jo;lt.sync=Za;{lt.addGap=Cu,lt.clipGaps=Yn;let e=lt.paths={points:lr};e.linear=sr,e.stepped=Fu,e.bars=zu,e.spline=Vu}const or="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${or}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${or}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=Ve('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=Ve('<button type="button" class="og-btn svelte-3wi8ix" title="Click to set Original Gravity"><span class="stat-value svelte-3wi8ix"> </span> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),$u=Ve('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div></div></div>'),ec=Ve('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function tc(e,l){Gn(l,!0);let i=Je(!1),n=Je(""),a=Je(null),u=At(()=>Cn.config.temp_units==="C"),c=At(_a),d=At(()=>{if(l.readings.length===0)return null;const w=[...l.readings].sort((X,Pe)=>new Date(X.timestamp).getTime()-new Date(Pe.timestamp).getTime()),K=w[0],L=w[w.length-1],U=w.map(X=>X.sg_calibrated??X.sg_raw).filter(X=>X!==null),G=w.map(X=>X.temp_calibrated??X.temp_raw).filter(X=>X!==null);if(U.length===0)return null;const ie=U[U.length-1],Q=U[0],M=Math.max(...U),ne=Math.min(...U),W=new Date(K.timestamp).getTime(),J=new Date(L.timestamp).getTime(),ae=(J-W)/(1e3*60*60*24),Y=ae>0?(ie-Q)/ae:0;let ye=null,he=null,ue=null,ce=null;if(G.length>0){const X=G[G.length-1],Pe=G.reduce((qe,Ze)=>qe+Ze,0)/G.length,Oe=Math.max(...G),ve=Math.min(...G);ye=y(u)?dn(X):X,he=y(u)?dn(Pe):Pe,ue=y(u)?dn(Oe):Oe,ce=y(u)?dn(ve):ve}let re=0;const I=.001;for(let X=U.length-2;X>=0;X--)if(Math.abs(U[X]-ie)>I){const Pe=new Date(w[X+1].timestamp).getTime();re=(J-Pe)/(1e3*60*60*24);break}let ke=null,Ce=null;const pe=l.originalGravity;return pe!==null&&pe>1&&(ke=(pe-ie)/(pe-1)*100,Ce=(pe-ie)*131.25),{currentSg:ie,firstSg:Q,highSg:M,lowSg:ne,currentTemp:ye,avgTemp:he,highTemp:ue,lowTemp:ce,fermRate:Y,durationDays:ae,daysAtCurrentSg:re,apparentAttenuation:ke,abv:Ce}});function p(){xe(n,l.originalGravity?.toFixed(3)??"",!0),xe(i,!0),setTimeout(()=>y(a)?.focus(),0)}function h(){const w=y(n).trim();if(!w)l.onOgChange(null);else{const K=parseFloat(w);!isNaN(K)&&K>=.99&&K<=1.2&&l.onOgChange(K)}xe(i,!1)}function k(w){w.key==="Enter"?h():w.key==="Escape"&&xe(i,!1)}function m(w){return w.toFixed(3)}function g(w){return`${w>=0?"+":""}${w.toFixed(4)}`}function z(w){return w<1?`${(w*24).toFixed(1)}h`:`${w.toFixed(1)}d`}function F(w){return w===null?"--":w.toFixed(1)}function P(w){return w===null?"--":`${w.toFixed(1)}%`}var R=ma(),N=Vs(R);{var T=w=>{var K=$u(),L=C(K),U=C(L),G=Z(C(U),2),ie=Z(C(G),2),Q=C(ie,!0);D(ie),D(G);var M=Z(G,2),ne=Z(C(M),2),W=C(ne,!0);D(ne),D(M);var J=Z(M,2),j=Z(C(J),2),ae=C(j,!0);D(j),D(J);var Y=Z(J,2),ye=Z(C(Y),2),he=C(ye,!0);D(ye),D(Y),D(U);var ue=Z(U,2),ce=Z(C(ue),2),re=Z(C(ce),2),I=C(re,!0),ke=Z(I),Ce=C(ke,!0);D(ke),D(re),D(ce);var pe=Z(ce,2),X=Z(C(pe),2),Pe=C(X,!0),Oe=Z(Pe),ve=C(Oe,!0);D(Oe),D(X),D(pe);var qe=Z(pe,2),Ze=Z(C(qe),2),Qe=C(Ze,!0),pt=Z(Qe),wt=C(pt,!0);D(pt),D(Ze),D(qe);var _t=Z(qe,2),Tt=Z(C(_t),2),Ut=C(Tt,!0),xt=Z(Ut),Ke=C(xt,!0);D(xt),D(Tt),D(_t),D(ue),D(L);var Dt=Z(L,2),te=C(Dt),S=Z(C(te),2);let x;var _=C(S);D(S),D(te);var O=Z(te,2),$=Z(C(O),2),me=C($,!0);D($),D(O);var se=Z(O,2),ee=Z(C(se),2),Ee=C(ee,!0);D(ee),D(se);var de=Z(se,2),Re=Z(C(de),2);{var Ue=Nt=>{var vt=Qu();xa(vt),vt.__keydown=k,Ns(vt,el=>xe(a,el),()=>y(a)),ga("blur",vt,h),ba(vt,()=>y(n),el=>xe(n,el)),De(Nt,vt)},ht=Nt=>{var vt=Xu();vt.__click=p;var el=C(vt),$l=C(el,!0);D(el),Ml(2),D(vt),mt(en=>_e($l,en),[()=>l.originalGravity?m(l.originalGravity):"--"]),De(Nt,vt)};gt(Re,Nt=>{y(i)?Nt(Ue):Nt(ht,!1)})}D(de);var Yt=Z(de,2),$t=Z(C(Yt),2),Vt=C($t,!0);D($t),D(Yt);var Lt=Z(Yt,2),jt=Z(C(Lt),2),Be=C(jt,!0);D(jt),D(Lt),D(Dt),D(K),mt((Nt,vt,el,$l,en,Jn,Zn,al,st,Gt,cl,fl,Mt)=>{_e(Q,Nt),_e(W,vt),_e(ae,el),_e(he,$l),_e(I,en),_e(Ce,y(c)),_e(Pe,Jn),_e(ve,y(c)),_e(Qe,Zn),_e(wt,y(c)),_e(Ut,al),_e(Ke,y(c)),x=El(S,1,"stat-value rate svelte-3wi8ix",null,x,{fermenting:y(d).fermRate<0}),_e(_,`${st??""}/day`),_e(me,Gt),_e(Ee,cl),_e(Vt,fl),_e(Be,Mt)},[()=>m(y(d).currentSg),()=>m(y(d).firstSg),()=>m(y(d).highSg),()=>m(y(d).lowSg),()=>F(y(d).currentTemp),()=>F(y(d).avgTemp),()=>F(y(d).highTemp),()=>F(y(d).lowTemp),()=>g(y(d).fermRate),()=>z(y(d).durationDays),()=>z(y(d).daysAtCurrentSg),()=>P(y(d).apparentAttenuation),()=>P(y(d).abv)]),De(w,K)},H=w=>{var K=ec();De(w,K)};gt(N,w=>{y(d)?w(T):w(H,!1)})}De(e,R),Hn()}Nn(["keydown","click"]);var lc=Ve('<button type="button"> </button>'),nc=Ve("<option> </option>"),sc=Ve('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),ic=Ve('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),ac=Ve('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),rc=Ve('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function oc(e,l){Gn(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=At(()=>Cn.config.smoothing_enabled),u=At(()=>Cn.config.smoothing_samples),c=Je("UTC"),d=Je(!1),p=Je(0),h=Je(3),k=Ms(l,"originalGravity",3,null),m=At(()=>Cn.config.temp_units==="C"),g,z=null,F=Je(!0),P=Je(null),R=Je(24),N=Je(Ai([])),T=Je(Ai([]));const H={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},w="#facc15",K="rgba(250, 204, 21, 0.3)",L="#71717a",U="#a1a1aa",G="rgba(255, 255, 255, 0.04)",ie="#22d3ee";function Q(S,x,_){const O=new Date(S*1e3);try{return _?O.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:x}):O.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:x})}catch($){return console.warn("Invalid timezone:",x,$),_?O.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):O.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function M(S,x,_){const O=w,$=H[l.tiltColor]||U;return{width:S,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(me,se,ee)=>{const Ee=(ee-se)*.1||.005;return[se-Ee,ee+Ee]}},temp:{auto:!0,range:(me,se,ee)=>{const Ee=ee-se,de=10;if(Ee<de){const Ue=(ee+se)/2;return[Ue-de/2,Ue+de/2]}const Re=Ee*.1;return[se-Re,ee+Re]}}},axes:[{stroke:L,grid:{stroke:G,width:1},ticks:{stroke:G,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(me,se)=>se.map(ee=>Q(ee,_,y(R)<=24))},{scale:"sg",stroke:O,grid:{stroke:G,width:1},ticks:{stroke:G,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(me,se)=>se.map(ee=>ee.toFixed(3)),side:3},{scale:"temp",stroke:$,grid:{show:!1},ticks:{stroke:G,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(me,se)=>se.map(ee=>ee.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:O,width:2,fill:(me,se)=>{const ee=me.ctx.createLinearGradient(0,me.bbox.top,0,me.bbox.top+me.bbox.height);return ee.addColorStop(0,K),ee.addColorStop(1,"transparent"),ee},points:{show:!1},paths:lt.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:$,width:1.5,dash:[4,4],points:{show:!1},paths:lt.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:ie,width:1.5,dash:[2,4],points:{show:!1},paths:lt.paths.spline?.()}]}}function ne(S,x){if(x<=1)return S;const _=[];for(let O=0;O<S.length;O++){const $=[],me=Math.floor(x/2);for(let se=Math.max(0,O-me);se<=Math.min(S.length-1,O+me);se++){const ee=S[se];ee!==null&&$.push(ee)}$.length>0?_.push($.reduce((se,ee)=>se+ee,0)/$.length):_.push(null)}return _}function W(S,x,_,O,$){if(S.length<=$)return[S,x,_,O];const me=Math.ceil(S.length/$),se=[],ee=[],Ee=[],de=[];for(let Re=0;Re<S.length;Re+=me){const Ue=Math.min(Re+me,S.length);let ht=0,Yt=0,$t=0,Vt=0,Lt=0,jt=0;for(let Be=Re;Be<Ue;Be++)x[Be]!==null&&(ht+=x[Be],Yt++),_[Be]!==null&&($t+=_[Be],Vt++),O[Be]!==null&&(Lt+=O[Be],jt++);se.push(S[Math.floor((Re+Ue-1)/2)]),ee.push(Yt>0?ht/Yt:null),Ee.push(Vt>0?$t/Vt:null),de.push(jt>0?Lt/jt:null)}return[se,ee,Ee,de]}function J(S){return!S.endsWith("Z")&&!S.match(/[+-]\d{2}:\d{2}$/)&&(S=S+"Z"),new Date(S).getTime()/1e3}function j(S,x,_){if(S.length===0||x.length===0)return x.map(()=>null);const O=[...S].sort((se,ee)=>J(se.timestamp)-J(ee.timestamp)),$=O.map(se=>J(se.timestamp)),me=O.map(se=>se.temperature===null?null:_?se.temperature:se.temperature*9/5+32);return x.map(se=>{let ee=null,Ee=null;for(let de=0;de<$.length;de++)if($[de]<=se&&(ee={time:$[de],temp:me[de]}),$[de]>=se&&Ee===null){Ee={time:$[de],temp:me[de]};break}if(ee&&Ee&&ee.temp!==null&&Ee.temp!==null){if(ee.time===Ee.time)return ee.temp;const de=(se-ee.time)/(Ee.time-ee.time);return ee.temp+de*(Ee.temp-ee.temp)}return ee!==null&&ee.temp!==null?ee.temp:Ee!==null&&Ee.temp!==null?Ee.temp:null})}function ae(S,x,_){const O=[...S].reverse();let $=[],me=[],se=[];for(const de of O){$.push(J(de.timestamp)),me.push(de.sg_calibrated??de.sg_raw);const Re=de.temp_calibrated??de.temp_raw;Re!==null?se.push(_?dn(Re):Re):se.push(null)}let ee=j(x,$,_);return y(a)&&y(u)>1&&(me=ne(me,y(u)),se=ne(se,y(u)),ee=ne(ee,y(u))),[$,me,se,ee]=W($,me,se,ee,500),[$,me,se,ee]}const Y=3e4;async function ye(S=!1){const _=Date.now()-y(p);if(!(!S&&y(p)>0&&_<Y)){xe(F,!0),xe(P,null);try{const[O,$]=await Promise.all([Ju(l.tiltId,y(R)),Zu(y(R)).catch(()=>[])]);xe(N,O,!0),xe(T,$,!0),he()}catch(O){xe(P,O instanceof Error?O.message:"Failed to load data",!0)}finally{xe(p,Date.now(),!0),xe(F,!1)}}}function he(){if(!g||y(N).length===0)return;const S=ae(y(N),y(T),y(m)),x=M(g.clientWidth,y(m),y(c));z&&z.destroy(),z=new lt(x,S,g)}function ue(){z&&g&&z.setSize({width:g.clientWidth,height:220})}let ce=null;function re(){if(ce&&(clearInterval(ce),ce=null),y(h)>0){const S=y(h)*60*1e3;ce=setInterval(()=>{y(F)||ye(!1)},S)}}wa(async()=>{const S=localStorage.getItem(i);if(S!==null){const x=parseInt(S,10);Number.isNaN(x)||xe(h,x,!0)}try{const x=await fetch("/api/system/timezone");if(x.ok){const _=await x.json();xe(c,_.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await ye(!0),xe(d,!0),window.addEventListener("resize",ue),re()}),Gr(()=>{z?.destroy(),window.removeEventListener("resize",ue),ce&&clearInterval(ce)});let I=Je(null);Ln(()=>{const S=y(R);y(d)&&y(I)!==null&&y(I)!==S&&ye(!0),xe(I,S,!0)}),Ln(()=>{y(m)!==void 0&&y(N).length>0&&g&&he()}),Ln(()=>{y(a),y(u),y(N).length>0&&g&&he()});function ke(S){const x=Number(S.target.value);xe(h,x,!0),localStorage.setItem(i,String(x)),re(),ye(!0)}var Ce=rc(),pe=C(Ce),X=C(pe);wn(X,21,()=>Ku,Fn,(S,x)=>{var _=lc();let O;_.__click=()=>xe(R,y(x).hours,!0);var $=C(_,!0);D(_),mt(()=>{O=El(_,1,"range-btn svelte-1e832qd",null,O,{active:y(R)===y(x).hours}),_e($,y(x).label)}),De(S,_)}),D(X);var Pe=Z(X,2),Oe=C(Pe),ve=Z(C(Oe),2);ve.__change=ke,wn(ve,21,()=>n,Fn,(S,x)=>{var _=nc(),O=C(_,!0);D(_);var $={};mt(()=>{_e(O,y(x).label),$!==($=y(x).value)&&(_.value=(_.__value=y(x).value)??"")}),De(S,_)}),D(ve);var qe;Jr(ve),D(Oe);var Ze=Z(Oe,2),Qe=Z(C(Ze),2),pt=C(Qe);Ml(2),D(Qe),Ml(2),D(Ze),D(Pe),D(pe);var wt=Z(pe,2),_t=C(wt);{var Tt=S=>{var x=sc();De(S,x)};gt(_t,S=>{y(F)&&S(Tt)})}var Ut=Z(_t,2);{var xt=S=>{var x=ic(),_=Z(C(x),2);_.__click=()=>ye(!0),D(x),De(S,x)},Ke=S=>{var x=ma(),_=Vs(x);{var O=$=>{var me=ac();De($,me)};gt(_,$=>{y(N).length===0&&$(O)},!0)}De(S,x)};gt(Ut,S=>{y(P)?S(xt):S(Ke,!1)})}D(wt),Ns(wt,S=>g=S,()=>g);var Dt=Z(wt,2);{var te=S=>{{let x=At(()=>l.onOgChange??(()=>{}));tc(S,{get readings(){return y(N)},get originalGravity(){return k()},get onOgChange(){return y(x)}})}};gt(Dt,S=>{y(N).length>0&&S(te)})}D(Ce),mt(()=>{qe!==(qe=y(h))&&(ve.value=(ve.__value=y(h))??"",Zr(ve,y(h))),Pn(pt,`background: ${(H[l.tiltColor]||"var(--text-secondary)")??""};`)}),De(e,Ce),Hn()}Nn(["click","change"]);var uc=Ve('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),cc=Ve('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),fc=Ve('<div class="w-1 rounded-sm transition-all"></div>'),dc=Ve('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),pc=Ve("<div><!></div>"),hc=Ve('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),vc=Ve('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function mc(e,l){Gn(l,!0);let i=Ms(l,"expanded",3,!1),n=Ms(l,"wide",3,!1),a=Je(!1);Ln(()=>{i()&&!y(a)&&xe(a,!0)});let u=Je(!1),c=Je(""),d=Je(null),p=Je(!1);function h(){xe(c,l.tilt.beer_name,!0),xe(u,!0),setTimeout(()=>y(d)?.focus(),0)}async function k(){if(y(p))return;const te=y(c).trim();if(!te||te===l.tilt.beer_name){xe(u,!1);return}xe(p,!0);const S=await Yr(l.tilt.id,te);xe(p,!1),S&&xe(u,!1)}function m(te){te.key==="Enter"?k():te.key==="Escape"&&xe(u,!1)}async function g(te){await jr(l.tilt.id,te)}let z=At(_a);const F={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function P(te){return te.toFixed(3)}function R(te){return Br(te)}function N(te){return te>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:te>=-60?{bars:3,color:"var(--positive)",label:"Good"}:te>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function T(te){const S=Math.floor((Date.now()-new Date(te).getTime())/1e3);if(S<10)return"just now";if(S<60)return`${S}s ago`;const x=Math.floor(S/60);if(x<60)return`${x}m ago`;const _=Math.floor(x/60);return _<24?`${_}h ago`:`${Math.floor(_/24)}d ago`}let H=At(()=>F[l.tilt.color]||"var(--tilt-black)"),w=At(()=>N(l.tilt.rssi)),K=At(()=>T(l.tilt.last_seen));var L=vc();let U;var G=C(L),ie=Z(G,2),Q=C(ie),M=C(Q),ne=C(M);{var W=te=>{var S=uc();xa(S),S.__keydown=m,Ns(S,x=>xe(d,x),()=>y(d)),mt(()=>S.disabled=y(p)),ga("blur",S,k),ba(S,()=>y(c),x=>xe(c,x)),De(te,S)},J=te=>{var S=cc();S.__click=h;var x=C(S),_=C(x,!0);D(x),Ml(2),D(S),mt(()=>_e(_,l.tilt.beer_name)),De(te,S)};gt(ne,te=>{y(u)?te(W):te(J,!1)})}var j=Z(ne,2),ae=C(j),Y=Z(ae,2),ye=C(Y,!0);D(Y),D(j),D(M);var he=Z(M,2),ue=C(he);wn(ue,20,()=>Array(4),Fn,(te,S,x)=>{var _=fc();mt(()=>Pn(_,`
								height: ${8+x*4}px;
								background: ${(x<y(w).bars?y(w).color:"var(--bg-hover)")??""};
								opacity: ${x<y(w).bars?1:.4};
							`)),De(te,_)}),D(ue);var ce=Z(ue,2),re=C(ce);D(ce),D(he),D(Q);var I=Z(Q,2),ke=C(I),Ce=C(ke),pe=C(Ce,!0);D(Ce),Ml(2),D(ke);var X=Z(ke,2),Pe=C(X),Oe=C(Pe,!0),ve=Z(Oe),qe=C(ve,!0);D(ve),D(Pe),Ml(2),D(X),D(I);var Ze=Z(I,2);{var Qe=te=>{var S=dc(),x=Z(C(S),2),_=C(x,!0);D(x);var O=Z(x,4),$=C(O);D(O),D(S),mt((me,se)=>{_e(_,me),_e($,`${se??""}${y(z)??""}`)},[()=>P(l.tilt.sg_raw),()=>R(l.tilt.temp_raw)]),De(te,S)};gt(Ze,te=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&te(Qe)})}var pt=Z(Ze,2);{var wt=te=>{var S=pc();let x;var _=C(S);Qr(_,()=>l.tilt.id,O=>{oc(O,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:g})}),D(S),mt(()=>x=El(S,1,"chart-section svelte-3twv7v",null,x,{hidden:!i()})),De(te,S)};gt(pt,te=>{y(a)&&te(wt)})}var _t=Z(pt,2),Tt=C(_t),Ut=C(Tt);D(Tt);var xt=Z(Tt,2),Ke=C(xt);{var Dt=te=>{var S=hc();S.__click=function(...O){l.onToggleExpand?.apply(this,O)};var x=C(S);let _;D(S),mt(()=>{Di(S,"aria-label",i()?"Collapse chart":"Expand chart"),_=El(x,0,"w-4 h-4 transition-transform",null,_,{"rotate-180":i()})}),De(te,S)};gt(Ke,te=>{l.onToggleExpand&&te(Dt)})}Ml(2),D(xt),D(_t),D(ie),D(L),mt((te,S)=>{U=El(L,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,U,{expanded:i(),wide:n()}),Pn(G,`background: ${y(H)??""};`),Pn(ae,`background: ${y(H)??""};`),_e(ye,l.tilt.color),Di(he,"title",`${y(w).label??""} signal (${l.tilt.rssi??""} dBm)`),_e(re,`${l.tilt.rssi??""} dBm`),_e(pe,te),_e(Oe,S),_e(qe,y(z)),_e(Ut,`Updated ${y(K)??""}`)},[()=>P(l.tilt.sg),()=>R(l.tilt.temp)]),De(e,L),Hn()}Nn(["keydown","click"]);var gc=Ve('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),wc=Ve('<div class="alerts-list svelte-1uha8ag"></div>'),_c=Ve('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),xc=Ve('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),bc=Ve('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),Sc=Ve('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),yc=Ve('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),kc=Ve("<div></div>"),Tc=Ve("<!> <!>",1);function Nc(e,l){Gn(l,!0);let i=Je(!1),n=Je(!1);wa(()=>{const P=localStorage.getItem("brewsignal_alerts_dismissed"),R=localStorage.getItem("brewsignal_alerts_dismissed_time");return P==="true"&&R&&Date.now()-parseInt(R,10)<360*60*1e3&&xe(i,!0),qr(),()=>{Kr()}});let a=At(()=>Array.from(ws.tilts.values())),u=Je(null);function c(P){xe(u,y(u)===P?null:P,!0)}function d(){xe(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function p(){xe(n,!y(n))}var h=Tc();Ur("1uha8ag",P=>{Hr(()=>{Wr.title="Dashboard | BrewSignal"})});var k=Vs(h);{var m=P=>{var R=xc(),N=C(R),T=C(N),H=Z(C(T),4),w=C(H,!0);D(H),D(T);var K=Z(T,2);K.__click=d,D(N);var L=Z(N,2);{var U=Q=>{var M=wc();wn(M,21,()=>un.alerts,Fn,(ne,W)=>{var J=gc();let j;var ae=C(J),Y=C(ae);D(ae);var ye=Z(ae,2),he=C(ye,!0);D(ye),D(J),mt(()=>{j=El(J,1,"alert-item svelte-1uha8ag",null,j,{warning:y(W).level==="warning",critical:y(W).level==="critical"}),_e(Y,`${y(W).day??""}:`),_e(he,y(W).message)}),De(ne,J)}),D(M),De(Q,M)};gt(L,Q=>{y(n)||Q(U)})}var G=Z(L,2);{var ie=Q=>{var M=_c();M.__click=p;var ne=C(M,!0);D(M),mt(()=>_e(ne,y(n)?`Show ${un.alerts.length} alerts`:"Show less")),De(Q,M)};gt(G,Q=>{un.alerts.length>3&&Q(ie)})}D(R),mt(()=>_e(w,un.alerts.length)),De(P,R)};gt(k,P=>{un.alerts.length>0&&!y(i)&&P(m)})}var g=Z(k,2);{var z=P=>{var R=yc(),N=Z(C(R),4),T=C(N);{var H=U=>{var G=Fr("Waiting for Tilt hydrometers to broadcast...");De(U,G)},w=U=>{var G=bc();De(U,G)};gt(T,U=>{ws.connected?U(H):U(w,!1)})}D(N);var K=Z(N,2);{var L=U=>{var G=Sc();De(U,G)};gt(K,U=>{ws.connected&&U(L)})}D(R),De(P,R)},F=P=>{var R=kc();let N;wn(R,21,()=>y(a),T=>T.id,(T,H)=>{{let w=At(()=>y(u)===y(H).id),K=At(()=>y(a).length===1);mc(T,{get tilt(){return y(H)},get expanded(){return y(w)},get wide(){return y(K)},onToggleExpand:()=>c(y(H).id)})}}),D(R),mt(()=>N=El(R,1,"tilt-grid svelte-1uha8ag",null,N,{"single-tilt":y(a).length===1})),De(P,R)};gt(g,P=>{y(a).length===0?P(z):P(F,!1)})}De(e,h),Hn()}Nn(["click"]);export{Nc as component};
