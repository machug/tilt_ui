import{d as Bn,c as wa,a as ze,f as He,s as Te,g as xa,t as Fr}from"../chunks/lZYuFeLm.js";import{h as Or,k as zr,b4 as Nr,f as Gr,ab as Un,ak as Bs,g as _,am as Ft,af as Yn,ah as L,ag as K,aj as M,ac as at,al as Mt,s as Ee,an as Ml,p as Ri,ad as ba,b3 as Vr,ae as Rs,V as Hr,ai as Ir}from"../chunks/KfNDMb7P.js";import{e as yn,i as Gn}from"../chunks/BrMo0dxU.js";import{B as Wr,i as yt}from"../chunks/DN3Nn4_2.js";import{f as gn,c as zn,g as Sa,r as ya,s as kn,d as Br,h as Ur}from"../chunks/BYYzK3Gr.js";import{s as _l}from"../chunks/CMo0SdGN.js";import{u as Yr,c as qr,d as jr,e as Kr,a as ks}from"../chunks/CNF3ZaXk.js";import{w as pn}from"../chunks/Dp8S1B6d.js";import{s as xn}from"../chunks/QJqSGRkr.js";import{b as ka}from"../chunks/DvdFc3xZ.js";import{p as Vn,b as Us}from"../chunks/rFT0vVkq.js";import{i as Jr,s as Zr}from"../chunks/UBh9G4FY.js";function Qr(e,l,i){Or&&zr();var n=new Wr(e),a=!Nr();Gr(()=>{var c=l();a&&c!==null&&typeof c=="object"&&(c={}),n.ensure(c,i)})}const Xr=!0,vt="u-",$r="uplot",eo=vt+"hz",to=vt+"vt",lo=vt+"title",no=vt+"wrap",so=vt+"under",io=vt+"over",ao=vt+"axis",Fl=vt+"off",ro=vt+"select",oo=vt+"cursor-x",uo=vt+"cursor-y",co=vt+"cursor-pt",fo=vt+"legend",po=vt+"live",ho=vt+"inline",vo=vt+"series",go=vt+"marker",Pi=vt+"label",mo=vt+"value",mn="width",_n="height",hn="top",Fi="bottom",Jl="left",Ts="right",Ys="#000",Oi=Ys+"0",Es="mousemove",zi="mousedown",Ms="mouseup",Ni="mouseenter",Gi="mouseleave",Vi="dblclick",_o="resize",wo="scroll",Hi="change",Hn="dppxchange",qs="--",ln=typeof window<"u",Ps=ln?document:null,Ql=ln?window:null,xo=ln?navigator:null;let Oe,Pn;function Fs(){let e=devicePixelRatio;Oe!=e&&(Oe=e,Pn&&zs(Hi,Pn,Fs),Pn=matchMedia(`(min-resolution: ${Oe-.001}dppx) and (max-resolution: ${Oe+.001}dppx)`),Ol(Hi,Pn,Fs),Ql.dispatchEvent(new CustomEvent(Hn)))}function Yt(e,l){if(l!=null){let i=e.classList;!i.contains(l)&&i.add(l)}}function Os(e,l){let i=e.classList;i.contains(l)&&i.remove(l)}function Ze(e,l,i){e.style[l]=i+"px"}function sl(e,l,i,n){let a=Ps.createElement(e);return l!=null&&Yt(a,l),i?.insertBefore(a,n),a}function Xt(e,l){return sl("div",e,l)}const Ii=new WeakMap;function hl(e,l,i,n,a){let c="translate("+l+"px,"+i+"px)",u=Ii.get(e);c!=u&&(e.style.transform=c,Ii.set(e,c),l<0||i<0||l>n||i>a?Yt(e,Fl):Os(e,Fl))}const Wi=new WeakMap;function Bi(e,l,i){let n=l+i,a=Wi.get(e);n!=a&&(Wi.set(e,n),e.style.background=l,e.style.borderColor=i)}const Ui=new WeakMap;function Yi(e,l,i,n){let a=l+""+i,c=Ui.get(e);a!=c&&(Ui.set(e,a),e.style.height=i+"px",e.style.width=l+"px",e.style.marginLeft=n?-l/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}const js={passive:!0},bo={...js,capture:!0};function Ol(e,l,i,n){l.addEventListener(e,i,n?bo:js)}function zs(e,l,i,n){l.removeEventListener(e,i,js)}ln&&Fs();function il(e,l,i,n){let a;i=i||0,n=n||l.length-1;let c=n<=2147483647;for(;n-i>1;)a=c?i+n>>1:qt((i+n)/2),l[a]<e?i=a:n=a;return e-l[i]<=l[n]-e?i:n}function Ta(e){return(i,n,a)=>{let c=-1,u=-1;for(let p=n;p<=a;p++)if(e(i[p])){c=p;break}for(let p=a;p>=n;p--)if(e(i[p])){u=p;break}return[c,u]}}const Ea=e=>e!=null,Ma=e=>e!=null&&e>0,qn=Ta(Ea),So=Ta(Ma);function yo(e,l,i,n=0,a=!1){let c=a?So:qn,u=a?Ma:Ea;[l,i]=c(e,l,i);let p=e[l],d=e[l];if(l>-1)if(n==1)p=e[l],d=e[i];else if(n==-1)p=e[i],d=e[l];else for(let v=l;v<=i;v++){let b=e[v];u(b)&&(b<p?p=b:b>d&&(d=b))}return[p??Be,d??-Be]}function jn(e,l,i,n){let a=Ki(e),c=Ki(l);e==l&&(a==-1?(e*=i,l/=i):(e/=i,l*=i));let u=i==10?wl:Aa,p=a==1?qt:$t,d=c==1?$t:qt,v=p(u(pt(e))),b=d(u(pt(l))),g=Xl(i,v),m=Xl(i,b);return i==10&&(v<0&&(g=Ue(g,-v)),b<0&&(m=Ue(m,-b))),n||i==2?(e=g*a,l=m*c):(e=Ra(e,g),l=Kn(l,m)),[e,l]}function Ks(e,l,i,n){let a=jn(e,l,i,n);return e==0&&(a[0]=0),l==0&&(a[1]=0),a}const Js=.1,qi={mode:3,pad:Js},bn={pad:0,soft:null,mode:0},ko={min:bn,max:bn};function In(e,l,i,n){return Jn(i)?ji(e,l,i):(bn.pad=i,bn.soft=n?0:null,bn.mode=n?3:0,ji(e,l,ko))}function Ce(e,l){return e??l}function To(e,l,i){for(l=Ce(l,0),i=Ce(i,e.length-1);l<=i;){if(e[l]!=null)return!0;l++}return!1}function ji(e,l,i){let n=i.min,a=i.max,c=Ce(n.pad,0),u=Ce(a.pad,0),p=Ce(n.hard,-Be),d=Ce(a.hard,Be),v=Ce(n.soft,Be),b=Ce(a.soft,-Be),g=Ce(n.mode,0),m=Ce(a.mode,0),T=l-e,G=wl(T),C=Ot(pt(e),pt(l)),R=wl(C),q=pt(R-G);(T<1e-24||q>10)&&(T=0,(e==0||l==0)&&(T=1e-24,g==2&&v!=Be&&(c=0),m==2&&b!=-Be&&(u=0)));let S=T||C||1e3,I=wl(S),k=Xl(10,qt(I)),re=S*(T==0?e==0?.1:1:c),P=Ue(Ra(e-re,k/10),24),ee=e>=v&&(g==1||g==3&&P<=v||g==2&&P>=v)?v:Be,Q=Ot(p,P<ee&&e>=ee?ee:al(ee,P)),ue=S*(T==0?l==0?.1:1:u),E=Ue(Kn(l+ue,k/10),24),x=l<=b&&(m==1||m==3&&E>=b||m==2&&E<=b)?b:-Be,j=al(d,E>x&&l<=x?x:Ot(x,E));return Q==j&&Q==0&&(j=100),[Q,j]}const Eo=new Intl.NumberFormat(ln?xo.language:"en-US"),Zs=e=>Eo.format(e),jt=Math,Nn=jt.PI,pt=jt.abs,qt=jt.floor,dt=jt.round,$t=jt.ceil,al=jt.min,Ot=jt.max,Xl=jt.pow,Ki=jt.sign,wl=jt.log10,Aa=jt.log2,Mo=(e,l=1)=>jt.sinh(e)*l,As=(e,l=1)=>jt.asinh(e/l),Be=1/0;function Ji(e){return(wl((e^e>>31)-(e>>31))|0)+1}function Ns(e,l,i){return al(Ot(e,l),i)}function Da(e){return typeof e=="function"}function Se(e){return Da(e)?e:()=>e}const Ao=()=>{},La=e=>e,Ca=(e,l)=>l,Do=e=>null,Zi=e=>!0,Qi=(e,l)=>e==l,Lo=/\.\d*?(?=9{6,}|0{6,})/gm,zl=e=>{if(Fa(e)||Al.has(e))return e;const l=`${e}`,i=l.match(Lo);if(i==null)return e;let n=i[0].length-1;if(l.indexOf("e-")!=-1){let[a,c]=l.split("e");return+`${zl(a)}e${c}`}return Ue(e,n)};function Rl(e,l){return zl(Ue(zl(e/l))*l)}function Kn(e,l){return zl($t(zl(e/l))*l)}function Ra(e,l){return zl(qt(zl(e/l))*l)}function Ue(e,l=0){if(Fa(e))return e;let i=10**l,n=e*i*(1+Number.EPSILON);return dt(n)/i}const Al=new Map;function Pa(e){return((""+e).split(".")[1]||"").length}function Tn(e,l,i,n){let a=[],c=n.map(Pa);for(let u=l;u<i;u++){let p=pt(u),d=Ue(Xl(e,u),p);for(let v=0;v<n.length;v++){let b=e==10?+`${n[v]}e${u}`:n[v]*d,g=(u>=0?0:p)+(u>=c[v]?0:c[v]),m=e==10?b:Ue(b,g);a.push(m),Al.set(m,g)}}return a}const Sn={},Qs=[],$l=[null,null],El=Array.isArray,Fa=Number.isInteger,Co=e=>e===void 0;function Xi(e){return typeof e=="string"}function Jn(e){let l=!1;if(e!=null){let i=e.constructor;l=i==null||i==Object}return l}function Ro(e){return e!=null&&typeof e=="object"}const Po=Object.getPrototypeOf(Uint8Array),Oa="__proto__";function en(e,l=Jn){let i;if(El(e)){let n=e.find(a=>a!=null);if(El(n)||l(n)){i=Array(e.length);for(let a=0;a<e.length;a++)i[a]=en(e[a],l)}else i=e.slice()}else if(e instanceof Po)i=e.slice();else if(l(e)){i={};for(let n in e)n!=Oa&&(i[n]=en(e[n],l))}else i=e;return i}function ct(e){let l=arguments;for(let i=1;i<l.length;i++){let n=l[i];for(let a in n)a!=Oa&&(Jn(e[a])?ct(e[a],en(n[a])):e[a]=en(n[a]))}return e}const Fo=0,Oo=1,zo=2;function No(e,l,i){for(let n=0,a,c=-1;n<l.length;n++){let u=l[n];if(u>c){for(a=u-1;a>=0&&e[a]==null;)e[a--]=null;for(a=u+1;a<i&&e[a]==null;)e[c=a++]=null}}}function Go(e,l){if(Io(e)){let u=e[0].slice();for(let p=1;p<e.length;p++)u.push(...e[p].slice(1));return Wo(u[0])||(u=Ho(u)),u}let i=new Set;for(let u=0;u<e.length;u++){let d=e[u][0],v=d.length;for(let b=0;b<v;b++)i.add(d[b])}let n=[Array.from(i).sort((u,p)=>u-p)],a=n[0].length,c=new Map;for(let u=0;u<a;u++)c.set(n[0][u],u);for(let u=0;u<e.length;u++){let p=e[u],d=p[0];for(let v=1;v<p.length;v++){let b=p[v],g=Array(a).fill(void 0),m=l?l[u][v]:Oo,T=[];for(let G=0;G<b.length;G++){let C=b[G],R=c.get(d[G]);C===null?m!=Fo&&(g[R]=C,m==zo&&T.push(R)):g[R]=C}No(g,T,a),n.push(g)}}return n}const Vo=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask;function Ho(e){let l=e[0],i=l.length,n=Array(i);for(let c=0;c<n.length;c++)n[c]=c;n.sort((c,u)=>l[c]-l[u]);let a=[];for(let c=0;c<e.length;c++){let u=e[c],p=Array(i);for(let d=0;d<i;d++)p[d]=u[n[d]];a.push(p)}return a}function Io(e){let l=e[0][0],i=l.length;for(let n=1;n<e.length;n++){let a=e[n][0];if(a.length!=i)return!1;if(a!=l){for(let c=0;c<i;c++)if(a[c]!=l[c])return!1}}return!0}function Wo(e,l=100){const i=e.length;if(i<=1)return!0;let n=0,a=i-1;for(;n<=a&&e[n]==null;)n++;for(;a>=n&&e[a]==null;)a--;if(a<=n)return!0;const c=Ot(1,qt((a-n+1)/l));for(let u=e[n],p=n+c;p<=a;p+=c){const d=e[p];if(d!=null){if(d<=u)return!1;u=d}}return!0}const za=["January","February","March","April","May","June","July","August","September","October","November","December"],Na=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Ga(e){return e.slice(0,3)}const Bo=Na.map(Ga),Uo=za.map(Ga),Yo={MMMM:za,MMM:Uo,WWWW:Na,WWW:Bo};function vn(e){return(e<10?"0":"")+e}function qo(e){return(e<10?"00":e<100?"0":"")+e}const jo={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,l)=>l.MMMM[e.getMonth()],MMM:(e,l)=>l.MMM[e.getMonth()],MM:e=>vn(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>vn(e.getDate()),D:e=>e.getDate(),WWWW:(e,l)=>l.WWWW[e.getDay()],WWW:(e,l)=>l.WWW[e.getDay()],HH:e=>vn(e.getHours()),H:e=>e.getHours(),h:e=>{let l=e.getHours();return l==0?12:l>12?l-12:l},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>vn(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>vn(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>qo(e.getMilliseconds())};function Xs(e,l){l=l||Yo;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,a;for(;a=n.exec(e);)i.push(a[0][0]=="{"?jo[a[1]]:a[0]);return c=>{let u="";for(let p=0;p<i.length;p++)u+=typeof i[p]=="string"?i[p]:i[p](c,l);return u}}const Ko=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Jo(e,l){let i;return l=="UTC"||l=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):l==Ko?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:l})),i.setMilliseconds(e.getMilliseconds())),i}const Va=e=>e%1==0,Wn=[1,2,2.5,5],Zo=Tn(10,-32,0,Wn),Ha=Tn(10,0,32,Wn),Qo=Ha.filter(Va),Pl=Zo.concat(Ha),$s=`
`,Ia="{YYYY}",$i=$s+Ia,Wa="{M}/{D}",wn=$s+Wa,Fn=wn+"/{YY}",Ba="{aa}",Xo="{h}:{mm}",Zl=Xo+Ba,ea=$s+Zl,ta=":{ss}",Ne=null;function Ua(e){let l=e*1e3,i=l*60,n=i*60,a=n*24,c=a*30,u=a*365,d=(e==1?Tn(10,0,3,Wn).filter(Va):Tn(10,-3,0,Wn)).concat([l,l*5,l*10,l*15,l*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,a,a*2,a*3,a*4,a*5,a*6,a*7,a*8,a*9,a*10,a*15,c,c*2,c*3,c*4,c*6,u,u*2,u*5,u*10,u*25,u*50,u*100]);const v=[[u,Ia,Ne,Ne,Ne,Ne,Ne,Ne,1],[a*28,"{MMM}",$i,Ne,Ne,Ne,Ne,Ne,1],[a,Wa,$i,Ne,Ne,Ne,Ne,Ne,1],[n,"{h}"+Ba,Fn,Ne,wn,Ne,Ne,Ne,1],[i,Zl,Fn,Ne,wn,Ne,Ne,Ne,1],[l,ta,Fn+" "+Zl,Ne,wn+" "+Zl,Ne,ea,Ne,1],[e,ta+".{fff}",Fn+" "+Zl,Ne,wn+" "+Zl,Ne,ea,Ne,1]];function b(g){return(m,T,G,C,R,q)=>{let S=[],I=R>=u,k=R>=c&&R<u,re=g(G),P=Ue(re*e,3),ee=Ds(re.getFullYear(),I?0:re.getMonth(),k||I?1:re.getDate()),Q=Ue(ee*e,3);if(k||I){let ue=k?R/c:0,E=I?R/u:0,x=P==Q?P:Ue(Ds(ee.getFullYear()+E,ee.getMonth()+ue,1)*e,3),j=new Date(dt(x/e)),F=j.getFullYear(),V=j.getMonth();for(let O=0;x<=C;O++){let se=Ds(F+E*O,V+ue*O,1),H=se-g(Ue(se*e,3));x=Ue((+se+H)*e,3),x<=C&&S.push(x)}}else{let ue=R>=a?a:R,E=qt(G)-qt(P),x=Q+E+Kn(P-Q,ue);S.push(x);let j=g(x),F=j.getHours()+j.getMinutes()/i+j.getSeconds()/n,V=R/n,O=m.axes[T]._space,se=q/O;for(;x=Ue(x+R,e==1?0:3),!(x>C);)if(V>1){let H=qt(Ue(F+V,6))%24,pe=g(x).getHours()-H;pe>1&&(pe=-1),x-=pe*n,F=(F+V)%24;let me=S[S.length-1];Ue((x-me)/R,3)*se>=.7&&S.push(x)}else S.push(x)}return S}}return[d,v,b]}const[$o,eu,tu]=Ua(1),[lu,nu,su]=Ua(.001);Tn(2,-53,53,[1]);function la(e,l){return e.map(i=>i.map((n,a)=>a==0||a==8||n==null?n:l(a==1||i[8]==0?n:i[1]+n)))}function na(e,l){return(i,n,a,c,u)=>{let p=l.find(G=>u>=G[0])||l[l.length-1],d,v,b,g,m,T;return n.map(G=>{let C=e(G),R=C.getFullYear(),q=C.getMonth(),S=C.getDate(),I=C.getHours(),k=C.getMinutes(),re=C.getSeconds(),P=R!=d&&p[2]||q!=v&&p[3]||S!=b&&p[4]||I!=g&&p[5]||k!=m&&p[6]||re!=T&&p[7]||p[1];return d=R,v=q,b=S,g=I,m=k,T=re,P(C)})}}function iu(e,l){let i=Xs(l);return(n,a,c,u,p)=>a.map(d=>i(e(d)))}function Ds(e,l,i){return new Date(e,l,i)}function sa(e,l){return l(e)}const au="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function ia(e,l){return(i,n,a,c)=>c==null?qs:l(e(n))}function ru(e,l){let i=e.series[l];return i.width?i.stroke(e,l):i.points.width?i.points.stroke(e,l):null}function ou(e,l){return e.series[l].fill(e,l)}const uu={show:!0,live:!0,isolate:!1,mount:Ao,markers:{show:!0,width:2,stroke:ru,fill:ou,dash:"solid"},idx:null,idxs:null,values:[]};function cu(e,l){let i=e.cursor.points,n=Xt(),a=i.size(e,l);Ze(n,mn,a),Ze(n,_n,a);let c=a/-2;Ze(n,"marginLeft",c),Ze(n,"marginTop",c);let u=i.width(e,l,a);return u&&Ze(n,"borderWidth",u),n}function fu(e,l){let i=e.series[l].points;return i._fill||i._stroke}function du(e,l){let i=e.series[l].points;return i._stroke||i._fill}function pu(e,l){return e.series[l].points.size}const Ls=[0,0];function hu(e,l,i){return Ls[0]=l,Ls[1]=i,Ls}function On(e,l,i,n=!0){return a=>{a.button==0&&(!n||a.target==l)&&i(a)}}function Cs(e,l,i,n=!0){return a=>{(!n||a.target==l)&&i(a)}}const vu={show:!0,x:!0,y:!0,lock:!1,move:hu,points:{one:!1,show:cu,size:pu,width:0,stroke:du,fill:fu},bind:{mousedown:On,mouseup:On,click:On,dblclick:On,mousemove:Cs,mouseleave:Cs,mouseenter:Cs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,l)=>{l.stopPropagation(),l.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,l,i,n,a)=>n-a,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},Ya={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},ei=ct({},Ya,{filter:Ca}),qa=ct({},ei,{size:10}),ja=ct({},Ya,{show:!1}),ti='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ka="bold "+ti,Ja=1.5,aa={show:!0,scale:"x",stroke:Ys,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ka,side:2,grid:ei,ticks:qa,border:ja,font:ti,lineGap:Ja,rotate:0},gu="Value",mu="Time",ra={show:!0,scale:"x",auto:!1,sorted:1,min:Be,max:-Be,idxs:[]};function _u(e,l,i,n,a){return l.map(c=>c==null?"":Zs(c))}function wu(e,l,i,n,a,c,u){let p=[],d=Al.get(a)||0;i=u?i:Ue(Kn(i,a),d);for(let v=i;v<=n;v=Ue(v+a,d))p.push(Object.is(v,-0)?0:v);return p}function Gs(e,l,i,n,a,c,u){const p=[],d=e.scales[e.axes[l].scale].log,v=d==10?wl:Aa,b=qt(v(i));a=Xl(d,b),d==10&&(a=Pl[il(a,Pl)]);let g=i,m=a*d;d==10&&(m=Pl[il(m,Pl)]);do p.push(g),g=g+a,d==10&&!Al.has(g)&&(g=Ue(g,Al.get(a))),g>=m&&(a=g,m=a*d,d==10&&(m=Pl[il(m,Pl)]));while(g<=n);return p}function xu(e,l,i,n,a,c,u){let d=e.scales[e.axes[l].scale].asinh,v=n>d?Gs(e,l,Ot(d,i),n,a):[d],b=n>=0&&i<=0?[0]:[];return(i<-d?Gs(e,l,Ot(d,-n),-i,a):[d]).reverse().map(m=>-m).concat(b,v)}const Za=/./,bu=/[12357]/,Su=/[125]/,oa=/1/,Vs=(e,l,i,n)=>e.map((a,c)=>l==4&&a==0||c%n==0&&i.test(a.toExponential()[a<0?1:0])?a:null);function yu(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=e.scales[u],d=e.valToPos,v=c._space,b=d(10,u),g=d(9,u)-b>=v?Za:d(7,u)-b>=v?bu:d(5,u)-b>=v?Su:oa;if(g==oa){let m=pt(d(1,u)-b);if(m<v)return Vs(l.slice().reverse(),p.distr,g,$t(v/m)).reverse()}return Vs(l,p.distr,g,1)}function ku(e,l,i,n,a){let c=e.axes[i],u=c.scale,p=c._space,d=e.valToPos,v=pt(d(1,u)-d(2,u));return v<p?Vs(l.slice().reverse(),3,Za,$t(p/v)).reverse():l}function Tu(e,l,i,n){return n==null?qs:l==null?"":Zs(l)}const ua={show:!0,scale:"y",stroke:Ys,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:Ka,side:3,grid:ei,ticks:qa,border:ja,font:ti,lineGap:Ja,rotate:0};function Eu(e,l){let i=3+(e||1)*2;return Ue(i*l,3)}function Mu(e,l){let{scale:i,idxs:n}=e.series[0],a=e._data[0],c=e.valToPos(a[n[0]],i,!0),u=e.valToPos(a[n[1]],i,!0),p=pt(u-c),d=e.series[l],v=p/(d.points.space*Oe);return n[1]-n[0]<=v}const ca={scale:null,auto:!0,sorted:0,min:Be,max:-Be},Qa=(e,l,i,n,a)=>a,fa={show:!0,auto:!0,sorted:0,gaps:Qa,alpha:1,facets:[ct({},ca,{scale:"x"}),ct({},ca,{scale:"y"})]},da={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Qa,alpha:1,points:{show:Mu,filter:null},values:null,min:Be,max:-Be,idxs:[],path:null,clip:null};function Au(e,l,i,n,a){return i/10}const Xa={time:Xr,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Du=ct({},Xa,{time:!1,ori:1}),pa={};function $a(e,l){let i=pa[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(a=>a!=n)},pub(n,a,c,u,p,d,v){for(let b=0;b<i.plots.length;b++)i.plots[b]!=a&&i.plots[b].pub(n,a,c,u,p,d,v)}},e!=null&&(pa[e]=i)),i}const tn=1,Hs=2;function Nl(e,l,i){const n=e.mode,a=e.series[l],c=n==2?e._data[l]:e._data,u=e.scales,p=e.bbox;let d=c[0],v=n==2?c[1]:c[l],b=n==2?u[a.facets[0].scale]:u[e.series[0].scale],g=n==2?u[a.facets[1].scale]:u[a.scale],m=p.left,T=p.top,G=p.width,C=p.height,R=e.valToPosH,q=e.valToPosV;return b.ori==0?i(a,d,v,b,g,R,q,m,T,G,C,Qn,nn,$n,tr,nr):i(a,d,v,b,g,q,R,T,m,C,G,Xn,sn,si,lr,sr)}function li(e,l){let i=0,n=0,a=Ce(e.bands,Qs);for(let c=0;c<a.length;c++){let u=a[c];u.series[0]==l?i=u.dir:u.series[1]==l&&(u.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Lu(e,l,i,n,a){let c=e.mode,u=e.series[l],p=c==2?u.facets[1].scale:u.scale,d=e.scales[p];return a==-1?d.min:a==1?d.max:d.distr==3?d.dir==1?d.min:d.max:0}function xl(e,l,i,n,a,c){return Nl(e,l,(u,p,d,v,b,g,m,T,G,C,R)=>{let q=u.pxRound;const S=v.dir*(v.ori==0?1:-1),I=v.ori==0?nn:sn;let k,re;S==1?(k=i,re=n):(k=n,re=i);let P=q(g(p[k],v,C,T)),ee=q(m(d[k],b,R,G)),Q=q(g(p[re],v,C,T)),ue=q(m(c==1?b.max:b.min,b,R,G)),E=new Path2D(a);return I(E,Q,ue),I(E,P,ue),I(E,P,ee),E})}function Zn(e,l,i,n,a,c){let u=null;if(e.length>0){u=new Path2D;const p=l==0?$n:si;let d=i;for(let g=0;g<e.length;g++){let m=e[g];if(m[1]>m[0]){let T=m[0]-d;T>0&&p(u,d,n,T,n+c),d=m[1]}}let v=i+a-d,b=10;v>0&&p(u,d,n-b/2,v,n+c+b)}return u}function Cu(e,l,i){let n=e[e.length-1];n&&n[0]==l?n[1]=i:e.push([l,i])}function ni(e,l,i,n,a,c,u){let p=[],d=e.length;for(let v=a==1?i:n;v>=i&&v<=n;v+=a)if(l[v]===null){let g=v,m=v;if(a==1)for(;++v<=n&&l[v]===null;)m=v;else for(;--v>=i&&l[v]===null;)m=v;let T=c(e[g]),G=m==g?T:c(e[m]),C=g-a;T=u<=0&&C>=0&&C<d?c(e[C]):T;let q=m+a;G=u>=0&&q>=0&&q<d?c(e[q]):G,G>=T&&p.push([T,G])}return p}function ha(e){return e==0?La:e==1?dt:l=>Rl(l,e)}function er(e){let l=e==0?Qn:Xn,i=e==0?(a,c,u,p,d,v)=>{a.arcTo(c,u,p,d,v)}:(a,c,u,p,d,v)=>{a.arcTo(u,c,d,p,v)},n=e==0?(a,c,u,p,d)=>{a.rect(c,u,p,d)}:(a,c,u,p,d)=>{a.rect(u,c,d,p)};return(a,c,u,p,d,v=0,b=0)=>{v==0&&b==0?n(a,c,u,p,d):(v=al(v,p/2,d/2),b=al(b,p/2,d/2),l(a,c+v,u),i(a,c+p,u,c+p,u+d,v),i(a,c+p,u+d,c,u+d,b),i(a,c,u+d,c,u,b),i(a,c,u,c+p,u,v),a.closePath())}}const Qn=(e,l,i)=>{e.moveTo(l,i)},Xn=(e,l,i)=>{e.moveTo(i,l)},nn=(e,l,i)=>{e.lineTo(l,i)},sn=(e,l,i)=>{e.lineTo(i,l)},$n=er(0),si=er(1),tr=(e,l,i,n,a,c)=>{e.arc(l,i,n,a,c)},lr=(e,l,i,n,a,c)=>{e.arc(i,l,n,a,c)},nr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(l,i,n,a,c,u)},sr=(e,l,i,n,a,c,u)=>{e.bezierCurveTo(i,l,a,n,u,c)};function ir(e){return(l,i,n,a,c)=>Nl(l,i,(u,p,d,v,b,g,m,T,G,C,R)=>{let{pxRound:q,points:S}=u,I,k;v.ori==0?(I=Qn,k=tr):(I=Xn,k=lr);const re=Ue(S.width*Oe,3);let P=(S.size-S.width)/2*Oe,ee=Ue(P*2,3),Q=new Path2D,ue=new Path2D,{left:E,top:x,width:j,height:F}=l.bbox;$n(ue,E-ee,x-ee,j+ee*2,F+ee*2);const V=O=>{if(d[O]!=null){let se=q(g(p[O],v,C,T)),H=q(m(d[O],b,R,G));I(Q,se+P,H),k(Q,se,H,P,0,Nn*2)}};if(c)c.forEach(V);else for(let O=n;O<=a;O++)V(O);return{stroke:re>0?Q:null,fill:Q,clip:ue,flags:tn|Hs}})}function ar(e){return(l,i,n,a,c,u)=>{n!=a&&(c!=n&&u!=n&&e(l,i,n),c!=a&&u!=a&&e(l,i,a),e(l,i,u))}}const Ru=ar(nn),Pu=ar(sn);function rr(e){const l=Ce(e?.alignGaps,0);return(i,n,a,c)=>Nl(i,n,(u,p,d,v,b,g,m,T,G,C,R)=>{[a,c]=qn(d,a,c);let q=u.pxRound,S=F=>q(g(F,v,C,T)),I=F=>q(m(F,b,R,G)),k,re;v.ori==0?(k=nn,re=Ru):(k=sn,re=Pu);const P=v.dir*(v.ori==0?1:-1),ee={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:tn},Q=ee.stroke;let ue=!1;if(c-a>=C*4){let F=N=>i.posToVal(N,v.key,!0),V=null,O=null,se,H,Ie,ge=S(p[P==1?a:c]),pe=S(p[a]),me=S(p[c]),ce=F(P==1?pe+1:me-1);for(let N=P==1?a:c;N>=a&&N<=c;N+=P){let De=p[N],_e=(P==1?De<ce:De>ce)?ge:S(De),he=d[N];_e==ge?he!=null?(H=he,V==null?(k(Q,_e,I(H)),se=V=O=H):H<V?V=H:H>O&&(O=H)):he===null&&(ue=!0):(V!=null&&re(Q,ge,I(V),I(O),I(se),I(H)),he!=null?(H=he,k(Q,_e,I(H)),V=O=se=H):(V=O=null,he===null&&(ue=!0)),ge=_e,ce=F(ge+P))}V!=null&&V!=O&&Ie!=ge&&re(Q,ge,I(V),I(O),I(se),I(H))}else for(let F=P==1?a:c;F>=a&&F<=c;F+=P){let V=d[F];V===null?ue=!0:V!=null&&k(Q,S(p[F]),I(V))}let[x,j]=li(i,n);if(u.fill!=null||x!=0){let F=ee.fill=new Path2D(Q),V=u.fillTo(i,n,u.min,u.max,x),O=I(V),se=S(p[a]),H=S(p[c]);P==-1&&([H,se]=[se,H]),k(F,H,O),k(F,se,O)}if(!u.spanGaps){let F=[];ue&&F.push(...ni(p,d,a,c,P,S,l)),ee.gaps=F=u.gaps(i,n,a,c,F),ee.clip=Zn(F,v.ori,T,G,C,R)}return j!=0&&(ee.band=j==2?[xl(i,n,a,c,Q,-1),xl(i,n,a,c,Q,1)]:xl(i,n,a,c,Q,j)),ee})}function Fu(e){const l=Ce(e.align,1),i=Ce(e.ascDesc,!1),n=Ce(e.alignGaps,0),a=Ce(e.extend,!1);return(c,u,p,d)=>Nl(c,u,(v,b,g,m,T,G,C,R,q,S,I)=>{[p,d]=qn(g,p,d);let k=v.pxRound,{left:re,width:P}=c.bbox,ee=pe=>k(G(pe,m,S,R)),Q=pe=>k(C(pe,T,I,q)),ue=m.ori==0?nn:sn;const E={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:tn},x=E.stroke,j=m.dir*(m.ori==0?1:-1);let F=Q(g[j==1?p:d]),V=ee(b[j==1?p:d]),O=V,se=V;a&&l==-1&&(se=re,ue(x,se,F)),ue(x,V,F);for(let pe=j==1?p:d;pe>=p&&pe<=d;pe+=j){let me=g[pe];if(me==null)continue;let ce=ee(b[pe]),N=Q(me);l==1?ue(x,ce,F):ue(x,O,N),ue(x,ce,N),F=N,O=ce}let H=O;a&&l==1&&(H=re+P,ue(x,H,F));let[Ie,ge]=li(c,u);if(v.fill!=null||Ie!=0){let pe=E.fill=new Path2D(x),me=v.fillTo(c,u,v.min,v.max,Ie),ce=Q(me);ue(pe,H,ce),ue(pe,se,ce)}if(!v.spanGaps){let pe=[];pe.push(...ni(b,g,p,d,j,ee,n));let me=v.width*Oe/2,ce=i||l==1?me:-me,N=i||l==-1?-me:me;pe.forEach(De=>{De[0]+=ce,De[1]+=N}),E.gaps=pe=v.gaps(c,u,p,d,pe),E.clip=Zn(pe,m.ori,R,q,S,I)}return ge!=0&&(E.band=ge==2?[xl(c,u,p,d,x,-1),xl(c,u,p,d,x,1)]:xl(c,u,p,d,x,ge)),E})}function va(e,l,i,n,a,c,u=Be){if(e.length>1){let p=null;for(let d=0,v=1/0;d<e.length;d++)if(l[d]!==void 0){if(p!=null){let b=pt(e[d]-e[p]);b<v&&(v=b,u=pt(i(e[d],n,a,c)-i(e[p],n,a,c)))}p=d}}return u}function Ou(e){e=e||Sn;const l=Ce(e.size,[.6,Be,1]),i=e.align||0,n=e.gap||0;let a=e.radius;a=a==null?[0,0]:typeof a=="number"?[a,0]:a;const c=Se(a),u=1-l[0],p=Ce(l[1],Be),d=Ce(l[2],1),v=Ce(e.disp,Sn),b=Ce(e.each,T=>{}),{fill:g,stroke:m}=v;return(T,G,C,R)=>Nl(T,G,(q,S,I,k,re,P,ee,Q,ue,E,x)=>{let j=q.pxRound,F=i,V=n*Oe,O=p*Oe,se=d*Oe,H,Ie;k.ori==0?[H,Ie]=c(T,G):[Ie,H]=c(T,G);const ge=k.dir*(k.ori==0?1:-1);let pe=k.ori==0?$n:si,me=k.ori==0?b:(A,we,qe,zt,Dt,Lt,z)=>{b(A,we,qe,Dt,zt,z,Lt)},ce=Ce(T.bands,Qs).find(A=>A.series[0]==G),N=ce!=null?ce.dir:0,De=q.fillTo(T,G,q.min,q.max,N),Ye=j(ee(De,re,x,ue)),_e,he,tt,Qe=E,ye=j(q.width*Oe),st=!1,$e=null,We=null,rt=null,fe=null;g!=null&&(ye==0||m!=null)&&(st=!0,$e=g.values(T,G,C,R),We=new Map,new Set($e).forEach(A=>{A!=null&&We.set(A,new Path2D)}),ye>0&&(rt=m.values(T,G,C,R),fe=new Map,new Set(rt).forEach(A=>{A!=null&&fe.set(A,new Path2D)})));let{x0:it,size:ft}=v;if(it!=null&&ft!=null){F=1,S=it.values(T,G,C,R),it.unit==2&&(S=S.map(qe=>T.posToVal(Q+qe*E,k.key,!0)));let A=ft.values(T,G,C,R);ft.unit==2?he=A[0]*E:he=P(A[0],k,E,Q)-P(0,k,E,Q),Qe=va(S,I,P,k,E,Q,Qe),tt=Qe-he+V}else Qe=va(S,I,P,k,E,Q,Qe),tt=Qe*u+V,he=Qe-tt;tt<1&&(tt=0),ye>=he/2&&(ye=0),tt<5&&(j=La);let At=tt>0,kt=Qe-tt-(At?ye:0);he=j(Ns(kt,se,O)),_e=(F==0?he/2:F==ge?0:he)-F*ge*((F==0?V/2:0)+(At?ye/2:0));const Ge={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},Vt=st?null:new Path2D;let ne=null;if(ce!=null)ne=T.data[ce.series[1]];else{let{y0:A,y1:we}=v;A!=null&&we!=null&&(I=we.values(T,G,C,R),ne=A.values(T,G,C,R))}let ae=H*he,B=Ie*he;for(let A=ge==1?C:R;A>=C&&A<=R;A+=ge){let we=I[A];if(we==null)continue;if(ne!=null){let te=ne[A]??0;if(we-te==0)continue;Ye=ee(te,re,x,ue)}let qe=k.distr!=2||v!=null?S[A]:A,zt=P(qe,k,E,Q),Dt=ee(Ce(we,De),re,x,ue),Lt=j(zt-_e),z=j(Ot(Dt,Ye)),U=j(al(Dt,Ye)),Z=z-U;if(we!=null){let te=we<0?B:ae,X=we<0?ae:B;st?(ye>0&&rt[A]!=null&&pe(fe.get(rt[A]),Lt,U+qt(ye/2),he,Ot(0,Z-ye),te,X),$e[A]!=null&&pe(We.get($e[A]),Lt,U+qt(ye/2),he,Ot(0,Z-ye),te,X)):pe(Vt,Lt,U+qt(ye/2),he,Ot(0,Z-ye),te,X),me(T,G,A,Lt-ye/2,U,he+ye,Z)}}return ye>0?Ge.stroke=st?fe:Vt:st||(Ge._fill=q.width==0?q._fill:q._stroke??q._fill,Ge.width=0),Ge.fill=st?We:Vt,Ge})}function zu(e,l){const i=Ce(l?.alignGaps,0);return(n,a,c,u)=>Nl(n,a,(p,d,v,b,g,m,T,G,C,R,q)=>{[c,u]=qn(v,c,u);let S=p.pxRound,I=H=>S(m(H,b,R,G)),k=H=>S(T(H,g,q,C)),re,P,ee;b.ori==0?(re=Qn,ee=nn,P=nr):(re=Xn,ee=sn,P=sr);const Q=b.dir*(b.ori==0?1:-1);let ue=I(d[Q==1?c:u]),E=ue,x=[],j=[];for(let H=Q==1?c:u;H>=c&&H<=u;H+=Q)if(v[H]!=null){let ge=d[H],pe=I(ge);x.push(E=pe),j.push(k(v[H]))}const F={stroke:e(x,j,re,ee,P,S),fill:null,clip:null,band:null,gaps:null,flags:tn},V=F.stroke;let[O,se]=li(n,a);if(p.fill!=null||O!=0){let H=F.fill=new Path2D(V),Ie=p.fillTo(n,a,p.min,p.max,O),ge=k(Ie);ee(H,E,ge),ee(H,ue,ge)}if(!p.spanGaps){let H=[];H.push(...ni(d,v,c,u,Q,I,i)),F.gaps=H=p.gaps(n,a,c,u,H),F.clip=Zn(H,b.ori,G,C,R,q)}return se!=0&&(F.band=se==2?[xl(n,a,c,u,V,-1),xl(n,a,c,u,V,1)]:xl(n,a,c,u,V,se)),F})}function Nu(e){return zu(Gu,e)}function Gu(e,l,i,n,a,c){const u=e.length;if(u<2)return null;const p=new Path2D;if(i(p,e[0],l[0]),u==2)n(p,e[1],l[1]);else{let d=Array(u),v=Array(u-1),b=Array(u-1),g=Array(u-1);for(let m=0;m<u-1;m++)b[m]=l[m+1]-l[m],g[m]=e[m+1]-e[m],v[m]=b[m]/g[m];d[0]=v[0];for(let m=1;m<u-1;m++)v[m]===0||v[m-1]===0||v[m-1]>0!=v[m]>0?d[m]=0:(d[m]=3*(g[m-1]+g[m])/((2*g[m]+g[m-1])/v[m-1]+(g[m]+2*g[m-1])/v[m]),isFinite(d[m])||(d[m]=0));d[u-1]=v[u-2];for(let m=0;m<u-1;m++)a(p,e[m]+g[m]/3,l[m]+d[m]*g[m]/3,e[m+1]-g[m]/3,l[m+1]-d[m+1]*g[m]/3,e[m+1],l[m+1])}return p}const Is=new Set;function ga(){for(let e of Is)e.syncRect(!0)}ln&&(Ol(_o,Ql,ga),Ol(wo,Ql,ga,!0),Ol(Hn,Ql,()=>{ht.pxRatio=Oe}));const Vu=rr(),Hu=ir();function ma(e,l,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((c,u)=>Ws(c,u,l,i))}function Iu(e,l){return e.map((i,n)=>n==0?{}:ct({},l,i))}function Ws(e,l,i,n){return ct({},l==0?i:n,e)}function or(e,l,i){return l==null?$l:[l,i]}const Wu=or;function Bu(e,l,i){return l==null?$l:In(l,i,Js,!0)}function ur(e,l,i,n){return l==null?$l:jn(l,i,e.scales[n].log,!1)}const Uu=ur;function cr(e,l,i,n){return l==null?$l:Ks(l,i,e.scales[n].log,!1)}const Yu=cr;function qu(e,l,i,n,a){let c=Ot(Ji(e),Ji(l)),u=l-e,p=il(a/n*u,i);do{let d=i[p],v=n*d/u;if(v>=a&&c+(d<5?Al.get(d):0)<=17)return[d,v]}while(++p<i.length);return[0,0]}function _a(e){let l,i;return e=e.replace(/(\d+)px/,(n,a)=>(l=dt((i=+a)*Oe))+"px"),[e,l,i]}function ju(e){e.show&&[e.font,e.labelFont].forEach(l=>{let i=Ue(l[2]*Oe,1);l[0]=l[0].replace(/[0-9.]+px/,i+"px"),l[1]=i})}function ht(e,l,i){const n={mode:Ce(e.mode,1)},a=n.mode;function c(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?1-f:f)}function u(t,s,r,o){let f=s.valToPct(t);return o+r*(s.dir==-1?f:1-f)}function p(t,s,r,o){return s.ori==0?c(t,s,r,o):u(t,s,r,o)}n.valToPosH=c,n.valToPosV=u;let d=!1;n.status=0;const v=n.root=Xt($r);if(e.id!=null&&(v.id=e.id),Yt(v,e.class),e.title){let t=Xt(lo,v);t.textContent=e.title}const b=sl("canvas"),g=n.ctx=b.getContext("2d"),m=Xt(no,v);Ol("click",m,t=>{t.target===G&&(je!=Ul||Xe!=Yl)&&Et.click(n,t)},!0);const T=n.under=Xt(so,m);m.appendChild(b);const G=n.over=Xt(io,m);e=en(e);const C=+Ce(e.pxAlign,1),R=ha(C);(e.plugins||[]).forEach(t=>{t.opts&&(e=t.opts(n,e)||e)});const q=e.ms||.001,S=n.series=a==1?ma(e.series||[],ra,da,!1):Iu(e.series||[null],fa),I=n.axes=ma(e.axes||[],aa,ua,!0),k=n.scales={},re=n.bands=e.bands||[];re.forEach(t=>{t.fill=Se(t.fill||null),t.dir=Ce(t.dir,-1)});const P=a==2?S[1].facets[0].scale:S[0].scale,ee={axes:wr,series:hr},Q=(e.drawOrder||["axes","series"]).map(t=>ee[t]);function ue(t){const s=t.distr==3?r=>wl(r>0?r:t.clamp(n,r,t.min,t.max,t.key)):t.distr==4?r=>As(r,t.asinh):t.distr==100?r=>t.fwd(r):r=>r;return r=>{let o=s(r),{_min:f,_max:h}=t,w=h-f;return(o-f)/w}}function E(t){let s=k[t];if(s==null){let r=(e.scales||Sn)[t]||Sn;if(r.from!=null){E(r.from);let o=ct({},k[r.from],r,{key:t});o.valToPct=ue(o),k[t]=o}else{s=k[t]=ct({},t==P?Xa:Du,r),s.key=t;let o=s.time,f=s.range,h=El(f);if((t!=P||a==2&&!o)&&(h&&(f[0]==null||f[1]==null)&&(f={min:f[0]==null?qi:{mode:1,hard:f[0],soft:f[0]},max:f[1]==null?qi:{mode:1,hard:f[1],soft:f[1]}},h=!1),!h&&Jn(f))){let w=f;f=(y,D,W)=>D==null?$l:In(D,W,w)}s.range=Se(f||(o?Wu:t==P?s.distr==3?Uu:s.distr==4?Yu:or:s.distr==3?ur:s.distr==4?cr:Bu)),s.auto=Se(h?!1:s.auto),s.clamp=Se(s.clamp||Au),s._min=s._max=null,s.valToPct=ue(s)}}}E("x"),E("y"),a==1&&S.forEach(t=>{E(t.scale)}),I.forEach(t=>{E(t.scale)});for(let t in e.scales)E(t);const x=k[P],j=x.distr;let F,V;x.ori==0?(Yt(v,eo),F=c,V=u):(Yt(v,to),F=u,V=c);const O={};for(let t in k){let s=k[t];(s.min!=null||s.max!=null)&&(O[t]={min:s.min,max:s.max},s.min=s.max=null)}const se=e.tzDate||(t=>new Date(dt(t/q))),H=e.fmtDate||Xs,Ie=q==1?tu(se):su(se),ge=na(se,la(q==1?eu:nu,H)),pe=ia(se,sa(au,H)),me=[],ce=n.legend=ct({},uu,e.legend),N=n.cursor=ct({},vu,{drag:{y:a==2}},e.cursor),De=ce.show,Ye=N.show,_e=ce.markers;ce.idxs=me,_e.width=Se(_e.width),_e.dash=Se(_e.dash),_e.stroke=Se(_e.stroke),_e.fill=Se(_e.fill);let he,tt,Qe,ye=[],st=[],$e,We=!1,rt={};if(ce.live){const t=S[1]?S[1].values:null;We=t!=null,$e=We?t(n,1,0):{_:0};for(let s in $e)rt[s]=qs}if(De)if(he=sl("table",fo,v),Qe=sl("tbody",null,he),ce.mount(n,he),We){tt=sl("thead",null,he,Qe);let t=sl("tr",null,tt);sl("th",null,t);for(var fe in $e)sl("th",Pi,t).textContent=fe}else Yt(he,ho),ce.live&&Yt(he,po);const it={show:!0},ft={show:!1};function At(t,s){if(s==0&&(We||!ce.live||a==2))return $l;let r=[],o=sl("tr",vo,Qe,Qe.childNodes[s]);Yt(o,t.class),t.show||Yt(o,Fl);let f=sl("th",null,o);if(_e.show){let y=Xt(go,f);if(s>0){let D=_e.width(n,s);D&&(y.style.border=D+"px "+_e.dash(n,s)+" "+_e.stroke(n,s)),y.style.background=_e.fill(n,s)}}let h=Xt(Pi,f);t.label instanceof HTMLElement?h.appendChild(t.label):h.textContent=t.label,s>0&&(_e.show||(h.style.color=t.width>0?_e.stroke(n,s):_e.fill(n,s)),Ge("click",f,y=>{if(N._lock)return;ke(y);let D=S.indexOf(t);if((y.ctrlKey||y.metaKey)!=ce.isolate){let W=S.some((Y,J)=>J>0&&J!=D&&Y.show);S.forEach((Y,J)=>{J>0&&cl(J,W?J==D?it:ft:it,!0,ut.setSeries)})}else cl(D,{show:!t.show},!0,ut.setSeries)},!1),ot&&Ge(Ni,f,y=>{N._lock||(ke(y),cl(S.indexOf(t),jl,!0,ut.setSeries))},!1));for(var w in $e){let y=sl("td",mo,o);y.textContent="--",r.push(y)}return[o,r]}const kt=new Map;function Ge(t,s,r,o=!0){const f=kt.get(s)||{},h=N.bind[t](n,s,r,o);h&&(Ol(t,s,f[t]=h),kt.set(s,f))}function Vt(t,s,r){const o=kt.get(s)||{};for(let f in o)(t==null||f==t)&&(zs(f,s,o[f]),delete o[f]);t==null&&kt.delete(s)}let ne=0,ae=0,B=0,A=0,we=0,qe=0,zt=we,Dt=qe,Lt=B,z=A,U=0,Z=0,te=0,X=0;n.bbox={};let ve=!1,ie=!1,$=!1,Me=!1,Re=!1,Pe=!1;function et(t,s,r){(r||t!=n.width||s!=n.height)&&Nt(t,s),Hl(!1),$=!0,ie=!0,Il()}function Nt(t,s){n.width=ne=B=t,n.height=ae=A=s,we=qe=0,vl(),Ht();let r=n.bbox;U=r.left=Rl(we*Oe,.5),Z=r.top=Rl(qe*Oe,.5),te=r.width=Rl(B*Oe,.5),X=r.height=Rl(A*Oe,.5)}const rl=3;function Kt(){let t=!1,s=0;for(;!t;){s++;let r=mr(s),o=_r(s);t=s==rl||r&&o,t||(Nt(n.width,n.height),ie=!0)}}function el({width:t,height:s}){et(t,s)}n.setSize=el;function vl(){let t=!1,s=!1,r=!1,o=!1;I.forEach((f,h)=>{if(f.show&&f._show){let{side:w,_size:y}=f,D=w%2,W=f.label!=null?f.labelSize:0,Y=y+W;Y>0&&(D?(B-=Y,w==3?(we+=Y,o=!0):r=!0):(A-=Y,w==0?(qe+=Y,t=!0):s=!0))}}),gl[0]=t,gl[1]=r,gl[2]=s,gl[3]=o,B-=bl[1]+bl[3],we+=bl[3],A-=bl[2]+bl[0],qe+=bl[0]}function Ht(){let t=we+B,s=qe+A,r=we,o=qe;function f(h,w){switch(h){case 1:return t+=w,t-w;case 2:return s+=w,s-w;case 3:return r-=w,r+w;case 0:return o-=w,o+w}}I.forEach((h,w)=>{if(h.show&&h._show){let y=h.side;h._pos=f(y,h._size),h.label!=null&&(h._lpos=f(y,h.labelSize))}})}if(N.dataIdx==null){let t=N.hover,s=t.skip=new Set(t.skip??[]);s.add(void 0);let r=t.prox=Se(t.prox),o=t.bias??=0;N.dataIdx=(f,h,w,y)=>{if(h==0)return w;let D=w,W=r(f,h,w,y)??Be,Y=W>=0&&W<Be,J=x.ori==0?B:A,de=N.left,Fe=l[0],Le=l[h];if(s.has(Le[w])){D=null;let be=null,oe=null,le;if(o==0||o==-1)for(le=w;be==null&&le-- >0;)s.has(Le[le])||(be=le);if(o==0||o==1)for(le=w;oe==null&&le++<Le.length;)s.has(Le[le])||(oe=le);if(be!=null||oe!=null)if(Y){let Je=be==null?-1/0:F(Fe[be],x,J,0),lt=oe==null?1/0:F(Fe[oe],x,J,0),St=de-Je,Ve=lt-de;St<=Ve?St<=W&&(D=be):Ve<=W&&(D=oe)}else D=oe==null?be:be==null?oe:w-be<=oe-w?be:oe}else Y&&pt(de-F(Fe[w],x,J,0))>W&&(D=null);return D}}const ke=t=>{N.event=t};N.idxs=me,N._lock=!1;let xe=N.points;xe.show=Se(xe.show),xe.size=Se(xe.size),xe.stroke=Se(xe.stroke),xe.width=Se(xe.width),xe.fill=Se(xe.fill);const Ae=n.focus=ct({},e.focus||{alpha:.3},N.focus),ot=Ae.prox>=0,It=ot&&xe.one;let gt=[],Jt=[],ol=[];function ul(t,s){let r=xe.show(n,s);if(r instanceof HTMLElement)return Yt(r,co),Yt(r,t.class),hl(r,-10,-10,B,A),G.insertBefore(r,gt[s]),r}function Gl(t,s){if(a==1||s>0){let r=a==1&&k[t.scale].time,o=t.value;t.value=r?Xi(o)?ia(se,sa(o,H)):o||pe:o||Tu,t.label=t.label||(r?mu:gu)}if(It||s>0){t.width=t.width==null?1:t.width,t.paths=t.paths||Vu||Do,t.fillTo=Se(t.fillTo||Lu),t.pxAlign=+Ce(t.pxAlign,C),t.pxRound=ha(t.pxAlign),t.stroke=Se(t.stroke||null),t.fill=Se(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let r=Eu(Ot(1,t.width),1),o=t.points=ct({},{size:r,width:Ot(1,r*.2),stroke:t.stroke,space:r*2,paths:Hu,_stroke:null,_fill:null},t.points);o.show=Se(o.show),o.filter=Se(o.filter),o.fill=Se(o.fill),o.stroke=Se(o.stroke),o.paths=Se(o.paths),o.pxAlign=t.pxAlign}if(De){let r=At(t,s);ye.splice(s,0,r[0]),st.splice(s,0,r[1]),ce.values.push(null)}if(Ye){me.splice(s,0,null);let r=null;It?s==0&&(r=ul(t,s)):s>0&&(r=ul(t,s)),gt.splice(s,0,r),Jt.splice(s,0,0),ol.splice(s,0,0)}bt("addSeries",s)}function es(t,s){s=s??S.length,t=a==1?Ws(t,s,ra,da):Ws(t,s,{},fa),S.splice(s,0,t),Gl(S[s],s)}n.addSeries=es;function ts(t){if(S.splice(t,1),De){ce.values.splice(t,1),st.splice(t,1);let s=ye.splice(t,1)[0];Vt(null,s.firstChild),s.remove()}Ye&&(me.splice(t,1),gt.splice(t,1)[0].remove(),Jt.splice(t,1),ol.splice(t,1)),bt("delSeries",t)}n.delSeries=ts;const gl=[!1,!1,!1,!1];function ls(t,s){if(t._show=t.show,t.show){let r=t.side%2,o=k[t.scale];o==null&&(t.scale=r?S[1].scale:P,o=k[t.scale]);let f=o.time;t.size=Se(t.size),t.space=Se(t.space),t.rotate=Se(t.rotate),El(t.incrs)&&t.incrs.forEach(w=>{!Al.has(w)&&Al.set(w,Pa(w))}),t.incrs=Se(t.incrs||(o.distr==2?Qo:f?q==1?$o:lu:Pl)),t.splits=Se(t.splits||(f&&o.distr==1?Ie:o.distr==3?Gs:o.distr==4?xu:wu)),t.stroke=Se(t.stroke),t.grid.stroke=Se(t.grid.stroke),t.ticks.stroke=Se(t.ticks.stroke),t.border.stroke=Se(t.border.stroke);let h=t.values;t.values=El(h)&&!El(h[0])?Se(h):f?El(h)?na(se,la(h,H)):Xi(h)?iu(se,h):h||ge:h||_u,t.filter=Se(t.filter||(o.distr>=3&&o.log==10?yu:o.distr==3&&o.log==2?ku:Ca)),t.font=_a(t.font),t.labelFont=_a(t.labelFont),t._size=t.size(n,null,s,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(gl[s]=!0,t._el=Xt(ao,m))}}function an(t,s,r,o){let[f,h,w,y]=r,D=s%2,W=0;return D==0&&(y||h)&&(W=s==0&&!f||s==2&&!w?dt(aa.size/3):0),D==1&&(f||w)&&(W=s==1&&!h||s==3&&!y?dt(ua.size/2):0),W}const ii=n.padding=(e.padding||[an,an,an,an]).map(t=>Se(Ce(t,an))),bl=n._padding=ii.map((t,s)=>t(n,s,gl,0));let Tt,mt=null,_t=null;const En=a==1?S[0].idxs:null;let tl=null,rn=!1;function ai(t,s){if(l=t??[],n.data=n._data=l,a==2){Tt=0;for(let r=1;r<S.length;r++)Tt+=l[r][0].length}else{l.length==0&&(n.data=n._data=l=[[]]),tl=l[0],Tt=tl.length;let r=l;if(j==2){r=l.slice();let o=r[0]=Array(Tt);for(let f=0;f<Tt;f++)o[f]=f}n._data=l=r}if(Hl(!0),bt("setData"),j==2&&($=!0),s!==!1){let r=x;r.auto(n,rn)?ns():yl(P,r.min,r.max),Me=Me||N.left>=0,Pe=!0,Il()}}n.setData=ai;function ns(){rn=!0;let t,s;a==1&&(Tt>0?(mt=En[0]=0,_t=En[1]=Tt-1,t=l[0][mt],s=l[0][_t],j==2?(t=mt,s=_t):t==s&&(j==3?[t,s]=jn(t,t,x.log,!1):j==4?[t,s]=Ks(t,t,x.log,!1):x.time?s=t+dt(86400/q):[t,s]=In(t,s,Js,!0))):(mt=En[0]=t=null,_t=En[1]=s=null)),yl(P,t,s)}let Mn,Vl,ss,is,as,rs,os,us,cs,Gt;function ri(t,s,r,o,f,h){t??=Oi,r??=Qs,o??="butt",f??=Oi,h??="round",t!=Mn&&(g.strokeStyle=Mn=t),f!=Vl&&(g.fillStyle=Vl=f),s!=ss&&(g.lineWidth=ss=s),h!=as&&(g.lineJoin=as=h),o!=rs&&(g.lineCap=rs=o),r!=is&&g.setLineDash(is=r)}function oi(t,s,r,o){s!=Vl&&(g.fillStyle=Vl=s),t!=os&&(g.font=os=t),r!=us&&(g.textAlign=us=r),o!=cs&&(g.textBaseline=cs=o)}function fs(t,s,r,o,f=0){if(o.length>0&&t.auto(n,rn)&&(s==null||s.min==null)){let h=Ce(mt,0),w=Ce(_t,o.length-1),y=r.min==null?yo(o,h,w,f,t.distr==3):[r.min,r.max];t.min=al(t.min,r.min=y[0]),t.max=Ot(t.max,r.max=y[1])}}const ui={min:null,max:null};function dr(){for(let o in k){let f=k[o];O[o]==null&&(f.min==null||O[P]!=null&&f.auto(n,rn))&&(O[o]=ui)}for(let o in k){let f=k[o];O[o]==null&&f.from!=null&&O[f.from]!=null&&(O[o]=ui)}O[P]!=null&&Hl(!0);let t={};for(let o in O){let f=O[o];if(f!=null){let h=t[o]=en(k[o],Ro);if(f.min!=null)ct(h,f);else if(o!=P||a==2)if(Tt==0&&h.from==null){let w=h.range(n,null,null,o);h.min=w[0],h.max=w[1]}else h.min=Be,h.max=-Be}}if(Tt>0){S.forEach((o,f)=>{if(a==1){let h=o.scale,w=O[h];if(w==null)return;let y=t[h];if(f==0){let D=y.range(n,y.min,y.max,h);y.min=D[0],y.max=D[1],mt=il(y.min,l[0]),_t=il(y.max,l[0]),_t-mt>1&&(l[0][mt]<y.min&&mt++,l[0][_t]>y.max&&_t--),o.min=tl[mt],o.max=tl[_t]}else o.show&&o.auto&&fs(y,w,o,l[f],o.sorted);o.idxs[0]=mt,o.idxs[1]=_t}else if(f>0&&o.show&&o.auto){let[h,w]=o.facets,y=h.scale,D=w.scale,[W,Y]=l[f],J=t[y],de=t[D];J!=null&&fs(J,O[y],h,W,h.sorted),de!=null&&fs(de,O[D],w,Y,w.sorted),o.min=w.min,o.max=w.max}});for(let o in t){let f=t[o],h=O[o];if(f.from==null&&(h==null||h.min==null)){let w=f.range(n,f.min==Be?null:f.min,f.max==-Be?null:f.max,o);f.min=w[0],f.max=w[1]}}}for(let o in t){let f=t[o];if(f.from!=null){let h=t[f.from];if(h.min==null)f.min=f.max=null;else{let w=f.range(n,h.min,h.max,o);f.min=w[0],f.max=w[1]}}}let s={},r=!1;for(let o in t){let f=t[o],h=k[o];if(h.min!=f.min||h.max!=f.max){h.min=f.min,h.max=f.max;let w=h.distr;h._min=w==3?wl(h.min):w==4?As(h.min,h.asinh):w==100?h.fwd(h.min):h.min,h._max=w==3?wl(h.max):w==4?As(h.max,h.asinh):w==100?h.fwd(h.max):h.max,s[o]=r=!0}}if(r){S.forEach((o,f)=>{a==2?f>0&&s.y&&(o._paths=null):s[o.scale]&&(o._paths=null)});for(let o in s)$=!0,bt("setScale",o);Ye&&N.left>=0&&(Me=Pe=!0)}for(let o in O)O[o]=null}function pr(t){let s=Ns(mt-1,0,Tt-1),r=Ns(_t+1,0,Tt-1);for(;t[s]==null&&s>0;)s--;for(;t[r]==null&&r<Tt-1;)r++;return[s,r]}function hr(){if(Tt>0){let t=S.some(s=>s._focus)&&Gt!=Ae.alpha;t&&(g.globalAlpha=Gt=Ae.alpha),S.forEach((s,r)=>{if(r>0&&s.show&&(ci(r,!1),ci(r,!0),s._paths==null)){let o=Gt;Gt!=s.alpha&&(g.globalAlpha=Gt=s.alpha);let f=a==2?[0,l[r][0].length-1]:pr(l[r]);s._paths=s.paths(n,r,f[0],f[1]),Gt!=o&&(g.globalAlpha=Gt=o)}}),S.forEach((s,r)=>{if(r>0&&s.show){let o=Gt;Gt!=s.alpha&&(g.globalAlpha=Gt=s.alpha),s._paths!=null&&fi(r,!1);{let f=s._paths!=null?s._paths.gaps:null,h=s.points.show(n,r,mt,_t,f),w=s.points.filter(n,r,h,f);(h||w)&&(s.points._paths=s.points.paths(n,r,mt,_t,w),fi(r,!0))}Gt!=o&&(g.globalAlpha=Gt=o),bt("drawSeries",r)}}),t&&(g.globalAlpha=Gt=1)}}function ci(t,s){let r=s?S[t].points:S[t];r._stroke=r.stroke(n,t),r._fill=r.fill(n,t)}function fi(t,s){let r=s?S[t].points:S[t],{stroke:o,fill:f,clip:h,flags:w,_stroke:y=r._stroke,_fill:D=r._fill,_width:W=r.width}=r._paths;W=Ue(W*Oe,3);let Y=null,J=W%2/2;s&&D==null&&(D=W>0?"#fff":y);let de=r.pxAlign==1&&J>0;if(de&&g.translate(J,J),!s){let Fe=U-W/2,Le=Z-W/2,be=te+W,oe=X+W;Y=new Path2D,Y.rect(Fe,Le,be,oe)}s?ds(y,W,r.dash,r.cap,D,o,f,w,h):vr(t,y,W,r.dash,r.cap,D,o,f,w,Y,h),de&&g.translate(-J,-J)}function vr(t,s,r,o,f,h,w,y,D,W,Y){let J=!1;D!=0&&re.forEach((de,Fe)=>{if(de.series[0]==t){let Le=S[de.series[1]],be=l[de.series[1]],oe=(Le._paths||Sn).band;El(oe)&&(oe=de.dir==1?oe[0]:oe[1]);let le,Je=null;Le.show&&oe&&To(be,mt,_t)?(Je=de.fill(n,Fe)||h,le=Le._paths.clip):oe=null,ds(s,r,o,f,Je,w,y,D,W,Y,le,oe),J=!0}}),J||ds(s,r,o,f,h,w,y,D,W,Y)}const di=tn|Hs;function ds(t,s,r,o,f,h,w,y,D,W,Y,J){ri(t,s,r,o,f),(D||W||J)&&(g.save(),D&&g.clip(D),W&&g.clip(W)),J?(y&di)==di?(g.clip(J),Y&&g.clip(Y),Dn(f,w),An(t,h,s)):y&Hs?(Dn(f,w),g.clip(J),An(t,h,s)):y&tn&&(g.save(),g.clip(J),Y&&g.clip(Y),Dn(f,w),g.restore(),An(t,h,s)):(Dn(f,w),An(t,h,s)),(D||W||J)&&g.restore()}function An(t,s,r){r>0&&(s instanceof Map?s.forEach((o,f)=>{g.strokeStyle=Mn=f,g.stroke(o)}):s!=null&&t&&g.stroke(s))}function Dn(t,s){s instanceof Map?s.forEach((r,o)=>{g.fillStyle=Vl=o,g.fill(r)}):s!=null&&t&&g.fill(s)}function gr(t,s,r,o){let f=I[t],h;if(o<=0)h=[0,0];else{let w=f._space=f.space(n,t,s,r,o),y=f._incrs=f.incrs(n,t,s,r,o,w);h=qu(s,r,y,o,w)}return f._found=h}function ps(t,s,r,o,f,h,w,y,D,W){let Y=w%2/2;C==1&&g.translate(Y,Y),ri(y,w,D,W,y),g.beginPath();let J,de,Fe,Le,be=f+(o==0||o==3?-h:h);r==0?(de=f,Le=be):(J=f,Fe=be);for(let oe=0;oe<t.length;oe++)s[oe]!=null&&(r==0?J=Fe=t[oe]:de=Le=t[oe],g.moveTo(J,de),g.lineTo(Fe,Le));g.stroke(),C==1&&g.translate(-Y,-Y)}function mr(t){let s=!0;return I.forEach((r,o)=>{if(!r.show)return;let f=k[r.scale];if(f.min==null){r._show&&(s=!1,r._show=!1,Hl(!1));return}else r._show||(s=!1,r._show=!0,Hl(!1));let h=r.side,w=h%2,{min:y,max:D}=f,[W,Y]=gr(o,y,D,w==0?B:A);if(Y==0)return;let J=f.distr==2,de=r._splits=r.splits(n,o,y,D,W,Y,J),Fe=f.distr==2?de.map(le=>tl[le]):de,Le=f.distr==2?tl[de[1]]-tl[de[0]]:W,be=r._values=r.values(n,r.filter(n,Fe,o,Y,Le),o,Y,Le);r._rotate=h==2?r.rotate(n,be,o,Y):0;let oe=r._size;r._size=$t(r.size(n,be,o,t)),oe!=null&&r._size!=oe&&(s=!1)}),s}function _r(t){let s=!0;return ii.forEach((r,o)=>{let f=r(n,o,gl,t);f!=bl[o]&&(s=!1),bl[o]=f}),s}function wr(){for(let t=0;t<I.length;t++){let s=I[t];if(!s.show||!s._show)continue;let r=s.side,o=r%2,f,h,w=s.stroke(n,t),y=r==0||r==3?-1:1,[D,W]=s._found;if(s.label!=null){let Rt=s.labelGap*y,Ut=dt((s._lpos+Rt)*Oe);oi(s.labelFont[0],w,"center",r==2?hn:Fi),g.save(),o==1?(f=h=0,g.translate(Ut,dt(Z+X/2)),g.rotate((r==3?-Nn:Nn)/2)):(f=dt(U+te/2),h=Ut);let Cl=Da(s.label)?s.label(n,t,D,W):s.label;g.fillText(Cl,f,h),g.restore()}if(W==0)continue;let Y=k[s.scale],J=o==0?te:X,de=o==0?U:Z,Fe=s._splits,Le=Y.distr==2?Fe.map(Rt=>tl[Rt]):Fe,be=Y.distr==2?tl[Fe[1]]-tl[Fe[0]]:D,oe=s.ticks,le=s.border,Je=oe.show?oe.size:0,lt=dt(Je*Oe),St=dt((s.alignTo==2?s._size-Je-s.gap:s.gap)*Oe),Ve=s._rotate*-Nn/180,nt=R(s._pos*Oe),Wt=(lt+St)*y,Ct=nt+Wt;h=o==0?Ct:0,f=o==1?Ct:0;let Zt=s.font[0],ll=s.align==1?Jl:s.align==2?Ts:Ve>0?Jl:Ve<0?Ts:o==0?"center":r==3?Ts:Jl,dl=Ve||o==1?"middle":r==2?hn:Fi;oi(Zt,w,ll,dl);let Bt=s.font[1]*s.lineGap,Qt=Fe.map(Rt=>R(p(Rt,Y,J,de))),nl=s._values;for(let Rt=0;Rt<nl.length;Rt++){let Ut=nl[Rt];if(Ut!=null){o==0?f=Qt[Rt]:h=Qt[Rt],Ut=""+Ut;let Cl=Ut.indexOf(`
`)==-1?[Ut]:Ut.split(/\n/gm);for(let Pt=0;Pt<Cl.length;Pt++){let Ci=Cl[Pt];Ve?(g.save(),g.translate(f,h+Pt*Bt),g.rotate(Ve),g.fillText(Ci,0,0),g.restore()):g.fillText(Ci,f,h+Pt*Bt)}}}oe.show&&ps(Qt,oe.filter(n,Le,t,W,be),o,r,nt,lt,Ue(oe.width*Oe,3),oe.stroke(n,t),oe.dash,oe.cap);let pl=s.grid;pl.show&&ps(Qt,pl.filter(n,Le,t,W,be),o,o==0?2:1,o==0?Z:U,o==0?X:te,Ue(pl.width*Oe,3),pl.stroke(n,t),pl.dash,pl.cap),le.show&&ps([nt],[1],o==0?1:0,o==0?1:2,o==1?Z:U,o==1?X:te,Ue(le.width*Oe,3),le.stroke(n,t),le.dash,le.cap)}bt("drawAxes")}function Hl(t){S.forEach((s,r)=>{r>0&&(s._paths=null,t&&(a==1?(s.min=null,s.max=null):s.facets.forEach(o=>{o.min=null,o.max=null})))})}let Ln=!1,hs=!1,on=[];function xr(){hs=!1;for(let t=0;t<on.length;t++)bt(...on[t]);on.length=0}function Il(){Ln||(Vo(pi),Ln=!0)}function br(t,s=!1){Ln=!0,hs=s,t(n),pi(),s&&on.length>0&&queueMicrotask(xr)}n.batch=br;function pi(){if(ve&&(dr(),ve=!1),$&&(Kt(),$=!1),ie){if(Ze(T,Jl,we),Ze(T,hn,qe),Ze(T,mn,B),Ze(T,_n,A),Ze(G,Jl,we),Ze(G,hn,qe),Ze(G,mn,B),Ze(G,_n,A),Ze(m,mn,ne),Ze(m,_n,ae),b.width=dt(ne*Oe),b.height=dt(ae*Oe),I.forEach(({_el:t,_show:s,_size:r,_pos:o,side:f})=>{if(t!=null)if(s){let h=f===3||f===0?r:0,w=f%2==1;Ze(t,w?"left":"top",o-h),Ze(t,w?"width":"height",r),Ze(t,w?"top":"left",w?qe:we),Ze(t,w?"height":"width",w?A:B),Os(t,Fl)}else Yt(t,Fl)}),Mn=Vl=ss=as=rs=os=us=cs=is=null,Gt=1,fn(!0),we!=zt||qe!=Dt||B!=Lt||A!=z){Hl(!1);let t=B/Lt,s=A/z;if(Ye&&!Me&&N.left>=0){N.left*=t,N.top*=s,Wl&&hl(Wl,dt(N.left),0,B,A),Bl&&hl(Bl,0,dt(N.top),B,A);for(let r=0;r<gt.length;r++){let o=gt[r];o!=null&&(Jt[r]*=t,ol[r]*=s,hl(o,$t(Jt[r]),$t(ol[r]),B,A))}}if(Ke.show&&!Re&&Ke.left>=0&&Ke.width>0){Ke.left*=t,Ke.width*=t,Ke.top*=s,Ke.height*=s;for(let r in xs)Ze(ql,r,Ke[r])}zt=we,Dt=qe,Lt=B,z=A}bt("setSize"),ie=!1}ne>0&&ae>0&&(g.clearRect(0,0,b.width,b.height),bt("drawClear"),Q.forEach(t=>t()),bt("draw")),Ke.show&&Re&&(Cn(Ke),Re=!1),Ye&&Me&&(Ll(null,!0,!1),Me=!1),ce.show&&ce.live&&Pe&&(_s(),Pe=!1),d||(d=!0,n.status=1,bt("ready")),rn=!1,Ln=!1}n.redraw=(t,s)=>{$=s||!1,t!==!1?yl(P,x.min,x.max):Il()};function vs(t,s){let r=k[t];if(r.from==null){if(Tt==0){let o=r.range(n,s.min,s.max,t);s.min=o[0],s.max=o[1]}if(s.min>s.max){let o=s.min;s.min=s.max,s.max=o}if(Tt>1&&s.min!=null&&s.max!=null&&s.max-s.min<1e-16)return;t==P&&r.distr==2&&Tt>0&&(s.min=il(s.min,l[0]),s.max=il(s.max,l[0]),s.min==s.max&&s.max++),O[t]=s,ve=!0,Il()}}n.setScale=vs;let gs,ms,Wl,Bl,hi,vi,Ul,Yl,gi,mi,je,Xe,Sl=!1;const Et=N.drag;let wt=Et.x,xt=Et.y;Ye&&(N.x&&(gs=Xt(oo,G)),N.y&&(ms=Xt(uo,G)),x.ori==0?(Wl=gs,Bl=ms):(Wl=ms,Bl=gs),je=N.left,Xe=N.top);const Ke=n.select=ct({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),ql=Ke.show?Xt(ro,Ke.over?G:T):null;function Cn(t,s){if(Ke.show){for(let r in t)Ke[r]=t[r],r in xs&&Ze(ql,r,t[r]);s!==!1&&bt("setSelect")}}n.setSelect=Cn;function Sr(t){if(S[t].show)De&&Os(ye[t],Fl);else if(De&&Yt(ye[t],Fl),Ye){let r=It?gt[0]:gt[t];r!=null&&hl(r,-10,-10,B,A)}}function yl(t,s,r){vs(t,{min:s,max:r})}function cl(t,s,r,o){s.focus!=null&&Mr(t),s.show!=null&&S.forEach((f,h)=>{h>0&&(t==h||t==null)&&(f.show=s.show,Sr(h),a==2?(yl(f.facets[0].scale,null,null),yl(f.facets[1].scale,null,null)):yl(f.scale,null,null),Il())}),r!==!1&&bt("setSeries",t,s),o&&dn("setSeries",n,t,s)}n.setSeries=cl;function yr(t,s){ct(re[t],s)}function kr(t,s){t.fill=Se(t.fill||null),t.dir=Ce(t.dir,-1),s=s??re.length,re.splice(s,0,t)}function Tr(t){t==null?re.length=0:re.splice(t,1)}n.addBand=kr,n.setBand=yr,n.delBand=Tr;function Er(t,s){S[t].alpha=s,Ye&&gt[t]!=null&&(gt[t].style.opacity=s),De&&ye[t]&&(ye[t].style.opacity=s)}let ml,kl,Dl;const jl={focus:!0};function Mr(t){if(t!=Dl){let s=t==null,r=Ae.alpha!=1;S.forEach((o,f)=>{if(a==1||f>0){let h=s||f==0||f==t;o._focus=s?null:h,r&&Er(f,h?1:Ae.alpha)}}),Dl=t,r&&Il()}}De&&ot&&Ge(Gi,he,t=>{N._lock||(ke(t),Dl!=null&&cl(null,jl,!0,ut.setSeries))});function fl(t,s,r){let o=k[s];r&&(t=t/Oe-(o.ori==1?qe:we));let f=B;o.ori==1&&(f=A,t=f-t),o.dir==-1&&(t=f-t);let h=o._min,w=o._max,y=t/f,D=h+(w-h)*y,W=o.distr;return W==3?Xl(10,D):W==4?Mo(D,o.asinh):W==100?o.bwd(D):D}function Ar(t,s){let r=fl(t,P,s);return il(r,l[0],mt,_t)}n.valToIdx=t=>il(t,l[0]),n.posToIdx=Ar,n.posToVal=fl,n.valToPos=(t,s,r)=>k[s].ori==0?c(t,k[s],r?te:B,r?U:0):u(t,k[s],r?X:A,r?Z:0),n.setCursor=(t,s,r)=>{je=t.left,Xe=t.top,Ll(null,s,r)};function _i(t,s){Ze(ql,Jl,Ke.left=t),Ze(ql,mn,Ke.width=s)}function wi(t,s){Ze(ql,hn,Ke.top=t),Ze(ql,_n,Ke.height=s)}let un=x.ori==0?_i:wi,cn=x.ori==1?_i:wi;function Dr(){if(De&&ce.live)for(let t=a==2?1:0;t<S.length;t++){if(t==0&&We)continue;let s=ce.values[t],r=0;for(let o in s)st[t][r++].firstChild.nodeValue=s[o]}}function _s(t,s){if(t!=null&&(t.idxs?t.idxs.forEach((r,o)=>{me[o]=r}):Co(t.idx)||me.fill(t.idx),ce.idx=me[0]),De&&ce.live){for(let r=0;r<S.length;r++)(r>0||a==1&&!We)&&Lr(r,me[r]);Dr()}Pe=!1,s!==!1&&bt("setLegend")}n.setLegend=_s;function Lr(t,s){let r=S[t],o=t==0&&j==2?tl:l[t],f;We?f=r.values(n,t,s)??rt:(f=r.value(n,s==null?null:o[s],t,s),f=f==null?rt:{_:f}),ce.values[t]=f}function Ll(t,s,r){gi=je,mi=Xe,[je,Xe]=N.move(n,je,Xe),N.left=je,N.top=Xe,Ye&&(Wl&&hl(Wl,dt(je),0,B,A),Bl&&hl(Bl,0,dt(Xe),B,A));let o,f=mt>_t;ml=Be,kl=null;let h=x.ori==0?B:A,w=x.ori==1?B:A;if(je<0||Tt==0||f){o=N.idx=null;for(let y=0;y<S.length;y++){let D=gt[y];D!=null&&hl(D,-10,-10,B,A)}ot&&cl(null,jl,!0,t==null&&ut.setSeries),ce.live&&(me.fill(o),Pe=!0)}else{let y,D,W;a==1&&(y=x.ori==0?je:Xe,D=fl(y,P),o=N.idx=il(D,l[0],mt,_t),W=F(l[0][o],x,h,0));let Y=-10,J=-10,de=0,Fe=0,Le=!0,be="",oe="";for(let le=a==2?1:0;le<S.length;le++){let Je=S[le],lt=me[le],St=lt==null?null:a==1?l[le][lt]:l[le][1][lt],Ve=N.dataIdx(n,le,o,D),nt=Ve==null?null:a==1?l[le][Ve]:l[le][1][Ve];if(Pe=Pe||nt!=St||Ve!=lt,me[le]=Ve,le>0&&Je.show){let Wt=Ve==null?-10:Ve==o?W:F(a==1?l[0][Ve]:l[le][0][Ve],x,h,0),Ct=nt==null?-10:V(nt,a==1?k[Je.scale]:k[Je.facets[1].scale],w,0);if(ot&&nt!=null){let Zt=x.ori==1?je:Xe,ll=pt(Ae.dist(n,le,Ve,Ct,Zt));if(ll<ml){let dl=Ae.bias;if(dl!=0){let Bt=fl(Zt,Je.scale),Qt=nt>=0?1:-1,nl=Bt>=0?1:-1;nl==Qt&&(nl==1?dl==1?nt>=Bt:nt<=Bt:dl==1?nt<=Bt:nt>=Bt)&&(ml=ll,kl=le)}else ml=ll,kl=le}}if(Pe||It){let Zt,ll;x.ori==0?(Zt=Wt,ll=Ct):(Zt=Ct,ll=Wt);let dl,Bt,Qt,nl,pl,Rt,Ut=!0,Cl=xe.bbox;if(Cl!=null){Ut=!1;let Pt=Cl(n,le);Qt=Pt.left,nl=Pt.top,dl=Pt.width,Bt=Pt.height}else Qt=Zt,nl=ll,dl=Bt=xe.size(n,le);if(Rt=xe.fill(n,le),pl=xe.stroke(n,le),It)le==kl&&ml<=Ae.prox&&(Y=Qt,J=nl,de=dl,Fe=Bt,Le=Ut,be=Rt,oe=pl);else{let Pt=gt[le];Pt!=null&&(Jt[le]=Qt,ol[le]=nl,Yi(Pt,dl,Bt,Ut),Bi(Pt,Rt,pl),hl(Pt,$t(Qt),$t(nl),B,A))}}}}if(It){let le=Ae.prox,Je=Dl==null?ml<=le:ml>le||kl!=Dl;if(Pe||Je){let lt=gt[0];lt!=null&&(Jt[0]=Y,ol[0]=J,Yi(lt,de,Fe,Le),Bi(lt,be,oe),hl(lt,$t(Y),$t(J),B,A))}}}if(Ke.show&&Sl)if(t!=null){let[y,D]=ut.scales,[W,Y]=ut.match,[J,de]=t.cursor.sync.scales,Fe=t.cursor.drag;if(wt=Fe._x,xt=Fe._y,wt||xt){let{left:Le,top:be,width:oe,height:le}=t.select,Je=t.scales[J].ori,lt=t.posToVal,St,Ve,nt,Wt,Ct,Zt=y!=null&&W(y,J),ll=D!=null&&Y(D,de);Zt&&wt?(Je==0?(St=Le,Ve=oe):(St=be,Ve=le),nt=k[y],Wt=F(lt(St,J),nt,h,0),Ct=F(lt(St+Ve,J),nt,h,0),un(al(Wt,Ct),pt(Ct-Wt))):un(0,h),ll&&xt?(Je==1?(St=Le,Ve=oe):(St=be,Ve=le),nt=k[D],Wt=V(lt(St,de),nt,w,0),Ct=V(lt(St+Ve,de),nt,w,0),cn(al(Wt,Ct),pt(Ct-Wt))):cn(0,w)}else bs()}else{let y=pt(gi-hi),D=pt(mi-vi);if(x.ori==1){let de=y;y=D,D=de}wt=Et.x&&y>=Et.dist,xt=Et.y&&D>=Et.dist;let W=Et.uni;W!=null?wt&&xt&&(wt=y>=W,xt=D>=W,!wt&&!xt&&(D>y?xt=!0:wt=!0)):Et.x&&Et.y&&(wt||xt)&&(wt=xt=!0);let Y,J;wt&&(x.ori==0?(Y=Ul,J=je):(Y=Yl,J=Xe),un(al(Y,J),pt(J-Y)),xt||cn(0,w)),xt&&(x.ori==1?(Y=Ul,J=je):(Y=Yl,J=Xe),cn(al(Y,J),pt(J-Y)),wt||un(0,h)),!wt&&!xt&&(un(0,0),cn(0,0))}if(Et._x=wt,Et._y=xt,t==null){if(r){if(Li!=null){let[y,D]=ut.scales;ut.values[0]=y!=null?fl(x.ori==0?je:Xe,y):null,ut.values[1]=D!=null?fl(x.ori==1?je:Xe,D):null}dn(Es,n,je,Xe,B,A,o)}if(ot){let y=r&&ut.setSeries,D=Ae.prox;Dl==null?ml<=D&&cl(kl,jl,!0,y):ml>D?cl(null,jl,!0,y):kl!=Dl&&cl(kl,jl,!0,y)}}Pe&&(ce.idx=o,_s()),s!==!1&&bt("setCursor")}let Tl=null;Object.defineProperty(n,"rect",{get(){return Tl==null&&fn(!1),Tl}});function fn(t=!1){t?Tl=null:(Tl=G.getBoundingClientRect(),bt("syncRect",Tl))}function xi(t,s,r,o,f,h,w){N._lock||Sl&&t!=null&&t.movementX==0&&t.movementY==0||(ws(t,s,r,o,f,h,w,!1,t!=null),t!=null?Ll(null,!0,!0):Ll(s,!0,!1))}function ws(t,s,r,o,f,h,w,y,D){if(Tl==null&&fn(!1),ke(t),t!=null)r=t.clientX-Tl.left,o=t.clientY-Tl.top;else{if(r<0||o<0){je=-10,Xe=-10;return}let[W,Y]=ut.scales,J=s.cursor.sync,[de,Fe]=J.values,[Le,be]=J.scales,[oe,le]=ut.match,Je=s.axes[0].side%2==1,lt=x.ori==0?B:A,St=x.ori==1?B:A,Ve=Je?h:f,nt=Je?f:h,Wt=Je?o:r,Ct=Je?r:o;if(Le!=null?r=oe(W,Le)?p(de,k[W],lt,0):-10:r=lt*(Wt/Ve),be!=null?o=le(Y,be)?p(Fe,k[Y],St,0):-10:o=St*(Ct/nt),x.ori==1){let Zt=r;r=o,o=Zt}}D&&(s==null||s.cursor.event.type==Es)&&((r<=1||r>=B-1)&&(r=Rl(r,B)),(o<=1||o>=A-1)&&(o=Rl(o,A))),y?(hi=r,vi=o,[Ul,Yl]=N.move(n,r,o)):(je=r,Xe=o)}const xs={width:0,height:0,left:0,top:0};function bs(){Cn(xs,!1)}let bi,Si,yi,ki;function Ti(t,s,r,o,f,h,w){Sl=!0,wt=xt=Et._x=Et._y=!1,ws(t,s,r,o,f,h,w,!0,!1),t!=null&&(Ge(Ms,Ps,Ei,!1),dn(zi,n,Ul,Yl,B,A,null));let{left:y,top:D,width:W,height:Y}=Ke;bi=y,Si=D,yi=W,ki=Y}function Ei(t,s,r,o,f,h,w){Sl=Et._x=Et._y=!1,ws(t,s,r,o,f,h,w,!1,!0);let{left:y,top:D,width:W,height:Y}=Ke,J=W>0||Y>0,de=bi!=y||Si!=D||yi!=W||ki!=Y;if(J&&de&&Cn(Ke),Et.setScale&&J&&de){let Fe=y,Le=W,be=D,oe=Y;if(x.ori==1&&(Fe=D,Le=Y,be=y,oe=W),wt&&yl(P,fl(Fe,P),fl(Fe+Le,P)),xt)for(let le in k){let Je=k[le];le!=P&&Je.from==null&&Je.min!=Be&&yl(le,fl(be+oe,le),fl(be,le))}bs()}else N.lock&&(N._lock=!N._lock,Ll(s,!0,t!=null));t!=null&&(Vt(Ms,Ps),dn(Ms,n,je,Xe,B,A,null))}function Cr(t,s,r,o,f,h,w){if(N._lock)return;ke(t);let y=Sl;if(Sl){let D=!0,W=!0,Y=10,J,de;x.ori==0?(J=wt,de=xt):(J=xt,de=wt),J&&de&&(D=je<=Y||je>=B-Y,W=Xe<=Y||Xe>=A-Y),J&&D&&(je=je<Ul?0:B),de&&W&&(Xe=Xe<Yl?0:A),Ll(null,!0,!0),Sl=!1}je=-10,Xe=-10,me.fill(null),Ll(null,!0,!0),y&&(Sl=y)}function Mi(t,s,r,o,f,h,w){N._lock||(ke(t),ns(),bs(),t!=null&&dn(Vi,n,je,Xe,B,A,null))}function Ai(){I.forEach(ju),et(n.width,n.height,!0)}Ol(Hn,Ql,Ai);const Kl={};Kl.mousedown=Ti,Kl.mousemove=xi,Kl.mouseup=Ei,Kl.dblclick=Mi,Kl.setSeries=(t,s,r,o)=>{let f=ut.match[2];r=f(n,s,r),r!=-1&&cl(r,o,!0,!1)},Ye&&(Ge(zi,G,Ti),Ge(Es,G,xi),Ge(Ni,G,t=>{ke(t),fn(!1)}),Ge(Gi,G,Cr),Ge(Vi,G,Mi),Is.add(n),n.syncRect=fn);const Rn=n.hooks=e.hooks||{};function bt(t,s,r){hs?on.push([t,s,r]):t in Rn&&Rn[t].forEach(o=>{o.call(null,n,s,r)})}(e.plugins||[]).forEach(t=>{for(let s in t.hooks)Rn[s]=(Rn[s]||[]).concat(t.hooks[s])});const Di=(t,s,r)=>r,ut=ct({key:null,setSeries:!1,filters:{pub:Zi,sub:Zi},scales:[P,S[1]?S[1].scale:null],match:[Qi,Qi,Di],values:[null,null]},N.sync);ut.match.length==2&&ut.match.push(Di),N.sync=ut;const Li=ut.key,Ss=$a(Li);function dn(t,s,r,o,f,h,w){ut.filters.pub(t,s,r,o,f,h,w)&&Ss.pub(t,s,r,o,f,h,w)}Ss.sub(n);function Rr(t,s,r,o,f,h,w){ut.filters.sub(t,s,r,o,f,h,w)&&Kl[t](null,s,r,o,f,h,w)}n.pub=Rr;function Pr(){Ss.unsub(n),Is.delete(n),kt.clear(),zs(Hn,Ql,Ai),v.remove(),he?.remove(),bt("destroy")}n.destroy=Pr;function ys(){bt("init",e,l),ai(l||e.data,!1),O[P]?vs(P,O[P]):ns(),Re=Ke.show&&(Ke.width>0||Ke.height>0),Me=Pe=!0,et(e.width,e.height)}return S.forEach(Gl),I.forEach(ls),i?i instanceof HTMLElement?(i.appendChild(v),ys()):i(n,ys):ys(),n}ht.assign=ct;ht.fmtNum=Zs;ht.rangeNum=In;ht.rangeLog=jn;ht.rangeAsinh=Ks;ht.orient=Nl;ht.pxRatio=Oe;ht.join=Go;ht.fmtDate=Xs,ht.tzDate=Jo;ht.sync=$a;{ht.addGap=Cu,ht.clipGaps=Zn;let e=ht.paths={points:ir};e.linear=rr,e.stepped=Fu,e.bars=Ou,e.spline=Nu}const fr="/api",Ku=[{label:"1H",hours:1},{label:"6H",hours:6},{label:"24H",hours:24},{label:"7D",hours:168},{label:"30D",hours:720}];async function Ju(e,l=24){const i=await fetch(`${fr}/tilts/${e}/readings?hours=${l}&limit=5000`);if(!i.ok)throw new Error(`Failed to fetch readings: ${i.statusText}`);return i.json()}async function Zu(e=24){const l=await fetch(`${fr}/ambient/history?hours=${e}`);if(!l.ok)throw new Error("Failed to fetch ambient history");return l.json()}var Qu=He('<input type="text" class="og-input svelte-3wi8ix" placeholder="1.050" maxlength="5"/>'),Xu=He('<span class="estimated-badge svelte-3wi8ix">est</span>'),$u=He('<button type="button" class="og-btn svelte-3wi8ix"><span> </span> <!> <svg class="edit-icon svelte-3wi8ix" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),ec=He('<div class="stat-pill prediction-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ETA</span> <span class="stat-value prediction svelte-3wi8ix"> </span> <span class="prediction-badge svelte-3wi8ix">pred</span></div>'),tc=He('<div class="stats-panel svelte-3wi8ix"><div class="stats-grid svelte-3wi8ix"><div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Gravity</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Start</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> </span></div></div> <div class="stats-column svelte-3wi8ix"><h4 class="stats-header svelte-3wi8ix">Temperature</h4> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Current</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Average</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">High</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div> <div class="stat-row svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Low</span> <span class="stat-value svelte-3wi8ix"> <span class="stat-unit svelte-3wi8ix"> </span></span></div></div></div> <div class="stats-bottom svelte-3wi8ix"><div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Rate</span> <span> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Duration</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">At SG</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill og-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">OG</span> <!></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">Atten.</span> <span class="stat-value svelte-3wi8ix"> </span></div> <div class="stat-pill svelte-3wi8ix"><span class="stat-label svelte-3wi8ix">ABV</span> <span class="stat-value svelte-3wi8ix"> </span></div> <!></div></div>'),lc=He('<div class="stats-empty svelte-3wi8ix"><span>Not enough data for statistics</span></div>');function nc(e,l){Un(l,!0);const i=.5,n=1.2,a=32,c=212;function u(E,x){const j=[...E].sort((se,H)=>se-H),F=x/100*(j.length-1),V=Math.floor(F),O=Math.ceil(F);return V===O?j[V]:j[V]+(j[O]-j[V])*(F-V)}let p=Vn(l,"trend",3,null),d=at(!1),v=at(""),b=at(null),g=Ft(()=>zn.config.temp_units==="C"),m=Ft(Sa),T=Ft(()=>{if(l.readings.length===0)return null;const E=l.readings.filter(fe=>fe.status!=="invalid");if(E.length===0)return null;const x=[...E].sort((fe,it)=>new Date(fe.timestamp).getTime()-new Date(it.timestamp).getTime()),j=x[0],F=x[x.length-1],V=x.map(fe=>fe.sg_calibrated??fe.sg_raw).filter(fe=>fe!==null&&fe>=i&&fe<=n),O=x.map(fe=>fe.temp_calibrated??fe.temp_raw).filter(fe=>fe!==null&&fe>=a&&fe<=c);if(V.length===0)return null;const se=V[V.length-1],H=V[0],Ie=u(V,95),ge=u(V,5),pe=new Date(j.timestamp).getTime(),me=new Date(F.timestamp).getTime(),N=(me-pe)/(1e3*60*60*24),De=N>0?(se-H)/N:0;let Ye=null,_e=null,he=null,tt=null;if(O.length>0){const fe=O[O.length-1],it=O.reduce((kt,Ge)=>kt+Ge,0)/O.length,ft=u(O,95),At=u(O,5);Ye=_(g)?gn(fe):fe,_e=_(g)?gn(it):it,he=_(g)?gn(ft):ft,tt=_(g)?gn(At):At}let Qe=0;const ye=.001;for(let fe=V.length-2;fe>=0;fe--)if(Math.abs(V[fe]-se)>ye){const it=new Date(x[fe+1].timestamp).getTime();Qe=(me-it)/(1e3*60*60*24);break}let st=null,$e=null;const We=l.originalGravity??Ie,rt=l.originalGravity===null;return We>1&&We>se&&(st=(We-se)/(We-1)*100,$e=(We-se)*131.25),{currentSg:se,firstSg:H,highSg:Ie,lowSg:ge,currentTemp:Ye,avgTemp:_e,highTemp:he,lowTemp:tt,fermRate:De,durationDays:N,daysAtCurrentSg:Qe,apparentAttenuation:st,abv:$e,ogIsEstimated:rt,effectiveOg:We}});function G(){Ee(v,l.originalGravity?.toFixed(3)??"",!0),Ee(d,!0),setTimeout(()=>_(b)?.focus(),0)}function C(){const E=_(v).trim();if(!E)l.onOgChange(null);else{const x=parseFloat(E);!isNaN(x)&&x>=.99&&x<=1.2&&l.onOgChange(x)}Ee(d,!1)}function R(E){E.key==="Enter"?C():E.key==="Escape"&&Ee(d,!1)}function q(E){return E.toFixed(3)}function S(E){return`${E>=0?"+":""}${E.toFixed(4)}`}function I(E){return E<1?`${(E*24).toFixed(1)}h`:`${E.toFixed(1)}d`}function k(E){return E===null?"--":E.toFixed(1)}function re(E){return E===null?"--":`${E.toFixed(1)}%`}var P=wa(),ee=Bs(P);{var Q=E=>{var x=tc(),j=L(x),F=L(j),V=K(L(F),2),O=K(L(V),2),se=L(O,!0);M(O),M(V);var H=K(V,2),Ie=K(L(H),2),ge=L(Ie,!0);M(Ie),M(H);var pe=K(H,2),me=K(L(pe),2),ce=L(me,!0);M(me),M(pe);var N=K(pe,2),De=K(L(N),2),Ye=L(De,!0);M(De),M(N),M(F);var _e=K(F,2),he=K(L(_e),2),tt=K(L(he),2),Qe=L(tt,!0),ye=K(Qe),st=L(ye,!0);M(ye),M(tt),M(he);var $e=K(he,2),We=K(L($e),2),rt=L(We,!0),fe=K(rt),it=L(fe,!0);M(fe),M(We),M($e);var ft=K($e,2),At=K(L(ft),2),kt=L(At,!0),Ge=K(kt),Vt=L(Ge,!0);M(Ge),M(At),M(ft);var ne=K(ft,2),ae=K(L(ne),2),B=L(ae,!0),A=K(B),we=L(A,!0);M(A),M(ae),M(ne),M(_e),M(j);var qe=K(j,2),zt=L(qe),Dt=K(L(zt),2);let Lt;var z=L(Dt);M(Dt),M(zt);var U=K(zt,2),Z=K(L(U),2),te=L(Z,!0);M(Z),M(U);var X=K(U,2),ve=K(L(X),2),ie=L(ve,!0);M(ve),M(X);var $=K(X,2),Me=K(L($),2);{var Re=xe=>{var Ae=Qu();ya(Ae),Ae.__keydown=R,Us(Ae,ot=>Ee(b,ot),()=>_(b)),xa("blur",Ae,C),ka(Ae,()=>_(v),ot=>Ee(v,ot)),ze(xe,Ae)},Pe=xe=>{var Ae=$u();Ae.__click=G;var ot=L(Ae);let It;var gt=L(ot,!0);M(ot);var Jt=K(ot,2);{var ol=ul=>{var Gl=Xu();ze(ul,Gl)};yt(Jt,ul=>{_(T).ogIsEstimated&&ul(ol)})}Ml(2),M(Ae),Mt(ul=>{kn(Ae,"title",_(T).ogIsEstimated?"Estimated from high reading - click to set actual OG":"Click to edit Original Gravity"),It=_l(ot,1,"stat-value svelte-3wi8ix",null,It,{estimated:_(T).ogIsEstimated}),Te(gt,ul)},[()=>q(_(T).effectiveOg)]),ze(xe,Ae)};yt(Me,xe=>{_(d)?xe(Re):xe(Pe,!1)})}M($);var et=K($,2),Nt=K(L(et),2),rl=L(Nt,!0);M(Nt),M(et);var Kt=K(et,2),el=K(L(Kt),2),vl=L(el,!0);M(el),M(Kt);var Ht=K(Kt,2);{var ke=xe=>{var Ae=ec(),ot=K(L(Ae),2),It=L(ot,!0);M(ot),Ml(2),M(Ae),Mt((gt,Jt)=>{kn(Ae,"title",`Estimated time until target FG (R=${gt??""})`),Te(It,Jt)},[()=>p().r2.toFixed(2),()=>I(p().daysToFg)]),ze(xe,Ae)};yt(Ht,xe=>{p()?.daysToFg!==null&&p()?.daysToFg!==void 0&&xe(ke)})}M(qe),M(x),Mt((xe,Ae,ot,It,gt,Jt,ol,ul,Gl,es,ts,gl,ls)=>{Te(se,xe),Te(ge,Ae),Te(ce,ot),Te(Ye,It),Te(Qe,gt),Te(st,_(m)),Te(rt,Jt),Te(it,_(m)),Te(kt,ol),Te(Vt,_(m)),Te(B,ul),Te(we,_(m)),Lt=_l(Dt,1,"stat-value rate svelte-3wi8ix",null,Lt,{fermenting:_(T).fermRate<0}),Te(z,`${Gl??""}/day`),Te(te,es),Te(ie,ts),Te(rl,gl),Te(vl,ls)},[()=>q(_(T).currentSg),()=>q(_(T).firstSg),()=>q(_(T).highSg),()=>q(_(T).lowSg),()=>k(_(T).currentTemp),()=>k(_(T).avgTemp),()=>k(_(T).highTemp),()=>k(_(T).lowTemp),()=>S(_(T).fermRate),()=>I(_(T).durationDays),()=>I(_(T).daysAtCurrentSg),()=>re(_(T).apparentAttenuation),()=>re(_(T).abv)]),ze(E,x)},ue=E=>{var x=lc();ze(E,x)};yt(ee,E=>{_(T)?E(Q):E(ue,!1)})}ze(e,P),Yn()}Bn(["keydown","click"]);var sc=He('<button type="button"> </button>'),ic=He("<option> </option>"),ac=He('<div class="loading-overlay svelte-1e832qd"><div class="loading-spinner svelte-1e832qd"></div></div>'),rc=He('<div class="chart-error svelte-1e832qd"><span>Failed to load chart</span> <button type="button" class="retry-btn svelte-1e832qd">Retry</button></div>'),oc=He('<div class="chart-empty svelte-1e832qd"><span>No historical data yet</span> <span class="text-xs opacity-60">Data will appear as readings are logged</span></div>'),uc=He('<div class="chart-wrapper svelte-1e832qd"><div class="chart-controls svelte-1e832qd"><div class="flex items-center gap-1.5"></div> <div class="controls-right svelte-1e832qd"><div class="refresh-control svelte-1e832qd"><label for="refreshInterval" class="svelte-1e832qd">Refresh</label> <select id="refreshInterval" class="refresh-select svelte-1e832qd"></select></div> <div class="chart-legend svelte-1e832qd"><span class="legend-item svelte-1e832qd"><span class="legend-dot svelte-1e832qd" style="background: var(--tilt-yellow);"></span> <span>SG</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line svelte-1e832qd"></span> <span>Wort</span></span> <span class="legend-item svelte-1e832qd"><span class="legend-line legend-line-dotted svelte-1e832qd" style="background: #22d3ee;"></span> <span>Ambient</span></span> <button type="button"><span class="legend-line legend-line-dashed svelte-1e832qd"></span> <span>Trend</span></button></div></div></div> <div class="chart-container svelte-1e832qd"><!> <!></div> <!></div>');function cc(e,l){Un(l,!0);const i="brewsignal_chart_refresh_minutes",n=[{label:"Off",value:0},{label:"1 min",value:1},{label:"3 min",value:3},{label:"5 min",value:5},{label:"10 min",value:10}];let a=Ft(()=>zn.config.smoothing_enabled),c=Ft(()=>zn.config.smoothing_samples),u=at("UTC"),p=at(0),d=at(3),v=Vn(l,"originalGravity",3,null),b=Ft(()=>zn.config.temp_units==="C"),g,m=null,T=at(!0),G=at(null),C=at(24),R=at(Ri([])),q=at(Ri([])),S=at(null);const I={RED:"#f43f5e",GREEN:"#10b981",BLACK:"#6b7280",PURPLE:"#a78bfa",ORANGE:"#fb923c",BLUE:"#60a5fa",YELLOW:"#facc15",PINK:"#f472b6"},k="#facc15",re="rgba(250, 204, 21, 0.3)",P="#71717a",ee="#a1a1aa",Q="rgba(255, 255, 255, 0.04)",ue="#22d3ee",E="rgba(250, 204, 21, 0.5)",x="brewsignal_chart_trend_enabled";let j=at(!0);function F(z,U,Z=1.01){const te=[];for(let ke=0;ke<z.length;ke++)U[ke]!==null&&te.push([z[ke],U[ke]]);if(te.length<10)return null;const X=te.length;let ve=0,ie=0,$=0,Me=0;for(const[ke,xe]of te)ve+=ke,ie+=xe,$+=ke*xe,Me+=ke*ke;const Re=X*Me-ve*ve;if(Math.abs(Re)<1e-10)return null;const Pe=(X*$-ve*ie)/Re,et=(ie-Pe*ve)/X,Nt=ie/X;let rl=0,Kt=0;for(const[ke,xe]of te){const Ae=Pe*ke+et;rl+=(xe-Ae)**2,Kt+=(xe-Nt)**2}const el=Kt>0?1-rl/Kt:0;let vl=null,Ht=null;if(Pe<0&&el>.3){const ke=z[z.length-1],xe=(Z-et)/Pe;xe>ke&&(Ht=(xe-ke)/(1440*60),Ht>0&&Ht<60?vl=Z:Ht=null)}return{slope:Pe,intercept:et,r2:el,predictedFg:vl,daysToFg:Ht}}function V(z,U){return z.map(Z=>U.slope*Z+U.intercept)}function O(z,U,Z){const te=new Date(z*1e3);try{return Z?te.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:U}):te.toLocaleDateString("en-AU",{month:"short",day:"numeric",timeZone:U})}catch(X){return console.warn("Invalid timezone:",U,X),Z?te.toLocaleTimeString("en-AU",{hour:"2-digit",minute:"2-digit",hour12:!1}):te.toLocaleDateString("en-AU",{month:"short",day:"numeric"})}}function se(z,U,Z){const te=k,X=I[l.tiltColor]||ee;return{width:z,height:220,padding:[16,12,0,0],cursor:{show:!0,x:!0,y:!0,drag:{x:!1,y:!1,setScale:!1}},legend:{show:!1},scales:{x:{time:!0},sg:{auto:!0,range:(ve,ie,$)=>{const Me=($-ie)*.1||.005;return[ie-Me,$+Me]}},temp:{auto:!0,range:(ve,ie,$)=>{const Me=$-ie,Re=10;if(Me<Re){const et=($+ie)/2;return[et-Re/2,et+Re/2]}const Pe=Me*.1;return[ie-Pe,$+Pe]}}},axes:[{stroke:P,grid:{stroke:Q,width:1},ticks:{stroke:Q,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ve,ie)=>ie.map($=>O($,Z,_(C)<=24))},{scale:"sg",stroke:te,grid:{stroke:Q,width:1},ticks:{stroke:Q,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ve,ie)=>ie.map($=>$.toFixed(3)),side:3},{scale:"temp",stroke:X,grid:{show:!1},ticks:{stroke:Q,width:1,size:4},font:'11px "JetBrains Mono", monospace',labelFont:'11px "JetBrains Mono", monospace',values:(ve,ie)=>ie.map($=>$.toFixed(0)+""),side:1}],series:[{},{label:"Gravity",scale:"sg",stroke:te,width:2,fill:(ve,ie)=>{const $=ve.ctx.createLinearGradient(0,ve.bbox.top,0,ve.bbox.top+ve.bbox.height);return $.addColorStop(0,re),$.addColorStop(1,"transparent"),$},points:{show:!1},paths:ht.paths.spline?.()},{label:"Wort Temp",scale:"temp",stroke:X,width:1.5,dash:[4,4],points:{show:!1},paths:ht.paths.spline?.()},{label:"Ambient",scale:"temp",stroke:ue,width:1.5,dash:[2,4],points:{show:!1},paths:ht.paths.spline?.()},{label:"Trend",scale:"sg",stroke:E,width:2,dash:[8,4],points:{show:!1},show:_(j)}]}}function H(z,U){if(U<=1)return z;const Z=[];for(let te=0;te<z.length;te++){const X=[],ve=Math.floor(U/2);for(let ie=Math.max(0,te-ve);ie<=Math.min(z.length-1,te+ve);ie++){const $=z[ie];$!==null&&X.push($)}X.length>0?Z.push(X.reduce((ie,$)=>ie+$,0)/X.length):Z.push(null)}return Z}function Ie(z,U,Z,te,X){if(z.length<=X)return[z,U,Z,te];const ve=Math.ceil(z.length/X),ie=[],$=[],Me=[],Re=[];for(let Pe=0;Pe<z.length;Pe+=ve){const et=Math.min(Pe+ve,z.length);let Nt=0,rl=0,Kt=0,el=0,vl=0,Ht=0;for(let ke=Pe;ke<et;ke++)U[ke]!==null&&(Nt+=U[ke],rl++),Z[ke]!==null&&(Kt+=Z[ke],el++),te[ke]!==null&&(vl+=te[ke],Ht++);ie.push(z[Math.floor((Pe+et-1)/2)]),$.push(rl>0?Nt/rl:null),Me.push(el>0?Kt/el:null),Re.push(Ht>0?vl/Ht:null)}return[ie,$,Me,Re]}function ge(z){return!z.endsWith("Z")&&!z.match(/[+-]\d{2}:\d{2}$/)&&(z=z+"Z"),new Date(z).getTime()/1e3}function pe(z,U,Z){if(z.length===0||U.length===0)return U.map(()=>null);const te=[...z].sort((ie,$)=>ge(ie.timestamp)-ge($.timestamp)),X=te.map(ie=>ge(ie.timestamp)),ve=te.map(ie=>ie.temperature===null?null:Z?ie.temperature:ie.temperature*9/5+32);return U.map(ie=>{let $=null,Me=null;for(let Re=0;Re<X.length;Re++)if(X[Re]<=ie&&($={time:X[Re],temp:ve[Re]}),X[Re]>=ie&&Me===null){Me={time:X[Re],temp:ve[Re]};break}if($&&Me&&$.temp!==null&&Me.temp!==null){if($.time===Me.time)return $.temp;const Re=(ie-$.time)/(Me.time-$.time);return $.temp+Re*(Me.temp-$.temp)}return $!==null&&$.temp!==null?$.temp:Me!==null&&Me.temp!==null?Me.temp:null})}function me(z,U,Z){const te=[...z].reverse();let X=[],ve=[],ie=[];for(const et of te){X.push(ge(et.timestamp)),ve.push(et.sg_calibrated??et.sg_raw);const Nt=et.temp_calibrated??et.temp_raw;Nt!==null?ie.push(Z?gn(Nt):Nt):ie.push(null)}let $=pe(U,X,Z);_(a)&&_(c)>1&&(ve=H(ve,_(c)),ie=H(ie,_(c)),$=H($,_(c))),[X,ve,ie,$]=Ie(X,ve,ie,$,500);const Re=F(X,ve);Ee(S,Re,!0);const Pe=Re?V(X,Re):X.map(()=>null);return[X,ve,ie,$,Pe]}const ce=3e4;async function N(z=!1){const Z=Date.now()-_(p);if(!(!z&&_(p)>0&&Z<ce)){Ee(T,!0),Ee(G,null);try{const[te,X]=await Promise.all([Ju(l.tiltId,_(C)),Zu(_(C)).catch(()=>[])]);Ee(R,te,!0),Ee(q,X,!0),De()}catch(te){Ee(G,te instanceof Error?te.message:"Failed to load data",!0)}finally{Ee(p,Date.now(),!0),Ee(T,!1)}}}function De(){if(!g||_(R).length===0)return;const z=me(_(R),_(q),_(b)),U=se(g.clientWidth,_(b),_(u));m&&m.destroy(),m=new ht(U,z,g)}function Ye(){m&&g&&m.setSize({width:g.clientWidth,height:220})}let _e=null;function he(){if(_e&&(clearInterval(_e),_e=null),_(d)>0){const z=_(d)*60*1e3;_e=setInterval(()=>{_(T)||N(!1)},z)}}ba(async()=>{const z=localStorage.getItem(i);if(z!==null){const Z=parseInt(z,10);Number.isNaN(Z)||Ee(d,Z,!0)}const U=localStorage.getItem(x);U!==null&&Ee(j,U==="true");try{const Z=await fetch("/api/system/timezone");if(Z.ok){const te=await Z.json();Ee(u,te.timezone||"UTC",!0)}}catch{console.warn("Failed to fetch system timezone, using UTC")}await N(!0),window.addEventListener("resize",Ye),he()}),Vr(()=>{m?.destroy(),window.removeEventListener("resize",Ye),_e&&clearInterval(_e)}),Rs(()=>{_(b)!==void 0&&_(R).length>0&&g&&De()}),Rs(()=>{_(a),_(c),_(R).length>0&&g&&De()});function tt(z){const U=Number(z.target.value);Ee(d,U,!0),localStorage.setItem(i,String(U)),he(),N(!0)}function Qe(){Ee(j,!_(j)),localStorage.setItem(x,String(_(j))),m&&m.setSeries(4,{show:_(j)})}var ye=uc(),st=L(ye),$e=L(st);yn($e,21,()=>Ku,Gn,(z,U)=>{var Z=sc();let te;Z.__click=()=>{_(C)!==_(U).hours&&(Ee(C,_(U).hours,!0),N(!0))};var X=L(Z,!0);M(Z),Mt(()=>{te=_l(Z,1,"range-btn svelte-1e832qd",null,te,{active:_(C)===_(U).hours}),Te(X,_(U).label)}),ze(z,Z)}),M($e);var We=K($e,2),rt=L(We),fe=K(L(rt),2);fe.__change=tt,yn(fe,21,()=>n,Gn,(z,U)=>{var Z=ic(),te=L(Z,!0);M(Z);var X={};Mt(()=>{Te(te,_(U).label),X!==(X=_(U).value)&&(Z.value=(Z.__value=_(U).value)??"")}),ze(z,Z)}),M(fe);var it;Jr(fe),M(rt);var ft=K(rt,2),At=K(L(ft),2),kt=L(At);Ml(2),M(At);var Ge=K(At,4);let Vt;Ge.__click=Qe;var ne=L(Ge);xn(ne,"background: rgba(250, 204, 21, 0.5);"),Ml(2),M(Ge),M(ft),M(We),M(st);var ae=K(st,2),B=L(ae);{var A=z=>{var U=ac();ze(z,U)};yt(B,z=>{_(T)&&z(A)})}var we=K(B,2);{var qe=z=>{var U=rc(),Z=K(L(U),2);Z.__click=()=>N(!0),M(U),ze(z,U)},zt=z=>{var U=wa(),Z=Bs(U);{var te=X=>{var ve=oc();ze(X,ve)};yt(Z,X=>{_(R).length===0&&X(te)},!0)}ze(z,U)};yt(we,z=>{_(G)?z(qe):z(zt,!1)})}M(ae),Us(ae,z=>g=z,()=>g);var Dt=K(ae,2);{var Lt=z=>{{let U=Ft(()=>l.onOgChange??(()=>{})),Z=Ft(()=>_(S)?{predictedFg:_(S).predictedFg,daysToFg:_(S).daysToFg,r2:_(S).r2}:null);nc(z,{get readings(){return _(R)},get originalGravity(){return v()},get onOgChange(){return _(U)},get trend(){return _(Z)}})}};yt(Dt,z=>{_(R).length>0&&z(Lt)})}M(ye),Mt(()=>{it!==(it=_(d))&&(fe.value=(fe.__value=_(d))??"",Zr(fe,_(d))),xn(kt,`background: ${(I[l.tiltColor]||"var(--text-secondary)")??""};`),Vt=_l(Ge,1,"legend-item legend-toggle svelte-1e832qd",null,Vt,{"legend-disabled":!_(j)}),kn(Ge,"title",_(j)?"Hide trend line":"Show trend line")}),ze(e,ye),Yn()}Bn(["click","change"]);var fc=He('<input type="text" class="beer-name-input svelte-3twv7v" maxlength="100"/>'),dc=He('<button type="button" class="beer-name-btn svelte-3twv7v" title="Click to edit beer name"><h3 class="text-lg font-semibold text-[var(--text-primary)] tracking-tight truncate"> </h3> <svg class="edit-icon svelte-3twv7v" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button>'),pc=He('<div class="w-1 rounded-sm transition-all"></div>'),hc=He('<div class="text-[11px] text-[var(--text-muted)] font-mono mb-3 px-1"><span class="opacity-60">Raw:</span> <span class="ml-1"> </span> <span class="mx-1 opacity-40"></span> <span> </span></div>'),vc=He("<div><!></div>"),gc=He('<button type="button" class="expand-btn svelte-3twv7v"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path></svg></button>'),mc=He('<div style="background: var(--bg-surface); border: 1px solid var(--border-subtle);"><div class="h-0.5"></div> <div class="p-5"><div class="flex justify-between items-start mb-5"><div class="flex-1 min-w-0 mr-3"><!> <div class="flex items-center gap-2 mt-1"><span class="w-2 h-2 rounded-full"></span> <span class="text-sm text-[var(--text-muted)] font-medium"> </span></div></div> <div class="flex flex-col items-end gap-1"><div class="flex items-end gap-0.5"></div> <span class="text-[10px] text-[var(--text-muted)] font-mono"> </span></div></div> <div class="grid grid-cols-2 gap-3 mb-4"><div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight svelte-3twv7v" style="color: var(--text-primary);"> </p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Gravity</p></div> <div class="rounded-md p-4 text-center" style="background: var(--bg-elevated);"><p class="text-3xl font-medium font-mono tracking-tight text-[var(--text-primary)] svelte-3twv7v"> <span class="text-lg text-[var(--text-secondary)]"> </span></p> <p class="text-[11px] text-[var(--text-muted)] uppercase tracking-wider mt-1 font-medium">Temp</p></div></div> <!>  <!> <div class="flex justify-between items-center pt-3 border-t border-[var(--bg-hover)]"><span class="text-[11px] text-[var(--text-muted)]"> </span> <div class="flex items-center gap-2"><!> <div class="w-1.5 h-1.5 rounded-full" style="background: var(--positive);"></div></div></div></div></div>');function _c(e,l){Un(l,!0);let i=Vn(l,"expanded",3,!1),n=Vn(l,"wide",3,!1),a=at(!1);Rs(()=>{i()&&!_(a)&&Ee(a,!0)});let c=at(!1),u=at(""),p=at(null),d=at(!1);function v(){Ee(u,l.tilt.beer_name,!0),Ee(c,!0),setTimeout(()=>_(p)?.focus(),0)}async function b(){if(_(d))return;const ne=_(u).trim();if(!ne||ne===l.tilt.beer_name){Ee(c,!1);return}Ee(d,!0);const ae=await Yr(l.tilt.id,ne);Ee(d,!1),ae&&Ee(c,!1)}function g(ne){ne.key==="Enter"?b():ne.key==="Escape"&&Ee(c,!1)}async function m(ne){await qr(l.tilt.id,ne)}let T=Ft(Sa);const G={RED:"var(--tilt-red)",GREEN:"var(--tilt-green)",BLACK:"var(--tilt-black)",PURPLE:"var(--tilt-purple)",ORANGE:"var(--tilt-orange)",BLUE:"var(--tilt-blue)",YELLOW:"var(--tilt-yellow)",PINK:"var(--tilt-pink)"};function C(ne){return ne.toFixed(3)}function R(ne){return Br(ne)}function q(ne){return ne>=-50?{bars:4,color:"var(--positive)",label:"Excellent"}:ne>=-60?{bars:3,color:"var(--positive)",label:"Good"}:ne>=-70?{bars:2,color:"var(--warning)",label:"Fair"}:{bars:1,color:"var(--negative)",label:"Weak"}}function S(ne){const ae=Math.floor((Date.now()-new Date(ne).getTime())/1e3);if(ae<10)return"just now";if(ae<60)return`${ae}s ago`;const B=Math.floor(ae/60);if(B<60)return`${B}m ago`;const A=Math.floor(B/60);return A<24?`${A}h ago`:`${Math.floor(A/24)}d ago`}let I=Ft(()=>G[l.tilt.color]||"var(--tilt-black)"),k=Ft(()=>q(l.tilt.rssi)),re=Ft(()=>S(l.tilt.last_seen));var P=mc();let ee;var Q=L(P),ue=K(Q,2),E=L(ue),x=L(E),j=L(x);{var F=ne=>{var ae=fc();ya(ae),ae.__keydown=g,Us(ae,B=>Ee(p,B),()=>_(p)),Mt(()=>ae.disabled=_(d)),xa("blur",ae,b),ka(ae,()=>_(u),B=>Ee(u,B)),ze(ne,ae)},V=ne=>{var ae=dc();ae.__click=v;var B=L(ae),A=L(B,!0);M(B),Ml(2),M(ae),Mt(()=>Te(A,l.tilt.beer_name)),ze(ne,ae)};yt(j,ne=>{_(c)?ne(F):ne(V,!1)})}var O=K(j,2),se=L(O),H=K(se,2),Ie=L(H,!0);M(H),M(O),M(x);var ge=K(x,2),pe=L(ge);yn(pe,20,()=>Array(4),Gn,(ne,ae,B)=>{var A=pc();Mt(()=>xn(A,`
								height: ${8+B*4}px;
								background: ${(B<_(k).bars?_(k).color:"var(--bg-hover)")??""};
								opacity: ${B<_(k).bars?1:.4};
							`)),ze(ne,A)}),M(pe);var me=K(pe,2),ce=L(me);M(me),M(ge),M(E);var N=K(E,2),De=L(N),Ye=L(De),_e=L(Ye,!0);M(Ye),Ml(2),M(De);var he=K(De,2),tt=L(he),Qe=L(tt,!0),ye=K(Qe),st=L(ye,!0);M(ye),M(tt),Ml(2),M(he),M(N);var $e=K(N,2);{var We=ne=>{var ae=hc(),B=K(L(ae),2),A=L(B,!0);M(B);var we=K(B,4),qe=L(we);M(we),M(ae),Mt((zt,Dt)=>{Te(A,zt),Te(qe,`${Dt??""}${_(T)??""}`)},[()=>C(l.tilt.sg_raw),()=>R(l.tilt.temp_raw)]),ze(ne,ae)};yt($e,ne=>{(l.tilt.sg!==l.tilt.sg_raw||l.tilt.temp!==l.tilt.temp_raw)&&ne(We)})}var rt=K($e,2);{var fe=ne=>{var ae=vc();let B;var A=L(ae);Qr(A,()=>l.tilt.id,we=>{cc(we,{get tiltId(){return l.tilt.id},get tiltColor(){return l.tilt.color},get originalGravity(){return l.tilt.original_gravity},onOgChange:m})}),M(ae),Mt(()=>B=_l(ae,1,"chart-section svelte-3twv7v",null,B,{hidden:!i()})),ze(ne,ae)};yt(rt,ne=>{_(a)&&ne(fe)})}var it=K(rt,2),ft=L(it),At=L(ft);M(ft);var kt=K(ft,2),Ge=L(kt);{var Vt=ne=>{var ae=gc();ae.__click=function(...we){l.onToggleExpand?.apply(this,we)};var B=L(ae);let A;M(ae),Mt(()=>{kn(ae,"aria-label",i()?"Collapse chart":"Expand chart"),A=_l(B,0,"w-4 h-4 transition-transform",null,A,{"rotate-180":i()})}),ze(ne,ae)};yt(Ge,ne=>{l.onToggleExpand&&ne(Vt)})}Ml(2),M(kt),M(it),M(ue),M(P),Mt((ne,ae)=>{ee=_l(P,1,"card rounded-lg overflow-hidden animate-fade-in svelte-3twv7v",null,ee,{expanded:i(),wide:n()}),xn(Q,`background: ${_(I)??""};`),xn(se,`background: ${_(I)??""};`),Te(Ie,l.tilt.color),kn(ge,"title",`${_(k).label??""} signal (${l.tilt.rssi??""} dBm)`),Te(ce,`${l.tilt.rssi??""} dBm`),Te(_e,ne),Te(Qe,ae),Te(st,_(T)),Te(At,`Updated ${_(re)??""}`)},[()=>C(l.tilt.sg),()=>R(l.tilt.temp)]),ze(e,P),Yn()}Bn(["keydown","click"]);var wc=He('<div><span class="alert-day svelte-1uha8ag"> </span> <span class="alert-message svelte-1uha8ag"> </span></div>'),xc=He('<div class="alerts-list svelte-1uha8ag"></div>'),bc=He('<button type="button" class="show-more-btn svelte-1uha8ag"> </button>'),Sc=He('<div class="alerts-banner svelte-1uha8ag"><div class="alerts-header svelte-1uha8ag"><div class="alerts-title svelte-1uha8ag"><svg class="w-5 h-5 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Weather Alerts</span> <span class="alerts-count svelte-1uha8ag"> </span></div> <button type="button" class="dismiss-btn svelte-1uha8ag" aria-label="Dismiss alerts"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" class="svelte-1uha8ag"></path></svg></button></div> <!> <!></div>'),yc=He('<span class="connecting-dots svelte-1uha8ag">Connecting to server</span>'),kc=He('<div class="empty-hint svelte-1uha8ag"><svg class="w-4 h-4 svelte-1uha8ag" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" class="svelte-1uha8ag"></path></svg> <span class="svelte-1uha8ag">Make sure your Tilt is floating in liquid and within Bluetooth range</span></div>'),Tc=He('<div class="empty-state svelte-1uha8ag"><div class="empty-icon svelte-1uha8ag"><span class="text-5xl svelte-1uha8ag"></span></div> <h2 class="empty-title svelte-1uha8ag">No Tilts Detected</h2> <p class="empty-description svelte-1uha8ag"><!></p> <!></div>'),Ec=He("<div></div>"),Mc=He("<!> <!>",1);function Hc(e,l){Un(l,!0);let i=at(!1),n=at(!1);ba(()=>{const C=localStorage.getItem("brewsignal_alerts_dismissed"),R=localStorage.getItem("brewsignal_alerts_dismissed_time");return C==="true"&&R&&Date.now()-parseInt(R,10)<360*60*1e3&&Ee(i,!0),jr(),()=>{Kr()}});let a=Ft(()=>Array.from(ks.tilts.values())),c=at(null);function u(C){Ee(c,_(c)===C?null:C,!0)}function p(){Ee(i,!0),localStorage.setItem("brewsignal_alerts_dismissed","true"),localStorage.setItem("brewsignal_alerts_dismissed_time",Date.now().toString())}function d(){Ee(n,!_(n))}var v=Mc();Ur("1uha8ag",C=>{Hr(()=>{Ir.title="Dashboard | BrewSignal"})});var b=Bs(v);{var g=C=>{var R=Sc(),q=L(R),S=L(q),I=K(L(S),4),k=L(I,!0);M(I),M(S);var re=K(S,2);re.__click=p,M(q);var P=K(q,2);{var ee=E=>{var x=xc();yn(x,21,()=>pn.alerts,Gn,(j,F)=>{var V=wc();let O;var se=L(V),H=L(se);M(se);var Ie=K(se,2),ge=L(Ie,!0);M(Ie),M(V),Mt(()=>{O=_l(V,1,"alert-item svelte-1uha8ag",null,O,{warning:_(F).level==="warning",critical:_(F).level==="critical"}),Te(H,`${_(F).day??""}:`),Te(ge,_(F).message)}),ze(j,V)}),M(x),ze(E,x)};yt(P,E=>{_(n)||E(ee)})}var Q=K(P,2);{var ue=E=>{var x=bc();x.__click=d;var j=L(x,!0);M(x),Mt(()=>Te(j,_(n)?`Show ${pn.alerts.length} alerts`:"Show less")),ze(E,x)};yt(Q,E=>{pn.alerts.length>3&&E(ue)})}M(R),Mt(()=>Te(k,pn.alerts.length)),ze(C,R)};yt(b,C=>{pn.alerts.length>0&&!_(i)&&C(g)})}var m=K(b,2);{var T=C=>{var R=Tc(),q=K(L(R),4),S=L(q);{var I=ee=>{var Q=Fr("Waiting for Tilt hydrometers to broadcast...");ze(ee,Q)},k=ee=>{var Q=yc();ze(ee,Q)};yt(S,ee=>{ks.connected?ee(I):ee(k,!1)})}M(q);var re=K(q,2);{var P=ee=>{var Q=kc();ze(ee,Q)};yt(re,ee=>{ks.connected&&ee(P)})}M(R),ze(C,R)},G=C=>{var R=Ec();let q;yn(R,21,()=>_(a),S=>S.id,(S,I)=>{{let k=Ft(()=>_(c)===_(I).id),re=Ft(()=>_(a).length===1);_c(S,{get tilt(){return _(I)},get expanded(){return _(k)},get wide(){return _(re)},onToggleExpand:()=>u(_(I).id)})}}),M(R),Mt(()=>q=_l(R,1,"tilt-grid svelte-1uha8ag",null,q,{"single-tilt":_(a).length===1})),ze(C,R)};yt(m,C=>{_(a).length===0?C(T):C(G,!1)})}ze(e,v),Yn()}Bn(["click"]);export{Hc as component};
